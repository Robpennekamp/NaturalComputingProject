{"type":"File","start":0,"end":4443,"loc":{"start":{"line":1,"column":0},"end":{"line":138,"column":0}},"program":{"type":"Program","start":0,"end":4443,"loc":{"start":{"line":1,"column":0},"end":{"line":138,"column":0}},"sourceType":"module","body":[{"type":"ImportDeclaration","start":1,"end":29,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":28}},"specifiers":[{"type":"ImportDefaultSpecifier","start":8,"end":12,"loc":{"start":{"line":2,"column":7},"end":{"line":2,"column":11}},"local":{"type":"Identifier","start":8,"end":12,"loc":{"start":{"line":2,"column":7},"end":{"line":2,"column":11},"identifierName":"Stat"},"name":"Stat"}}],"source":{"type":"StringLiteral","start":18,"end":29,"loc":{"start":{"line":2,"column":17},"end":{"line":2,"column":28}},"extra":{"rawValue":"./Stat.js","raw":"\"./Stat.js\""},"value":"./Stat.js"}},{"type":"ImportDeclaration","start":30,"end":74,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"specifiers":[{"type":"ImportDefaultSpecifier","start":37,"end":49,"loc":{"start":{"line":3,"column":7},"end":{"line":3,"column":19}},"local":{"type":"Identifier","start":37,"end":49,"loc":{"start":{"line":3,"column":7},"end":{"line":3,"column":19},"identifierName":"PixelsByCell"},"name":"PixelsByCell"}}],"source":{"type":"StringLiteral","start":55,"end":74,"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":44}},"extra":{"rawValue":"./PixelsByCell.js","raw":"\"./PixelsByCell.js\""},"value":"./PixelsByCell.js","leadingComments":null,"trailingComments":null},"trailingComments":[{"type":"CommentBlock","value":"*\tThis Stat computes the centroid of a cell when grid has a torus. \n\n\t!!! Assumption: cell pixels never extend for more than half the size of the grid.\n\tIf this assumption does not hold, centroids may be computed wrongly.\n\t\n\tSee also {@link Centroids} for a version without torus correction.\n\t\t\n\t@example\n\t* let CPM = require( \"path/to/build\" )\n\t*\n\t* // Make a CPM, seed two cells, run a little, and get their centroids\n\t* let C = new CPM.CPM( [100,100], { \n\t* \tT:20,\n\t* \ttorus:[true,true],\n\t* \tJ:[[0,20],[20,10]],\n\t* \tV:[0,200],\n\t* \tLAMBDA_V:[0,2]\n\t* } )\n\t* let gm = new CPM.GridManipulator( C )\n\t* gm.seedCell(1)\n\t* gm.seedCell(1)\n\t* for( let t = 0; t < 100; t++ ){ C.timeStep() }\n\t*\n\t* C.getStat( CPM.CentroidsWithTorusCorrection ) \n","start":76,"end":816,"loc":{"start":{"line":5,"column":0},"end":{"line":29,"column":2}}}]},{"type":"Identifier","start":818,"end":4397,"loc":{"start":{"line":31,"column":0},"end":{"line":135,"column":1}},"id":{"type":"Identifier","start":824,"end":852,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":34},"identifierName":"CentroidsWithTorusCorrection"},"name":"CentroidsWithTorusCorrection","leadingComments":null},"superClass":{"type":"Identifier","start":861,"end":865,"loc":{"start":{"line":31,"column":43},"end":{"line":31,"column":47},"identifierName":"Stat"},"name":"Stat"},"body":{"type":"ClassBody","start":866,"end":4397,"loc":{"start":{"line":31,"column":48},"end":{"line":135,"column":1}},"body":[{"type":"ClassMethod","start":1002,"end":1467,"loc":{"start":{"line":35,"column":1},"end":{"line":48,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":1006,"end":1011,"loc":{"start":{"line":35,"column":5},"end":{"line":35,"column":10},"identifierName":"model"},"name":"model"},"kind":"set","id":null,"generator":false,"expression":false,"async":false,"params":[{"type":"Identifier","start":1013,"end":1014,"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":13},"identifierName":"M"},"name":"M"}],"body":{"type":"BlockStatement","start":1016,"end":1467,"loc":{"start":{"line":35,"column":15},"end":{"line":48,"column":2}},"body":[{"type":"ExpressionStatement","start":1091,"end":1101,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":12}},"expression":{"type":"AssignmentExpression","start":1091,"end":1101,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":12}},"operator":"=","left":{"type":"MemberExpression","start":1091,"end":1097,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":8}},"object":{"type":"ThisExpression","start":1091,"end":1095,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":6}},"leadingComments":null},"property":{"type":"Identifier","start":1096,"end":1097,"loc":{"start":{"line":39,"column":7},"end":{"line":39,"column":8},"identifierName":"M"},"name":"M"},"computed":false,"leadingComments":null},"right":{"type":"Identifier","start":1100,"end":1101,"loc":{"start":{"line":39,"column":11},"end":{"line":39,"column":12},"identifierName":"M"},"name":"M","leadingComments":null,"trailingComments":null},"leadingComments":null,"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* The model to compute centroids on. \n\t\t@type {GridBasedModel}","start":1022,"end":1088,"loc":{"start":{"line":37,"column":2},"end":{"line":38,"column":26}}}],"trailingComments":[{"type":"CommentLine","value":" Half the grid dimensions; if pixels with the same cellid are further apart,","start":1104,"end":1182,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":80}}},{"type":"CommentLine","value":" we assume they are on the border of the grid and that we need to correct","start":1185,"end":1260,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":77}}},{"type":"CommentLine","value":" their positions to compute the centroid.","start":1263,"end":1306,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":45}}},{"type":"CommentBlock","value":"* @ignore ","start":1309,"end":1323,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":16}}}]},{"type":"ExpressionStatement","start":1326,"end":1373,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":49}},"expression":{"type":"AssignmentExpression","start":1326,"end":1373,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":49}},"operator":"=","left":{"type":"MemberExpression","start":1326,"end":1339,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":15}},"object":{"type":"ThisExpression","start":1326,"end":1330,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":6}},"leadingComments":null},"property":{"type":"Identifier","start":1331,"end":1339,"loc":{"start":{"line":44,"column":7},"end":{"line":44,"column":15},"identifierName":"halfsize"},"name":"halfsize"},"computed":false,"leadingComments":null},"right":{"type":"CallExpression","start":1342,"end":1373,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":49}},"callee":{"type":"MemberExpression","start":1342,"end":1370,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":46}},"object":{"type":"NewExpression","start":1342,"end":1365,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":41}},"callee":{"type":"Identifier","start":1346,"end":1351,"loc":{"start":{"line":44,"column":22},"end":{"line":44,"column":27},"identifierName":"Array"},"name":"Array"},"arguments":[{"type":"MemberExpression","start":1353,"end":1364,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":40}},"object":{"type":"MemberExpression","start":1353,"end":1359,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":35}},"object":{"type":"ThisExpression","start":1353,"end":1357,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":33}}},"property":{"type":"Identifier","start":1358,"end":1359,"loc":{"start":{"line":44,"column":34},"end":{"line":44,"column":35},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":1360,"end":1364,"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":40},"identifierName":"ndim"},"name":"ndim"},"computed":false}]},"property":{"type":"Identifier","start":1366,"end":1370,"loc":{"start":{"line":44,"column":42},"end":{"line":44,"column":46},"identifierName":"fill"},"name":"fill"},"computed":false},"arguments":[{"type":"NumericLiteral","start":1371,"end":1372,"loc":{"start":{"line":44,"column":47},"end":{"line":44,"column":48}},"extra":{"rawValue":0,"raw":"0"},"value":0}]},"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" Half the grid dimensions; if pixels with the same cellid are further apart,","start":1104,"end":1182,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":80}}},{"type":"CommentLine","value":" we assume they are on the border of the grid and that we need to correct","start":1185,"end":1260,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":77}}},{"type":"CommentLine","value":" their positions to compute the centroid.","start":1263,"end":1306,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":45}}},{"type":"CommentBlock","value":"* @ignore ","start":1309,"end":1323,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":16}}}]},{"type":"ForStatement","start":1376,"end":1464,"loc":{"start":{"line":45,"column":2},"end":{"line":47,"column":3}},"init":{"type":"VariableDeclaration","start":1381,"end":1390,"loc":{"start":{"line":45,"column":7},"end":{"line":45,"column":16}},"declarations":[{"type":"VariableDeclarator","start":1385,"end":1390,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":16}},"id":{"type":"Identifier","start":1385,"end":1386,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":12},"identifierName":"i"},"name":"i"},"init":{"type":"NumericLiteral","start":1389,"end":1390,"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":16}},"extra":{"rawValue":0,"raw":"0"},"value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","start":1393,"end":1408,"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":34}},"left":{"type":"Identifier","start":1393,"end":1394,"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":20},"identifierName":"i"},"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":1397,"end":1408,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":34}},"object":{"type":"MemberExpression","start":1397,"end":1403,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":29}},"object":{"type":"ThisExpression","start":1397,"end":1401,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":27}}},"property":{"type":"Identifier","start":1402,"end":1403,"loc":{"start":{"line":45,"column":28},"end":{"line":45,"column":29},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":1404,"end":1408,"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":34},"identifierName":"ndim"},"name":"ndim"},"computed":false}},"update":{"type":"UpdateExpression","start":1411,"end":1415,"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":41}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":1411,"end":1412,"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":38},"identifierName":"i"},"name":"i"}},"body":{"type":"BlockStatement","start":1417,"end":1464,"loc":{"start":{"line":45,"column":43},"end":{"line":47,"column":3}},"body":[{"type":"ExpressionStatement","start":1422,"end":1460,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":41}},"expression":{"type":"AssignmentExpression","start":1422,"end":1460,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":41}},"operator":"=","left":{"type":"MemberExpression","start":1422,"end":1438,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":19}},"object":{"type":"MemberExpression","start":1422,"end":1435,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":16}},"object":{"type":"ThisExpression","start":1422,"end":1426,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":7}}},"property":{"type":"Identifier","start":1427,"end":1435,"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":16},"identifierName":"halfsize"},"name":"halfsize"},"computed":false},"property":{"type":"Identifier","start":1436,"end":1437,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":18},"identifierName":"i"},"name":"i"},"computed":true},"right":{"type":"BinaryExpression","start":1441,"end":1460,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":41}},"left":{"type":"MemberExpression","start":1441,"end":1458,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":39}},"object":{"type":"MemberExpression","start":1441,"end":1455,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":36}},"object":{"type":"MemberExpression","start":1441,"end":1447,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":28}},"object":{"type":"ThisExpression","start":1441,"end":1445,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":26}}},"property":{"type":"Identifier","start":1446,"end":1447,"loc":{"start":{"line":46,"column":27},"end":{"line":46,"column":28},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":1448,"end":1455,"loc":{"start":{"line":46,"column":29},"end":{"line":46,"column":36},"identifierName":"extents"},"name":"extents"},"computed":false},"property":{"type":"Identifier","start":1456,"end":1457,"loc":{"start":{"line":46,"column":37},"end":{"line":46,"column":38},"identifierName":"i"},"name":"i"},"computed":true},"operator":"/","right":{"type":"NumericLiteral","start":1459,"end":1460,"loc":{"start":{"line":46,"column":40},"end":{"line":46,"column":41}},"extra":{"rawValue":2,"raw":"2"},"value":2}}}}],"directives":[]}}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* The set model method of class CentroidsWithTorusCorrection.\n\t@param {GridBasedModel} M - the model to compute centroids on. ","start":870,"end":1000,"loc":{"start":{"line":33,"column":1},"end":{"line":34,"column":66}}}],"trailingComments":[{"type":"CommentBlock","value":"* @ignore ","start":1471,"end":1485,"loc":{"start":{"line":50,"column":1},"end":{"line":50,"column":15}}}]},{"type":"ClassMethod","start":1487,"end":1524,"loc":{"start":{"line":51,"column":1},"end":{"line":53,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":1487,"end":1498,"loc":{"start":{"line":51,"column":1},"end":{"line":51,"column":12},"identifierName":"constructor"},"name":"constructor","leadingComments":null},"kind":"constructor","id":null,"generator":false,"expression":false,"async":false,"params":[{"type":"Identifier","start":1500,"end":1504,"loc":{"start":{"line":51,"column":14},"end":{"line":51,"column":18},"identifierName":"conf"},"name":"conf"}],"body":{"type":"BlockStatement","start":1506,"end":1524,"loc":{"start":{"line":51,"column":20},"end":{"line":53,"column":2}},"body":[{"type":"ExpressionStatement","start":1510,"end":1521,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":13}},"expression":{"type":"CallExpression","start":1510,"end":1521,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":13}},"callee":{"type":"Super","start":1510,"end":1515,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":7}}},"arguments":[{"type":"Identifier","start":1516,"end":1520,"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":12},"identifierName":"conf"},"name":"conf"}]}}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* @ignore ","start":1471,"end":1485,"loc":{"start":{"line":50,"column":1},"end":{"line":50,"column":15}}}],"trailingComments":[{"type":"CommentBlock","value":"* This method computes the centroid of a specific cell with id = <cellid>. \n\tThe cellpixels object is given as an argument so that it only has to be requested\n\tonce for all cells together.\n\t@param {CellId} cellid ID number of the cell to get centroid of. \n\t@param {CellArrayObject} cellpixels object produced by {@link PixelsByCell}, \n\twhere keys are the cellids\n\tof all non-background cells on the grid, and the corresponding value is an array\n\tof the pixels belonging to that cell specified by their {@link ArrayCoordinate}.\n\t@return {ArrayCoordinate} the centroid of the current cell.\n\t","start":1529,"end":2122,"loc":{"start":{"line":55,"column":1},"end":{"line":64,"column":3}}}]},{"type":"ClassMethod","start":2124,"end":3775,"loc":{"start":{"line":65,"column":1},"end":{"line":116,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":2124,"end":2145,"loc":{"start":{"line":65,"column":1},"end":{"line":65,"column":22},"identifierName":"computeCentroidOfCell"},"name":"computeCentroidOfCell","leadingComments":null},"kind":"method","id":null,"generator":false,"expression":false,"async":false,"params":[{"type":"Identifier","start":2147,"end":2153,"loc":{"start":{"line":65,"column":24},"end":{"line":65,"column":30},"identifierName":"cellid"},"name":"cellid"},{"type":"Identifier","start":2155,"end":2165,"loc":{"start":{"line":65,"column":32},"end":{"line":65,"column":42},"identifierName":"cellpixels"},"name":"cellpixels"}],"body":{"type":"BlockStatement","start":2168,"end":3775,"loc":{"start":{"line":65,"column":45},"end":{"line":116,"column":2}},"body":[{"type":"VariableDeclaration","start":2229,"end":2264,"loc":{"start":{"line":69,"column":2},"end":{"line":69,"column":37}},"declarations":[{"type":"VariableDeclarator","start":2235,"end":2264,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":37}},"id":{"type":"Identifier","start":2235,"end":2241,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":14},"identifierName":"pixels"},"name":"pixels","leadingComments":null},"init":{"type":"MemberExpression","start":2244,"end":2264,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":37}},"object":{"type":"Identifier","start":2244,"end":2254,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":27},"identifierName":"cellpixels"},"name":"cellpixels"},"property":{"type":"Identifier","start":2256,"end":2262,"loc":{"start":{"line":69,"column":29},"end":{"line":69,"column":35},"identifierName":"cellid"},"name":"cellid"},"computed":true,"trailingComments":null},"leadingComments":null,"trailingComments":null}],"kind":"const","leadingComments":[{"type":"CommentLine","value":"let cellpixels = this.M.getStat( PixelsByCell ) ","start":2174,"end":2224,"loc":{"start":{"line":67,"column":2},"end":{"line":67,"column":52}}}],"trailingComments":[{"type":"CommentLine","value":" cvec will contain the x, y, (z) coordinate of the centroid.","start":2270,"end":2332,"loc":{"start":{"line":71,"column":2},"end":{"line":71,"column":64}}},{"type":"CommentLine","value":" Loop over the dimensions to compute each element separately.","start":2335,"end":2398,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":65}}}]},{"type":"VariableDeclaration","start":2401,"end":2442,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":43}},"declarations":[{"type":"VariableDeclarator","start":2405,"end":2442,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":43}},"id":{"type":"Identifier","start":2405,"end":2409,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":10},"identifierName":"cvec"},"name":"cvec","leadingComments":null},"init":{"type":"CallExpression","start":2412,"end":2442,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":43}},"callee":{"type":"MemberExpression","start":2412,"end":2439,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":40}},"object":{"type":"NewExpression","start":2412,"end":2434,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":35}},"callee":{"type":"Identifier","start":2416,"end":2421,"loc":{"start":{"line":73,"column":17},"end":{"line":73,"column":22},"identifierName":"Array"},"name":"Array"},"arguments":[{"type":"MemberExpression","start":2422,"end":2433,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":34}},"object":{"type":"MemberExpression","start":2422,"end":2428,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":29}},"object":{"type":"ThisExpression","start":2422,"end":2426,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":27}}},"property":{"type":"Identifier","start":2427,"end":2428,"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":29},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":2429,"end":2433,"loc":{"start":{"line":73,"column":30},"end":{"line":73,"column":34},"identifierName":"ndim"},"name":"ndim"},"computed":false}]},"property":{"type":"Identifier","start":2435,"end":2439,"loc":{"start":{"line":73,"column":36},"end":{"line":73,"column":40},"identifierName":"fill"},"name":"fill"},"computed":false},"arguments":[{"type":"NumericLiteral","start":2440,"end":2441,"loc":{"start":{"line":73,"column":41},"end":{"line":73,"column":42}},"extra":{"rawValue":0,"raw":"0"},"value":0}]},"leadingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" cvec will contain the x, y, (z) coordinate of the centroid.","start":2270,"end":2332,"loc":{"start":{"line":71,"column":2},"end":{"line":71,"column":64}}},{"type":"CommentLine","value":" Loop over the dimensions to compute each element separately.","start":2335,"end":2398,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":65}}}]},{"type":"ForStatement","start":2445,"end":3755,"loc":{"start":{"line":74,"column":2},"end":{"line":113,"column":3}},"init":{"type":"VariableDeclaration","start":2450,"end":2461,"loc":{"start":{"line":74,"column":7},"end":{"line":74,"column":18}},"declarations":[{"type":"VariableDeclarator","start":2454,"end":2461,"loc":{"start":{"line":74,"column":11},"end":{"line":74,"column":18}},"id":{"type":"Identifier","start":2454,"end":2457,"loc":{"start":{"line":74,"column":11},"end":{"line":74,"column":14},"identifierName":"dim"},"name":"dim"},"init":{"type":"NumericLiteral","start":2460,"end":2461,"loc":{"start":{"line":74,"column":17},"end":{"line":74,"column":18}},"extra":{"rawValue":0,"raw":"0"},"value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","start":2464,"end":2481,"loc":{"start":{"line":74,"column":21},"end":{"line":74,"column":38}},"left":{"type":"Identifier","start":2464,"end":2467,"loc":{"start":{"line":74,"column":21},"end":{"line":74,"column":24},"identifierName":"dim"},"name":"dim"},"operator":"<","right":{"type":"MemberExpression","start":2470,"end":2481,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":38}},"object":{"type":"MemberExpression","start":2470,"end":2476,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":33}},"object":{"type":"ThisExpression","start":2470,"end":2474,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":31}}},"property":{"type":"Identifier","start":2475,"end":2476,"loc":{"start":{"line":74,"column":32},"end":{"line":74,"column":33},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":2477,"end":2481,"loc":{"start":{"line":74,"column":34},"end":{"line":74,"column":38},"identifierName":"ndim"},"name":"ndim"},"computed":false}},"update":{"type":"UpdateExpression","start":2484,"end":2490,"loc":{"start":{"line":74,"column":41},"end":{"line":74,"column":47}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":2484,"end":2487,"loc":{"start":{"line":74,"column":41},"end":{"line":74,"column":44},"identifierName":"dim"},"name":"dim"}},"body":{"type":"BlockStatement","start":2492,"end":3755,"loc":{"start":{"line":74,"column":49},"end":{"line":113,"column":3}},"body":[{"type":"VariableDeclaration","start":2501,"end":2512,"loc":{"start":{"line":76,"column":3},"end":{"line":76,"column":14}},"declarations":[{"type":"VariableDeclarator","start":2505,"end":2512,"loc":{"start":{"line":76,"column":7},"end":{"line":76,"column":14}},"id":{"type":"Identifier","start":2505,"end":2507,"loc":{"start":{"line":76,"column":7},"end":{"line":76,"column":9},"identifierName":"mi"},"name":"mi"},"init":{"type":"NumericLiteral","start":2510,"end":2512,"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":14}},"extra":{"rawValue":0,"raw":"0."},"value":0}}],"kind":"let"},{"type":"VariableDeclaration","start":2516,"end":2572,"loc":{"start":{"line":77,"column":3},"end":{"line":77,"column":59}},"declarations":[{"type":"VariableDeclarator","start":2522,"end":2546,"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":33}},"id":{"type":"Identifier","start":2522,"end":2525,"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":12},"identifierName":"hsi"},"name":"hsi"},"init":{"type":"MemberExpression","start":2528,"end":2546,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":33}},"object":{"type":"MemberExpression","start":2528,"end":2541,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":28}},"object":{"type":"ThisExpression","start":2528,"end":2532,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":19}}},"property":{"type":"Identifier","start":2533,"end":2541,"loc":{"start":{"line":77,"column":20},"end":{"line":77,"column":28},"identifierName":"halfsize"},"name":"halfsize"},"computed":false},"property":{"type":"Identifier","start":2542,"end":2545,"loc":{"start":{"line":77,"column":29},"end":{"line":77,"column":32},"identifierName":"dim"},"name":"dim"},"computed":true}},{"type":"VariableDeclarator","start":2548,"end":2572,"loc":{"start":{"line":77,"column":35},"end":{"line":77,"column":59}},"id":{"type":"Identifier","start":2548,"end":2550,"loc":{"start":{"line":77,"column":35},"end":{"line":77,"column":37},"identifierName":"si"},"name":"si"},"init":{"type":"MemberExpression","start":2553,"end":2572,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":59}},"object":{"type":"MemberExpression","start":2553,"end":2567,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":54}},"object":{"type":"MemberExpression","start":2553,"end":2559,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":46}},"object":{"type":"ThisExpression","start":2553,"end":2557,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":44}}},"property":{"type":"Identifier","start":2558,"end":2559,"loc":{"start":{"line":77,"column":45},"end":{"line":77,"column":46},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":2560,"end":2567,"loc":{"start":{"line":77,"column":47},"end":{"line":77,"column":54},"identifierName":"extents"},"name":"extents"},"computed":false},"property":{"type":"Identifier","start":2568,"end":2571,"loc":{"start":{"line":77,"column":55},"end":{"line":77,"column":58},"identifierName":"dim"},"name":"dim"},"computed":true,"trailingComments":null},"trailingComments":null}],"kind":"const","trailingComments":[{"type":"CommentLine","value":" Loop over the pixels;","start":2580,"end":2604,"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":27}}},{"type":"CommentLine","value":" compute mean position per dimension with online algorithm","start":2608,"end":2668,"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":63}}}]},{"type":"ForStatement","start":2672,"end":3456,"loc":{"start":{"line":81,"column":3},"end":{"line":101,"column":4}},"init":{"type":"VariableDeclaration","start":2677,"end":2686,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":17}},"declarations":[{"type":"VariableDeclarator","start":2681,"end":2686,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":17}},"id":{"type":"Identifier","start":2681,"end":2682,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":13},"identifierName":"j"},"name":"j","leadingComments":null},"init":{"type":"NumericLiteral","start":2685,"end":2686,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":17}},"extra":{"rawValue":0,"raw":"0"},"value":0},"leadingComments":null}],"kind":"let","leadingComments":null},"test":{"type":"BinaryExpression","start":2689,"end":2706,"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":37}},"left":{"type":"Identifier","start":2689,"end":2690,"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":21},"identifierName":"j"},"name":"j"},"operator":"<","right":{"type":"MemberExpression","start":2693,"end":2706,"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":37}},"object":{"type":"Identifier","start":2693,"end":2699,"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":30},"identifierName":"pixels"},"name":"pixels"},"property":{"type":"Identifier","start":2700,"end":2706,"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":37},"identifierName":"length"},"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":2709,"end":2713,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":44}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":2709,"end":2710,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":41},"identifierName":"j"},"name":"j"}},"body":{"type":"BlockStatement","start":2715,"end":3456,"loc":{"start":{"line":81,"column":46},"end":{"line":101,"column":4}},"body":[{"type":"VariableDeclaration","start":3127,"end":3155,"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":32}},"declarations":[{"type":"VariableDeclarator","start":3131,"end":3155,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":32}},"id":{"type":"Identifier","start":3131,"end":3133,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":10},"identifierName":"dx"},"name":"dx","leadingComments":null},"init":{"type":"BinaryExpression","start":3136,"end":3155,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":32}},"left":{"type":"MemberExpression","start":3136,"end":3150,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":27}},"object":{"type":"MemberExpression","start":3136,"end":3145,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":22}},"object":{"type":"Identifier","start":3136,"end":3142,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":19},"identifierName":"pixels"},"name":"pixels"},"property":{"type":"Identifier","start":3143,"end":3144,"loc":{"start":{"line":89,"column":20},"end":{"line":89,"column":21},"identifierName":"j"},"name":"j"},"computed":true},"property":{"type":"Identifier","start":3146,"end":3149,"loc":{"start":{"line":89,"column":23},"end":{"line":89,"column":26},"identifierName":"dim"},"name":"dim"},"computed":true},"operator":"-","right":{"type":"Identifier","start":3153,"end":3155,"loc":{"start":{"line":89,"column":30},"end":{"line":89,"column":32},"identifierName":"mi"},"name":"mi"}},"leadingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" Check distance of current pixel to the accumulated mean in this dim.","start":2726,"end":2797,"loc":{"start":{"line":83,"column":4},"end":{"line":83,"column":75}}},{"type":"CommentLine","value":" Check if this distance is greater than half the grid size in this","start":2802,"end":2870,"loc":{"start":{"line":84,"column":4},"end":{"line":84,"column":72}}},{"type":"CommentLine","value":" dimension; if so, this indicates that the cell has moved to the","start":2875,"end":2941,"loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":70}}},{"type":"CommentLine","value":" other end of the grid because of the torus. Note that this only","start":2946,"end":3012,"loc":{"start":{"line":86,"column":4},"end":{"line":86,"column":70}}},{"type":"CommentLine","value":" holds AFTER the first pixel (so for j > 0), when we actually have","start":3017,"end":3085,"loc":{"start":{"line":87,"column":4},"end":{"line":87,"column":72}}},{"type":"CommentLine","value":" an idea of where the cell is.","start":3090,"end":3122,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":36}}}]},{"type":"IfStatement","start":3160,"end":3379,"loc":{"start":{"line":90,"column":4},"end":{"line":98,"column":5}},"test":{"type":"LogicalExpression","start":3164,"end":3195,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":39}},"left":{"type":"MemberExpression","start":3164,"end":3186,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":30}},"object":{"type":"MemberExpression","start":3164,"end":3181,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":25}},"object":{"type":"MemberExpression","start":3164,"end":3175,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":19}},"object":{"type":"MemberExpression","start":3164,"end":3170,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":14}},"object":{"type":"ThisExpression","start":3164,"end":3168,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":12}}},"property":{"type":"Identifier","start":3169,"end":3170,"loc":{"start":{"line":90,"column":13},"end":{"line":90,"column":14},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":3171,"end":3175,"loc":{"start":{"line":90,"column":15},"end":{"line":90,"column":19},"identifierName":"grid"},"name":"grid"},"computed":false},"property":{"type":"Identifier","start":3176,"end":3181,"loc":{"start":{"line":90,"column":20},"end":{"line":90,"column":25},"identifierName":"torus"},"name":"torus"},"computed":false},"property":{"type":"Identifier","start":3182,"end":3185,"loc":{"start":{"line":90,"column":26},"end":{"line":90,"column":29},"identifierName":"dim"},"name":"dim"},"computed":true},"operator":"&&","right":{"type":"BinaryExpression","start":3190,"end":3195,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":39}},"left":{"type":"Identifier","start":3190,"end":3191,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":35},"identifierName":"j"},"name":"j"},"operator":">","right":{"type":"NumericLiteral","start":3194,"end":3195,"loc":{"start":{"line":90,"column":38},"end":{"line":90,"column":39}},"extra":{"rawValue":0,"raw":"0"},"value":0}}},"consequent":{"type":"BlockStatement","start":3197,"end":3379,"loc":{"start":{"line":90,"column":41},"end":{"line":98,"column":5}},"body":[{"type":"IfStatement","start":3292,"end":3373,"loc":{"start":{"line":93,"column":5},"end":{"line":97,"column":6}},"test":{"type":"BinaryExpression","start":3296,"end":3304,"loc":{"start":{"line":93,"column":9},"end":{"line":93,"column":17}},"left":{"type":"Identifier","start":3296,"end":3298,"loc":{"start":{"line":93,"column":9},"end":{"line":93,"column":11},"identifierName":"dx"},"name":"dx","leadingComments":null},"operator":">","right":{"type":"Identifier","start":3301,"end":3304,"loc":{"start":{"line":93,"column":14},"end":{"line":93,"column":17},"identifierName":"hsi"},"name":"hsi"},"leadingComments":null},"consequent":{"type":"BlockStatement","start":3306,"end":3329,"loc":{"start":{"line":93,"column":19},"end":{"line":95,"column":6}},"body":[{"type":"ExpressionStatement","start":3314,"end":3322,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":14}},"expression":{"type":"AssignmentExpression","start":3314,"end":3322,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":14}},"operator":"-=","left":{"type":"Identifier","start":3314,"end":3316,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":8},"identifierName":"dx"},"name":"dx"},"right":{"type":"Identifier","start":3320,"end":3322,"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":14},"identifierName":"si"},"name":"si"}}}],"directives":[]},"alternate":{"type":"IfStatement","start":3335,"end":3373,"loc":{"start":{"line":95,"column":12},"end":{"line":97,"column":6}},"test":{"type":"BinaryExpression","start":3339,"end":3348,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":25}},"left":{"type":"Identifier","start":3339,"end":3341,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":18},"identifierName":"dx"},"name":"dx"},"operator":"<","right":{"type":"UnaryExpression","start":3344,"end":3348,"loc":{"start":{"line":95,"column":21},"end":{"line":95,"column":25}},"operator":"-","prefix":true,"argument":{"type":"Identifier","start":3345,"end":3348,"loc":{"start":{"line":95,"column":22},"end":{"line":95,"column":25},"identifierName":"hsi"},"name":"hsi"},"extra":{"parenthesizedArgument":false}}},"consequent":{"type":"BlockStatement","start":3350,"end":3373,"loc":{"start":{"line":95,"column":27},"end":{"line":97,"column":6}},"body":[{"type":"ExpressionStatement","start":3358,"end":3366,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":14}},"expression":{"type":"AssignmentExpression","start":3358,"end":3366,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":14}},"operator":"+=","left":{"type":"Identifier","start":3358,"end":3360,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":8},"identifierName":"dx"},"name":"dx"},"right":{"type":"Identifier","start":3364,"end":3366,"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":14},"identifierName":"si"},"name":"si"}}}],"directives":[]},"alternate":null},"leadingComments":[{"type":"CommentLine","value":" If distance is greater than half the grid size, correct the","start":3204,"end":3266,"loc":{"start":{"line":91,"column":5},"end":{"line":91,"column":67}}},{"type":"CommentLine","value":" coordinate.","start":3272,"end":3286,"loc":{"start":{"line":92,"column":5},"end":{"line":92,"column":19}}}]}],"directives":[],"trailingComments":null},"alternate":null,"trailingComments":[{"type":"CommentLine","value":" Update the mean with the appropriate weight. ","start":3384,"end":3432,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}}]},{"type":"ExpressionStatement","start":3437,"end":3451,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":18}},"expression":{"type":"AssignmentExpression","start":3437,"end":3451,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":18}},"operator":"+=","left":{"type":"Identifier","start":3437,"end":3439,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":6},"identifierName":"mi"},"name":"mi","leadingComments":null},"right":{"type":"BinaryExpression","start":3443,"end":3451,"loc":{"start":{"line":100,"column":10},"end":{"line":100,"column":18}},"left":{"type":"Identifier","start":3443,"end":3445,"loc":{"start":{"line":100,"column":10},"end":{"line":100,"column":12},"identifierName":"dx"},"name":"dx"},"operator":"/","right":{"type":"BinaryExpression","start":3447,"end":3450,"loc":{"start":{"line":100,"column":14},"end":{"line":100,"column":17}},"left":{"type":"Identifier","start":3447,"end":3448,"loc":{"start":{"line":100,"column":14},"end":{"line":100,"column":15},"identifierName":"j"},"name":"j"},"operator":"+","right":{"type":"NumericLiteral","start":3449,"end":3450,"loc":{"start":{"line":100,"column":16},"end":{"line":100,"column":17}},"extra":{"rawValue":1,"raw":"1"},"value":1},"extra":{"parenthesized":true,"parenStart":3446}}},"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" Update the mean with the appropriate weight. ","start":3384,"end":3432,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}}]}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentLine","value":" Loop over the pixels;","start":2580,"end":2604,"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":27}}},{"type":"CommentLine","value":" compute mean position per dimension with online algorithm","start":2608,"end":2668,"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":63}}}],"trailingComments":[{"type":"CommentLine","value":" Correct the final position so that it falls in the current grid.","start":3464,"end":3531,"loc":{"start":{"line":103,"column":3},"end":{"line":103,"column":70}}},{"type":"CommentLine","value":" (Because of the torus, it can happen to get a centroid at eg x = -1. )","start":3535,"end":3608,"loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":76}}}]},{"type":"IfStatement","start":3612,"end":3681,"loc":{"start":{"line":105,"column":3},"end":{"line":109,"column":4}},"test":{"type":"BinaryExpression","start":3616,"end":3622,"loc":{"start":{"line":105,"column":7},"end":{"line":105,"column":13}},"left":{"type":"Identifier","start":3616,"end":3618,"loc":{"start":{"line":105,"column":7},"end":{"line":105,"column":9},"identifierName":"mi"},"name":"mi","leadingComments":null},"operator":"<","right":{"type":"NumericLiteral","start":3621,"end":3622,"loc":{"start":{"line":105,"column":12},"end":{"line":105,"column":13}},"extra":{"rawValue":0,"raw":"0"},"value":0},"leadingComments":null},"consequent":{"type":"BlockStatement","start":3624,"end":3643,"loc":{"start":{"line":105,"column":15},"end":{"line":107,"column":4}},"body":[{"type":"ExpressionStatement","start":3630,"end":3638,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":12}},"expression":{"type":"AssignmentExpression","start":3630,"end":3638,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":12}},"operator":"+=","left":{"type":"Identifier","start":3630,"end":3632,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":6},"identifierName":"mi"},"name":"mi"},"right":{"type":"Identifier","start":3636,"end":3638,"loc":{"start":{"line":106,"column":10},"end":{"line":106,"column":12},"identifierName":"si"},"name":"si"}}}],"directives":[]},"alternate":{"type":"IfStatement","start":3649,"end":3681,"loc":{"start":{"line":107,"column":10},"end":{"line":109,"column":4}},"test":{"type":"BinaryExpression","start":3653,"end":3660,"loc":{"start":{"line":107,"column":14},"end":{"line":107,"column":21}},"left":{"type":"Identifier","start":3653,"end":3655,"loc":{"start":{"line":107,"column":14},"end":{"line":107,"column":16},"identifierName":"mi"},"name":"mi"},"operator":">","right":{"type":"Identifier","start":3658,"end":3660,"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":21},"identifierName":"si"},"name":"si"}},"consequent":{"type":"BlockStatement","start":3662,"end":3681,"loc":{"start":{"line":107,"column":23},"end":{"line":109,"column":4}},"body":[{"type":"ExpressionStatement","start":3668,"end":3676,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":12}},"expression":{"type":"AssignmentExpression","start":3668,"end":3676,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":12}},"operator":"-=","left":{"type":"Identifier","start":3668,"end":3670,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":6},"identifierName":"mi"},"name":"mi"},"right":{"type":"Identifier","start":3674,"end":3676,"loc":{"start":{"line":108,"column":10},"end":{"line":108,"column":12},"identifierName":"si"},"name":"si"}}}],"directives":[],"trailingComments":null},"alternate":null,"trailingComments":null},"leadingComments":[{"type":"CommentLine","value":" Correct the final position so that it falls in the current grid.","start":3464,"end":3531,"loc":{"start":{"line":103,"column":3},"end":{"line":103,"column":70}}},{"type":"CommentLine","value":" (Because of the torus, it can happen to get a centroid at eg x = -1. )","start":3535,"end":3608,"loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":76}}}],"trailingComments":[{"type":"CommentLine","value":" Set the mean position in the cvec vector.","start":3689,"end":3733,"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":47}}}]},{"type":"ExpressionStatement","start":3737,"end":3751,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":17}},"expression":{"type":"AssignmentExpression","start":3737,"end":3751,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":17}},"operator":"=","left":{"type":"MemberExpression","start":3737,"end":3746,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":12}},"object":{"type":"Identifier","start":3737,"end":3741,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":7},"identifierName":"cvec"},"name":"cvec","leadingComments":null},"property":{"type":"Identifier","start":3742,"end":3745,"loc":{"start":{"line":112,"column":8},"end":{"line":112,"column":11},"identifierName":"dim"},"name":"dim"},"computed":true,"leadingComments":null},"right":{"type":"Identifier","start":3749,"end":3751,"loc":{"start":{"line":112,"column":15},"end":{"line":112,"column":17},"identifierName":"mi"},"name":"mi"},"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" Set the mean position in the cvec vector.","start":3689,"end":3733,"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":47}}}]}],"directives":[]}},{"type":"ReturnStatement","start":3758,"end":3769,"loc":{"start":{"line":114,"column":2},"end":{"line":114,"column":13}},"argument":{"type":"Identifier","start":3765,"end":3769,"loc":{"start":{"line":114,"column":9},"end":{"line":114,"column":13},"identifierName":"cvec"},"name":"cvec"}}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* This method computes the centroid of a specific cell with id = <cellid>. \n\tThe cellpixels object is given as an argument so that it only has to be requested\n\tonce for all cells together.\n\t@param {CellId} cellid ID number of the cell to get centroid of. \n\t@param {CellArrayObject} cellpixels object produced by {@link PixelsByCell}, \n\twhere keys are the cellids\n\tof all non-background cells on the grid, and the corresponding value is an array\n\tof the pixels belonging to that cell specified by their {@link ArrayCoordinate}.\n\t@return {ArrayCoordinate} the centroid of the current cell.\n\t","start":1529,"end":2122,"loc":{"start":{"line":55,"column":1},"end":{"line":64,"column":3}}}],"trailingComments":[{"type":"CommentBlock","value":"* This method computes the centroids of all cells on the grid. \n\t@return {CellObject} with an {@link ArrayCoordinate} of the centroid for each cell\n\t on the grid (see {@link computeCentroidOfCell}). ","start":3780,"end":3983,"loc":{"start":{"line":118,"column":1},"end":{"line":120,"column":53}}}]},{"type":"ClassMethod","start":3985,"end":4395,"loc":{"start":{"line":121,"column":1},"end":{"line":134,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":3985,"end":3992,"loc":{"start":{"line":121,"column":1},"end":{"line":121,"column":8},"identifierName":"compute"},"name":"compute","leadingComments":null},"kind":"method","id":null,"generator":false,"expression":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3994,"end":4395,"loc":{"start":{"line":121,"column":10},"end":{"line":134,"column":2}},"body":[{"type":"VariableDeclaration","start":4108,"end":4155,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":49}},"declarations":[{"type":"VariableDeclarator","start":4112,"end":4155,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":49}},"id":{"type":"Identifier","start":4112,"end":4122,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":16},"identifierName":"cellpixels"},"name":"cellpixels","leadingComments":null},"init":{"type":"CallExpression","start":4125,"end":4155,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":49}},"callee":{"type":"MemberExpression","start":4125,"end":4139,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":33}},"object":{"type":"MemberExpression","start":4125,"end":4131,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":25}},"object":{"type":"ThisExpression","start":4125,"end":4129,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":23}}},"property":{"type":"Identifier","start":4130,"end":4131,"loc":{"start":{"line":124,"column":24},"end":{"line":124,"column":25},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":4132,"end":4139,"loc":{"start":{"line":124,"column":26},"end":{"line":124,"column":33},"identifierName":"getStat"},"name":"getStat"},"computed":false},"arguments":[{"type":"Identifier","start":4141,"end":4153,"loc":{"start":{"line":124,"column":35},"end":{"line":124,"column":47},"identifierName":"PixelsByCell"},"name":"PixelsByCell"}],"trailingComments":null},"leadingComments":null,"trailingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" Get object with arrays of pixels for each cell on the grid, and get","start":3998,"end":4068,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":72}}},{"type":"CommentLine","value":" the array for the current cell.","start":4071,"end":4105,"loc":{"start":{"line":123,"column":2},"end":{"line":123,"column":36}}}],"trailingComments":[{"type":"CommentLine","value":" Create an object for the centroids. Add the centroid array for each cell.","start":4162,"end":4238,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":78}}}]},{"type":"VariableDeclaration","start":4241,"end":4259,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":20}},"declarations":[{"type":"VariableDeclarator","start":4245,"end":4259,"loc":{"start":{"line":127,"column":6},"end":{"line":127,"column":20}},"id":{"type":"Identifier","start":4245,"end":4254,"loc":{"start":{"line":127,"column":6},"end":{"line":127,"column":15},"identifierName":"centroids"},"name":"centroids","leadingComments":null},"init":{"type":"ObjectExpression","start":4257,"end":4259,"loc":{"start":{"line":127,"column":18},"end":{"line":127,"column":20}},"properties":[]},"leadingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" Create an object for the centroids. Add the centroid array for each cell.","start":4162,"end":4238,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":78}}}]},{"type":"ForOfStatement","start":4262,"end":4367,"loc":{"start":{"line":128,"column":2},"end":{"line":130,"column":3}},"left":{"type":"VariableDeclaration","start":4267,"end":4274,"loc":{"start":{"line":128,"column":7},"end":{"line":128,"column":14}},"declarations":[{"type":"VariableDeclarator","start":4271,"end":4274,"loc":{"start":{"line":128,"column":11},"end":{"line":128,"column":14}},"id":{"type":"Identifier","start":4271,"end":4274,"loc":{"start":{"line":128,"column":11},"end":{"line":128,"column":14},"identifierName":"cid"},"name":"cid"},"init":null}],"kind":"let"},"right":{"type":"CallExpression","start":4278,"end":4294,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":34}},"callee":{"type":"MemberExpression","start":4278,"end":4292,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":32}},"object":{"type":"MemberExpression","start":4278,"end":4284,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":24}},"object":{"type":"ThisExpression","start":4278,"end":4282,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":22}}},"property":{"type":"Identifier","start":4283,"end":4284,"loc":{"start":{"line":128,"column":23},"end":{"line":128,"column":24},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":4285,"end":4292,"loc":{"start":{"line":128,"column":25},"end":{"line":128,"column":32},"identifierName":"cellIDs"},"name":"cellIDs"},"computed":false},"arguments":[]},"body":{"type":"BlockStatement","start":4296,"end":4367,"loc":{"start":{"line":128,"column":36},"end":{"line":130,"column":3}},"body":[{"type":"ExpressionStatement","start":4301,"end":4363,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":65}},"expression":{"type":"AssignmentExpression","start":4301,"end":4363,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":65}},"operator":"=","left":{"type":"MemberExpression","start":4301,"end":4315,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":17}},"object":{"type":"Identifier","start":4301,"end":4310,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":12},"identifierName":"centroids"},"name":"centroids"},"property":{"type":"Identifier","start":4311,"end":4314,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":16},"identifierName":"cid"},"name":"cid"},"computed":true},"right":{"type":"CallExpression","start":4318,"end":4363,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":65}},"callee":{"type":"MemberExpression","start":4318,"end":4344,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":46}},"object":{"type":"ThisExpression","start":4318,"end":4322,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":24}}},"property":{"type":"Identifier","start":4323,"end":4344,"loc":{"start":{"line":129,"column":25},"end":{"line":129,"column":46},"identifierName":"computeCentroidOfCell"},"name":"computeCentroidOfCell"},"computed":false},"arguments":[{"type":"Identifier","start":4346,"end":4349,"loc":{"start":{"line":129,"column":48},"end":{"line":129,"column":51},"identifierName":"cid"},"name":"cid"},{"type":"Identifier","start":4351,"end":4361,"loc":{"start":{"line":129,"column":53},"end":{"line":129,"column":63},"identifierName":"cellpixels"},"name":"cellpixels"}]}}}],"directives":[]}},{"type":"ReturnStatement","start":4373,"end":4389,"loc":{"start":{"line":132,"column":2},"end":{"line":132,"column":18}},"argument":{"type":"Identifier","start":4380,"end":4389,"loc":{"start":{"line":132,"column":9},"end":{"line":132,"column":18},"identifierName":"centroids"},"name":"centroids"}}],"directives":[]},"leadingComments":[{"type":"CommentBlock","value":"* This method computes the centroids of all cells on the grid. \n\t@return {CellObject} with an {@link ArrayCoordinate} of the centroid for each cell\n\t on the grid (see {@link computeCentroidOfCell}). ","start":3780,"end":3983,"loc":{"start":{"line":118,"column":1},"end":{"line":120,"column":53}}}]}]},"leadingComments":[],"name":"_","trailingComments":[]},{"type":"Identifier","start":4399,"end":4442,"loc":{"start":{"line":137,"column":0},"end":{"line":137,"column":43}},"declaration":{"type":"Identifier","start":4414,"end":4442,"loc":{"start":{"line":137,"column":15},"end":{"line":137,"column":43},"identifierName":"CentroidsWithTorusCorrection"},"name":"CentroidsWithTorusCorrection"},"name":"_","leadingComments":[],"trailingComments":[]},{"type":"ExportDefaultDeclaration","start":4399,"end":4442,"loc":{"start":{"line":137,"column":0},"end":{"line":137,"column":43}},"declaration":{"type":"ClassDeclaration","start":818,"end":4397,"loc":{"start":{"line":31,"column":0},"end":{"line":135,"column":1}},"id":{"type":"Identifier","start":824,"end":852,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":34},"identifierName":"CentroidsWithTorusCorrection"},"name":"CentroidsWithTorusCorrection","leadingComments":null},"superClass":{"type":"Identifier","start":861,"end":865,"loc":{"start":{"line":31,"column":43},"end":{"line":31,"column":47},"identifierName":"Stat"},"name":"Stat"},"body":{"type":"ClassBody","start":866,"end":4397,"loc":{"start":{"line":31,"column":48},"end":{"line":135,"column":1}},"body":[{"type":"ClassMethod","start":1002,"end":1467,"loc":{"start":{"line":35,"column":1},"end":{"line":48,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":1006,"end":1011,"loc":{"start":{"line":35,"column":5},"end":{"line":35,"column":10},"identifierName":"model"},"name":"model"},"kind":"set","id":null,"generator":false,"expression":false,"async":false,"params":[{"type":"Identifier","start":1013,"end":1014,"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":13},"identifierName":"M"},"name":"M"}],"body":{"type":"BlockStatement","start":1016,"end":1467,"loc":{"start":{"line":35,"column":15},"end":{"line":48,"column":2}},"body":[{"type":"ExpressionStatement","start":1091,"end":1101,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":12}},"expression":{"type":"AssignmentExpression","start":1091,"end":1101,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":12}},"operator":"=","left":{"type":"MemberExpression","start":1091,"end":1097,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":8}},"object":{"type":"ThisExpression","start":1091,"end":1095,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":6}},"leadingComments":null},"property":{"type":"Identifier","start":1096,"end":1097,"loc":{"start":{"line":39,"column":7},"end":{"line":39,"column":8},"identifierName":"M"},"name":"M"},"computed":false,"leadingComments":null},"right":{"type":"Identifier","start":1100,"end":1101,"loc":{"start":{"line":39,"column":11},"end":{"line":39,"column":12},"identifierName":"M"},"name":"M","leadingComments":null,"trailingComments":null},"leadingComments":null,"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* The model to compute centroids on. \n\t\t@type {GridBasedModel}","start":1022,"end":1088,"loc":{"start":{"line":37,"column":2},"end":{"line":38,"column":26}}}],"trailingComments":[{"type":"CommentLine","value":" Half the grid dimensions; if pixels with the same cellid are further apart,","start":1104,"end":1182,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":80}}},{"type":"CommentLine","value":" we assume they are on the border of the grid and that we need to correct","start":1185,"end":1260,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":77}}},{"type":"CommentLine","value":" their positions to compute the centroid.","start":1263,"end":1306,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":45}}},{"type":"CommentBlock","value":"* @ignore ","start":1309,"end":1323,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":16}}}]},{"type":"ExpressionStatement","start":1326,"end":1373,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":49}},"expression":{"type":"AssignmentExpression","start":1326,"end":1373,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":49}},"operator":"=","left":{"type":"MemberExpression","start":1326,"end":1339,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":15}},"object":{"type":"ThisExpression","start":1326,"end":1330,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":6}},"leadingComments":null},"property":{"type":"Identifier","start":1331,"end":1339,"loc":{"start":{"line":44,"column":7},"end":{"line":44,"column":15},"identifierName":"halfsize"},"name":"halfsize"},"computed":false,"leadingComments":null},"right":{"type":"CallExpression","start":1342,"end":1373,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":49}},"callee":{"type":"MemberExpression","start":1342,"end":1370,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":46}},"object":{"type":"NewExpression","start":1342,"end":1365,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":41}},"callee":{"type":"Identifier","start":1346,"end":1351,"loc":{"start":{"line":44,"column":22},"end":{"line":44,"column":27},"identifierName":"Array"},"name":"Array"},"arguments":[{"type":"MemberExpression","start":1353,"end":1364,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":40}},"object":{"type":"MemberExpression","start":1353,"end":1359,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":35}},"object":{"type":"ThisExpression","start":1353,"end":1357,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":33}}},"property":{"type":"Identifier","start":1358,"end":1359,"loc":{"start":{"line":44,"column":34},"end":{"line":44,"column":35},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":1360,"end":1364,"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":40},"identifierName":"ndim"},"name":"ndim"},"computed":false}]},"property":{"type":"Identifier","start":1366,"end":1370,"loc":{"start":{"line":44,"column":42},"end":{"line":44,"column":46},"identifierName":"fill"},"name":"fill"},"computed":false},"arguments":[{"type":"NumericLiteral","start":1371,"end":1372,"loc":{"start":{"line":44,"column":47},"end":{"line":44,"column":48}},"extra":{"rawValue":0,"raw":"0"},"value":0}]},"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" Half the grid dimensions; if pixels with the same cellid are further apart,","start":1104,"end":1182,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":80}}},{"type":"CommentLine","value":" we assume they are on the border of the grid and that we need to correct","start":1185,"end":1260,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":77}}},{"type":"CommentLine","value":" their positions to compute the centroid.","start":1263,"end":1306,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":45}}},{"type":"CommentBlock","value":"* @ignore ","start":1309,"end":1323,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":16}}}]},{"type":"ForStatement","start":1376,"end":1464,"loc":{"start":{"line":45,"column":2},"end":{"line":47,"column":3}},"init":{"type":"VariableDeclaration","start":1381,"end":1390,"loc":{"start":{"line":45,"column":7},"end":{"line":45,"column":16}},"declarations":[{"type":"VariableDeclarator","start":1385,"end":1390,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":16}},"id":{"type":"Identifier","start":1385,"end":1386,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":12},"identifierName":"i"},"name":"i"},"init":{"type":"NumericLiteral","start":1389,"end":1390,"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":16}},"extra":{"rawValue":0,"raw":"0"},"value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","start":1393,"end":1408,"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":34}},"left":{"type":"Identifier","start":1393,"end":1394,"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":20},"identifierName":"i"},"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":1397,"end":1408,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":34}},"object":{"type":"MemberExpression","start":1397,"end":1403,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":29}},"object":{"type":"ThisExpression","start":1397,"end":1401,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":27}}},"property":{"type":"Identifier","start":1402,"end":1403,"loc":{"start":{"line":45,"column":28},"end":{"line":45,"column":29},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":1404,"end":1408,"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":34},"identifierName":"ndim"},"name":"ndim"},"computed":false}},"update":{"type":"UpdateExpression","start":1411,"end":1415,"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":41}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":1411,"end":1412,"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":38},"identifierName":"i"},"name":"i"}},"body":{"type":"BlockStatement","start":1417,"end":1464,"loc":{"start":{"line":45,"column":43},"end":{"line":47,"column":3}},"body":[{"type":"ExpressionStatement","start":1422,"end":1460,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":41}},"expression":{"type":"AssignmentExpression","start":1422,"end":1460,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":41}},"operator":"=","left":{"type":"MemberExpression","start":1422,"end":1438,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":19}},"object":{"type":"MemberExpression","start":1422,"end":1435,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":16}},"object":{"type":"ThisExpression","start":1422,"end":1426,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":7}}},"property":{"type":"Identifier","start":1427,"end":1435,"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":16},"identifierName":"halfsize"},"name":"halfsize"},"computed":false},"property":{"type":"Identifier","start":1436,"end":1437,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":18},"identifierName":"i"},"name":"i"},"computed":true},"right":{"type":"BinaryExpression","start":1441,"end":1460,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":41}},"left":{"type":"MemberExpression","start":1441,"end":1458,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":39}},"object":{"type":"MemberExpression","start":1441,"end":1455,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":36}},"object":{"type":"MemberExpression","start":1441,"end":1447,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":28}},"object":{"type":"ThisExpression","start":1441,"end":1445,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":26}}},"property":{"type":"Identifier","start":1446,"end":1447,"loc":{"start":{"line":46,"column":27},"end":{"line":46,"column":28},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":1448,"end":1455,"loc":{"start":{"line":46,"column":29},"end":{"line":46,"column":36},"identifierName":"extents"},"name":"extents"},"computed":false},"property":{"type":"Identifier","start":1456,"end":1457,"loc":{"start":{"line":46,"column":37},"end":{"line":46,"column":38},"identifierName":"i"},"name":"i"},"computed":true},"operator":"/","right":{"type":"NumericLiteral","start":1459,"end":1460,"loc":{"start":{"line":46,"column":40},"end":{"line":46,"column":41}},"extra":{"rawValue":2,"raw":"2"},"value":2}}}}],"directives":[]}}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* The set model method of class CentroidsWithTorusCorrection.\n\t@param {GridBasedModel} M - the model to compute centroids on. ","start":870,"end":1000,"loc":{"start":{"line":33,"column":1},"end":{"line":34,"column":66}}}],"trailingComments":[{"type":"CommentBlock","value":"* @ignore ","start":1471,"end":1485,"loc":{"start":{"line":50,"column":1},"end":{"line":50,"column":15}}}]},{"type":"ClassMethod","start":1487,"end":1524,"loc":{"start":{"line":51,"column":1},"end":{"line":53,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":1487,"end":1498,"loc":{"start":{"line":51,"column":1},"end":{"line":51,"column":12},"identifierName":"constructor"},"name":"constructor","leadingComments":null},"kind":"constructor","id":null,"generator":false,"expression":false,"async":false,"params":[{"type":"Identifier","start":1500,"end":1504,"loc":{"start":{"line":51,"column":14},"end":{"line":51,"column":18},"identifierName":"conf"},"name":"conf"}],"body":{"type":"BlockStatement","start":1506,"end":1524,"loc":{"start":{"line":51,"column":20},"end":{"line":53,"column":2}},"body":[{"type":"ExpressionStatement","start":1510,"end":1521,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":13}},"expression":{"type":"CallExpression","start":1510,"end":1521,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":13}},"callee":{"type":"Super","start":1510,"end":1515,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":7}}},"arguments":[{"type":"Identifier","start":1516,"end":1520,"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":12},"identifierName":"conf"},"name":"conf"}]}}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* @ignore ","start":1471,"end":1485,"loc":{"start":{"line":50,"column":1},"end":{"line":50,"column":15}}}],"trailingComments":[{"type":"CommentBlock","value":"* This method computes the centroid of a specific cell with id = <cellid>. \n\tThe cellpixels object is given as an argument so that it only has to be requested\n\tonce for all cells together.\n\t@param {CellId} cellid ID number of the cell to get centroid of. \n\t@param {CellArrayObject} cellpixels object produced by {@link PixelsByCell}, \n\twhere keys are the cellids\n\tof all non-background cells on the grid, and the corresponding value is an array\n\tof the pixels belonging to that cell specified by their {@link ArrayCoordinate}.\n\t@return {ArrayCoordinate} the centroid of the current cell.\n\t","start":1529,"end":2122,"loc":{"start":{"line":55,"column":1},"end":{"line":64,"column":3}}}]},{"type":"ClassMethod","start":2124,"end":3775,"loc":{"start":{"line":65,"column":1},"end":{"line":116,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":2124,"end":2145,"loc":{"start":{"line":65,"column":1},"end":{"line":65,"column":22},"identifierName":"computeCentroidOfCell"},"name":"computeCentroidOfCell","leadingComments":null},"kind":"method","id":null,"generator":false,"expression":false,"async":false,"params":[{"type":"Identifier","start":2147,"end":2153,"loc":{"start":{"line":65,"column":24},"end":{"line":65,"column":30},"identifierName":"cellid"},"name":"cellid"},{"type":"Identifier","start":2155,"end":2165,"loc":{"start":{"line":65,"column":32},"end":{"line":65,"column":42},"identifierName":"cellpixels"},"name":"cellpixels"}],"body":{"type":"BlockStatement","start":2168,"end":3775,"loc":{"start":{"line":65,"column":45},"end":{"line":116,"column":2}},"body":[{"type":"VariableDeclaration","start":2229,"end":2264,"loc":{"start":{"line":69,"column":2},"end":{"line":69,"column":37}},"declarations":[{"type":"VariableDeclarator","start":2235,"end":2264,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":37}},"id":{"type":"Identifier","start":2235,"end":2241,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":14},"identifierName":"pixels"},"name":"pixels","leadingComments":null},"init":{"type":"MemberExpression","start":2244,"end":2264,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":37}},"object":{"type":"Identifier","start":2244,"end":2254,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":27},"identifierName":"cellpixels"},"name":"cellpixels"},"property":{"type":"Identifier","start":2256,"end":2262,"loc":{"start":{"line":69,"column":29},"end":{"line":69,"column":35},"identifierName":"cellid"},"name":"cellid"},"computed":true,"trailingComments":null},"leadingComments":null,"trailingComments":null}],"kind":"const","leadingComments":[{"type":"CommentLine","value":"let cellpixels = this.M.getStat( PixelsByCell ) ","start":2174,"end":2224,"loc":{"start":{"line":67,"column":2},"end":{"line":67,"column":52}}}],"trailingComments":[{"type":"CommentLine","value":" cvec will contain the x, y, (z) coordinate of the centroid.","start":2270,"end":2332,"loc":{"start":{"line":71,"column":2},"end":{"line":71,"column":64}}},{"type":"CommentLine","value":" Loop over the dimensions to compute each element separately.","start":2335,"end":2398,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":65}}}]},{"type":"VariableDeclaration","start":2401,"end":2442,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":43}},"declarations":[{"type":"VariableDeclarator","start":2405,"end":2442,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":43}},"id":{"type":"Identifier","start":2405,"end":2409,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":10},"identifierName":"cvec"},"name":"cvec","leadingComments":null},"init":{"type":"CallExpression","start":2412,"end":2442,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":43}},"callee":{"type":"MemberExpression","start":2412,"end":2439,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":40}},"object":{"type":"NewExpression","start":2412,"end":2434,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":35}},"callee":{"type":"Identifier","start":2416,"end":2421,"loc":{"start":{"line":73,"column":17},"end":{"line":73,"column":22},"identifierName":"Array"},"name":"Array"},"arguments":[{"type":"MemberExpression","start":2422,"end":2433,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":34}},"object":{"type":"MemberExpression","start":2422,"end":2428,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":29}},"object":{"type":"ThisExpression","start":2422,"end":2426,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":27}}},"property":{"type":"Identifier","start":2427,"end":2428,"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":29},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":2429,"end":2433,"loc":{"start":{"line":73,"column":30},"end":{"line":73,"column":34},"identifierName":"ndim"},"name":"ndim"},"computed":false}]},"property":{"type":"Identifier","start":2435,"end":2439,"loc":{"start":{"line":73,"column":36},"end":{"line":73,"column":40},"identifierName":"fill"},"name":"fill"},"computed":false},"arguments":[{"type":"NumericLiteral","start":2440,"end":2441,"loc":{"start":{"line":73,"column":41},"end":{"line":73,"column":42}},"extra":{"rawValue":0,"raw":"0"},"value":0}]},"leadingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" cvec will contain the x, y, (z) coordinate of the centroid.","start":2270,"end":2332,"loc":{"start":{"line":71,"column":2},"end":{"line":71,"column":64}}},{"type":"CommentLine","value":" Loop over the dimensions to compute each element separately.","start":2335,"end":2398,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":65}}}]},{"type":"ForStatement","start":2445,"end":3755,"loc":{"start":{"line":74,"column":2},"end":{"line":113,"column":3}},"init":{"type":"VariableDeclaration","start":2450,"end":2461,"loc":{"start":{"line":74,"column":7},"end":{"line":74,"column":18}},"declarations":[{"type":"VariableDeclarator","start":2454,"end":2461,"loc":{"start":{"line":74,"column":11},"end":{"line":74,"column":18}},"id":{"type":"Identifier","start":2454,"end":2457,"loc":{"start":{"line":74,"column":11},"end":{"line":74,"column":14},"identifierName":"dim"},"name":"dim"},"init":{"type":"NumericLiteral","start":2460,"end":2461,"loc":{"start":{"line":74,"column":17},"end":{"line":74,"column":18}},"extra":{"rawValue":0,"raw":"0"},"value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","start":2464,"end":2481,"loc":{"start":{"line":74,"column":21},"end":{"line":74,"column":38}},"left":{"type":"Identifier","start":2464,"end":2467,"loc":{"start":{"line":74,"column":21},"end":{"line":74,"column":24},"identifierName":"dim"},"name":"dim"},"operator":"<","right":{"type":"MemberExpression","start":2470,"end":2481,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":38}},"object":{"type":"MemberExpression","start":2470,"end":2476,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":33}},"object":{"type":"ThisExpression","start":2470,"end":2474,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":31}}},"property":{"type":"Identifier","start":2475,"end":2476,"loc":{"start":{"line":74,"column":32},"end":{"line":74,"column":33},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":2477,"end":2481,"loc":{"start":{"line":74,"column":34},"end":{"line":74,"column":38},"identifierName":"ndim"},"name":"ndim"},"computed":false}},"update":{"type":"UpdateExpression","start":2484,"end":2490,"loc":{"start":{"line":74,"column":41},"end":{"line":74,"column":47}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":2484,"end":2487,"loc":{"start":{"line":74,"column":41},"end":{"line":74,"column":44},"identifierName":"dim"},"name":"dim"}},"body":{"type":"BlockStatement","start":2492,"end":3755,"loc":{"start":{"line":74,"column":49},"end":{"line":113,"column":3}},"body":[{"type":"VariableDeclaration","start":2501,"end":2512,"loc":{"start":{"line":76,"column":3},"end":{"line":76,"column":14}},"declarations":[{"type":"VariableDeclarator","start":2505,"end":2512,"loc":{"start":{"line":76,"column":7},"end":{"line":76,"column":14}},"id":{"type":"Identifier","start":2505,"end":2507,"loc":{"start":{"line":76,"column":7},"end":{"line":76,"column":9},"identifierName":"mi"},"name":"mi"},"init":{"type":"NumericLiteral","start":2510,"end":2512,"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":14}},"extra":{"rawValue":0,"raw":"0."},"value":0}}],"kind":"let"},{"type":"VariableDeclaration","start":2516,"end":2572,"loc":{"start":{"line":77,"column":3},"end":{"line":77,"column":59}},"declarations":[{"type":"VariableDeclarator","start":2522,"end":2546,"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":33}},"id":{"type":"Identifier","start":2522,"end":2525,"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":12},"identifierName":"hsi"},"name":"hsi"},"init":{"type":"MemberExpression","start":2528,"end":2546,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":33}},"object":{"type":"MemberExpression","start":2528,"end":2541,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":28}},"object":{"type":"ThisExpression","start":2528,"end":2532,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":19}}},"property":{"type":"Identifier","start":2533,"end":2541,"loc":{"start":{"line":77,"column":20},"end":{"line":77,"column":28},"identifierName":"halfsize"},"name":"halfsize"},"computed":false},"property":{"type":"Identifier","start":2542,"end":2545,"loc":{"start":{"line":77,"column":29},"end":{"line":77,"column":32},"identifierName":"dim"},"name":"dim"},"computed":true}},{"type":"VariableDeclarator","start":2548,"end":2572,"loc":{"start":{"line":77,"column":35},"end":{"line":77,"column":59}},"id":{"type":"Identifier","start":2548,"end":2550,"loc":{"start":{"line":77,"column":35},"end":{"line":77,"column":37},"identifierName":"si"},"name":"si"},"init":{"type":"MemberExpression","start":2553,"end":2572,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":59}},"object":{"type":"MemberExpression","start":2553,"end":2567,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":54}},"object":{"type":"MemberExpression","start":2553,"end":2559,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":46}},"object":{"type":"ThisExpression","start":2553,"end":2557,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":44}}},"property":{"type":"Identifier","start":2558,"end":2559,"loc":{"start":{"line":77,"column":45},"end":{"line":77,"column":46},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":2560,"end":2567,"loc":{"start":{"line":77,"column":47},"end":{"line":77,"column":54},"identifierName":"extents"},"name":"extents"},"computed":false},"property":{"type":"Identifier","start":2568,"end":2571,"loc":{"start":{"line":77,"column":55},"end":{"line":77,"column":58},"identifierName":"dim"},"name":"dim"},"computed":true,"trailingComments":null},"trailingComments":null}],"kind":"const","trailingComments":[{"type":"CommentLine","value":" Loop over the pixels;","start":2580,"end":2604,"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":27}}},{"type":"CommentLine","value":" compute mean position per dimension with online algorithm","start":2608,"end":2668,"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":63}}}]},{"type":"ForStatement","start":2672,"end":3456,"loc":{"start":{"line":81,"column":3},"end":{"line":101,"column":4}},"init":{"type":"VariableDeclaration","start":2677,"end":2686,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":17}},"declarations":[{"type":"VariableDeclarator","start":2681,"end":2686,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":17}},"id":{"type":"Identifier","start":2681,"end":2682,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":13},"identifierName":"j"},"name":"j","leadingComments":null},"init":{"type":"NumericLiteral","start":2685,"end":2686,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":17}},"extra":{"rawValue":0,"raw":"0"},"value":0},"leadingComments":null}],"kind":"let","leadingComments":null},"test":{"type":"BinaryExpression","start":2689,"end":2706,"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":37}},"left":{"type":"Identifier","start":2689,"end":2690,"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":21},"identifierName":"j"},"name":"j"},"operator":"<","right":{"type":"MemberExpression","start":2693,"end":2706,"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":37}},"object":{"type":"Identifier","start":2693,"end":2699,"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":30},"identifierName":"pixels"},"name":"pixels"},"property":{"type":"Identifier","start":2700,"end":2706,"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":37},"identifierName":"length"},"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":2709,"end":2713,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":44}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":2709,"end":2710,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":41},"identifierName":"j"},"name":"j"}},"body":{"type":"BlockStatement","start":2715,"end":3456,"loc":{"start":{"line":81,"column":46},"end":{"line":101,"column":4}},"body":[{"type":"VariableDeclaration","start":3127,"end":3155,"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":32}},"declarations":[{"type":"VariableDeclarator","start":3131,"end":3155,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":32}},"id":{"type":"Identifier","start":3131,"end":3133,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":10},"identifierName":"dx"},"name":"dx","leadingComments":null},"init":{"type":"BinaryExpression","start":3136,"end":3155,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":32}},"left":{"type":"MemberExpression","start":3136,"end":3150,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":27}},"object":{"type":"MemberExpression","start":3136,"end":3145,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":22}},"object":{"type":"Identifier","start":3136,"end":3142,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":19},"identifierName":"pixels"},"name":"pixels"},"property":{"type":"Identifier","start":3143,"end":3144,"loc":{"start":{"line":89,"column":20},"end":{"line":89,"column":21},"identifierName":"j"},"name":"j"},"computed":true},"property":{"type":"Identifier","start":3146,"end":3149,"loc":{"start":{"line":89,"column":23},"end":{"line":89,"column":26},"identifierName":"dim"},"name":"dim"},"computed":true},"operator":"-","right":{"type":"Identifier","start":3153,"end":3155,"loc":{"start":{"line":89,"column":30},"end":{"line":89,"column":32},"identifierName":"mi"},"name":"mi"}},"leadingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" Check distance of current pixel to the accumulated mean in this dim.","start":2726,"end":2797,"loc":{"start":{"line":83,"column":4},"end":{"line":83,"column":75}}},{"type":"CommentLine","value":" Check if this distance is greater than half the grid size in this","start":2802,"end":2870,"loc":{"start":{"line":84,"column":4},"end":{"line":84,"column":72}}},{"type":"CommentLine","value":" dimension; if so, this indicates that the cell has moved to the","start":2875,"end":2941,"loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":70}}},{"type":"CommentLine","value":" other end of the grid because of the torus. Note that this only","start":2946,"end":3012,"loc":{"start":{"line":86,"column":4},"end":{"line":86,"column":70}}},{"type":"CommentLine","value":" holds AFTER the first pixel (so for j > 0), when we actually have","start":3017,"end":3085,"loc":{"start":{"line":87,"column":4},"end":{"line":87,"column":72}}},{"type":"CommentLine","value":" an idea of where the cell is.","start":3090,"end":3122,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":36}}}]},{"type":"IfStatement","start":3160,"end":3379,"loc":{"start":{"line":90,"column":4},"end":{"line":98,"column":5}},"test":{"type":"LogicalExpression","start":3164,"end":3195,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":39}},"left":{"type":"MemberExpression","start":3164,"end":3186,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":30}},"object":{"type":"MemberExpression","start":3164,"end":3181,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":25}},"object":{"type":"MemberExpression","start":3164,"end":3175,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":19}},"object":{"type":"MemberExpression","start":3164,"end":3170,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":14}},"object":{"type":"ThisExpression","start":3164,"end":3168,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":12}}},"property":{"type":"Identifier","start":3169,"end":3170,"loc":{"start":{"line":90,"column":13},"end":{"line":90,"column":14},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":3171,"end":3175,"loc":{"start":{"line":90,"column":15},"end":{"line":90,"column":19},"identifierName":"grid"},"name":"grid"},"computed":false},"property":{"type":"Identifier","start":3176,"end":3181,"loc":{"start":{"line":90,"column":20},"end":{"line":90,"column":25},"identifierName":"torus"},"name":"torus"},"computed":false},"property":{"type":"Identifier","start":3182,"end":3185,"loc":{"start":{"line":90,"column":26},"end":{"line":90,"column":29},"identifierName":"dim"},"name":"dim"},"computed":true},"operator":"&&","right":{"type":"BinaryExpression","start":3190,"end":3195,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":39}},"left":{"type":"Identifier","start":3190,"end":3191,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":35},"identifierName":"j"},"name":"j"},"operator":">","right":{"type":"NumericLiteral","start":3194,"end":3195,"loc":{"start":{"line":90,"column":38},"end":{"line":90,"column":39}},"extra":{"rawValue":0,"raw":"0"},"value":0}}},"consequent":{"type":"BlockStatement","start":3197,"end":3379,"loc":{"start":{"line":90,"column":41},"end":{"line":98,"column":5}},"body":[{"type":"IfStatement","start":3292,"end":3373,"loc":{"start":{"line":93,"column":5},"end":{"line":97,"column":6}},"test":{"type":"BinaryExpression","start":3296,"end":3304,"loc":{"start":{"line":93,"column":9},"end":{"line":93,"column":17}},"left":{"type":"Identifier","start":3296,"end":3298,"loc":{"start":{"line":93,"column":9},"end":{"line":93,"column":11},"identifierName":"dx"},"name":"dx","leadingComments":null},"operator":">","right":{"type":"Identifier","start":3301,"end":3304,"loc":{"start":{"line":93,"column":14},"end":{"line":93,"column":17},"identifierName":"hsi"},"name":"hsi"},"leadingComments":null},"consequent":{"type":"BlockStatement","start":3306,"end":3329,"loc":{"start":{"line":93,"column":19},"end":{"line":95,"column":6}},"body":[{"type":"ExpressionStatement","start":3314,"end":3322,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":14}},"expression":{"type":"AssignmentExpression","start":3314,"end":3322,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":14}},"operator":"-=","left":{"type":"Identifier","start":3314,"end":3316,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":8},"identifierName":"dx"},"name":"dx"},"right":{"type":"Identifier","start":3320,"end":3322,"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":14},"identifierName":"si"},"name":"si"}}}],"directives":[]},"alternate":{"type":"IfStatement","start":3335,"end":3373,"loc":{"start":{"line":95,"column":12},"end":{"line":97,"column":6}},"test":{"type":"BinaryExpression","start":3339,"end":3348,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":25}},"left":{"type":"Identifier","start":3339,"end":3341,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":18},"identifierName":"dx"},"name":"dx"},"operator":"<","right":{"type":"UnaryExpression","start":3344,"end":3348,"loc":{"start":{"line":95,"column":21},"end":{"line":95,"column":25}},"operator":"-","prefix":true,"argument":{"type":"Identifier","start":3345,"end":3348,"loc":{"start":{"line":95,"column":22},"end":{"line":95,"column":25},"identifierName":"hsi"},"name":"hsi"},"extra":{"parenthesizedArgument":false}}},"consequent":{"type":"BlockStatement","start":3350,"end":3373,"loc":{"start":{"line":95,"column":27},"end":{"line":97,"column":6}},"body":[{"type":"ExpressionStatement","start":3358,"end":3366,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":14}},"expression":{"type":"AssignmentExpression","start":3358,"end":3366,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":14}},"operator":"+=","left":{"type":"Identifier","start":3358,"end":3360,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":8},"identifierName":"dx"},"name":"dx"},"right":{"type":"Identifier","start":3364,"end":3366,"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":14},"identifierName":"si"},"name":"si"}}}],"directives":[]},"alternate":null},"leadingComments":[{"type":"CommentLine","value":" If distance is greater than half the grid size, correct the","start":3204,"end":3266,"loc":{"start":{"line":91,"column":5},"end":{"line":91,"column":67}}},{"type":"CommentLine","value":" coordinate.","start":3272,"end":3286,"loc":{"start":{"line":92,"column":5},"end":{"line":92,"column":19}}}]}],"directives":[],"trailingComments":null},"alternate":null,"trailingComments":[{"type":"CommentLine","value":" Update the mean with the appropriate weight. ","start":3384,"end":3432,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}}]},{"type":"ExpressionStatement","start":3437,"end":3451,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":18}},"expression":{"type":"AssignmentExpression","start":3437,"end":3451,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":18}},"operator":"+=","left":{"type":"Identifier","start":3437,"end":3439,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":6},"identifierName":"mi"},"name":"mi","leadingComments":null},"right":{"type":"BinaryExpression","start":3443,"end":3451,"loc":{"start":{"line":100,"column":10},"end":{"line":100,"column":18}},"left":{"type":"Identifier","start":3443,"end":3445,"loc":{"start":{"line":100,"column":10},"end":{"line":100,"column":12},"identifierName":"dx"},"name":"dx"},"operator":"/","right":{"type":"BinaryExpression","start":3447,"end":3450,"loc":{"start":{"line":100,"column":14},"end":{"line":100,"column":17}},"left":{"type":"Identifier","start":3447,"end":3448,"loc":{"start":{"line":100,"column":14},"end":{"line":100,"column":15},"identifierName":"j"},"name":"j"},"operator":"+","right":{"type":"NumericLiteral","start":3449,"end":3450,"loc":{"start":{"line":100,"column":16},"end":{"line":100,"column":17}},"extra":{"rawValue":1,"raw":"1"},"value":1},"extra":{"parenthesized":true,"parenStart":3446}}},"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" Update the mean with the appropriate weight. ","start":3384,"end":3432,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}}]}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentLine","value":" Loop over the pixels;","start":2580,"end":2604,"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":27}}},{"type":"CommentLine","value":" compute mean position per dimension with online algorithm","start":2608,"end":2668,"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":63}}}],"trailingComments":[{"type":"CommentLine","value":" Correct the final position so that it falls in the current grid.","start":3464,"end":3531,"loc":{"start":{"line":103,"column":3},"end":{"line":103,"column":70}}},{"type":"CommentLine","value":" (Because of the torus, it can happen to get a centroid at eg x = -1. )","start":3535,"end":3608,"loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":76}}}]},{"type":"IfStatement","start":3612,"end":3681,"loc":{"start":{"line":105,"column":3},"end":{"line":109,"column":4}},"test":{"type":"BinaryExpression","start":3616,"end":3622,"loc":{"start":{"line":105,"column":7},"end":{"line":105,"column":13}},"left":{"type":"Identifier","start":3616,"end":3618,"loc":{"start":{"line":105,"column":7},"end":{"line":105,"column":9},"identifierName":"mi"},"name":"mi","leadingComments":null},"operator":"<","right":{"type":"NumericLiteral","start":3621,"end":3622,"loc":{"start":{"line":105,"column":12},"end":{"line":105,"column":13}},"extra":{"rawValue":0,"raw":"0"},"value":0},"leadingComments":null},"consequent":{"type":"BlockStatement","start":3624,"end":3643,"loc":{"start":{"line":105,"column":15},"end":{"line":107,"column":4}},"body":[{"type":"ExpressionStatement","start":3630,"end":3638,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":12}},"expression":{"type":"AssignmentExpression","start":3630,"end":3638,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":12}},"operator":"+=","left":{"type":"Identifier","start":3630,"end":3632,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":6},"identifierName":"mi"},"name":"mi"},"right":{"type":"Identifier","start":3636,"end":3638,"loc":{"start":{"line":106,"column":10},"end":{"line":106,"column":12},"identifierName":"si"},"name":"si"}}}],"directives":[]},"alternate":{"type":"IfStatement","start":3649,"end":3681,"loc":{"start":{"line":107,"column":10},"end":{"line":109,"column":4}},"test":{"type":"BinaryExpression","start":3653,"end":3660,"loc":{"start":{"line":107,"column":14},"end":{"line":107,"column":21}},"left":{"type":"Identifier","start":3653,"end":3655,"loc":{"start":{"line":107,"column":14},"end":{"line":107,"column":16},"identifierName":"mi"},"name":"mi"},"operator":">","right":{"type":"Identifier","start":3658,"end":3660,"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":21},"identifierName":"si"},"name":"si"}},"consequent":{"type":"BlockStatement","start":3662,"end":3681,"loc":{"start":{"line":107,"column":23},"end":{"line":109,"column":4}},"body":[{"type":"ExpressionStatement","start":3668,"end":3676,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":12}},"expression":{"type":"AssignmentExpression","start":3668,"end":3676,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":12}},"operator":"-=","left":{"type":"Identifier","start":3668,"end":3670,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":6},"identifierName":"mi"},"name":"mi"},"right":{"type":"Identifier","start":3674,"end":3676,"loc":{"start":{"line":108,"column":10},"end":{"line":108,"column":12},"identifierName":"si"},"name":"si"}}}],"directives":[],"trailingComments":null},"alternate":null,"trailingComments":null},"leadingComments":[{"type":"CommentLine","value":" Correct the final position so that it falls in the current grid.","start":3464,"end":3531,"loc":{"start":{"line":103,"column":3},"end":{"line":103,"column":70}}},{"type":"CommentLine","value":" (Because of the torus, it can happen to get a centroid at eg x = -1. )","start":3535,"end":3608,"loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":76}}}],"trailingComments":[{"type":"CommentLine","value":" Set the mean position in the cvec vector.","start":3689,"end":3733,"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":47}}}]},{"type":"ExpressionStatement","start":3737,"end":3751,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":17}},"expression":{"type":"AssignmentExpression","start":3737,"end":3751,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":17}},"operator":"=","left":{"type":"MemberExpression","start":3737,"end":3746,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":12}},"object":{"type":"Identifier","start":3737,"end":3741,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":7},"identifierName":"cvec"},"name":"cvec","leadingComments":null},"property":{"type":"Identifier","start":3742,"end":3745,"loc":{"start":{"line":112,"column":8},"end":{"line":112,"column":11},"identifierName":"dim"},"name":"dim"},"computed":true,"leadingComments":null},"right":{"type":"Identifier","start":3749,"end":3751,"loc":{"start":{"line":112,"column":15},"end":{"line":112,"column":17},"identifierName":"mi"},"name":"mi"},"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":" Set the mean position in the cvec vector.","start":3689,"end":3733,"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":47}}}]}],"directives":[]}},{"type":"ReturnStatement","start":3758,"end":3769,"loc":{"start":{"line":114,"column":2},"end":{"line":114,"column":13}},"argument":{"type":"Identifier","start":3765,"end":3769,"loc":{"start":{"line":114,"column":9},"end":{"line":114,"column":13},"identifierName":"cvec"},"name":"cvec"}}],"directives":[],"trailingComments":null},"leadingComments":[{"type":"CommentBlock","value":"* This method computes the centroid of a specific cell with id = <cellid>. \n\tThe cellpixels object is given as an argument so that it only has to be requested\n\tonce for all cells together.\n\t@param {CellId} cellid ID number of the cell to get centroid of. \n\t@param {CellArrayObject} cellpixels object produced by {@link PixelsByCell}, \n\twhere keys are the cellids\n\tof all non-background cells on the grid, and the corresponding value is an array\n\tof the pixels belonging to that cell specified by their {@link ArrayCoordinate}.\n\t@return {ArrayCoordinate} the centroid of the current cell.\n\t","start":1529,"end":2122,"loc":{"start":{"line":55,"column":1},"end":{"line":64,"column":3}}}],"trailingComments":[{"type":"CommentBlock","value":"* This method computes the centroids of all cells on the grid. \n\t@return {CellObject} with an {@link ArrayCoordinate} of the centroid for each cell\n\t on the grid (see {@link computeCentroidOfCell}). ","start":3780,"end":3983,"loc":{"start":{"line":118,"column":1},"end":{"line":120,"column":53}}}]},{"type":"ClassMethod","start":3985,"end":4395,"loc":{"start":{"line":121,"column":1},"end":{"line":134,"column":2}},"static":false,"computed":false,"key":{"type":"Identifier","start":3985,"end":3992,"loc":{"start":{"line":121,"column":1},"end":{"line":121,"column":8},"identifierName":"compute"},"name":"compute","leadingComments":null},"kind":"method","id":null,"generator":false,"expression":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3994,"end":4395,"loc":{"start":{"line":121,"column":10},"end":{"line":134,"column":2}},"body":[{"type":"VariableDeclaration","start":4108,"end":4155,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":49}},"declarations":[{"type":"VariableDeclarator","start":4112,"end":4155,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":49}},"id":{"type":"Identifier","start":4112,"end":4122,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":16},"identifierName":"cellpixels"},"name":"cellpixels","leadingComments":null},"init":{"type":"CallExpression","start":4125,"end":4155,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":49}},"callee":{"type":"MemberExpression","start":4125,"end":4139,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":33}},"object":{"type":"MemberExpression","start":4125,"end":4131,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":25}},"object":{"type":"ThisExpression","start":4125,"end":4129,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":23}}},"property":{"type":"Identifier","start":4130,"end":4131,"loc":{"start":{"line":124,"column":24},"end":{"line":124,"column":25},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":4132,"end":4139,"loc":{"start":{"line":124,"column":26},"end":{"line":124,"column":33},"identifierName":"getStat"},"name":"getStat"},"computed":false},"arguments":[{"type":"Identifier","start":4141,"end":4153,"loc":{"start":{"line":124,"column":35},"end":{"line":124,"column":47},"identifierName":"PixelsByCell"},"name":"PixelsByCell"}],"trailingComments":null},"leadingComments":null,"trailingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" Get object with arrays of pixels for each cell on the grid, and get","start":3998,"end":4068,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":72}}},{"type":"CommentLine","value":" the array for the current cell.","start":4071,"end":4105,"loc":{"start":{"line":123,"column":2},"end":{"line":123,"column":36}}}],"trailingComments":[{"type":"CommentLine","value":" Create an object for the centroids. Add the centroid array for each cell.","start":4162,"end":4238,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":78}}}]},{"type":"VariableDeclaration","start":4241,"end":4259,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":20}},"declarations":[{"type":"VariableDeclarator","start":4245,"end":4259,"loc":{"start":{"line":127,"column":6},"end":{"line":127,"column":20}},"id":{"type":"Identifier","start":4245,"end":4254,"loc":{"start":{"line":127,"column":6},"end":{"line":127,"column":15},"identifierName":"centroids"},"name":"centroids","leadingComments":null},"init":{"type":"ObjectExpression","start":4257,"end":4259,"loc":{"start":{"line":127,"column":18},"end":{"line":127,"column":20}},"properties":[]},"leadingComments":null}],"kind":"let","leadingComments":[{"type":"CommentLine","value":" Create an object for the centroids. Add the centroid array for each cell.","start":4162,"end":4238,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":78}}}]},{"type":"ForOfStatement","start":4262,"end":4367,"loc":{"start":{"line":128,"column":2},"end":{"line":130,"column":3}},"left":{"type":"VariableDeclaration","start":4267,"end":4274,"loc":{"start":{"line":128,"column":7},"end":{"line":128,"column":14}},"declarations":[{"type":"VariableDeclarator","start":4271,"end":4274,"loc":{"start":{"line":128,"column":11},"end":{"line":128,"column":14}},"id":{"type":"Identifier","start":4271,"end":4274,"loc":{"start":{"line":128,"column":11},"end":{"line":128,"column":14},"identifierName":"cid"},"name":"cid"},"init":null}],"kind":"let"},"right":{"type":"CallExpression","start":4278,"end":4294,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":34}},"callee":{"type":"MemberExpression","start":4278,"end":4292,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":32}},"object":{"type":"MemberExpression","start":4278,"end":4284,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":24}},"object":{"type":"ThisExpression","start":4278,"end":4282,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":22}}},"property":{"type":"Identifier","start":4283,"end":4284,"loc":{"start":{"line":128,"column":23},"end":{"line":128,"column":24},"identifierName":"M"},"name":"M"},"computed":false},"property":{"type":"Identifier","start":4285,"end":4292,"loc":{"start":{"line":128,"column":25},"end":{"line":128,"column":32},"identifierName":"cellIDs"},"name":"cellIDs"},"computed":false},"arguments":[]},"body":{"type":"BlockStatement","start":4296,"end":4367,"loc":{"start":{"line":128,"column":36},"end":{"line":130,"column":3}},"body":[{"type":"ExpressionStatement","start":4301,"end":4363,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":65}},"expression":{"type":"AssignmentExpression","start":4301,"end":4363,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":65}},"operator":"=","left":{"type":"MemberExpression","start":4301,"end":4315,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":17}},"object":{"type":"Identifier","start":4301,"end":4310,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":12},"identifierName":"centroids"},"name":"centroids"},"property":{"type":"Identifier","start":4311,"end":4314,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":16},"identifierName":"cid"},"name":"cid"},"computed":true},"right":{"type":"CallExpression","start":4318,"end":4363,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":65}},"callee":{"type":"MemberExpression","start":4318,"end":4344,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":46}},"object":{"type":"ThisExpression","start":4318,"end":4322,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":24}}},"property":{"type":"Identifier","start":4323,"end":4344,"loc":{"start":{"line":129,"column":25},"end":{"line":129,"column":46},"identifierName":"computeCentroidOfCell"},"name":"computeCentroidOfCell"},"computed":false},"arguments":[{"type":"Identifier","start":4346,"end":4349,"loc":{"start":{"line":129,"column":48},"end":{"line":129,"column":51},"identifierName":"cid"},"name":"cid"},{"type":"Identifier","start":4351,"end":4361,"loc":{"start":{"line":129,"column":53},"end":{"line":129,"column":63},"identifierName":"cellpixels"},"name":"cellpixels"}]}}}],"directives":[]}},{"type":"ReturnStatement","start":4373,"end":4389,"loc":{"start":{"line":132,"column":2},"end":{"line":132,"column":18}},"argument":{"type":"Identifier","start":4380,"end":4389,"loc":{"start":{"line":132,"column":9},"end":{"line":132,"column":18},"identifierName":"centroids"},"name":"centroids"}}],"directives":[]},"leadingComments":[{"type":"CommentBlock","value":"* This method computes the centroids of all cells on the grid. \n\t@return {CellObject} with an {@link ArrayCoordinate} of the centroid for each cell\n\t on the grid (see {@link computeCentroidOfCell}). ","start":3780,"end":3983,"loc":{"start":{"line":118,"column":1},"end":{"line":120,"column":53}}}]}]},"leadingComments":[{"type":"CommentBlock","value":"*\tThis Stat computes the centroid of a cell when grid has a torus. \n\n\t!!! Assumption: cell pixels never extend for more than half the size of the grid.\n\tIf this assumption does not hold, centroids may be computed wrongly.\n\t\n\tSee also {@link Centroids} for a version without torus correction.\n\t\t\n\t@example\n\t* let CPM = require( \"path/to/build\" )\n\t*\n\t* // Make a CPM, seed two cells, run a little, and get their centroids\n\t* let C = new CPM.CPM( [100,100], { \n\t* \tT:20,\n\t* \ttorus:[true,true],\n\t* \tJ:[[0,20],[20,10]],\n\t* \tV:[0,200],\n\t* \tLAMBDA_V:[0,2]\n\t* } )\n\t* let gm = new CPM.GridManipulator( C )\n\t* gm.seedCell(1)\n\t* gm.seedCell(1)\n\t* for( let t = 0; t < 100; t++ ){ C.timeStep() }\n\t*\n\t* C.getStat( CPM.CentroidsWithTorusCorrection ) \n","start":76,"end":816,"loc":{"start":{"line":5,"column":0},"end":{"line":29,"column":2}}}],"__PseudoExport__":false,"trailingComments":[]},"leadingComments":null}],"directives":[]},"comments":[{"type":"CommentBlock","value":"*\tThis Stat computes the centroid of a cell when grid has a torus. \n\n\t!!! Assumption: cell pixels never extend for more than half the size of the grid.\n\tIf this assumption does not hold, centroids may be computed wrongly.\n\t\n\tSee also {@link Centroids} for a version without torus correction.\n\t\t\n\t@example\n\t* let CPM = require( \"path/to/build\" )\n\t*\n\t* // Make a CPM, seed two cells, run a little, and get their centroids\n\t* let C = new CPM.CPM( [100,100], { \n\t* \tT:20,\n\t* \ttorus:[true,true],\n\t* \tJ:[[0,20],[20,10]],\n\t* \tV:[0,200],\n\t* \tLAMBDA_V:[0,2]\n\t* } )\n\t* let gm = new CPM.GridManipulator( C )\n\t* gm.seedCell(1)\n\t* gm.seedCell(1)\n\t* for( let t = 0; t < 100; t++ ){ C.timeStep() }\n\t*\n\t* C.getStat( CPM.CentroidsWithTorusCorrection ) \n","start":76,"end":816,"loc":{"start":{"line":5,"column":0},"end":{"line":29,"column":2}}},{"type":"CommentBlock","value":"* The set model method of class CentroidsWithTorusCorrection.\n\t@param {GridBasedModel} M - the model to compute centroids on. ","start":870,"end":1000,"loc":{"start":{"line":33,"column":1},"end":{"line":34,"column":66}}},{"type":"CommentBlock","value":"* The model to compute centroids on. \n\t\t@type {GridBasedModel}","start":1022,"end":1088,"loc":{"start":{"line":37,"column":2},"end":{"line":38,"column":26}}},{"type":"CommentLine","value":" Half the grid dimensions; if pixels with the same cellid are further apart,","start":1104,"end":1182,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":80}}},{"type":"CommentLine","value":" we assume they are on the border of the grid and that we need to correct","start":1185,"end":1260,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":77}}},{"type":"CommentLine","value":" their positions to compute the centroid.","start":1263,"end":1306,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":45}}},{"type":"CommentBlock","value":"* @ignore ","start":1309,"end":1323,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":16}}},{"type":"CommentBlock","value":"* @ignore ","start":1471,"end":1485,"loc":{"start":{"line":50,"column":1},"end":{"line":50,"column":15}}},{"type":"CommentBlock","value":"* This method computes the centroid of a specific cell with id = <cellid>. \n\tThe cellpixels object is given as an argument so that it only has to be requested\n\tonce for all cells together.\n\t@param {CellId} cellid ID number of the cell to get centroid of. \n\t@param {CellArrayObject} cellpixels object produced by {@link PixelsByCell}, \n\twhere keys are the cellids\n\tof all non-background cells on the grid, and the corresponding value is an array\n\tof the pixels belonging to that cell specified by their {@link ArrayCoordinate}.\n\t@return {ArrayCoordinate} the centroid of the current cell.\n\t","start":1529,"end":2122,"loc":{"start":{"line":55,"column":1},"end":{"line":64,"column":3}}},{"type":"CommentLine","value":"let cellpixels = this.M.getStat( PixelsByCell ) ","start":2174,"end":2224,"loc":{"start":{"line":67,"column":2},"end":{"line":67,"column":52}}},{"type":"CommentLine","value":" cvec will contain the x, y, (z) coordinate of the centroid.","start":2270,"end":2332,"loc":{"start":{"line":71,"column":2},"end":{"line":71,"column":64}}},{"type":"CommentLine","value":" Loop over the dimensions to compute each element separately.","start":2335,"end":2398,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":65}}},{"type":"CommentLine","value":" Loop over the pixels;","start":2580,"end":2604,"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":27}}},{"type":"CommentLine","value":" compute mean position per dimension with online algorithm","start":2608,"end":2668,"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":63}}},{"type":"CommentLine","value":" Check distance of current pixel to the accumulated mean in this dim.","start":2726,"end":2797,"loc":{"start":{"line":83,"column":4},"end":{"line":83,"column":75}}},{"type":"CommentLine","value":" Check if this distance is greater than half the grid size in this","start":2802,"end":2870,"loc":{"start":{"line":84,"column":4},"end":{"line":84,"column":72}}},{"type":"CommentLine","value":" dimension; if so, this indicates that the cell has moved to the","start":2875,"end":2941,"loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":70}}},{"type":"CommentLine","value":" other end of the grid because of the torus. Note that this only","start":2946,"end":3012,"loc":{"start":{"line":86,"column":4},"end":{"line":86,"column":70}}},{"type":"CommentLine","value":" holds AFTER the first pixel (so for j > 0), when we actually have","start":3017,"end":3085,"loc":{"start":{"line":87,"column":4},"end":{"line":87,"column":72}}},{"type":"CommentLine","value":" an idea of where the cell is.","start":3090,"end":3122,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":36}}},{"type":"CommentLine","value":" If distance is greater than half the grid size, correct the","start":3204,"end":3266,"loc":{"start":{"line":91,"column":5},"end":{"line":91,"column":67}}},{"type":"CommentLine","value":" coordinate.","start":3272,"end":3286,"loc":{"start":{"line":92,"column":5},"end":{"line":92,"column":19}}},{"type":"CommentLine","value":" Update the mean with the appropriate weight. ","start":3384,"end":3432,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}},{"type":"CommentLine","value":" Correct the final position so that it falls in the current grid.","start":3464,"end":3531,"loc":{"start":{"line":103,"column":3},"end":{"line":103,"column":70}}},{"type":"CommentLine","value":" (Because of the torus, it can happen to get a centroid at eg x = -1. )","start":3535,"end":3608,"loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":76}}},{"type":"CommentLine","value":" Set the mean position in the cvec vector.","start":3689,"end":3733,"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":47}}},{"type":"CommentBlock","value":"* This method computes the centroids of all cells on the grid. \n\t@return {CellObject} with an {@link ArrayCoordinate} of the centroid for each cell\n\t on the grid (see {@link computeCentroidOfCell}). ","start":3780,"end":3983,"loc":{"start":{"line":118,"column":1},"end":{"line":120,"column":53}}},{"type":"CommentLine","value":" Get object with arrays of pixels for each cell on the grid, and get","start":3998,"end":4068,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":72}}},{"type":"CommentLine","value":" the array for the current cell.","start":4071,"end":4105,"loc":{"start":{"line":123,"column":2},"end":{"line":123,"column":36}}},{"type":"CommentLine","value":" Create an object for the centroids. Add the centroid array for each cell.","start":4162,"end":4238,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":78}}}],"tokens":[{"type":{"label":"import","keyword":"import","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"import","start":1,"end":7,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":6}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"Stat","start":8,"end":12,"loc":{"start":{"line":2,"column":7},"end":{"line":2,"column":11}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"from","start":13,"end":17,"loc":{"start":{"line":2,"column":12},"end":{"line":2,"column":16}}},{"type":{"label":"string","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"./Stat.js","start":18,"end":29,"loc":{"start":{"line":2,"column":17},"end":{"line":2,"column":28}}},{"type":{"label":"import","keyword":"import","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"import","start":30,"end":36,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":6}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"PixelsByCell","start":37,"end":49,"loc":{"start":{"line":3,"column":7},"end":{"line":3,"column":19}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"from","start":50,"end":54,"loc":{"start":{"line":3,"column":20},"end":{"line":3,"column":24}}},{"type":{"label":"string","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"./PixelsByCell.js","start":55,"end":74,"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":44}}},{"type":"CommentBlock","value":"*\tThis Stat computes the centroid of a cell when grid has a torus. \n\n\t!!! Assumption: cell pixels never extend for more than half the size of the grid.\n\tIf this assumption does not hold, centroids may be computed wrongly.\n\t\n\tSee also {@link Centroids} for a version without torus correction.\n\t\t\n\t@example\n\t* let CPM = require( \"path/to/build\" )\n\t*\n\t* // Make a CPM, seed two cells, run a little, and get their centroids\n\t* let C = new CPM.CPM( [100,100], { \n\t* \tT:20,\n\t* \ttorus:[true,true],\n\t* \tJ:[[0,20],[20,10]],\n\t* \tV:[0,200],\n\t* \tLAMBDA_V:[0,2]\n\t* } )\n\t* let gm = new CPM.GridManipulator( C )\n\t* gm.seedCell(1)\n\t* gm.seedCell(1)\n\t* for( let t = 0; t < 100; t++ ){ C.timeStep() }\n\t*\n\t* C.getStat( CPM.CentroidsWithTorusCorrection ) \n","start":76,"end":816,"loc":{"start":{"line":5,"column":0},"end":{"line":29,"column":2}}},{"type":{"label":"class","keyword":"class","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"class","start":818,"end":823,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":5}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"CentroidsWithTorusCorrection","start":824,"end":852,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":34}}},{"type":{"label":"extends","keyword":"extends","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"extends","start":853,"end":860,"loc":{"start":{"line":31,"column":35},"end":{"line":31,"column":42}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"Stat","start":861,"end":865,"loc":{"start":{"line":31,"column":43},"end":{"line":31,"column":47}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":866,"end":867,"loc":{"start":{"line":31,"column":48},"end":{"line":31,"column":49}}},{"type":"CommentBlock","value":"* The set model method of class CentroidsWithTorusCorrection.\n\t@param {GridBasedModel} M - the model to compute centroids on. ","start":870,"end":1000,"loc":{"start":{"line":33,"column":1},"end":{"line":34,"column":66}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"set","start":1002,"end":1005,"loc":{"start":{"line":35,"column":1},"end":{"line":35,"column":4}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"model","start":1006,"end":1011,"loc":{"start":{"line":35,"column":5},"end":{"line":35,"column":10}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1011,"end":1012,"loc":{"start":{"line":35,"column":10},"end":{"line":35,"column":11}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":1013,"end":1014,"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":13}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1015,"end":1016,"loc":{"start":{"line":35,"column":14},"end":{"line":35,"column":15}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1016,"end":1017,"loc":{"start":{"line":35,"column":15},"end":{"line":35,"column":16}}},{"type":"CommentBlock","value":"* The model to compute centroids on. \n\t\t@type {GridBasedModel}","start":1022,"end":1088,"loc":{"start":{"line":37,"column":2},"end":{"line":38,"column":26}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":1091,"end":1095,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":6}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1095,"end":1096,"loc":{"start":{"line":39,"column":6},"end":{"line":39,"column":7}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":1096,"end":1097,"loc":{"start":{"line":39,"column":7},"end":{"line":39,"column":8}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":1098,"end":1099,"loc":{"start":{"line":39,"column":9},"end":{"line":39,"column":10}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":1100,"end":1101,"loc":{"start":{"line":39,"column":11},"end":{"line":39,"column":12}}},{"type":"CommentLine","value":" Half the grid dimensions; if pixels with the same cellid are further apart,","start":1104,"end":1182,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":80}}},{"type":"CommentLine","value":" we assume they are on the border of the grid and that we need to correct","start":1185,"end":1260,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":77}}},{"type":"CommentLine","value":" their positions to compute the centroid.","start":1263,"end":1306,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":45}}},{"type":"CommentBlock","value":"* @ignore ","start":1309,"end":1323,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":16}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":1326,"end":1330,"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":6}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1330,"end":1331,"loc":{"start":{"line":44,"column":6},"end":{"line":44,"column":7}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"halfsize","start":1331,"end":1339,"loc":{"start":{"line":44,"column":7},"end":{"line":44,"column":15}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":1340,"end":1341,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":17}}},{"type":{"label":"new","keyword":"new","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"new","start":1342,"end":1345,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":21}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"Array","start":1346,"end":1351,"loc":{"start":{"line":44,"column":22},"end":{"line":44,"column":27}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1351,"end":1352,"loc":{"start":{"line":44,"column":27},"end":{"line":44,"column":28}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":1353,"end":1357,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":33}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1357,"end":1358,"loc":{"start":{"line":44,"column":33},"end":{"line":44,"column":34}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":1358,"end":1359,"loc":{"start":{"line":44,"column":34},"end":{"line":44,"column":35}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1359,"end":1360,"loc":{"start":{"line":44,"column":35},"end":{"line":44,"column":36}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"ndim","start":1360,"end":1364,"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":40}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1364,"end":1365,"loc":{"start":{"line":44,"column":40},"end":{"line":44,"column":41}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1365,"end":1366,"loc":{"start":{"line":44,"column":41},"end":{"line":44,"column":42}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"fill","start":1366,"end":1370,"loc":{"start":{"line":44,"column":42},"end":{"line":44,"column":46}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1370,"end":1371,"loc":{"start":{"line":44,"column":46},"end":{"line":44,"column":47}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":1371,"end":1372,"loc":{"start":{"line":44,"column":47},"end":{"line":44,"column":48}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1372,"end":1373,"loc":{"start":{"line":44,"column":48},"end":{"line":44,"column":49}}},{"type":{"label":"for","keyword":"for","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":true,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"for","start":1376,"end":1379,"loc":{"start":{"line":45,"column":2},"end":{"line":45,"column":5}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1379,"end":1380,"loc":{"start":{"line":45,"column":5},"end":{"line":45,"column":6}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":1381,"end":1384,"loc":{"start":{"line":45,"column":7},"end":{"line":45,"column":10}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"i","start":1385,"end":1386,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":12}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":1387,"end":1388,"loc":{"start":{"line":45,"column":13},"end":{"line":45,"column":14}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":1389,"end":1390,"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":16}}},{"type":{"label":";","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1391,"end":1392,"loc":{"start":{"line":45,"column":17},"end":{"line":45,"column":18}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"i","start":1393,"end":1394,"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":20}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":"<","start":1395,"end":1396,"loc":{"start":{"line":45,"column":21},"end":{"line":45,"column":22}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":1397,"end":1401,"loc":{"start":{"line":45,"column":23},"end":{"line":45,"column":27}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1401,"end":1402,"loc":{"start":{"line":45,"column":27},"end":{"line":45,"column":28}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":1402,"end":1403,"loc":{"start":{"line":45,"column":28},"end":{"line":45,"column":29}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1403,"end":1404,"loc":{"start":{"line":45,"column":29},"end":{"line":45,"column":30}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"ndim","start":1404,"end":1408,"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":34}}},{"type":{"label":";","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1409,"end":1410,"loc":{"start":{"line":45,"column":35},"end":{"line":45,"column":36}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"i","start":1411,"end":1412,"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":38}}},{"type":{"label":"++/--","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":true,"postfix":true,"binop":null},"value":"++","start":1413,"end":1415,"loc":{"start":{"line":45,"column":39},"end":{"line":45,"column":41}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1416,"end":1417,"loc":{"start":{"line":45,"column":42},"end":{"line":45,"column":43}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1417,"end":1418,"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":44}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":1422,"end":1426,"loc":{"start":{"line":46,"column":3},"end":{"line":46,"column":7}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1426,"end":1427,"loc":{"start":{"line":46,"column":7},"end":{"line":46,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"halfsize","start":1427,"end":1435,"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":16}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1435,"end":1436,"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":17}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"i","start":1436,"end":1437,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":18}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1437,"end":1438,"loc":{"start":{"line":46,"column":18},"end":{"line":46,"column":19}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":1439,"end":1440,"loc":{"start":{"line":46,"column":20},"end":{"line":46,"column":21}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":1441,"end":1445,"loc":{"start":{"line":46,"column":22},"end":{"line":46,"column":26}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1445,"end":1446,"loc":{"start":{"line":46,"column":26},"end":{"line":46,"column":27}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":1446,"end":1447,"loc":{"start":{"line":46,"column":27},"end":{"line":46,"column":28}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1447,"end":1448,"loc":{"start":{"line":46,"column":28},"end":{"line":46,"column":29}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"extents","start":1448,"end":1455,"loc":{"start":{"line":46,"column":29},"end":{"line":46,"column":36}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1455,"end":1456,"loc":{"start":{"line":46,"column":36},"end":{"line":46,"column":37}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"i","start":1456,"end":1457,"loc":{"start":{"line":46,"column":37},"end":{"line":46,"column":38}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":1457,"end":1458,"loc":{"start":{"line":46,"column":38},"end":{"line":46,"column":39}}},{"type":{"label":"/","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":10,"updateContext":null},"value":"/","start":1458,"end":1459,"loc":{"start":{"line":46,"column":39},"end":{"line":46,"column":40}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":2,"start":1459,"end":1460,"loc":{"start":{"line":46,"column":40},"end":{"line":46,"column":41}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1463,"end":1464,"loc":{"start":{"line":47,"column":2},"end":{"line":47,"column":3}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1466,"end":1467,"loc":{"start":{"line":48,"column":1},"end":{"line":48,"column":2}}},{"type":"CommentBlock","value":"* @ignore ","start":1471,"end":1485,"loc":{"start":{"line":50,"column":1},"end":{"line":50,"column":15}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"constructor","start":1487,"end":1498,"loc":{"start":{"line":51,"column":1},"end":{"line":51,"column":12}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1498,"end":1499,"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":13}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"conf","start":1500,"end":1504,"loc":{"start":{"line":51,"column":14},"end":{"line":51,"column":18}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1505,"end":1506,"loc":{"start":{"line":51,"column":19},"end":{"line":51,"column":20}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1506,"end":1507,"loc":{"start":{"line":51,"column":20},"end":{"line":51,"column":21}}},{"type":{"label":"super","keyword":"super","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"super","start":1510,"end":1515,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":7}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1515,"end":1516,"loc":{"start":{"line":52,"column":7},"end":{"line":52,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"conf","start":1516,"end":1520,"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":12}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1520,"end":1521,"loc":{"start":{"line":52,"column":12},"end":{"line":52,"column":13}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":1523,"end":1524,"loc":{"start":{"line":53,"column":1},"end":{"line":53,"column":2}}},{"type":"CommentBlock","value":"* This method computes the centroid of a specific cell with id = <cellid>. \n\tThe cellpixels object is given as an argument so that it only has to be requested\n\tonce for all cells together.\n\t@param {CellId} cellid ID number of the cell to get centroid of. \n\t@param {CellArrayObject} cellpixels object produced by {@link PixelsByCell}, \n\twhere keys are the cellids\n\tof all non-background cells on the grid, and the corresponding value is an array\n\tof the pixels belonging to that cell specified by their {@link ArrayCoordinate}.\n\t@return {ArrayCoordinate} the centroid of the current cell.\n\t","start":1529,"end":2122,"loc":{"start":{"line":55,"column":1},"end":{"line":64,"column":3}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"computeCentroidOfCell","start":2124,"end":2145,"loc":{"start":{"line":65,"column":1},"end":{"line":65,"column":22}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2145,"end":2146,"loc":{"start":{"line":65,"column":22},"end":{"line":65,"column":23}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellid","start":2147,"end":2153,"loc":{"start":{"line":65,"column":24},"end":{"line":65,"column":30}}},{"type":{"label":",","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2153,"end":2154,"loc":{"start":{"line":65,"column":30},"end":{"line":65,"column":31}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellpixels","start":2155,"end":2165,"loc":{"start":{"line":65,"column":32},"end":{"line":65,"column":42}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2167,"end":2168,"loc":{"start":{"line":65,"column":44},"end":{"line":65,"column":45}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2168,"end":2169,"loc":{"start":{"line":65,"column":45},"end":{"line":65,"column":46}}},{"type":"CommentLine","value":"let cellpixels = this.M.getStat( PixelsByCell ) ","start":2174,"end":2224,"loc":{"start":{"line":67,"column":2},"end":{"line":67,"column":52}}},{"type":{"label":"const","keyword":"const","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"const","start":2229,"end":2234,"loc":{"start":{"line":69,"column":2},"end":{"line":69,"column":7}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"pixels","start":2235,"end":2241,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":14}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2242,"end":2243,"loc":{"start":{"line":69,"column":15},"end":{"line":69,"column":16}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellpixels","start":2244,"end":2254,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":27}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2254,"end":2255,"loc":{"start":{"line":69,"column":27},"end":{"line":69,"column":28}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellid","start":2256,"end":2262,"loc":{"start":{"line":69,"column":29},"end":{"line":69,"column":35}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2263,"end":2264,"loc":{"start":{"line":69,"column":36},"end":{"line":69,"column":37}}},{"type":"CommentLine","value":" cvec will contain the x, y, (z) coordinate of the centroid.","start":2270,"end":2332,"loc":{"start":{"line":71,"column":2},"end":{"line":71,"column":64}}},{"type":"CommentLine","value":" Loop over the dimensions to compute each element separately.","start":2335,"end":2398,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":65}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":2401,"end":2404,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":5}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cvec","start":2405,"end":2409,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":10}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2410,"end":2411,"loc":{"start":{"line":73,"column":11},"end":{"line":73,"column":12}}},{"type":{"label":"new","keyword":"new","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"new","start":2412,"end":2415,"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":16}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"Array","start":2416,"end":2421,"loc":{"start":{"line":73,"column":17},"end":{"line":73,"column":22}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2421,"end":2422,"loc":{"start":{"line":73,"column":22},"end":{"line":73,"column":23}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":2422,"end":2426,"loc":{"start":{"line":73,"column":23},"end":{"line":73,"column":27}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2426,"end":2427,"loc":{"start":{"line":73,"column":27},"end":{"line":73,"column":28}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":2427,"end":2428,"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":29}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2428,"end":2429,"loc":{"start":{"line":73,"column":29},"end":{"line":73,"column":30}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"ndim","start":2429,"end":2433,"loc":{"start":{"line":73,"column":30},"end":{"line":73,"column":34}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2433,"end":2434,"loc":{"start":{"line":73,"column":34},"end":{"line":73,"column":35}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2434,"end":2435,"loc":{"start":{"line":73,"column":35},"end":{"line":73,"column":36}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"fill","start":2435,"end":2439,"loc":{"start":{"line":73,"column":36},"end":{"line":73,"column":40}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2439,"end":2440,"loc":{"start":{"line":73,"column":40},"end":{"line":73,"column":41}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":2440,"end":2441,"loc":{"start":{"line":73,"column":41},"end":{"line":73,"column":42}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2441,"end":2442,"loc":{"start":{"line":73,"column":42},"end":{"line":73,"column":43}}},{"type":{"label":"for","keyword":"for","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":true,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"for","start":2445,"end":2448,"loc":{"start":{"line":74,"column":2},"end":{"line":74,"column":5}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2448,"end":2449,"loc":{"start":{"line":74,"column":5},"end":{"line":74,"column":6}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":2450,"end":2453,"loc":{"start":{"line":74,"column":7},"end":{"line":74,"column":10}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":2454,"end":2457,"loc":{"start":{"line":74,"column":11},"end":{"line":74,"column":14}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2458,"end":2459,"loc":{"start":{"line":74,"column":15},"end":{"line":74,"column":16}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":2460,"end":2461,"loc":{"start":{"line":74,"column":17},"end":{"line":74,"column":18}}},{"type":{"label":";","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2462,"end":2463,"loc":{"start":{"line":74,"column":19},"end":{"line":74,"column":20}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":2464,"end":2467,"loc":{"start":{"line":74,"column":21},"end":{"line":74,"column":24}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":"<","start":2468,"end":2469,"loc":{"start":{"line":74,"column":25},"end":{"line":74,"column":26}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":2470,"end":2474,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":31}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2474,"end":2475,"loc":{"start":{"line":74,"column":31},"end":{"line":74,"column":32}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":2475,"end":2476,"loc":{"start":{"line":74,"column":32},"end":{"line":74,"column":33}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2476,"end":2477,"loc":{"start":{"line":74,"column":33},"end":{"line":74,"column":34}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"ndim","start":2477,"end":2481,"loc":{"start":{"line":74,"column":34},"end":{"line":74,"column":38}}},{"type":{"label":";","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2482,"end":2483,"loc":{"start":{"line":74,"column":39},"end":{"line":74,"column":40}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":2484,"end":2487,"loc":{"start":{"line":74,"column":41},"end":{"line":74,"column":44}}},{"type":{"label":"++/--","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":true,"postfix":true,"binop":null},"value":"++","start":2488,"end":2490,"loc":{"start":{"line":74,"column":45},"end":{"line":74,"column":47}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2491,"end":2492,"loc":{"start":{"line":74,"column":48},"end":{"line":74,"column":49}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2492,"end":2493,"loc":{"start":{"line":74,"column":49},"end":{"line":74,"column":50}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":2501,"end":2504,"loc":{"start":{"line":76,"column":3},"end":{"line":76,"column":6}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":2505,"end":2507,"loc":{"start":{"line":76,"column":7},"end":{"line":76,"column":9}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2508,"end":2509,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":11}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":2510,"end":2512,"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":14}}},{"type":{"label":"const","keyword":"const","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"const","start":2516,"end":2521,"loc":{"start":{"line":77,"column":3},"end":{"line":77,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"hsi","start":2522,"end":2525,"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":12}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2526,"end":2527,"loc":{"start":{"line":77,"column":13},"end":{"line":77,"column":14}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":2528,"end":2532,"loc":{"start":{"line":77,"column":15},"end":{"line":77,"column":19}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2532,"end":2533,"loc":{"start":{"line":77,"column":19},"end":{"line":77,"column":20}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"halfsize","start":2533,"end":2541,"loc":{"start":{"line":77,"column":20},"end":{"line":77,"column":28}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2541,"end":2542,"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":29}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":2542,"end":2545,"loc":{"start":{"line":77,"column":29},"end":{"line":77,"column":32}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2545,"end":2546,"loc":{"start":{"line":77,"column":32},"end":{"line":77,"column":33}}},{"type":{"label":",","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2546,"end":2547,"loc":{"start":{"line":77,"column":33},"end":{"line":77,"column":34}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"si","start":2548,"end":2550,"loc":{"start":{"line":77,"column":35},"end":{"line":77,"column":37}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2551,"end":2552,"loc":{"start":{"line":77,"column":38},"end":{"line":77,"column":39}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":2553,"end":2557,"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":44}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2557,"end":2558,"loc":{"start":{"line":77,"column":44},"end":{"line":77,"column":45}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":2558,"end":2559,"loc":{"start":{"line":77,"column":45},"end":{"line":77,"column":46}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2559,"end":2560,"loc":{"start":{"line":77,"column":46},"end":{"line":77,"column":47}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"extents","start":2560,"end":2567,"loc":{"start":{"line":77,"column":47},"end":{"line":77,"column":54}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2567,"end":2568,"loc":{"start":{"line":77,"column":54},"end":{"line":77,"column":55}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":2568,"end":2571,"loc":{"start":{"line":77,"column":55},"end":{"line":77,"column":58}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2571,"end":2572,"loc":{"start":{"line":77,"column":58},"end":{"line":77,"column":59}}},{"type":"CommentLine","value":" Loop over the pixels;","start":2580,"end":2604,"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":27}}},{"type":"CommentLine","value":" compute mean position per dimension with online algorithm","start":2608,"end":2668,"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":63}}},{"type":{"label":"for","keyword":"for","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":true,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"for","start":2672,"end":2675,"loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":6}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2675,"end":2676,"loc":{"start":{"line":81,"column":6},"end":{"line":81,"column":7}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":2677,"end":2680,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":11}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"j","start":2681,"end":2682,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":13}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":2683,"end":2684,"loc":{"start":{"line":81,"column":14},"end":{"line":81,"column":15}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":2685,"end":2686,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":17}}},{"type":{"label":";","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2687,"end":2688,"loc":{"start":{"line":81,"column":18},"end":{"line":81,"column":19}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"j","start":2689,"end":2690,"loc":{"start":{"line":81,"column":20},"end":{"line":81,"column":21}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":"<","start":2691,"end":2692,"loc":{"start":{"line":81,"column":22},"end":{"line":81,"column":23}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"pixels","start":2693,"end":2699,"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":30}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2699,"end":2700,"loc":{"start":{"line":81,"column":30},"end":{"line":81,"column":31}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"length","start":2700,"end":2706,"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":37}}},{"type":{"label":";","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":2707,"end":2708,"loc":{"start":{"line":81,"column":38},"end":{"line":81,"column":39}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"j","start":2709,"end":2710,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":41}}},{"type":{"label":"++/--","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":true,"postfix":true,"binop":null},"value":"++","start":2711,"end":2713,"loc":{"start":{"line":81,"column":42},"end":{"line":81,"column":44}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2714,"end":2715,"loc":{"start":{"line":81,"column":45},"end":{"line":81,"column":46}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":2715,"end":2716,"loc":{"start":{"line":81,"column":46},"end":{"line":81,"column":47}}},{"type":"CommentLine","value":" Check distance of current pixel to the accumulated mean in this dim.","start":2726,"end":2797,"loc":{"start":{"line":83,"column":4},"end":{"line":83,"column":75}}},{"type":"CommentLine","value":" Check if this distance is greater than half the grid size in this","start":2802,"end":2870,"loc":{"start":{"line":84,"column":4},"end":{"line":84,"column":72}}},{"type":"CommentLine","value":" dimension; if so, this indicates that the cell has moved to the","start":2875,"end":2941,"loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":70}}},{"type":"CommentLine","value":" other end of the grid because of the torus. Note that this only","start":2946,"end":3012,"loc":{"start":{"line":86,"column":4},"end":{"line":86,"column":70}}},{"type":"CommentLine","value":" holds AFTER the first pixel (so for j > 0), when we actually have","start":3017,"end":3085,"loc":{"start":{"line":87,"column":4},"end":{"line":87,"column":72}}},{"type":"CommentLine","value":" an idea of where the cell is.","start":3090,"end":3122,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":36}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":3127,"end":3130,"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":7}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dx","start":3131,"end":3133,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":10}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":3134,"end":3135,"loc":{"start":{"line":89,"column":11},"end":{"line":89,"column":12}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"pixels","start":3136,"end":3142,"loc":{"start":{"line":89,"column":13},"end":{"line":89,"column":19}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3142,"end":3143,"loc":{"start":{"line":89,"column":19},"end":{"line":89,"column":20}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"j","start":3143,"end":3144,"loc":{"start":{"line":89,"column":20},"end":{"line":89,"column":21}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3144,"end":3145,"loc":{"start":{"line":89,"column":21},"end":{"line":89,"column":22}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3145,"end":3146,"loc":{"start":{"line":89,"column":22},"end":{"line":89,"column":23}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":3146,"end":3149,"loc":{"start":{"line":89,"column":23},"end":{"line":89,"column":26}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3149,"end":3150,"loc":{"start":{"line":89,"column":26},"end":{"line":89,"column":27}}},{"type":{"label":"+/-","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":true,"postfix":false,"binop":9,"updateContext":null},"value":"-","start":3151,"end":3152,"loc":{"start":{"line":89,"column":28},"end":{"line":89,"column":29}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3153,"end":3155,"loc":{"start":{"line":89,"column":30},"end":{"line":89,"column":32}}},{"type":{"label":"if","keyword":"if","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"if","start":3160,"end":3162,"loc":{"start":{"line":90,"column":4},"end":{"line":90,"column":6}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3162,"end":3163,"loc":{"start":{"line":90,"column":6},"end":{"line":90,"column":7}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":3164,"end":3168,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":12}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3168,"end":3169,"loc":{"start":{"line":90,"column":12},"end":{"line":90,"column":13}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":3169,"end":3170,"loc":{"start":{"line":90,"column":13},"end":{"line":90,"column":14}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3170,"end":3171,"loc":{"start":{"line":90,"column":14},"end":{"line":90,"column":15}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"grid","start":3171,"end":3175,"loc":{"start":{"line":90,"column":15},"end":{"line":90,"column":19}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3175,"end":3176,"loc":{"start":{"line":90,"column":19},"end":{"line":90,"column":20}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"torus","start":3176,"end":3181,"loc":{"start":{"line":90,"column":20},"end":{"line":90,"column":25}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3181,"end":3182,"loc":{"start":{"line":90,"column":25},"end":{"line":90,"column":26}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":3182,"end":3185,"loc":{"start":{"line":90,"column":26},"end":{"line":90,"column":29}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3185,"end":3186,"loc":{"start":{"line":90,"column":29},"end":{"line":90,"column":30}}},{"type":{"label":"&&","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":2,"updateContext":null},"value":"&&","start":3187,"end":3189,"loc":{"start":{"line":90,"column":31},"end":{"line":90,"column":33}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"j","start":3190,"end":3191,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":35}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":">","start":3192,"end":3193,"loc":{"start":{"line":90,"column":36},"end":{"line":90,"column":37}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":3194,"end":3195,"loc":{"start":{"line":90,"column":38},"end":{"line":90,"column":39}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3196,"end":3197,"loc":{"start":{"line":90,"column":40},"end":{"line":90,"column":41}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3197,"end":3198,"loc":{"start":{"line":90,"column":41},"end":{"line":90,"column":42}}},{"type":"CommentLine","value":" If distance is greater than half the grid size, correct the","start":3204,"end":3266,"loc":{"start":{"line":91,"column":5},"end":{"line":91,"column":67}}},{"type":"CommentLine","value":" coordinate.","start":3272,"end":3286,"loc":{"start":{"line":92,"column":5},"end":{"line":92,"column":19}}},{"type":{"label":"if","keyword":"if","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"if","start":3292,"end":3294,"loc":{"start":{"line":93,"column":5},"end":{"line":93,"column":7}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3294,"end":3295,"loc":{"start":{"line":93,"column":7},"end":{"line":93,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dx","start":3296,"end":3298,"loc":{"start":{"line":93,"column":9},"end":{"line":93,"column":11}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":">","start":3299,"end":3300,"loc":{"start":{"line":93,"column":12},"end":{"line":93,"column":13}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"hsi","start":3301,"end":3304,"loc":{"start":{"line":93,"column":14},"end":{"line":93,"column":17}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3305,"end":3306,"loc":{"start":{"line":93,"column":18},"end":{"line":93,"column":19}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3306,"end":3307,"loc":{"start":{"line":93,"column":19},"end":{"line":93,"column":20}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dx","start":3314,"end":3316,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":8}}},{"type":{"label":"_=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"-=","start":3317,"end":3319,"loc":{"start":{"line":94,"column":9},"end":{"line":94,"column":11}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"si","start":3320,"end":3322,"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":14}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3328,"end":3329,"loc":{"start":{"line":95,"column":5},"end":{"line":95,"column":6}}},{"type":{"label":"else","keyword":"else","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"else","start":3330,"end":3334,"loc":{"start":{"line":95,"column":7},"end":{"line":95,"column":11}}},{"type":{"label":"if","keyword":"if","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"if","start":3335,"end":3337,"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":14}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3337,"end":3338,"loc":{"start":{"line":95,"column":14},"end":{"line":95,"column":15}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dx","start":3339,"end":3341,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":18}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":"<","start":3342,"end":3343,"loc":{"start":{"line":95,"column":19},"end":{"line":95,"column":20}}},{"type":{"label":"+/-","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":true,"postfix":false,"binop":9,"updateContext":null},"value":"-","start":3344,"end":3345,"loc":{"start":{"line":95,"column":21},"end":{"line":95,"column":22}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"hsi","start":3345,"end":3348,"loc":{"start":{"line":95,"column":22},"end":{"line":95,"column":25}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3349,"end":3350,"loc":{"start":{"line":95,"column":26},"end":{"line":95,"column":27}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3350,"end":3351,"loc":{"start":{"line":95,"column":27},"end":{"line":95,"column":28}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dx","start":3358,"end":3360,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":8}}},{"type":{"label":"_=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"+=","start":3361,"end":3363,"loc":{"start":{"line":96,"column":9},"end":{"line":96,"column":11}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"si","start":3364,"end":3366,"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":14}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3372,"end":3373,"loc":{"start":{"line":97,"column":5},"end":{"line":97,"column":6}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3378,"end":3379,"loc":{"start":{"line":98,"column":4},"end":{"line":98,"column":5}}},{"type":"CommentLine","value":" Update the mean with the appropriate weight. ","start":3384,"end":3432,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3437,"end":3439,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":6}}},{"type":{"label":"_=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"+=","start":3440,"end":3442,"loc":{"start":{"line":100,"column":7},"end":{"line":100,"column":9}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dx","start":3443,"end":3445,"loc":{"start":{"line":100,"column":10},"end":{"line":100,"column":12}}},{"type":{"label":"/","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":10,"updateContext":null},"value":"/","start":3445,"end":3446,"loc":{"start":{"line":100,"column":12},"end":{"line":100,"column":13}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3446,"end":3447,"loc":{"start":{"line":100,"column":13},"end":{"line":100,"column":14}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"j","start":3447,"end":3448,"loc":{"start":{"line":100,"column":14},"end":{"line":100,"column":15}}},{"type":{"label":"+/-","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":true,"postfix":false,"binop":9,"updateContext":null},"value":"+","start":3448,"end":3449,"loc":{"start":{"line":100,"column":15},"end":{"line":100,"column":16}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":1,"start":3449,"end":3450,"loc":{"start":{"line":100,"column":16},"end":{"line":100,"column":17}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3450,"end":3451,"loc":{"start":{"line":100,"column":17},"end":{"line":100,"column":18}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3455,"end":3456,"loc":{"start":{"line":101,"column":3},"end":{"line":101,"column":4}}},{"type":"CommentLine","value":" Correct the final position so that it falls in the current grid.","start":3464,"end":3531,"loc":{"start":{"line":103,"column":3},"end":{"line":103,"column":70}}},{"type":"CommentLine","value":" (Because of the torus, it can happen to get a centroid at eg x = -1. )","start":3535,"end":3608,"loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":76}}},{"type":{"label":"if","keyword":"if","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"if","start":3612,"end":3614,"loc":{"start":{"line":105,"column":3},"end":{"line":105,"column":5}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3614,"end":3615,"loc":{"start":{"line":105,"column":5},"end":{"line":105,"column":6}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3616,"end":3618,"loc":{"start":{"line":105,"column":7},"end":{"line":105,"column":9}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":"<","start":3619,"end":3620,"loc":{"start":{"line":105,"column":10},"end":{"line":105,"column":11}}},{"type":{"label":"num","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":0,"start":3621,"end":3622,"loc":{"start":{"line":105,"column":12},"end":{"line":105,"column":13}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3623,"end":3624,"loc":{"start":{"line":105,"column":14},"end":{"line":105,"column":15}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3624,"end":3625,"loc":{"start":{"line":105,"column":15},"end":{"line":105,"column":16}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3630,"end":3632,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":6}}},{"type":{"label":"_=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"+=","start":3633,"end":3635,"loc":{"start":{"line":106,"column":7},"end":{"line":106,"column":9}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"si","start":3636,"end":3638,"loc":{"start":{"line":106,"column":10},"end":{"line":106,"column":12}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3642,"end":3643,"loc":{"start":{"line":107,"column":3},"end":{"line":107,"column":4}}},{"type":{"label":"else","keyword":"else","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"else","start":3644,"end":3648,"loc":{"start":{"line":107,"column":5},"end":{"line":107,"column":9}}},{"type":{"label":"if","keyword":"if","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"if","start":3649,"end":3651,"loc":{"start":{"line":107,"column":10},"end":{"line":107,"column":12}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3651,"end":3652,"loc":{"start":{"line":107,"column":12},"end":{"line":107,"column":13}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3653,"end":3655,"loc":{"start":{"line":107,"column":14},"end":{"line":107,"column":16}}},{"type":{"label":"</>","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":7,"updateContext":null},"value":">","start":3656,"end":3657,"loc":{"start":{"line":107,"column":17},"end":{"line":107,"column":18}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"si","start":3658,"end":3660,"loc":{"start":{"line":107,"column":19},"end":{"line":107,"column":21}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3661,"end":3662,"loc":{"start":{"line":107,"column":22},"end":{"line":107,"column":23}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3662,"end":3663,"loc":{"start":{"line":107,"column":23},"end":{"line":107,"column":24}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3668,"end":3670,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":6}}},{"type":{"label":"_=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"-=","start":3671,"end":3673,"loc":{"start":{"line":108,"column":7},"end":{"line":108,"column":9}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"si","start":3674,"end":3676,"loc":{"start":{"line":108,"column":10},"end":{"line":108,"column":12}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3680,"end":3681,"loc":{"start":{"line":109,"column":3},"end":{"line":109,"column":4}}},{"type":"CommentLine","value":" Set the mean position in the cvec vector.","start":3689,"end":3733,"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":47}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cvec","start":3737,"end":3741,"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":7}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3741,"end":3742,"loc":{"start":{"line":112,"column":7},"end":{"line":112,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"dim","start":3742,"end":3745,"loc":{"start":{"line":112,"column":8},"end":{"line":112,"column":11}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":3745,"end":3746,"loc":{"start":{"line":112,"column":11},"end":{"line":112,"column":12}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":3747,"end":3748,"loc":{"start":{"line":112,"column":13},"end":{"line":112,"column":14}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"mi","start":3749,"end":3751,"loc":{"start":{"line":112,"column":15},"end":{"line":112,"column":17}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3754,"end":3755,"loc":{"start":{"line":113,"column":2},"end":{"line":113,"column":3}}},{"type":{"label":"return","keyword":"return","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"return","start":3758,"end":3764,"loc":{"start":{"line":114,"column":2},"end":{"line":114,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cvec","start":3765,"end":3769,"loc":{"start":{"line":114,"column":9},"end":{"line":114,"column":13}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3774,"end":3775,"loc":{"start":{"line":116,"column":1},"end":{"line":116,"column":2}}},{"type":"CommentBlock","value":"* This method computes the centroids of all cells on the grid. \n\t@return {CellObject} with an {@link ArrayCoordinate} of the centroid for each cell\n\t on the grid (see {@link computeCentroidOfCell}). ","start":3780,"end":3983,"loc":{"start":{"line":118,"column":1},"end":{"line":120,"column":53}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"compute","start":3985,"end":3992,"loc":{"start":{"line":121,"column":1},"end":{"line":121,"column":8}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3992,"end":3993,"loc":{"start":{"line":121,"column":8},"end":{"line":121,"column":9}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3993,"end":3994,"loc":{"start":{"line":121,"column":9},"end":{"line":121,"column":10}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":3994,"end":3995,"loc":{"start":{"line":121,"column":10},"end":{"line":121,"column":11}}},{"type":"CommentLine","value":" Get object with arrays of pixels for each cell on the grid, and get","start":3998,"end":4068,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":72}}},{"type":"CommentLine","value":" the array for the current cell.","start":4071,"end":4105,"loc":{"start":{"line":123,"column":2},"end":{"line":123,"column":36}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":4108,"end":4111,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":5}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellpixels","start":4112,"end":4122,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":16}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":4123,"end":4124,"loc":{"start":{"line":124,"column":17},"end":{"line":124,"column":18}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":4125,"end":4129,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":23}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4129,"end":4130,"loc":{"start":{"line":124,"column":23},"end":{"line":124,"column":24}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":4130,"end":4131,"loc":{"start":{"line":124,"column":24},"end":{"line":124,"column":25}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4131,"end":4132,"loc":{"start":{"line":124,"column":25},"end":{"line":124,"column":26}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"getStat","start":4132,"end":4139,"loc":{"start":{"line":124,"column":26},"end":{"line":124,"column":33}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4139,"end":4140,"loc":{"start":{"line":124,"column":33},"end":{"line":124,"column":34}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"PixelsByCell","start":4141,"end":4153,"loc":{"start":{"line":124,"column":35},"end":{"line":124,"column":47}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4154,"end":4155,"loc":{"start":{"line":124,"column":48},"end":{"line":124,"column":49}}},{"type":"CommentLine","value":" Create an object for the centroids. Add the centroid array for each cell.","start":4162,"end":4238,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":78}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":4241,"end":4244,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":5}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"centroids","start":4245,"end":4254,"loc":{"start":{"line":127,"column":6},"end":{"line":127,"column":15}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":4255,"end":4256,"loc":{"start":{"line":127,"column":16},"end":{"line":127,"column":17}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4257,"end":4258,"loc":{"start":{"line":127,"column":18},"end":{"line":127,"column":19}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4258,"end":4259,"loc":{"start":{"line":127,"column":19},"end":{"line":127,"column":20}}},{"type":{"label":"for","keyword":"for","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":true,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"for","start":4262,"end":4265,"loc":{"start":{"line":128,"column":2},"end":{"line":128,"column":5}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4265,"end":4266,"loc":{"start":{"line":128,"column":5},"end":{"line":128,"column":6}}},{"type":{"label":"let","keyword":"let","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"let","start":4267,"end":4270,"loc":{"start":{"line":128,"column":7},"end":{"line":128,"column":10}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cid","start":4271,"end":4274,"loc":{"start":{"line":128,"column":11},"end":{"line":128,"column":14}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"of","start":4275,"end":4277,"loc":{"start":{"line":128,"column":15},"end":{"line":128,"column":17}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":4278,"end":4282,"loc":{"start":{"line":128,"column":18},"end":{"line":128,"column":22}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4282,"end":4283,"loc":{"start":{"line":128,"column":22},"end":{"line":128,"column":23}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"M","start":4283,"end":4284,"loc":{"start":{"line":128,"column":23},"end":{"line":128,"column":24}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4284,"end":4285,"loc":{"start":{"line":128,"column":24},"end":{"line":128,"column":25}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellIDs","start":4285,"end":4292,"loc":{"start":{"line":128,"column":25},"end":{"line":128,"column":32}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4292,"end":4293,"loc":{"start":{"line":128,"column":32},"end":{"line":128,"column":33}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4293,"end":4294,"loc":{"start":{"line":128,"column":33},"end":{"line":128,"column":34}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4295,"end":4296,"loc":{"start":{"line":128,"column":35},"end":{"line":128,"column":36}}},{"type":{"label":"{","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4296,"end":4297,"loc":{"start":{"line":128,"column":36},"end":{"line":128,"column":37}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"centroids","start":4301,"end":4310,"loc":{"start":{"line":129,"column":3},"end":{"line":129,"column":12}}},{"type":{"label":"[","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4310,"end":4311,"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":13}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cid","start":4311,"end":4314,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":16}}},{"type":{"label":"]","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4314,"end":4315,"loc":{"start":{"line":129,"column":16},"end":{"line":129,"column":17}}},{"type":{"label":"=","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":true,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"=","start":4316,"end":4317,"loc":{"start":{"line":129,"column":18},"end":{"line":129,"column":19}}},{"type":{"label":"this","keyword":"this","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"this","start":4318,"end":4322,"loc":{"start":{"line":129,"column":20},"end":{"line":129,"column":24}}},{"type":{"label":".","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4322,"end":4323,"loc":{"start":{"line":129,"column":24},"end":{"line":129,"column":25}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"computeCentroidOfCell","start":4323,"end":4344,"loc":{"start":{"line":129,"column":25},"end":{"line":129,"column":46}}},{"type":{"label":"(","beforeExpr":true,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4344,"end":4345,"loc":{"start":{"line":129,"column":46},"end":{"line":129,"column":47}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cid","start":4346,"end":4349,"loc":{"start":{"line":129,"column":48},"end":{"line":129,"column":51}}},{"type":{"label":",","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4349,"end":4350,"loc":{"start":{"line":129,"column":51},"end":{"line":129,"column":52}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"cellpixels","start":4351,"end":4361,"loc":{"start":{"line":129,"column":53},"end":{"line":129,"column":63}}},{"type":{"label":")","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4362,"end":4363,"loc":{"start":{"line":129,"column":64},"end":{"line":129,"column":65}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4366,"end":4367,"loc":{"start":{"line":130,"column":2},"end":{"line":130,"column":3}}},{"type":{"label":"return","keyword":"return","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"return","start":4373,"end":4379,"loc":{"start":{"line":132,"column":2},"end":{"line":132,"column":8}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"centroids","start":4380,"end":4389,"loc":{"start":{"line":132,"column":9},"end":{"line":132,"column":18}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4394,"end":4395,"loc":{"start":{"line":134,"column":1},"end":{"line":134,"column":2}}},{"type":{"label":"}","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"start":4396,"end":4397,"loc":{"start":{"line":135,"column":0},"end":{"line":135,"column":1}}},{"type":{"label":"export","keyword":"export","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"export","start":4399,"end":4405,"loc":{"start":{"line":137,"column":0},"end":{"line":137,"column":6}}},{"type":{"label":"default","keyword":"default","beforeExpr":true,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"value":"default","start":4406,"end":4413,"loc":{"start":{"line":137,"column":7},"end":{"line":137,"column":14}}},{"type":{"label":"name","beforeExpr":false,"startsExpr":true,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null},"value":"CentroidsWithTorusCorrection","start":4414,"end":4442,"loc":{"start":{"line":137,"column":15},"end":{"line":137,"column":43}}},{"type":{"label":"eof","beforeExpr":false,"startsExpr":false,"rightAssociative":false,"isLoop":false,"isAssign":false,"prefix":false,"postfix":false,"binop":null,"updateContext":null},"start":4443,"end":4443,"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":0}}}]}