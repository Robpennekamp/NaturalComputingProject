"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AddJsonKeyPinData1659902242948 = void 0;
const migrationHelpers_1 = require("../../utils/migrationHelpers");
const _1659888469333_AddJsonKeyPinData_1 = require("../sqlite/1659888469333-AddJsonKeyPinData");
class AddJsonKeyPinData1659902242948 {
    async up(context) {
        const { queryRunner, tablePrefix } = context;
        const workflowTable = `${tablePrefix}workflow_entity`;
        const PINDATA_SELECT_QUERY = `
			SELECT id, "pinData"
			FROM ${workflowTable}
			WHERE "pinData" IS NOT NULL;
		`;
        const PINDATA_UPDATE_STATEMENT = `
			UPDATE ${workflowTable}
			SET "pinData" = :pinData
			WHERE id = :id;
		`;
        await (0, migrationHelpers_1.runInBatches)(queryRunner, PINDATA_SELECT_QUERY, (0, _1659888469333_AddJsonKeyPinData_1.addJsonKeyToPinDataColumn)(context, PINDATA_UPDATE_STATEMENT));
    }
}
exports.AddJsonKeyPinData1659902242948 = AddJsonKeyPinData1659902242948;
//# sourceMappingURL=1659902242948-AddJsonKeyPinData.js.map