var Ir=Object.defineProperty;var Dr=(s,e,t)=>e in s?Ir(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var kt=(s,e,t)=>(Dr(s,typeof e!="symbol"?e+"":e,t),t);import{V as S,d as C,r as H,o as qe,c as Y,a as Ke,p as ri,q as Ar,l as _t,e as li,x as ci,n as Wt,f as Pr,y as Or,w as Mr,z as di}from"./vendor-df0f493f.js";import{l as Rr}from"./@fortawesome/fontawesome-svg-core-a6b9645d.js";import{f as Lr,a as Wr,b as Br,c as Ur,d as Fr,e as Vr,g as zr,h as jr,i as Kr,j as Hr,k as Gr,l as qr,m as Yr,n as Xr,o as Jr,p as Qr,q as Zr,r as el,s as tl,t as sl,u as nl,v as ol,w as al,x as il,y as rl,z as ll,A as cl,B as dl,C as ul,D as hl,E as pl,F as fl,G as ml,H as gl,I as _l,J as vl,K as wl,L as yl,M as bl,N as xl,O as Tl,P as kl,Q as Sl,R as $l,S as El,T as Cl,U as Nl,V as Il,W as Dl,X as Al,Y as Pl,Z as Ol,_ as Ml,$ as Rl,a0 as Ll,a1 as Wl,a2 as Bl,a3 as Ul,a4 as Fl,a5 as Vl,a6 as zl,a7 as jl,a8 as Kl,a9 as Hl,aa as Gl,ab as ql,ac as Yl,ad as Xl,ae as Jl,af as Ql,ag as Zl,ah as ec,ai as tc,aj as sc,ak as nc,al as oc,am as ac,an as ic,ao as rc,ap as lc,aq as cc,ar as dc,as as uc,at as hc,au as pc,av as fc,aw as mc,ax as gc,ay as _c,az as vc,aA as wc,aB as yc,aC as bc,aD as xc,aE as Tc,aF as kc,aG as Sc,aH as $c,aI as Ec,aJ as Cc,aK as Nc,aL as Ic,aM as Dc,aN as Ac,aO as Pc,aP as Oc,aQ as Mc,aR as Rc,aS as Lc,aT as Wc,aU as Bc,aV as Uc,aW as Fc,aX as Vc,aY as zc,aZ as jc,a_ as Kc,a$ as Hc,b0 as Gc,b1 as qc,b2 as Yc,b3 as Xc,b4 as Jc,b5 as Qc,b6 as Zc,b7 as ed}from"./@fortawesome/free-solid-svg-icons-a2911fb5.js";import{f as td}from"./@fortawesome/free-regular-svg-icons-74cb85f8.js";import{F as ui}from"./@fortawesome/vue-fontawesome-1701eda0.js";import{V as sd}from"./vue2-touch-events-2bad05e9.js";import{v as nd}from"./v-click-outside-01179a04.js";import{i as od}from"./vue-fragment-f3d0cc79.js";import{V as hi}from"./vue-agile-00cde7d9.js";import{z as q,y as p,A as se,E as ad,N as id,B as sn,C as Le,D as ae,M as De,m as Ce,F as vs,G as ze,H as rd,I as ld,J as cd,K as mt,L as pi,O as fi,P as dd}from"./n8n-8025af5e.js";import{m as b,d as mi,P as ud,c as hd}from"./pinia-ba86f1d8.js";import{u as P,M as ie,A as zt,a as Z,b as pd,c as gi,C as _i,d as We,s as D,e as Cs,f as Ns,N as nn,g as nt,h as fd,i as Is,j as z,V as jt,w as re,k as le,l as be,P as md,m as gd,n as _d,o as B,p as ce,q as vd,r as vi,t as wd,v as yd,x as wi,E as te,y as bd,z as xd,B as Ds,D as ws,F as Td,G as N,H as kd,I as d,J as Ye,K as Sd,L as ys,O as on,Q as yi,R as an,S as $d,T as Be,U as As,W as fe,X as Ps,Y as xe,Z as Os,_ as Ms,$ as He,a0 as bi,a1 as oe,a2 as Kt,a3 as Ht,a4 as xi,a5 as Ed,a6 as $e,a7 as Cd,a8 as Nd,a9 as Id,aa as Dd,ab as Ad,ac as rs,ad as Ae,ae as rn,af as Pd,ag as Od,ah as Md,ai as Rd,aj as Ld,ak as Wd,al as Bd,am as Ud,an as Fd,ao as Vd,ap as zd,aq as jd,ar as Kd,as as ln,at as Hd,au as Qe,av as Gd,aw as qd,ax as Yd,ay as ls,az as cs,aA as ds,aB as us,aC as Xd,aD as cn,aE as Jd,aF as dn,aG as Qd,aH as Zd,aI as eu,aJ as tu,aK as su,aL as nu,aM as ou,aN as au,aO as iu,aP as ru,aQ as un,aR as lu,aS as cu,aT as du,aU as uu,aV as hu,aW as pu,aX as hn,aY as fu,aZ as mu,a_ as gu,a$ as _u,b0 as vu,b1 as wu,b2 as yu,b3 as bu,b4 as xu,b5 as Tu,b6 as ku,b7 as Su,b8 as pn,b9 as $u,ba as Eu,bb as Cu,bc as Nu,bd as Iu,be as Du,bf as Au,bg as fn,bh as Pu,bi as Ti,bj as ki,bk as Si,bl as yt,bm as Rs,bn as $i,bo as Pe,bp as he,bq as Gt,br as Ei,bs as Bt,bt as Ci,bu as Ni,bv as Ii,bw as J,bx as Ou,by as Ut,bz as Mu,bA as Ge,bB as at,bC as Di,bD as Ls,bE as je,bF as ot,bG as Ru,bH as mn,bI as qt,bJ as Ai,bK as Yt,bL as Pi,bM as Oi,bN as vt,bO as Lu,bP as Wu,bQ as Ws,bR as Bu,bS as Xt,bT as ut,bU as hs,bV as gt,bW as ue,bX as Se,bY as Uu,bZ as Fu,b_ as Vu,b$ as Oe,c0 as zu,c1 as ju,c2 as Mi,c3 as Ku,c4 as gn,c5 as _n,c6 as vn,c7 as wn,c8 as Ie,c9 as ke,ca as Re,cb as Ft,cc as Bs,cd as Hu,ce as Gu,cf as qu,cg as Yu,ch as Ri,ci as Xu,cj as it,ck as Ju,cl as Lt,cm as Qu,cn as Jt,co as me,cp as Zu,cq as st,cr as Li,cs as yn,ct as Wi,cu as eh,cv as th,cw as sh,cx as nh,cy as bn,cz as xn,cA as oh,cB as Tn,cC as bs,cD as kn,cE as ah,cF as Xe,cG as Us,cH as ih,cI as rh,cJ as lh,cK as ch,cL as Sn,cM as xs,cN as $n,cO as dh,cP as Vt,cQ as En,cR as uh,cS as hh,cT as ph,cU as Ze,cV as fh,cW as mh,cX as Cn,cY as St,cZ as Bi,c_ as Ts,c$ as ks,d0 as Ui,d1 as gh,d2 as $t,d3 as Fe,d4 as ps,d5 as Nn,d6 as _h,d7 as et,d8 as ht,d9 as vh,da as wh,db as In,dc as pt,dd as yh,de as bh,df as xh,dg as Th,dh as Dn,di as An,dj as Pn,dk as kh,dl as On,dm as Mn,dn as Et,dp as Rn,dq as Sh,dr as $h,ds as Ln,dt as Eh,du as Ch,dv as Nh,dw as Ih,dx as Wn,dy as Dh,dz as Ah,dA as Ph,dB as Oh,dC as Mh,dD as ye,dE as Fi,dF as Rh,dG as Bn,dH as Lh,dI as Wh,dJ as Vi,dK as Fs,dL as Bh,dM as Uh,dN as zi,dO as Fh,dP as ee,dQ as Vh,dR as Un,dS as zh,dT as jh}from"./ParameterInputList-a8424193.js";import{m as x}from"./vue-typed-mixins-a25478b2.js";import"./axios-f993d27a.js";import{d as ji}from"./dateformat-ef117725.js";import{d as Ki,_ as Hi,u as Ss}from"./lodash-es-e1022157.js";import{r as Kh,f as Hh}from"./timeago.js-a9e71aec.js";import{c as Gh}from"./canvas-confetti-60b90aac.js";import{p as qh}from"./flatted-8b14da7d.js";import{F as $s}from"./file-saver-d988540e.js";import{Y as Fn,Z as Vn,_ as zn,$ as Ct}from"./@jsplumb/core-75ba1e73.js";import{_ as Yh}from"./vue2-teleport-53e66c3b.js";import{V as Gi}from"./vue-json-pretty-49f1c0cb.js";import{E as Nt,a as jn,b as Kn,c as Hn,d as Gn,e as qn,f as It,r as Xh}from"./@jsplumb/browser-ui-ddea9532.js";import{v as Ne}from"./uuid-cf522c50.js";import{h as Jh}from"./humanize-duration-3471cd08.js";import{I as Qh}from"./vue-infinite-loading-8e5543e4.js";import{c as Zh}from"./copy-to-clipboard-fcf36459.js";import"./luxon-3d1ae2f1.js";import"./esprima-next-d1b163ef.js";import"./vue-i18n-b439dfd7.js";import"./en-bbe6b9d4.js";import"./codemirror-lang-html-n8n-728c3977.js";import"./@jsplumb/util-79bcf4d9.js";import"./@jsplumb/connector-bezier-c9c16c6b.js";import"./@jsplumb/common-fe415eb9.js";import"./codemirror-lang-n8n-expression-0036beb8.js";import"./fast-json-stable-stringify-0e965c3b.js";import"./prettier-50ab9e24.js";function vB(){import("data:text/javascript,")}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const ep={prefix:"fas",iconName:"variable",icon:[52,52,[],"e001","M42.6,17.8c2.4,0,7.2-2,7.2-8.4c0-6.4-4.6-6.8-6.1-6.8c-2.8,0-5.6,2-8.1,6.3c-2.5,4.4-5.3,9.1-5.3,9.1 l-0.1,0c-0.6-3.1-1.1-5.6-1.3-6.7c-0.5-2.7-3.6-8.4-9.9-8.4c-6.4,0-12.2,3.7-12.2,3.7l0,0C5.8,7.3,5.1,8.5,5.1,9.9 c0,2.1,1.7,3.9,3.9,3.9c0.6,0,1.2-0.2,1.7-0.4l0,0c0,0,4.8-2.7,5.9,0c0.3,0.8,0.6,1.7,0.9,2.7c1.2,4.2,2.4,9.1,3.3,13.5l-4.2,6 c0,0-4.7-1.7-7.1-1.7s-7.2,2-7.2,8.4s4.6,6.8,6.1,6.8c2.8,0,5.6-2,8.1-6.3c2.5-4.4,5.3-9.1,5.3-9.1c0.8,4,1.5,7.1,1.9,8.5 c1.6,4.5,5.3,7.2,10.1,7.2c0,0,5,0,10.9-3.3c1.4-0.6,2.4-2,2.4-3.6c0-2.1-1.7-3.9-3.9-3.9c-0.6,0-1.2,0.2-1.7,0.4l0,0 c0,0-4.2,2.4-5.6,0.5c-1-2-1.9-4.6-2.6-7.8c-0.6-2.8-1.3-6.2-2-9.5l4.3-6.2C35.5,16.1,40.2,17.8,42.6,17.8z"]};function m(s){Rr.add(s)}m(Lr);m(Wr);m(Br);m(Ur);m(Fr);m(Vr);m(zr);m(jr);m(Kr);m(Hr);m(Gr);m(qr);m(Yr);m(Xr);m(Jr);m(Qr);m(Zr);m(el);m(tl);m(sl);m(nl);m(ol);m(al);m(il);m(rl);m(ll);m(cl);m(dl);m(ul);m(hl);m(pl);m(fl);m(ml);m(gl);m(_l);m(vl);m(wl);m(yl);m(bl);m(xl);m(Tl);m(kl);m(Sl);m($l);m(El);m(Cl);m(Nl);m(Il);m(Dl);m(Al);m(Pl);m(Ol);m(Ml);m(Rl);m(Ll);m(Wl);m(Bl);m(Ul);m(Fl);m(Vl);m(zl);m(jl);m(Kl);m(Hl);m(Gl);m(ql);m(Yl);m(Xl);m(Jl);m(Ql);m(Zl);m(ec);m(tc);m(sc);m(nc);m(oc);m(ac);m(ic);m(rc);m(lc);m(cc);m(dc);m(uc);m(hc);m(pc);m(fc);m(mc);m(gc);m(_c);m(vc);m(wc);m(yc);m(bc);m(xc);m(Tc);m(kc);m(Sc);m($c);m(Ec);m(Cc);m(Nc);m(Ic);m(Dc);m(td);m(Ac);m(Pc);m(Oc);m(Mc);m(Rc);m(Lc);m(Wc);m(Bc);m(Uc);m(Fc);m(Vc);m(zc);m(jc);m(Kc);m(Hc);m(Gc);m(qc);m(Yc);m(Xc);m(Jc);m(ep);m(Qc);m(Zc);m(ed);S.component("font-awesome-icon",ui);S.use(sd);S.use(nd);var Yn={},tp={get exports(){return Yn},set exports(s){Yn=s}};(function(s){var e=function(t){var n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(y,_,T){y[_]=T.value},i,r=typeof Symbol=="function"?Symbol:{},l=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",h=r.toStringTag||"@@toStringTag";function f(y,_,T){return Object.defineProperty(y,_,{value:T,enumerable:!0,configurable:!0,writable:!0}),y[_]}try{f({},"")}catch(y){f=function(_,T,F){return _[T]=F}}function u(y,_,T,F){var A=_&&_.prototype instanceof V?_:V,Q=Object.create(A.prototype),_e=new K(F||[]);return a(Q,"_invoke",{value:U(y,T,_e)}),Q}t.wrap=u;function w(y,_,T){try{return{type:"normal",arg:y.call(_,T)}}catch(F){return{type:"throw",arg:F}}}var g="suspendedStart",v="suspendedYield",k="executing",E="completed",I={};function V(){}function W(){}function O(){}var $={};f($,l,function(){return this});var M=Object.getPrototypeOf,G=M&&M(M(de([])));G&&G!==n&&o.call(G,l)&&($=G);var ne=O.prototype=V.prototype=Object.create($);W.prototype=O,a(ne,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:W,configurable:!0}),W.displayName=f(O,h,"GeneratorFunction");function pe(y){["next","throw","return"].forEach(function(_){f(y,_,function(T){return this._invoke(_,T)})})}t.isGeneratorFunction=function(y){var _=typeof y=="function"&&y.constructor;return _?_===W||(_.displayName||_.name)==="GeneratorFunction":!1},t.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,O):(y.__proto__=O,f(y,h,"GeneratorFunction")),y.prototype=Object.create(ne),y},t.awrap=function(y){return{__await:y}};function R(y,_){function T(Q,_e,ve,Te){var we=w(y[Q],y,_e);if(we.type==="throw")Te(we.arg);else{var is=we.arg,dt=is.value;return dt&&typeof dt=="object"&&o.call(dt,"__await")?_.resolve(dt.__await).then(function(Ue){T("next",Ue,ve,Te)},function(Ue){T("throw",Ue,ve,Te)}):_.resolve(dt).then(function(Ue){is.value=Ue,ve(is)},function(Ue){return T("throw",Ue,ve,Te)})}}var F;function A(Q,_e){function ve(){return new _(function(Te,we){T(Q,_e,Te,we)})}return F=F?F.then(ve,ve):ve()}a(this,"_invoke",{value:A})}pe(R.prototype),f(R.prototype,c,function(){return this}),t.AsyncIterator=R,t.async=function(y,_,T,F,A){A===void 0&&(A=Promise);var Q=new R(u(y,_,T,F),A);return t.isGeneratorFunction(_)?Q:Q.next().then(function(_e){return _e.done?_e.value:Q.next()})};function U(y,_,T){var F=g;return function(Q,_e){if(F===k)throw new Error("Generator is already running");if(F===E){if(Q==="throw")throw _e;return j()}for(T.method=Q,T.arg=_e;;){var ve=T.delegate;if(ve){var Te=X(ve,T);if(Te){if(Te===I)continue;return Te}}if(T.method==="next")T.sent=T._sent=T.arg;else if(T.method==="throw"){if(F===g)throw F=E,T.arg;T.dispatchException(T.arg)}else T.method==="return"&&T.abrupt("return",T.arg);F=k;var we=w(y,_,T);if(we.type==="normal"){if(F=T.done?E:v,we.arg===I)continue;return{value:we.arg,done:T.done}}else we.type==="throw"&&(F=E,T.method="throw",T.arg=we.arg)}}}function X(y,_){var T=_.method,F=y.iterator[T];if(F===i)return _.delegate=null,T==="throw"&&y.iterator.return&&(_.method="return",_.arg=i,X(y,_),_.method==="throw")||T!=="return"&&(_.method="throw",_.arg=new TypeError("The iterator does not provide a '"+T+"' method")),I;var A=w(F,y.iterator,_.arg);if(A.type==="throw")return _.method="throw",_.arg=A.arg,_.delegate=null,I;var Q=A.arg;if(!Q)return _.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,I;if(Q.done)_[y.resultName]=Q.value,_.next=y.nextLoc,_.method!=="return"&&(_.method="next",_.arg=i);else return Q;return _.delegate=null,I}pe(ne),f(ne,h,"Generator"),f(ne,l,function(){return this}),f(ne,"toString",function(){return"[object Generator]"});function ge(y){var _={tryLoc:y[0]};1 in y&&(_.catchLoc=y[1]),2 in y&&(_.finallyLoc=y[2],_.afterLoc=y[3]),this.tryEntries.push(_)}function L(y){var _=y.completion||{};_.type="normal",delete _.arg,y.completion=_}function K(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(ge,this),this.reset(!0)}t.keys=function(y){var _=Object(y),T=[];for(var F in _)T.push(F);return T.reverse(),function A(){for(;T.length;){var Q=T.pop();if(Q in _)return A.value=Q,A.done=!1,A}return A.done=!0,A}};function de(y){if(y){var _=y[l];if(_)return _.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var T=-1,F=function A(){for(;++T<y.length;)if(o.call(y,T))return A.value=y[T],A.done=!1,A;return A.value=i,A.done=!0,A};return F.next=F}}return{next:j}}t.values=de;function j(){return{value:i,done:!0}}return K.prototype={constructor:K,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(L),!y)for(var _ in this)_.charAt(0)==="t"&&o.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=i)},stop:function(){this.done=!0;var y=this.tryEntries[0],_=y.completion;if(_.type==="throw")throw _.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var _=this;function T(Te,we){return Q.type="throw",Q.arg=y,_.next=Te,we&&(_.method="next",_.arg=i),!!we}for(var F=this.tryEntries.length-1;F>=0;--F){var A=this.tryEntries[F],Q=A.completion;if(A.tryLoc==="root")return T("end");if(A.tryLoc<=this.prev){var _e=o.call(A,"catchLoc"),ve=o.call(A,"finallyLoc");if(_e&&ve){if(this.prev<A.catchLoc)return T(A.catchLoc,!0);if(this.prev<A.finallyLoc)return T(A.finallyLoc)}else if(_e){if(this.prev<A.catchLoc)return T(A.catchLoc,!0)}else if(ve){if(this.prev<A.finallyLoc)return T(A.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(y,_){for(var T=this.tryEntries.length-1;T>=0;--T){var F=this.tryEntries[T];if(F.tryLoc<=this.prev&&o.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var A=F;break}}A&&(y==="break"||y==="continue")&&A.tryLoc<=_&&_<=A.finallyLoc&&(A=null);var Q=A?A.completion:{};return Q.type=y,Q.arg=_,A?(this.method="next",this.next=A.finallyLoc,I):this.complete(Q)},complete:function(y,_){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&_&&(this.next=_),I},finish:function(y){for(var _=this.tryEntries.length-1;_>=0;--_){var T=this.tryEntries[_];if(T.finallyLoc===y)return this.complete(T.completion,T.afterLoc),L(T),I}},catch:function(y){for(var _=this.tryEntries.length-1;_>=0;--_){var T=this.tryEntries[_];if(T.tryLoc===y){var F=T.completion;if(F.type==="throw"){var A=F.arg;L(T)}return A}}throw new Error("illegal catch attempt")},delegateYield:function(y,_,T){return this.delegate={iterator:de(y),resultName:_,nextLoc:T},this.method==="next"&&(this.arg=i),I}},t}(s.exports);try{regeneratorRuntime=e}catch(t){typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(tp);const Es=q(),sp=C({name:"EnterpriseEdition",props:{features:{type:Array,default:()=>[]}},computed:{...b(P),canAccess(){return this.features.reduce((s,e)=>s&&!!this.settingsStore.isEnterpriseFeatureEnabled(e),!0)}}});var np=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.canAccess?e._t("default"):e._t("fallback")],2)},op=[],ap=p(sp,np,op,!1,null,null,null,null);const ip=ap.exports;function Vs(){async function s(n,o,a){const i={...a||(typeof o=="object"?o:{}),cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm"};return typeof o=="string"?se.MessageBox.alert(n,o,i):se.MessageBox.alert(n,i)}async function e(n,o,a){const i={...a||(typeof o=="object"?o:{}),cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm",distinguishCancelAndClose:!0,showClose:(a==null?void 0:a.showClose)||!1,closeOnClickModal:!1};return typeof o=="string"?se.MessageBox.confirm(n,o,i):se.MessageBox.confirm(n,i)}async function t(n,o,a){const i={...a||(typeof o=="object"?o:{}),cancelButtonClass:"btn--cancel",confirmButtonClass:"btn--confirm"};return typeof o=="string"?se.MessageBox.prompt(n,o,i):se.MessageBox.prompt(n,i)}return{alert:s,confirm:e,prompt:t,message:se.Message}}S.use(od.Plugin);S.use(hi);S.use(ad);S.use(id);S.component("enterprise-edition",ip);S.use(se.Loading.directive);S.prototype.$loading=se.Loading.service;S.prototype.$msgbox=se.MessageBox;const Qt=Vs();S.prototype.$alert=Qt.alert;S.prototype.$confirm=Qt.confirm;S.prototype.$prompt=Qt.prompt;S.prototype.$message=Qt.message;S.prototype.$notify=se.Notification;const rp=C({name:"About",components:{Modal:ie},data(){return{ABOUT_MODAL_KEY:zt,modalBus:q()}},computed:{...b(Z,P)},methods:{closeDialog(){this.modalBus.emit("close")}}}),lp="_container_1f34v_1",cp={container:lp};var dp=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"540px",title:e.$locale.baseText("about.aboutN8n"),eventBus:e.modalBus,name:e.ABOUT_MODAL_KEY,center:!0},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.container},[t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.n8nVersion")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-text",[e._v(e._s(e.rootStore.versionCli))])],1)],1),t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.sourceCode")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-link",{attrs:{to:"https://github.com/n8n-io/n8n"}},[e._v("https://github.com/n8n-io/n8n")])],1)],1),t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.license")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-link",{attrs:{to:"https://github.com/n8n-io/n8n/blob/master/packages/cli/LICENSE.md"}},[e._v(" "+e._s(e.$locale.baseText("about.n8nLicense"))+" ")])],1)],1),t("el-row",[t("el-col",{staticClass:"info-name",attrs:{span:8}},[t("n8n-text",[e._v(e._s(e.$locale.baseText("about.instanceID")))])],1),t("el-col",{attrs:{span:16}},[t("n8n-text",[e._v(e._s(e.rootStore.instanceId))])],1)],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"action-buttons"},[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("about.close")},on:{click:e.closeDialog}})],1)]},proxy:!0}])})},up=[];const Xn={$style:cp};function hp(s){for(var e in Xn)this[e]=Xn[e]}var pp=p(rp,dp,up,!1,hp,null,null,null);const fp=pp.exports,mp=C({name:"AskAI",components:{Modal:ie},data(){return{ASK_AI_WAITLIST_URL:pd,ASK_AI_MODAL_KEY:gi,modalBus:q()}},methods:{onAskAiWaitlistClick(){this.$telemetry.track("User clicked join waitlist",{source:"ask-ai-code"}),this.modalBus.emit("close")}}}),gp={};var _p=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"460px",center:!0,eventBus:e.modalBus,name:e.ASK_AI_MODAL_KEY,title:e.$locale.baseText("askAi.dialog.title")},scopedSlots:e._u([{key:"content",fn:function(){return[t("n8n-text",{domProps:{innerHTML:e._s(e.$locale.baseText("askAi.dialog.body"))}})]},proxy:!0},{key:"footer",fn:function(){return[t("n8n-link",{attrs:{to:e.ASK_AI_WAITLIST_URL}},[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("askAi.dialog.signup")},on:{click:e.onAskAiWaitlistClick}})],1)]},proxy:!0}])})},vp=[];const Jn={$style:gp};function wp(s){for(var e in Jn)this[e]=Jn[e]}var yp=p(mp,_p,vp,!1,wp,null,null,null);const bp=yp.exports,xp="_descriptionContainer_4qfwm_1",Tp="_descriptionIcon_4qfwm_6",kp="_descriptionText_4qfwm_11",Sp={descriptionContainer:xp,descriptionIcon:Tp,descriptionText:kp},$p=x(D).extend({name:"CommunityPackageManageConfirmModal",components:{Modal:ie},props:{modalName:{type:String,required:!0},activePackageName:{type:String,required:!0},mode:{type:String}},data(){return{loading:!1,modalBus:q(),COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY:_i,COMMUNITY_PACKAGE_MANAGE_ACTIONS:We}},computed:{...b(Cs),activePackage(){return this.communityNodesStore.getInstalledPackageByName(this.activePackageName)},getModalContent(){return this.mode===We.UNINSTALL?{title:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.title"),message:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.message",{interpolate:{packageName:this.activePackageName}}),buttonLabel:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.buttonLabel"),buttonLoadingLabel:this.$locale.baseText("settings.communityNodes.confirmModal.uninstall.buttonLoadingLabel")}:{title:this.$locale.baseText("settings.communityNodes.confirmModal.update.title",{interpolate:{packageName:this.activePackageName}}),description:this.$locale.baseText("settings.communityNodes.confirmModal.update.description"),message:this.$locale.baseText("settings.communityNodes.confirmModal.update.message",{interpolate:{packageName:this.activePackageName,version:this.activePackage.updateAvailable}}),buttonLabel:this.$locale.baseText("settings.communityNodes.confirmModal.update.buttonLabel"),buttonLoadingLabel:this.$locale.baseText("settings.communityNodes.confirmModal.update.buttonLoadingLabel")}}},methods:{onModalClose(){return!this.loading},async onConfirmButtonClick(){this.mode===We.UNINSTALL?await this.onUninstall():this.mode===We.UPDATE&&await this.onUpdate()},async onUninstall(){try{this.$telemetry.track("user started cnr package deletion",{package_name:this.activePackage.packageName,package_node_names:this.activePackage.installedNodes.map(s=>s.name),package_version:this.activePackage.installedVersion,package_author:this.activePackage.authorName,package_author_email:this.activePackage.authorEmail}),this.loading=!0,await this.communityNodesStore.uninstallPackage(this.activePackageName),this.$showMessage({title:this.$locale.baseText("settings.communityNodes.messages.uninstall.success.title"),type:"success"})}catch(s){this.$showError(s,this.$locale.baseText("settings.communityNodes.messages.uninstall.error"))}finally{this.loading=!1,this.modalBus.emit("close")}},async onUpdate(){try{this.$telemetry.track("user started cnr package update",{package_name:this.activePackage.packageName,package_node_names:this.activePackage.installedNodes.map(e=>e.name),package_version_current:this.activePackage.installedVersion,package_version_new:this.activePackage.updateAvailable,package_author:this.activePackage.authorName,package_author_email:this.activePackage.authorEmail}),this.loading=!0;const s=this.activePackage.updateAvailable;await this.communityNodesStore.updatePackage(this.activePackageName),this.$showMessage({title:this.$locale.baseText("settings.communityNodes.messages.update.success.title"),message:this.$locale.baseText("settings.communityNodes.messages.update.success.message",{interpolate:{packageName:this.activePackageName,version:s}}),type:"success"})}catch(s){this.$showError(s,this.$locale.baseText("settings.communityNodes.messages.update.error.title"))}finally{this.loading=!1,this.modalBus.emit("close")}}}});var Ep=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"540px",name:e.COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY,title:e.getModalContent.title,eventBus:e.modalBus,center:!0,showClose:!e.loading,beforeClose:e.onModalClose},scopedSlots:e._u([{key:"content",fn:function(){return[t("n8n-text",[e._v(e._s(e.getModalContent.message))]),e.mode===e.COMMUNITY_PACKAGE_MANAGE_ACTIONS.UPDATE?t("div",{class:e.$style.descriptionContainer},[t("n8n-info-tip",{attrs:{theme:"info",type:"note",bold:!1}},[[t("span",{domProps:{textContent:e._s(e.getModalContent.description)}})]],2)],1):e._e()]},proxy:!0},{key:"footer",fn:function(){return[t("n8n-button",{attrs:{loading:e.loading,disabled:e.loading,label:e.loading?e.getModalContent.buttonLoadingLabel:e.getModalContent.buttonLabel,size:"large",float:"right"},on:{click:e.onConfirmButtonClick}})]},proxy:!0}])})},Cp=[];const Qn={$style:Sp};function Np(s){for(var e in Qn)this[e]=Qn[e]}var Ip=p($p,Ep,Cp,!1,Np,null,null,null);const Dp=Ip.exports,Ap=x(D).extend({name:"CommunityPackageInstallModal",components:{Modal:ie},data(){return{loading:!1,packageName:"",userAgreed:!1,modalBus:q(),checkboxWarning:!1,infoTextErrorMessage:"",COMMUNITY_PACKAGE_INSTALL_MODAL_KEY:Ns,NPM_KEYWORD_SEARCH_URL:nn,COMMUNITY_NODES_INSTALLATION_DOCS_URL:nt,COMMUNITY_NODES_RISKS_DOCS_URL:fd}},computed:{...b(Cs)},methods:{openNPMPage(){this.$telemetry.track("user clicked cnr browse button",{source:"cnr install modal"}),window.open(nn,"_blank")},async onInstallClick(){if(!this.userAgreed)this.checkboxWarning=!0;else try{this.$telemetry.track("user started cnr package install",{input_string:this.packageName,source:"cnr settings page"}),this.infoTextErrorMessage="",this.loading=!0,await this.communityNodesStore.installPackage(this.packageName),await this.communityNodesStore.fetchInstalledPackages(),this.loading=!1,this.modalBus.emit("close"),this.$showMessage({title:this.$locale.baseText("settings.communityNodes.messages.install.success"),type:"success"})}catch(s){s.httpStatusCode&&s.httpStatusCode===400?this.infoTextErrorMessage=s.message:this.$showError(s,this.$locale.baseText("settings.communityNodes.messages.install.error"))}finally{this.loading=!1}},onCheckboxChecked(){this.checkboxWarning=!1},onModalClose(){return!this.loading},onInputBlur(){this.packageName=this.packageName.replaceAll("npm i ","").replaceAll("npm install ","")},onMoreInfoTopClick(){this.$telemetry.track("user clicked cnr docs link",{source:"install package modal top"})},onLearnMoreLinkClick(){this.$telemetry.track("user clicked cnr docs link",{source:"install package modal bottom"})}}}),Pp="_descriptionContainer_cmsy3_1",Op="_formContainer_cmsy3_16",Mp="_checkbox_cmsy3_22",Rp="_error_cmsy3_26",Lp={descriptionContainer:Pp,formContainer:Op,checkbox:Mp,error:Rp};var Wp=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"540px",name:e.COMMUNITY_PACKAGE_INSTALL_MODAL_KEY,title:e.$locale.baseText("settings.communityNodes.installModal.title"),eventBus:e.modalBus,center:!0,beforeClose:e.onModalClose,showClose:!e.loading},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:[e.$style.descriptionContainer,"p-s"]},[t("div",[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.installModal.description"))+" ")]),t("n8n-link",{attrs:{to:e.COMMUNITY_NODES_INSTALLATION_DOCS_URL},on:{click:e.onMoreInfoTopClick}},[e._v(" "+e._s(e.$locale.baseText("_reusableDynamicText.moreInfo"))+" ")])],1),t("n8n-button",{class:e.$style.browseButton,attrs:{label:e.$locale.baseText("settings.communityNodes.browseButton.label"),icon:"external-link-alt"},on:{click:e.openNPMPage}})],1),t("div",{class:[e.$style.formContainer,"mt-m"]},[t("n8n-input-label",{class:e.$style.labelTooltip,attrs:{label:e.$locale.baseText("settings.communityNodes.installModal.packageName.label"),tooltipText:e.$locale.baseText("settings.communityNodes.installModal.packageName.tooltip",{interpolate:{npmURL:e.NPM_KEYWORD_SEARCH_URL}})}},[t("n8n-input",{attrs:{name:"packageNameInput",type:"text",maxlength:214,placeholder:e.$locale.baseText("settings.communityNodes.installModal.packageName.placeholder"),required:!0,disabled:e.loading},on:{blur:e.onInputBlur},model:{value:e.packageName,callback:function(n){e.packageName=n},expression:"packageName"}})],1),t("div",{class:[e.$style.infoText,"mt-4xs"]},[t("span",{class:[e.$style.infoText,e.infoTextErrorMessage?e.$style.error:""],attrs:{size:"small"},domProps:{textContent:e._s(e.infoTextErrorMessage)}})]),t("el-checkbox",{class:[e.$style.checkbox,e.checkboxWarning?e.$style.error:"","mt-l"],attrs:{disabled:e.loading},on:{change:e.onCheckboxChecked},model:{value:e.userAgreed,callback:function(n){e.userAgreed=n},expression:"userAgreed"}},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.installModal.checkbox.label"))+" ")]),t("br"),t("n8n-link",{attrs:{to:e.COMMUNITY_NODES_RISKS_DOCS_URL},on:{click:e.onLearnMoreLinkClick}},[e._v(e._s(e.$locale.baseText("_reusableDynamicText.moreInfo")))])],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("n8n-button",{attrs:{loading:e.loading,disabled:e.packageName===""||e.loading,label:e.loading?e.$locale.baseText("settings.communityNodes.installModal.installButton.label.loading"):e.$locale.baseText("settings.communityNodes.installModal.installButton.label"),size:"large",float:"right"},on:{click:e.onInstallClick}})]},proxy:!0}])})},Bp=[];const Zn={$style:Lp};function Up(s){for(var e in Zn)this[e]=Zn[e]}var Fp=p(Ap,Wp,Bp,!1,Up,null,null,null);const Vp=Fp.exports,zp=x(D).extend({components:{Modal:ie},name:"ChangePasswordModal",props:{modalName:{type:String}},data(){return{config:null,formBus:q(),modalBus:q(),password:"",loading:!1,CHANGE_PASSWORD_MODAL_KEY:Is}},computed:{...b(z)},mounted(){this.config=[{name:"currentPassword",properties:{label:this.$locale.baseText("auth.changePassword.currentPassword"),type:"password",required:!0,autocomplete:"current-password",capitalize:!0,focusInitially:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.newPassword"),type:"password",required:!0,validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"password2",properties:{label:this.$locale.baseText("auth.changePassword.reenterNewPassword"),type:"password",required:!0,validators:{TWO_PASSWORDS_MATCH:{validate:this.passwordsMatch}},validationRules:[{name:"TWO_PASSWORDS_MATCH"}],autocomplete:"new-password",capitalize:!0}}]},methods:{passwordsMatch(s){return typeof s!="string"?!1:s!==this.password?{messageKey:"auth.changePassword.passwordsMustMatchError"}:!1},onInput(s){s.name==="password"&&(this.password=s.value)},async onSubmit(s){try{this.loading=!0,await this.usersStore.updateCurrentUserPassword(s),this.$showMessage({type:"success",title:this.$locale.baseText("auth.changePassword.passwordUpdated"),message:this.$locale.baseText("auth.changePassword.passwordUpdatedMessage")}),this.modalBus.emit("close")}catch(e){this.$showError(e,this.$locale.baseText("auth.changePassword.error"))}this.loading=!1},onSubmitClick(){this.formBus.emit("submit")}}});var jp=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.CHANGE_PASSWORD_MODAL_KEY,title:e.$locale.baseText("auth.changePassword"),center:!0,width:"460px",eventBus:e.modalBus},on:{enter:e.onSubmit},scopedSlots:e._u([{key:"content",fn:function(){return[t("n8n-form-inputs",{attrs:{inputs:e.config,eventBus:e.formBus,columnView:!0},on:{input:e.onInput,submit:e.onSubmit}})]},proxy:!0},{key:"footer",fn:function(){return[t("n8n-button",{attrs:{loading:e.loading,label:e.$locale.baseText("auth.changePassword"),float:"right","data-test-id":"change-password-button"},on:{click:e.onSubmitClick}})]},proxy:!0}])})},Kp=[],Hp=p(zp,jp,Kp,!1,null,null,null,null);const Gp=Hp.exports,qp=x(re).extend({components:{Modal:ie},name:"ContactPromptModal",props:["modalName"],data(){return{email:"",modalBus:q()}},computed:{...b(Z,P),title(){return this.settingsStore.promptsData&&this.settingsStore.promptsData.title?this.settingsStore.promptsData.title:"Youâ€™re a power user ðŸ’ª"},description(){return this.settingsStore.promptsData&&this.settingsStore.promptsData.message?this.settingsStore.promptsData.message:"Your experience with n8n can help us improve â€” for you and our entire community."},isEmailValid(){return jt.test(String(this.email).toLowerCase())}},methods:{closeDialog(){this.isEmailValid||this.$telemetry.track("User closed email modal",{instance_id:this.rootStore.instanceId,email:null})},async send(){this.isEmailValid&&((await this.settingsStore.submitContactInfo(this.email)).updated&&(this.$telemetry.track("User closed email modal",{instance_id:this.rootStore.instanceId,email:this.email}),this.$showMessage({title:"Thanks!",message:"It's people like you that help make n8n better",type:"success"})),this.modalBus.emit("close"))}}}),Yp="_description_1bs00_1",Xp="_disclaimer_1bs00_5",Jp={description:Yp,disclaimer:Xp};var Qp=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,eventBus:e.modalBus,center:!0,closeOnPressEscape:!1,beforeClose:e.closeDialog,customClass:"contact-prompt-modal",width:"460px"},scopedSlots:e._u([{key:"header",fn:function(){return[t("n8n-heading",{attrs:{tag:"h2",size:"xlarge",color:"text-dark"}},[e._v(e._s(e.title))])]},proxy:!0},{key:"content",fn:function(){return[t("div",{class:e.$style.description},[t("n8n-text",{attrs:{size:"medium",color:"text-base"}},[e._v(e._s(e.description))])],1),t("div",{on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.send.apply(null,arguments)}}},[t("n8n-input",{attrs:{placeholder:"Your email address"},model:{value:e.email,callback:function(n){e.email=n},expression:"email"}})],1),t("div",{class:e.$style.disclaimer},[t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v("David from our product team will get in touch personally")])],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:e.$style.footer},[t("n8n-button",{attrs:{label:"Send",float:"right",disabled:!e.isEmailValid},on:{click:e.send}})],1)]},proxy:!0}])})},Zp=[];const eo={$style:Jp};function ef(s){for(var e in eo)this[e]=eo[e]}var tf=p(qp,Qp,Zp,!1,ef,null,null,null);const sf=tf.exports,nf=C({props:{credentialTypeName:{type:String}},computed:{...b(be,le,Z),credentialWithIcon(){return this.credentialTypeName?this.getCredentialWithIcon(this.credentialTypeName):null},filePath(){var e;const s=(e=this.credentialWithIcon)==null?void 0:e.iconUrl;return s?this.rootStore.getBaseUrl+s:null},relevantNode(){var e,t;if((t=(e=this.credentialWithIcon)==null?void 0:e.icon)!=null&&t.startsWith("node:")){const n=this.credentialWithIcon.icon.replace("node:","");return this.nodeTypesStore.getNodeType(n)}const s=this.credentialsStore.getNodesWithAccess(this.credentialTypeName);return s.length?s[0]:null}},methods:{getCredentialWithIcon(s){if(!s)return null;const e=this.credentialsStore.getCredentialTypeByName(s);if(!e)return null;if(e.icon||e.iconUrl)return e;if(e.extends){let t=null;return e.extends.forEach(n=>{t=this.getCredentialWithIcon(n)}),t}return null}}}),of="_credIcon_segkd_1",af="_fallback_segkd_5",rf={credIcon:of,fallback:af};var lf=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.filePath?t("img",{class:e.$style.credIcon,attrs:{src:e.filePath}}):e.relevantNode?t("NodeIcon",{attrs:{nodeType:e.relevantNode,size:28}}):t("span",{class:e.$style.fallback})],1)},cf=[];const to={$style:rf};function df(s){for(var e in to)this[e]=to[e]}var uf=p(nf,lf,cf,!1,df,null,null,null);const qi=uf.exports,hf=C({name:"Banner",data(){return{expanded:!1}},props:{theme:{type:String,validator:s=>["success","danger"].indexOf(s)!==-1},message:{type:String},buttonLabel:{type:String},buttonLoadingLabel:{type:String},buttonTitle:{type:String},details:{type:String},buttonLoading:{type:Boolean,default:!1}},methods:{expand(){this.expanded=!0},onClick(){this.expanded=!1,this.$emit("click")}}}),pf="_icon_1nmec_1",ff="_dangerIcon_1nmec_9 _icon_1nmec_1",mf="_container_1nmec_14",gf="_message_1nmec_21",_f="_dangerMessage_1nmec_28 _message_1nmec_21",vf="_banner_1nmec_33",wf="_content_1nmec_38",yf="_details_1nmec_45 _message_1nmec_21",bf="_moreDetails_1nmec_52",xf={icon:pf,dangerIcon:ff,container:mf,message:gf,dangerMessage:_f,banner:vf,content:wf,details:yf,moreDetails:bf};var Tf=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-tag",{class:e.$style.container,attrs:{type:e.theme,size:"medium","disable-transitions":!0}},[t("font-awesome-icon",{class:e.theme==="success"?e.$style.icon:e.$style.dangerIcon,attrs:{icon:e.theme==="success"?"check-circle":"exclamation-triangle"}}),t("div",{class:e.$style.banner},[t("div",{class:e.$style.content},[t("div",[t("span",{class:e.theme==="success"?e.$style.message:e.$style.dangerMessage},[e._v(" "+e._s(e.message)+"Â  ")]),e.details&&!e.expanded?t("n8n-link",{attrs:{bold:!0,size:"small"},on:{click:e.expand}},[t("span",{class:e.$style.moreDetails},[e._v("More details")])]):e._e()],1)]),e.$slots.button?e._t("button"):e.buttonLabel?t("n8n-button",{attrs:{label:e.buttonLoading&&e.buttonLoadingLabel?e.buttonLoadingLabel:e.buttonLabel,title:e.buttonTitle,type:e.theme,loading:e.buttonLoading,size:"small",outline:""},on:{click:function(n){return n.stopPropagation(),e.onClick.apply(null,arguments)}}}):e._e()],2),e.expanded?t("div",{class:e.$style.details},[e._v(" "+e._s(e.details)+" ")]):e._e()],1)},kf=[];const so={$style:xf};function Sf(s){for(var e in so)this[e]=so[e]}var $f=p(hf,Tf,kf,!1,Sf,null,null,null);const Ef=$f.exports,Je=C({data(){return{copyPasteElementsGotCreated:!1,hiddenInput:null,onPaste:null,onBeforePaste:null}},mounted(){if(this.copyPasteElementsGotCreated===!0)return;this.copyPasteElementsGotCreated=!0;const s=document.createElement("style");s.type="text/css",s.innerHTML=`
			.hidden-copy-paste {
			position: absolute;
			bottom: 0;
			left: 0;
			width: 10px;
			height: 10px;
			display: block;
			font-size: 1px;
			z-index: -1;
			color: transparent;
			background: transparent;
			overflow: hidden;
			border: none;
			padding: 0;
			resize: none;
			outline: none;
			-webkit-user-select: text;
			user-select: text;
		}
		`,document.getElementsByTagName("head")[0].appendChild(s);const e=navigator.appVersion.search("Safari")!==-1&&navigator.appVersion.search("Chrome")===-1&&navigator.appVersion.search("CrMo")===-1&&navigator.appVersion.search("CriOS")===-1,t=navigator.userAgent.toLowerCase().indexOf("msie")!==-1||navigator.userAgent.toLowerCase().indexOf("trident")!==-1,n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("id","hidden-input-copy-paste"),n.setAttribute("class","hidden-copy-paste"),n.setAttribute("data-test-id","hidden-copy-paste"),this.hiddenInput=n,document.body.append(n);let o=null;t&&(o=document.createElement("div"),o.setAttribute("id","hidden-ie-clipboard-copy-paste"),o.setAttribute("class","hidden-copy-paste"),o.setAttribute("contenteditable","true"),document.body.append(o),this.onBeforePaste=()=>{n.is(":focus")&&this.focusIeClipboardDiv(o)},document.addEventListener("beforepaste",this.onBeforePaste,!0)),n.addEventListener("input",a=>{n.value,e?(n.focus(),setTimeout(()=>{this.focusHiddenArea(n)},0)):this.focusHiddenArea(n)}),this.onPaste=Ki(a=>{const i="paste",r=a.path||a.composedPath&&a.composedPath();for(let l=0;l<r.length;l++)if(r[l].className&&typeof r[l].className=="string"&&(r[l].className.includes("el-message-box")||r[l].className.includes("ignore-key-press")))return;o!==null?this.ieClipboardEvent(i,o):(this.standardClipboardEvent(i,a),(!document.activeElement||document.activeElement&&["textarea","text","email","password"].indexOf(document.activeElement.type)===-1)&&(this.focusHiddenArea(n),a.preventDefault()))},1e3,{leading:!0}),document.addEventListener("paste",this.onPaste)},methods:{receivedCopyPasteData(s,e){},standardClipboardEvent(s,e){const t=e.clipboardData;if(t!==null&&s==="paste"){const n=t.getData("text/plain");this.receivedCopyPasteData(n,e)}},ieClipboardEvent(s,e){const t=window.clipboardData;if(s==="paste"){const n=t.getData("Text");e.empty(),this.receivedCopyPasteData(n)}},focusIeClipboardDiv(s){s.focus();const e=document.createRange();e.selectNodeContents(s.get(0));const t=window.getSelection();t!==null&&(t.removeAllRanges(),t.addRange(e))},focusHiddenArea(s){s.value=" ",s.focus(),s.select()},copyToClipboard(s){const e=document.createElement("textarea");e.value=s,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection();if(t===null)return;const n=t.rangeCount>0?t.getRangeAt(0):!1;e.select(),document.execCommand("copy"),document.body.removeChild(e),n&&(t.removeAllRanges(),t.addRange(n))}},beforeDestroy(){this.hiddenInput&&this.hiddenInput.remove(),this.onPaste&&document.removeEventListener("paste",this.onPaste),this.onBeforePaste&&document.removeEventListener("beforepaste",this.onBeforePaste)}}),Cf=x(Je,D).extend({props:{label:{type:String},hint:{type:String},value:{type:String},copyButtonText:{type:String,default(){return this.$locale.baseText("generic.copy")}},toastTitle:{type:String,default(){return this.$locale.baseText("generic.copiedToClipboard")}},toastMessage:{type:String},collapse:{type:Boolean,default:!1},size:{type:String,default:"large"}},methods:{copy(){this.$emit("copy"),this.copyToClipboard(this.value),this.$showMessage({title:this.toastTitle,message:this.toastMessage,type:"success"})}}}),Nf="_copyText_1krlo_1",If="_large_1krlo_20",Df="_medium_1krlo_25",Af="_collapsed_1krlo_30",Pf="_copyButton_1krlo_35",Of="_hint_1krlo_50",Mf={copyText:Nf,large:If,medium:Df,collapsed:Af,copyButton:Pf,hint:Of};var Rf=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("n8n-input-label",{attrs:{label:e.label}},[t("div",{class:{[e.$style.copyText]:!0,[e.$style[e.size]]:!0,[e.$style.collapsed]:e.collapse},attrs:{"data-test-id":"copy-input"},on:{click:e.copy}},[t("span",{ref:"copyInputValue"},[e._v(e._s(e.value))]),t("div",{class:e.$style.copyButton},[t("span",[e._v(e._s(e.copyButtonText))])])])]),e.hint?t("div",{class:e.$style.hint},[e._v(e._s(e.hint))]):e._e()],1)},Lf=[];const no={$style:Mf};function Wf(s){for(var e in no)this[e]=no[e]}var Bf=p(Cf,Rf,Lf,!1,Wf,null,null,null);const Zt=Bf.exports,Uf=C({name:"parameter-input-expanded",components:{ParameterOptions:md,ParameterInputWrapper:gd},props:{parameter:{type:Object},value:{},showValidationWarnings:{type:Boolean},documentationUrl:{type:String},eventSource:{type:String},label:{type:Object,default:()=>({size:"small"})}},data(){return{focused:!1,blurredEver:!1,menuExpanded:!1}},computed:{...b(B),showRequiredErrors(){if(!this.parameter.required)return!1;if(this.blurredEver||this.showValidationWarnings){if(this.parameter.type==="string")return!this.value;if(this.parameter.type==="number")return typeof this.value!="number"}return!1},hint(){return this.isValueExpression?null:this.$locale.credText().hint(this.parameter)},isValueExpression(){return _d(this.parameter,this.value)}},methods:{onFocus(){this.focused=!0},onBlur(){this.blurredEver=!0,this.focused=!1},onMenuExpanded(s){this.menuExpanded=s},optionSelected(s){this.$refs.param&&this.$refs.param.$emit("optionSelected",s)},valueChanged(s){this.$emit("change",s)},onDocumentationUrlClick(){this.$telemetry.track("User clicked credential modal docs link",{docs_link:this.documentationUrl,source:"field",workflow_id:this.workflowsStore.workflowId})}}}),Ff="_errors_iszl5_1",Vf="_hint_iszl5_5",zf={errors:Ff,hint:Vf};var jf=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-input-label",{attrs:{label:e.$locale.credText().inputLabelDisplayName(e.parameter),tooltipText:e.$locale.credText().inputLabelDescription(e.parameter),required:e.parameter.required,showTooltip:e.focused,showOptions:e.menuExpanded,"data-test-id":e.parameter.name,size:e.label.size},scopedSlots:e._u([{key:"options",fn:function(){return[t("parameter-options",{attrs:{parameter:e.parameter,value:e.value,isReadOnly:!1,showOptions:!0,isValueExpression:e.isValueExpression},on:{optionSelected:e.optionSelected,"menu-expanded":e.onMenuExpanded}})]},proxy:!0}])},[[t("parameter-input-wrapper",{ref:"param",attrs:{inputSize:"large",parameter:e.parameter,value:e.value,path:e.parameter.name,hideIssues:!0,documentationUrl:e.documentationUrl,errorHighlight:e.showRequiredErrors,isForCredential:!0,eventSource:e.eventSource,hint:e.showRequiredErrors?"":e.hint},on:{focus:e.onFocus,blur:e.onBlur,textInput:e.valueChanged,valueChanged:e.valueChanged}}),e.showRequiredErrors?t("div",{class:e.$style.errors},[t("n8n-text",{attrs:{color:"danger",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("parameterInputExpanded.thisFieldIsRequired"))+" "),e.documentationUrl?t("n8n-link",{attrs:{to:e.documentationUrl,size:"small",underline:!0},on:{click:e.onDocumentationUrlClick}},[e._v(" "+e._s(e.$locale.baseText("parameterInputExpanded.openDocs"))+" ")]):e._e()],1)],1):e._e()]],2)},Kf=[];const oo={$style:zf};function Hf(s){for(var e in oo)this[e]=oo[e]}var Gf=p(Uf,jf,Kf,!1,Hf,null,null,null);const qf=Gf.exports,Yf=C({name:"CredentialsInput",props:["credentialProperties","credentialData","documentationUrl","showValidationWarnings"],components:{ParameterInputExpanded:qf},data(){return{label:{size:"medium"}}},methods:{valueChanged(s){const e=s.name.split(".").pop();this.$emit("change",{name:e,value:s.value})}}}),Xf="_container_3qo2j_1",Jf={container:Xf};var Qf=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.credentialProperties.length?t("div",{class:e.$style.container,on:{keydown:function(n){n.stopPropagation()}}},e._l(e.credentialProperties,function(n){return t("form",{key:n.name,attrs:{autocomplete:"off","data-test-id":"credential-connection-parameter"},on:{submit:function(o){o.preventDefault()}}},[n.type==="notice"?t("n8n-notice",{attrs:{content:n.displayName}}):t("parameter-input-expanded",{attrs:{parameter:n,value:e.credentialData[n.name],documentationUrl:e.documentationUrl,showValidationWarnings:e.showValidationWarnings,label:e.label,eventSource:"credentials"},on:{change:e.valueChanged}})],1)}),0):e._e()},Zf=[];const ao={$style:Jf};function em(s){for(var e in ao)this[e]=ao[e]}var tm=p(Yf,Qf,Zf,!1,em,null,null,null);const sm=tm.exports,nm=C({__name:"GoogleAuthButton",setup(s){const{baseUrl:e}=Z(),t={"--google-auth-btn-normal":`url(${e}google-auth/normal.png`,"--google-auth-btn-focus":`url(${e}google-auth/focus.png`,"--google-auth-btn-pressed":`url(${e}google-auth/pressed.png`,"--google-auth-btn-disabled":`url(${e}google-auth/disabled.png`};return{__sfc:!0,baseUrl:e,googleAuthButtons:t}}}),om="_googleAuthBtn_188kc_1",am={googleAuthBtn:om};var im=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("button",{class:e.$style.googleAuthBtn,style:n.googleAuthButtons,attrs:{title:e.$locale.baseText("credentialEdit.oAuthButton.signInWithGoogle")},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),e.$emit("click")}}})},rm=[];const io={$style:am};function lm(s){for(var e in io)this[e]=io[e]}var cm=p(nm,im,rm,!1,lm,null,null,null);const Yi=cm.exports,dm=C({__name:"OauthButton",props:{isGoogleOAuthType:{type:Boolean}},setup(s){return{__sfc:!0,GoogleAuthButton:Yi}}}),um="_container_1xgac_1",hm={container:um};var pm=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{class:e.$style.container},[e.isGoogleOAuthType?t(n.GoogleAuthButton,{on:{click:function(o){return e.$emit("click")}}}):t("n8n-button",{attrs:{label:e.$locale.baseText("credentialEdit.oAuthButton.connectMyAccount"),size:"large"},on:{click:function(o){return o.stopPropagation(),e.$emit("click")}}})],1)},fm=[];const ro={$style:hm};function mm(s){for(var e in ro)this[e]=ro[e]}var gm=p(dm,pm,fm,!1,mm,null,null,null);const _m=gm.exports,vm=C({__name:"AuthTypeSelector",props:{credentialType:null},emits:["authTypeChanged"],setup(s,{expose:e,emit:t}){const n=s,o=le(),a=ce(),i=H(""),r=H({});qe(()=>{var v;if((v=l.value)!=null&&v.credentials){const k=l.value.credentials.find(I=>I.name===n.credentialType.name)||null,E=vd(l.value,k);i.value=(E==null?void 0:E.value)||""}f.value.forEach(k=>{S.set(r.value,k.name,k.default)})});const l=Y(()=>{const v=a.activeNode;return v?o.getNodeType(v.type,v.typeVersion):null}),c=Y(()=>{var v;return vi(l.value,(v=a.activeNode)==null?void 0:v.typeVersion)}),h=Y(()=>c.value.filter(v=>u(v))),f=Y(()=>{var k;const v=wd(l.value);return((k=l.value)==null?void 0:k.properties.filter(E=>yd(v,E)))||[]});function u(v){if(f.value.length===0)return!0;let k=!1;return Object.keys(r.value).forEach(E=>{var I;if(v.displayOptions&&v.displayOptions.show&&(I=v.displayOptions.show[E])!=null&&I.includes(r.value[E])){k=!0;return}}),k}function w(v){t("authTypeChanged",v)}function g(v){S.set(r.value,v.name,v.value)}return e({onAuthTypeChange:w}),{__sfc:!0,emit:t,nodeTypesStore:o,ndvStore:a,props:n,selected:i,authRelatedFieldsValues:r,activeNodeType:l,authOptions:c,filteredNodeAuthOptions:h,authRelatedFields:f,shouldShowAuthOption:u,onAuthTypeChange:w,valueChanged:g,ParameterInputFull:wi}}}),wm="_authRadioButton_66vfv_1",ym={authRadioButton:wm};var bm=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.filteredNodeAuthOptions.length>0?t("div",{attrs:{"data-test-id":"node-auth-type-selector"}},[e._l(n.authRelatedFields,function(o){return t("div",{key:o.name,staticClass:"mb-l"},[t(n.ParameterInputFull,{attrs:{parameter:o,value:n.authRelatedFieldsValues[o.name]||o.default,path:o.name,displayOptions:!1},on:{valueChanged:n.valueChanged}})],1)}),t("div",[t("n8n-input-label",{attrs:{label:e.$locale.baseText("credentialEdit.credentialConfig.authTypeSelectorLabel"),tooltipText:e.$locale.baseText("credentialEdit.credentialConfig.authTypeSelectorTooltip"),required:!0}})],1),e._l(n.filteredNodeAuthOptions,function(o){return t("el-radio",{key:o.value,class:e.$style.authRadioButton,attrs:{label:o.value,border:""},on:{change:n.onAuthTypeChange},model:{value:n.selected,callback:function(a){n.selected=a},expression:"selected"}},[e._v(e._s(o.name))])})],2):e._e()},xm=[];const lo={$style:ym};function Tm(s){for(var e in lo)this[e]=lo[e]}var km=p(vm,bm,xm,!1,Tm,null,null,null);const Sm=km.exports,$m=S.extend({name:"CredentialConfig",components:{AuthTypeSelector:Sm,Banner:Ef,CopyInput:Zt,CredentialInputs:sm,OauthButton:_m,GoogleAuthButton:Yi},props:{credentialType:{type:Object},credentialProperties:{type:Array},parentTypes:{type:Array},credentialData:{},credentialId:{type:String,default:""},showValidationWarning:{type:Boolean,default:!1},authError:{type:String},testedSuccessfully:{type:Boolean},isOAuthType:{type:Boolean},isOAuthConnected:{type:Boolean},isRetesting:{type:Boolean},credentialPermissions:{type:Object,default:()=>({})},requiredPropertiesFilled:{type:Boolean},mode:{type:String,required:!0},showAuthTypeSelector:{type:Boolean}},data(){return{EnterpriseEditionFeature:te}},async beforeMount(){if(this.rootStore.defaultLocale==="en")return;this.uiStore.activeCredentialType=this.credentialType.name;const s=`n8n-nodes-base.credentials.${this.credentialType.name}`;if(this.$locale.exists(s))return;const e=await this.credentialsStore.getCredentialTranslation(this.credentialType.name);bd({[this.credentialType.name]:e},this.rootStore.defaultLocale)},computed:{...b(be,ce,le,Z,N,B),activeNodeType(){const s=this.ndvStore.activeNode;return s?this.nodeTypesStore.getNodeType(s.type,s.typeVersion):null},appName(){return this.credentialType?xd(this.credentialType.displayName)||this.$locale.baseText("credentialEdit.credentialConfig.theServiceYouReConnectingTo"):""},credentialTypeName(){return this.credentialType.name},credentialOwnerName(){return this.credentialsStore.getCredentialOwnerNameById(`${this.credentialId}`)},documentationUrl(){const s=this.credentialType,e=this.ndvStore.activeNode,t=e?Ds(e.type):!1,n=s&&s.documentationUrl;if(!n)return"";let o;if(n.startsWith("https://")||n.startsWith("http://")){if(o=new URL(n),o.hostname!==ws)return n}else{if(t)return"";o=new URL(`${Td}${n}/`)}return o.hostname===ws&&(o.searchParams.set("utm_source","n8n_app"),o.searchParams.set("utm_medium","left_nav_menu"),o.searchParams.set("utm_campaign","create_new_credentials_modal")),o.href},isGoogleOAuthType(){return this.credentialTypeName==="googleOAuth2Api"||this.parentTypes.includes("googleOAuth2Api")},oAuthCallbackUrl(){const s=this.credentialTypeName==="oAuth2Api"||this.parentTypes.includes("oAuth2Api")?"oauth2":"oauth1";return this.rootStore.oauthCallbackUrls[s]},showOAuthSuccessBanner(){return this.isOAuthType&&this.requiredPropertiesFilled&&this.isOAuthConnected&&!this.authError},isMissingCredentials(){return this.credentialType===null},isNewCredential(){return this.mode==="new"&&!this.credentialId}},methods:{getCredentialOptions(s){return this.credentialsStore.allUsableCredentialsByType[s]},onDataChange(s){this.$emit("change",s)},onDocumentationUrlClick(){this.$telemetry.track("User clicked credential modal docs link",{docs_link:this.documentationUrl,credential_type:this.credentialTypeName,source:"modal",workflow_id:this.workflowsStore.workflowId})},onAuthTypeChange(s){this.$emit("authTypeChanged",s)}},watch:{showOAuthSuccessBanner(s,e){s&&!e&&this.$emit("scrollToTop")}}}),Em="_container_550c2_1",Cm="_googleReconnectLabel_550c2_8",Nm={container:Em,googleReconnectLabel:Cm};var Im=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container,attrs:{"data-test-id":"node-credentials-config-container"}},[t("banner",{directives:[{name:"show",rawName:"v-show",value:e.showValidationWarning,expression:"showValidationWarning"}],attrs:{theme:"danger",message:e.$locale.baseText(`credentialEdit.credentialConfig.pleaseCheckTheErrorsBelow${e.credentialPermissions.isOwner?"":".sharee"}`,{interpolate:{owner:e.credentialOwnerName}})}}),e.authError&&!e.showValidationWarning?t("banner",{attrs:{theme:"danger",message:e.$locale.baseText(`credentialEdit.credentialConfig.couldntConnectWithTheseSettings${e.credentialPermissions.isOwner?"":".sharee"}`,{interpolate:{owner:e.credentialOwnerName}}),details:e.authError,buttonLabel:e.$locale.baseText("credentialEdit.credentialConfig.retry"),buttonLoadingLabel:"Retrying",buttonTitle:e.$locale.baseText("credentialEdit.credentialConfig.retryCredentialTest"),buttonLoading:e.isRetesting},on:{click:function(n){return e.$emit("retest")}}}):e._e(),t("banner",{directives:[{name:"show",rawName:"v-show",value:e.showOAuthSuccessBanner&&!e.showValidationWarning,expression:"showOAuthSuccessBanner && !showValidationWarning"}],attrs:{theme:"success",message:e.$locale.baseText("credentialEdit.credentialConfig.accountConnected"),buttonLabel:e.$locale.baseText("credentialEdit.credentialConfig.reconnect"),buttonTitle:e.$locale.baseText("credentialEdit.credentialConfig.reconnectOAuth2Credential")},on:{click:function(n){return e.$emit("oauth")}},scopedSlots:e._u([e.isGoogleOAuthType?{key:"button",fn:function(){return[t("p",{class:e.$style.googleReconnectLabel,domProps:{textContent:e._s(`${e.$locale.baseText("credentialEdit.credentialConfig.reconnect")}:`)}}),t("GoogleAuthButton",{on:{click:function(n){return e.$emit("oauth")}}})]},proxy:!0}:null],null,!0)}),t("banner",{directives:[{name:"show",rawName:"v-show",value:e.testedSuccessfully&&!e.showValidationWarning,expression:"testedSuccessfully && !showValidationWarning"}],attrs:{theme:"success",message:e.$locale.baseText("credentialEdit.credentialConfig.connectionTestedSuccessfully"),buttonLabel:e.$locale.baseText("credentialEdit.credentialConfig.retry"),buttonLoadingLabel:e.$locale.baseText("credentialEdit.credentialConfig.retrying"),buttonTitle:e.$locale.baseText("credentialEdit.credentialConfig.retryCredentialTest"),buttonLoading:e.isRetesting,"data-test-id":"credentials-config-container-test-success"},on:{click:function(n){return e.$emit("retest")}}}),e.credentialPermissions.updateConnection?[e.documentationUrl&&e.credentialProperties.length?t("n8n-notice",{attrs:{theme:"warning"}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialConfig.needHelpFillingOutTheseFields"))+" "),t("span",{staticClass:"ml-4xs"},[t("n8n-link",{attrs:{to:e.documentationUrl,size:"small",bold:""},on:{click:e.onDocumentationUrlClick}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialConfig.openDocs"))+" ")])],1)]):e._e(),e.showAuthTypeSelector&&e.isNewCredential?t("AuthTypeSelector",{attrs:{credentialType:e.credentialType},on:{authTypeChanged:e.onAuthTypeChange}}):e._e(),e.isOAuthType&&e.credentialProperties.length?t("CopyInput",{attrs:{label:e.$locale.baseText("credentialEdit.credentialConfig.oAuthRedirectUrl"),value:e.oAuthCallbackUrl,copyButtonText:e.$locale.baseText("credentialEdit.credentialConfig.clickToCopy"),hint:e.$locale.baseText("credentialEdit.credentialConfig.subtitle",{interpolate:{appName:e.appName}}),toastTitle:e.$locale.baseText("credentialEdit.credentialConfig.redirectUrlCopiedToClipboard")}}):e._e()]:t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("div",{staticClass:"ph-no-capture"},[t("n8n-info-tip",{attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialEdit.info.sharee",{interpolate:{credentialOwnerName:e.credentialOwnerName}}))+" ")])],1)]),e.credentialType&&e.credentialPermissions.updateConnection?t("CredentialInputs",{attrs:{credentialData:e.credentialData,credentialProperties:e.credentialProperties,documentationUrl:e.documentationUrl,showValidationWarnings:e.showValidationWarning},on:{change:e.onDataChange}}):e._e(),e.isOAuthType&&e.requiredPropertiesFilled&&!e.isOAuthConnected&&e.credentialPermissions.isOwner?t("OauthButton",{attrs:{isGoogleOAuthType:e.isGoogleOAuthType},on:{click:function(n){return e.$emit("oauth")}}}):e._e(),e.isMissingCredentials?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialConfig.missingCredentialType"))+" ")]):e._e()],2)},Dm=[];const co={$style:Nm};function Am(s){for(var e in co)this[e]=co[e]}var Pm=p($m,Im,Dm,!1,Am,null,null,null);const Om=Pm.exports,Mm=C({name:"TimeAgo",props:{date:{type:String},capitalize:{type:Boolean,default:!1}},beforeMount(){Kh(this.defaultLocale,this.localeFunc)},methods:{localeFunc(s,e,t){return[[this.$locale.baseText("timeAgo.justNow"),this.$locale.baseText("timeAgo.rightNow")],[this.$locale.baseText("timeAgo.justNow"),this.$locale.baseText("timeAgo.rightNow")],[this.$locale.baseText("timeAgo.oneMinuteAgo"),this.$locale.baseText("timeAgo.inOneMinute")],[this.$locale.baseText("timeAgo.minutesAgo"),this.$locale.baseText("timeAgo.inMinutes")],[this.$locale.baseText("timeAgo.oneHourAgo"),this.$locale.baseText("timeAgo.inOneHour")],[this.$locale.baseText("timeAgo.hoursAgo"),this.$locale.baseText("timeAgo.inHours")],[this.$locale.baseText("timeAgo.oneDayAgo"),this.$locale.baseText("timeAgo.inOneDay")],[this.$locale.baseText("timeAgo.daysAgo"),this.$locale.baseText("timeAgo.inDays")],[this.$locale.baseText("timeAgo.oneWeekAgo"),this.$locale.baseText("timeAgo.inOneWeek")],[this.$locale.baseText("timeAgo.weeksAgo"),this.$locale.baseText("timeAgo.inWeeks")],[this.$locale.baseText("timeAgo.oneMonthAgo"),this.$locale.baseText("timeAgo.inOneMonth")],[this.$locale.baseText("timeAgo.monthsAgo"),this.$locale.baseText("timeAgo.inMonths")],[this.$locale.baseText("timeAgo.oneYearAgo"),this.$locale.baseText("timeAgo.inOneYear")],[this.$locale.baseText("timeAgo.yearsAgo"),this.$locale.baseText("timeAgo.inYears")]][e]}},computed:{...b(Z),defaultLocale(){return this.rootStore.defaultLocale},format(){const s=Hh(this.date,this.defaultLocale);return this.capitalize?s:s.toLowerCase()},convertDate(){const e=new Date(this.date).getTime();return kd(e)}}});var Rm=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{attrs:{title:e.convertDate}},[e._v(" "+e._s(e.format)+" ")])},Lm=[],Wm=p(Mm,Rm,Lm,!1,null,null,null,null);const es=Wm.exports,Bm=C({name:"CredentialInfo",props:["nodesWithAccess","nodeAccess","currentCredential","credentialPermissions"],components:{TimeAgo:es},methods:{onNodeAccessChange(s,e){this.$emit("accessChange",{name:s,value:e})},shortNodeType(s){return this.$locale.shortNodeType(s.name)}}}),Um="_container_1efpk_1",Fm="_label_1efpk_5",Vm="_accessLabel_1efpk_10 _label_1efpk_5",zm="_valueLabel_1efpk_15",jm={container:Um,label:Fm,accessLabel:Vm,valueLabel:zm};var Km=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("el-row",[t("el-col",{class:e.$style.accessLabel,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.allowUseBy"))+" ")])],1),t("el-col",{attrs:{span:16}},e._l(e.nodesWithAccess,function(n){return t("div",{key:n.name,class:e.$style.valueLabel},[e.credentialPermissions.updateNodeAccess?t("el-checkbox",{attrs:{label:e.$locale.headerText({key:`headers.${e.shortNodeType(n)}.displayName`,fallback:n.displayName}),value:!!e.nodeAccess[n.name]},on:{change:o=>e.onNodeAccessChange(n.name,o)}}):t("n8n-text",[e._v(" "+e._s(e.$locale.headerText({key:`headers.${e.shortNodeType(n)}.displayName`,fallback:n.displayName}))+" ")])],1)}),0)],1),e.currentCredential?t("el-row",[t("el-col",{class:e.$style.label,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.created"))+" ")])],1),t("el-col",{class:e.$style.valueLabel,attrs:{span:16}},[t("n8n-text",{attrs:{compact:!0}},[t("TimeAgo",{attrs:{date:e.currentCredential.createdAt,capitalize:!0}})],1)],1)],1):e._e(),e.currentCredential?t("el-row",[t("el-col",{class:e.$style.label,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.lastModified"))+" ")])],1),t("el-col",{class:e.$style.valueLabel,attrs:{span:16}},[t("n8n-text",{attrs:{compact:!0}},[t("TimeAgo",{attrs:{date:e.currentCredential.updatedAt,capitalize:!0}})],1)],1)],1):e._e(),e.currentCredential?t("el-row",[t("el-col",{class:e.$style.label,attrs:{span:8}},[t("n8n-text",{attrs:{compact:!0,bold:!0}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialInfo.id"))+" ")])],1),t("el-col",{class:e.$style.valueLabel,attrs:{span:16}},[t("n8n-text",{attrs:{compact:!0}},[e._v(e._s(e.currentCredential.id))])],1)],1):e._e()],1)},Hm=[];const uo={$style:jm};function Gm(s){for(var e in uo)this[e]=uo[e]}var qm=p(Bm,Km,Hm,!1,Gm,null,null,null);const Ym=qm.exports,Xm=x(D).extend({name:"CredentialSharing",props:["credential","credentialId","credentialData","sharedWith","credentialPermissions","modalBus"],computed:{...b(be,z,Ye,N,P),usersListActions(){return[{label:this.$locale.baseText("credentialEdit.credentialSharing.list.delete"),value:"delete"}]},isDefaultUser(){return this.usersStore.isDefaultUser},isSharingEnabled(){return this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)},usersList(){return this.usersStore.allUsers.filter(s=>{var n;const e=s.id===((n=this.usersStore.currentUser)==null?void 0:n.id),t=(this.credentialData.sharedWith||[]).find(o=>o.id===s.id);return!e&&!t})},sharedWithList(){return[{...this.credential?this.credential.ownedBy:this.usersStore.currentUser,isOwner:!0}].concat(this.credentialData.sharedWith||[])},credentialOwnerName(){return this.credentialsStore.getCredentialOwnerNameById(`${this.credentialId}`)}},methods:{async onAddSharee(s){const e={...this.usersStore.getUserById(s),isOwner:!1};this.$emit("change",(this.credentialData.sharedWith||[]).concat(e))},async onRemoveSharee(s){const e=this.usersStore.getUserById(s);e&&await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.message",{interpolate:{name:e.fullName||""}}),this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.title"),null,this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.confirmButtonText"),this.$locale.baseText("credentialEdit.credentialSharing.list.delete.confirm.cancelButtonText"))&&this.$emit("change",this.credentialData.sharedWith.filter(n=>n.id!==e.id))},async loadUsers(){await this.usersStore.fetchUsers()},goToUsersSettings(){this.$router.push({name:d.USERS_SETTINGS}),this.modalBus.emit("close")},goToUpgrade(){this.uiStore.goToUpgrade("credential_sharing","upgrade-credentials-sharing")}},mounted(){this.loadUsers()}}),Jm="_container_1h1cb_1",Qm={container:Jm};var Zm=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[e.isSharingEnabled?e.isDefaultUser?t("div",[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("credentialEdit.credentialSharing.isDefaultUser.title"),description:e.$locale.baseText("credentialEdit.credentialSharing.isDefaultUser.description"),buttonText:e.$locale.baseText("credentialEdit.credentialSharing.isDefaultUser.button")},on:{click:e.goToUsersSettings}})],1):t("div",[t("n8n-info-tip",{staticClass:"mb-s",attrs:{bold:!1}},[e.credentialPermissions.isOwner?[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialSharing.info.owner"))+" ")]:[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialSharing.info.sharee",{interpolate:{credentialOwnerName:e.credentialOwnerName}}))+" ")]],2),!e.credentialPermissions.isOwner&&!e.credentialPermissions.isSharee&&e.credentialPermissions.isInstanceOwner?t("n8n-info-tip",{staticClass:"mb-s",attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("credentialEdit.credentialSharing.info.instanceOwner"))+" ")]):e._e(),e.credentialPermissions.updateSharing?t("n8n-user-select",{staticClass:"mb-s",attrs:{size:"large",users:e.usersList,currentUserId:e.usersStore.currentUser.id,placeholder:e.$locale.baseText("credentialEdit.credentialSharing.select.placeholder"),"data-test-id":"credential-sharing-modal-users-select"},on:{input:e.onAddSharee},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("n8n-icon",{attrs:{icon:"search"}})]},proxy:!0}],null,!1,3648684143)}):e._e(),t("n8n-users-list",{attrs:{actions:e.usersListActions,users:e.sharedWithList,currentUserId:e.usersStore.currentUser.id,readonly:!e.credentialPermissions.updateSharing},on:{delete:e.onRemoveSharee}})],1):t("div",[t("n8n-action-box",{attrs:{heading:e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.credentials.sharing.unavailable.title),description:e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.credentials.sharing.unavailable.description),buttonText:e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.credentials.sharing.unavailable.button)},on:{click:e.goToUpgrade}})],1)])},eg=[];const ho={$style:Qm};function tg(s){for(var e in ho)this[e]=ho[e]}var sg=p(Xm,Zm,eg,!1,tg,null,null,null);const ng=sg.exports,og=C({name:"SaveButton",props:{saved:{type:Boolean},isSaving:{type:Boolean},disabled:{type:Boolean},saveLabel:{type:String},savingLabel:{type:String},savedLabel:{type:String},type:{type:String,default:"primary"}},computed:{saveButtonLabel(){return this.isSaving?this.$locale.baseText("saveButton.saving"):this.$locale.baseText("saveButton.save")}}}),ag="_container_1rxe5_1",ig="_button_1rxe5_8",rg="_saved_1rxe5_12",lg={container:ag,button:ig,saved:rg};var cg=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{class:e.$style.container,attrs:{"data-test-id":"save-button"}},[e.saved?t("span",{class:e.$style.saved},[e._v(e._s(e.$locale.baseText("saveButton.saved")))]):t("n8n-button",{class:e.$style.button,attrs:{label:e.saveButtonLabel,loading:e.isSaving,disabled:e.disabled,type:e.type},on:{click:function(n){return e.$emit("click")}}})],1)},dg=[];const po={$style:lg};function ug(s){for(var e in po)this[e]=po[e]}var hg=p(og,cg,dg,!1,ug,null,null,null);const zs=hg.exports,pg=x(D).extend({name:"InlineNameEdit",props:{name:{type:String},subtitle:{type:String},type:{type:String},readonly:{type:Boolean,default:!1}},data(){return{isNameEdit:!1}},methods:{onNameEdit(s){this.$emit("input",s)},enableNameEdit(){this.isNameEdit=!0,setTimeout(()=>{const s=this.$refs.nameInput;s&&s.focus()},0)},disableNameEdit(){this.name||(this.$emit("input",`Untitled ${this.type}`),this.$showToast({title:"Error",message:`${this.type} name cannot be empty`,type:"warning"})),this.isNameEdit=!1}}}),fg="_container_daod9_1",mg="_headline_daod9_9",gg="_nameInput_daod9_36",_g="_subtitle_daod9_46",vg={container:fg,headline:mg,"headline-editable":"_headline-editable_daod9_28",nameInput:gg,subtitle:_g};var wg=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"ph-no-capture",class:e.$style.container},[e.readonly?t("span",{class:e.$style.headline},[e._v(" "+e._s(e.name)+" ")]):t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.disableNameEdit,expression:"disableNameEdit"}],class:[e.$style.headline,e.$style["headline-editable"]],on:{keydown:function(n){n.stopPropagation()},click:e.enableNameEdit}},[e.isNameEdit?t("div",{class:e.$style.nameInput},[t("n8n-input",{ref:"nameInput",attrs:{value:e.name,size:"xlarge",maxlength:64},on:{input:e.onNameEdit,change:e.disableNameEdit}})],1):t("div",[t("span",[e._v(e._s(e.name))]),t("i",[t("font-awesome-icon",{attrs:{icon:"pen"}})],1)])]),!e.isNameEdit&&e.subtitle?t("div",{class:e.$style.subtitle},[e._v(" "+e._s(e.subtitle)+" ")]):e._e()])},yg=[];const fo={$style:vg};function bg(s){for(var e in fo)this[e]=fo[e]}var xg=p(pg,wg,yg,!1,bg,null,null,null);const Xi=xg.exports,Tg=C({name:"FeatureComingSoon",props:{featureId:{type:String,required:!0},showTitle:{type:Boolean,default:!1}},computed:{...b(Z,P,N,z),userId(){return this.usersStore.currentUserId||""},instanceId(){return this.rootStore.instanceId},featureInfo(){return this.uiStore.getFakeDoorById(this.featureId)}},methods:{openLinkPage(){this.featureInfo&&(window.open(`${this.featureInfo.linkURL}&u=${this.instanceId}#${this.userId}&v=${this.rootStore.versionCli}`,"_blank"),this.$telemetry.track("user clicked feature waiting list button",{feature:this.featureId}))}}}),kg="_actionBoxContainer_re7iy_1",Sg={actionBoxContainer:kg};var $g=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.featureInfo?t("div",{class:[e.$style.container]},[e.showTitle?t("div",{staticClass:"mb-2xl"},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText(e.featureInfo.featureName))+" ")])],1):e._e(),e.featureInfo.infoText?t("div",{staticClass:"mb-l"},[t("n8n-info-tip",{attrs:{theme:"info",type:"note"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText(e.featureInfo.infoText))}})]],2)],1):e._e(),t("div",{class:e.$style.actionBoxContainer},[t("n8n-action-box",{attrs:{description:e.$locale.baseText(e.featureInfo.actionBoxDescription),buttonText:e.$locale.baseText(e.featureInfo.actionBoxButtonLabel||"fakeDoor.actionBox.button.label")},on:{click:e.openLinkPage},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText(e.featureInfo.actionBoxTitle))}})]},proxy:!0}],null,!1,1885287474)})],1)]):e._e()},Eg=[];const mo={$style:Sg};function Cg(s){for(var e in mo)this[e]=mo[e]}var Ng=p(Tg,$g,Eg,!1,Cg,null,null,null);const Ji=Ng.exports,Ig=x(D,Be).extend({name:"CredentialEdit",components:{CredentialSharing:ng,CredentialConfig:Om,CredentialIcon:qi,CredentialInfo:Ym,InlineNameEdit:Xi,Modal:ie,SaveButton:zs,FeatureComingSoon:Ji},props:{modalName:{type:String,required:!0},activeId:{type:[String,Number],required:!1},mode:{type:String}},data(){return{activeTab:"connection",authError:"",credentialId:"",credentialName:"",credentialData:{},modalBus:q(),nodeAccess:{},isDeleting:!1,isSaving:!1,isTesting:!1,hasUnsavedChanges:!1,loading:!0,showValidationWarning:!1,testedSuccessfully:!1,isRetesting:!1,EnterpriseEditionFeature:te,selectedCredential:"",requiredCredentials:!1,hasUserSpecifiedName:!1}},async mounted(){var s;if(this.requiredCredentials=Sd(this.uiStore.modals[ys])&&this.uiStore.modals[ys].showAuthSelector===!0,this.setupNodeAccess(),this.mode==="new"&&this.credentialTypeName?(this.credentialName=await this.credentialsStore.getNewCredentialName({credentialTypeName:this.defaultCredentialTypeName}),this.currentUser&&S.set(this.credentialData,"ownedBy",{id:this.currentUser.id,firstName:this.currentUser.firstName,lastName:this.currentUser.lastName,email:this.currentUser.email})):await this.loadCurrentCredential(),this.credentialType)for(const e of this.credentialType.properties)!this.credentialData.hasOwnProperty(e.name)&&!((s=this.credentialType.__overwrittenProperties)!=null&&s.includes(e.name))&&S.set(this.credentialData,e.name,e.default);await this.$externalHooks().run("credentialsEdit.credentialModalOpened",{credentialType:this.credentialTypeName,isEditingCredential:this.mode==="edit",activeNode:this.ndvStore.activeNode}),setTimeout(async()=>{this.credentialId&&(!this.requiredPropertiesFilled&&this.credentialPermissions.isOwner===!0?this.showValidationWarning=!0:await this.retestCredential())},0),this.loading=!1},computed:{...b(be,ce,P,N,z,B),activeNodeType(){const s=this.ndvStore.activeNode;return s?this.nodeTypesStore.getNodeType(s.type,s.typeVersion):null},selectedCredentialType(){var s,e;if(this.mode!=="new")return null;if(this.selectedCredential!=="")return this.credentialsStore.getCredentialTypeByName(this.selectedCredential);if(this.requiredCredentials){const t=vi(this.activeNodeType);return t.length>0&&((s=this.activeNodeType)!=null&&s.credentials)?on(this.activeNodeType,t[0].value):(e=this.activeNodeType)!=null&&e.credentials?this.activeNodeType.credentials[0]:null}return null},currentUser(){return this.usersStore.currentUser},currentCredential(){return this.credentialId?this.credentialsStore.getCredentialById(this.credentialId):null},credentialTypeName(){return this.mode==="edit"?this.currentCredential?this.currentCredential.type:null:this.selectedCredentialType?this.selectedCredentialType.name:`${this.activeId}`},credentialType(){if(!this.credentialTypeName)return null;const s=this.credentialsStore.getCredentialTypeByName(this.credentialTypeName);return s?{...s,properties:this.getCredentialProperties(this.credentialTypeName)}:null},isCredentialTestable(){if(this.credentialPermissions.isOwner===!1)return!0;if(this.isOAuthType||!this.requiredPropertiesFilled)return!1;const{ownedBy:s,sharedWith:e,...t}=this.credentialData;return Object.values(t).reduce((a,i)=>a||typeof i=="string"&&i.startsWith("="),!1)?!1:!!this.nodesWithAccess.filter(a=>a.credentials?!!a.credentials.filter(r=>r.name===this.credentialTypeName&&r.testedBy).length:!1).length||!!this.credentialType&&!!this.credentialType.test},nodesWithAccess(){return this.credentialTypeName?this.credentialsStore.getNodesWithAccess(this.credentialTypeName):[]},parentTypes(){return this.credentialTypeName?this.getParentTypes(this.credentialTypeName):[]},isOAuthType(){return!!this.credentialTypeName&&((this.credentialTypeName==="oAuth2Api"||this.parentTypes.includes("oAuth2Api"))&&this.credentialData.grantType==="authorizationCode"||this.credentialTypeName==="oAuth1Api"||this.parentTypes.includes("oAuth1Api"))},isOAuthConnected(){return this.isOAuthType&&!!this.credentialData.oauthTokenData},credentialProperties(){return this.credentialType?this.credentialType.properties.filter(s=>this.displayCredentialParameter(s)?!this.credentialType.__overwrittenProperties||!this.credentialType.__overwrittenProperties.includes(s.name):!1):[]},requiredPropertiesFilled(){for(const s of this.credentialProperties)if(s.required===!0&&(s.type==="string"&&!this.credentialData[s.name]||s.type==="number"&&typeof this.credentialData[s.name]!="number"))return!1;return!0},credentialPermissions(){return this.loading?{}:yi(this.currentUser,this.credentialId?this.currentCredential:this.credentialData)},sidebarItems(){return[{id:"connection",label:this.$locale.baseText("credentialEdit.credentialEdit.connection"),position:"top"},{id:"sharing",label:this.$locale.baseText("credentialEdit.credentialEdit.sharing"),position:"top"},{id:"details",label:this.$locale.baseText("credentialEdit.credentialEdit.details"),position:"top"}]},isSharingAvailable(){return this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)},defaultCredentialTypeName(){let s=this.credentialTypeName;return(!s||s==="null")&&this.activeNodeType&&this.activeNodeType.credentials&&(s=this.activeNodeType.credentials[0].name),s||""}},methods:{async beforeClose(){let s=!1;if(this.hasUnsavedChanges){const e=this.credentialType?this.credentialType.displayName:"";s=await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.message",{interpolate:{credentialDisplayName:e}}),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.cancelButtonText"),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose1.confirmButtonText"))}else this.credentialPermissions.isOwner&&this.isOAuthType&&!this.isOAuthConnected&&(s=await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.message"),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.cancelButtonText"),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.beforeClose2.confirmButtonText")));if(s)this.requiredPropertiesFilled?this.isOAuthType&&this.scrollToBottom():(this.showValidationWarning=!0,this.scrollToTop());else return!0;return!1},displayCredentialParameter(s){return s.type==="hidden"?!1:s.displayOptions===void 0?!0:this.displayParameter(this.credentialData,s,"",null)},getCredentialProperties(s){const e=this.credentialsStore.getCredentialTypeByName(s);if(!e)return[];if(e.extends===void 0)return e.properties;const t=[];for(const n of e.extends){const o=this.getCredentialProperties(n);sn(t,o)}return sn(t,e.properties),t},async loadCurrentCredential(){this.credentialId=this.activeId;try{const s=await this.credentialsStore.getCredentialData({id:this.credentialId});if(!s)throw new Error(this.$locale.baseText("credentialEdit.credentialEdit.couldNotFindCredentialWithId")+":"+this.credentialId);this.credentialData=s.data||{},s.sharedWith&&S.set(this.credentialData,"sharedWith",s.sharedWith),s.ownedBy&&S.set(this.credentialData,"ownedBy",s.ownedBy),this.credentialName=s.name,s.nodesAccess.forEach(e=>{this.nodeAccess[e.nodeType]=e})}catch(s){this.$showError(s,this.$locale.baseText("credentialEdit.credentialEdit.showError.loadCredential.title")),this.closeDialog();return}},onTabSelect(s){this.activeTab=s;const e=s.replaceAll("coming-soon/",""),t=this.credentialType?this.credentialType.name:"",n=this.ndvStore.activeNode;this.$telemetry.track("User viewed credential tab",{credential_type:t,node_type:n?n.type:null,tab:e,workflow_id:this.workflowsStore.workflowId,credential_id:this.credentialId,sharing_enabled:te.Sharing})},onNodeAccessChange({name:s,value:e}){this.hasUnsavedChanges=!0,e?this.nodeAccess={...this.nodeAccess,[s]:{nodeType:s}}:this.nodeAccess={...this.nodeAccess,[s]:null}},onChangeSharedWith(s){S.set(this.credentialData,"sharedWith",s),this.hasUnsavedChanges=!0},onDataChange({name:s,value:e}){this.hasUnsavedChanges=!0;const{oauthTokenData:t,...n}=this.credentialData;this.credentialData={...n,[s]:e}},closeDialog(){this.modalBus.emit("close")},getParentTypes(s){const e=this.credentialsStore.getCredentialTypeByName(s);if(e===void 0||e.extends===void 0)return[];const t=[];for(const n of e.extends)t.push(n),t.push.apply(t,this.getParentTypes(n));return t},onNameEdit(s){this.hasUnsavedChanges=!0,this.hasUserSpecifiedName=!0,this.credentialName=s},scrollToTop(){setTimeout(()=>{const s=this.$refs.content;s&&(s.scrollTop=0)},0)},scrollToBottom(){setTimeout(()=>{const s=this.$refs.content;s&&(s.scrollTop=s.scrollHeight)},0)},async retestCredential(){if(!this.isCredentialTestable){this.authError="",this.testedSuccessfully=!1;return}const s=Object.values(this.nodeAccess).filter(a=>!!a),{ownedBy:e,sharedWith:t,...n}=this.credentialData,o={id:this.credentialId,name:this.credentialName,type:this.credentialTypeName,data:n,nodesAccess:s};this.isRetesting=!0,await this.testCredential(o),this.isRetesting=!1},async testCredential(s){const e=await this.credentialsStore.testCredential(s);e.status==="Error"?(this.authError=e.message,this.testedSuccessfully=!1):(this.authError="",this.testedSuccessfully=!0),this.scrollToTop()},async saveCredential(){this.requiredPropertiesFilled?this.showValidationWarning=!1:(this.showValidationWarning=!0,this.scrollToTop()),this.isSaving=!0;const s=Object.values(this.nodeAccess).filter(r=>!!r),e=Le(this.credentialType.properties,this.credentialData,!1,!1,null);let t,n;this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)&&(t=this.credentialData.sharedWith,n=this.credentialData.ownedBy);const o={id:this.credentialId,name:this.credentialName,type:this.credentialTypeName,data:e,nodesAccess:s,sharedWith:t,ownedBy:n};let a;const i=this.mode==="new"&&!this.credentialId;if(i?a=await this.createCredential(o):a=await this.updateCredential(o),this.isSaving=!1,a){this.credentialId=a.id,this.isCredentialTestable?(this.isTesting=!0,o.data=this.credentialData,o.id=this.credentialId,await this.testCredential(o),this.isTesting=!1):(this.authError="",this.testedSuccessfully=!1);const r={credential_type:o.type,workflow_id:this.workflowsStore.workflowId,credential_id:a.id,is_complete:!!this.requiredPropertiesFilled,is_new:i};this.isOAuthType?r.is_valid=!!this.isOAuthConnected:this.isCredentialTestable&&(r.is_valid=!!this.testedSuccessfully),this.ndvStore.activeNode&&(r.node_type=this.ndvStore.activeNode.type),this.authError&&this.authError!==""&&(r.authError=this.authError),this.$telemetry.track("User saved credentials",r),await this.$externalHooks().run("credentialEdit.saveCredential",r)}return a},async createCredential(s){let e;try{e=await this.credentialsStore.createNewCredential(s),this.hasUnsavedChanges=!1}catch(t){return this.$showError(t,this.$locale.baseText("credentialEdit.credentialEdit.showError.createCredential.title")),null}return await this.$externalHooks().run("credential.saved",{credential_type:s.type,credential_id:e.id,is_new:!0}),this.$telemetry.track("User created credentials",{credential_type:s.type,credential_id:e.id,workflow_id:this.workflowsStore.workflowId}),e},async updateCredential(s){let e;try{e=await this.credentialsStore.updateCredential({id:this.credentialId,data:s}),this.hasUnsavedChanges=!1}catch(t){return this.$showError(t,this.$locale.baseText("credentialEdit.credentialEdit.showError.updateCredential.title")),null}return await this.$externalHooks().run("credential.saved",{credential_type:s.type,credential_id:e.id,is_new:!1}),this.updateNodesCredentialsIssues(),e},async deleteCredential(){if(!this.currentCredential)return;const s=this.currentCredential.name;if(await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message",{interpolate:{savedCredentialName:s}}),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText"))!==!1){try{this.isDeleting=!0,await this.credentialsStore.deleteCredential({id:this.credentialId}),this.hasUnsavedChanges=!1}catch(t){this.$showError(t,this.$locale.baseText("credentialEdit.credentialEdit.showError.deleteCredential.title")),this.isDeleting=!1;return}this.isDeleting=!1,this.updateNodesCredentialsIssues(),this.credentialData={},this.$showMessage({title:this.$locale.baseText("credentialEdit.credentialEdit.showMessage.title"),type:"success"}),this.closeDialog()}},async oAuthCredentialAuthorize(){let s;const e=await this.saveCredential();if(!e)return;const t=this.parentTypes;try{const i={id:e.id,...this.credentialData};this.credentialTypeName==="oAuth2Api"||t.includes("oAuth2Api")?an(i)&&(s=await this.credentialsStore.oAuth2Authorize(i)):(this.credentialTypeName==="oAuth1Api"||t.includes("oAuth1Api"))&&an(i)&&(s=await this.credentialsStore.oAuth1Authorize(i))}catch(i){this.$showError(i,this.$locale.baseText("credentialEdit.credentialEdit.showError.generateAuthorizationUrl.title"),this.$locale.baseText("credentialEdit.credentialEdit.showError.generateAuthorizationUrl.message"));return}const n="scrollbars=no,resizable=yes,status=no,titlebar=noe,location=no,toolbar=no,menubar=no,width=500,height=700",o=window.open(s,"OAuth2 Authorization",n);S.set(this.credentialData,"oauthTokenData",null);const a=i=>{i.data==="success"&&(window.removeEventListener("message",a,!1),S.set(this.credentialData,"oauthTokenData",{}),this.credentialsStore.enableOAuthCredential(e),o&&o.close())};window.addEventListener("message",a,!1)},async onAuthTypeChanged(s){var t;if(!((t=this.activeNodeType)!=null&&t.credentials))return;const e=on(this.activeNodeType,s);if(e&&(this.selectedCredential=e.name,this.resetCredentialData(),this.setupNodeAccess(),$d(this.ndvStore.activeNode,s),this.hasUnsavedChanges&&!this.hasUserSpecifiedName)){const n=await this.credentialsStore.getNewCredentialName({credentialTypeName:this.defaultCredentialTypeName});this.credentialName=n}},setupNodeAccess(){this.nodeAccess=this.nodesWithAccess.reduce((s,e)=>(this.mode==="new"?s[e.name]={nodeType:e.name}:s[e.name]=null,s),{})},resetCredentialData(){var s;if(this.credentialType)for(const e of this.credentialType.properties)(s=this.credentialType.__overwrittenProperties)!=null&&s.includes(e.name)||S.set(this.credentialData,e.name,e.default)}}}),Dg="_credentialModal_1gvmx_1",Ag="_mainContent_1gvmx_6",Pg="_sidebar_1gvmx_12",Og="_header_1gvmx_22",Mg="_container_1gvmx_26",Rg="_credInfo_1gvmx_31",Lg="_credActions_1gvmx_39",Wg="_credIcon_1gvmx_50",Bg={credentialModal:Dg,mainContent:Ag,sidebar:Pg,header:Og,container:Mg,credInfo:Rg,credActions:Lg,credIcon:Wg};var Ug=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,customClass:e.$style.credentialModal,eventBus:e.modalBus,loading:e.loading,beforeClose:e.beforeClose,width:"70%",height:"80%"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.header},[t("div",{class:e.$style.credInfo},[t("div",{class:e.$style.credIcon},[t("CredentialIcon",{attrs:{credentialTypeName:e.defaultCredentialTypeName}})],1),t("InlineNameEdit",{attrs:{name:e.credentialName,subtitle:e.credentialType?e.credentialType.displayName:"",readonly:!e.credentialPermissions.updateName||!e.credentialType,type:"Credential","data-test-id":"credential-name"},on:{input:e.onNameEdit}})],1),t("div",{class:e.$style.credActions},[e.currentCredential&&e.credentialPermissions.delete?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("credentialEdit.credentialEdit.delete"),icon:"trash",size:"medium",type:"tertiary",disabled:e.isSaving,loading:e.isDeleting,"data-test-id":"credential-delete-button"},on:{click:e.deleteCredential}}):e._e(),(e.hasUnsavedChanges||e.credentialId)&&e.credentialPermissions.save?t("SaveButton",{attrs:{saved:!e.hasUnsavedChanges&&!e.isTesting,isSaving:e.isSaving||e.isTesting,savingLabel:e.isTesting?e.$locale.baseText("credentialEdit.credentialEdit.testing"):e.$locale.baseText("credentialEdit.credentialEdit.saving"),"data-test-id":"credential-save-button"},on:{click:e.saveCredential}}):e._e()],1)]),t("hr")]},proxy:!0},{key:"content",fn:function(){return[t("div",{class:e.$style.container,attrs:{"data-test-id":"credential-edit-dialog"}},[t("div",{class:e.$style.sidebar},[t("n8n-menu",{attrs:{mode:"tabs",items:e.sidebarItems},on:{select:e.onTabSelect}})],1),e.activeTab==="connection"?t("div",{ref:"content",class:e.$style.mainContent},[t("CredentialConfig",{attrs:{credentialType:e.credentialType,credentialProperties:e.credentialProperties,credentialData:e.credentialData,credentialId:e.credentialId,showValidationWarning:e.showValidationWarning,authError:e.authError,testedSuccessfully:e.testedSuccessfully,isOAuthType:e.isOAuthType,isOAuthConnected:e.isOAuthConnected,isRetesting:e.isRetesting,parentTypes:e.parentTypes,requiredPropertiesFilled:e.requiredPropertiesFilled,credentialPermissions:e.credentialPermissions,mode:e.mode,selectedCredential:e.selectedCredential,showAuthTypeSelector:e.requiredCredentials},on:{change:e.onDataChange,oauth:e.oAuthCredentialAuthorize,retest:e.retestCredential,scrollToTop:e.scrollToTop,authTypeChanged:e.onAuthTypeChanged}})],1):e.activeTab==="sharing"&&e.credentialType?t("div",{class:e.$style.mainContent},[t("CredentialSharing",{attrs:{credential:e.currentCredential,credentialData:e.credentialData,credentialId:e.credentialId,credentialPermissions:e.credentialPermissions,modalBus:e.modalBus},on:{change:e.onChangeSharedWith}})],1):e.activeTab==="details"&&e.credentialType?t("div",{class:e.$style.mainContent},[t("CredentialInfo",{attrs:{nodeAccess:e.nodeAccess,nodesWithAccess:e.nodesWithAccess,currentCredential:e.currentCredential,credentialPermissions:e.credentialPermissions},on:{accessChange:e.onNodeAccessChange}})],1):e.activeTab.startsWith("coming-soon")?t("div",{class:e.$style.mainContent},[t("FeatureComingSoon",{attrs:{featureId:e.activeTab.split("/")[1]}})],1):e._e()])]},proxy:!0}])})},Fg=[];const go={$style:Bg};function Vg(s){for(var e in go)this[e]=go[e]}var zg=p(Ig,Ug,Fg,!1,Vg,null,null,null);const jg=zg.exports,_o=/^.* <(.*)>$/;function vo(s){let e=s.trim();if(_o.test(e)){const t=e.match(_o);t&&t.length===2&&(e=t[1])}return e}const Kg=x(D,Je).extend({components:{Modal:ie},name:"InviteUsersModal",props:{modalName:{type:String}},data(){return{config:null,formBus:q(),modalBus:q(),emails:"",showInviteUrls:null,loading:!1,INVITE_USER_MODAL_KEY:As}},mounted(){this.config=[{name:"emails",properties:{label:this.$locale.baseText("settings.users.newEmailsToInvite"),required:!0,validationRules:[{name:"VALID_EMAILS"}],validators:{VALID_EMAILS:{validate:this.validateEmails}},placeholder:"name1@email.com, name2@email.com, ...",capitalize:!0,focusInitially:!0}},{name:"role",initialValue:"member",properties:{label:this.$locale.baseText("auth.role"),required:!0,type:"select",options:[{value:fe.Member,label:this.$locale.baseText("auth.roles.member")}],capitalize:!0}}]},computed:{...b(z,P),emailsCount(){return this.emails.split(",").filter(s=>!!s.trim()).length},buttonLabel(){return this.emailsCount>1?this.$locale.baseText(`settings.users.inviteXUser${this.settingsStore.isSmtpSetup?"":".inviteUrl"}`,{interpolate:{count:this.emailsCount.toString()}}):this.$locale.baseText(`settings.users.inviteUser${this.settingsStore.isSmtpSetup?"":".inviteUrl"}`)},enabledButton(){return this.emailsCount>=1},invitedUsers(){return this.showInviteUrls?this.usersStore.allUsers.filter(s=>this.showInviteUrls.find(e=>e.user.id===s.id)):[]}},methods:{validateEmails(s){if(typeof s!="string")return!1;const e=s.split(",");for(let t=0;t<e.length;t++){const n=e[t],o=vo(n);if(o.trim()&&!jt.test(String(o).trim().toLowerCase()))return{messageKey:"settings.users.invalidEmailError",options:{interpolate:{email:o}}}}return!1},onInput(s){s.name==="emails"&&(this.emails=s.value)},async onSubmit(){try{this.loading=!0;const s=this.emails.split(",").map(a=>({email:vo(a)})).filter(a=>!!a.email);if(s.length===0)throw new Error(this.$locale.baseText("settings.users.noUsersToInvite"));const e=await this.usersStore.inviteUsers(s),t=e.filter(a=>a.error),n=e.filter(a=>!a.error&&a.user.emailSent),o=e.filter(a=>!a.error&&!a.user.emailSent);n.length&&this.$showMessage({type:"success",title:this.$locale.baseText(n.length>1?"settings.users.usersInvited":"settings.users.userInvited"),message:this.$locale.baseText("settings.users.emailInvitesSent",{interpolate:{emails:n.map(({user:a})=>a.email).join(", ")}})}),o.length&&(o.length===1&&this.copyToClipboard(o[0].user.inviteAcceptUrl),this.$showMessage({type:"success",title:this.$locale.baseText(o.length>1?"settings.users.multipleInviteUrlsCreated":"settings.users.inviteUrlCreated"),message:this.$locale.baseText(o.length>1?"settings.users.multipleInviteUrlsCreated.message":"settings.users.inviteUrlCreated.message",{interpolate:{emails:o.map(({user:a})=>a.email).join(", ")}})})),t.length&&setTimeout(()=>{this.$showMessage({type:"error",title:this.$locale.baseText("settings.users.usersEmailedError"),message:this.$locale.baseText("settings.users.emailInvitesSentError",{interpolate:{emails:t.map(({error:a})=>a).join(", ")}})})},0),o.length>1?this.showInviteUrls=o:this.modalBus.emit("close")}catch(s){this.$showError(s,this.$locale.baseText("settings.users.usersInvitedError"))}this.loading=!1},showCopyInviteLinkToast(s){this.$showMessage({type:"success",title:this.$locale.baseText(s.length>1?"settings.users.multipleInviteUrlsCreated":"settings.users.inviteUrlCreated"),message:this.$locale.baseText(s.length>1?"settings.users.multipleInviteUrlsCreated.message":"settings.users.inviteUrlCreated.message",{interpolate:{emails:s.map(({user:e})=>e.email).join(", ")}})})},onSubmitClick(){this.formBus.emit("submit")},onCopyInviteLink(s){s.inviteAcceptUrl&&this.showInviteUrls&&(this.copyToClipboard(s.inviteAcceptUrl),this.showCopyInviteLinkToast([]))}}});var Hg=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.INVITE_USER_MODAL_KEY,title:e.$locale.baseText(e.showInviteUrls?"settings.users.copyInviteUrls":"settings.users.inviteNewUsers"),center:!0,width:"460px",eventBus:e.modalBus},on:{enter:e.onSubmit},scopedSlots:e._u([{key:"content",fn:function(){return[e.showInviteUrls?t("div",[t("n8n-users-list",{attrs:{users:e.invitedUsers},scopedSlots:e._u([{key:"actions",fn:function({user:n}){return[t("n8n-tooltip",{scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(e.$locale.baseText("settings.users.inviteLink.copy"))+" ")]},proxy:!0}],null,!0)},[t("n8n-icon-button",{attrs:{icon:"link",type:"tertiary","data-test-id":"copy-invite-link-button","data-invite-link":n.inviteAcceptUrl},on:{click:function(o){return e.onCopyInviteLink(n)}}})],1)]}}],null,!1,2188231888)})],1):t("n8n-form-inputs",{attrs:{inputs:e.config,eventBus:e.formBus,columnView:!0},on:{input:e.onInput,submit:e.onSubmit}}),e.settingsStore.isSmtpSetup?e._e():t("n8n-info-tip",{staticClass:"mt-s"},[t("i18n",{attrs:{path:"settings.users.setupSMTPInfo"},scopedSlots:e._u([{key:"link",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/reference/user-management.html#step-one-smtp",target:"_blank"}},[e._v(" "+e._s(e.$locale.baseText("settings.users.setupSMTPInfo.link"))+" ")])]},proxy:!0}],null,!1,1324222620)})],1)]},proxy:!0},e.showInviteUrls?null:{key:"footer",fn:function(){return[t("n8n-button",{attrs:{loading:e.loading,disabled:!e.enabledButton,label:e.buttonLabel,float:"right"},on:{click:e.onSubmitClick}})]},proxy:!0}],null,!0)})},Gg=[],qg=p(Kg,Hg,Gg,!1,null,null,null,null);const Yg=qg.exports,Xg=x(xe).extend({name:"CredentialsSelectModal",components:{Modal:ie},async mounted(){try{await this.credentialsStore.fetchCredentialTypes(!1)}catch(s){}this.loading=!1,setTimeout(()=>{const s=this.$refs.select;s&&s.focus()},0)},data(){return{modalBus:q(),selected:"",loading:!0,CREDENTIAL_SELECT_MODAL_KEY:Ps}},computed:{...b(be,N,B)},methods:{onSelect(s){this.selected=s},openCredentialType(){this.modalBus.emit("close"),this.uiStore.openNewCredential(this.selected);const s={credential_type:this.selected,source:"primary_menu",new_credential:!0,workflow_id:this.workflowsStore.workflowId};this.$telemetry.track("User opened Credential modal",s),this.$externalHooks().run("credentialsSelectModal.openCredentialType",s)}}}),Jg="_title_1tuym_1",Qg="_subtitle_1tuym_6",Zg={title:Jg,subtitle:Qg};var e_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.CREDENTIAL_SELECT_MODAL_KEY,eventBus:e.modalBus,width:"50%",center:!0,loading:e.loading,maxWidth:"460px",minHeight:"250px"},scopedSlots:e._u([{key:"header",fn:function(){return[t("h2",{class:e.$style.title},[e._v(" "+e._s(e.$locale.baseText("credentialSelectModal.addNewCredential"))+" ")])]},proxy:!0},{key:"content",fn:function(){return[t("div",[t("div",{class:e.$style.subtitle},[e._v(" "+e._s(e.$locale.baseText("credentialSelectModal.selectAnAppOrServiceToConnectTo"))+" ")]),t("n8n-select",{ref:"select",attrs:{filterable:"",defaultFirstOption:"",placeholder:e.$locale.baseText("credentialSelectModal.searchForApp"),size:"xlarge",value:e.selected,"data-test-id":"new-credential-type-select"},on:{change:e.onSelect},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("font-awesome-icon",{attrs:{icon:"search"}})]},proxy:!0}])},e._l(e.credentialsStore.allCredentialTypes,function(n){return t("n8n-option",{key:n.name,attrs:{value:n.name,label:n.displayName,filterable:"","data-test-id":"new-credential-type-select-option"}})}),1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:e.$style.footer},[t("n8n-button",{attrs:{label:e.$locale.baseText("credentialSelectModal.continue"),float:"right",size:"large",disabled:!e.selected,"data-test-id":"new-credential-type-button"},on:{click:e.openCredentialType}})],1)]},proxy:!0}])})},t_=[];const wo={$style:Zg};function s_(s){for(var e in wo)this[e]=wo[e]}var n_=p(Xg,e_,t_,!1,s_,null,null,null);const o_=n_.exports,fs="__manage",ms="__create",a_=x(D).extend({name:"TagsDropdown",props:{placeholder:{},currentTagIds:{type:Array,default:()=>[]},createEnabled:{},eventBus:{type:Object}},data(){return{filter:"",MANAGE_KEY:fs,CREATE_KEY:ms,focused:!1,preventUpdate:!1}},mounted(){var t,n;const s=this.$refs.select,e=(t=s==null?void 0:s.$refs)==null?void 0:t.innerSelect;if(e){const o=e.$refs.input;o&&(o.setAttribute("maxlength",`${Os}`),o.addEventListener("keydown",a=>{const i=a;i.key==="Escape"?this.$emit("esc"):i.key==="Enter"&&this.filter.length===0&&(this.$data.preventUpdate=!0,this.$emit("blur"),typeof(s==null?void 0:s.blur)=="function"&&s.blur())}))}(n=this.eventBus)==null||n.on("focus",this.onBusFocus),this.tagsStore.fetchAll()},destroyed(){var s;(s=this.eventBus)==null||s.off("focus",this.onBusFocus)},computed:{...b(He,N),allTags(){return this.tagsStore.allTags},hasTags(){return this.tagsStore.hasTags},options(){return this.allTags.filter(s=>s&&s.name.toLowerCase().includes(this.$data.filter.toLowerCase()))},appliedTags(){return this.currentTagIds.filter(s=>this.tagsStore.getTagById(s))}},methods:{onBusFocus(){this.focusOnInput(),this.focusOnTopOption()},filterOptions(s=""){this.$data.filter=s.trim(),this.$nextTick(()=>this.focusOnTopOption())},async onCreate(){const s=this.$data.filter;try{const e=await this.tagsStore.create(s);this.$emit("update",[...this.currentTagIds,e.id]),this.$nextTick(()=>this.focusOnTag(e.id)),this.$data.filter=""}catch(e){this.$showError(e,this.$locale.baseText("tagsDropdown.showError.title"),this.$locale.baseText("tagsDropdown.showError.message",{interpolate:{name:s}}))}},onTagsUpdated(s){const e=s.find(t=>t===fs||t===ms);e===fs?(this.$data.filter="",this.uiStore.openModal(Ms)):e===ms?this.onCreate():setTimeout(()=>{this.$data.preventUpdate||this.$emit("update",s),this.$data.preventUpdate=!1},0)},focusOnTopOption(){const s=this.$refs.tag,e=this.$refs.create;e&&e.hoverItem?e.hoverItem():s&&s[0]&&s[0].hoverItem&&s[0].hoverItem()},focusOnTag(s){const e=this.$refs.tag||[];e&&e.length&&e.find(t=>t.value===s)},focusOnInput(){const s=this.$refs.select;s&&(s.focusOnInput(),this.focused=!0)},onVisibleChange(s){s?this.focused=!0:(this.$data.filter="",this.focused=!1)},onRemoveTag(){this.$nextTick(()=>{this.focusOnInput()})},onClickOutside(s){s.type==="click"&&this.$emit("blur")}},watch:{allTags(){this.currentTagIds.length!==this.appliedTags.length&&this.$emit("update",this.appliedTags)}}});var i_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],class:{"tags-container":!0,focused:e.focused},on:{keydown:function(n){n.stopPropagation()}}},[t("n8n-select",{ref:"select",attrs:{popperAppendToBody:!1,value:e.appliedTags,loading:e.tagsStore.isLoading,placeholder:e.placeholder,"filter-method":e.filterOptions,filterable:"",multiple:"","loading-text":"...","popper-class":"tags-dropdown",size:"medium"},on:{change:e.onTagsUpdated,"visible-change":e.onVisibleChange,"remove-tag":e.onRemoveTag}},[e.options.length===0&&e.filter&&e.createEnabled?t("n8n-option",{key:e.CREATE_KEY,ref:"create",staticClass:"ops",attrs:{value:e.CREATE_KEY}},[t("font-awesome-icon",{attrs:{icon:"plus-circle"}}),t("span",[e._v(" "+e._s(e.$locale.baseText("tagsDropdown.createTag",{interpolate:{filter:e.filter}}))+" ")])],1):e.options.length===0?t("n8n-option",{attrs:{value:"message",disabled:""}},[e.createEnabled?t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.typeToCreateATag")))]):e.allTags.length>0?t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.noMatchingTagsExist")))]):t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.noTagsExist")))])]):e._e(),e._l(e.options,function(n,o){return t("n8n-option",{key:n.id+"_"+o,ref:"tag",refInFor:!0,staticClass:"tag",attrs:{value:n.id,label:n.name}})}),t("n8n-option",{key:e.MANAGE_KEY,staticClass:"ops manage-tags",attrs:{value:e.MANAGE_KEY}},[t("font-awesome-icon",{attrs:{icon:"cog"}}),t("span",[e._v(e._s(e.$locale.baseText("tagsDropdown.manageTags")))])],1)],2)],1)},r_=[],l_=p(a_,i_,r_,!1,null,"372481b7",null,null);const ts=l_.exports,c_=x(D,re).extend({components:{TagsDropdown:ts,Modal:ie},name:"DuplicateWorkflow",props:["modalName","isActive","data"],data(){const s=this.data.tags;return{name:"",currentTagIds:s,isSaving:!1,modalBus:q(),dropdownBus:q(),MAX_WORKFLOW_NAME_LENGTH:bi,prevTagIds:s}},async mounted(){this.name=await this.workflowsStore.getDuplicateCurrentWorkflowName(this.data.name),this.$nextTick(()=>this.focusOnNameInput())},computed:{...b(be,z,P,B),workflowPermissions(){const s=this.data.id===oe,e=this.workflowsStore.workflow.id===oe,t=s&&e?this.workflowsStore.workflow:this.workflowsStore.getWorkflowById(this.data.id);return Kt(this.usersStore.currentUser,t)}},watch:{isActive(s){s&&this.focusOnSelect()}},methods:{focusOnSelect(){this.dropdownBus.emit("focus")},focusOnNameInput(){const s=this.$refs.nameInput;s&&s.focus&&s.focus()},onTagsBlur(){this.prevTagIds=this.currentTagIds},onTagsEsc(){this.currentTagIds=this.prevTagIds},onTagsUpdate(s){this.currentTagIds=s},async save(){const s=this.name.trim();if(!s){this.$showMessage({title:this.$locale.baseText("duplicateWorkflowDialog.errors.missingName.title"),message:this.$locale.baseText("duplicateWorkflowDialog.errors.missingName.message"),type:"error"});return}const e=this.data.id;this.isSaving=!0;try{let t;if(e!==oe){const{createdAt:o,updatedAt:a,usedCredentials:i,...r}=await this.workflowsStore.fetchWorkflow(this.data.id);t=r,this.removeForeignCredentialsFromWorkflow(t,this.credentialsStore.allCredentials)}await this.saveAsNewWorkflow({name:s,data:t,tags:this.currentTagIds,resetWebhookUrls:!0,openInNewWindow:!0,resetNodeIds:!0})&&(this.closeDialog(),this.$telemetry.track("User duplicated workflow",{old_workflow_id:e,workflow_id:this.data.id,sharing_role:this.workflowPermissions.isOwner?"owner":"sharee"}))}catch(t){t.httpStatusCode===403?(t.message=this.$locale.baseText("duplicateWorkflowDialog.errors.forbidden.message"),this.$showError(t,this.$locale.baseText("duplicateWorkflowDialog.errors.forbidden.title"))):this.$showError(t,this.$locale.baseText("duplicateWorkflowDialog.errors.generic.title"))}finally{this.isSaving=!1}},closeDialog(){this.modalBus.emit("close")}}}),d_="_content_qk1mu_1",u_="_footer_qk1mu_5",h_={content:d_,footer:u_};var p_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,eventBus:e.modalBus,title:e.$locale.baseText("duplicateWorkflowDialog.duplicateWorkflow"),center:!0,width:"420px"},on:{enter:e.save},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.content},[t("n8n-input",{ref:"nameInput",attrs:{placeholder:e.$locale.baseText("duplicateWorkflowDialog.enterWorkflowName"),maxlength:e.MAX_WORKFLOW_NAME_LENGTH},model:{value:e.name,callback:function(n){e.name=n},expression:"name"}}),e.settingsStore.areTagsEnabled?t("TagsDropdown",{ref:"dropdown",attrs:{createEnabled:!0,currentTagIds:e.currentTagIds,eventBus:e.dropdownBus,placeholder:e.$locale.baseText("duplicateWorkflowDialog.chooseOrCreateATag")},on:{blur:e.onTagsBlur,esc:e.onTagsEsc,update:e.onTagsUpdate}}):e._e()],1)]},proxy:!0},{key:"footer",fn:function({close:n}){return[t("div",{class:e.$style.footer},[t("n8n-button",{attrs:{loading:e.isSaving,label:e.$locale.baseText("duplicateWorkflowDialog.save"),float:"right"},on:{click:e.save}}),t("n8n-button",{attrs:{type:"secondary",disabled:e.isSaving,label:e.$locale.baseText("duplicateWorkflowDialog.cancel"),float:"right"},on:{click:n}})],1)]}}])})},f_=[];const yo={$style:h_};function m_(s){for(var e in yo)this[e]=yo[e]}var g_=p(c_,p_,f_,!1,m_,null,null,null);const __=g_.exports,v_=C({name:"ModalRoot",props:{name:{type:String,required:!0},keepAlive:{type:Boolean}},computed:{...b(N)}});var w_=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.uiStore.isModalOpen(e.name)||e.keepAlive?t("div",[e._t("default",null,{modalName:e.name,active:e.uiStore.isModalActive(e.name),open:e.uiStore.isModalOpen(e.name),activeId:e.uiStore.getModalActiveId(e.name),mode:e.uiStore.getModalMode(e.name),data:e.uiStore.getModalData(e.name)})],2):e._e()},y_=[],b_=p(v_,w_,y_,!1,null,null,null,null);const x_=b_.exports,T_=x(D).extend({components:{Modal:ie},name:"OnboardingCallSignupModal",props:["modalName"],data(){return{email:"",modalBus:q(),ONBOARDING_CALL_SIGNUP_MODAL_KEY:Ht,showError:!1,okToClose:!1,loading:!1}},computed:{...b(N),isEmailValid(){return jt.test(String(this.email).toLowerCase())}},methods:{async onSignup(){if(!this.isEmailValid){this.showError=!0;return}this.showError=!1,this.loading=!0,this.okToClose=!1;try{await this.uiStore.applyForOnboardingCall(this.email),this.$showMessage({type:"success",title:this.$locale.baseText("onboardingCallSignupSucess.title"),message:this.$locale.baseText("onboardingCallSignupSucess.message")}),this.okToClose=!0,this.modalBus.emit("close")}catch(s){this.$showError(s,this.$locale.baseText("onboardingCallSignupFailed.title"),this.$locale.baseText("onboardingCallSignupFailed.message")),this.loading=!1,this.okToClose=!0}},async onCancel(){this.okToClose=!0,this.modalBus.emit("close")},onModalClose(){return this.okToClose}}}),k_="_buttonsContainer_n7se3_1",S_={buttonsContainer:k_};var $_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.ONBOARDING_CALL_SIGNUP_MODAL_KEY,title:e.$locale.baseText("onboardingCallSignupModal.title"),eventBus:e.modalBus,center:!0,showClose:!1,beforeClose:e.onModalClose,width:"460px"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"pb-m"},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("onboardingCallSignupModal.description"))+" ")])],1),t("div",{on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onSignup.apply(null,arguments)}}},[t("n8n-input",{attrs:{placeholder:e.$locale.baseText("onboardingCallSignupModal.emailInput.placeholder")},model:{value:e.email,callback:function(n){e.email=n},expression:"email"}}),e.showError?t("n8n-text",{staticClass:"mt-4xs",attrs:{size:"small",tag:"div",color:"danger"}},[e._v(" "+e._s(e.$locale.baseText("onboardingCallSignupModal.infoText.emailError"))+" ")]):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:e.$style.buttonsContainer},[t("n8n-button",{attrs:{label:e.$locale.baseText("onboardingCallSignupModal.cancelButton.label"),disabled:e.loading,size:"medium",float:"right",type:"outline"},on:{click:e.onCancel}}),t("n8n-button",{attrs:{disabled:e.email===""||e.loading,label:e.$locale.baseText("onboardingCallSignupModal.signupButton.label"),size:"medium",float:"right",loading:e.loading},on:{click:e.onSignup}})],1)]},proxy:!0}])})},E_=[];const bo={$style:S_};function C_(s){for(var e in bo)this[e]=bo[e]}var N_=p(T_,$_,E_,!1,C_,null,null,null);const I_=N_.exports,D_="v4",A_=x(D,re).extend({components:{Modal:ie},name:"PersonalizationModal",data(){return{isSaving:!1,PERSONALIZATION_MODAL_KEY:xi,otherWorkAreaFieldVisible:!1,otherCompanyIndustryFieldVisible:!1,showAllIndustryQuestions:!0,modalBus:q(),formBus:q()}},computed:{...b(Z,P,N,z),survey(){return[{name:Ed,properties:{label:this.$locale.baseText("personalizationModal.yourEmailAddress"),type:"text",placeholder:this.$locale.baseText("personalizationModal.email")},shouldDisplay:()=>{var e;return this.settingsStore.isDesktopDeployment&&!((e=this.usersStore.currentUser)!=null&&e.firstName)}},{name:$e,properties:{label:this.$locale.baseText("personalizationModal.whatBestDescribesYourCompany"),type:"select",placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.saas"),value:Cd},{label:this.$locale.baseText("personalizationModal.eCommerce"),value:Nd},{label:this.$locale.baseText("personalizationModal.digitalAgencyOrConsultant"),value:Id},{label:this.$locale.baseText("personalizationModal.systemsIntegrator"),value:Dd},{value:Ad,label:this.$locale.baseText("personalizationModal.education")},{label:this.$locale.baseText("personalizationModal.other"),value:rs},{label:this.$locale.baseText("personalizationModal.imNotUsingN8nForWork"),value:Ae}]}},{name:rn,properties:{type:"multi-select",label:this.$locale.baseText("personalizationModal.whichIndustriesIsYourCompanyIn"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{value:Pd,label:this.$locale.baseText("personalizationModal.financeOrInsurance")},{value:Od,label:this.$locale.baseText("personalizationModal.government")},{value:Md,label:this.$locale.baseText("personalizationModal.healthcare")},{value:Rd,label:this.$locale.baseText("personalizationModal.it")},{value:Ld,label:this.$locale.baseText("personalizationModal.legal")},{value:Wd,label:this.$locale.baseText("personalizationModal.managedServiceProvider")},{value:Bd,label:this.$locale.baseText("personalizationModal.marketing")},{value:Ud,label:this.$locale.baseText("personalizationModal.media")},{value:Fd,label:this.$locale.baseText("personalizationModal.manufacturing")},{value:Vd,label:this.$locale.baseText("personalizationModal.physicalRetailOrServices")},{value:zd,label:this.$locale.baseText("personalizationModal.realEstateOrConstruction")},{value:jd,label:this.$locale.baseText("personalizationModal.security")},{value:Kd,label:this.$locale.baseText("personalizationModal.telecoms")},{value:ln,label:this.$locale.baseText("personalizationModal.otherPleaseSpecify")}]},shouldDisplay(e){return e[$e]===rs}},{name:Hd,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyYourCompanysIndustry")},shouldDisplay(e){const t=e[$e],n=e[rn];return t===rs&&!!n&&n.includes(ln)}},{name:Qe,properties:{type:"select",label:this.$locale.baseText("personalizationModal.whichRoleBestDescribesYou"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{value:Gd,label:this.$locale.baseText("personalizationModal.businessOwner")},{value:qd,label:this.$locale.baseText("personalizationModal.customerSupport")},{value:Yd,label:this.$locale.baseText("personalizationModal.dataScience")},{value:ls,label:this.$locale.baseText("personalizationModal.devops")},{value:cs,label:this.$locale.baseText("personalizationModal.it")},{value:ds,label:this.$locale.baseText("personalizationModal.engineering")},{value:us,label:this.$locale.baseText("personalizationModal.salesAndMarketing")},{value:Xd,label:this.$locale.baseText("personalizationModal.security")},{value:cn,label:this.$locale.baseText("personalizationModal.otherPleaseSpecify")}]},shouldDisplay(e){return e[$e]!==Ae}},{name:Jd,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyYourRole")},shouldDisplay(e){const t=e[$e],n=e[Qe];return t!==Ae&&n===cn}},{name:dn,properties:{type:"multi-select",label:this.$locale.baseText("personalizationModal.whatAreYouLookingToAutomate"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{value:Qd,label:this.$locale.baseText("personalizationModal.cicd")},{value:Zd,label:this.$locale.baseText("personalizationModal.cloudInfrastructureOrchestration")},{value:eu,label:this.$locale.baseText("personalizationModal.dataSynching")},{value:tu,label:this.$locale.baseText("personalizationModal.incidentResponse")},{value:su,label:this.$locale.baseText("personalizationModal.monitoringAndAlerting")},{value:nu,label:this.$locale.baseText("personalizationModal.reporting")},{value:ou,label:this.$locale.baseText("personalizationModal.ticketingSystemsIntegrations")},{value:au,label:this.$locale.baseText("personalizationModal.other")}]},shouldDisplay(e){const t=e[$e],n=e[Qe];return t!==Ae&&[ls,ds,cs].includes(n)}},{name:iu,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyYourAutomationGoal")},shouldDisplay(e){const t=e[$e],n=e[dn],o=e[Qe];return t!==Ae&&[ls,ds,cs].includes(o)&&!!n&&n.includes(ru)}},{name:un,properties:{type:"multi-select",label:this.$locale.baseText("personalizationModal.specifySalesMarketingGoal"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.leadGeneration"),value:lu},{label:this.$locale.baseText("personalizationModal.customerCommunication"),value:cu},{label:this.$locale.baseText("personalizationModal.customerActions"),value:du},{label:this.$locale.baseText("personalizationModal.adCampaign"),value:uu},{label:this.$locale.baseText("personalizationModal.reporting"),value:hu},{label:this.$locale.baseText("personalizationModal.dataSynching"),value:pu},{label:this.$locale.baseText("personalizationModal.other"),value:hn}]},shouldDisplay(e){const t=e[$e],n=e[Qe];return t!==Ae&&n===us}},{name:fu,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyOtherSalesAndMarketingGoal")},shouldDisplay(e){const t=e[$e],n=e[un],o=e[Qe];return t!==Ae&&o===us&&!!n&&n.includes(hn)}},{name:mu,properties:{type:"select",label:this.$locale.baseText("personalizationModal.specifyAutomationBeneficiary"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.myself"),value:gu},{label:this.$locale.baseText("personalizationModal.myTeam"),value:_u},{label:this.$locale.baseText("personalizationModal.otherTeams"),value:vu}]},shouldDisplay(e){return e[$e]!==Ae}},{name:wu,properties:{type:"select",label:this.$locale.baseText("personalizationModal.howBigIsYourCompany"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:this.$locale.baseText("personalizationModal.lessThan20People"),value:yu},{label:`20-99 ${this.$locale.baseText("personalizationModal.people")}`,value:bu},{label:`100-499 ${this.$locale.baseText("personalizationModal.people")}`,value:xu},{label:`500-999 ${this.$locale.baseText("personalizationModal.people")}`,value:Tu},{label:`1000+ ${this.$locale.baseText("personalizationModal.people")}`,value:ku},{label:this.$locale.baseText("personalizationModal.imNotUsingN8nForWork"),value:Su}]},shouldDisplay(e){return e[$e]!==Ae}},{name:pn,properties:{type:"select",label:this.$locale.baseText("personalizationModal.howDidYouHearAboutN8n"),placeholder:this.$locale.baseText("personalizationModal.select"),options:[{label:"Google",value:$u},{label:"Twitter",value:Eu},{label:"LinkedIn",value:Cu},{label:"YouTube",value:Nu},{label:this.$locale.baseText("personalizationModal.friendWordOfMouth"),value:Iu},{label:this.$locale.baseText("personalizationModal.podcast"),value:Du},{label:this.$locale.baseText("personalizationModal.event"),value:Au},{label:this.$locale.baseText("personalizationModal.otherPleaseSpecify"),value:fn}]}},{name:Pu,properties:{placeholder:this.$locale.baseText("personalizationModal.specifyReportedSource")},shouldDisplay(e){return e[pn]===fn}}]}},methods:{closeDialog(){this.modalBus.emit("close"),this.$route.name!==d.NEW_WORKFLOW&&this.$router.replace({name:d.NEW_WORKFLOW})},onSave(){this.formBus.emit("submit")},async onSubmit(s){this.$data.isSaving=!0;try{const e={...s,version:D_,personalization_survey_submitted_at:new Date().toISOString(),personalization_survey_n8n_version:this.rootStore.versionCli};await this.$externalHooks().run("personalizationModal.onSubmit",e),await this.usersStore.submitPersonalizationSurvey(e),Object.keys(s).length===0&&this.closeDialog(),await this.fetchOnboardingPrompt()}catch(e){this.$showError(e,"Error while submitting results")}this.$data.isSaving=!1,this.closeDialog()},async fetchOnboardingPrompt(){if(this.settingsStore.onboardingCallPromptEnabled&&Ti(this.usersStore.currentUser||{})<=ki){const s=await this.uiStore.getNextOnboardingPrompt(),e=s.toast_sequence_number===1?Si:1e3;s.title&&s.description&&setTimeout(async()=>{this.$showToast({type:"info",title:s.title,message:s.description,duration:0,customClass:"clickable",closeOnClick:!0,onClick:()=>{this.$telemetry.track("user clicked onboarding toast",{seq_num:s.toast_sequence_number,title:s.title,description:s.description}),this.uiStore.openModal(Ht)}})},e)}}}}),P_="_container_1ime3_1",O_={container:P_};var M_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.PERSONALIZATION_MODAL_KEY,title:e.$locale.baseText("personalizationModal.customizeN8n"),subtitle:e.$locale.baseText("personalizationModal.theseQuestionsHelpUs"),centerTitle:!0,showClose:!1,eventBus:e.modalBus,closeOnClickModal:!1,closeOnPressEscape:!1,width:"460px","data-test-id":"personalization-form"},on:{enter:e.onSave},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.container},[t("n8n-form-inputs",{attrs:{inputs:e.survey,columnView:!0,eventBus:e.formBus},on:{submit:e.onSubmit}})],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",[t("n8n-button",{attrs:{loading:e.isSaving,label:e.$locale.baseText("personalizationModal.getStarted"),float:"right"},on:{click:e.onSave}})],1)]},proxy:!0}])})},R_=[];const xo={$style:O_};function L_(s){for(var e in xo)this[e]=xo[e]}var W_=p(A_,M_,R_,!1,L_,null,null,null);const B_=W_.exports,U_=C({props:{disabled:{default:!1},search:{default:""}},data(){return{maxLength:Os}},methods:{onAddNew(){this.$emit("createEnable")},onSearchChange(s){this.$emit("searchChange",s)}}});var F_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-row",{staticClass:"tags-header"},[t("el-col",{attrs:{span:10}},[t("n8n-input",{attrs:{placeholder:e.$locale.baseText("tagsTableHeader.searchTags"),value:e.search,disabled:e.disabled,clearable:"",maxlength:e.maxLength},on:{input:e.onSearchChange},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("font-awesome-icon",{attrs:{icon:"search"}})]},proxy:!0}])})],1),t("el-col",{attrs:{span:14}},[t("n8n-button",{attrs:{disabled:e.disabled,icon:"plus",label:e.$locale.baseText("tagsTableHeader.addNew"),size:"large",float:"right"},on:{click:e.onAddNew}})],1)],1)},V_=[],z_=p(U_,F_,V_,!1,null,"b1d48747",null,null);const j_=z_.exports,K_=350,H_=100,G_=C({name:"TagsTable",props:["rows","isLoading","newName","isSaving"],data(){return{maxLength:Os}},mounted(){this.rows.length===1&&this.rows[0].create&&this.focusOnInput()},methods:{getRowClasses:({row:s})=>s.disable?"disabled":"",getSpan({row:s,columnIndex:e}){return e===0&&s.tag&&s.delete?[1,2]:e===1&&s.tag&&s.delete?[0,0]:1},enableUpdate(s){s.tag&&(this.$emit("updateEnable",s.tag.id),this.$emit("newNameChange",s.tag.name),this.focusOnInput())},enableDelete(s){s.tag&&(this.$emit("deleteEnable",s.tag.id),this.focusOnDelete())},cancel(){this.$emit("cancelOperation")},apply(){this.$emit("applyOperation")},onNewNameChange(s){this.$emit("newNameChange",s)},focusOnInput(){setTimeout(()=>{const s=this.$refs.nameInput;s&&s.focus&&s.focus()},K_)},focusOnDelete(){setTimeout(()=>{const s=this.$refs.deleteHiddenInput;s&&s.focus&&s.focus()},H_)},focusOnCreate(){const s=this.$refs.table.$refs.bodyWrapper;s&&(s.scrollTop=0),this.focusOnInput()}},watch:{rows(s){s&&s[0]&&s[0].create&&this.focusOnCreate()}}});var q_=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",attrs:{stripe:"","max-height":"450","empty-text":e.$locale.baseText("tagsTable.noMatchingTagsExist"),data:e.rows,"span-method":e.getSpan,"row-class-name":e.getRowClasses}},[t("el-table-column",{attrs:{label:e.$locale.baseText("tagsTable.name")},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{key:n.row.id,staticClass:"name",on:{keydown:function(o){o.stopPropagation()}}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[n.row.create||n.row.update?t("n8n-input",{ref:"nameInput",attrs:{value:e.newName,maxlength:e.maxLength},on:{input:e.onNewNameChange}}):n.row.delete?t("span",[t("span",[e._v(e._s(e.$locale.baseText("tagsTable.areYouSureYouWantToDeleteThisTag")))]),t("input",{ref:"deleteHiddenInput",staticClass:"hidden"})]):t("span",{class:{disabled:n.row.disable}},[e._v(" "+e._s(n.row.tag.name)+" ")])],1)],1)]}}])}),t("el-table-column",{attrs:{label:e.$locale.baseText("tagsTable.usage"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("transition",{attrs:{name:"fade",mode:"out-in"}},[!n.row.create&&!n.row.delete?t("div",{class:{disabled:n.row.disable}},[e._v(" "+e._s(n.row.usage)+" ")]):e._e()])]}}])}),t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(n){return[t("transition",{attrs:{name:"fade",mode:"out-in"}},[n.row.create?t("div",{staticClass:"ops"},[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.cancel"),type:"secondary",disabled:e.isSaving},on:{click:function(o){return o.stopPropagation(),e.cancel.apply(null,arguments)}}}),t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.createTag"),loading:e.isSaving},on:{click:function(o){return o.stopPropagation(),e.apply.apply(null,arguments)}}})],1):n.row.update?t("div",{staticClass:"ops"},[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.cancel"),type:"secondary",disabled:e.isSaving},on:{click:function(o){return o.stopPropagation(),e.cancel.apply(null,arguments)}}}),t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.saveChanges"),loading:e.isSaving},on:{click:function(o){return o.stopPropagation(),e.apply.apply(null,arguments)}}})],1):n.row.delete?t("div",{staticClass:"ops"},[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.cancel"),type:"secondary",disabled:e.isSaving},on:{click:function(o){return o.stopPropagation(),e.cancel.apply(null,arguments)}}}),t("n8n-button",{attrs:{label:e.$locale.baseText("tagsTable.deleteTag"),loading:e.isSaving},on:{click:function(o){return o.stopPropagation(),e.apply.apply(null,arguments)}}})],1):n.row.disable?e._e():t("div",{staticClass:"ops main"},[t("n8n-icon-button",{attrs:{title:e.$locale.baseText("tagsTable.editTag"),icon:"pen","data-test-id":"edit-tag-button"},on:{click:function(o){return o.stopPropagation(),e.enableUpdate(n.row)}}}),n.row.canDelete?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("tagsTable.deleteTag"),icon:"trash","data-test-id":"delete-tag-button"},on:{click:function(o){return o.stopPropagation(),e.enableDelete(n.row)}}}):e._e()],1)])]}}])})],1)},Y_=[],X_=p(G_,q_,Y_,!1,null,"c199d5d0",null,null);const J_=X_.exports,Q_=(s,e)=>s.toLowerCase().trim().includes(e.toLowerCase().trim()),Z_=C({components:{TagsTableHeader:j_,TagsTable:J_},name:"TagsView",props:["tags","isLoading"],data(){return{createEnabled:!1,deleteId:"",updateId:"",search:"",newName:"",stickyIds:new Set,isSaving:!1}},computed:{...b(z),isCreateEnabled(){return(this.tags||[]).length===0||this.$data.createEnabled},rows(){const s=n=>n&&n>0?this.$locale.baseText("tagsView.inUse",{adjustToNumber:n}):this.$locale.baseText("tagsView.notBeingUsed"),e=this.isCreateEnabled||this.$data.updateId||this.$data.deleteId,t=(this.tags||[]).filter(n=>this.stickyIds.has(n.id)||Q_(n.name,this.$data.search)).map(n=>({tag:n,usage:s(n.usageCount),disable:e&&n.id!==this.deleteId&&n.id!==this.$data.updateId,update:e&&n.id===this.$data.updateId,delete:e&&n.id===this.$data.deleteId,canDelete:this.usersStore.canUserDeleteTags}));return this.isCreateEnabled?[{create:!0},...t]:t}},methods:{onNewNameChange(s){this.newName=s},onSearchChange(s){this.$data.stickyIds.clear(),this.$data.search=s},isHeaderDisabled(){return this.isLoading||!!(this.isCreateEnabled||this.$data.updateId||this.$data.deleteId)},onUpdateEnable(s){this.updateId=s},disableUpdate(){this.updateId="",this.newName=""},updateTag(){this.$data.isSaving=!0;const s=this.newName.trim(),e=t=>{this.$data.isSaving=!1,t&&(this.stickyIds.add(this.updateId),this.disableUpdate())};this.$emit("update",this.updateId,s,e)},onDeleteEnable(s){this.deleteId=s},disableDelete(){this.deleteId=""},deleteTag(){this.$data.isSaving=!0;const s=e=>{e&&this.disableDelete(),this.$data.isSaving=!1};this.$emit("delete",this.deleteId,s)},onCreateEnable(){this.$data.createEnabled=!0,this.$data.newName=""},disableCreate(){this.$data.createEnabled=!1,this.$emit("disableCreate")},createTag(){this.$data.isSaving=!0;const s=this.$data.newName.trim(),e=(t,n)=>{t&&(this.stickyIds.add(t.id),this.disableCreate()),this.$data.isSaving=!1};this.$emit("create",s,e)},applyOperation(){this.$data.isSaving||(this.isCreateEnabled?this.createTag():this.$data.updateId?this.updateTag():this.$data.deleteId&&this.deleteTag())},cancelOperation(){this.$data.isSaving||(this.isCreateEnabled?this.disableCreate():this.$data.updateId?this.disableUpdate():this.$data.deleteId&&this.disableDelete())}}});var ev=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{on:{keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.applyOperation.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.cancelOperation.apply(null,arguments)}]}},[t("TagsTableHeader",{attrs:{search:e.search,disabled:e.isHeaderDisabled()},on:{searchChange:e.onSearchChange,createEnable:e.onCreateEnable}}),t("TagsTable",{ref:"tagsTable",attrs:{rows:e.rows,isLoading:e.isLoading,isSaving:e.isSaving,newName:e.newName,"data-test-id":"tags-table"},on:{newNameChange:e.onNewNameChange,updateEnable:e.onUpdateEnable,deleteEnable:e.onDeleteEnable,cancelOperation:e.cancelOperation,applyOperation:e.applyOperation}})],1)},tv=[],sv=p(Z_,ev,tv,!1,null,null,null,null);const nv=sv.exports,ov=C({name:"NoTagsView"});var av=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"container"},[t("el-col",{staticClass:"notags",attrs:{span:16}},[t("div",{staticClass:"icon"},[e._v("ðŸ—„ï¸")]),t("div",[t("div",{staticClass:"headline"},[e._v(" "+e._s(e.$locale.baseText("noTagsView.readyToOrganizeYourWorkflows"))+" ")]),t("div",{staticClass:"description"},[e._v(" "+e._s(e.$locale.baseText("noTagsView.withWorkflowTagsYouReFree"))+" ")])]),t("n8n-button",{attrs:{label:"Create a tag",size:"large"},on:{click:function(n){return e.$emit("enableCreate")}}})],1)],1)},iv=[],rv=p(ov,av,iv,!1,null,"6fd9b73f",null,null);const lv=rv.exports,cv=x(D).extend({name:"TagsManager",created(){this.tagsStore.fetchAll({force:!0,withUsageCount:!0})},data(){return{tagIds:He().allTags.map(e=>e.id),isCreating:!1,modalBus:q(),TAGS_MANAGER_MODAL_KEY:Ms}},components:{TagsView:nv,NoTagsView:lv,Modal:ie},computed:{...b(He),isLoading(){return this.tagsStore.isLoading},tags(){return this.$data.tagIds.map(s=>this.tagsStore.getTagById(s)).filter(Boolean)},hasTags(){return this.tags.length>0}},methods:{onEnableCreate(){this.$data.isCreating=!0},onDisableCreate(){this.$data.isCreating=!1},async onCreate(s,e){try{if(!s)throw new Error(this.$locale.baseText("tagsManager.tagNameCannotBeEmpty"));const t=await this.tagsStore.create(s);this.$data.tagIds=[t.id].concat(this.$data.tagIds),e(t)}catch(t){const n=escape(s);this.$showError(t,this.$locale.baseText("tagsManager.showError.onCreate.title"),this.$locale.baseText("tagsManager.showError.onCreate.message",{interpolate:{escapedName:n}})+":"),e(null,t)}},async onUpdate(s,e,t){const o=this.tagsStore.getTagById(s).name;try{if(!e)throw new Error(this.$locale.baseText("tagsManager.tagNameCannotBeEmpty"));if(e===o){t(!0);return}const a=await this.tagsStore.rename({id:s,name:e});t(!!a),this.$showMessage({title:this.$locale.baseText("tagsManager.showMessage.onUpdate.title"),type:"success"})}catch(a){const i=escape(o);this.$showError(a,this.$locale.baseText("tagsManager.showError.onUpdate.title"),this.$locale.baseText("tagsManager.showError.onUpdate.message",{interpolate:{escapedName:i}})+":"),t(!1,a)}},async onDelete(s,e){const n=this.tagsStore.getTagById(s).name;try{const o=await this.tagsStore.delete(s);if(!o)throw new Error(this.$locale.baseText("tagsManager.couldNotDeleteTag"));this.$data.tagIds=this.$data.tagIds.filter(a=>a!==s),e(o),this.$showMessage({title:this.$locale.baseText("tagsManager.showMessage.onDelete.title"),type:"success"})}catch(o){const a=escape(n);this.$showError(o,this.$locale.baseText("tagsManager.showError.onDelete.title"),this.$locale.baseText("tagsManager.showError.onDelete.message",{interpolate:{escapedName:a}})+":"),e(!1,o)}},onEnter(){this.isLoading||(this.hasTags?this.modalBus.emit("close"):this.onEnableCreate())}}});var dv=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{title:e.$locale.baseText("tagsManager.manageTags"),name:e.TAGS_MANAGER_MODAL_KEY,eventBus:e.modalBus,minWidth:"620px",minHeight:"420px"},on:{enter:e.onEnter},scopedSlots:e._u([{key:"content",fn:function(){return[t("el-row",[e.hasTags||e.isCreating?t("TagsView",{attrs:{isLoading:e.isLoading,tags:e.tags},on:{create:e.onCreate,update:e.onUpdate,delete:e.onDelete,disableCreate:e.onDisableCreate}}):t("NoTagsView",{on:{enableCreate:e.onEnableCreate}})],1)]},proxy:!0},{key:"footer",fn:function({close:n}){return[t("n8n-button",{attrs:{label:e.$locale.baseText("tagsManager.done"),float:"right"},on:{click:n}})]}}])})},uv=[],hv=p(cv,dv,uv,!1,null,null,null,null);const pv=hv.exports,fv=C({name:"ModalDrawer",props:{name:{type:String},beforeClose:{type:Function},eventBus:{type:Object},direction:{type:String},modal:{type:Boolean,default:!0},width:{type:String},wrapperClosable:{type:Boolean,default:!0}},mounted(){var e;window.addEventListener("keydown",this.onWindowKeydown),(e=this.eventBus)==null||e.on("close",this.close);const s=document.activeElement;s&&s.blur()},beforeDestroy(){var s;(s=this.eventBus)==null||s.off("close",this.close),window.removeEventListener("keydown",this.onWindowKeydown)},computed:{...b(N)},methods:{onWindowKeydown(s){this.uiStore.isModalActive(this.name)&&s&&s.keyCode===13&&this.handleEnter()},handleEnter(){this.uiStore.isModalActive(this.name)&&this.$emit("enter")},async close(){this.beforeClose&&await this.beforeClose()===!1||this.uiStore.closeModal(this.name)}}});var mv=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("el-drawer",{attrs:{direction:e.direction,visible:e.uiStore.isModalOpen(this.name),size:e.width,"before-close":e.close,modal:e.modal,wrapperClosable:e.wrapperClosable},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("header")]},proxy:!0}],null,!0)},[[t("span",{on:{keydown:function(n){n.stopPropagation()}}},[e._t("content")],2)]],2)},gv=[],_v=p(fv,mv,gv,!1,null,null,null,null);const Qi=_v.exports,vv=C({name:"NodeIcon",props:{nodeType:{},size:{type:Number,required:!1},disabled:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!1}},computed:{...b(Z),type(){const s=this.nodeType;let e="unknown";if(s){if(s.iconUrl)return"file";s.iconData?e=s.iconData.type:s.icon&&(e=s.icon.split(":")[0]==="file"?"file":"icon")}return e},color(){const s=this.nodeType;return s&&s.defaults&&s.defaults.color?s.defaults.color.toString():""},iconSource(){const s=this.nodeType,e=this.rootStore.getBaseUrl,t={};if(s){if(s.iconData)return{icon:s.iconData.icon,fileBuffer:s.iconData.fileBuffer};if(s.iconUrl)return{path:e+s.iconUrl};if(s.icon){const[n,o]=s.icon.split(":");if(n==="file")throw new Error(`Unexpected icon: ${s.icon}`);t.icon=o}}return t}}});var wv=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-node-icon",{attrs:{type:e.type,src:e.iconSource.path||e.iconSource.fileBuffer,name:e.iconSource.icon,color:e.color,disabled:e.disabled,size:e.size,circle:e.circle,nodeTypeName:e.nodeType?e.nodeType.displayName:"",showTooltip:e.showTooltip},on:{click:n=>e.$emit("click")}})},yv=[],bv=p(vv,wv,yv,!1,null,null,null,null);const rt=bv.exports,xv={props:["text","type"]},Tv="_badge_uyyku_1",kv="_danger_uyyku_11 _badge_uyyku_1",Sv="_warning_uyyku_18 _badge_uyyku_1",$v={badge:Tv,danger:kv,warning:Sv};var Ev=function(){var e=this,t=e._self._c;return t("fragment",[e.type==="danger"?t("el-tag",{class:e.$style.danger,attrs:{type:"danger",size:"small"}},[e._v(" "+e._s(e.text)+" ")]):e.type==="warning"?t("el-tag",{class:e.$style.warning,attrs:{size:"small"}},[e._v(" "+e._s(e.text)+" ")]):e._e()],1)},Cv=[];const To={$style:$v};function Nv(s){for(var e in To)this[e]=To[e]}var Iv=p(xv,Ev,Cv,!1,Nv,null,null,null);const Zi=Iv.exports,Dv="_icon_z329d_1",Av={icon:Dv},Pv={};var Ov=function(){var e=this,t=e._self._c;return t("n8n-tooltip",{attrs:{content:" ",placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[e._t("default")]},proxy:!0}],null,!0)},[t("font-awesome-icon",{class:e.$style.icon,attrs:{icon:"exclamation-triangle"}})],1)},Mv=[];const ko={$style:Av};function Rv(s){for(var e in ko)this[e]=ko[e]}var Lv=p(Pv,Ov,Mv,!1,Rv,null,null,null);const js=Lv.exports;S.component("NodeIcon",rt);S.component("TimeAgo",es);S.component("Badge",Zi);S.component("WarningTooltip",js);const Wv=C({components:{NodeIcon:rt,TimeAgo:es,Badge:Zi,WarningTooltip:js},name:"VersionCard",props:["version"],nodeName(s){return s!==null?s.displayName:this.$locale.baseText("versionCard.unknown")}}),Bv="_card_1jaen_1",Uv="_header_1jaen_13",Fv="_name_1jaen_28",Vv="_divider_1jaen_35",zv="_description_1jaen_41",jv="_nodes_1jaen_55",Kv={card:Bv,header:Uv,name:Fv,divider:Vv,description:zv,"release-date":"_release-date_1jaen_48",nodes:jv};var Hv=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.version?t("a",{class:e.$style.card,attrs:{set:e.version=e.version,href:e.version.documentationUrl,target:"_blank"}},[t("div",{class:e.$style.header},[t("div",[t("div",{class:e.$style.name},[e._v(" "+e._s(`${e.$locale.baseText("versionCard.version")} ${e.version.name}`)+" ")]),e.version.hasSecurityIssue?t("WarningTooltip",[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("versionCard.thisVersionHasASecurityIssue"))}})]],2):e._e(),e.version.hasSecurityFix?t("Badge",{attrs:{text:e.$locale.baseText("versionCard.securityUpdate"),type:"danger"}}):e._e(),e.version.hasBreakingChange?t("Badge",{attrs:{text:e.$locale.baseText("versionCard.breakingChanges"),type:"warning"}}):e._e()],1),t("div",{class:e.$style["release-date"]},[e._v(" "+e._s(e.$locale.baseText("versionCard.released"))+"Â "),t("TimeAgo",{attrs:{date:e.version.createdAt}})],1)]),e.version.description||e.version.nodes&&e.version.nodes.length?t("div",{class:e.$style.divider}):e._e(),t("div",[e.version.description?t("div",{class:e.$style.description,domProps:{innerHTML:e._s(e.version.description)}}):e._e(),e.version.nodes&&e.version.nodes.length>0?t("div",{class:e.$style.nodes},e._l(e.version.nodes,function(n){return t("NodeIcon",{key:n.name,attrs:{nodeType:n,title:e.$options.nodeName(n)}})}),1):e._e()])]):e._e()},Gv=[];const So={$style:Kv};function qv(s){for(var e in So)this[e]=So[e]}var Yv=p(Wv,Hv,Gv,!1,qv,null,null,null);const Xv=Yv.exports,Jv=C({name:"UpdatesPanel",components:{ModalDrawer:Qi,VersionCard:Xv,TimeAgo:es},computed:{...b(Rs),nextVersions(){return this.versionsStore.nextVersions},currentVersion(){return this.versionsStore.currentVersion},infoUrl(){return this.versionsStore.infoUrl}},data(){return{VERSIONS_MODAL_KEY:yt}}}),Qv="_title_176t2_1",Zv="_description_176t2_9",ew="_versions_176t2_25",tw={title:Qv,description:Zv,versions:ew,"versions-card":"_versions-card_176t2_34"};var sw=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ModalDrawer",{attrs:{name:e.VERSIONS_MODAL_KEY,direction:"ltr",width:"520px"},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",{class:e.$style.title},[e._v(" "+e._s(e.$locale.baseText("updatesPanel.weVeBeenBusy"))+" ")])]},proxy:!0},{key:"content",fn:function(){return[t("section",{class:e.$style.description},[e.currentVersion?t("p",[e._v(" "+e._s(e.$locale.baseText("updatesPanel.youReOnVersion",{interpolate:{currentVersionName:e.currentVersion.name}}))+" "),t("strong",[t("TimeAgo",{attrs:{date:e.currentVersion.createdAt}})],1),e._v(e._s(e.$locale.baseText("updatesPanel.andIs"))+" "),t("strong",[e._v(e._s(e.$locale.baseText("updatesPanel.version",{interpolate:{numberOfVersions:e.nextVersions.length,howManySuffix:e.nextVersions.length>1?"s":""}})))]),e._v(" "+e._s(e.$locale.baseText("updatesPanel.behindTheLatest"))+" ")]):e._e(),e.infoUrl?t("n8n-link",{attrs:{to:e.infoUrl,bold:!0}},[t("font-awesome-icon",{attrs:{icon:"info-circle"}}),t("span",[e._v(" "+e._s(e.$locale.baseText("updatesPanel.howToUpdateYourN8nVersion"))+" ")])],1):e._e()],1),t("section",{class:e.$style.versions},e._l(e.nextVersions,function(n){return t("div",{key:n.name,class:e.$style["versions-card"]},[t("VersionCard",{attrs:{version:n}})],1)}),0)]},proxy:!0}])})},nw=[];const $o={$style:tw};function ow(s){for(var e in $o)this[e]=$o[e]}var aw=p(Jv,sw,nw,!1,ow,null,null,null);const iw=aw.exports,rw="How likely are you to recommend n8n to a friend or colleague?",lw="Great to hear! Can we reach out to see how we can make n8n even better for you?",cw="Thanks for your feedback! We'd love to understand how we can improve. Can we reach out?",dw=x(re).extend({name:"ValueSurvey",props:["isActive"],components:{ModalDrawer:Qi},watch:{isActive(s){s&&this.$telemetry.track("User shown value survey",{instance_id:this.rootStore.instanceId})}},computed:{...b(Z,P),getTitle(){return this.form.value!==""?Number(this.form.value)>7?lw:cw:rw},isEmailValid(){return jt.test(String(this.form.email).toLowerCase())}},data(){return{form:{email:"",value:""},showButtons:!0,VALUE_SURVEY_MODAL_KEY:$i,modalBus:q()}},methods:{closeDialog(){this.form.value===""&&this.$telemetry.track("User responded value survey score",{instance_id:this.rootStore.instanceId,nps:""}),this.form.value!==""&&this.form.email===""&&this.$telemetry.track("User responded value survey email",{instance_id:this.rootStore.instanceId,email:""})},onInputChange(s){this.form.email=s},async selectSurveyValue(s){this.form.value=s,this.showButtons=!1;const e=await this.settingsStore.submitValueSurvey({value:this.form.value});e&&e.updated&&this.$telemetry.track("User responded value survey score",{instance_id:this.rootStore.instanceId,nps:this.form.value})},async send(){if(this.isEmailValid){const s=await this.settingsStore.submitValueSurvey({email:this.form.email,value:this.form.value});s&&s.updated&&(this.$telemetry.track("User responded value survey email",{instance_id:this.rootStore.instanceId,email:this.form.email}),this.$showMessage({title:"Thanks for your feedback",message:'If youâ€™d like to help even more, leave us a <a target="_blank" href="https://www.g2.com/products/n8n/reviews/start">review on G2</a>.',type:"success",duration:15e3})),setTimeout(()=>{this.form.value="",this.form.email="",this.showButtons=!0},1e3),this.modalBus.emit("close")}}}}),uw="_title_dy21g_1",hw="_content_dy21g_12",pw="_wrapper_dy21g_22",fw="_buttons_dy21g_27",mw="_container_dy21g_31",gw="_text_dy21g_46",_w="_input_dy21g_52",vw="_button_dy21g_27",ww="_disclaimer_dy21g_61",yw={title:uw,content:hw,wrapper:pw,buttons:fw,container:mw,text:gw,input:_w,button:vw,disclaimer:ww};var bw=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ModalDrawer",{staticClass:"value-survey",attrs:{name:e.VALUE_SURVEY_MODAL_KEY,eventBus:e.modalBus,beforeClose:e.closeDialog,modal:!1,wrapperClosable:!1,direction:"btt",width:"120px"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.title},[t("n8n-heading",{attrs:{tag:"h2",size:"medium",color:"text-xlight"}},[e._v(e._s(e.getTitle))])],1)]},proxy:!0},{key:"content",fn:function(){return[t("section",{class:e.$style.content},[e.showButtons?t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.buttons},e._l(11,function(n){return t("div",{key:n-1,class:e.$style.container},[t("n8n-button",{attrs:{type:"tertiary",label:(n-1).toString(),square:""},on:{click:function(o){e.selectSurveyValue((n-1).toString())}}})],1)}),0),t("div",{class:e.$style.text},[t("n8n-text",{attrs:{size:"small",color:"text-xlight"}},[e._v("Not likely")]),t("n8n-text",{attrs:{size:"small",color:"text-xlight"}},[e._v("Very likely")])],1)]):t("div",{class:e.$style.email},[t("div",{class:e.$style.input,on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.send.apply(null,arguments)}}},[t("n8n-input",{attrs:{placeholder:"Your email address",size:"medium"},on:{input:e.onInputChange},model:{value:e.form.email,callback:function(n){e.$set(e.form,"email",n)},expression:"form.email"}}),t("div",{class:e.$style.button},[t("n8n-button",{attrs:{label:"Send",float:"right",disabled:!e.isEmailValid},on:{click:e.send}})],1)],1),t("div",{class:e.$style.disclaimer},[t("n8n-text",{attrs:{size:"small",color:"text-xlight"}},[e._v(" David from our product team will get in touch personally ")])],1)])])]},proxy:!0}])})},xw=[];const Eo={$style:yw};function Tw(s){for(var e in Eo)this[e]=Eo[e]}var kw=p(dw,bw,xw,!1,Tw,null,null,null);const Sw=kw.exports,$w=x(xe,he,D).extend({name:"WorkflowSettings",components:{Modal:ie},data(){return{isLoading:!0,helpTexts:{errorWorkflow:this.$locale.baseText("workflowSettings.helpTexts.errorWorkflow"),timezone:this.$locale.baseText("workflowSettings.helpTexts.timezone"),saveDataErrorExecution:this.$locale.baseText("workflowSettings.helpTexts.saveDataErrorExecution"),saveDataSuccessExecution:this.$locale.baseText("workflowSettings.helpTexts.saveDataSuccessExecution"),saveExecutionProgress:this.$locale.baseText("workflowSettings.helpTexts.saveExecutionProgress"),saveManualExecutions:this.$locale.baseText("workflowSettings.helpTexts.saveManualExecutions"),executionTimeoutToggle:this.$locale.baseText("workflowSettings.helpTexts.executionTimeoutToggle"),executionTimeout:this.$locale.baseText("workflowSettings.helpTexts.executionTimeout"),workflowCallerPolicy:this.$locale.baseText("workflowSettings.helpTexts.workflowCallerPolicy"),workflowCallerIds:this.$locale.baseText("workflowSettings.helpTexts.workflowCallerIds")},defaultValues:{timezone:"America/New_York",saveDataErrorExecution:"all",saveDataSuccessExecution:"all",saveExecutionProgress:!1,saveManualExecutions:!1,workflowCallerPolicy:"workflowsFromSameOwner"},workflowCallerPolicyOptions:[],saveDataErrorExecutionOptions:[],saveDataSuccessExecutionOptions:[],saveExecutionProgressOptions:[],saveManualOptions:[],timezones:[],workflowSettings:{},workflows:[],executionTimeout:0,maxExecutionTimeout:0,timeoutHMS:{hours:0,minutes:0,seconds:0},modalBus:q(),WORKFLOW_SETTINGS_MODAL_KEY:Pe}},computed:{...b(Z,z,P,B,Gt),workflowName(){return this.workflowsStore.workflowName},workflowId(){return this.workflowsStore.workflowId},workflow(){return this.workflowsStore.workflow},currentUser(){return this.usersStore.currentUser},isSharingEnabled(){return this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)},workflowOwnerName(){const s=this.$locale.baseText("workflowSettings.callerPolicy.options.workflowsFromSameOwner.fallback");return this.workflowsEEStore.getWorkflowOwnerName(`${this.workflowId}`,s)}},async mounted(){if(this.executionTimeout=this.rootStore.executionTimeout,this.maxExecutionTimeout=this.rootStore.maxExecutionTimeout,!this.workflowId||this.workflowId===oe){this.$showMessage({title:"No workflow active",message:"No workflow active to display settings of.",type:"error",duration:0}),this.closeDialog();return}this.defaultValues.saveDataErrorExecution=this.settingsStore.saveDataErrorExecution,this.defaultValues.saveDataSuccessExecution=this.settingsStore.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.settingsStore.saveManualExecutions,this.defaultValues.timezone=this.rootStore.timezone,this.defaultValues.workflowCallerPolicy=this.settingsStore.workflowCallerPolicyDefaultOption,this.isLoading=!0;const s=[];s.push(this.loadWorkflows()),s.push(this.loadSaveDataErrorExecutionOptions()),s.push(this.loadSaveDataSuccessExecutionOptions()),s.push(this.loadSaveExecutionProgressOptions()),s.push(this.loadSaveManualOptions()),s.push(this.loadTimezones()),s.push(this.loadWorkflowCallerPolicyOptions());try{await Promise.all(s)}catch(t){this.$showError(t,"Problem loading settings","The following error occurred loading the data:")}const e=ae(this.workflowsStore.workflowSettings);e.timezone===void 0&&(e.timezone="DEFAULT"),e.saveDataErrorExecution===void 0&&(e.saveDataErrorExecution="DEFAULT"),e.saveDataSuccessExecution===void 0&&(e.saveDataSuccessExecution="DEFAULT"),e.saveExecutionProgress===void 0&&(e.saveExecutionProgress="DEFAULT"),e.saveManualExecutions===void 0&&(e.saveManualExecutions=this.defaultValues.saveManualExecutions),e.callerPolicy===void 0&&(e.callerPolicy=this.defaultValues.workflowCallerPolicy),e.executionTimeout===void 0&&(e.executionTimeout=this.rootStore.executionTimeout),e.maxExecutionTimeout===void 0&&(e.maxExecutionTimeout=this.rootStore.maxExecutionTimeout),S.set(this,"workflowSettings",e),this.timeoutHMS=this.convertToHMS(e.executionTimeout),this.isLoading=!1,this.$externalHooks().run("workflowSettings.dialogVisibleChanged",{dialogVisible:!0}),this.$telemetry.track("User opened workflow settings",{workflow_id:this.workflowsStore.workflowId})},methods:{onCallerIdsInput(s){this.workflowSettings.callerIds=/^[0-9,\s]+$/.test(s)?s:s.replace(/[^0-9,\s]/g,"")},closeDialog(){this.modalBus.emit("close"),this.$externalHooks().run("workflowSettings.dialogVisibleChanged",{dialogVisible:!1})},setTimeout(s,e){const t=e?parseInt(e,10):0;this.timeoutHMS={...this.timeoutHMS,[s]:t}},async loadWorkflowCallerPolicyOptions(){var e,t;const s=((e=this.workflow.ownedBy)==null?void 0:e.id)===((t=this.currentUser)==null?void 0:t.id);this.workflowCallerPolicyOptions=[{key:"none",value:this.$locale.baseText("workflowSettings.callerPolicy.options.none")},{key:"workflowsFromSameOwner",value:this.$locale.baseText("workflowSettings.callerPolicy.options.workflowsFromSameOwner",{interpolate:{owner:s?this.$locale.baseText("workflowSettings.callerPolicy.options.workflowsFromSameOwner.owner"):this.workflowOwnerName}})},{key:"workflowsFromAList",value:this.$locale.baseText("workflowSettings.callerPolicy.options.workflowsFromAList")},{key:"any",value:this.$locale.baseText("workflowSettings.callerPolicy.options.any")}]},async loadSaveDataErrorExecutionOptions(){this.saveDataErrorExecutionOptions.length=0,this.saveDataErrorExecutionOptions.push.apply(this.saveDataErrorExecutionOptions,[{key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveDataErrorExecution==="all"?this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.save"):this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.doNotSave")}})},{key:"all",value:this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.save")},{key:"none",value:this.$locale.baseText("workflowSettings.saveDataErrorExecutionOptions.doNotSave")}])},async loadSaveDataSuccessExecutionOptions(){this.saveDataSuccessExecutionOptions.length=0,this.saveDataSuccessExecutionOptions.push.apply(this.saveDataSuccessExecutionOptions,[{key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveDataSuccessExecution==="all"?this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.save"):this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.doNotSave")}})},{key:"all",value:this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.save")},{key:"none",value:this.$locale.baseText("workflowSettings.saveDataSuccessExecutionOptions.doNotSave")}])},async loadSaveExecutionProgressOptions(){this.saveExecutionProgressOptions.length=0,this.saveExecutionProgressOptions.push.apply(this.saveExecutionProgressOptions,[{key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveExecutionProgress?this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.yes"):this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.no")}})},{key:!0,value:this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.yes")},{key:!1,value:this.$locale.baseText("workflowSettings.saveExecutionProgressOptions.no")}])},async loadSaveManualOptions(){this.saveManualOptions.length=0,this.saveManualOptions.push({key:"DEFAULT",value:this.$locale.baseText("workflowSettings.saveManualOptions.defaultSave",{interpolate:{defaultValue:this.defaultValues.saveManualExecutions?this.$locale.baseText("workflowSettings.saveManualOptions.yes"):this.$locale.baseText("workflowSettings.saveManualOptions.no")}})}),this.saveManualOptions.push({key:!0,value:this.$locale.baseText("workflowSettings.saveManualOptions.yes")}),this.saveManualOptions.push({key:!1,value:this.$locale.baseText("workflowSettings.saveManualOptions.no")})},async loadTimezones(){if(this.timezones.length!==0)return;const s=await this.settingsStore.getTimezones();let e=s[this.defaultValues.timezone];e===void 0&&(e=this.$locale.baseText("workflowSettings.defaultTimezoneNotValid")),this.timezones.push({key:"DEFAULT",value:this.$locale.baseText("workflowSettings.defaultTimezone",{interpolate:{defaultTimezoneValue:e}})});for(const t of Object.keys(s))this.timezones.push({key:t,value:s[t]})},async loadWorkflows(){const s=await this.workflowsStore.fetchAllWorkflows();s.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),s.unshift({id:void 0,name:this.$locale.baseText("workflowSettings.noWorkflow")}),S.set(this,"workflows",s)},async saveSettings(){const s={settings:this.workflowSettings},{hours:e,minutes:t,seconds:n}=this.timeoutHMS;if(s.settings.executionTimeout=s.settings.executionTimeout!==-1?e*3600+t*60+n:-1,s.settings.executionTimeout===0){this.$showError(new Error(this.$locale.baseText("workflowSettings.showError.saveSettings1.errorMessage")),this.$locale.baseText("workflowSettings.showError.saveSettings1.title"),this.$locale.baseText("workflowSettings.showError.saveSettings1.message")+":");return}if(s.settings.executionTimeout>this.workflowSettings.maxExecutionTimeout){const{hours:i,minutes:r,seconds:l}=this.convertToHMS(this.workflowSettings.maxExecutionTimeout);this.$showError(new Error(this.$locale.baseText("workflowSettings.showError.saveSettings2.errorMessage",{interpolate:{hours:i.toString(),minutes:r.toString(),seconds:l.toString()}})),this.$locale.baseText("workflowSettings.showError.saveSettings2.title"),this.$locale.baseText("workflowSettings.showError.saveSettings2.message")+":");return}delete s.settings.maxExecutionTimeout,this.isLoading=!0,s.versionId=this.workflowsStore.workflowVersionId;try{const i=await this.workflowsStore.updateWorkflow(this.$route.params.name,s);this.workflowsStore.setWorkflowVersionId(i.versionId)}catch(i){this.$showError(i,this.$locale.baseText("workflowSettings.showError.saveSettings3.title")),this.isLoading=!1;return}const o={};for(const i of Object.keys(this.workflowSettings))this.workflowSettings[i]!=="DEFAULT"&&(o[i]=this.workflowSettings[i]);const a=ae(this.workflowsStore.workflowSettings);this.workflowsStore.setWorkflowSettings(o),this.isLoading=!1,this.$showMessage({title:this.$locale.baseText("workflowSettings.showMessage.saveSettings.title"),type:"success"}),this.closeDialog(),this.$externalHooks().run("workflowSettings.saveSettings",{oldSettings:a}),this.$telemetry.track("User updated workflow settings",{workflow_id:this.workflowsStore.workflowId})},toggleTimeout(){this.workflowSettings.executionTimeout=this.workflowSettings.executionTimeout===-1?0:-1},convertToHMS(s){if(s>0){const e=Math.floor(s/3600),t=s%3600,n=Math.floor(t/60),o=t%60;return{hours:e,minutes:n,seconds:o}}return{hours:0,minutes:0,seconds:0}}}});var Ew=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.WORKFLOW_SETTINGS_MODAL_KEY,width:"65%",maxHeight:"80%",title:e.$locale.baseText("workflowSettings.settingsFor",{interpolate:{workflowName:e.workflowName,workflowId:e.workflowId}}),eventBus:e.modalBus,scrollable:!0},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"workflow-settings",attrs:{"data-test-id":"workflow-settings-dialog"}},[t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.errorWorkflow")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{innerHTML:e._s(e.helpTexts.errorWorkflow)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:"Select Workflow",size:"medium",filterable:"","limit-popper-width":!0,"data-test-id":"workflow-settings-error-workflow"},model:{value:e.workflowSettings.errorWorkflow,callback:function(n){e.$set(e.workflowSettings,"errorWorkflow",n)},expression:"workflowSettings.errorWorkflow"}},e._l(e.workflows,function(n){return t("n8n-option",{key:n.id,attrs:{label:n.name,value:n.id}})}),1)],1)],1),e.isSharingEnabled?t("div",[t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.callerPolicy")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.workflowCallerPolicy)}})]},proxy:!0}],null,!1,2112807792)},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0},model:{value:e.workflowSettings.callerPolicy,callback:function(n){e.$set(e.workflowSettings,"callerPolicy",n)},expression:"workflowSettings.callerPolicy"}},e._l(e.workflowCallerPolicyOptions,function(n){return t("n8n-option",{key:n.key,attrs:{label:n.value,value:n.key}})}),1)],1)],1),e.workflowSettings.callerPolicy==="workflowsFromAList"?t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.callerIds")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.workflowCallerIds)}})]},proxy:!0}],null,!1,1017219246)},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{attrs:{span:14}},[t("n8n-input",{attrs:{placeholder:e.$locale.baseText("workflowSettings.callerIds.placeholder"),type:"text",size:"medium"},on:{input:e.onCallerIdsInput},model:{value:e.workflowSettings.callerIds,callback:function(n){e.$set(e.workflowSettings,"callerIds",n)},expression:"workflowSettings.callerIds"}})],1)],1):e._e()],1):e._e(),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.timezone")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.timezone)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:"Select Timezone",size:"medium",filterable:"","limit-popper-width":!0,"data-test-id":"workflow-settings-timezone"},model:{value:e.workflowSettings.timezone,callback:function(n){e.$set(e.workflowSettings,"timezone",n)},expression:"workflowSettings.timezone"}},e._l(e.timezones,function(n){return t("n8n-option",{key:n.key,attrs:{label:n.value,value:n.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveDataErrorExecution")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.saveDataErrorExecution)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0,"data-test-id":"workflow-settings-save-failed-executions"},model:{value:e.workflowSettings.saveDataErrorExecution,callback:function(n){e.$set(e.workflowSettings,"saveDataErrorExecution",n)},expression:"workflowSettings.saveDataErrorExecution"}},e._l(e.saveDataErrorExecutionOptions,function(n){return t("n8n-option",{key:n.key,attrs:{label:n.value,value:n.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveDataSuccessExecution")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.saveDataSuccessExecution)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0,"data-test-id":"workflow-settings-save-success-executions"},model:{value:e.workflowSettings.saveDataSuccessExecution,callback:function(n){e.$set(e.workflowSettings,"saveDataSuccessExecution",n)},expression:"workflowSettings.saveDataSuccessExecution"}},e._l(e.saveDataSuccessExecutionOptions,function(n){return t("n8n-option",{key:n.key,attrs:{label:n.value,value:n.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveManualExecutions")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.saveManualExecutions)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0,"data-test-id":"workflow-settings-save-manual-executions"},model:{value:e.workflowSettings.saveManualExecutions,callback:function(n){e.$set(e.workflowSettings,"saveManualExecutions",n)},expression:"workflowSettings.saveManualExecutions"}},e._l(e.saveManualOptions,function(n){return t("n8n-option",{key:n.key,attrs:{label:n.value,value:n.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.saveExecutionProgress")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.saveExecutionProgress)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{staticClass:"ignore-key-press",attrs:{span:14}},[t("n8n-select",{attrs:{placeholder:e.$locale.baseText("workflowSettings.selectOption"),size:"medium",filterable:"","limit-popper-width":!0,"data-test-id":"workflow-settings-save-execution-progress"},model:{value:e.workflowSettings.saveExecutionProgress,callback:function(n){e.$set(e.workflowSettings,"saveExecutionProgress",n)},expression:"workflowSettings.saveExecutionProgress"}},e._l(e.saveExecutionProgressOptions,function(n){return t("n8n-option",{key:n.key,attrs:{label:n.value,value:n.key}})}),1)],1)],1),t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.timeoutWorkflow")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.executionTimeoutToggle)}})]},proxy:!0}])},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{attrs:{span:14}},[t("div",[t("el-switch",{ref:"inputField",attrs:{value:e.workflowSettings.executionTimeout>-1,"active-color":"#13ce66","data-test-id":"workflow-settings-timeout-workflow"},on:{change:e.toggleTimeout}})],1)])],1),e.workflowSettings.executionTimeout>-1?t("div",{attrs:{"data-test-id":"workflow-settings-timeout-form"}},[t("el-row",[t("el-col",{staticClass:"setting-name",attrs:{span:10}},[e._v(" "+e._s(e.$locale.baseText("workflowSettings.timeoutAfter")+":")+" "),t("n8n-tooltip",{staticClass:"setting-info",attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.helpTexts.executionTimeout)}})]},proxy:!0}],null,!1,3006554175)},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)],1),t("el-col",{attrs:{span:4}},[t("n8n-input",{attrs:{size:"medium",value:e.timeoutHMS.hours,min:0},on:{input:n=>e.setTimeout("hours",n)},scopedSlots:e._u([{key:"append",fn:function(){return[e._v(e._s(e.$locale.baseText("workflowSettings.hours")))]},proxy:!0}],null,!1,2082704990)})],1),t("el-col",{staticClass:"timeout-input",attrs:{span:4}},[t("n8n-input",{attrs:{size:"medium",value:e.timeoutHMS.minutes,min:0,max:60},on:{input:n=>e.setTimeout("minutes",n)},scopedSlots:e._u([{key:"append",fn:function(){return[e._v(e._s(e.$locale.baseText("workflowSettings.minutes")))]},proxy:!0}],null,!1,1810038864)})],1),t("el-col",{staticClass:"timeout-input",attrs:{span:4}},[t("n8n-input",{attrs:{size:"medium",value:e.timeoutHMS.seconds,min:0,max:60},on:{input:n=>e.setTimeout("seconds",n)},scopedSlots:e._u([{key:"append",fn:function(){return[e._v(e._s(e.$locale.baseText("workflowSettings.seconds")))]},proxy:!0}],null,!1,1976876142)})],1)],1)],1):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"action-buttons",attrs:{"data-test-id":"workflow-settings-save-button"}},[t("n8n-button",{attrs:{label:e.$locale.baseText("workflowSettings.save"),size:"large",float:"right"},on:{click:e.saveSettings}})],1)]},proxy:!0}])})},Cw=[],Nw=p($w,Ew,Cw,!1,null,"e6e480ea",null,null);const er=Nw.exports,Iw=x(D).extend({components:{Modal:ie},name:"DeleteUserModal",props:{modalName:{type:String},activeId:{type:String}},data(){return{modalBus:q(),loading:!1,operation:"",deleteConfirmText:"",transferId:"",ignoreIds:[this.activeId]}},computed:{...b(z),userToDelete(){return this.usersStore.getUserById(this.activeId)},isPending(){return this.userToDelete?this.userToDelete&&!this.userToDelete.firstName:!1},title(){const s=this.userToDelete&&(this.userToDelete.fullName||this.userToDelete.email)||"";return this.$locale.baseText("settings.users.deleteUser",{interpolate:{user:s}})},enabled(){return!!(this.isPending||this.operation==="delete"&&this.deleteConfirmText===this.$locale.baseText("settings.users.deleteConfirmationText")||this.operation==="transfer"&&this.transferId)}},methods:{setOperation(s){this.operation=s,this.transferId=""},setConfirmText(s){this.deleteConfirmText=s},setTransferId(s){this.transferId=s},async onSubmit(){try{if(!this.enabled)return;this.loading=!0;const s={id:this.activeId};this.operation==="transfer"&&(s.transferId=this.transferId),await this.usersStore.deleteUser(s);let e="";if(this.transferId){const t=this.usersStore.getUserById(this.transferId);t&&(e=this.$locale.baseText("settings.users.transferredToUser",{interpolate:{user:t.fullName||""}}))}this.$showMessage({type:"success",title:this.$locale.baseText("settings.users.userDeleted"),message:e}),this.modalBus.emit("close")}catch(s){this.$showError(s,this.$locale.baseText("settings.users.userDeletedError"))}this.loading=!1}}}),Dw="_content_i27ti_1",Aw="_innerContent_i27ti_8",Pw="_optionInput_i27ti_12",Ow={content:Dw,innerContent:Aw,optionInput:Pw};var Mw=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,title:e.title,center:!0,width:"460px",eventBus:e.modalBus},on:{enter:e.onSubmit},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e.isPending?t("div",[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("settings.users.confirmUserDeletion")))])],1):t("div",{class:e.$style.content},[t("div",[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("settings.users.confirmDataHandlingAfterDeletion")))])],1),t("el-radio",{attrs:{value:e.operation,label:"transfer"},on:{change:()=>e.setOperation("transfer")}},[t("n8n-text",{attrs:{color:"text-dark"}},[e._v(e._s(e.$locale.baseText("settings.users.transferWorkflowsAndCredentials")))])],1),e.operation==="transfer"?t("div",{class:e.$style.optionInput},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("settings.users.userToTransferTo")}},[t("n8n-user-select",{attrs:{users:e.usersStore.allUsers,value:e.transferId,ignoreIds:e.ignoreIds,currentUserId:e.usersStore.currentUserId},on:{input:e.setTransferId}})],1)],1):e._e(),t("el-radio",{attrs:{value:e.operation,label:"delete"},on:{change:()=>e.setOperation("delete")}},[t("n8n-text",{attrs:{color:"text-dark"}},[e._v(e._s(e.$locale.baseText("settings.users.deleteWorkflowsAndCredentials")))])],1),e.operation==="delete"?t("div",{class:e.$style.optionInput,attrs:{"data-test-id":"delete-data-input"}},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("settings.users.deleteConfirmationMessage")}},[t("n8n-input",{attrs:{value:e.deleteConfirmText,placeholder:e.$locale.baseText("settings.users.deleteConfirmationText")},on:{input:e.setConfirmText}})],1)],1):e._e()],1)])]},proxy:!0},{key:"footer",fn:function(){return[t("n8n-button",{attrs:{loading:e.loading,disabled:!e.enabled,label:e.$locale.baseText("settings.users.delete"),float:"right"},on:{click:e.onSubmit}})]},proxy:!0}])})},Rw=[];const Co={$style:Ow};function Lw(s){for(var e in Co)this[e]=Co[e]}var Ww=p(Iw,Mw,Rw,!1,Lw,null,null,null);const Bw=Ww.exports,Uw=x(he).extend({name:"ExecutionTime",props:["startTime"],computed:{time(){if(!this.startTime)return"...";const s=this.nowTime-new Date(this.startTime).getTime();return this.displayTimer(s)}},data(){return{nowTime:-1,intervalTimer:null}},mounted(){this.setNow(),this.intervalTimer=setInterval(()=>{this.setNow()},1e3)},destroyed(){this.intervalTimer!==null&&clearInterval(this.intervalTimer)},methods:{setNow(){this.nowTime=new Date().getTime()}}});var Fw=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e._v(" "+e._s(e.time)+" ")])},Vw=[],zw=p(Uw,Fw,Vw,!1,null,null,null,null);const tr=zw.exports,sr=x(xe,re,D).extend({data(){return{updatingWorkflowActivation:!1}},computed:{...b(P,N,B)},methods:{async activateCurrentWorkflow(s){const e=this.workflowsStore.workflowId;return this.updateWorkflowActivation(e,!0,s)},async updateWorkflowActivation(s,e,t){this.updatingWorkflowActivation=!0;const n=this.workflowsStore.nodesIssuesExist;let o=s;if(!o||o===oe){if(!await this.saveCurrentWorkflow()){this.updatingWorkflowActivation=!1;return}o=this.workflowsStore.workflowId}const a=o===this.workflowsStore.workflowId,r=this.workflowsStore.activeWorkflows.includes(o),l={workflow_id:o,is_active:e,previous_status:r,ndv_input:t==="ndv"};this.$telemetry.track("User set workflow active status",l),this.$externalHooks().run("workflowActivate.updateWorkflowActivation",l);try{if(r&&e){this.$showMessage({title:this.$locale.baseText("workflowActivator.workflowIsActive"),type:"success"}),this.updatingWorkflowActivation=!1;return}if(a&&n&&e===!0){this.$showMessage({title:this.$locale.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title"),message:this.$locale.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.message"),type:"error"}),this.updatingWorkflowActivation=!1;return}await this.updateWorkflow({workflowId:o,active:e})}catch(h){const f=e===!0?"activated":"deactivated";this.$showError(h,this.$locale.baseText("workflowActivator.showError.title",{interpolate:{newStateName:f}})+":"),this.updatingWorkflowActivation=!1;return}const c=a?"workflow.activeChangeCurrent":"workflow.activeChange";this.$externalHooks().run(c,{workflowId:o,active:e}),this.$emit("workflowActiveChanged",{id:o,active:e}),this.updatingWorkflowActivation=!1,a&&(e&&window.localStorage.getItem(Ei)!=="true"?this.uiStore.openModal(Bt):await this.settingsStore.fetchPromptsData())}}}),jw=x(D,sr).extend({name:"WorkflowActivator",props:["workflowActive","workflowId"],computed:{...b(N,B),getStateIsDirty(){return this.uiStore.stateIsDirty},nodesIssuesExist(){return this.workflowsStore.nodesIssuesExist},isWorkflowActive(){return this.workflowsStore.activeWorkflows.includes(this.workflowId)},couldNotBeStarted(){return this.workflowActive===!0&&this.isWorkflowActive!==this.workflowActive},getActiveColor(){return this.couldNotBeStarted===!0?"#ff4949":"#13ce66"},isCurrentWorkflow(){return this.workflowsStore.workflowId===this.workflowId},disabled(){return!this.workflowId||this.isCurrentWorkflow?!this.workflowActive&&!this.containsTrigger:!1},containsTrigger(){return Ci(this.workflowsStore.workflowTriggerNodes).length>0}},methods:{async activeChanged(s){return this.updateWorkflowActivation(this.workflowId,s)},async displayActivationError(){let s;try{const e=await this.workflowsStore.getActivationError(this.workflowId);e===void 0?s=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataUndefined"):s=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined",{interpolate:{message:e.error.message}})}catch(e){s=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.catchBlock")}this.$showMessage({title:this.$locale.baseText("workflowActivator.showMessage.displayActivationError.title"),message:s,type:"warning",duration:0})}}}),Kw="_activeStatusText_nj9sv_1",Hw={activeStatusText:Kw};var Gw=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"workflow-activator"},[t("div",{class:e.$style.activeStatusText,attrs:{"data-test-id":"workflow-activator-status"}},[e.workflowActive?t("n8n-text",{attrs:{color:e.couldNotBeStarted?"danger":"success",size:"small",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflowActivator.active"))+" ")]):t("n8n-text",{attrs:{color:"text-base",size:"small",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflowActivator.inactive"))+" ")])],1),t("n8n-tooltip",{attrs:{disabled:!e.disabled,placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v(e._s(e.$locale.baseText("workflowActivator.thisWorkflowHasNoTriggerNodes")))])]},proxy:!0}])},[t("el-switch",{directives:[{name:"loading",rawName:"v-loading",value:e.updatingWorkflowActivation,expression:"updatingWorkflowActivation"}],attrs:{value:e.workflowActive,title:e.workflowActive?e.$locale.baseText("workflowActivator.deactivateWorkflow"):e.$locale.baseText("workflowActivator.activateWorkflow"),disabled:e.disabled||e.updatingWorkflowActivation,"active-color":e.getActiveColor,"inactive-color":"#8899AA","element-loading-spinner":"el-icon-loading","data-test-id":"workflow-activate-switch"},on:{change:e.activeChanged}})],1),e.couldNotBeStarted?t("div",{staticClass:"could-not-be-started"},[t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{innerHTML:e._s(e.$locale.baseText("workflowActivator.theWorkflowIsSetToBeActiveBut"))},on:{click:e.displayActivationError}})]},proxy:!0}],null,!1,2918672917)},[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"},on:{click:e.displayActivationError}})],1)],1):e._e()],1)},qw=[];const No={$style:Hw};function Yw(s){for(var e in No)this[e]=No[e]}var Xw=p(jw,Gw,qw,!1,Yw,"b69fa555",null,null);const Ks=Xw.exports;function Jw(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}var nr=Jw,Qw=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Zw=Qw,ey=Zw,ty=typeof self=="object"&&self&&self.Object===Object&&self,sy=ey||ty||Function("return this")(),or=sy,ny=or,oy=function(){return ny.Date.now()},ay=oy,iy=/\s/;function ry(s){for(var e=s.length;e--&&iy.test(s.charAt(e)););return e}var ly=ry,cy=ly,dy=/^\s+/;function uy(s){return s&&s.slice(0,cy(s)+1).replace(dy,"")}var hy=uy,py=or,fy=py.Symbol,ar=fy,Io=ar,ir=Object.prototype,my=ir.hasOwnProperty,gy=ir.toString,ft=Io?Io.toStringTag:void 0;function _y(s){var e=my.call(s,ft),t=s[ft];try{s[ft]=void 0;var n=!0}catch(a){}var o=gy.call(s);return n&&(e?s[ft]=t:delete s[ft]),o}var vy=_y,wy=Object.prototype,yy=wy.toString;function by(s){return yy.call(s)}var xy=by,Do=ar,Ty=vy,ky=xy,Sy="[object Null]",$y="[object Undefined]",Ao=Do?Do.toStringTag:void 0;function Ey(s){return s==null?s===void 0?$y:Sy:Ao&&Ao in Object(s)?Ty(s):ky(s)}var Cy=Ey;function Ny(s){return s!=null&&typeof s=="object"}var Iy=Ny,Dy=Cy,Ay=Iy,Py="[object Symbol]";function Oy(s){return typeof s=="symbol"||Ay(s)&&Dy(s)==Py}var My=Oy,Ry=hy,Po=nr,Ly=My,Oo=0/0,Wy=/^[-+]0x[0-9a-f]+$/i,By=/^0b[01]+$/i,Uy=/^0o[0-7]+$/i,Fy=parseInt;function Vy(s){if(typeof s=="number")return s;if(Ly(s))return Oo;if(Po(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=Po(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=Ry(s);var t=By.test(s);return t||Uy.test(s)?Fy(s.slice(2),t?2:8):Wy.test(s)?Oo:+s}var zy=Vy,jy=nr,gs=ay,Mo=zy,Ky="Expected a function",Hy=Math.max,Gy=Math.min;function qy(s,e,t){var n,o,a,i,r,l,c=0,h=!1,f=!1,u=!0;if(typeof s!="function")throw new TypeError(Ky);e=Mo(e)||0,jy(t)&&(h=!!t.leading,f="maxWait"in t,a=f?Hy(Mo(t.maxWait)||0,e):a,u="trailing"in t?!!t.trailing:u);function w($){var M=n,G=o;return n=o=void 0,c=$,i=s.apply(G,M),i}function g($){return c=$,r=setTimeout(E,e),h?w($):i}function v($){var M=$-l,G=$-c,ne=e-M;return f?Gy(ne,a-G):ne}function k($){var M=$-l,G=$-c;return l===void 0||M>=e||M<0||f&&G>=a}function E(){var $=gs();if(k($))return I($);r=setTimeout(E,v($))}function I($){return r=void 0,u&&n?w($):(n=o=void 0,i)}function V(){r!==void 0&&clearTimeout(r),c=0,n=l=o=r=void 0}function W(){return r===void 0?i:I(gs())}function O(){var $=gs(),M=k($);if(n=arguments,o=this,l=$,M){if(r===void 0)return g(l);if(f)return clearTimeout(r),r=setTimeout(E,e),w(l)}return r===void 0&&(r=setTimeout(E,e)),i}return O.cancel=V,O.flush=W,O}var Yy=qy;function Xy(){return Zh}function Jy(){return{async run(s,e){return Ni(s,Ii(),e)}}}const _s=Ke({customActions:{}}),rr=()=>{function s(a,i){_s.customActions[a]=i}function e(a){Ar(_s.customActions,a)}function t(a){const i=a.target;if(!(i instanceof Element)||i.tagName!=="A")return;const r=i.getAttribute("data-action");r&&typeof o.value[r]=="function"&&(a.preventDefault(),o.value[r]())}function n(){window.top?window.top.location.reload():window.location.reload()}const o=Y(()=>({reload:n,..._s.customActions}));return qe(()=>{const a=_t();window.addEventListener("click",t),a==null||a.proxy.$root.$on("registerGlobalLinkAction",s)}),ri(()=>{const a=_t();window.removeEventListener("click",t),a==null||a.proxy.$root.$off("registerGlobalLinkAction",s)}),{registerCustomAction:s,unregisterCustomAction:e}};function bt(){const s=Z().defaultLocale==="en";function e(t,n){if(s)return t;const o=J.shortNodeType(n);return J.headerText({key:`headers.${o}.displayName`,fallback:t})}return{i18n:J,localizeNodeName:e}}let Qy=class{constructor(){kt(this,"pageEventQueue");kt(this,"previousPath");kt(this,"userNodesPanelSession",{sessionId:"",data:{nodeFilter:"",resultsNodes:[],filterMode:"Regular"}});this.pageEventQueue=[],this.previousPath=""}get rudderStack(){return window.rudderanalytics}init(e,{instanceId:t,userId:n,versionCli:o}){if(!e.enabled||!e.config||this.rudderStack)return;const{config:{key:a,url:i}}=e,r=P(),l=Z(),h=r.logLevel==="debug"?{logLevel:"DEBUG"}:{};this.initRudderStack(a,i,{integrations:{All:!1},loadIntegration:!1,configUrl:"https://api-rs.n8n.io",...h}),Ou().init(this),this.identify(t,n,o),this.flushPageEvents(),this.track("Session started",{session_id:l.sessionId})}identify(e,t,n){const o={instance_id:e,version_cli:n};t?this.rudderStack.identify(`${e}#${t}`,o):this.rudderStack.reset()}track(e,t){if(!this.rudderStack)return;const n={...t,version_cli:Z().versionCli};this.rudderStack.track(e,n)}page(e){if(this.rudderStack){if(e.path===this.previousPath)return;this.previousPath=e.path;const t=e.name;let n={};e.meta&&e.meta.telemetry&&typeof e.meta.telemetry.getProperties=="function"&&(n=e.meta.telemetry.getProperties(e));const o=e.meta&&e.meta.telemetry&&e.meta.telemetry.pageCategory||"Editor";this.rudderStack.page(o,t,n)}else this.pageEventQueue.push({route:e})}flushPageEvents(){const e=this.pageEventQueue;this.pageEventQueue=[],e.forEach(({route:t})=>{this.page(t)})}trackNodesPanel(e,t={}){if(this.rudderStack)switch(t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,e){case"nodeView.createNodeActiveChanged":t.createNodeActive!==!1&&(this.resetNodesPanelSession(),t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,this.track("User opened nodes panel",t));break;case"nodeCreateList.destroyed":this.userNodesPanelSession.data.nodeFilter.length>0&&this.userNodesPanelSession.data.nodeFilter!==""&&this.track("User entered nodes panel search term",this.generateNodesPanelEvent());break;case"nodeCreateList.nodeFilterChanged":t.newValue.length===0&&this.userNodesPanelSession.data.nodeFilter.length>0&&this.track("User entered nodes panel search term",this.generateNodesPanelEvent()),t.newValue.length>(t.oldValue||"").length&&(this.userNodesPanelSession.data.nodeFilter=t.newValue,this.userNodesPanelSession.data.resultsNodes=(t.filteredNodes||[]).map(n=>n.key));break;case"nodeCreateList.onCategoryExpanded":t.is_subcategory=!1,t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,this.track("User viewed node category",t);break;case"nodeCreateList.onViewActions":t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,this.track("User viewed node actions",t);break;case"nodeCreateList.onActionsCustmAPIClicked":t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,this.track("User clicked custom API from node actions",t);break;case"nodeCreateList.addAction":t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,this.track("User added action",t);break;case"nodeCreateList.onSubcategorySelected":t.category_name=t.subcategory,t.is_subcategory=!0,t.nodes_panel_session_id=this.userNodesPanelSession.sessionId,delete t.selected,this.track("User viewed node category",t);break;case"nodeView.addNodeButton":this.track("User added node to workflow canvas",t);break;case"nodeView.addSticky":this.track("User inserted workflow note",t);break}}resetNodesPanelSession(){this.userNodesPanelSession.sessionId=`nodes_panel_session_${new Date().valueOf()}`,this.userNodesPanelSession.data={nodeFilter:"",resultsNodes:[],filterMode:"All"}}generateNodesPanelEvent(){return{search_string:this.userNodesPanelSession.data.nodeFilter,results_count:this.userNodesPanelSession.data.resultsNodes.length,filter_mode:this.userNodesPanelSession.data.filterMode,nodes_panel_session_id:this.userNodesPanelSession.sessionId}}initRudderStack(e,t,n){window.rudderanalytics=window.rudderanalytics||[],this.rudderStack.methods=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"],this.rudderStack.factory=o=>(...a)=>{const i=[o,...a];return this.rudderStack.push(i),this.rudderStack};for(const o of this.rudderStack.methods)this.rudderStack[o]=this.rudderStack.factory(o);this.rudderStack.loadJS=()=>{const o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://cdn-rs.n8n.io/v1/ra.min.js";const a=document.getElementsByTagName("script")[0];a&&a.parentNode&&a.parentNode.insertBefore(o,a)},this.rudderStack.loadJS(),this.rudderStack.load(e,t,n)}};const wt=new Qy;function Zy(s){Object.defineProperty(s,"$telemetry",{get(){return wt}}),Object.defineProperty(s.prototype,"$telemetry",{get(){return wt}})}function Hs(){return wt}const eb={dangerouslyUseHTMLString:!0,position:"bottom-right"};function lr(){const s=Hs(),e=B(),t=Jy(),{i18n:n}=bt();function o(l,c=!0){l={...eb,...l},l.message=l.message?Ut(l.message):l.message;const h=se.Notification(l);return l.duration,l.type==="error"&&c&&s.track("Instance FE emitted error",{error_title:l.title,error_message:l.message,workflow_id:e.workflowId}),h}function a(l){let c;if(l.closeOnClick){const h=l.onClick;l.onClick=()=>{c&&c.close(),h&&h()}}return c=o({title:l.title,message:l.message,onClick:l.onClick,onClose:l.onClose,duration:l.duration,customClass:l.customClass,type:l.type}),c}function i({description:l,node:c}){if(!l)return"";const h=l.length>500?`${l.slice(0,500)}...`:l;return`
				<br>
				<br>
				<details>
					<summary
						style="color: #ff6d5a; font-weight: bold; cursor: pointer;"
					>
						${n.baseText("showMessage.showDetails")}
					</summary>
					<p>${c.name}: ${h}</p>
				</details>
			`}function r(l,c,h){const f=l,u=h?`${h}<br/>`:"";o({title:c,message:`
					${u}
					<i>${f.message}</i>
					${i(f)}`,type:"error",duration:0},!1),t.run("showMessage.showError",{title:c,message:h,errorMessage:f.message}),s.track("Instance FE emitted error",{error_title:c,error_description:h,error_message:f.message,workflow_id:e.workflowId})}return{showMessage:o,showToast:a,showError:r}}function tb(s={default:"",desktop:""}){const e=N(),t=Ye(),{i18n:n}=bt();return{upgradeLinkUrl:Y(()=>{const a=e.contextBasedTranslationKeys.upgradeLinkUrl;let i=n.baseText(a);return a.endsWith(".upgradeLinkUrl")?i=`${t.viewPlansUrl}${s.default}`:a.endsWith(".desktop")&&(i=`${i}${s.desktop}`),i})}}const sb=C({__name:"ExecutionFilter",props:{workflows:null,popoverPlacement:{default:"bottom"}},emits:["filterChanged"],setup(s,{emit:e}){const t=s,n="yyyy-MM-dd HH:mm",o=P(),a=Ye(),i=N(),r=Hs(),l=Yy(e,500),c=H(!1),h=Y(()=>o.isEnterpriseFeatureEnabled(te.AdvancedExecutionFilters)),f=Y(()=>!1),u=()=>({status:"all",workflowId:"all",tags:[],startDate:"",endDate:"",metadata:[{key:"",value:""}]}),w=Ke(u()),g=Ke(Mu(w).reduce((O,$)=>(O[$]=Y({get(){return w[$]},set(M){w[$]=M,e("filterChanged",w)}}),O),{})),v=Y(()=>[{id:"all",name:J.baseText("executionsList.anyStatus")},{id:"error",name:J.baseText("executionsList.error")},{id:"canceled",name:J.baseText("executionsList.canceled")},{id:"running",name:J.baseText("executionsList.running")},{id:"success",name:J.baseText("executionsList.success")},{id:"waiting",name:J.baseText("executionsList.waiting")}]),k=Y(()=>{let O=0;return w.status!=="all"&&O++,w.workflowId!=="all"&&O++,Ge(w.tags)||O++,Ge(w.metadata)||O++,w.startDate&&O++,w.endDate&&O++,O}),E=(O,$,M)=>{w.metadata[O]||(w.metadata[O]={key:"",value:""}),w.metadata[O][$]=M,c.value||(r.track("User filtered executions with custom data"),c.value=!0),l("filterChanged",w)},I=O=>{w.tags=O,e("filterChanged",w)},V=()=>{Object.assign(w,u()),e("filterChanged",w)},W=()=>{i.goToUpgrade("custom-data-filter","upgrade-custom-data-filter")};return li(()=>{c.value=!1,e("filterChanged",w)}),{__sfc:!0,DATE_TIME_MASK:n,settingsStore:o,usageStore:a,uiStore:i,telemetry:r,props:t,emit:e,debouncedEmit:l,isCustomDataFilterTracked:c,isAdvancedExecutionFilterEnabled:h,showTags:f,getDefaultFilter:u,filter:w,vModel:g,statuses:v,countSelectedFilterProps:k,onFilterMetaChange:E,onTagsChange:I,onFilterReset:V,goToUpgrade:W,locale:J,TagsDropdown:ts}}}),nb="_filter_1wrlt_1",ob="_group_1wrlt_5",ab="_label_1wrlt_6",ib="_subGroup_1wrlt_12",rb="_dates_1wrlt_21",lb="_divider_1wrlt_29",cb="_resetBtn_1wrlt_34",db="_tooltipIcon_1wrlt_39",ub={filter:nb,group:ob,label:ab,subGroup:ib,dates:rb,divider:lb,resetBtn:cb,tooltipIcon:db};var hb=function(){var o,a,i;var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{class:e.$style.filter},[t("n8n-popover",{attrs:{trigger:"click",placement:e.popoverPlacement},scopedSlots:e._u([{key:"reference",fn:function(){return[t("n8n-button",{attrs:{icon:"filter",type:"tertiary",size:"medium",active:!!n.countSelectedFilterProps,"data-test-id":"executions-filter-button"}},[n.countSelectedFilterProps?t("n8n-badge",{staticClass:"mr-4xs",attrs:{theme:"primary","data-test-id":"execution-filter-badge"}},[e._v(e._s(n.countSelectedFilterProps))]):e._e(),e._v(" "+e._s(n.locale.baseText("executionsList.filters"))+" ")],1)]},proxy:!0}])},[t("div",{attrs:{"data-test-id":"execution-filter-form"}},[(o=e.workflows)!=null&&o.length?t("div",{class:e.$style.group},[t("label",{attrs:{for:"execution-filter-workflows"}},[e._v(e._s(n.locale.baseText("workflows.heading")))]),t("n8n-select",{attrs:{id:"execution-filter-workflows",placeholder:n.locale.baseText("executionsFilter.selectWorkflow"),size:"medium",filterable:"","data-test-id":"executions-filter-workflows-select"},model:{value:n.vModel.workflowId,callback:function(r){e.$set(n.vModel,"workflowId",r)},expression:"vModel.workflowId"}},[t("div",{staticClass:"ph-no-capture"},e._l(n.props.workflows,function(r,l){return t("n8n-option",{key:l,attrs:{label:r.name,value:r.id}})}),1)])],1):e._e(),n.showTags?t("div",{class:e.$style.group},[t("label",{attrs:{for:"execution-filter-tags"}},[e._v(e._s(n.locale.baseText("workflows.filters.tags")))]),t(n.TagsDropdown,{attrs:{id:"execution-filter-tags",placeholder:n.locale.baseText("workflowOpen.filterWorkflows"),currentTagIds:n.filter.tags,createEnabled:!1,"data-test-id":"executions-filter-tags-select"},on:{update:n.onTagsChange}})],1):e._e(),t("div",{class:e.$style.group},[t("label",{attrs:{for:"execution-filter-status"}},[e._v(e._s(n.locale.baseText("executionsList.status")))]),t("n8n-select",{attrs:{id:"execution-filter-status",placeholder:n.locale.baseText("executionsFilter.selectStatus"),size:"medium",filterable:"","data-test-id":"executions-filter-status-select"},model:{value:n.vModel.status,callback:function(r){e.$set(n.vModel,"status",r)},expression:"vModel.status"}},e._l(n.statuses,function(r,l){return t("n8n-option",{key:l,attrs:{label:r.name,value:r.id}})}),1)],1),t("div",{class:e.$style.group},[t("label",{attrs:{for:"execution-filter-start-date"}},[e._v(e._s(n.locale.baseText("executionsFilter.start")))]),t("div",{class:e.$style.dates},[t("el-date-picker",{attrs:{id:"execution-filter-start-date",type:"datetime",format:n.DATE_TIME_MASK,placeholder:n.locale.baseText("executionsFilter.startDate"),"data-test-id":"executions-filter-start-date-picker"},model:{value:n.vModel.startDate,callback:function(r){e.$set(n.vModel,"startDate",r)},expression:"vModel.startDate"}}),t("span",{class:e.$style.divider},[e._v("to")]),t("el-date-picker",{attrs:{id:"execution-filter-end-date",type:"datetime",format:n.DATE_TIME_MASK,placeholder:n.locale.baseText("executionsFilter.endDate"),"data-test-id":"executions-filter-end-date-picker"},model:{value:n.vModel.endDate,callback:function(r){e.$set(n.vModel,"endDate",r)},expression:"vModel.endDate"}})],1)]),t("div",{class:e.$style.group},[t("n8n-tooltip",{attrs:{placement:"right"},scopedSlots:e._u([{key:"content",fn:function(){return[t("i18n",{attrs:{tag:"span",path:"executionsFilter.customData.docsTooltip"},scopedSlots:e._u([{key:"link",fn:function(){return[t("a",{attrs:{target:"_blank",href:"https://docs.n8n.io/workflows/executions/custom-executions-data/"}},[e._v(" "+e._s(n.locale.baseText("executionsFilter.customData.docsTooltip.link"))+" ")])]},proxy:!0}])})]},proxy:!0}])},[t("span",{class:e.$style.label},[e._v(" "+e._s(n.locale.baseText("executionsFilter.savedData"))+" "),t("n8n-icon",{class:e.$style.tooltipIcon,attrs:{icon:"question-circle",size:"small"}})],1)]),t("div",{class:e.$style.subGroup},[t("label",{attrs:{for:"execution-filter-saved-data-key"}},[e._v(e._s(n.locale.baseText("executionsFilter.savedDataKey")))]),t("n8n-tooltip",{attrs:{disabled:n.isAdvancedExecutionFilterEnabled,placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("i18n",{attrs:{tag:"span",path:"executionsFilter.customData.inputTooltip"},scopedSlots:e._u([{key:"link",fn:function(){return[t("a",{attrs:{href:"#","data-test-id":"executions-filter-view-plans-link"},on:{click:function(r){return r.preventDefault(),n.goToUpgrade.apply(null,arguments)}}},[e._v(e._s(n.locale.baseText("executionsFilter.customData.inputTooltip.link")))])]},proxy:!0}])})]},proxy:!0}])},[t("n8n-input",{attrs:{id:"execution-filter-saved-data-key",name:"execution-filter-saved-data-key",type:"text",size:"medium",disabled:!n.isAdvancedExecutionFilterEnabled,placeholder:n.locale.baseText("executionsFilter.savedDataKeyPlaceholder"),value:(a=n.filter.metadata[0])==null?void 0:a.key,"data-test-id":"execution-filter-saved-data-key-input"},on:{input:function(r){return n.onFilterMetaChange(0,"key",r)}}})],1),t("label",{attrs:{for:"execution-filter-saved-data-value"}},[e._v(e._s(n.locale.baseText("executionsFilter.savedDataValue")))]),t("n8n-tooltip",{attrs:{disabled:n.isAdvancedExecutionFilterEnabled,placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("i18n",{attrs:{tag:"span",path:"executionsFilter.customData.inputTooltip"},scopedSlots:e._u([{key:"link",fn:function(){return[t("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),n.goToUpgrade.apply(null,arguments)}}},[e._v(e._s(n.locale.baseText("executionsFilter.customData.inputTooltip.link")))])]},proxy:!0}])})]},proxy:!0}])},[t("n8n-input",{attrs:{id:"execution-filter-saved-data-value",name:"execution-filter-saved-data-value",type:"text",size:"medium",disabled:!n.isAdvancedExecutionFilterEnabled,placeholder:n.locale.baseText("executionsFilter.savedDataValuePlaceholder"),value:(i=n.filter.metadata[0])==null?void 0:i.value,"data-test-id":"execution-filter-saved-data-value-input"},on:{input:function(r){return n.onFilterMetaChange(0,"value",r)}}})],1)],1)],1),n.countSelectedFilterProps?t("n8n-button",{class:e.$style.resetBtn,attrs:{size:"large",text:"","data-test-id":"executions-filter-reset-button"},on:{click:n.onFilterReset}},[e._v(" "+e._s(n.locale.baseText("executionsFilter.reset"))+" ")]):e._e()],1)])],1)},pb=[];const Ro={$style:ub};function fb(s){for(var e in Ro)this[e]=Ro[e]}var mb=p(sb,hb,pb,!1,fb,"58addfb0",null,null);const cr=mb.exports,ss=x(he).extend({computed:{...b(B),executionId(){return this.$route.params.executionId},workflowName(){return this.workflowsStore.workflowName},currentWorkflow(){return this.$route.params.name||this.workflowsStore.workflowId},executions(){return this.workflowsStore.currentWorkflowExecutions},activeExecution(){return this.workflowsStore.activeWorkflowExecution}},methods:{getExecutionUIDetails(s){const e={name:"unknown",startTime:this.formatDate(s.startedAt),label:"Status unknown",runningTime:""};if(s.status==="waiting"||s.waitTill?(e.name="waiting",e.label=this.$locale.baseText("executionsList.waiting")):s.status==="running"||s.status==="new"||s.stoppedAt===void 0?(e.name="running",e.label=this.$locale.baseText("executionsList.running")):s.status==="success"||s.finished?(e.name="success",e.label=this.$locale.baseText("executionsList.succeeded")):s.status==="failed"||s.status==="crashed"?(e.name="error",e.label=this.$locale.baseText("executionsList.error")):s.status==="canceled"&&(e.label=this.$locale.baseText("executionsList.canceled")),s.status||(s.status="unknown"),s.startedAt&&s.stoppedAt){const t=s.stoppedAt?new Date(s.stoppedAt).getTime():Date.now();e.runningTime=this.displayTimer(t-new Date(s.startedAt).getTime(),!0)}return e},formatDate(s){const{date:e,time:t}=this.convertToDisplayDate(s);return J.baseText("executionsList.started",{interpolate:{time:t,date:e}})}}}),dr=s=>{const e={};switch(s.status==="waiting"?e.waitTill=!0:s.status!=="all"&&(e.finished=s.status==="success"),s.workflowId!=="all"&&(e.workflowId=s.workflowId),Ge(s.tags)||(e.tags=s.tags),Ge(s.metadata)||(e.metadata=s.metadata),s.startDate&&(e.startedAfter=s.startDate),s.endDate&&(e.startedBefore=s.endDate),s.status){case"waiting":e.status=["waiting"];break;case"error":e.status=["failed","crashed"];break;case"success":e.status=["success"];break;case"running":e.status=["running"];break}return e},gb=x(xe,he,ss,D).extend({name:"ExecutionsList",components:{ExecutionTime:tr,WorkflowActivator:Ks,ExecutionFilter:cr},data(){return{isMounting:!0,finishedExecutions:[],finishedExecutionsCount:0,finishedExecutionsCountEstimated:!1,allVisibleSelected:!1,allExistingSelected:!1,autoRefresh:!0,autoRefreshInterval:void 0,filter:{},isDataLoading:!1,requestItemsPerRequest:10,selectedItems:{},stoppingExecutions:[],workflows:[]}},mounted(){at(`n8n - ${this.pageTitle}`)},async created(){await this.loadWorkflows(),this.handleAutoRefreshToggle(),this.$externalHooks().run("executionsList.openDialog"),this.$telemetry.track("User opened Executions log",{workflow_id:this.workflowsStore.workflowId})},beforeDestroy(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0)},computed:{...b(N,B),activeExecutions(){return this.workflowsStore.activeExecutions},combinedExecutions(){const s=[];return["all","running"].includes(this.filter.status)&&s.push(...this.activeExecutions),["all","error","success","waiting"].includes(this.filter.status)&&s.push(...this.finishedExecutions),s.filter(e=>this.filter.workflowId==="all"||e.workflowId===this.filter.workflowId)},numSelected(){return this.allExistingSelected?this.finishedExecutionsCount:Object.keys(this.selectedItems).length},workflowFilterCurrent(){const s={};return this.filter.workflowId!=="all"&&(s.workflowId=this.filter.workflowId),s},workflowFilterPast(){return dr(this.filter)},pageTitle(){return this.$locale.baseText("executionsList.workflowExecutions")}},methods:{closeDialog(){this.$emit("closeModal")},displayExecution(s){const e=this.$router.resolve({name:d.EXECUTION_PREVIEW,params:{name:s.workflowId,executionId:s.id}});window.open(e.href,"_blank")},handleAutoRefreshToggle(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0),this.autoRefresh&&(this.autoRefreshInterval=setInterval(()=>this.loadAutoRefresh(),4*1e3))},handleCheckAllExistingChange(){this.allExistingSelected=!this.allExistingSelected,this.allVisibleSelected=!this.allExistingSelected,this.handleCheckAllVisibleChange()},handleCheckAllVisibleChange(){this.allVisibleSelected=!this.allVisibleSelected,this.allVisibleSelected?this.selectAllVisibleExecutions():(this.allExistingSelected=!1,S.set(this,"selectedItems",{}))},handleCheckboxChanged(s){this.selectedItems[s]?S.delete(this.selectedItems,s):S.set(this.selectedItems,s,!0),this.allVisibleSelected=Object.keys(this.selectedItems).length===this.combinedExecutions.length,this.allExistingSelected=Object.keys(this.selectedItems).length===this.finishedExecutionsCount},async handleDeleteSelected(){if(!await this.confirmMessage(this.$locale.baseText("executionsList.confirmMessage.message",{interpolate:{numSelected:this.numSelected.toString()}}),this.$locale.baseText("executionsList.confirmMessage.headline"),"warning",this.$locale.baseText("executionsList.confirmMessage.confirmButtonText"),this.$locale.baseText("executionsList.confirmMessage.cancelButtonText")))return;this.isDataLoading=!0;const e={};this.allExistingSelected?e.deleteBefore=this.finishedExecutions[0].startedAt:e.ids=Object.keys(this.selectedItems),e.filters=this.workflowFilterPast;try{await this.workflowsStore.deleteExecutions(e)}catch(t){this.isDataLoading=!1,this.$showError(t,this.$locale.baseText("executionsList.showError.handleDeleteSelected.title"));return}this.isDataLoading=!1,this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.handleDeleteSelected.title"),type:"success"}),this.handleClearSelection(),this.refreshData()},handleClearSelection(){this.allVisibleSelected=!1,this.allExistingSelected=!1,S.set(this,"selectedItems",{})},async onFilterChanged(s){this.filter=s,await this.refreshData(),this.handleClearSelection(),this.isMounting=!1},handleActionItemClick(s){if(["currentlySaved","original"].includes(s.command)){let e=!1;s.command==="currentlySaved"&&(e=!0),this.retryExecution(s.execution,e),this.$telemetry.track("User clicked retry execution button",{workflow_id:this.workflowsStore.workflowId,execution_id:s.execution.id,retry_type:e?"current":"original"})}s.command==="delete"&&this.deleteExecution(s.execution)},getWorkflowName(s){var e;return(e=this.workflows.find(t=>t.id===s))==null?void 0:e.name},async loadActiveExecutions(){const s=Ge(this.workflowFilterCurrent.metadata)?await this.workflowsStore.getCurrentExecutions(this.workflowFilterCurrent):[];for(const e of s)e.workflowId&&!e.workflowName&&(e.workflowName=this.getWorkflowName(e.workflowId));this.workflowsStore.activeExecutions=s,this.workflowsStore.addToCurrentExecutions(s)},async loadAutoRefresh(){const s=this.workflowFilterPast,e=[this.workflowsStore.getPastExecutions(s,this.requestItemsPerRequest)];Ge(s.metadata)&&e.push(this.workflowsStore.getCurrentExecutions({}));const t=await Promise.all(e);for(const l of t[1])l.workflowId!==void 0&&l.workflowName===void 0&&(l.workflowName=this.getWorkflowName(l.workflowId));this.workflowsStore.activeExecutions=t[1];const n=[...this.finishedExecutions],o=n.map(l=>parseInt(l.id,10));let a=0;const i=[];for(let l=t[0].results.length-1;l>=0;l--){const c=t[0].results[l],h=parseInt(c.id,10);if(a!==0&&!isNaN(h)&&h-a>1){const w=Hi(a+1,h);i.push(...w)}a=parseInt(c.id,10)||0;const f=o.indexOf(h);if(f!==-1){n[f].finished===!1&&c.finished===!0&&(n[f]=c);continue}let u;for(u=n.length-1;u>=0;u--)if(h<parseInt(n[u].id,10)){n.splice(u+1,0,c);break}u===-1&&n.unshift(c)}const r=n.filter(l=>!i.includes(parseInt(l.id,10))&&a>=parseInt(l.id,10));this.finishedExecutionsCount=t[0].count,this.finishedExecutionsCountEstimated=t[0].estimated,S.set(this,"finishedExecutions",r),this.workflowsStore.addToCurrentExecutions(r),this.adjustSelectionAfterMoreItemsLoaded()},async loadFinishedExecutions(){if(this.filter.status==="running"){this.finishedExecutions=[],this.finishedExecutionsCount=0,this.finishedExecutionsCountEstimated=!1;return}const s=await this.workflowsStore.getPastExecutions(this.workflowFilterPast,this.requestItemsPerRequest);this.finishedExecutions=s.results,this.finishedExecutionsCount=s.count,this.finishedExecutionsCountEstimated=s.estimated,this.workflowsStore.addToCurrentExecutions(s.results),this.finishedExecutions.length===0&&this.handleClearSelection()},async loadMore(){if(this.filter.status==="running")return;this.isDataLoading=!0;const s=this.workflowFilterPast;let e;this.finishedExecutions.length!==0&&(e=this.finishedExecutions.slice(-1)[0].id);let t;try{t=await this.workflowsStore.getPastExecutions(s,this.requestItemsPerRequest,e)}catch(n){this.isDataLoading=!1,this.$showError(n,this.$locale.baseText("executionsList.showError.loadMore.title"));return}t.results=t.results.map(n=>({...n,mode:n.mode})),this.finishedExecutions.push(...t.results),this.finishedExecutionsCount=t.count,this.finishedExecutionsCountEstimated=t.estimated,this.isDataLoading=!1,this.workflowsStore.addToCurrentExecutions(t.results),this.adjustSelectionAfterMoreItemsLoaded()},async loadWorkflows(){try{const s=await this.workflowsStore.fetchAllWorkflows();s.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),s.unshift({id:"all",name:this.$locale.baseText("executionsList.allWorkflows")}),S.set(this,"workflows",s)}catch(s){this.$showError(s,this.$locale.baseText("executionsList.showError.loadWorkflows.title"))}},async retryExecution(s,e){this.isDataLoading=!0;try{await this.workflowsStore.retryExecution(s.id,e)?this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulTrue.title"),type:"success"}):this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulFalse.title"),type:"error"}),this.isDataLoading=!1}catch(t){this.$showError(t,this.$locale.baseText("executionsList.showError.retryExecution.title")),this.isDataLoading=!1}},async refreshData(){this.isDataLoading=!0;try{await Promise.all([this.loadActiveExecutions(),this.loadFinishedExecutions()])}catch(s){this.$showError(s,this.$locale.baseText("executionsList.showError.refreshData.title"))}this.isDataLoading=!1},getStatus(s){if(s.status)return s.status;{let e="unknown";return s.waitTill?e="waiting":s.stoppedAt===void 0?e="running":s.finished?e="success":s.stoppedAt!==null?e="failed":e="unknown",e}},getRowClass(s){return[this.$style.execRow,this.$style[this.getStatus(s)]].join(" ")},getStatusText(s){const e=this.getStatus(s);let t="";return e==="waiting"?t=this.$locale.baseText("executionsList.waiting"):e==="canceled"?t=this.$locale.baseText("executionsList.canceled"):e==="crashed"?t=this.$locale.baseText("executionsList.error"):e==="new"?t=this.$locale.baseText("executionsList.running"):e==="running"?t=this.$locale.baseText("executionsList.running"):e==="success"?t=this.$locale.baseText("executionsList.succeeded"):e==="failed"?t=this.$locale.baseText("executionsList.error"):t=this.$locale.baseText("executionsList.unknown"),t},getStatusTextTranslationPath(s){const e=this.getStatus(s);let t="";return e==="waiting"?t="executionsList.statusWaiting":e==="canceled"?t="executionsList.statusCanceled":["crashed","failed","success"].includes(e)?s.stoppedAt?t="executionsList.statusText":t="executionsList.statusTextWithoutTime":e==="new"||e==="running"?t="executionsList.statusRunning":t="executionsList.statusUnknown",t},getStatusTooltipText(s){const e=this.getStatus(s);let t="";return e==="waiting"&&this.isWaitTillIndefinite(s)&&(t=this.$locale.baseText("executionsList.statusTooltipText.theWorkflowIsWaitingIndefinitely")),t},async stopExecution(s){try{this.stoppingExecutions.push(s),await this.workflowsStore.stopCurrentExecution(s);const e=this.stoppingExecutions.indexOf(s);this.stoppingExecutions.splice(e,1),this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.stopExecution.title"),message:this.$locale.baseText("executionsList.showMessage.stopExecution.message",{interpolate:{activeExecutionId:s}}),type:"success"}),this.refreshData()}catch(e){this.$showError(e,this.$locale.baseText("executionsList.showError.stopExecution.title"))}},isExecutionRetriable(s){return s.stoppedAt!==void 0&&!s.finished&&s.retryOf===void 0&&s.retrySuccessId===void 0&&!s.waitTill},async deleteExecution(s){this.isDataLoading=!0;try{await this.workflowsStore.deleteExecutions({ids:[s.id]}),await this.refreshData(),this.allVisibleSelected&&(S.set(this,"selectedItems",{}),this.selectAllVisibleExecutions())}catch(e){this.$showError(e,this.$locale.baseText("executionsList.showError.handleDeleteSelected.title"))}this.isDataLoading=!0},isWaitTillIndefinite(s){return s.waitTill?new Date(s.waitTill).toISOString()===Di:!1},isRunning(s){return this.getStatus(s)==="running"},selectAllVisibleExecutions(){this.combinedExecutions.forEach(s=>{S.set(this.selectedItems,s.id,!0)})},adjustSelectionAfterMoreItemsLoaded(){this.allExistingSelected&&(this.allVisibleSelected=!0,this.selectAllVisibleExecutions())}}}),_b="_execListWrapper_fwtvl_1",vb="_execList_fwtvl_1",wb="_execListHeader_fwtvl_22",yb="_execListHeaderControls_fwtvl_29",bb="_selectionOptions_fwtvl_35",xb="_statusColumn_fwtvl_53",Tb="_spinner_fwtvl_58",kb="_status_fwtvl_53",Sb="_crashed_fwtvl_68",$b="_failed_fwtvl_68",Eb="_waiting_fwtvl_71",Cb="_success_fwtvl_74",Nb="_running_fwtvl_77",Ib="_unknown_fwtvl_80",Db="_buttonCell_fwtvl_84",Ab="_execRow_fwtvl_91",Pb="_execTable_fwtvl_95",Ob="_loadMore_fwtvl_178",Mb="_loadedAll_fwtvl_184",Rb="_actions_fwtvl_190",Lb="_deleteOnly_fwtvl_190",Wb="_retryAction_fwtvl_194",Bb="_deleteAction_fwtvl_194",Ub="_selectAll_fwtvl_198",Fb="_filterLoader_fwtvl_204",Vb="_tableLoader_fwtvl_209",zb={execListWrapper:_b,execList:vb,execListHeader:wb,execListHeaderControls:yb,selectionOptions:bb,statusColumn:xb,spinner:Tb,status:kb,crashed:Sb,failed:$b,waiting:Eb,success:Cb,new:"_new_fwtvl_77",running:Nb,unknown:Ib,buttonCell:Db,execRow:Ab,execTable:Pb,loadMore:Ob,loadedAll:Mb,actions:Rb,deleteOnly:Lb,retryAction:Wb,deleteAction:Bb,selectAll:Ub,filterLoader:Fb,tableLoader:Vb};var jb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.execListWrapper},[t("div",{class:e.$style.execList},[t("div",{class:e.$style.execListHeader},[t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(e._s(this.pageTitle))]),t("div",{class:e.$style.execListHeaderControls},[e.isMounting?t("n8n-loading",{class:e.$style.filterLoader,attrs:{variant:"custom"}}):t("el-checkbox",{staticClass:"mr-xl",attrs:{"data-test-id":"execution-auto-refresh-checkbox"},on:{change:e.handleAutoRefreshToggle},model:{value:e.autoRefresh,callback:function(n){e.autoRefresh=n},expression:"autoRefresh"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.autoRefresh"))+" ")]),t("execution-filter",{directives:[{name:"show",rawName:"v-show",value:!e.isMounting,expression:"!isMounting"}],attrs:{workflows:e.workflows},on:{filterChanged:e.onFilterChanged}})],1)],1),e.allVisibleSelected&&e.finishedExecutionsCount>0?t("el-checkbox",{class:e.$style.selectAll,attrs:{label:e.$locale.baseText("executionsList.selectAll",{adjustToNumber:e.finishedExecutionsCount,interpolate:{executionNum:e.finishedExecutionsCount}}),value:e.allExistingSelected,"data-test-id":"select-all-executions-checkbox"},on:{change:e.handleCheckAllExistingChange}}):e._e(),e.isMounting?t("div",[t("n8n-loading",{class:e.$style.tableLoader,attrs:{variant:"custom"}}),t("n8n-loading",{class:e.$style.tableLoader,attrs:{variant:"custom"}}),t("n8n-loading",{class:e.$style.tableLoader,attrs:{variant:"custom"}})],1):t("table",{class:e.$style.execTable},[t("thead",[t("tr",[t("th",[t("el-checkbox",{attrs:{value:e.allVisibleSelected,disabled:e.finishedExecutionsCount<1,label:"","data-test-id":"select-visible-executions-checkbox"},on:{change:e.handleCheckAllVisibleChange}})],1),t("th",[e._v(e._s(e.$locale.baseText("executionsList.name")))]),t("th",[e._v(e._s(e.$locale.baseText("executionsList.startedAt")))]),t("th",[e._v(e._s(e.$locale.baseText("executionsList.status")))]),t("th",[e._v(e._s(e.$locale.baseText("executionsList.id")))]),t("th"),t("th"),t("th"),t("th")])]),t("tbody",e._l(e.combinedExecutions,function(n){return t("tr",{key:n.id,class:e.getRowClass(n)},[t("td",[n.stoppedAt!==void 0&&n.id?t("el-checkbox",{attrs:{value:e.selectedItems[n.id]||e.allExistingSelected,label:"","data-test-id":"select-execution-checkbox"},on:{change:function(o){return e.handleCheckboxChanged(n.id)}}}):e._e()],1),t("td",[t("span",{staticClass:"ph-no-capture"},[e._v(e._s(n.workflowName||e.$locale.baseText("executionsList.unsavedWorkflow")))])]),t("td",[t("span",[e._v(e._s(e.formatDate(n.startedAt)))])]),t("td",[t("div",{class:e.$style.statusColumn},[e.isRunning(n)?t("span",{class:e.$style.spinner},[t("font-awesome-icon",{attrs:{icon:"spinner",spin:""}})],1):e._e(),e.isWaitTillIndefinite(n)?t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",[e._v(e._s(e.getStatusTooltipText(n)))])]},proxy:!0}],null,!0)},[t("span",{class:e.$style.status},[e._v(e._s(e.getStatusText(n)))])]):t("i18n",{attrs:{path:e.getStatusTextTranslationPath(n)},scopedSlots:e._u([{key:"status",fn:function(){return[t("span",{class:e.$style.status},[e._v(e._s(e.getStatusText(n)))])]},proxy:!0},{key:"time",fn:function(){return[n.waitTill?t("span",[e._v(e._s(e.formatDate(n.waitTill)))]):n.stoppedAt!==null&&n.stoppedAt!==void 0?t("span",[e._v(" "+e._s(e.displayTimer(new Date(n.stoppedAt).getTime()-new Date(n.startedAt).getTime(),!0))+" ")]):t("execution-time",{attrs:{"start-time":n.startedAt}})]},proxy:!0}],null,!0)})],1)]),t("td",[n.id?t("span",[e._v("#"+e._s(n.id))]):e._e(),n.retryOf!==void 0?t("span",[t("br"),t("small",[e._v(" ("+e._s(e.$locale.baseText("executionsList.retryOf"))+" #"+e._s(n.retryOf)+") ")])]):n.retrySuccessId!==void 0?t("span",[t("br"),t("small",[e._v(" ("+e._s(e.$locale.baseText("executionsList.successRetry"))+" #"+e._s(n.retrySuccessId)+") ")])]):e._e()]),t("td",[n.mode==="manual"?t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",[e._v(e._s(e.$locale.baseText("executionsList.test")))])]},proxy:!0}],null,!0)},[t("font-awesome-icon",{attrs:{icon:"flask"}})],1):e._e()],1),t("td",[t("div",{class:e.$style.buttonCell},[n.stoppedAt!==void 0&&n.id?t("n8n-button",{attrs:{size:"small",outline:"",label:e.$locale.baseText("executionsList.view")},on:{click:function(o){return o.stopPropagation(),e.displayExecution(n)}}}):e._e()],1)]),t("td",[t("div",{class:e.$style.buttonCell},[n.stoppedAt===void 0||n.waitTill?t("n8n-button",{attrs:{size:"small",outline:"",label:e.$locale.baseText("executionsList.stop"),loading:e.stoppingExecutions.includes(n.id)},on:{click:function(o){return o.stopPropagation(),e.stopExecution(n.id)}}}):e._e()],1)]),t("td",[e.isRunning(n)?e._e():t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleActionItemClick},scopedSlots:e._u([{key:"dropdown",fn:function(){return[t("el-dropdown-menu",{class:{[e.$style.actions]:!0,[e.$style.deleteOnly]:!e.isExecutionRetriable(n)}},[e.isExecutionRetriable(n)?t("el-dropdown-item",{class:e.$style.retryAction,attrs:{command:{command:"currentlySaved",execution:n}}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow"))+" ")]):e._e(),e.isExecutionRetriable(n)?t("el-dropdown-item",{class:e.$style.retryAction,attrs:{command:{command:"original",execution:n}}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithOriginalWorkflow"))+" ")]):e._e(),t("el-dropdown-item",{class:e.$style.deleteAction,attrs:{command:{command:"delete",execution:n}}},[e._v(" "+e._s(e.$locale.baseText("generic.delete"))+" ")])],1)]},proxy:!0}],null,!0)},[t("span",{staticClass:"retry-button"},[t("n8n-icon-button",{attrs:{text:"",type:"tertiary",size:"mini",title:e.$locale.baseText("executionsList.retryExecution"),icon:"ellipsis-v"}})],1)])],1)])}),0)]),!e.combinedExecutions.length&&!e.isMounting&&!e.isDataLoading?t("div",{class:e.$style.loadedAll,attrs:{"data-test-id":"execution-list-empty"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.empty"))+" ")]):e.finishedExecutionsCount>e.finishedExecutions.length||e.finishedExecutionsCountEstimated?t("div",{class:e.$style.loadMore},[t("n8n-button",{attrs:{icon:"sync",title:e.$locale.baseText("executionsList.loadMore"),label:e.$locale.baseText("executionsList.loadMore"),loading:e.isDataLoading,"data-test-id":"load-more-button"},on:{click:function(n){return e.loadMore()}}})],1):!e.isMounting&&!e.isDataLoading?t("div",{class:e.$style.loadedAll,attrs:{"data-test-id":"execution-all-loaded"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.loadedAll"))+" ")]):e._e()],1),e.numSelected>0?t("div",{class:e.$style.selectionOptions,attrs:{"data-test-id":"selected-executions-info"}},[t("span",[e._v(" "+e._s(e.$locale.baseText("executionsList.selected",{adjustToNumber:e.numSelected,interpolate:{numSelected:e.numSelected}}))+" ")]),t("n8n-button",{attrs:{label:e.$locale.baseText("generic.delete"),type:"tertiary","data-test-id":"delete-selected-button"},on:{click:e.handleDeleteSelected}}),t("n8n-button",{attrs:{label:e.$locale.baseText("executionsList.clearSelection"),type:"tertiary","data-test-id":"clear-selection-button"},on:{click:e.handleClearSelection}})],1):e._e()])},Kb=[];const Lo={$style:zb};function Hb(s){for(var e in Lo)this[e]=Lo[e]}var Gb=p(gb,jb,Kb,!1,Hb,null,null,null);const ur=Gb.exports,qb=C({name:"ExecutionsModal",components:{Modal:ie,ExecutionsList:ur},data(){return{modalBus:q(),EXECUTIONS_MODAL_KEY:Ls}},methods:{onCloseModal(){this.modalBus.emit("close")}}});var Yb=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.EXECUTIONS_MODAL_KEY,width:"80%",eventBus:e.modalBus},scopedSlots:e._u([{key:"content",fn:function(){return[t("ExecutionsList",{on:{closeModal:e.onCloseModal}})]},proxy:!0}])})},Xb=[],Jb=p(qb,Yb,Xb,!1,null,null,null,null);const Qb=Jb.exports,Zb=C({name:"ActivationModal",components:{Modal:ie},props:["modalName"],data(){return{WORKFLOW_ACTIVE_MODAL_KEY:Bt,checked:!1,modalBus:q()}},methods:{async showExecutionsList(){const s=this.workflowsStore.activeWorkflowExecution,e=this.workflowsStore.workflowId;s?this.$router.push({name:d.EXECUTION_PREVIEW,params:{name:e,executionId:s.id}}).catch(()=>{}):this.$router.push({name:d.EXECUTION_HOME,params:{name:e}}).catch(()=>{}),this.uiStore.closeModal(Bt)},async showSettings(){this.uiStore.openModal(Pe)},handleCheckboxChange(s){this.checked=s,window.localStorage.setItem(Ei,s.toString())}},computed:{...b(le,N,B),triggerContent(){const s=Ci(this.workflowsStore.workflowTriggerNodes);if(!s.length)return"";if(s.length>1)return this.$locale.baseText("activationModal.yourTriggersWillNowFire");const e=s[0],t=this.nodeTypesStore.getNodeType(e.type,e.typeVersion);if(t){if(t.activationMessage)return t.activationMessage;const n=je(t);if(e.webhookId)return this.$locale.baseText("activationModal.yourWorkflowWillNowListenForEvents",{interpolate:{serviceName:n}});if(t.polling)return this.$locale.baseText("activationModal.yourWorkflowWillNowRegularlyCheck",{interpolate:{serviceName:n}})}return this.$locale.baseText("activationModal.yourTriggerWillNowFire")}}}),ex="_spaced_1fidk_1",tx="_footer_1fidk_5",sx={spaced:ex,footer:tx};var nx=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.WORKFLOW_ACTIVE_MODAL_KEY,title:e.$locale.baseText("activationModal.workflowActivated"),width:"460px"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("n8n-text",[e._v(e._s(e.triggerContent))])],1),t("div",{class:e.$style.spaced},[t("n8n-text",[t("n8n-text",{attrs:{bold:!0}},[e._v(" "+e._s(e.$locale.baseText("activationModal.theseExecutionsWillNotShowUp"))+" ")]),e._v(" "+e._s(e.$locale.baseText("activationModal.butYouCanSeeThem"))+" "),t("a",{on:{click:e.showExecutionsList}},[e._v(" "+e._s(e.$locale.baseText("activationModal.executionList"))+" ")]),e._v(" "+e._s(e.$locale.baseText("activationModal.ifYouChooseTo"))+" "),t("a",{on:{click:e.showSettings}},[e._v(e._s(e.$locale.baseText("activationModal.saveExecutions")))])],1)],1)]},proxy:!0},{key:"footer",fn:function({close:n}){return[t("div",{class:e.$style.footer},[t("el-checkbox",{attrs:{value:e.checked},on:{change:e.handleCheckboxChange}},[e._v(e._s(e.$locale.baseText("activationModal.dontShowAgain")))]),t("n8n-button",{attrs:{label:e.$locale.baseText("activationModal.gotIt")},on:{click:n}})],1)]}}])})},ox=[];const Wo={$style:sx};function ax(s){for(var e in Wo)this[e]=Wo[e]}var ix=p(Zb,nx,ox,!1,ax,null,null,null);const rx=ix.exports,lx=x(D).extend({name:"ImportCurlModal",components:{Modal:ie},data(){return{IMPORT_CURL_MODAL_KEY:ot,curlCommand:"",modalBus:q()}},computed:{...b(ce,N),node(){return this.ndvStore.activeNode}},methods:{closeDialog(){this.modalBus.emit("close")},onInput(s){this.curlCommand=s},async importCurlCommand(){const s=this.curlCommand;if(s!=="")try{const e=await this.uiStore.getCurlToJson(s),t=e["parameters.url"],n=Ru.find(o=>t.includes(`${o}://`));if(n)if(mn[n]){const o=mn[n];this.showProtocolErrorWithSupportedNode(n,o)}else this.showProtocolError(n);else{this.uiStore.setHttpNodeParameters({name:ot,parameters:JSON.stringify(e)}),this.closeDialog(),this.sendTelemetry();return}this.sendTelemetry({success:!1,invalidProtocol:!0,protocol:n})}catch(e){this.showInvalidcURLCommandError(),this.sendTelemetry({success:!1,invalidProtocol:!1})}finally{this.uiStore.setCurlCommand({name:ot,command:this.curlCommand})}},showProtocolErrorWithSupportedNode(s,e){this.$showToast({title:this.$locale.baseText("importParameter.showError.invalidProtocol1.title",{interpolate:{node:e}}),message:this.$locale.baseText("importParameter.showError.invalidProtocol.message",{interpolate:{protocol:s.toUpperCase()}}),type:"error",duration:0})},showProtocolError(s){this.$showToast({title:this.$locale.baseText("importParameter.showError.invalidProtocol2.title"),message:this.$locale.baseText("importParameter.showError.invalidProtocol.message",{interpolate:{protocol:s}}),type:"error",duration:0})},showInvalidcURLCommandError(){this.$showToast({title:this.$locale.baseText("importParameter.showError.invalidCurlCommand.title"),message:this.$locale.baseText("importParameter.showError.invalidCurlCommand.message"),type:"error",duration:0})},sendTelemetry(s={success:!0,invalidProtocol:!1,protocol:""}){this.$telemetry.track("User imported curl command",{success:s.success,invalidProtocol:s.invalidProtocol,protocol:s.protocol})}},mounted(){this.curlCommand=this.uiStore.getCurlCommand||"",setTimeout(()=>{this.$refs.input.focus()})}}),cx="_modalFooter_1czzg_1",dx="_notice_1czzg_7",ux="_container_1czzg_11",hx={modalFooter:cx,notice:dx,container:ux};var px=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"700px",title:e.$locale.baseText("importCurlModal.title"),eventBus:e.modalBus,name:e.IMPORT_CURL_MODAL_KEY,center:!0},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.container},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("importCurlModal.input.label"),color:"text-dark"}},[t("n8n-input",{ref:"input",attrs:{value:e.curlCommand,type:"textarea",rows:5,placeholder:e.$locale.baseText("importCurlModal.input.placeholder")},on:{input:e.onInput,focus:function(n){return n.target.select()}}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:e.$style.modalFooter},[t("n8n-notice",{class:e.$style.notice,attrs:{content:e.$locale.baseText("ImportCurlModal.notice.content")}}),t("div",[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("importCurlModal.button.label")},on:{click:e.importCurlCommand}})],1)],1)]},proxy:!0}])})},fx=[];const Bo={$style:hx};function mx(s){for(var e in Bo)this[e]=Bo[e]}var gx=p(lx,px,fx,!1,mx,null,null,null);const _x=gx.exports,vx=x(D).extend({name:"workflow-share-modal",components:{Modal:ie},props:{data:{type:Object,default:()=>({})}},data(){const s=B(),e=this.data.id===oe?s.workflow:s.workflowsById[this.data.id];return{WORKFLOW_SHARE_MODAL_KEY:qt,loading:!0,modalBus:q(),sharedWith:[...e.sharedWith||[]],EnterpriseEditionFeature:te}},computed:{...b(P,N,z,Ye,B,Gt),isDefaultUser(){return this.usersStore.isDefaultUser},isSharingEnabled(){return this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)},fallbackLinkUrl(){return`${this.$locale.baseText(this.uiStore.contextBasedTranslationKeys.upgradeLinkUrl)}&utm_campaign=upgrade-workflow-sharing`},modalTitle(){return this.$locale.baseText(this.isSharingEnabled?this.uiStore.contextBasedTranslationKeys.workflows.sharing.title:this.uiStore.contextBasedTranslationKeys.workflows.sharing.unavailable.title,{interpolate:{name:this.workflow.name}})},usersList(){return this.usersStore.allUsers.filter(s=>{var n;const e=s.id===((n=this.usersStore.currentUser)==null?void 0:n.id),t=(this.sharedWith||[]).find(o=>o.id===s.id);return!e&&!t})},sharedWithList(){return[{...this.workflow&&this.workflow.ownedBy?this.workflow.ownedBy:this.usersStore.currentUser,isOwner:!0}].concat(this.sharedWith||[])},workflow(){return this.data.id===oe?this.workflowsStore.workflow:this.workflowsStore.workflowsById[this.data.id]},currentUser(){return this.usersStore.currentUser},workflowPermissions(){return Kt(this.usersStore.currentUser,this.workflow)},workflowOwnerName(){return this.workflowsEEStore.getWorkflowOwnerName(`${this.workflow.id}`)},isDirty(){const s=this.workflow.sharedWith||[];return this.sharedWith.length!==s.length||this.sharedWith.some(e=>!s.find(t=>e.id===t.id))}},methods:{async onSave(){var e;if(this.loading)return;this.loading=!0;const s=async()=>new Promise(t=>{this.workflow.id===oe?Es.emit("saveWorkflow",()=>{t(this.workflow.id)}):t(this.workflow.id)});try{const t=this.sharedWith.filter(a=>{var i;return!((i=this.workflow.sharedWith)!=null&&i.find(r=>a.id===r.id))}),n=((e=this.workflow.sharedWith)==null?void 0:e.filter(a=>!this.sharedWith.find(i=>i.id===a.id)))||[],o=await s();await this.workflowsEEStore.saveWorkflowSharedWith({workflowId:o,sharedWith:this.sharedWith}),this.trackTelemetry({user_ids_sharees_added:t.map(a=>a.id),sharees_removed:n.length}),this.$showMessage({title:this.$locale.baseText("workflows.shareModal.onSave.success.title"),type:"success"})}catch(t){this.$showError(t,this.$locale.baseText("workflows.shareModal.onSave.error.title"))}finally{this.modalBus.emit("close"),this.loading=!1}},async onAddSharee(s){const{id:e,firstName:t,lastName:n,email:o}=this.usersStore.getUserById(s),a={id:e,firstName:t,lastName:n,email:o};this.sharedWith=this.sharedWith.concat(a),this.trackTelemetry({user_id_sharee:s})},async onRemoveSharee(s){const e=this.usersStore.getUserById(s),t=!(this.workflow.sharedWith||[]).find(i=>i.id===s),n=(this.workflow.usedCredentials||[]).reduce((i,r)=>{if(!r.id||!r.ownedBy||!r.sharedWith||!this.workflow.sharedWith)return i;let l=!1;const c=r.ownedBy.id===e.id,h=!!r.sharedWith.find(f=>f.id===e.id);return c?l=!r.sharedWith.some(f=>this.workflow.sharedWith.find(u=>u.id===f.id)):h&&(l=!r.sharedWith.some(f=>this.workflow.sharedWith.find(u=>u.id===f.id))&&!this.workflow.sharedWith.find(f=>f.id===r.ownedBy.id)),i[r.id]=l,i},{}),o=Object.values(n).some(i=>i);let a=!0;!t&&o&&(a=await this.confirmMessage(this.$locale.baseText("workflows.shareModal.list.delete.confirm.lastUserWithAccessToCredentials.message",{interpolate:{name:e.fullName,workflow:this.workflow.name}}),this.$locale.baseText("workflows.shareModal.list.delete.confirm.title",{interpolate:{name:e.fullName}}),null,this.$locale.baseText("workflows.shareModal.list.delete.confirm.confirmButtonText"),this.$locale.baseText("workflows.shareModal.list.delete.confirm.cancelButtonText"))),a&&(this.sharedWith=this.sharedWith.filter(i=>i.id!==e.id),this.trackTelemetry({user_id_sharee:s,warning_orphan_credentials:o}))},onRoleAction(s,e){e==="remove"&&this.onRemoveSharee(s.id)},async onCloseModal(){return this.isDirty&&await this.confirmMessage(this.$locale.baseText("workflows.shareModal.saveBeforeClose.message"),this.$locale.baseText("workflows.shareModal.saveBeforeClose.title"),"warning",this.$locale.baseText("workflows.shareModal.saveBeforeClose.confirmButtonText"),this.$locale.baseText("workflows.shareModal.saveBeforeClose.cancelButtonText"))?this.onSave():!0},async loadUsers(){await this.usersStore.fetchUsers()},goToUsersSettings(){this.$router.push({name:d.USERS_SETTINGS}).catch(s=>{ci(s)||console.error(s)}),this.modalBus.emit("close")},trackTelemetry(s){var e;this.$telemetry.track("User selected sharee to remove",{workflow_id:this.workflow.id,user_id_sharer:(e=this.currentUser)==null?void 0:e.id,sub_view:this.$route.name===d.WORKFLOWS?"Workflows listing":"Workflow editor",...s})},goToUpgrade(){this.uiStore.goToUpgrade("workflow_sharing","upgrade-workflow-sharing")},async initialize(){var s;this.isSharingEnabled&&(await this.loadUsers(),this.workflow.id!==oe&&!((s=this.workflow.sharedWith)!=null&&s.length)&&await this.workflowsStore.fetchWorkflow(this.workflow.id)),this.loading=!1}},mounted(){this.initialize()},watch:{workflow(s){this.sharedWith=s.sharedWith}}}),wx="_container_1tvbf_1",yx="_actionButtons_1tvbf_5",bx="_roleSelect_1tvbf_11",xx="_roleSelectRemoveOption_1tvbf_15",Tx={container:wx,actionButtons:yx,roleSelect:bx,roleSelectRemoveOption:xx};var kx=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{width:"460px",title:e.modalTitle,eventBus:e.modalBus,name:e.WORKFLOW_SHARE_MODAL_KEY,center:!0,beforeClose:e.onCloseModal},scopedSlots:e._u([{key:"content",fn:function(){return[e.isSharingEnabled?e.isDefaultUser?t("div",{class:e.$style.container},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("workflows.shareModal.isDefaultUser.description"))+" ")])],1):t("div",{class:e.$style.container},[e.workflowPermissions.isOwner?e._e():t("n8n-info-tip",{staticClass:"mb-s",attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("workflows.shareModal.info.sharee",{interpolate:{workflowOwnerName:e.workflowOwnerName}}))+" ")]),t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]},scopedSlots:e._u([{key:"fallback",fn:function(){return[t("n8n-text",[t("i18n",{attrs:{path:e.uiStore.contextBasedTranslationKeys.workflows.sharing.unavailable.description,tag:"span"},scopedSlots:e._u([{key:"action",fn:function(){},proxy:!0}])})],1)]},proxy:!0}])},[e.workflowPermissions.updateSharing?t("n8n-user-select",{staticClass:"mb-s",attrs:{size:"large",users:e.usersList,currentUserId:e.currentUser.id,placeholder:e.$locale.baseText("workflows.shareModal.select.placeholder"),"data-test-id":"workflow-sharing-modal-users-select"},on:{input:e.onAddSharee},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("n8n-icon",{attrs:{icon:"search"}})]},proxy:!0}],null,!1,3648684143)}):e._e(),t("n8n-users-list",{attrs:{actions:[],users:e.sharedWithList,currentUserId:e.currentUser.id,"delete-label":e.$locale.baseText("workflows.shareModal.list.delete"),readonly:!e.workflowPermissions.updateSharing},scopedSlots:e._u([{key:"actions",fn:function({user:n}){return[t("n8n-select",{class:e.$style.roleSelect,attrs:{value:"editor",size:"small"},on:{change:function(o){return e.onRoleAction(n,o)}}},[t("n8n-option",{attrs:{label:e.$locale.baseText("workflows.roles.editor"),value:"editor"}}),t("n8n-option",{class:e.$style.roleSelectRemoveOption,attrs:{value:"remove"}},[t("n8n-text",{attrs:{color:"danger"}},[e._v(e._s(e.$locale.baseText("workflows.shareModal.list.delete")))])],1)],1)]}}])})],1)],1):t("div",{class:e.$style.container},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.workflows.sharing.unavailable.description.modal))+" ")])],1)]},proxy:!0},{key:"footer",fn:function(){return[e.isSharingEnabled?e.isDefaultUser?t("div",{class:e.$style.actionButtons},[t("n8n-button",{on:{click:e.goToUsersSettings}},[e._v(" "+e._s(e.$locale.baseText("workflows.shareModal.isDefaultUser.button"))+" ")])],1):t("enterprise-edition",{class:e.$style.actionButtons,attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("n8n-text",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"mr-xs",attrs:{color:"text-light",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("workflows.shareModal.changesHint"))+" ")]),t("n8n-button",{directives:[{name:"show",rawName:"v-show",value:e.workflowPermissions.updateSharing,expression:"workflowPermissions.updateSharing"}],attrs:{loading:e.loading,disabled:!e.isDirty,size:"medium","data-test-id":"workflow-sharing-modal-save-button"},on:{click:e.onSave}},[e._v(" "+e._s(e.$locale.baseText("workflows.shareModal.save"))+" ")])],1):t("div",{class:e.$style.actionButtons},[t("n8n-button",{on:{click:e.goToUpgrade}},[e._v(" "+e._s(e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.workflows.sharing.unavailable.button))+" ")])],1)]},proxy:!0}])})},Sx=[];const Uo={$style:Tx};function $x(s){for(var e in Uo)this[e]=Uo[e]}var Ex=p(vx,kx,Sx,!1,$x,null,null,null);const Cx=Ex.exports,Nx=C({__name:"UserActivationSurveyModal",setup(s){const t=z(),n=B(),o=H(!1),a=H(""),i=q(),r=H("");qe(async()=>{var I;const E=h();try{const{name:V}=await n.fetchWorkflow((I=E==null?void 0:E.firstSuccessfulWorkflowId)!=null?I:"");r.value=V,setTimeout(k,500)}catch(V){}});const l=()=>{wt.track("User responded to activation modal",{response:f()}),g(),i.emit("close")},c=()=>{i.emit("close")},h=()=>{var E;return(E=t.currentUser)==null?void 0:E.settings},f=()=>a.value.slice(0,300),u=async()=>{if(t.currentUser)try{await t.updateUserSettings({showUserActivationSurvey:!1})}catch(I){return v(),!1}return!0},w=()=>{o.value=!0},g=()=>{se.Notification.success({title:J.baseText("userActivationSurveyModal.sharedFeedback.success"),message:"",position:"bottom-right"})},v=()=>{se.Notification.error({title:J.baseText("userActivationSurveyModal.sharedFeedback.error"),message:"",position:"bottom-right"})},k=()=>{Gh({particleCount:200,spread:100,origin:{y:.6},zIndex:2050,colors:["5C4EC2","D7E6F1","FF9284","8D7FED","B8AFF9","FF6D5A"]})};return{__sfc:!0,FEEDBACK_MAX_LENGTH:300,userStore:t,workflowStore:n,hasAnyChanges:o,feedback:a,modalBus:i,workflowName:r,onShareFeedback:l,onSkip:c,getCurrentSettings:h,getFeedback:f,beforeClosingModal:u,onInput:w,showSharedFeedbackSuccess:g,showSharedFeedbackError:v,showConfetti:k,Modal:ie,USER_ACTIVATION_SURVEY_MODAL:Ai,locale:J}}}),Ix="_form_1g4n4_1",Dx="_description_1g4n4_5",Ax="_container_1g4n4_9",Px={form:Ix,description:Dx,container:Ax};var Ox=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.Modal,{attrs:{width:"500px",title:n.locale.baseText("userActivationSurveyModal.title"),eventBus:n.modalBus,name:n.USER_ACTIVATION_SURVEY_MODAL,center:!0,beforeClose:n.beforeClosingModal},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.container},[t("div",{class:e.$style.description},[t("i18n",{attrs:{path:"userActivationSurveyModal.description.workflowRan"},scopedSlots:e._u([{key:"workflow",fn:function(){return[t("n8n-text",{attrs:{bold:!0}},[e._v(" "+e._s(n.workflowName)+" ")])]},proxy:!0},{key:"ranSuccessfully",fn:function(){return[t("n8n-text",[e._v(" "+e._s(n.locale.baseText("userActivationSurveyModal.description.workflowRanSuccessfully"))+" ")])]},proxy:!0},{key:"savedTime",fn:function(){return[t("n8n-text",[e._v(" "+e._s(n.locale.baseText("userActivationSurveyModal.description.savedTime"))+" ")])]},proxy:!0}])})],1),t("div",{class:e.$style.form},[t("n8n-input-label",{attrs:{label:e.$locale.baseText("userActivationSurveyModal.form.label"),color:"text-dark"}},[t("n8n-input",{attrs:{type:"textarea",maxlength:n.FEEDBACK_MAX_LENGTH,rows:3,"data-test-id":"activation-feedback-input"},on:{input:n.onInput},model:{value:n.feedback,callback:function(o){n.feedback=o},expression:"feedback"}})],1)],1)])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:e.$style.modalFooter},[t("n8n-button",{attrs:{size:"large",type:"secondary","data-test-id":"skip-button",label:n.locale.baseText("userActivationSurveyModal.form.button.skip")},on:{click:n.onSkip}}),t("n8n-button",{attrs:{disabled:!n.hasAnyChanges,size:"large",float:"right",label:n.locale.baseText("userActivationSurveyModal.form.button.shareFeedback"),"data-test-id":"send-activation-feedback-button"},on:{click:n.onShareFeedback}})],1)]},proxy:!0}])})},Mx=[];const Fo={$style:Px};function Rx(s){for(var e in Fo)this[e]=Fo[e]}var Lx=p(Nx,Ox,Mx,!1,Rx,null,null,null);const Wx=Lx.exports;function Vo(s,e="n8n-nodes-base.stickyNote"){return{id:s.id,name:s.id,typeVersion:1,type:e,position:[0,0],credentials:{...s.credentials},parameters:{...s}}}const Bx=[{displayName:"Method",name:"method",noDataExpression:!0,type:"options",options:[{name:"GET",value:"GET"},{name:"POST",value:"POST"},{name:"PUT",value:"PUT"}],default:"POST",description:"The request method to use"},{displayName:"URL",name:"url",type:"string",noDataExpression:!0,default:"",placeholder:"http://example.com/index.html",description:"The URL to make the request to"},{displayName:"Generic Auth Type (OAuth not supported yet)",name:"genericAuthType",type:"credentialsSelect",default:"",credentialTypes:["has:genericAuth"],displayOptions:{show:{authentication:["genericCredentialType"]}}},{displayName:"Add Query Parameters",name:"sendQuery",type:"boolean",default:!1,noDataExpression:!0,description:"Whether the request has query params or not"},{displayName:"Specify Query Parameters",name:"specifyQuery",type:"options",displayOptions:{show:{sendQuery:[!0]}},options:[{name:"Using Fields Below",value:"keypair"},{name:"Using JSON",value:"json"}],default:"keypair"},{displayName:"Add Query Parameters",name:"queryParameters",type:"fixedCollection",displayOptions:{show:{sendQuery:[!0],specifyQuery:["keypair"]}},typeOptions:{multipleValues:!0},placeholder:"Add Parameter",default:{parameters:[{name:"",value:""}]},options:[{name:"parameters",displayName:"Parameter",values:[{displayName:"Name",name:"name",type:"string",default:""},{displayName:"Value",name:"value",type:"string",default:""}]}]},{displayName:"JSON",name:"jsonQuery",type:"json",displayOptions:{show:{sendQuery:[!0],specifyQuery:["json"]}},default:""},{displayName:"Add Headers",name:"sendHeaders",type:"boolean",default:!1,noDataExpression:!0,description:"Whether the request has headers or not"},{displayName:"Specify Headers",name:"specifyHeaders",type:"options",displayOptions:{show:{sendHeaders:[!0]}},options:[{name:"Using Fields Below",value:"keypair"},{name:"Using JSON",value:"json"}],default:"keypair"},{displayName:"Header Parameters",name:"headerParameters",type:"fixedCollection",displayOptions:{show:{sendHeaders:[!0],specifyHeaders:["keypair"]}},typeOptions:{multipleValues:!0},placeholder:"Add Parameter",default:{parameters:[{name:"",value:""}]},options:[{name:"parameters",displayName:"Parameter",values:[{displayName:"Name",name:"name",type:"string",default:""},{displayName:"Value",name:"value",type:"string",default:""}]}]},{displayName:"JSON",name:"jsonHeaders",type:"json",displayOptions:{show:{sendHeaders:[!0],specifyHeaders:["json"]}},default:""},{displayName:"Options",name:"options",type:"collection",placeholder:"Add Option",default:{},options:[{displayName:"Ignore SSL Issues",name:"allowUnauthorizedCerts",type:"boolean",noDataExpression:!0,default:!1,description:"Whether to ignore SSL certificate validation"},{displayName:"Array Format in Query Parameters",name:"queryParameterArrays",type:"options",displayOptions:{show:{"/sendQuery":[!0]}},options:[{name:"No Brackets",value:"repeat",description:"e.g. foo=bar&foo=qux"},{name:"Brackets Only",value:"brackets",description:"e.g. foo[]=bar&foo[]=qux"},{name:"Brackets with Indices",value:"indices",description:"e.g. foo[0]=bar&foo[1]=qux"}],default:"brackets"},{displayName:"Redirects",name:"redirect",placeholder:"Add Redirect",type:"fixedCollection",typeOptions:{multipleValues:!1},default:{redirect:{}},options:[{displayName:"Redirect",name:"redirect",values:[{displayName:"Follow Redirects",name:"followRedirects",type:"boolean",default:!1,noDataExpression:!0,description:"Whether to follow all redirects"},{displayName:"Max Redirects",name:"maxRedirects",type:"number",displayOptions:{show:{followRedirects:[!0]}},default:21,description:"Max number of redirects to follow"}]}]},{displayName:"Proxy",name:"proxy",description:"Add Proxy",type:"fixedCollection",typeOptions:{multipleValues:!1},default:{proxy:{}},options:[{displayName:"Proxy",name:"proxy",values:[{displayName:"Protocol",name:"protocol",type:"options",default:"https",options:[{name:"HTTPS",value:"https"},{name:"HTTP",value:"http"}]},{displayName:"Host",name:"host",type:"string",default:"127.0.0.1",description:"Proxy Host (without protocol or port)"},{displayName:"Port",name:"port",type:"number",default:9e3,description:"Proxy Port"}]}]},{displayName:"Timeout",name:"timeout",type:"number",typeOptions:{minValue:1},default:1e4,description:"Time in ms to wait for the server to send response headers (and start the response body) before aborting the request"}]}],Ux=[{displayName:"Host",name:"host",type:"string",default:"127.0.0.1",placeholder:"127.0.0.1",description:"The IP or host name to make the request to",noDataExpression:!0},{displayName:"Port",name:"port",type:"number",default:"514",placeholder:"514",description:"The port number to make the request to",noDataExpression:!0},{displayName:"Protocol",name:"protocol",type:"options",options:[{name:"TCP",value:"tcp"},{name:"UDP",value:"udp"}],default:"udp",description:"The protocol to use for the connection"},{displayName:"Facility",name:"facility",type:"options",options:[{name:"Kernel",value:0},{name:"User",value:1},{name:"System",value:3},{name:"Audit",value:13},{name:"Alert",value:14},{name:"Local0",value:16},{name:"Local1",value:17},{name:"Local2",value:18},{name:"Local3",value:19},{name:"Local4",value:20},{name:"Local5",value:21},{name:"Local6",value:22},{name:"Local7",value:23}],default:"16",description:"Syslog facility parameter"},{displayName:"App Name",name:"app_name",type:"string",default:"n8n",placeholder:"n8n",noDataExpression:!0,description:"Syslog app name parameter"}],Fx=[{displayName:"DSN",name:"dsn",type:"string",default:"https://",noDataExpression:!0,description:"Your Sentry DSN Client Key"}],Vx={name:"event-selection",props:{destinationId:{type:String,default:"defaultDestinationId"},readonly:Boolean},components:{Checkbox:se.Checkbox},data(){return{unchanged:!0}},computed:{...b(Yt),anonymizeAuditMessages(){var s;return(s=this.logStreamingStore.items[this.destinationId])==null?void 0:s.destination.anonymizeAuditMessages}},methods:{onInput(){this.$emit("input")},onCheckboxChecked(s,e){this.logStreamingStore.setSelectedInGroup(this.destinationId,s,e),this.$forceUpdate()},anonymizeAuditMessagesChanged(s){this.logStreamingStore.items[this.destinationId].destination.anonymizeAuditMessages=s,this.$emit("change",{name:"anonymizeAuditMessages",node:this.destinationId,value:s}),this.$forceUpdate()},groupLabelName(s){var e;return(e=this.$locale.baseText(`settings.log-streaming.eventGroup.${s}`))!=null?e:s},groupLabelInfo(s){const e=`settings.log-streaming.eventGroup.${s}.info`,t=this.$locale.baseText(e);if(!(t===e||t===""))return t}}},zx="_eventListCard_1mc0l_1",jx="_eventList_1mc0l_1",Kx="_eventListItem_1mc0l_13",Hx="_eventListItemDisabled_1mc0l_21",Gx="_listItem_1mc0l_28",qx={eventListCard:zx,eventList:jx,eventListItem:Kx,eventListItemDisabled:Hx,listItem:Gx};var Yx=function(){var n;var e=this,t=e._self._c;return t("div",e._l((n=e.logStreamingStore.items[e.destinationId])==null?void 0:n.eventGroups,function(o){var a;return t("div",{key:o.name,attrs:{shadow:"never"}},[t("checkbox",{attrs:{value:o.selected,indeterminate:!o.selected&&o.indeterminate,disabled:e.readonly},on:{input:e.onInput,change:function(i){return e.onCheckboxChecked(o.name,i)}}},[t("strong",[e._v(e._s(e.groupLabelName(o.name)))]),e.groupLabelInfo(o.name)?t("n8n-tooltip",{staticClass:"ml-xs",attrs:{placement:"top","popper-class":e.$style.tooltipPopper},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(e.groupLabelInfo(o.name))+" ")]},proxy:!0}],null,!0)},[t("n8n-icon",{attrs:{icon:"question-circle",size:"small"}})],1):e._e()],1),o.name==="n8n.audit"?t("checkbox",{attrs:{value:(a=e.logStreamingStore.items[e.destinationId])==null?void 0:a.destination.anonymizeAuditMessages,disabled:e.readonly},on:{input:e.onInput,change:e.anonymizeAuditMessagesChanged}},[e._v(" "+e._s(e.$locale.baseText("settings.log-streaming.tab.events.anonymize"))+" "),t("n8n-tooltip",{attrs:{placement:"top","popper-class":e.$style.tooltipPopper},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(e.$locale.baseText("settings.log-streaming.tab.events.anonymize.info"))+" ")]},proxy:!0}],null,!0)},[t("n8n-icon",{attrs:{icon:"question-circle",size:"small"}})],1)],1):e._e(),t("ul",{class:e.$style.eventList},e._l(o.children,function(i){return t("li",{key:i.name,class:`${e.$style.eventListItem} ${o.selected?e.$style.eventListItemDisabled:""}`},[t("checkbox",{attrs:{value:i.selected||o.selected,indeterminate:i.indeterminate,disabled:o.selected||e.readonly},on:{input:e.onInput,change:function(r){return e.onCheckboxChecked(i.name,r)}}},[e._v(" "+e._s(i.label)+" "),t("n8n-tooltip",{attrs:{placement:"top","popper-class":e.$style.tooltipPopper},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(i.name)+" ")]},proxy:!0}],null,!0)})],1)],1)}),0)],1)}),0)},Xx=[];const zo={$style:qx};function Jx(s){for(var e in zo)this[e]=zo[e]}var Qx=p(Vx,Yx,Xx,!1,Jx,null,null,null);const Zx=Qx.exports,eT=x(D).extend({name:"event-destination-settings-modal",props:{modalName:String,destination:{type:Object,default:()=>ae(ze)},isNew:Boolean,eventBus:{type:Object}},components:{Modal:ie,ParameterInputList:Pi,NodeCredentials:Oi,InlineNameEdit:Xi,SaveButton:zs,EventSelection:Zx,Checkbox:se.Checkbox},data(){return{unchanged:!this.isNew,activeTab:"settings",hasOnceBeenSaved:!this.isNew,isSaving:!1,isDeleting:!1,loading:!1,showRemoveConfirm:!1,typeSelectValue:"",typeSelectPlaceholder:"Destination Type",nodeParameters:ae(ze),webhookDescription:Bx,sentryDescription:Fx,syslogDescription:Ux,modalBus:q(),headerLabel:this.destination.label,testMessageSent:!1,testMessageResult:!1,isInstanceOwner:!1,LOG_STREAM_MODAL_KEY:vt}},computed:{...b(N,z,Yt,ce,B),typeSelectOptions(){const s=[];for(const e of Object.values(De))e!==De.abstract&&s.push({value:e,label:`settings.log-streaming.${e}`});return s},isTypeAbstract(){return this.nodeParameters.__type===De.abstract},isTypeWebhook(){return this.nodeParameters.__type===De.webhook},isTypeSyslog(){return this.nodeParameters.__type===De.syslog},isTypeSentry(){return this.nodeParameters.__type===De.sentry},node(){return Vo(this.nodeParameters)},typeLabelName(){return`settings.log-streaming.${this.nodeParameters.__type}`},sidebarItems(){const s=[{id:"settings",label:this.$locale.baseText("settings.log-streaming.tab.settings"),position:"top"}];return this.isTypeAbstract||s.push({id:"events",label:this.$locale.baseText("settings.log-streaming.tab.events"),position:"top"}),s},tabItems(){return[{label:this.$locale.baseText("settings.log-streaming.tab.settings"),value:"settings"},{label:this.$locale.baseText("settings.log-streaming.tab.events"),value:"events"}]}},mounted(){var s,e;this.isInstanceOwner=((e=(s=this.usersStore.currentUser)==null?void 0:s.globalRole)==null?void 0:e.name)==="owner",this.setupNode(Object.assign(ae(ze),this.destination)),this.workflowsStore.$onAction(({name:t,args:n})=>{if(t==="updateNodeProperties")for(const o of n)o.name===this.destination.id&&"credentials"in o.properties&&(this.unchanged=!1,this.nodeParameters.credentials=o.properties.credentials)})},methods:{onInput(){this.unchanged=!1,this.testMessageSent=!1},onTabSelect(s){this.activeTab=s},onLabelChange(s){this.onInput(),this.headerLabel=s,this.nodeParameters.label=s},setupNode(s){var e;this.workflowsStore.removeNode(this.node),this.ndvStore.activeNodeName=(e=s.id)!=null?e:"thisshouldnothappen",this.workflowsStore.addNode(Vo(s)),this.nodeParameters=s,this.logStreamingStore.items[this.destination.id].destination=s},onTypeSelectInput(s){this.typeSelectValue=s},onContinueAddClicked(){var e;let s;switch(this.typeSelectValue){case De.syslog:s=Object.assign(ae(cd),{id:this.destination.id});break;case De.sentry:s=Object.assign(ae(ld),{id:this.destination.id});break;case De.webhook:s=Object.assign(ae(rd),{id:this.destination.id});break}s&&(this.headerLabel=(e=s==null?void 0:s.label)!=null?e:this.headerLabel,this.setupNode(s))},valueChanged(s){this.unchanged=!1,this.testMessageSent=!1;const e=s.value,t=s.name.startsWith("parameters.")?s.name.split(".").slice(1).join("."):s.name,n=ae(this.nodeParameters),o=t.match(/(.*)\[(\d+)\]$/);if(s.value===void 0&&o!==null){const a=o[1],i=o[2],r=Ce(n,a);Array.isArray(r)&&(r.splice(parseInt(i,10),1),S.set(n,a,r))}else e===void 0?Ss(n,t):vs(n,t,e);this.nodeParameters=ae(n),this.workflowsStore.updateNodeProperties({name:this.node.name,properties:{parameters:this.nodeParameters,position:[0,0]}}),this.hasOnceBeenSaved&&this.logStreamingStore.updateDestination(this.nodeParameters)},async sendTestEvent(){this.testMessageResult=await this.logStreamingStore.sendTestMessage(this.nodeParameters),this.testMessageSent=!0},async removeThis(){await this.confirmMessage(this.$locale.baseText("settings.log-streaming.destinationDelete.message",{interpolate:{destinationName:this.destination.label}}),this.$locale.baseText("settings.log-streaming.destinationDelete.headline"),"warning",this.$locale.baseText("settings.log-streaming.destinationDelete.confirmButtonText"),this.$locale.baseText("settings.log-streaming.destinationDelete.cancelButtonText"))!==!1&&(this.eventBus.emit("remove",this.destination.id),this.uiStore.closeModal(vt),this.uiStore.stateIsDirty=!1)},onModalClose(){this.hasOnceBeenSaved||(this.workflowsStore.removeNode(this.node),this.logStreamingStore.removeDestination(this.nodeParameters.id)),this.ndvStore.activeNodeName=null,this.eventBus.emit("closing",this.destination.id),this.uiStore.stateIsDirty=!1},async saveDestination(){if(this.unchanged||!this.destination.id)return;await this.logStreamingStore.saveDestination(this.nodeParameters)===!0&&(this.hasOnceBeenSaved=!0,this.testMessageSent=!1,this.unchanged=!0,this.eventBus.emit("destinationWasSaved",this.destination.id),this.uiStore.stateIsDirty=!1)}}}),tT="_labelMargins_1ft0q_1",sT="_typeSelector_1ft0q_6",nT="_sidebarSwitches_1ft0q_12",oT="_tabbar_1ft0q_20",aT="_mainContent_1ft0q_24",iT="_sidebar_1ft0q_12",rT="_cardTitle_1ft0q_43",lT="_header_1ft0q_48",cT="_headerCreate_1ft0q_53",dT="_container_1ft0q_58",uT="_destinationInfo_1ft0q_63",hT="_destinationActions_1ft0q_71",pT={labelMargins:tT,typeSelector:sT,sidebarSwitches:nT,tabbar:oT,mainContent:aT,sidebar:iT,cardTitle:rT,header:lT,headerCreate:cT,container:dT,destinationInfo:uT,destinationActions:hT};var fT=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Modal",{attrs:{name:e.modalName,eventBus:e.modalBus,beforeClose:e.onModalClose,scrollable:!0,center:!0,loading:e.loading,minWidth:e.isTypeAbstract?"460px":"70%",maxWidth:e.isTypeAbstract?"460px":"70%",minHeight:e.isTypeAbstract?"160px":"650px",maxHeight:e.isTypeAbstract?"300px":"650px","data-test-id":"destination-modal"},scopedSlots:e._u([{key:"header",fn:function(){return[e.isTypeAbstract?[t("div",{class:e.$style.headerCreate},[t("span",[e._v("Add new destination")])])]:[t("div",{class:e.$style.header},[t("div",{class:e.$style.destinationInfo},[t("InlineNameEdit",{attrs:{name:e.headerLabel,subtitle:e.isTypeAbstract?"Select type":e.$locale.baseText(e.typeLabelName),readonly:e.isTypeAbstract,type:"Credential","data-test-id":"subtitle-showing-type"},on:{input:e.onLabelChange}})],1),t("div",{class:e.$style.destinationActions},[e.nodeParameters&&e.hasOnceBeenSaved&&e.unchanged?t("n8n-button",{attrs:{icon:e.testMessageSent?e.testMessageResult?"check":"exclamation-triangle":"",title:e.testMessageSent&&e.testMessageResult?"Event sent and returned OK":"Event returned with error",size:"medium",type:"tertiary",label:"Send Test-Event",disabled:!e.hasOnceBeenSaved||!e.unchanged,"data-test-id":"destination-test-button"},on:{click:e.sendTestEvent}}):e._e(),e.isInstanceOwner?[e.nodeParameters&&e.hasOnceBeenSaved?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("settings.log-streaming.delete"),icon:"trash",size:"medium",type:"tertiary",disabled:e.isSaving,loading:e.isDeleting,"data-test-id":"destination-delete-button"},on:{click:e.removeThis}}):e._e(),t("SaveButton",{attrs:{saved:e.unchanged&&e.hasOnceBeenSaved,disabled:e.isTypeAbstract||e.unchanged,savingLabel:e.$locale.baseText("settings.log-streaming.saving"),"data-test-id":"destination-save-button"},on:{click:e.saveDestination}})]:e._e()],2)]),t("hr")]]},proxy:!0},{key:"content",fn:function(){return[t("div",{class:e.$style.container},[e.isTypeAbstract?[t("n8n-input-label",{class:e.$style.typeSelector,attrs:{label:e.$locale.baseText("settings.log-streaming.selecttype"),tooltipText:e.$locale.baseText("settings.log-streaming.selecttypehint"),bold:!1,size:"medium",underline:!1}},[t("n8n-select",{ref:"typeSelectRef",attrs:{value:e.typeSelectValue,placeholder:e.typeSelectPlaceholder,"data-test-id":"select-destination-type",name:"name"},on:{change:e.onTypeSelectInput}},e._l(e.typeSelectOptions||[],function(n){return t("n8n-option",{key:n.value,attrs:{value:n.value,label:e.$locale.baseText(n.label)}})}),1),t("div",{staticClass:"mt-m text-right"},[t("n8n-button",{attrs:{size:"large","data-test-id":"select-destination-button",disabled:!e.typeSelectValue},on:{click:e.onContinueAddClicked}},[e._v(" "+e._s(e.$locale.baseText("settings.log-streaming.continue"))+" ")])],1)],1)]:[t("div",{class:e.$style.sidebar},[t("n8n-menu",{attrs:{mode:"tabs",items:e.sidebarItems},on:{select:e.onTabSelect}})],1),e.activeTab==="settings"?t("div",{ref:"content",class:e.$style.mainContent},[e.isTypeWebhook?[t("parameter-input-list",{attrs:{parameters:e.webhookDescription,hideDelete:!0,nodeValues:e.nodeParameters,isReadOnly:!e.isInstanceOwner,path:""},on:{valueChanged:e.valueChanged}})]:e.isTypeSyslog?[t("parameter-input-list",{attrs:{parameters:e.syslogDescription,hideDelete:!0,nodeValues:e.nodeParameters,isReadOnly:!e.isInstanceOwner,path:""},on:{valueChanged:e.valueChanged}})]:e.isTypeSentry?[t("parameter-input-list",{attrs:{parameters:e.sentryDescription,hideDelete:!0,nodeValues:e.nodeParameters,isReadOnly:!e.isInstanceOwner,path:""},on:{valueChanged:e.valueChanged}})]:e._e()],2):e._e(),e.activeTab==="events"?t("div",{class:e.$style.mainContent},[[t("div",{},[t("n8n-input-label",{staticClass:"mb-m mt-m",attrs:{label:e.$locale.baseText("settings.log-streaming.tab.events.title"),bold:!0,size:"medium",underline:!1}}),t("event-selection",{attrs:{destinationId:e.destination.id,readonly:!e.isInstanceOwner},on:{input:e.onInput,change:e.valueChanged}})],1)]],2):e._e()]],2)]},proxy:!0}])})},mT=[];const jo={$style:pT};function gT(s){for(var e in jo)this[e]=jo[e]}var _T=p(eT,fT,mT,!1,gT,null,null,null);const vT=_T.exports,wT=C({name:"Modals",components:{AboutModal:fp,AskAiModal:bp,ActivationModal:rx,CommunityPackageInstallModal:Vp,CommunityPackageManageConfirmModal:Dp,ContactPromptModal:sf,ChangePasswordModal:Gp,CredentialEdit:jg,CredentialsSelectModal:o_,DeleteUserModal:Bw,DuplicateWorkflowDialog:__,InviteUsersModal:Yg,ExecutionsModal:Qb,ModalRoot:x_,OnboardingCallSignupModal:I_,PersonalizationModal:B_,TagsManager:pv,UpdatesPanel:iw,ValueSurvey:Sw,WorkflowSettings:er,WorkflowShareModal:Cx,ImportCurlModal:_x,EventDestinationSettingsModal:vT,WorkflowSuccessModal:Wx},data:()=>({COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY:_i,COMMUNITY_PACKAGE_INSTALL_MODAL_KEY:Ns,CONTACT_PROMPT_MODAL_KEY:Lu,CREDENTIAL_EDIT_MODAL_KEY:ys,CREDENTIAL_SELECT_MODAL_KEY:Ps,ABOUT_MODAL_KEY:zt,ASK_AI_MODAL_KEY:gi,CHANGE_PASSWORD_MODAL_KEY:Is,DELETE_USER_MODAL_KEY:Wu,DUPLICATE_MODAL_KEY:Ws,ONBOARDING_CALL_SIGNUP_MODAL_KEY:Ht,PERSONALIZATION_MODAL_KEY:xi,INVITE_USER_MODAL_KEY:As,TAGS_MANAGER_MODAL_KEY:Ms,VERSIONS_MODAL_KEY:yt,WORKFLOW_SETTINGS_MODAL_KEY:Pe,WORKFLOW_SHARE_MODAL_KEY:qt,VALUE_SURVEY_MODAL_KEY:$i,EXECUTIONS_MODAL_KEY:Ls,WORKFLOW_ACTIVE_MODAL_KEY:Bt,IMPORT_CURL_MODAL_KEY:ot,LOG_STREAM_MODAL_KEY:vt,USER_ACTIVATION_SURVEY_MODAL:Ai})});var yT=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("ModalRoot",{attrs:{name:e.CONTACT_PROMPT_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n}){return[t("ContactPromptModal",{attrs:{modalName:n}})]}}])}),t("ModalRoot",{attrs:{name:e.CREDENTIAL_EDIT_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n,activeId:o,mode:a}){return[t("CredentialEdit",{attrs:{modalName:n,mode:a,activeId:o}})]}}])}),t("ModalRoot",{attrs:{name:e.ABOUT_MODAL_KEY}},[t("AboutModal")],1),t("ModalRoot",{attrs:{name:e.ASK_AI_MODAL_KEY}},[t("AskAiModal")],1),t("ModalRoot",{attrs:{name:e.CREDENTIAL_SELECT_MODAL_KEY}},[t("CredentialsSelectModal")],1),t("ModalRoot",{attrs:{name:e.DUPLICATE_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n,active:o,data:a}){return[t("DuplicateWorkflowDialog",{attrs:{data:a,isActive:o,modalName:n}})]}}])}),t("ModalRoot",{attrs:{name:e.PERSONALIZATION_MODAL_KEY}},[t("PersonalizationModal")],1),t("ModalRoot",{attrs:{name:e.TAGS_MANAGER_MODAL_KEY}},[t("TagsManager")],1),t("ModalRoot",{attrs:{name:e.VERSIONS_MODAL_KEY,keepAlive:!0}},[t("UpdatesPanel")],1),t("ModalRoot",{attrs:{name:e.VALUE_SURVEY_MODAL_KEY,keepAlive:!0},scopedSlots:e._u([{key:"default",fn:function({active:n}){return[t("ValueSurvey",{attrs:{isActive:n}})]}}])}),t("ModalRoot",{attrs:{name:e.WORKFLOW_SETTINGS_MODAL_KEY}},[t("WorkflowSettings")],1),t("ModalRoot",{attrs:{name:e.CHANGE_PASSWORD_MODAL_KEY}},[t("ChangePasswordModal")],1),t("ModalRoot",{attrs:{name:e.INVITE_USER_MODAL_KEY}},[t("InviteUsersModal")],1),t("ModalRoot",{attrs:{name:e.DELETE_USER_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n,activeId:o}){return[t("DeleteUserModal",{attrs:{modalName:n,activeId:o}})]}}])}),t("ModalRoot",{attrs:{name:e.EXECUTIONS_MODAL_KEY}},[t("ExecutionsModal")],1),t("ModalRoot",{attrs:{name:e.WORKFLOW_ACTIVE_MODAL_KEY}},[t("ActivationModal")],1),t("ModalRoot",{attrs:{name:e.WORKFLOW_SHARE_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n,active:o,data:a}){return[t("WorkflowShareModal",{attrs:{data:a,isActive:o,modalName:n}})]}}])}),t("ModalRoot",{attrs:{name:e.ONBOARDING_CALL_SIGNUP_MODAL_KEY}},[t("OnboardingCallSignupModal")],1),t("ModalRoot",{attrs:{name:e.COMMUNITY_PACKAGE_INSTALL_MODAL_KEY}},[t("CommunityPackageInstallModal")],1),t("ModalRoot",{attrs:{name:e.IMPORT_CURL_MODAL_KEY}},[t("ImportCurlModal")],1),t("ModalRoot",{attrs:{name:e.USER_ACTIVATION_SURVEY_MODAL}},[t("WorkflowSuccessModal")],1),t("ModalRoot",{attrs:{name:e.COMMUNITY_PACKAGE_CONFIRM_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n,activeId:o,mode:a}){return[t("CommunityPackageManageConfirmModal",{attrs:{modalName:n,activePackageName:o,mode:a}})]}}])}),t("ModalRoot",{attrs:{name:e.LOG_STREAM_MODAL_KEY},scopedSlots:e._u([{key:"default",fn:function({modalName:n,data:o}){return[t("EventDestinationSettingsModal",{attrs:{modalName:n,destination:o.destination,isNew:o.isNew,eventBus:o.eventBus}})]}}])})],1)},bT=[],xT=p(wT,yT,bT,!1,null,null,null,null);const TT=xT.exports,kT="_wrapper_jjxoi_1",ST="_spinner_jjxoi_8",$T={wrapper:kT,spinner:ST},ET={};var CT=function(){var e=this,t=e._self._c;return t("div",{class:e.$style.wrapper,attrs:{"data-test-id":"node-view-loader"}},[t("div",{class:e.$style.spinner},[t("n8n-spinner")],1)])},NT=[];const Ko={$style:$T};function IT(s){for(var e in Ko)this[e]=Ko[e]}var DT=p(ET,CT,NT,!1,IT,null,null,null);const AT=DT.exports,PT=x(xe).extend({name:"Telemetry",data(){return{isTelemetryInitialized:!1}},computed:{...b(Z,P,z),currentUserId(){return this.usersStore.currentUserId||""},isTelemetryEnabledOnRoute(){return this.$route.meta&&this.$route.meta.telemetry?!this.$route.meta.telemetry.disabled:!0},telemetry(){return this.settingsStore.telemetry},isTelemetryEnabled(){var s;return!!((s=this.telemetry)!=null&&s.enabled)}},mounted(){this.init()},methods:{init(){this.isTelemetryInitialized||!this.isTelemetryEnabledOnRoute||!this.isTelemetryEnabled||(this.$telemetry.init(this.telemetry,{instanceId:this.rootStore.instanceId,userId:this.currentUserId,versionCli:this.rootStore.versionCli}),this.isTelemetryInitialized=!0)}},watch:{telemetry(){this.init()},currentUserId(s){this.isTelemetryEnabled&&this.$telemetry.identify(this.rootStore.instanceId,s)},isTelemetryEnabledOnRoute(s){s&&this.init()}}});var OT=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("fragment")},MT=[],RT=p(PT,OT,MT,!1,null,null,null,null);const LT=RT.exports,Gs=C({methods:{canUserAccessRouteByName(s){const{route:e}=this.$router.resolve({name:s});return this.canUserAccessRoute(e)},canUserAccessCurrentRoute(){return this.canUserAccessRoute(this.$route)},canUserAccessRoute(s){const e=s.meta&&s.meta.permissions,n=z().currentUser;return e&&Bu(e,n)}}});function WT(){const s=H(new WeakMap);return{callDebounced:async(t,n,...o)=>{const{trailing:a,debounceTime:i}=n;let r=s.value.get(t);r===void 0&&(r=Ki(async(...l)=>{await t(...l)},i,a?{trailing:a}:{leading:!0}),s.value.set(t,r)),await r(...o)}}}function qs(){const s=H("ontouchstart"in window||navigator.maxTouchPoints>0),e=H(navigator.userAgent.toLowerCase()),t=H(e.value.includes("macintosh")||e.value.includes("ipad")||e.value.includes("iphone")||e.value.includes("ipod")),n=H(t.value?"Meta":"Control");function o(a){return s.value===!0&&a instanceof MouseEvent?!0:t.value?a.metaKey:a.ctrlKey}return{isTouchDevice:s.value,isMacOs:t.value,controlKeyCode:n.value,isCtrlKeyPressed:o}}const Ho=100;function BT(s){const e=_t(),t=e==null?void 0:e.proxy.$telemetry,n=ce(),o=Xt(),a=N(),{callDebounced:i}=WT(),{isCtrlKeyPressed:r}=qs(),l=H(n.activeNodeName!==null),c=async()=>i(async()=>{const g=o.popUndoableToUndo();if(g){if(g instanceof ut){o.bulkInProgress=!0;const v=g.commands,k=[];for(let E=v.length-1;E>=0;E--)await v[E].revert(),k.push(v[E].getReverseCommand());o.pushUndoableToRedo(new ut(k)),await Wt(),o.bulkInProgress=!1}g instanceof hs&&(await g.revert(),o.pushUndoableToRedo(g.getReverseCommand()),a.stateIsDirty=!0),f(g,"undo")}},{debounceTime:Ho}),h=async()=>i(async()=>{const g=o.popUndoableToRedo();if(g){if(g instanceof ut){o.bulkInProgress=!0;const v=g.commands,k=[];for(let E=v.length-1;E>=0;E--)await v[E].revert(),k.push(v[E].getReverseCommand());o.pushBulkCommandToUndo(new ut(k),!1),await Wt(),o.bulkInProgress=!1}g instanceof hs&&(await g.revert(),o.pushCommandToUndo(g.getReverseCommand(),!1),a.stateIsDirty=!0),f(g,"redo")}},{debounceTime:Ho});function f(g,v){g instanceof hs?t==null||t.track(`User hit ${v}`,{commands_length:1,commands:[g.name]}):g instanceof ut&&(t==null||t.track(`User hit ${v}`,{commands_length:g.commands.length,commands:g.commands.map(k=>k.name)}))}function u(g){if(l.value&&!g.shiftKey){const v=n.activeNode;v&&(t==null||t.track("User hit undo in NDV",{node_type:v.type}))}}function w(g){const v=gt(s);g.repeat||v!==ue.WORKFLOW||r(g)&&g.key.toLowerCase()==="z"&&(g.preventDefault(),l.value?g.shiftKey||u(g):g.shiftKey?h():c())}return qe(()=>{document.addEventListener("keydown",w)}),ri(()=>{document.removeEventListener("keydown",w)}),{undo:c,redo:h}}const UT=x(D).extend({computed:{...b(N,Rs)},methods:{async checkForNewVersions(){if(!this.versionsStore.areNotificationsEnabled)return;await this.versionsStore.fetchVersions();const e=this.versionsStore.currentVersion,t=this.versionsStore.nextVersions;if(e&&e.hasSecurityIssue&&t.length){const n=e.securityIssueFixVersion;let o="Please update to latest version.";n&&(o=`Please update to version ${n} or higher.`),o=`${o} <a class="primary-color">More info</a>`,this.$showToast({title:"Critical update available",message:o,onClick:()=>{this.uiStore.openModal(yt)},closeOnClick:!0,customClass:"clickable",type:"warning",duration:0})}}}});/*!
  * vue-router v3.6.5
  * (c) 2022 Evan You
  * @license MIT
  */function hr(){return _t().proxy.$root.$router}function pr(){var s=_t().proxy.$root;if(!s._$route){var e=Pr(!0).run(function(){return Or(Object.assign({},s.$router.currentRoute))});s._$route=e,s.$router.afterEach(function(t){Object.assign(e,t)})}return s._$route}const lt="/version-control",FT=async(s,e)=>Se(s,"POST",`${lt}/init-ssh`,e),VT=async s=>Se(s,"POST",`${lt}/init-repository`),zT=async(s,e)=>Se(s,"POST",`${lt}/push`,e),jT=async s=>Se(s,"GET",`${lt}/config`),KT=async(s,e)=>Se(s,"POST",`${lt}/preferences`,e),HT=async s=>Se(s,"GET",`${lt}/preferences`),Ys=mi("versionControl",()=>{const s=Z(),e=P(),t=Y(()=>e.isEnterpriseFeatureEnabled(te.VersionControl)),n=Ke({branchName:"",authorName:"",authorEmail:"",repositoryUrl:"",branchReadOnly:!1,branchColor:"#000000",connected:!1,publicKey:""}),o=Ke({branches:[],currentBranch:"",authorName:"",authorEmail:"",repositoryUrl:"",sshKey:"",commitMessage:"commit message"}),a=async u=>{o.sshKey=await FT(s.getRestApiContext,u)},i=async()=>{const{branches:u,currentBranch:w}=await VT(s.getRestApiContext);o.branches=u,o.currentBranch=w},r=async u=>(o.commitMessage=u.commitMessage,zT(s.getRestApiContext,{message:u.commitMessage})),l=async()=>{const{remoteRepository:u,name:w,email:g,currentBranch:v}=await jT(s.getRestApiContext);o.repositoryUrl=u,o.authorName=w,o.authorEmail=g,o.currentBranch=v},c=u=>{Object.assign(n,u)};return{isEnterpriseVersionControlEnabled:t,state:o,initSsh:a,initRepository:i,sync:r,getConfig:l,getPreferences:async()=>{const u=await HT(s.getRestApiContext);c(u)},setPreferences:c,savePreferences:async u=>{const w=await KT(s.getRestApiContext,u);c(w)}}}),GT=x(UT,D,Gs).extend({name:"App",components:{LoadingView:AT,Telemetry:LT,Modals:TT},setup(){return{...rr(),...BT(pr())}},computed:{...b(le,Z,P,Oe,N,z,Ys),defaultLocale(){return this.rootStore.defaultLocale}},data(){return{loading:!0}},methods:{async initSettings(){try{await this.settingsStore.getSettings()}catch(s){throw this.$showToast({title:this.$locale.baseText("startupError"),message:this.$locale.baseText("startupError.message"),type:"error",duration:0}),s}},async loginWithCookie(){try{await this.usersStore.loginWithCookie()}catch(s){}},async initTemplates(){if(this.settingsStore.isTemplatesEnabled)try{await this.settingsStore.testTemplatesEndpoint()}catch(s){}},logHiringBanner(){this.settingsStore.isHiringBannerEnabled&&this.$route.name!==d.DEMO&&console.log(Uu)},async initialize(){await this.initSettings(),await Promise.all([this.loginWithCookie(),this.initTemplates()])},trackPage(){this.uiStore.currentView=this.$route.name||"",this.$route&&this.$route.meta&&this.$route.meta.templatesEnabled?this.templatesStore.setSessionId():this.templatesStore.resetSessionId(),this.$telemetry.page(this.$route)},authenticate(){if(this.settingsStore.isUserManagementEnabled&&this.settingsStore.showSetupPage){if(this.$route.name===d.SETUP)return;this.$router.replace({name:d.SETUP});return}if(this.canUserAccessCurrentRoute())return;if(!this.usersStore.currentUser){const e=this.$route.query.redirect||encodeURIComponent(`${window.location.pathname}${window.location.search}`);this.$router.replace({name:d.SIGNIN,query:{redirect:e}});return}if(this.$route.name===d.SIGNIN&&typeof this.$route.query.redirect=="string"){const e=decodeURIComponent(this.$route.query.redirect);if(e.startsWith("/")){this.$router.replace(e);return}}this.$router.replace({name:d.HOMEPAGE})},redirectIfNecessary(){const s=this.$route.meta&&typeof this.$route.meta.getRedirect=="function"&&this.$route.meta.getRedirect();s&&this.$router.replace(s)},setTheme(){const s=window.localStorage.getItem(Fu);s&&window.document.body.classList.add(`theme-${s}`)}},async mounted(){this.setTheme(),await this.initialize(),this.logHiringBanner(),this.authenticate(),this.redirectIfNecessary(),this.checkForNewVersions(),this.loading=!1,this.trackPage(),this.$externalHooks().run("app.mount"),this.defaultLocale!=="en"&&await this.nodeTypesStore.getNodeTranslationHeaders(),this.versionControlStore.isEnterpriseVersionControlEnabled&&this.usersStore.isInstanceOwner&&this.versionControlStore.getPreferences()},watch:{$route(s){this.authenticate(),this.redirectIfNecessary(),this.trackPage()},defaultLocale(s){Vu(s)}}}),qT="_app_107sc_1",YT="_container_107sc_6",XT="_content_107sc_13",JT="_header_107sc_22",QT="_sidebar_107sc_27",ZT={app:qT,container:YT,content:XT,header:JT,sidebar:QT};var ek=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:[e.$style.app,"root-container"]},[e.loading?t("LoadingView"):t("div",{class:{[e.$style.container]:!0,[e.$style.sidebarCollapsed]:e.uiStore.sidebarMenuCollapsed},attrs:{id:"app"}},[t("div",{class:e.$style.header,attrs:{id:"header"}},[t("router-view",{attrs:{name:"header"}})],1),t("div",{class:e.$style.sidebar,attrs:{id:"sidebar"}},[t("router-view",{attrs:{name:"sidebar"}})],1),t("div",{class:e.$style.content,attrs:{id:"content"}},[t("keep-alive",{attrs:{include:"NodeView",max:1}},[t("router-view")],1)],1),t("Modals"),t("Telemetry")],1)],1)},tk=[];const Go={$style:ZT};function sk(s){for(var e in Go)this[e]=Go[e]}var nk=p(GT,ek,tk,!1,sk,null,null,null);const ok=nk.exports,ak=C({computed:{...b(Z),basePath(){return this.rootStore.baseUrl}}}),ik="_img_8137c_1",rk={img:ik};var lk=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("img",{class:e.$style.img,attrs:{src:e.basePath+"n8n-logo-expanded.svg",alt:"n8n.io"}})},ck=[];const qo={$style:rk};function dk(s){for(var e in qo)this[e]=qo[e]}var uk=p(ak,lk,ck,!1,dk,null,null,null);const hk=uk.exports,pk=async s=>Se(s,"GET","/sso/saml/initsso"),fk=async s=>Se(s,"GET","/sso/saml/metadata"),mk=async s=>Se(s,"GET","/sso/saml/config"),gk=async(s,e)=>Se(s,"POST","/sso/saml/config",e),_k=async(s,e)=>Se(s,"POST","/sso/saml/config/toggle",e),vk=async s=>Se(s,"GET","/sso/saml/config/test"),xt=mi("sso",()=>{const s=Z(),e=P(),t=z(),n=Ke({loading:!1}),o=Y(()=>n.loading),a=I=>{n.loading=I},i=Y({get:()=>e.isSamlLoginEnabled,set:I=>{e.setSettings({...e.settings,sso:{...e.settings.sso,saml:{...e.settings.sso.saml,loginEnabled:I}}}),f(I)}}),r=Y(()=>e.isEnterpriseFeatureEnabled(te.Saml)),l=Y(()=>e.isDefaultAuthenticationSaml),c=Y(()=>i.value&&r.value&&l.value),h=async()=>pk(s.getRestApiContext),f=async I=>_k(s.getRestApiContext,{loginEnabled:I}),u=async()=>fk(s.getRestApiContext),w=async()=>mk(s.getRestApiContext),g=async I=>gk(s.getRestApiContext,I),v=async()=>vk(s.getRestApiContext),k=async I=>zu(s.getRestApiContext,{id:t.currentUser.id,email:t.currentUser.email,...I}),E=Y(()=>t.currentUser);return{isLoading:o,setLoading:a,isSamlLoginEnabled:i,isEnterpriseSamlEnabled:r,isDefaultAuthenticationSaml:l,showSsoLoginButton:c,getSSORedirectUrl:h,getSamlMetadata:u,getSamlConfig:w,saveSamlConfig:g,testSamlConfig:v,updateUser:k,userData:E}}),wk=C({__name:"SSOLogin",setup(s){const e=xt();return{__sfc:!0,ssoStore:e,onSSOLogin:async()=>{try{window.location.href=await e.getSSORedirectUrl()}catch(n){se.Notification.error({title:"Error",message:n.message,position:"bottom-right"})}}}}}),yk="_ssoLogin_jepvz_1",bk="_divider_jepvz_5",xk={ssoLogin:yk,divider:bk};var Tk=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.ssoStore.showSsoLoginButton?t("div",{class:e.$style.ssoLogin},[t("div",{class:e.$style.divider},[t("span",[e._v(e._s(e.$locale.baseText("sso.login.divider")))])]),t("n8n-button",{attrs:{size:"large",type:"primary",outline:"",label:e.$locale.baseText("sso.login.button")},on:{click:n.onSSOLogin}})],1):e._e()},kk=[];const Yo={$style:xk};function Sk(s){for(var e in Yo)this[e]=Yo[e]}var $k=p(wk,Tk,kk,!1,Sk,null,null,null);const Ek=$k.exports,Ck=C({name:"AuthView",components:{Logo:hk,SSOLogin:Ek},props:{form:{},formLoading:{type:Boolean,default:!1},subtitle:{type:String},withSso:{type:Boolean,default:!1}},methods:{onInput(s){this.$emit("input",s)},onSubmit(s){this.$emit("submit",s)},onSecondaryClick(){this.$emit("secondaryClick")}}}),Nk="_container_16wci_5",Ik="_logoContainer_16wci_16",Dk="_textContainer_16wci_21",Ak="_formContainer_16wci_25",Pk={container:Nk,logoContainer:Ik,textContainer:Dk,formContainer:Ak};var Ok=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("div",{class:e.$style.logoContainer},[t("Logo")],1),e.subtitle?t("div",{class:e.$style.textContainer},[t("n8n-text",{attrs:{size:"large"}},[e._v(e._s(e.subtitle))])],1):e._e(),t("div",{class:e.$style.formContainer},[t("n8n-form-box",e._b({attrs:{"data-test-id":"auth-form",buttonLoading:e.formLoading},on:{secondaryClick:e.onSecondaryClick,submit:e.onSubmit,input:e.onInput}},"n8n-form-box",e.form,!1),[e.withSso?t("SSOLogin"):e._e()],1)],1)])},Mk=[];const Xo={$style:Pk};function Rk(s){for(var e in Xo)this[e]=Xo[e]}var Lk=p(Ck,Ok,Mk,!1,Rk,null,null,null);const ct=Lk.exports,Wk=x(D).extend({name:"ChangePasswordView",components:{AuthView:ct},data(){return{password:"",loading:!1,config:null}},computed:{...b(z)},async mounted(){this.config={title:this.$locale.baseText("auth.changePassword"),buttonText:this.$locale.baseText("auth.changePassword"),redirectText:this.$locale.baseText("auth.signin"),redirectLink:"/signin",inputs:[{name:"password",properties:{label:this.$locale.baseText("auth.newPassword"),type:"password",required:!0,validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"password2",properties:{label:this.$locale.baseText("auth.changePassword.reenterNewPassword"),type:"password",required:!0,validators:{TWO_PASSWORDS_MATCH:{validate:this.passwordsMatch}},validationRules:[{name:"TWO_PASSWORDS_MATCH"}],autocomplete:"new-password",capitalize:!0}}]};const s=!this.$route.query.token||typeof this.$route.query.token!="string"?null:this.$route.query.token,e=!this.$route.query.userId||typeof this.$route.query.userId!="string"?null:this.$route.query.userId;try{if(!s)throw new Error(this.$locale.baseText("auth.changePassword.missingTokenError"));if(!e)throw new Error(this.$locale.baseText("auth.changePassword.missingUserIdError"));await this.usersStore.validatePasswordToken({token:s,userId:e})}catch(t){this.$showMessage({title:this.$locale.baseText("auth.changePassword.tokenValidationError"),type:"error"})}},methods:{passwordsMatch(s){return typeof s!="string"?!1:s!==this.password?{messageKey:"auth.changePassword.passwordsMustMatchError"}:!1},onInput(s){s.name==="password"&&(this.password=s.value)},async onSubmit(){try{this.loading=!0;const s=!this.$route.query.token||typeof this.$route.query.token!="string"?null:this.$route.query.token,e=!this.$route.query.userId||typeof this.$route.query.userId!="string"?null:this.$route.query.userId;s&&e?(await this.usersStore.changePassword({token:s,userId:e,password:this.password}),this.$showMessage({type:"success",title:this.$locale.baseText("auth.changePassword.passwordUpdated"),message:this.$locale.baseText("auth.changePassword.passwordUpdatedMessage")}),await this.$router.push({name:d.SIGNIN})):this.$showError(new Error(this.$locale.baseText("auth.validation.missingParameters")),this.$locale.baseText("auth.changePassword.error"))}catch(s){this.$showError(s,this.$locale.baseText("auth.changePassword.error"))}this.loading=!1}}});var Bk=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.config?t("AuthView",{attrs:{form:e.config,formLoading:e.loading},on:{submit:e.onSubmit,input:e.onInput}}):e._e()},Uk=[],Fk=p(Wk,Bk,Uk,!1,null,null,null,null);const Vk=Fk.exports,zk=C({name:"ErrorView",props:{messageKey:{type:String,required:!0},errorCode:{type:Number},redirectTextKey:{type:String},redirectPage:{type:String}},methods:{onButtonClick(){this.$router.push({name:this.redirectPage})}}}),jk="_container_womip_1",Kk="_icon_womip_10",Hk="_message_womip_17",Gk={container:jk,icon:Kk,message:Hk};var qk=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("font-awesome-icon",{class:e.$style.icon,attrs:{icon:"exclamation-triangle"}}),t("div",{class:e.$style.message},[t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText(e.messageKey))+" ")])],1),t("div",[e.errorCode?t("n8n-text",{attrs:{size:"large"}},[e._v(" "+e._s(e.errorCode)+" "+e._s(e.$locale.baseText("error"))+" ")]):e._e()],1)]),t("n8n-button",{attrs:{label:e.$locale.baseText(e.redirectTextKey)},on:{click:e.onButtonClick}})],1)},Yk=[];const Jo={$style:Gk};function Xk(s){for(var e in Jo)this[e]=Jo[e]}var Jk=p(zk,qk,Yk,!1,Xk,null,null,null);const Qk=Jk.exports,Zk=x(D).extend({name:"ForgotMyPasswordView",components:{AuthView:ct},data(){return{loading:!1}},computed:{...b(P,z),formConfig(){const s=[{name:"email",properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0}}],e=[{name:"no-smtp-warning",properties:{label:this.$locale.baseText("forgotPassword.noSMTPToSendEmailWarning"),type:"info"}}],t={title:this.$locale.baseText("forgotPassword.recoverPassword"),redirectText:this.$locale.baseText("forgotPassword.returnToSignIn"),redirectLink:"/signin"};return this.settingsStore.isSmtpSetup?{...t,buttonText:this.$locale.baseText("forgotPassword.getRecoveryLink"),inputs:s}:{...t,inputs:e}}},methods:{async onSubmit(s){try{this.loading=!0,await this.usersStore.sendForgotPasswordEmail(s),this.$showMessage({type:"success",title:this.$locale.baseText("forgotPassword.recoveryEmailSent"),message:this.$locale.baseText("forgotPassword.emailSentIfExists",{interpolate:{email:s.email}})})}catch(e){let t=this.$locale.baseText("forgotPassword.smtpErrorContactAdministrator");e.httpStatusCode===422&&(t=this.$locale.baseText(e.message)),this.$showMessage({type:"error",title:this.$locale.baseText("forgotPassword.sendingEmailError"),message:t})}this.loading=!1}}});var eS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.formConfig,formLoading:e.loading},on:{submit:e.onSubmit}})},tS=[],sS=p(Zk,eS,tS,!1,null,null,null,null);const nS=sS.exports;function ns(){return{titleSet(s,e){let t="âš ï¸";e==="EXECUTING"?t="ðŸ”„":e==="IDLE"&&(t="â–¶ï¸"),window.document.title=`n8n - ${t} ${s}`},titleReset(){document.title="n8n - Workflow Automation"}}}const fr=x(xe,Be,D,re).extend({setup(){return{...ns()}},data(){return{pushSource:null,reconnectTimeout:null,retryTimeout:null,pushMessageQueue:[],connectRetries:0,lostConnection:!1}},computed:{...b(be,le,N,B,P,Mi),sessionId(){return this.rootStore.sessionId}},methods:{attemptReconnect(){this.pushConnect()},pushConnect(){this.pushDisconnect(),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null);const s=this.settingsStore.pushBackend==="websocket",{getRestUrl:e}=this.rootStore,t=`/push?sessionId=${this.sessionId}`;if(s){const{protocol:n,host:o}=window.location,a=e.startsWith("http")?e.replace(/^http/,"ws"):`${n==="https:"?"wss":"ws"}://${o+e}`;this.pushSource=new WebSocket(`${a}${t}`)}else this.pushSource=new EventSource(`${e}${t}`,{withCredentials:!0});this.pushSource.addEventListener("open",this.onConnectionSuccess,!1),this.pushSource.addEventListener("message",this.pushMessageReceived,!1),this.pushSource.addEventListener(s?"close":"error",this.onConnectionError,!1)},onConnectionSuccess(){var s;this.connectRetries=0,this.lostConnection=!1,this.rootStore.pushConnectionActive=!0,this.clearAllStickyNotifications(),(s=this.pushSource)==null||s.removeEventListener("open",this.onConnectionSuccess)},onConnectionError(){this.pushDisconnect(),this.connectRetries++,this.reconnectTimeout=setTimeout(this.attemptReconnect,Math.min(this.connectRetries*2e3,8e3))},pushDisconnect(){this.pushSource!==null&&(this.pushSource.removeEventListener("error",this.onConnectionError),this.pushSource.removeEventListener("close",this.onConnectionError),this.pushSource.removeEventListener("message",this.pushMessageReceived),this.pushSource.readyState<2&&this.pushSource.close(),this.pushSource=null),this.rootStore.pushConnectionActive=!1},queuePushMessage(s,e){this.pushMessageQueue.push({event:s,retriesLeft:e}),this.retryTimeout===null&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,20))},processWaitingPushMessages(){this.retryTimeout!==null&&(clearTimeout(this.retryTimeout),this.retryTimeout=null);const s=this.pushMessageQueue.length;for(let e=0;e<s;e++){const t=this.pushMessageQueue.shift();if(this.pushMessageReceived(t.event,!0)===!1){t.retriesLeft-=1,t.retriesLeft>0&&this.pushMessageQueue.unshift(t);break}}this.pushMessageQueue.length!==0&&this.retryTimeout===null&&(this.retryTimeout=setTimeout(this.processWaitingPushMessages,25))},async pushMessageReceived(s,e){var a,i,r,l,c,h,f,u,w,g,v,k,E,I,V,W,O,$,M,G,ne,pe;let n;try{n=JSON.parse(s.data)}catch(R){return!1}if(n.type==="sendConsoleMessage"){const R=n.data;return console.log(R.source,...R.messages),!0}if(!["testWebhookReceived"].includes(n.type)&&e!==!0&&this.pushMessageQueue.length)return this.queuePushMessage(s,5),!1;if(n.type==="nodeExecuteAfter"||n.type==="nodeExecuteBefore"){if(!this.uiStore.isActionActive("workflowRunning"))return!1;const R=n.data;if(this.workflowsStore.activeExecutionId!==R.executionId)return e!==!0&&this.queuePushMessage(s,5),!1}let o;if(n.type==="executionRecovered"){const R=(a=n.data)==null?void 0:a.executionId;if(this.uiStore.isActionActive("workflowRunning")&&this.workflowsStore.activeExecutionId===R){const X=await this.workflowsStore.fetchExecutionDataById(this.workflowsStore.activeExecutionId);if(X!=null&&X.data){X.data=qh(X.data);const ge={startData:(i=X.data)==null?void 0:i.startData,resultData:(l=(r=X.data)==null?void 0:r.resultData)!=null?l:{runData:{}},executionData:(c=X.data)==null?void 0:c.executionData};if(((h=this.workflowsStore.workflowExecutionData)==null?void 0:h.workflowId)===X.workflowId){const K=(w=(u=(f=this.workflowsStore.workflowExecutionData)==null?void 0:f.data)==null?void 0:u.resultData)==null?void 0:w.runData;if(K)for(const de of Object.keys(K))ge.resultData.runData[de]=K[de]}const L={data:ge,finished:X.finished,mode:X.mode,waitTill:(g=X.data)==null?void 0:g.waitTill,startedAt:X.startedAt,stoppedAt:X.stoppedAt,status:"crashed"};X.data&&(o={executionId:X.id,data:L})}}}if(n.type==="executionFinished"||n.type==="executionRecovered"){let R;if(n.type==="executionRecovered"&&o!==void 0?R=o:R=n.data,this.workflowsStore.activeExecutionId===R.executionId){const j=(E=(k=(v=this.workflowsStore.workflowExecutionData)==null?void 0:v.data)==null?void 0:k.resultData)==null?void 0:E.runData;if(j)for(const y of Object.keys(j))((G=(M=($=(O=(W=(V=(I=R.data.data.resultData.runData[y])==null?void 0:I[0])==null?void 0:V.data)==null?void 0:W.main)==null?void 0:O[0])==null?void 0:$[0])==null?void 0:M.json)==null?void 0:G.isArtificialRecoveredEventItem)===!0&&j[y].length>0&&(R.data.data.resultData.runData[y]=j[y]);this.workflowsStore.finishActiveExecution(R)}if(!this.uiStore.isActionActive("workflowRunning"))return!1;if(this.workflowsStore.activeExecutionId!==R.executionId)return e!==!0&&this.queuePushMessage(s,5),!1;const U=R.data;let X=this.$getExecutionError(U.data);R.data.status==="crashed"&&(X=this.$locale.baseText("pushConnection.executionFailed.message"));const ge=U&&U.data&&U.data.resultData&&U.data.resultData.error&&U.data.resultData.error.lineNumber;ju.emit("error-line-number",ge||"final");const L=this.getCurrentWorkflow();if(U.waitTill!==void 0){const j=this.workflowsStore.activeExecutionId,y=this.workflowsStore.workflowSettings,_=this.rootStore.saveManualExecutions,T=y.saveManualExecutions===void 0?_:y.saveManualExecutions;let F;T?F=`<a href="/workflow/${L.id}/executions/${j}">View the execution</a> to see what happened after this node.`:(this.$root.$emit("registerGlobalLinkAction","open-settings",async()=>{this.workflowsStore.isNewWorkflow&&await this.saveAsNewWorkflow(),this.uiStore.openModal(Pe)}),F='<a data-action="open-settings">Turn on saving manual executions</a> and run again to see what happened after this node.'),this.titleSet(L.name,"IDLE"),this.$showToast({title:"Workflow started waiting",message:`${F} <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.wait/" target="_blank">More info</a>`,type:"success",duration:0})}else if(U.finished!==!0){if(this.titleSet(L.name,"ERROR"),((ne=U.data.resultData.error)==null?void 0:ne.name)==="ExpressionError"&&U.data.resultData.error.context.functionality==="pairedItem"){const j=U.data.resultData.error;this.getWorkflowDataToSave().then(y=>{const _={caused_by_credential:!1,error_message:j.description,error_title:j.message,error_type:j.context.type,node_graph_string:JSON.stringify(mt(y,this.getNodeTypes()).nodeGraph),workflow_id:this.workflowsStore.workflowId};if(j.context.nodeCause&&["no pairing info","invalid pairing info"].includes(j.context.type)){const T=L.getNode(j.context.nodeCause);T&&(_.is_pinned=!!L.getPinDataOfNode(T.name),_.mode=T.parameters.mode,_.node_type=T.type,_.operation=T.parameters.operation,_.resource=T.parameters.resource)}this.$telemetry.track("Instance FE emitted paired item error",_)})}if(((pe=U.data.resultData.error)==null?void 0:pe.name)==="SubworkflowOperationError"){const j=U.data.resultData.error;this.workflowsStore.subWorkflowExecutionError=j,this.$showMessage({title:j.message,message:j.description,type:"error",duration:0})}else{let j;U.data.resultData.lastNodeExecuted?j=`Problem in node â€˜${U.data.resultData.lastNodeExecuted}â€˜`:j="Problem executing workflow",this.$showMessage({title:j,message:X,type:"error",duration:0})}}else{this.titleSet(L.name,"IDLE");const j=this.workflowsStore.getWorkflowExecution;if(j&&j.executedNode){const y=this.workflowsStore.getNodeByName(j.executedNode),_=y&&this.nodeTypesStore.getNodeType(y.type,y.typeVersion),T=j&&j.executedNode&&j.data&&j.data.resultData&&j.data.resultData.runData&&j.data.resultData.runData[j.executedNode];_&&_.polling&&!T?this.$showMessage({title:this.$locale.baseText("pushConnection.pollingNode.dataNotFound",{interpolate:{service:je(_)}}),message:this.$locale.baseText("pushConnection.pollingNode.dataNotFound.message",{interpolate:{service:je(_)}}),type:"success"}):this.$showMessage({title:this.$locale.baseText("pushConnection.nodeExecutedSuccessfully"),type:"success"})}else this.$showMessage({title:this.$locale.baseText("pushConnection.workflowExecutedSuccessfully"),type:"success"})}this.workflowsStore.getWorkflowRunData&&(U.data.resultData.runData=this.workflowsStore.getWorkflowRunData),this.workflowsStore.executingNode=null,this.workflowsStore.setWorkflowExecutionData(U),this.uiStore.removeActiveAction("workflowRunning"),this.updateNodesExecutionIssues();const K=U.data.resultData.lastNodeExecuted;let de=0;K&&U.data.resultData.runData[K]&&!X&&(de=U.data.resultData.runData[K][0].data.main[0].length),this.$externalHooks().run("pushConnection.executionFinished",{itemsCount:de,nodeName:U.data.resultData.lastNodeExecuted,errorMessage:X,runDataExecutedStartData:U.data.startData,resultDataError:U.data.resultData.error}),U.data.resultData.error||this.segmentStore.trackSuccessfulWorkflowExecution(U)}else if(n.type==="executionStarted"){const R=n.data,U={id:R.executionId,finished:!1,mode:R.mode,startedAt:R.startedAt,retryOf:R.retryOf,workflowId:R.workflowId,workflowName:R.workflowName};this.workflowsStore.addActiveExecution(U)}else if(n.type==="nodeExecuteAfter"){const R=n.data;this.workflowsStore.addNodeExecutionData(R)}else if(n.type==="nodeExecuteBefore"){const R=n.data;this.workflowsStore.executingNode=R.nodeName}else if(n.type==="testWebhookDeleted")n.data.workflowId===this.workflowsStore.workflowId&&(this.workflowsStore.executionWaitingForWebhook=!1,this.uiStore.removeActiveAction("workflowRunning"));else if(n.type==="testWebhookReceived"){const R=n.data;R.workflowId===this.workflowsStore.workflowId&&(this.workflowsStore.executionWaitingForWebhook=!1,this.workflowsStore.activeExecutionId=R.executionId),this.processWaitingPushMessages()}else if(n.type==="reloadNodeType")await this.nodeTypesStore.getNodeTypes(),await this.nodeTypesStore.getFullNodesProperties([n.data]);else if(n.type==="removeNodeType"){const U=[n.data];await this.credentialsStore.fetchCredentialTypes(!1).then(()=>{this.nodeTypesStore.removeNodeTypes(U)})}else n.type==="nodeDescriptionUpdated"&&(await this.nodeTypesStore.getNodeTypes(),await this.credentialsStore.fetchCredentialTypes(!0));return!0}}}),oS=25,aS=4,iS=C({name:"ShortenName",props:["name","limit","testId"],computed:{shortenedName(){return Ku(this.name,this.limit||oS,aS)}}});var rS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{attrs:{title:e.name,"data-test-id":e.testId}},[e._t("default",null,{shortenedName:e.shortenedName})],2)},lS=[],cS=p(iS,rS,lS,!1,null,null,null,null);const dS=cS.exports,uS=C({name:"IntersectionObserver",props:["threshold","enabled"],data(){return{observer:null}},mounted(){if(!this.enabled)return;const s={root:this.$refs.root,rootMargin:"0px",threshold:this.threshold},e=new IntersectionObserver(t=>{t.forEach(({target:n,isIntersecting:o})=>{this.$emit("observed",{el:n,isIntersecting:o})})},s);this.$data.observer=e,this.$on("observe",t=>{e.observe(t)}),this.$on("unobserve",t=>{e.unobserve(t)})},beforeDestroy(){this.enabled&&this.$data.observer.disconnect()}});var hS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"root"},[e._t("default")],2)},pS=[],fS=p(uS,hS,pS,!1,null,null,null,null);const mS=fS.exports;function mr(s,e,t){this.$children.forEach(n=>{n.$options.name===s?n.$emit.apply(n,[e].concat(t)):mr.apply(n,[s,e].concat([t]))})}const gS=C({methods:{$dispatch(s,e,t){let n=this.$parent||this.$root,o=n.$options.name;for(;n&&(!o||o!==s);)n=n.$parent,n&&(o=n.$options.name);n&&n.$emit.apply(n,[e].concat(t))},$broadcast(s,e,t){mr.call(this,s,e,t)}}}),_S=x(gS).extend({name:"IntersectionObserved",props:["enabled"],mounted(){this.enabled&&this.$nextTick(()=>{this.$dispatch("IntersectionObserver","observe",this.$refs.observed)})},beforeDestroy(){this.enabled&&this.$dispatch("IntersectionObserver","unobserve",this.$refs.observed)}});var vS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{ref:"observed"},[e._t("default")],2)},wS=[],yS=p(_S,vS,wS,!1,null,null,null,null);const bS=yS.exports,xS=20,TS=C({components:{IntersectionObserver:mS,IntersectionObserved:bS},name:"TagsContainer",props:["tagIds","limit","clickable","responsive","hoverable"],data(){return{visibility:{}}},computed:{...b(He),tags(){const s=this.tagIds.map(o=>this.tagsStore.getTagById(o)).filter(Boolean),e=this.limit||xS;let t=e?s.slice(0,e):s;t=t.map(o=>({...o,hidden:this.responsive&&!this.$data.visibility[o.id]}));let n=t.length;if(this.responsive&&(n=Object.values(this.visibility).reduce((o,a)=>a?o+1:o,0)),n<s.length){const o=s.slice(n),a=o.reduce((r,l)=>r?`${r}, ${l.name}`:l.name,""),i={id:"count",name:`+${o.length}`,title:a,isCount:!0};t.splice(n,0,i)}return t}},methods:{onObserved({el:s,isIntersecting:e}){s.dataset.id&&S.set(this.$data.visibility,s.dataset.id,e)},onClick(s,e){this.clickable&&s.stopPropagation(),e.hidden||this.$emit("click",e.id)}}});var kS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("IntersectionObserver",{staticClass:"tags-container",attrs:{threshold:1,enabled:e.responsive},on:{observed:e.onObserved}},[[t("span",{staticClass:"tags"},e._l(e.tags,function(n){return t("span",{key:n.id,class:{clickable:!n.hidden},on:{click:o=>e.onClick(o,n)}},[n.isCount?t("el-tag",{staticClass:"count-container",attrs:{title:n.title,type:"info",size:"small"}},[e._v(" "+e._s(n.name)+" ")]):t("IntersectionObserved",{class:{hidden:n.hidden},attrs:{"data-id":n.id,enabled:e.responsive}},[t("el-tag",{class:{hoverable:e.hoverable},attrs:{title:n.name,type:"info",size:"small"}},[e._v(" "+e._s(n.name)+" ")])],1)],1)}),0)]],2)},SS=[],$S=p(TS,kS,SS,!1,null,"4211d003",null,null);const ES=$S.exports,CS=C({name:"PushConnectionTracker",computed:{...b(Z)}});var NS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e.rootStore.pushConnectionActive?e._t("default"):t("div",{staticClass:"push-connection-lost primary-color"},[t("n8n-tooltip",{attrs:{placement:"bottom-end"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{innerHTML:e._s(e.$locale.baseText("pushConnectionTracker.cannotConnectToServer"))}})]},proxy:!0}],null,!1,567936028)},[t("span",[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v("Â  "+e._s(e.$locale.baseText("pushConnectionTracker.connectionLost"))+" ")],1)])],1)],2)},IS=[],DS=p(CS,NS,IS,!1,null,null,null,null);const AS=DS.exports,PS=C({name:"ExpandableInputBase",props:["value","placeholder","staticSize"],computed:{hiddenValue(){let s=this.value.replace(/\s/g,".");return s||(s=this.placeholder),`${s}`}}});var OS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{"el-input":!0,"static-size":e.staticSize},attrs:{"data-value":e.hiddenValue}},[e._t("default")],2)},MS=[],RS=p(PS,OS,MS,!1,null,"532175c1",null,null);const gr=RS.exports,LS=C({components:{ExpandableInputBase:gr},name:"ExpandableInputEdit",props:{value:{},placeholder:{},maxlength:{},autofocus:{},eventBus:{type:Object}},mounted(){var s;this.autofocus&&this.$refs.input&&this.focus(),(s=this.eventBus)==null||s.on("focus",this.focus)},destroyed(){var s;(s=this.eventBus)==null||s.off("focus",this.focus)},methods:{focus(){this.$refs.input&&this.$refs.input.focus()},onInput(){this.$emit("input",this.$refs.input.value)},onEnter(){this.$emit("enter",this.$refs.input.value)},onClickOutside(s){s.type==="click"&&this.$emit("blur",this.$refs.input.value)},onEscape(){this.$emit("esc")}}});var WS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ExpandableInputBase",{attrs:{value:e.value,placeholder:e.placeholder}},[t("input",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"input",staticClass:"el-input__inner",attrs:{placeholder:e.placeholder,maxlength:e.maxlength,size:"4"},domProps:{value:e.value},on:{input:e.onInput,keydown:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onEnter.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.onEscape.apply(null,arguments)}]}})])},BS=[],US=p(LS,WS,BS,!1,null,null,null,null);const FS=US.exports,VS=C({components:{ExpandableInputBase:gr},name:"ExpandableInputPreview",props:["value"]});var zS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ExpandableInputBase",{attrs:{value:e.value,staticSize:!0}},[[t("input",{class:{"el-input__inner":!0,clickable:!0},attrs:{disabled:!0,size:"4"},domProps:{value:e.value}})]],2)},jS=[],KS=p(VS,zS,jS,!1,null,"a575d260",null,null);const HS=KS.exports,GS=C({name:"InlineTextEdit",components:{ExpandableInputEdit:FS,ExpandableInputPreview:HS},props:["isEditEnabled","value","placeholder","maxLength","previewValue"],data(){return{newValue:"",escPressed:!1,disabled:!1,inputBus:q()}},methods:{onInput(s){this.disabled||(this.newValue=s)},onClick(){this.disabled||(this.$data.newValue=this.value,this.$emit("toggle"))},onBlur(){this.disabled||(this.$data.escPressed||this.submit(),this.$data.escPressed=!1)},submit(){if(this.disabled)return;const s=e=>{this.$data.disabled=!1,e||this.$data.inputBus.emit("focus")};this.$data.disabled=!0,this.$emit("submit",this.newValue,s)},onEscape(){this.disabled||(this.$data.escPressed=!0,this.$emit("toggle"))}}});var qS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{staticClass:"inline-edit",on:{keydown:function(n){n.stopPropagation()}}},[e.isEditEnabled?t("span",[t("ExpandableInputEdit",{attrs:{placeholder:e.placeholder,value:e.newValue,maxlength:e.maxLength,autofocus:!0,eventBus:e.inputBus},on:{input:e.onInput,esc:e.onEscape,blur:e.onBlur,enter:e.submit}})],1):t("span",{staticClass:"preview",on:{click:e.onClick}},[t("ExpandableInputPreview",{attrs:{value:e.previewValue||e.value}})],1)])},YS=[],XS=p(GS,qS,YS,!1,null,"845eab90",null,null);const JS=XS.exports,QS=x(he,Ie).extend({name:"BreakpointsObserver",props:["valueXS","valueXL","valueLG","valueMD","valueSM","valueDefault"],data(){return{width:window.innerWidth}},created(){window.addEventListener("resize",this.onResize)},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.callDebounced("onResizeEnd",{debounceTime:50})},onResizeEnd(){this.$data.width=window.innerWidth}},computed:{bp(){return this.$data.width<gn?"XS":this.$data.width>=_n?"XL":this.$data.width>=vn?"LG":this.$data.width>=wn?"MD":"SM"},value(){return this.valueXS!==void 0&&this.$data.width<gn?this.valueXS:this.valueXL!==void 0&&this.$data.width>=_n?this.valueXL:this.valueLG!==void 0&&this.$data.width>=vn?this.valueLG:this.valueMD!==void 0&&this.$data.width>=wn?this.valueMD:this.valueSM!==void 0?this.valueSM:this.valueDefault}}});var ZS=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e._t("default",null,{bp:e.bp,value:e.value})],2)},e$=[],t$=p(QS,ZS,e$,!1,null,null,null,null);const s$=t$.exports,n$=(s,e)=>{if(s.length!==e.length)return!0;const t=new Set(s);return e.reduce((n,o)=>n||!t.has(o),!1)},o$=x(re).extend({name:"WorkflowDetails",components:{TagsContainer:ES,PushConnectionTracker:AS,ShortenName:dS,WorkflowActivator:Ks,SaveButton:zs,TagsDropdown:ts,InlineTextEdit:JS,BreakpointsObserver:s$},setup(){return{...ns()}},data(){return{isTagsEditEnabled:!1,isNameEditEnabled:!1,appliedTagIds:[],tagsEditBus:q(),MAX_WORKFLOW_NAME_LENGTH:bi,tagsSaving:!1,EnterpriseEditionFeature:te}},computed:{...b(He,Z,P,N,Ye,B,z),currentUser(){return this.usersStore.currentUser},contextBasedTranslationKeys(){return this.uiStore.contextBasedTranslationKeys},isWorkflowActive(){return this.workflowsStore.isWorkflowActive},workflowName(){return this.workflowsStore.workflowName},isDirty(){return this.uiStore.stateIsDirty},currentWorkflowTagIds(){return this.workflowsStore.workflowTags},isNewWorkflow(){return!this.currentWorkflowId||this.currentWorkflowId===oe||this.currentWorkflowId==="new"},isWorkflowSaving(){return this.uiStore.isActionActive("workflowSaving")},workflow(){return this.workflowsStore.workflow},currentWorkflowId(){return this.workflowsStore.workflowId},onWorkflowPage(){return this.$route.meta&&(this.$route.meta.nodeView||this.$route.meta.keepWorkflowAlive===!0)},onExecutionsTab(){return[d.EXECUTION_HOME.toString(),d.WORKFLOW_EXECUTIONS.toString(),d.EXECUTION_PREVIEW].includes(this.$route.name||"")},workflowPermissions(){return Kt(this.usersStore.currentUser,this.workflow)},workflowMenuItems(){return[{id:ke.DUPLICATE,label:this.$locale.baseText("menuActions.duplicate"),disabled:!this.onWorkflowPage||!this.currentWorkflowId},{id:ke.DOWNLOAD,label:this.$locale.baseText("menuActions.download"),disabled:!this.onWorkflowPage},{id:ke.IMPORT_FROM_URL,label:this.$locale.baseText("menuActions.importFromUrl"),disabled:!this.onWorkflowPage||this.onExecutionsTab},{id:ke.IMPORT_FROM_FILE,label:this.$locale.baseText("menuActions.importFromFile"),disabled:!this.onWorkflowPage||this.onExecutionsTab},{id:ke.SETTINGS,label:this.$locale.baseText("generic.settings"),disabled:!this.onWorkflowPage||this.isNewWorkflow},...this.workflowPermissions.delete?[{id:ke.DELETE,label:this.$locale.baseText("menuActions.delete"),disabled:!this.onWorkflowPage||this.isNewWorkflow,customClass:this.$style.deleteItem,divided:!0}]:[]]}},methods:{async onSaveButtonClick(){let s;this.currentWorkflowId!==oe?s=this.currentWorkflowId:this.$route.params.name&&this.$route.params.name!=="new"&&(s=this.$route.params.name),await this.saveCurrentWorkflow({id:s,name:this.workflowName,tags:this.currentWorkflowTagIds})&&await this.settingsStore.fetchPromptsData()},onShareButtonClick(){var s;this.uiStore.openModalWithData({name:qt,data:{id:this.currentWorkflowId}}),this.$telemetry.track("User opened sharing modal",{workflow_id:this.currentWorkflowId,user_id_sharer:(s=this.currentUser)==null?void 0:s.id,sub_view:this.$route.name===d.WORKFLOWS?"Workflows listing":"Workflow editor"})},onTagsEditEnable(){this.$data.appliedTagIds=this.currentWorkflowTagIds,this.$data.isTagsEditEnabled=!0,setTimeout(()=>{this.$data.isNameEditEnabled=!1,this.$data.tagsEditBus.emit("focus")},0)},async onTagsUpdate(s){this.$data.appliedTagIds=s},async onTagsBlur(){const s=this.currentWorkflowTagIds,e=this.$data.appliedTagIds;if(!n$(s,e)){this.$data.isTagsEditEnabled=!1;return}if(this.$data.tagsSaving)return;this.$data.tagsSaving=!0;const t=await this.saveCurrentWorkflow({tags:e});this.$telemetry.track("User edited workflow tags",{workflow_id:this.currentWorkflowId,new_tag_count:e.length}),this.$data.tagsSaving=!1,t&&(this.$data.isTagsEditEnabled=!1)},onTagsEditEsc(){this.$data.isTagsEditEnabled=!1},onNameToggle(){this.$data.isNameEditEnabled=!this.$data.isNameEditEnabled,this.$data.isNameEditEnabled&&(this.$data.isTagsEditEnabled&&this.onTagsBlur(),this.$data.isTagsEditEnabled=!1)},async onNameSubmit(s,e){const t=s.trim();if(!t){this.$showMessage({title:this.$locale.baseText("workflowDetails.showMessage.title"),message:this.$locale.baseText("workflowDetails.showMessage.message"),type:"error"}),e(!1);return}if(t===this.workflowName){this.$data.isNameEditEnabled=!1,e(!0);return}const n=await this.saveCurrentWorkflow({name:s});n&&(this.$data.isNameEditEnabled=!1),e(n)},async handleFileImport(){const s=new FileReader;s.onload=t=>{const n=t.target.result;let o;try{o=JSON.parse(n)}catch(a){this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleFileImport.title"),message:this.$locale.baseText("mainSidebar.showMessage.handleFileImport.message"),type:"error"});return}this.$root.$emit("importWorkflowData",{data:o})};const e=this.$refs.importFile;e!=null&&e.files&&e.files.length!==0&&s.readAsText(e.files[0])},async onWorkflowMenuSelect(s){switch(s){case ke.DUPLICATE:{this.uiStore.openModalWithData({name:Ws,data:{id:this.workflowsStore.workflowId,name:this.workflowsStore.workflowName,tags:this.workflowsStore.workflowTags}});break}case ke.DOWNLOAD:{const e=await this.getWorkflowDataToSave(),{tags:t,...n}=e,o={...n,meta:{instanceId:this.rootStore.instanceId},tags:(t||[]).map(r=>{const{usageCount:l,...c}=this.tagsStore.getTagById(r);return c})},a=new Blob([JSON.stringify(o,null,2)],{type:"application/json;charset=utf-8"});let i=this.workflowName||"unsaved_workflow";i=i.replace(/[^a-z0-9]/gi,"_"),this.$telemetry.track("User exported workflow",{workflow_id:e.id}),$s.saveAs(a,i+".json");break}case ke.IMPORT_FROM_URL:{try{const e=await this.$prompt(this.$locale.baseText("mainSidebar.prompt.workflowUrl")+":",this.$locale.baseText("mainSidebar.prompt.importWorkflowFromUrl")+":",{confirmButtonText:this.$locale.baseText("mainSidebar.prompt.import"),cancelButtonText:this.$locale.baseText("mainSidebar.prompt.cancel"),inputErrorMessage:this.$locale.baseText("mainSidebar.prompt.invalidUrl"),inputPattern:/^http[s]?:\/\/.*\.json$/i});this.$root.$emit("importWorkflowUrl",{url:e.value})}catch(e){}break}case ke.IMPORT_FROM_FILE:{this.$refs.importFile.click();break}case ke.SETTINGS:{this.uiStore.openModal(Pe);break}case ke.DELETE:{if(await this.confirmMessage(this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.message",{interpolate:{workflowName:this.workflowName}}),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.headline"),"warning",this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.confirmButtonText"),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.cancelButtonText"))===!1)return;try{await this.workflowsStore.deleteWorkflow(this.currentWorkflowId)}catch(t){this.$showError(t,this.$locale.baseText("generic.deleteWorkflowError"));return}this.uiStore.stateIsDirty=!1,this.titleReset(),this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect1.title"),type:"success"}),await this.$router.push({name:d.NEW_WORKFLOW});break}}},goToUpgrade(){this.uiStore.goToUpgrade("workflow_sharing","upgrade-workflow-sharing")}},watch:{currentWorkflowId(){this.$data.isTagsEditEnabled=!1,this.$data.isNameEditEnabled=!1}}});const a$="_workflowMenuContainer_1s2hp_1",i$="_hiddenInput_1s2hp_5",r$="_deleteItem_1s2hp_9",l$="_disabledShareButton_1s2hp_13",c$={workflowMenuContainer:a$,hiddenInput:i$,deleteItem:r$,disabledShareButton:l$};var d$=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.workflowName?t("div",{staticClass:"container"},[t("BreakpointsObserver",{staticClass:"name-container",attrs:{valueXS:15,valueSM:25,valueMD:50},scopedSlots:e._u([{key:"default",fn:function({value:n}){return[t("ShortenName",{attrs:{name:e.workflowName,limit:n,custom:!0,testId:"workflow-name-input"},scopedSlots:e._u([{key:"default",fn:function({shortenedName:o}){return[t("InlineTextEdit",{staticClass:"name",attrs:{value:e.workflowName,previewValue:o,isEditEnabled:e.isNameEditEnabled,maxLength:e.MAX_WORKFLOW_NAME_LENGTH,placeholder:"Enter workflow name"},on:{toggle:e.onNameToggle,submit:e.onNameSubmit}})]}}],null,!0)})]}}],null,!1,1094763751)}),e.settingsStore.areTagsEnabled?t("span",{staticClass:"tags",attrs:{"data-test-id":"workflow-tags-container"}},[e.isTagsEditEnabled?t("div",[t("TagsDropdown",{ref:"dropdown",staticClass:"tags-edit",attrs:{createEnabled:!0,currentTagIds:e.appliedTagIds,eventBus:e.tagsEditBus,placeholder:e.$locale.baseText("workflowDetails.chooseOrCreateATag"),"data-test-id":"workflow-tags-dropdown"},on:{blur:e.onTagsBlur,update:e.onTagsUpdate,esc:e.onTagsEditEsc}})],1):e.currentWorkflowTagIds.length===0?t("div",[t("span",{staticClass:"add-tag clickable",attrs:{"data-test-id":"new-tag-link"},on:{click:e.onTagsEditEnable}},[e._v(" + "+e._s(e.$locale.baseText("workflowDetails.addTag"))+" ")])]):t("TagsContainer",{key:e.currentWorkflowId,attrs:{tagIds:e.currentWorkflowTagIds,clickable:!0,responsive:!0,"data-test-id":"workflow-tags"},on:{click:e.onTagsEditEnable}})],1):t("span",{staticClass:"tags"}),t("PushConnectionTracker",{staticClass:"actions"},[[t("span",{staticClass:"activator"},[t("WorkflowActivator",{attrs:{"workflow-active":e.isWorkflowActive,"workflow-id":e.currentWorkflowId}})],1),t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]},scopedSlots:e._u([{key:"fallback",fn:function(){return[t("n8n-tooltip",{scopedSlots:e._u([{key:"content",fn:function(){return[t("i18n",{attrs:{path:e.contextBasedTranslationKeys.workflows.sharing.unavailable.description.tooltip,tag:"span"},scopedSlots:e._u([{key:"action",fn:function(){return[t("a",{on:{click:e.goToUpgrade}},[e._v(" "+e._s(e.$locale.baseText(e.contextBasedTranslationKeys.workflows.sharing.unavailable.button))+" ")])]},proxy:!0}],null,!1,3375403874)})]},proxy:!0}],null,!1,2714220369)},[t("n8n-button",{class:["mr-2xs",e.$style.disabledShareButton],attrs:{type:"secondary"}},[e._v(" "+e._s(e.$locale.baseText("workflowDetails.share"))+" ")])],1)]},proxy:!0}],null,!1,3107099084)},[t("n8n-button",{staticClass:"mr-2xs",attrs:{type:"secondary","data-test-id":"workflow-share-button"},on:{click:e.onShareButtonClick}},[e._v(" "+e._s(e.$locale.baseText("workflowDetails.share"))+" ")])],1),t("SaveButton",{attrs:{type:"primary",saved:!this.isDirty&&!this.isNewWorkflow,disabled:e.isWorkflowSaving,"data-test-id":"workflow-save-button"},on:{click:e.onSaveButtonClick}}),t("div",{class:e.$style.workflowMenuContainer},[t("input",{ref:"importFile",class:e.$style.hiddenInput,attrs:{type:"file","data-test-id":"workflow-import-input"},on:{change:function(n){return e.handleFileImport()}}}),t("n8n-action-dropdown",{attrs:{items:e.workflowMenuItems,"data-test-id":"workflow-menu"},on:{select:e.onWorkflowMenuSelect}})],1)]],2)],1):e._e()},u$=[];const Qo={$style:c$};function h$(s){for(var e in Qo)this[e]=Qo[e]}var p$=p(o$,d$,u$,!1,h$,"423d9651",null,null);const f$=p$.exports,m$=C({name:"tab-bar",data(){return{MAIN_HEADER_TABS:ue}},props:{items:{type:Array,required:!0},activeTab:{type:String,default:ue.WORKFLOW}},computed:{...b(N),mainSidebarCollapsed(){return this.uiStore.sidebarMenuCollapsed}},methods:{onSelect(s,e){this.$emit("select",s,e)}}}),g$="_container_1mpky_1",_$="_menuCollapsed_1mpky_13",v$={container:g$,menuCollapsed:_$};var w$=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.items?t("div",{class:{[e.$style.container]:!0,["tab-bar-container"]:!0,[e.$style.menuCollapsed]:e.mainSidebarCollapsed}},[t("n8n-radio-buttons",{attrs:{value:e.activeTab,options:e.items},on:{input:e.onSelect}})],1):e._e()},y$=[];const Zo={$style:v$};function b$(s){for(var e in Zo)this[e]=Zo[e]}var x$=p(m$,w$,y$,!1,b$,null,null,null);const T$=x$.exports,k$=x(fr,re).extend({name:"MainHeader",components:{WorkflowDetails:f$,TabBar:T$},data(){return{activeHeaderTab:ue.WORKFLOW,workflowToReturnTo:"",dirtyState:!1}},computed:{...b(ce,N),tabBarItems(){return[{value:ue.WORKFLOW,label:this.$locale.baseText("generic.editor")},{value:ue.EXECUTIONS,label:this.$locale.baseText("generic.executions")}]},activeNode(){return this.ndvStore.activeNode},hideMenuBar(){return Boolean(this.activeNode&&this.activeNode.type!==Re)},workflowName(){return this.workflowsStore.workflowName},currentWorkflow(){return this.$route.params.name||this.workflowsStore.workflowId},onWorkflowPage(){return this.$route.meta&&(this.$route.meta.nodeView||this.$route.meta.keepWorkflowAlive===!0)},activeExecution(){return this.workflowsStore.activeWorkflowExecution}},mounted(){this.dirtyState=this.uiStore.stateIsDirty,this.syncTabsWithRoute(this.$route),this.pushConnect()},beforeDestroy(){this.pushDisconnect()},watch:{$route(s,e){this.syncTabsWithRoute(s)}},methods:{syncTabsWithRoute(s){s.name===d.EXECUTION_HOME||s.name===d.WORKFLOW_EXECUTIONS||s.name===d.EXECUTION_PREVIEW?this.activeHeaderTab=ue.EXECUTIONS:(s.name===d.WORKFLOW||s.name===d.NEW_WORKFLOW)&&(this.activeHeaderTab=ue.WORKFLOW);const e=s.params.name;e!=="new"&&(this.workflowToReturnTo=e)},onTabSelected(s,e){switch(s){case ue.WORKFLOW:["","new",oe].includes(this.workflowToReturnTo)?this.$route.name!==d.NEW_WORKFLOW&&(this.$router.push({name:d.NEW_WORKFLOW}),this.uiStore.stateIsDirty=this.dirtyState):this.$route.name!==d.WORKFLOW&&this.$router.push({name:d.WORKFLOW,params:{name:this.workflowToReturnTo}}),this.activeHeaderTab=ue.WORKFLOW;break;case ue.EXECUTIONS:this.dirtyState=this.uiStore.stateIsDirty,this.workflowToReturnTo=this.currentWorkflow;const t=this.currentWorkflow===oe?"new":this.currentWorkflow;this.activeExecution?this.$router.push({name:d.EXECUTION_PREVIEW,params:{name:t,executionId:this.activeExecution.id}}).catch(()=>{}):this.$router.push({name:d.EXECUTION_HOME,params:{name:t}}),this.activeHeaderTab=ue.EXECUTIONS;break}}}});var S$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{class:{"main-header":!0,expanded:!this.uiStore.sidebarMenuCollapsed}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideMenuBar,expression:"!hideMenuBar"}],staticClass:"top-menu"},[t("WorkflowDetails"),e.onWorkflowPage?t("tab-bar",{attrs:{items:e.tabBarItems,activeTab:e.activeHeaderTab},on:{select:e.onTabSelected}}):e._e()],1)])])},$$=[],E$=p(k$,S$,$$,!1,null,null,null,null);const Dt=E$.exports,C$="_notification_197jx_8",N$={"gift-icon":"_gift-icon_197jx_1",notification:C$},I$={};var D$=function(){var e=this,t=e._self._c;return t("div",{class:e.$style["gift-icon"]},[t("font-awesome-icon",{attrs:{icon:"gift"}}),t("div",{class:e.$style.notification},[t("div")])],1)},A$=[];const ea={$style:N$};function P$(s){for(var e in ea)this[e]=ea[e]}var O$=p(I$,D$,A$,!1,P$,null,null,null);const M$=O$.exports,Xs=x(xe,re,D).extend({setup(){return{...ns()}},computed:{...b(Z,N,B)},methods:{async runWorkflowApi(s){if(this.rootStore.pushConnectionActive===!1)throw new Error(this.$locale.baseText("workflowRun.noActiveConnectionToTheServer"));this.workflowsStore.subWorkflowExecutionError=null,this.uiStore.addActiveAction("workflowRunning");let e;try{e=await this.workflowsStore.runWorkflow(s)}catch(t){throw this.uiStore.removeActiveAction("workflowRunning"),t}return e.executionId!==void 0&&(this.workflowsStore.activeExecutionId=e.executionId),e.waitingForWebhook===!0&&(this.workflowsStore.executionWaitingForWebhook=!0),e},async runWorkflow(s,e){const t=this.getCurrentWorkflow();if(!this.uiStore.isActionActive("workflowRunning")){this.titleSet(t.name,"EXECUTING"),this.clearAllStickyNotifications();try{if(this.workflowsStore.nodesIssuesExist===!0){const g=this.checkReadyForExecution(t,s);if(g!==null){const v=[];let k;const E=[],I=[];for(const V of Object.keys(g)){k=pi(g[V]);let W="UNKNOWN";const O=this.workflowsStore.getNodeByName(V);O&&(W=O.type),I.push(W);const $={node_type:W,error:"",caused_by_credential:!!g[V].credentials};for(const M of k)v.push(`<strong>${V}</strong>: ${M}`),$.error=$.error.concat(", ",M);E.push($)}this.$showMessage({title:this.$locale.baseText("workflowRun.showMessage.title"),message:v.join("<br />"),type:"error",duration:0}),this.titleSet(t.name,"ERROR"),this.$externalHooks().run("workflowRun.runError",{errorMessages:v,nodeName:s}),await this.getWorkflowDataToSave().then(V=>{this.$telemetry.track("Workflow execution preflight failed",{workflow_id:t.id,workflow_name:t.name,execution_type:s?"node":"workflow",node_graph_string:JSON.stringify(mt(V,this.getNodeTypes()).nodeGraph),error_node_types:JSON.stringify(I),errors:JSON.stringify(E)})});return}}let o=[];s!==void 0&&(o=t.getParentNodes(s,"main",1));const a=this.workflowsStore.getWorkflowRunData;let i;const r=[];if(a!==null&&Object.keys(a).length!==0){i={};for(const g of o){const v=t.getParentNodes(g,"main");if(!t.nodes[g].disabled){v.push(g);for(const k of v){if(a[k]===void 0||a[k].length===0){r.push(k);break}i[k]=a[k].slice(0,1)}}}Object.keys(i).length===0&&(i=void 0)}r.length===0&&s!==void 0&&r.push(s);const l=this.workflowsStore.isNewWorkflow,c=this.workflowsStore.currentWorkflowHasWebhookNode;l&&c&&await this.saveCurrentWorkflow();const h=await this.getWorkflowDataToSave(),f={workflowData:h,runData:i,pinData:h.pinData,startNodes:r};s&&(f.destinationNode=s);const u={id:"__IN_PROGRESS__",finished:!1,mode:"manual",startedAt:new Date,stoppedAt:void 0,workflowId:t.id,executedNode:s,data:{resultData:{runData:i||{},pinData:h.pinData,startNodes:r,workflowData:h}},workflowData:{id:this.workflowsStore.workflowId,name:h.name,active:h.active,createdAt:0,updatedAt:0,...h}};this.workflowsStore.setWorkflowExecutionData(u),this.updateNodesExecutionIssues();const w=await this.runWorkflowApi(f);return await this.$externalHooks().run("workflowRun.runWorkflow",{nodeName:s,source:e}),w}catch(n){this.titleSet(t.name,"ERROR"),this.$showError(n,this.$locale.baseText("workflowRun.showError.title"));return}}}}}),R$=x(he,D,re,Xs,Gs,Ie).extend({name:"MainSidebar",components:{GiftNotificationIcon:M$,WorkflowSettings:er},data(){return{basePath:"",fullyExpanded:!1}},computed:{...b(Z,P,N,z,Rs,B,Ys),currentBranch(){return this.versionControlStore.state.currentBranch},hasVersionUpdates(){return this.versionsStore.hasVersionUpdates},nextVersions(){return this.versionsStore.nextVersions},isCollapsed(){return this.uiStore.sidebarMenuCollapsed},canUserAccessSettings(){return this.findFirstAccessibleSettingsRoute()!==null},showUserArea(){return this.settingsStore.isUserManagementEnabled&&this.usersStore.canUserAccessSidebarUserInfo&&this.usersStore.currentUser!==null},workflowExecution(){return this.workflowsStore.getWorkflowExecution},userMenuItems(){return[{id:"settings",label:this.$locale.baseText("settings")},{id:"logout",label:this.$locale.baseText("auth.signout")}]},mainMenuItems(){var n;const s=[],e=this.uiStore.sidebarMenuItems;if(e&&e.length>0)for(const o of e)s.push({id:o.id,icon:o.properties?o.properties.icon:"",label:o.properties?o.properties.title:"",position:o.position,type:(n=o.properties)!=null&&n.href?"link":"regular",properties:o.properties});const t=[{id:"workflows",icon:"network-wired",label:this.$locale.baseText("mainSidebar.workflows"),position:"top",activateOnRouteNames:[d.WORKFLOWS]},{id:"templates",icon:"box-open",label:this.$locale.baseText("mainSidebar.templates"),position:"top",available:this.settingsStore.isTemplatesEnabled,activateOnRouteNames:[d.TEMPLATES]},{id:"credentials",icon:"key",label:this.$locale.baseText("mainSidebar.credentials"),customIconSize:"medium",position:"top",activateOnRouteNames:[d.CREDENTIALS]},{id:"variables",icon:"variable",label:this.$locale.baseText("mainSidebar.variables"),customIconSize:"medium",position:"top",activateOnRouteNames:[d.VARIABLES]},{id:"executions",icon:"tasks",label:this.$locale.baseText("mainSidebar.executions"),position:"top",activateOnRouteNames:[d.EXECUTIONS]},{id:"settings",icon:"cog",label:this.$locale.baseText("settings"),position:"bottom",available:this.canUserAccessSettings&&this.usersStore.currentUser!==null,activateOnRouteNames:[d.USERS_SETTINGS,d.API_SETTINGS,d.PERSONAL_SETTINGS]},{id:"help",icon:"question",label:"Help",position:"bottom",children:[{id:"quickstart",icon:"video",label:this.$locale.baseText("mainSidebar.helpMenuItems.quickstart"),type:"link",properties:{href:"https://www.youtube.com/watch?v=1MwSoB0gnM4",newWindow:!0}},{id:"docs",icon:"book",label:this.$locale.baseText("mainSidebar.helpMenuItems.documentation"),type:"link",properties:{href:"https://docs.n8n.io",newWindow:!0}},{id:"forum",icon:"users",label:this.$locale.baseText("mainSidebar.helpMenuItems.forum"),type:"link",properties:{href:"https://community.n8n.io",newWindow:!0}},{id:"examples",icon:"graduation-cap",label:this.$locale.baseText("mainSidebar.helpMenuItems.course"),type:"link",properties:{href:"https://www.youtube.com/watch?v=1MwSoB0gnM4",newWindow:!0}},{id:"about",icon:"info",label:this.$locale.baseText("mainSidebar.aboutN8n"),position:"bottom"}]}];return[...s,...t]}},async mounted(){this.basePath=this.rootStore.baseUrl,this.$refs.user&&this.$externalHooks().run("mainSidebar.mounted",{userRef:this.$refs.user}),window.innerWidth<900||this.uiStore.isNodeView?this.uiStore.sidebarMenuCollapsed=!0:this.uiStore.sidebarMenuCollapsed=!1,await S.nextTick(),this.fullyExpanded=!this.isCollapsed},created(){window.addEventListener("resize",this.onResize)},destroyed(){window.removeEventListener("resize",this.onResize)},methods:{trackHelpItemClick(s){this.$telemetry.track("User clicked help resource",{type:s,workflow_id:this.workflowsStore.workflowId})},async onUserActionToggle(s){switch(s){case"logout":this.onLogout();break;case"settings":this.$router.push({name:d.PERSONAL_SETTINGS});break}},onLogout(){this.$router.push({name:d.SIGNOUT})},toggleCollapse(){this.uiStore.toggleSidebarMenuCollapse(),this.isCollapsed?this.fullyExpanded=!this.isCollapsed:setTimeout(()=>{this.fullyExpanded=!this.isCollapsed},300)},openUpdatesPanel(){this.uiStore.openModal(yt)},async handleSelect(s){switch(s){case"workflows":{this.$router.currentRoute.name!==d.WORKFLOWS&&this.goToRoute({name:d.WORKFLOWS});break}case"templates":{this.$router.currentRoute.name!==d.TEMPLATES&&this.goToRoute({name:d.TEMPLATES});break}case"credentials":{this.$router.currentRoute.name!==d.CREDENTIALS&&this.goToRoute({name:d.CREDENTIALS});break}case"variables":{this.$router.currentRoute.name!==d.VARIABLES&&this.goToRoute({name:d.VARIABLES});break}case"executions":{this.$router.currentRoute.name!==d.EXECUTIONS&&this.goToRoute({name:d.EXECUTIONS});break}case"settings":{const e=this.findFirstAccessibleSettingsRoute();if(e){const t=this.$router.resolve({name:e});this.$router.currentRoute.name!==e&&this.goToRoute(t.route.path)}break}case"about":{this.trackHelpItemClick("about"),this.uiStore.openModal(zt);break}case"quickstart":case"docs":case"forum":case"examples":{this.trackHelpItemClick(s);break}}},goToRoute(s){this.$router.push(s).catch(e=>{ci(e)||console.error(e)})},findFirstAccessibleSettingsRoute(){const s=this.$router.getRoutes().filter(t=>t.meta.telemetry&&t.meta.telemetry.pageCategory==="settings").map(t=>t.name||"");let e=null;for(const t of s)if(this.canUserAccessRouteByName(t)){e=t;break}return e},onResize(s){this.callDebounced("onResizeEnd",{debounceTime:100},s)},onResizeEnd(s){const e=s.target.outerWidth;this.checkWidthAndAdjustSidebar(e)},checkWidthAndAdjustSidebar(s){s<900&&(this.uiStore.sidebarMenuCollapsed=!0,S.nextTick(()=>{this.fullyExpanded=!this.isCollapsed}))},async sync(){const s=await this.$prompt(this.$locale.baseText("settings.versionControl.sync.prompt.description",{interpolate:{branch:this.versionControlStore.state.currentBranch}}),this.$locale.baseText("settings.versionControl.sync.prompt.title",{interpolate:{branch:this.versionControlStore.state.currentBranch}}),{confirmButtonText:"Sync",cancelButtonText:"Cancel",inputPlaceholder:this.$locale.baseText("settings.versionControl.sync.prompt.placeholder"),inputPattern:/^.+$/,inputErrorMessage:this.$locale.baseText("settings.versionControl.sync.prompt.error")});s.value&&await this.versionControlStore.sync({commitMessage:s.value})}}}),L$="_sideMenu_1m2k5_1",W$="_logo_1m2k5_8",B$="_sideMenuCollapsed_1m2k5_19",U$="_sideMenuCollapseButton_1m2k5_26",F$="_updates_1m2k5_45",V$="_expanded_1m2k5_57",z$="_userArea_1m2k5_64",j$="_userName_1m2k5_71",K$="_userActions_1m2k5_85",H$="_sync_1m2k5_97",G$={sideMenu:L$,logo:W$,sideMenuCollapsed:B$,sideMenuCollapseButton:U$,updates:F$,expanded:V$,userArea:z$,userName:j$,userActions:K$,sync:H$};var q$=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{["side-menu"]:!0,[e.$style.sideMenu]:!0,[e.$style.sideMenuCollapsed]:e.isCollapsed},attrs:{id:"side-menu"}},[t("div",{class:["clickable",e.$style.sideMenuCollapseButton],attrs:{id:"collapse-change-button"},on:{click:e.toggleCollapse}},[e.isCollapsed?t("n8n-icon",{staticClass:"ml-5xs",attrs:{icon:"chevron-right",size:"xsmall"}}):t("n8n-icon",{staticClass:"mr-5xs",attrs:{icon:"chevron-left",size:"xsmall"}})],1),t("n8n-menu",{attrs:{items:e.mainMenuItems,collapsed:e.isCollapsed},on:{select:e.handleSelect},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.logo},[t("img",{class:e.$style.icon,attrs:{src:e.basePath+(e.isCollapsed?"n8n-logo-collapsed.svg":"n8n-logo-expanded.svg"),alt:"n8n"}})])]},proxy:!0},{key:"menuSuffix",fn:function(){return[e.hasVersionUpdates||e.versionControlStore.state.currentBranch?t("div",[e.hasVersionUpdates?t("div",{class:e.$style.updates,on:{click:e.openUpdatesPanel}},[t("div",{class:e.$style.giftContainer},[t("GiftNotificationIcon")],1),t("n8n-text",{class:{["ml-xs"]:!0,[e.$style.expanded]:e.fullyExpanded},attrs:{color:"text-base"}},[e._v(" "+e._s(e.nextVersions.length>99?"99+":e.nextVersions.length)+" update"+e._s(e.nextVersions.length>1?"s":"")+" ")])],1):e._e(),e.versionControlStore.state.currentBranch?t("div",{class:e.$style.sync},[t("span",[t("n8n-icon",{staticClass:"mr-xs",attrs:{icon:"code-branch"}}),e._v(" "+e._s(e.currentBranch)+" ")],1),t("n8n-button",{attrs:{title:e.$locale.baseText("settings.versionControl.sync.prompt.title",{interpolate:{branch:e.currentBranch}}),icon:"sync",type:"tertiary",size:e.isCollapsed?"mini":"small",square:""},on:{click:e.sync}})],1):e._e()]):e._e()]},proxy:!0},e.showUserArea?{key:"footer",fn:function(){return[t("div",{class:e.$style.userArea},[t("div",{staticClass:"ml-3xs",attrs:{"data-test-id":"main-sidebar-user-menu"}},[t("el-dropdown",{attrs:{disabled:!e.isCollapsed,placement:"right-end",trigger:"click"},on:{command:e.onUserActionToggle},scopedSlots:e._u([{key:"dropdown",fn:function(){return[t("el-dropdown-menu",[t("el-dropdown-item",{attrs:{command:"settings"}},[e._v(" "+e._s(e.$locale.baseText("settings"))+" ")]),t("el-dropdown-item",{attrs:{command:"logout"}},[e._v(" "+e._s(e.$locale.baseText("auth.signout"))+" ")])],1)]},proxy:!0}],null,!1,2525515544)},[t("div",{class:{[e.$style.avatar]:!0,clickable:e.isCollapsed}},[t("n8n-avatar",{attrs:{firstName:e.usersStore.currentUser.firstName,lastName:e.usersStore.currentUser.lastName,size:"small"}})],1)])],1),t("div",{class:{["ml-2xs"]:!0,[e.$style.userName]:!0,[e.$style.expanded]:e.fullyExpanded}},[t("n8n-text",{attrs:{size:"small",bold:!0,color:"text-dark"}},[e._v(e._s(e.usersStore.currentUser.fullName))])],1),t("div",{class:{[e.$style.userActions]:!0,[e.$style.expanded]:e.fullyExpanded}},[t("n8n-action-dropdown",{attrs:{items:e.userMenuItems,placement:"top-start"},on:{select:e.onUserActionToggle}})],1)])]},proxy:!0}:null],null,!0)})],1)},Y$=[];const ta={$style:G$};function X$(s){for(var e in ta)this[e]=ta[e]}var J$=p(R$,q$,Y$,!1,X$,null,null,null);const Ee=J$.exports,_r=C({data(){return{isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isMacOs:/(ipad|iphone|ipod|mac)/i.test(navigator.platform)}},computed:{controlKeyCode(){return this.isMacOs?"Meta":"Control"}},methods:{isCtrlKeyPressed(s){return this.isTouchDevice===!0&&s instanceof MouseEvent?!0:this.isMacOs?s.metaKey:s.ctrlKey}}}),Q$=x(_r).extend({data(){return{moveLastPosition:[0,0]}},computed:{...b(N)},methods:{moveWorkflow(s){const e=this.uiStore.nodeViewOffsetPosition,[t,n]=Ft(s),o=e[0]+(t-this.moveLastPosition[0]),a=e[1]+(n-this.moveLastPosition[1]);this.uiStore.nodeViewOffsetPosition=[o,a],this.moveLastPosition[0]=t,this.moveLastPosition[1]=n},mouseDownMoveWorkflow(s,e){if(this.isCtrlKeyPressed(s)===!1&&!e||this.uiStore.isActionActive("dragActive"))return;s.button!==1&&(this.uiStore.nodeViewMoveInProgress=!0);const[t,n]=Ft(s);this.moveLastPosition[0]=t,this.moveLastPosition[1]=n,this.$el.addEventListener("mousemove",this.mouseMoveNodeWorkflow)},mouseUpMoveWorkflow(s){this.uiStore.nodeViewMoveInProgress!==!1&&(this.$el.removeEventListener("mousemove",this.mouseMoveNodeWorkflow),this.uiStore.nodeViewMoveInProgress=!1)},mouseMoveNodeWorkflow(s){if(!(s.target&&!s.target.id.includes("node-view"))&&!this.uiStore.isActionActive("dragActive")){if(s.buttons===4&&(this.uiStore.nodeViewMoveInProgress=!0),s.buttons===0){this.mouseUp(s);return}this.moveWorkflow(s)}}}});function Z$(){const s=H(!1),e=H(document.createElement("span")),{isTouchDevice:t,isCtrlKeyPressed:n}=qs(),o=N(),a=Bs(),i=B();function r($){Object.assign(e.value.style,$)}function l($){const[M,G]=E($);e.value=Object.assign(e.value,{x:M,y:G}),r({left:e.value.x+"px",top:e.value.y+"px",visibility:"visible"}),s.value=!0}function c($){const M=f($);r({left:M.x+"px",top:M.y+"px",width:M.width+"px",height:M.height+"px"})}function h(){e.value.x=0,e.value.y=0,r({visibility:"hidden",left:"0px",top:"0px",width:"0px",height:"0px"}),s.value=!1}function f($){const[M,G]=E($);return{x:Math.min(M,e.value.x),y:Math.min(G,e.value.y),width:Math.abs(M-e.value.x),height:Math.abs(G-e.value.y)}}function u($){const M=[],G=f($);return i.allNodes.forEach(ne=>{ne.position[0]<G.x||ne.position[0]>G.x+G.width||ne.position[1]<G.y||ne.position[1]>G.y+G.height||M.push(ne)}),M}function w(){e.value.id="select-box",r({margin:"0px auto",border:"2px dotted #FF0000",position:"absolute",zIndex:"100",visibility:"hidden"}),e.value.addEventListener("mouseup",v),document.querySelector("#node-view").appendChild(e.value)}function g($){if($.buttons===0){v($);return}c($)}function v($){if(s.value===!1){t===!0&&$.target instanceof HTMLElement&&$.target&&$.target.id.includes("node-view")&&W();return}document.removeEventListener("mousemove",g),W();const M=u($);M.forEach(G=>{V(G)}),M.length===1&&(o.lastSelectedNode=M[0].name),h()}function k($,M){n($)===!0||M||o.isActionActive("dragActive")||(l($),document.addEventListener("mousemove",g))}function E($){const[M,G]=Ft($),ne=a.isDemo?0:o.sidebarMenuCollapsed?Hu:Gu,pe=a.isDemo?0:qu,R=M-ne,U=G-pe,X=a.nodeViewScale,ge=o.nodeViewOffsetPosition;return Yu(R,U,X,ge)}function I($){o.removeNodeFromSelection($),O.value.removeFromDragSelection(O.value.getManagedElement($==null?void 0:$.id))}function V($){o.addSelectedNode($),O.value.addToDragSelection(O.value.getManagedElement($==null?void 0:$.id))}function W(){O.value.clearDragSelection(),o.resetSelectedNodes(),o.lastSelectedNode=null,o.lastSelectedNodeOutputIndex=null,a.lastSelectedConnection=null,a.newNodeInsertPosition=null}const O=Y(()=>a.jsPlumbInstance);return qe(()=>{w()}),{getMousePositionWithinNodeView:E,mouseUpMouseSelect:v,mouseDownMouseSelect:k,nodeDeselected:I,nodeSelected:V,deselectAllNodes:W}}function eE(){function s(){return le().allNodeTypes.reduce((t,n)=>{if(typeof n.defaults.name!="string")throw new Error("Expected node name default to be a string");return/\d$/.test(n.defaults.name)&&t.push(n.defaults.name),t},[])}function e(t,n=[]){var h,f;const{canvasNames:o}=B();if(!o.has(t)&&!n.includes(t))return t;const i=s().find(u=>t.startsWith(u));if(i){let u="",w=1;const g=t.split(i).pop(),v=g==null?void 0:g[g.length-1];for(v&&Number.isInteger(Number(v))&&(w=parseInt(v,10),t=t.slice(0,-1)),u=t;o.has(u)||n.includes(u);)u=t+w++;return u}if(/^\d+-?\d*$/.test(t)){let u="",w=1;const g=t.match(new RegExp("(?<base>\\d+)-?(?<suffix>\\d*)"));if(!(g!=null&&g.groups))throw new Error("Failed to find match for unique name");for(((h=g==null?void 0:g.groups)==null?void 0:h.suffix)!==""&&(w=parseInt(g.groups.suffix,10)),u=g.groups.base;o.has(u)||n.includes(u);)u=g.groups.base+"-"+w++;return u}let r="",l=1;const c=t.match(new RegExp("(?<base>.*\\D+)(?<suffix>\\d*)"));if(!(c!=null&&c.groups))throw new Error("Failed to find match for unique name");for(((f=c==null?void 0:c.groups)==null?void 0:f.suffix)!==""&&(l=parseInt(c.groups.suffix,10)),r=c.groups.base;o.has(r)||n.includes(r);)r=c.groups.base+l++;return r}return{uniqueNodeName:e}}const tE=C({name:"NodeTitle",props:{value:{type:String},nodeType:{},readOnly:{type:Boolean,default:!1}},data(){return{editName:!1,newName:""}},computed:{editable(){return!this.readOnly&&window===window.parent}},methods:{onEdit(){this.newName=this.value,this.editName=!0,this.$nextTick(()=>{const s=this.$refs.input;s&&s.focus()})},onRename(){this.newName.trim()!==""&&this.$emit("input",this.newName.trim()),this.editName=!1}}}),sE="_container_9bi3m_1",nE="_title_9bi3m_11",oE="_hoverable_9bi3m_19",aE="_editIcon_9bi3m_22",iE="_iconWrapper_9bi3m_26",rE="_editIconContainer_9bi3m_39",lE="_editButtons_9bi3m_45",cE="_editContainer_9bi3m_53",dE={container:sE,title:nE,hoverable:oE,editIcon:aE,iconWrapper:iE,editIconContainer:rE,editButtons:lE,editContainer:cE};var uE=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",{class:e.$style.container,attrs:{"data-test-id":"node-title-container"},on:{click:e.onEdit}},[t("span",{class:e.$style.iconWrapper},[t("NodeIcon",{attrs:{nodeType:e.nodeType,size:18}})],1),t("n8n-popover",{attrs:{placement:"right",width:"200",value:e.editName,disabled:!e.editable},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticClass:"ph-no-capture",class:{[e.$style.title]:!0,[e.$style.hoverable]:e.editable}},[e._v(" "+e._s(e.value)+" "),t("div",{class:e.$style.editIconContainer},[e.editable?t("font-awesome-icon",{class:e.$style.editIcon,attrs:{icon:"pencil-alt"}}):e._e()],1)])]},proxy:!0}])},[t("div",{class:e.$style.editContainer,on:{keydown:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onRename.apply(null,arguments)},function(n){n.stopPropagation()},function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"]))return null;e.editName=!1}]}},[t("n8n-text",{attrs:{bold:!0,color:"text-base",tag:"div"}},[e._v(e._s(e.$locale.baseText("ndv.title.renameNode")))]),t("n8n-input",{ref:"input",attrs:{size:"small","data-test-id":"node-rename-input"},model:{value:e.newName,callback:function(n){e.newName=n},expression:"newName"}}),t("div",{class:e.$style.editButtons},[t("n8n-button",{attrs:{type:"secondary",size:"small",label:e.$locale.baseText("ndv.title.cancel")},on:{click:function(n){e.editName=!1}}}),t("n8n-button",{attrs:{type:"primary",size:"small",label:e.$locale.baseText("ndv.title.rename")},on:{click:e.onRename}})],1)],1)])],1)},hE=[];const sa={$style:dE};function pE(s){for(var e in sa)this[e]=sa[e]}var fE=p(tE,uE,hE,!1,pE,null,null,null);const mE=fE.exports,gE=x(xe).extend({name:"NodeSettingsTabs",props:{value:{type:String},nodeType:{},sessionId:{type:String}},computed:{...b(ce,B),activeNode(){return this.ndvStore.activeNode},documentationUrl(){var n,o,a,i;const s=this.nodeType;if(!s)return"";if(s.documentationUrl&&s.documentationUrl.startsWith("http"))return s.documentationUrl;const e="?utm_source=n8n_app&utm_medium=node_settings_modal-credential_link&utm_campaign="+s.name,t=(i=(a=(o=(n=s.codex)==null?void 0:n.resources)==null?void 0:o.primaryDocumentation)==null?void 0:a[0])==null?void 0:i.url;return t?t+e:this.isCommunityNode?`${Ri}${s.name.split(".")[0]}`:Xu+e},isCommunityNode(){const s=this.nodeType;return s?Ds(s.name):!1},packageName(){return this.nodeType.name.split(".")[0]},options(){const s=[{label:this.$locale.baseText("nodeSettings.parameters"),value:"params"}];this.documentationUrl&&s.push({label:this.$locale.baseText("nodeSettings.docs"),value:"docs",href:this.documentationUrl}),this.isCommunityNode&&s.push({icon:"cube",value:"communityNode",align:"right",tooltip:this.$locale.baseText("generic.communityNode.tooltip",{interpolate:{docUrl:nt,packageName:this.packageName}})});const e=!this.isCommunityNode;return s.push({icon:"cog",value:"settings",align:e?"right":void 0}),s}},methods:{onTabSelect(s){s==="docs"&&this.nodeType&&(this.$externalHooks().run("dataDisplay.onDocumentationUrlClick",{nodeType:this.nodeType,documentationUrl:this.documentationUrl}),this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:"main",type:"docs"})),s==="settings"&&this.nodeType&&this.$telemetry.track("User viewed node settings",{node_type:this.nodeType.name,workflow_id:this.workflowsStore.workflowId}),(s==="settings"||s==="params")&&this.$emit("input",s)},onTooltipClick(s,e){s==="communityNode"&&e.target.localName==="a"&&this.$telemetry.track("user clicked cnr docs link",{source:"node details view"})}}});var _E=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-tabs",{attrs:{options:e.options,value:e.value},on:{input:e.onTabSelect,tooltipClick:e.onTooltipClick}})},vE=[],wE=p(gE,_E,vE,!1,null,null,null,null);const yE=wE.exports,bE=x(Je,D,re).extend({name:"NodeWebhooks",props:["node","nodeType"],data(){return{isMinimized:this.nodeType&&this.nodeType.name!==it,showUrlFor:"test"}},computed:{webhooksNode(){return this.nodeType===null||this.nodeType.webhooks===void 0?[]:this.nodeType.webhooks.filter(s=>s.restartWebhook!==!0)}},methods:{copyWebhookUrl(s){const e=this.getWebhookUrlDisplay(s);this.copyToClipboard(e),this.$showMessage({title:this.$locale.baseText("nodeWebhooks.showMessage.title"),type:"success"}),this.$telemetry.track("User copied webhook URL",{pane:"parameters",type:`${this.showUrlFor} url`})},getWebhookUrlDisplay(s){return this.node?this.getWebhookUrl(s,this.node,this.showUrlFor):""}},watch:{node(){this.isMinimized=this.nodeType.name!==it}}});var xE=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.webhooksNode.length?t("div",{staticClass:"webhooks"},[t("div",{staticClass:"clickable headline",class:{expanded:!e.isMinimized},attrs:{title:e.isMinimized?e.$locale.baseText("nodeWebhooks.clickToDisplayWebhookUrls"):e.$locale.baseText("nodeWebhooks.clickToHideWebhookUrls")},on:{click:function(n){e.isMinimized=!e.isMinimized}}},[t("font-awesome-icon",{staticClass:"minimize-button minimize-icon",attrs:{icon:"angle-down"}}),e._v(" "+e._s(e.$locale.baseText("nodeWebhooks.webhookUrls"))+" ")],1),t("el-collapse-transition",[e.isMinimized?e._e():t("div",{staticClass:"node-webhooks"},[t("div",{staticClass:"url-selection"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("n8n-radio-buttons",{attrs:{options:[{label:this.$locale.baseText("nodeWebhooks.testUrl"),value:"test"},{label:this.$locale.baseText("nodeWebhooks.productionUrl"),value:"production"}]},model:{value:e.showUrlFor,callback:function(n){e.showUrlFor=n},expression:"showUrlFor"}})],1)],1)],1),e._l(e.webhooksNode,function(n,o){return t("n8n-tooltip",{key:o,staticClass:"item",attrs:{content:e.$locale.baseText("nodeWebhooks.clickToCopyWebhookUrls"),placement:"left"}},[t("div",{staticClass:"webhook-wrapper"},[t("div",{staticClass:"http-field"},[t("div",{staticClass:"http-method"},[e._v(" "+e._s(e.getWebhookExpressionValue(n,"httpMethod"))),t("br")])]),t("div",{staticClass:"url-field"},[t("div",{staticClass:"webhook-url left-ellipsis clickable",on:{click:function(a){return e.copyWebhookUrl(n)}}},[e._v(" "+e._s(e.getWebhookUrlDisplay(n))),t("br")])])])])})],2)])],1):e._e()},TE=[],kE=p(bE,xE,TE,!1,null,"dcf6e047",null,null);const SE=kE.exports,Tt=S.extend({computed:{...b(B),pinData(){return this.node?this.workflowsStore.pinDataByNodeName(this.node.name):void 0},hasPinData(){return!!this.node&&typeof this.pinData<"u"},isPinDataNodeType(){return!!this.node&&!this.isMultipleOutputsNodeType&&!Ju.includes(this.node.type)},isMultipleOutputsNodeType(){var s;return((s=this.nodeType)==null?void 0:s.outputs.length)>1}},methods:{isValidPinDataJSON(s){try{return JSON.parse(s),!0}catch(e){const t=this.$locale.baseText("runData.editOutputInvalid"),n=new RegExp(/JSON\.parse:|of the JSON data/,"g"),o=e.message.replace(n,"").trim(),a=/at position (\d+)/,i=e.message.match(a);if(e.message=o.charAt(0).toUpperCase()+o.slice(1),e.message=e.message.replace("Unexpected token ' in JSON",this.$locale.baseText("runData.editOutputInvalid.singleQuote")),i){const r=parseInt(i[1],10),l=(s.slice(0,r).match(/\n/g)||[]).length;e.message=e.message.replace(a,this.$locale.baseText("runData.editOutputInvalid.atPosition",{interpolate:{position:`${r}`}})),e.message=`${this.$locale.baseText("runData.editOutputInvalid.onLine",{interpolate:{line:`${l+1}`}})} ${e.message}`}return this.$showError(e,t),!1}},isValidPinDataSize(s){return typeof s=="object"&&(s=JSON.stringify(s)),this.workflowsStore.pinDataSize+Lt(s)>Qu?(this.$showError(new Error(this.$locale.baseText("ndv.pinData.error.tooLarge.description")),this.$locale.baseText("ndv.pinData.error.tooLarge.title")),!1):!0}}}),$E=x(Xs,Tt).extend({props:{nodeName:{type:String},disabled:{type:Boolean,default:!1},label:{type:String},type:{type:String},size:{type:String},transparent:{type:Boolean,default:!1},telemetrySource:{type:String}},computed:{...b(le,ce,B),node(){return this.workflowsStore.getNodeByName(this.nodeName)},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},nodeRunning(){const s=this.workflowsStore.executedNode,e=this.workflowsStore.executingNode;return this.workflowRunning&&(e===this.node.name||s===this.node.name)},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},isTriggerNode(){return this.nodeTypesStore.isTriggerNode(this.node.type)},isManualTriggerNode(){return Boolean(this.nodeType&&this.nodeType.name===Jt)},isPollingTypeNode(){return!!(this.nodeType&&this.nodeType.polling)},isScheduleTrigger(){return!!(this.nodeType&&this.nodeType.group.includes("schedule"))},isWebhookNode(){return Boolean(this.nodeType&&this.nodeType.name===it)},isListeningForEvents(){const s=this.workflowsStore.executionWaitingForWebhook,e=this.workflowsStore.executedNode;return this.node&&!this.node.disabled&&this.isTriggerNode&&s&&(!e||e===this.nodeName)},isListeningForWorkflowEvents(){return this.nodeRunning&&this.isTriggerNode&&!this.isScheduleTrigger&&!this.isManualTriggerNode},hasIssues(){return Boolean(this.node&&this.node.issues&&(this.node.issues.parameters||this.node.issues.credentials))},disabledHint(){if(this.isListeningForEvents)return"";if(this.isTriggerNode&&this.node.disabled)return this.$locale.baseText("ndv.execute.nodeIsDisabled");if(this.isTriggerNode&&this.hasIssues){const s=this.ndvStore.activeNode;return s&&s.name!==this.nodeName?this.$locale.baseText("ndv.execute.fixPrevious"):this.$locale.baseText("ndv.execute.requiredFieldsMissing")}return this.workflowRunning&&!this.nodeRunning?this.$locale.baseText("ndv.execute.workflowAlreadyRunning"):""},buttonLabel(){return this.isListeningForEvents||this.isListeningForWorkflowEvents?this.$locale.baseText("ndv.execute.stopListening"):this.label?this.label:this.isWebhookNode?this.$locale.baseText("ndv.execute.listenForTestEvent"):this.isPollingTypeNode||this.nodeType&&this.nodeType.mockManualExecution?this.$locale.baseText("ndv.execute.fetchEvent"):this.isTriggerNode&&!this.isScheduleTrigger&&!this.isManualTriggerNode?this.$locale.baseText("ndv.execute.listenForEvent"):this.$locale.baseText("ndv.execute.executeNode")}},methods:{async stopWaitingForWebhook(){try{await this.workflowsStore.removeTestWebhook(this.workflowsStore.workflowId)}catch(s){this.$showError(s,this.$locale.baseText("ndv.execute.stopWaitingForWebhook.error"));return}},async onClick(){if(this.isListeningForEvents)await this.stopWaitingForWebhook();else if(this.isListeningForWorkflowEvents)this.$emit("stopExecution");else{let s=!1;if(this.hasPinData&&(s=await this.confirmMessage(this.$locale.baseText("ndv.pinData.unpinAndExecute.description"),this.$locale.baseText("ndv.pinData.unpinAndExecute.title"),null,this.$locale.baseText("ndv.pinData.unpinAndExecute.confirm"),this.$locale.baseText("ndv.pinData.unpinAndExecute.cancel")),s&&(me.emit("data-unpinning",{source:"unpin-and-execute-modal"}),this.workflowsStore.unpinData({node:this.node}))),!this.hasPinData||s){const e={node_type:this.nodeType?this.nodeType.name:null,workflow_id:this.workflowsStore.workflowId,source:this.telemetrySource};this.$telemetry.track("User clicked execute node button",e),await this.$externalHooks().run("nodeExecuteButton.onClick",e),await this.runWorkflow(this.nodeName,"RunData.ExecuteNodeButton"),this.$emit("execute")}}}}});var EE=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-tooltip",{attrs:{placement:"bottom",disabled:!e.disabledHint},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v(e._s(e.disabledHint))])]},proxy:!0}])},[t("div",[t("n8n-button",{attrs:{loading:e.nodeRunning&&!e.isListeningForEvents&&!e.isListeningForWorkflowEvents,disabled:e.disabled||!!e.disabledHint,label:e.buttonLabel,type:e.type,size:e.size,transparentBackground:e.transparent},on:{click:e.onClick}})],1)])},CE=[],NE=p($E,EE,CE,!1,null,null,null,null);const Js=NE.exports,IE=x(xe,Be).extend({name:"NodeSettings",components:{NodeTitle:mE,NodeCredentials:Oi,ParameterInputFull:wi,ParameterInputList:Pi,NodeSettingsTabs:yE,NodeWebhooks:SE,NodeExecuteButton:Js},computed:{...b(Xt,le,ce,N,be,B,Gt),isCurlImportModalOpen(){return this.uiStore.isModalOpen(ot)},isReadOnly(){return this.readOnly||this.hasForeignCredential},isExecutable(){return this.executable||this.hasForeignCredential},nodeTypeName(){if(this.nodeType){const s=this.$locale.shortNodeType(this.nodeType.name);return this.$locale.headerText({key:`headers.${s}.displayName`,fallback:this.nodeType.name})}return""},nodeTypeDescription(){if(this.nodeType&&this.nodeType.description){const s=this.$locale.shortNodeType(this.nodeType.name);return this.$locale.headerText({key:`headers.${s}.description`,fallback:this.nodeType.description})}else return this.$locale.baseText("nodeSettings.noDescriptionFound")},headerStyle(){return this.node?{"background-color":this.node.color}:{}},node(){return this.ndvStore.activeNode},parametersSetting(){return this.parameters.filter(s=>s.isNodeSetting)},parametersNoneSetting(){return this.parameters.filter(s=>!s.isNodeSetting)},parameters(){return this.nodeType===null?[]:this.nodeType.properties},outputPanelEditMode(){return this.ndvStore.outputPanelEditMode},isCommunityNode(){return Ds(this.node.type)},isTriggerNode(){return this.nodeTypesStore.isTriggerNode(this.node.type)},workflowOwnerName(){return this.workflowsEEStore.getWorkflowOwnerName(`${this.workflowsStore.workflowId}`)},hasForeignCredential(){return this.foreignCredentials.length>0},usedCredentials(){return Object.values(this.workflowsStore.usedCredentials).filter(s=>{var e;return Object.values(((e=this.node)==null?void 0:e.credentials)||[]).find(t=>t.id===s.id)})},credentialOwnerName(){const s=this.usedCredentials?Object.values(this.usedCredentials).find(e=>e.id===this.foreignCredentials[0]):void 0;return this.credentialsStore.getCredentialOwnerName(s)}},props:{eventBus:{type:Object},dragging:{type:Boolean},sessionId:{type:String},nodeType:{type:Object},readOnly:{type:Boolean,default:!1},foreignCredentials:{type:Array,default:()=>[]},blockUI:{type:Boolean,default:!1},executable:{type:Boolean,default:!0}},data(){return{nodeValid:!0,nodeColor:null,openPanel:"params",nodeValues:{color:"#ff0000",alwaysOutputData:!1,executeOnce:!1,notesInFlow:!1,continueOnFail:!1,retryOnFail:!1,maxTries:3,waitBetweenTries:1e3,notes:"",parameters:{}},nodeSettings:[{displayName:this.$locale.baseText("nodeSettings.alwaysOutputData.displayName"),name:"alwaysOutputData",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.alwaysOutputData.description")},{displayName:this.$locale.baseText("nodeSettings.executeOnce.displayName"),name:"executeOnce",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.executeOnce.description")},{displayName:this.$locale.baseText("nodeSettings.retryOnFail.displayName"),name:"retryOnFail",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.retryOnFail.description")},{displayName:this.$locale.baseText("nodeSettings.maxTries.displayName"),name:"maxTries",type:"number",typeOptions:{minValue:2,maxValue:5},default:3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:this.$locale.baseText("nodeSettings.maxTries.description")},{displayName:this.$locale.baseText("nodeSettings.waitBetweenTries.displayName"),name:"waitBetweenTries",type:"number",typeOptions:{minValue:0,maxValue:5e3},default:1e3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:this.$locale.baseText("nodeSettings.waitBetweenTries.description")},{displayName:this.$locale.baseText("nodeSettings.continueOnFail.displayName"),name:"continueOnFail",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.continueOnFail.description")},{displayName:this.$locale.baseText("nodeSettings.notes.displayName"),name:"notes",type:"string",typeOptions:{rows:5},default:"",noDataExpression:!0,description:this.$locale.baseText("nodeSettings.notes.description")},{displayName:this.$locale.baseText("nodeSettings.notesInFlow.displayName"),name:"notesInFlow",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.notesInFlow.description")}],COMMUNITY_NODES_INSTALLATION_DOCS_URL:nt,CUSTOM_NODES_DOCS_URL:Zu,MAIN_NODE_PANEL_WIDTH:st,hiddenIssuesInputs:[]}},watch:{node(s,e){this.setNodeValues()},isCurlImportModalOpen(s,e){if(s===!1){let t=this.uiStore.getHttpNodeParameters||"";if(!t)return;try{t=JSON.parse(t),this.valueChanged({node:this.node.name,name:"parameters",value:t}),this.uiStore.setHttpNodeParameters({name:ot,parameters:""})}catch(n){}}}},methods:{populateHiddenIssuesSet(){!this.node||!this.workflowsStore.isNodePristine(this.node.name)||(this.hiddenIssuesInputs.push("credentials"),this.parametersNoneSetting.forEach(s=>{this.hiddenIssuesInputs.push(s.name)}),this.workflowsStore.setNodePristine(this.node.name,!1))},onParameterBlur(s){this.hiddenIssuesInputs=this.hiddenIssuesInputs.filter(e=>e!==s)},onWorkflowActivate(){this.hiddenIssuesInputs=[],this.$emit("activate")},onNodeExecute(){this.hiddenIssuesInputs=[],this.$emit("execute")},setValue(s,e){const t=s.split(".");let n=t.pop(),o=!1;if(n!==void 0&&n.includes("[")){const a=n.match(/(.*)\[(\d+)\]$/);a&&(t.push(a[1]),n=a[2],o=!0)}if(t.length===0)e===null?S.delete(this.nodeValues,n):S.set(this.nodeValues,n,e);else if(e===null){let a=Ce(this.nodeValues,t.join("."));S.delete(a,n),o===!0&&a.length===0&&(n=t.pop(),a=Ce(this.nodeValues,t.join(".")),S.delete(a,n))}else typeof e=="object"?S.set(Ce(this.nodeValues,t.join(".")),n,ae(e)):S.set(Ce(this.nodeValues,t.join(".")),n,e)},credentialSelected(s){this.workflowsStore.updateNodeProperties(s);const e=this.workflowsStore.getNodeByName(s.name);e&&this.updateNodeCredentialIssues(e),this.$externalHooks().run("nodeSettings.credentialSelected",{updateInformation:s})},nameChanged(s){this.node&&this.historyStore.pushCommandToUndo(new Li(this.node.name,s)),this.valueChanged({value:s,name:"name"})},valueChanged(s){let e;s.hasOwnProperty("value")?e=s.value:e=Ce(this.nodeValues,s.name);const t=s.node||this.node.name,n=this.workflowsStore.getNodeByName(t);if(n!==null)if(s.name==="name"){const o={value:e,oldValue:t,name:s.name};this.$emit("valueChanged",o)}else if(s.name==="parameters"){const o=this.nodeTypesStore.getNodeType(n.type,n.typeVersion);if(!o)return;let a=Le(o.properties,n.parameters,!1,!1,n);const i=Object.assign({},a);a=ae(a);for(const r of Object.keys(s.value)){e=s.value[r];const l=r.split(".").slice(1).join("."),c=l.match(/(.*)\[(\d+)\]$/);if(s[r]===void 0&&c!==null){const h=c[1],f=c[2],u=Ce(a,h);Array.isArray(u)&&(u.splice(parseInt(f,10),1),S.set(a,h,u))}else e===void 0?Ss(a,l):vs(a,l,e);this.$externalHooks().run("nodeSettings.valueChanged",{parameterPath:l,newValue:e,parameters:this.parameters,oldNodeParameters:i})}a=Le(o.properties,a,!0,!1,n);for(const r of Object.keys(a))a&&a[r]!==null&&a[r]!==void 0&&this.setValue(`parameters.${r}`,a[r]);if(a){const r={name:n.name,value:a};this.workflowsStore.setNodeParameters(r),this.updateNodeParameterIssues(n,o),this.updateNodeCredentialIssues(n)}}else if(s.name.startsWith("parameters.")){const o=this.nodeTypesStore.getNodeType(n.type,n.typeVersion);if(!o)return;let a=Le(o.properties,n.parameters,!1,!1,n);const i=Object.assign({},a);a=ae(a);const r=s.name.split(".").slice(1).join("."),l=r.match(/(.*)\[(\d+)\]$/);if(s.value===void 0&&l!==null){const h=l[1],f=l[2],u=Ce(a,h);Array.isArray(u)&&(u.splice(parseInt(f,10),1),S.set(a,h,u))}else e===void 0?Ss(a,r):vs(a,r,e);a=Le(o.properties,a,!0,!1,n);for(const h of Object.keys(a))a&&a[h]!==null&&a[h]!==void 0&&this.setValue(`parameters.${h}`,a[h]);const c={name:n.name,value:a};this.workflowsStore.setNodeParameters(c),this.$externalHooks().run("nodeSettings.valueChanged",{parameterPath:r,newValue:e,parameters:this.parameters,oldNodeParameters:i}),this.updateNodeParameterIssues(n,o),this.updateNodeCredentialIssues(n)}else{S.set(this.nodeValues,s.name,e);const o={name:n.name,key:s.name,value:e};this.workflowsStore.setNodeValue(o)}},setNodeValues(){if(this.node)if(this.nodeType!==null){this.nodeValid=!0;const s=[];this.node.color&&(s.push("color"),S.set(this.nodeValues,"color",this.node.color)),this.node.notes&&(s.push("notes"),S.set(this.nodeValues,"notes",this.node.notes)),this.node.alwaysOutputData&&(s.push("alwaysOutputData"),S.set(this.nodeValues,"alwaysOutputData",this.node.alwaysOutputData)),this.node.executeOnce&&(s.push("executeOnce"),S.set(this.nodeValues,"executeOnce",this.node.executeOnce)),this.node.continueOnFail&&(s.push("continueOnFail"),S.set(this.nodeValues,"continueOnFail",this.node.continueOnFail)),this.node.notesInFlow&&(s.push("notesInFlow"),S.set(this.nodeValues,"notesInFlow",this.node.notesInFlow)),this.node.retryOnFail&&(s.push("retryOnFail"),S.set(this.nodeValues,"retryOnFail",this.node.retryOnFail)),this.node.maxTries&&(s.push("maxTries"),S.set(this.nodeValues,"maxTries",this.node.maxTries)),this.node.waitBetweenTries&&(s.push("waitBetweenTries"),S.set(this.nodeValues,"waitBetweenTries",this.node.waitBetweenTries));for(const e of this.nodeSettings)s.includes(e.name)||S.set(this.nodeValues,e.name,e.default);S.set(this.nodeValues,"parameters",ae(this.node.parameters))}else this.nodeValid=!1},onMissingNodeTextClick(s){s.target.localName==="a"&&this.$telemetry.track("user clicked cnr browse button",{source:"cnr missing node modal"})},onMissingNodeLearnMoreLinkClick(){this.$telemetry.track("user clicked cnr docs link",{source:"missing node modal source",package_name:this.node.type.split(".")[0],node_type:this.node.type})},onStopExecution(){this.$emit("stopExecution")},openSettings(){this.openPanel="settings"}},mounted(){var s;this.populateHiddenIssuesSet(),this.setNodeValues(),(s=this.eventBus)==null||s.on("openSettings",this.openSettings),this.updateNodeParameterIssues(this.node,this.nodeType)},destroyed(){var s;(s=this.eventBus)==null||s.off("openSettings",this.openSettings)}}),DE="_header_1pn0y_1",AE="_warningIcon_1pn0y_5",PE="_descriptionContainer_1pn0y_10",OE={header:DE,warningIcon:AE,descriptionContainer:PE};var ME=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{"node-settings":!0,dragging:e.dragging},on:{keydown:function(n){n.stopPropagation()}}},[t("div",{class:e.$style.header},[t("div",{staticClass:"header-side-menu"},[t("NodeTitle",{staticClass:"node-name",attrs:{value:e.node&&e.node.name,nodeType:e.nodeType,isReadOnly:e.isReadOnly},on:{input:e.nameChanged}}),e.isExecutable?t("div",[e.blockUI?e._e():t("NodeExecuteButton",{attrs:{"data-test-id":"node-execute-button",nodeName:e.node.name,disabled:e.outputPanelEditMode.enabled&&!e.isTriggerNode,size:"small",telemetrySource:"parameters"},on:{execute:e.onNodeExecute,stopExecution:e.onStopExecution}})],1):e._e()],1),e.node&&e.nodeValid?t("NodeSettingsTabs",{attrs:{nodeType:e.nodeType,sessionId:e.sessionId},model:{value:e.openPanel,callback:function(n){e.openPanel=n},expression:"openPanel"}}):e._e()],1),e.node&&!e.nodeValid?t("div",{staticClass:"node-is-not-valid"},[t("p",{class:e.$style.warningIcon},[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1),t("div",{staticClass:"missingNodeTitleContainer mt-s mb-xs"},[t("n8n-text",{attrs:{size:"large",color:"text-dark",bold:""}},[e._v(" "+e._s(e.$locale.baseText("nodeSettings.communityNodeUnknown.title"))+" ")])],1),e.isCommunityNode?t("div",{class:e.$style.descriptionContainer},[t("div",{staticClass:"mb-l"},[t("i18n",{attrs:{path:"nodeSettings.communityNodeUnknown.description",tag:"span"},on:{click:e.onMissingNodeTextClick},scopedSlots:e._u([{key:"action",fn:function(){return[t("a",{attrs:{href:`https://www.npmjs.com/package/${e.node.type.split(".")[0]}`,target:"_blank"}},[e._v(e._s(e.node.type.split(".")[0]))])]},proxy:!0}],null,!1,2018941802)})],1),t("n8n-link",{attrs:{to:e.COMMUNITY_NODES_INSTALLATION_DOCS_URL},on:{click:e.onMissingNodeLearnMoreLinkClick}},[e._v(" "+e._s(e.$locale.baseText("nodeSettings.communityNodeUnknown.installLink.text"))+" ")])],1):t("i18n",{attrs:{path:"nodeSettings.nodeTypeUnknown.description",tag:"span"},scopedSlots:e._u([{key:"action",fn:function(){return[t("a",{attrs:{href:e.CUSTOM_NODES_DOCS_URL,target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("nodeSettings.nodeTypeUnknown.description.customNode"))}})]},proxy:!0}],null,!1,895425313)})],1):e._e(),e.node&&e.nodeValid?t("div",{staticClass:"node-parameters-wrapper",attrs:{"data-test-id":"node-parameters"}},[e.hasForeignCredential?t("n8n-notice",{attrs:{content:e.$locale.baseText("nodeSettings.hasForeignCredential",{interpolate:{owner:e.credentialOwnerName}})}}):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.openPanel==="params",expression:"openPanel === 'params'"}]},[t("node-webhooks",{attrs:{node:e.node,nodeType:e.nodeType}}),t("parameter-input-list",{attrs:{parameters:e.parametersNoneSetting,hideDelete:!0,nodeValues:e.nodeValues,isReadOnly:e.isReadOnly,hiddenIssuesInputs:e.hiddenIssuesInputs,path:"parameters"},on:{valueChanged:e.valueChanged,activate:e.onWorkflowActivate,parameterBlur:e.onParameterBlur}},[t("node-credentials",{attrs:{node:e.node,readonly:e.isReadOnly,showAll:!0,"hide-issues":e.hiddenIssuesInputs.includes("credentials")},on:{credentialSelected:e.credentialSelected,valueChanged:e.valueChanged,blur:e.onParameterBlur}})],1),e.parametersNoneSetting.length===0?t("div",{staticClass:"no-parameters"},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("nodeSettings.thisNodeDoesNotHaveAnyParameters"))+" ")])],1):e._e(),e.isCustomApiCallSelected(e.nodeValues)?t("div",{staticClass:"parameter-item parameter-notice",attrs:{"data-test-id":"node-parameters-http-notice"}},[t("n8n-notice",{attrs:{content:e.$locale.baseText("nodeSettings.useTheHttpRequestNode",{interpolate:{nodeTypeDisplayName:e.nodeType.displayName}})}})],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.openPanel==="settings",expression:"openPanel === 'settings'"}]},[t("parameter-input-list",{attrs:{parameters:e.parametersSetting,nodeValues:e.nodeValues,isReadOnly:e.isReadOnly,hiddenIssuesInputs:e.hiddenIssuesInputs,path:"parameters"},on:{valueChanged:e.valueChanged,parameterBlur:e.onParameterBlur}}),t("parameter-input-list",{attrs:{parameters:e.nodeSettings,hideDelete:!0,nodeValues:e.nodeValues,isReadOnly:e.isReadOnly,hiddenIssuesInputs:e.hiddenIssuesInputs,path:""},on:{valueChanged:e.valueChanged,parameterBlur:e.onParameterBlur}})],1)],1):e._e(),t("n8n-block-ui",{attrs:{show:e.blockUI}})],1)},RE=[];const na={$style:OE};function LE(s){for(var e in na)this[e]=na[e]}var WE=p(IE,ME,RE,!1,LE,null,null,null);const vr=WE.exports,BE=C({name:"draggable",components:{Teleport:Yh},props:{disabled:{type:Boolean},type:{type:String},data:{type:String},tag:{type:String,default:"div"},targetDataKey:{type:String}},data(){const s={x:-100,y:-100};return{isDragging:!1,draggablePosition:s,draggingEl:null,draggableStyle:{transform:`translate(${s.x}px, ${s.y}px)`},animationFrameId:0}},computed:{...b(ce),canDrop(){return this.ndvStore.canDraggableDrop},stickyPosition(){return this.ndvStore.draggableStickyPos}},methods:{setDraggableStyle(){this.draggableStyle={transform:`translate(${this.draggablePosition.x}px, ${this.draggablePosition.y}px)`}},onDragStart(s){var t,n,o;if(this.disabled||(this.draggingEl=s.target,this.targetDataKey&&((t=this.draggingEl.dataset)==null?void 0:t.target)!==this.targetDataKey&&(this.draggingEl=this.draggingEl.closest(`[data-target="${this.targetDataKey}"]`)),this.targetDataKey&&((o=(n=this.draggingEl)==null?void 0:n.dataset)==null?void 0:o.target)!==this.targetDataKey))return;s.preventDefault(),s.stopPropagation(),this.isDragging=!1,this.draggablePosition={x:s.pageX,y:s.pageY},this.setDraggableStyle(),window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.onDragEnd);const e=document.activeElement;e&&e.blur()},onDrag(s){if(s.preventDefault(),s.stopPropagation(),!this.disabled){if(!this.isDragging){this.isDragging=!0;const e=this.targetDataKey&&this.draggingEl?this.draggingEl.dataset.value:this.data||"";this.ndvStore.draggableStartDragging({type:this.type,data:e||""}),this.$emit("dragstart",this.draggingEl),document.body.style.cursor="grabbing"}this.animationFrameId=window.requestAnimationFrame(()=>{this.canDrop&&this.stickyPosition?this.draggablePosition={x:this.stickyPosition[0],y:this.stickyPosition[1]}:this.draggablePosition={x:s.pageX,y:s.pageY},this.setDraggableStyle(),this.$emit("drag",this.draggablePosition)})}},onDragEnd(){this.disabled||(document.body.style.cursor="unset",window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.onDragEnd),window.cancelAnimationFrame(this.animationFrameId),setTimeout(()=>{this.$emit("dragend",this.draggingEl),this.isDragging=!1,this.draggingEl=null,this.ndvStore.draggableStopDragging()},0))}}}),UE="_dragging_176yl_1",FE="_draggable_176yl_6",VE={dragging:UE,draggable:FE,"draggable-data-transfer":"_draggable-data-transfer_176yl_13"};var zE=function(){var e=this,t=e._self._c;return e._self._setupProxy,t(e.tag,{ref:"wrapper",tag:"component",class:{[e.$style.dragging]:e.isDragging},on:{mousedown:e.onDragStart}},[e._t("default",null,{isDragging:e.isDragging}),t("Teleport",{attrs:{to:"body"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],ref:"draggable",class:e.$style.draggable,style:e.draggableStyle},[e._t("preview",null,{canDrop:e.canDrop,el:e.draggingEl})],2)])],2)},jE=[];const oa={$style:VE};function KE(s){for(var e in oa)this[e]=oa[e]}var HE=p(BE,zE,jE,!1,KE,null,null,null);const GE=HE.exports,qE=C({components:{Draggable:GE},props:{canMoveRight:{type:Boolean},canMoveLeft:{type:Boolean}},methods:{onDrag(s){this.$emit("drag",s)},onDragStart(){this.$emit("dragstart")},onDragEnd(){this.$emit("dragend")}}}),YE="_dragContainer_1fum9_1",XE="_dragButton_1fum9_5",JE="_leftArrow_1fum9_19 _arrow_1fum9_28",QE="_rightArrow_1fum9_20 _arrow_1fum9_28",ZE="_visible_1fum9_24",eC="_arrow_1fum9_28",tC="_grid_1fum9_46",sC={dragContainer:YE,dragButton:XE,leftArrow:JE,rightArrow:QE,visible:ZE,arrow:eC,grid:tC};var nC=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Draggable",{class:e.$style.dragContainer,attrs:{type:"panel-resize"},on:{drag:e.onDrag,dragstart:e.onDragStart,dragend:e.onDragEnd},scopedSlots:e._u([{key:"default",fn:function({isDragging:n}){return[t("div",{class:{[e.$style.dragButton]:!0}},[e.canMoveLeft?t("span",{class:{[e.$style.leftArrow]:!0,[e.$style.visible]:n}},[t("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1):e._e(),e.canMoveRight?t("span",{class:{[e.$style.rightArrow]:!0,[e.$style.visible]:n}},[t("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1):e._e(),t("div",{class:e.$style.grid},[t("div",[t("div"),t("div"),t("div"),t("div"),t("div")]),t("div",[t("div"),t("div"),t("div"),t("div"),t("div")])])])]}}])})},oC=[];const aa={$style:sC};function aC(s){for(var e in aa)this[e]=aa[e]}var iC=p(qE,nC,oC,!1,aC,null,null,null);const rC=iC.exports,Ve=24,ia=80,tt=280,lC=320,cC=420,dC={regular:st,dragless:st,unknown:st,inputless:st,wide:st*2},uC=x(Ie).extend({name:"NDVDraggablePanels",components:{PanelDragButton:rC},props:{isDraggable:{type:Boolean},hideInputAndOutput:{type:Boolean},position:{type:Number},nodeType:{type:Object,default:()=>({})}},data(){return{windowWidth:1,isDragging:!1,MIN_PANEL_WIDTH:tt,initialized:!1}},mounted(){this.setTotalWidth(),this.mainPanelDimensions.relativeLeft===1&&this.mainPanelDimensions.relativeRight===1&&(this.setMainPanelWidth(),this.setPositions(this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth)),this.restorePositionData()),window.addEventListener("resize",this.setTotalWidth),this.$emit("init",{position:this.mainPanelDimensions.relativeLeft}),setTimeout(()=>{this.initialized=!0},0)},destroyed(){window.removeEventListener("resize",this.setTotalWidth)},computed:{...b(ce),mainPanelDimensions(){return this.ndvStore.getMainPanelDimensions(this.currentNodePaneType)},supportedResizeDirections(){const s=["right"];return this.isDraggable&&s.push("left"),s},currentNodePaneType(){return this.hasInputSlot?this.isDraggable?this.nodeType===null?"unknown":Ce(this,"nodeType.parameterPane")||"regular":"dragless":"inputless"},hasInputSlot(){return this.$slots.input!==void 0},inputPanelMargin(){return this.pxToRelativeWidth(ia)},minWindowWidth(){return 2*(Ve+ia)+tt},minimumLeftPosition(){return this.windowWidth<this.minWindowWidth?this.pxToRelativeWidth(1):this.hasInputSlot?this.pxToRelativeWidth(Ve+20)+this.inputPanelMargin:this.pxToRelativeWidth(Ve)},maximumRightPosition(){return this.windowWidth<this.minWindowWidth?this.pxToRelativeWidth(1):this.pxToRelativeWidth(Ve+20)+this.inputPanelMargin},canMoveLeft(){return this.mainPanelDimensions.relativeLeft>this.minimumLeftPosition},canMoveRight(){return this.mainPanelDimensions.relativeRight>this.maximumRightPosition},mainPanelStyles(){return{left:`${this.relativeWidthToPx(this.mainPanelDimensions.relativeLeft)}px`,right:`${this.relativeWidthToPx(this.mainPanelDimensions.relativeRight)}px`}},inputPanelStyles(){return{right:`${this.relativeWidthToPx(this.calculatedPositions.inputPanelRelativeRight)}px`}},outputPanelStyles(){return{left:`${this.relativeWidthToPx(this.calculatedPositions.outputPanelRelativeLeft)}px`,transform:`translateX(-${this.relativeWidthToPx(this.outputPanelRelativeTranslate)}px)`}},calculatedPositions(){const s=this.$slots.input!==void 0,e=this.mainPanelDimensions.relativeLeft+this.mainPanelDimensions.relativeWidth;return{inputPanelRelativeRight:s?1-e+this.mainPanelDimensions.relativeWidth:1-this.pxToRelativeWidth(Ve),outputPanelRelativeLeft:e}},outputPanelRelativeTranslate(){const s=1-this.pxToRelativeWidth(tt+Ve),e=this.calculatedPositions.outputPanelRelativeLeft-s;return e>0?e:0},hasDoubleWidth(){return Ce(this,"nodeType.parameterPane")==="wide"},fixedPanelWidth(){const s=this.hasDoubleWidth?2:1;return this.windowWidth>1700?cC*s:lC*s},isBelowMinWidthMainPanel(){const s=this.pxToRelativeWidth(tt);return this.mainPanelDimensions.relativeWidth<s}},watch:{windowWidth(s){const e=this.pxToRelativeWidth(tt);this.isBelowMinWidthMainPanel&&this.setMainPanelWidth(e);const t=this.minimumLeftPosition>this.mainPanelDimensions.relativeLeft,n=this.maximumRightPosition>this.mainPanelDimensions.relativeRight;s>this.minWindowWidth&&t&&n&&(this.setMainPanelWidth(e),this.setPositions(this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth))),this.setPositions(this.mainPanelDimensions.relativeLeft)}},methods:{getInitialLeftPosition(s){return this.currentNodePaneType==="dragless"?this.pxToRelativeWidth(Ve+1+this.fixedPanelWidth):this.hasInputSlot?.5-s/2:this.minimumLeftPosition},setMainPanelWidth(s){const e=s||this.pxToRelativeWidth(dC[this.currentNodePaneType]);this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeWidth:e}})},setPositions(s){const e=s||1-this.calculatedPositions.inputPanelRelativeRight,t=1-e-this.mainPanelDimensions.relativeWidth,n=this.maximumRightPosition>t,o=this.minimumLeftPosition>e,a=this.currentNodePaneType==="inputless";if(o){this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeLeft:this.minimumLeftPosition,relativeRight:1-this.mainPanelDimensions.relativeWidth-this.minimumLeftPosition}});return}if(n){this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeLeft:1-this.mainPanelDimensions.relativeWidth-this.maximumRightPosition,relativeRight:this.maximumRightPosition}});return}this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeLeft:a?this.minimumLeftPosition:e,relativeRight:t}})},pxToRelativeWidth(s){return s/this.windowWidth},relativeWidthToPx(s){return s*this.windowWidth},onResizeStart(){this.setTotalWidth()},onResizeEnd(){this.storePositionData()},onResizeDebounced(s){this.initialized&&this.callDebounced("onResize",{debounceTime:10,trailing:!0},s)},onResize({direction:s,x:e,width:t}){const n=this.pxToRelativeWidth(e),o=this.pxToRelativeWidth(t);s==="left"&&n<=this.minimumLeftPosition||s==="right"&&1-n<=this.maximumRightPosition||t<=tt||(this.setMainPanelWidth(o),this.setPositions(s==="left"?n:this.mainPanelDimensions.relativeLeft))},restorePositionData(){const s=window.localStorage.getItem(`${yn}_${this.currentNodePaneType}`);if(s){const e=parseFloat(s);this.setMainPanelWidth(e);const t=this.getInitialLeftPosition(e);return this.setPositions(t),!0}return!1},storePositionData(){window.localStorage.setItem(`${yn}_${this.currentNodePaneType}`,this.mainPanelDimensions.relativeWidth.toString())},onDragStart(){this.isDragging=!0,this.$emit("dragstart",{position:this.mainPanelDimensions.relativeLeft})},onDrag(s){const e=this.pxToRelativeWidth(s.x)-this.mainPanelDimensions.relativeWidth/2;this.setPositions(e)},onDragEnd(){setTimeout(()=>{this.isDragging=!1,this.$emit("dragend",{windowWidth:this.windowWidth,position:this.mainPanelDimensions.relativeLeft})},0),this.storePositionData()},setTotalWidth(){this.windowWidth=window.innerWidth},close(){this.$emit("close")}}}),hC="_dataPanel_a6j4o_1",pC="_inputPanel_a6j4o_10 _dataPanel_a6j4o_1",fC="_outputPanel_a6j4o_18 _dataPanel_a6j4o_1",mC="_mainPanel_a6j4o_26",gC="_draggable_a6j4o_30",_C="_mainPanelInner_a6j4o_34",vC="_dragging_a6j4o_41",wC="_dragButtonContainer_a6j4o_54",yC="_visible_a6j4o_70",bC={dataPanel:hC,inputPanel:pC,outputPanel:fC,mainPanel:mC,draggable:gC,mainPanelInner:_C,dragging:vC,"double-width":"_double-width_a6j4o_50",dragButtonContainer:wC,visible:yC};var xC=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e.hideInputAndOutput?e._e():t("div",{class:e.$style.inputPanel,style:e.inputPanelStyles},[e._t("input")],2),e.hideInputAndOutput?e._e():t("div",{class:e.$style.outputPanel,style:e.outputPanelStyles},[e._t("output")],2),t("div",{class:e.$style.mainPanel,style:e.mainPanelStyles},[t("n8n-resize-wrapper",{attrs:{isResizingEnabled:e.currentNodePaneType!=="unknown",width:e.relativeWidthToPx(e.mainPanelDimensions.relativeWidth),minWidth:e.MIN_PANEL_WIDTH,gridSize:20,supportedDirections:e.supportedResizeDirections},on:{resize:e.onResizeDebounced,resizestart:e.onResizeStart,resizeend:e.onResizeEnd}},[t("div",{class:e.$style.dragButtonContainer},[!e.hideInputAndOutput&&e.isDraggable?t("PanelDragButton",{class:{[e.$style.draggable]:!0,[e.$style.visible]:e.isDragging},attrs:{canMoveLeft:e.canMoveLeft,canMoveRight:e.canMoveRight},on:{dragstart:e.onDragStart,drag:e.onDrag,dragend:e.onDragEnd}}):e._e()],1),t("div",{class:{[e.$style.mainPanelInner]:!0,[e.$style.dragging]:e.isDragging}},[e._t("main")],2)])],1)])},TC=[];const ra={$style:bC};function kC(s){for(var e in ra)this[e]=ra[e]}var SC=p(uC,xC,TC,!1,kC,null,null,null);const $C=SC.exports,EC=S.extend({name:"BinaryDataDisplayEmbed",components:{VueJsonPretty:Gi},props:{binaryData:{type:Object,required:!0}},data(){return{isLoading:!0,embedSource:"",error:!1,jsonData:""}},computed:{...b(B)},async mounted(){const{id:s,data:e,fileName:t,fileType:n,mimeType:o}=this.binaryData||{},a=n==="json";if(!s)a?this.jsonData=fi(atob(e)):this.embedSource="data:"+o+";base64,"+e;else try{const i=this.workflowsStore.getBinaryUrl(s,"view",t,o);a?this.jsonData=await(await fetch(i)).json():this.embedSource=i}catch(i){this.error=!0}this.isLoading=!1},methods:{embedClass(){const{fileType:s}=this.binaryData||{};return[s!=null?s:"other"]}}});var CC=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("span",[e.isLoading?t("div",[e._v("Loading binary data...")]):e.error?t("div",[e._v("Error loading binary data")]):t("span",[e.binaryData.fileType==="video"?t("video",{attrs:{controls:"",autoplay:""}},[t("source",{attrs:{src:e.embedSource,type:e.binaryData.mimeType}}),e._v(" "+e._s(e.$locale.baseText("binaryDataDisplay.yourBrowserDoesNotSupport"))+" ")]):e.binaryData.fileType==="json"?t("vue-json-pretty",{attrs:{data:e.jsonData,deep:3,showLength:!0}}):t("embed",{staticClass:"binary-data",class:e.embedClass(),attrs:{src:e.embedSource}})],1)])},NC=[],IC=p(EC,CC,NC,!1,null,null,null,null);const DC=IC.exports,AC=x(Be).extend({name:"BinaryDataDisplay",components:{BinaryDataDisplayEmbed:DC},props:["displayData","windowVisible"],computed:{...b(B),binaryData(){const s=this.getBinaryData(this.workflowRunData,this.displayData.node,this.displayData.runIndex,this.displayData.outputIndex);return s.length===0||this.displayData.index>=s.length||s[this.displayData.index][this.displayData.key]===void 0?null:s[this.displayData.index][this.displayData.key]},workflowRunData(){const s=this.workflowsStore.getWorkflowExecution;if(s===null)return null;const e=s.data;return e?e.resultData.runData:null}},methods:{closeWindow(){return this.$emit("close"),!1}}});var PC=function(){var n;var e=this,t=e._self._c;return e._self._setupProxy,e.windowVisible?t("div",{class:["binary-data-window",(n=e.binaryData)==null?void 0:n.fileType]},[t("n8n-button",{staticClass:"binary-data-window-back",attrs:{size:"small",title:e.$locale.baseText("binaryDataDisplay.backToOverviewPage"),icon:"arrow-left",label:e.$locale.baseText("binaryDataDisplay.backToList")},on:{click:function(o){return o.stopPropagation(),e.closeWindow.apply(null,arguments)}}}),t("div",{staticClass:"binary-data-window-wrapper"},[e.binaryData?t("BinaryDataDisplayEmbed",{attrs:{binaryData:e.binaryData}}):t("div",[e._v(" "+e._s(e.$locale.baseText("binaryDataDisplay.noDataFoundToDisplay"))+" ")])],1)],1):e._e()},OC=[],MC=p(AC,PC,OC,!1,null,null,null,null);const RC=MC.exports,LC=x(Je,D).extend({name:"NodeErrorView",props:["error"],components:{VueJsonPretty:Gi},computed:{...b(le,ce),displayCause(){return JSON.stringify(this.error.cause).length<Wi},parameters(){const s=this.ndvStore.activeNode;if(!s)return[];const e=this.nodeTypesStore.getNodeType(s.type,s.typeVersion);return e===null?[]:e.properties}},methods:{replacePlaceholders(s,e){const t=this.parameterDisplayName(s,!1),n=this.parameterDisplayName(s,!0);return e.replace(/%%PARAMETER%%/g,t).replace(/%%PARAMETER_FULL%%/g,n)},getErrorDescription(){if(!this.error.context||!this.error.context.descriptionTemplate)return Ut(this.error.description);const s=this.parameterDisplayName(this.error.context.parameter);return Ut(this.error.context.descriptionTemplate.replace(/%%PARAMETER%%/g,s))},getErrorMessage(){const s=this.$locale.baseText("nodeErrorView.error")+": ";if(!this.error.context||!this.error.context.messageTemplate)return s+this.error.message;const e=this.parameterDisplayName(this.error.context.parameter);return s+this.error.context.messageTemplate.replace(/%%PARAMETER%%/g,e)},parameterDisplayName(s,e=!0){try{const t=this.parameterName(this.parameters,s.split("."));if(!t.length)throw new Error;return e===!1?t.pop().displayName:t.map(n=>n.displayName).join(" > ")}catch(t){return`Could not find parameter "${s}"`}},parameterName(s,e){let t=e.shift();if(t===void 0)return[];const n=t.match(/(.*)\[([\d])\]$/);n!==null&&n.length>0&&(t=n[1]);const o=s.find(a=>a.name===t);if(o===void 0)throw new Error(`Could not find parameter "${t}"`);return e.length===0?[o]:o.hasOwnProperty("options")?[o,...this.parameterName(o.options,e)]:o.hasOwnProperty("values")?[o,...this.parameterName(o.values,e)]:[o]},copyCause(){this.copyToClipboard(JSON.stringify(this.error.cause)),this.copySuccess()},copySuccess(){this.$showMessage({title:this.$locale.baseText("nodeErrorView.showMessage.title"),type:"info"})}}});var WC=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{staticClass:"error-header"},[t("div",{staticClass:"error-message"},[e._v(e._s(e.getErrorMessage()))]),e.error.description?t("div",{staticClass:"error-description",domProps:{innerHTML:e._s(e.getErrorDescription())}}):e._e()]),t("details",[t("summary",{staticClass:"error-details__summary"},[t("font-awesome-icon",{staticClass:"error-details__icon",attrs:{icon:"angle-right"}}),e._v(" "+e._s(e.$locale.baseText("nodeErrorView.details"))+" ")],1),t("div",{staticClass:"error-details__content"},[e.error.context&&e.error.context.causeDetailed?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",[e._v(" "+e._s(e.error.context.causeDetailed)+" ")])])],1):e._e(),e.error.timestamp?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"clearfix box-card__title"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.time")))])])]},proxy:!0}],null,!1,910883321)},[t("div",[e._v(" "+e._s(new Date(e.error.timestamp).toLocaleString())+" ")])])],1):e._e(),e.error.context&&e.error.context.itemIndex!==void 0?t("div",{staticClass:"el-card box-card is-never-shadow el-card__body"},[t("span",{staticClass:"error-details__summary"},[e._v(e._s(e.$locale.baseText("nodeErrorView.itemIndex"))+":")]),e._v(" "+e._s(e.error.context.itemIndex)+" "),e.error.context.runIndex?t("span",[e._v(" | "),t("span",{staticClass:"error-details__summary"},[e._v(e._s(e.$locale.baseText("nodeErrorView.itemIndex"))+":")]),e._v(" "+e._s(e.error.context.runIndex)+" ")]):e._e(),e.error.context.parameter?t("span",[e._v(" | "),t("span",{staticClass:"error-details__summary"},[e._v(e._s(e.$locale.baseText("nodeErrorView.inParameter"))+":")]),e._v(" "+e._s(e.parameterDisplayName(e.error.context.parameter))+" ")]):e._e()]):e._e(),e.error.httpCode?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"clearfix box-card__title"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.httpCode")))])])]},proxy:!0}],null,!1,1881807705)},[t("div",[e._v(" "+e._s(e.error.httpCode)+" ")])])],1):e._e(),e.error.cause?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"clearfix box-card__title"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.cause")))]),t("br"),t("span",{staticClass:"box-card__subtitle"},[e._v(e._s(e.$locale.baseText("nodeErrorView.dataBelowMayContain")))])])]},proxy:!0}],null,!1,2286593606)},[t("div",[e.displayCause?t("div",{staticClass:"copy-button"},[t("n8n-icon-button",{attrs:{title:e.$locale.baseText("nodeErrorView.copyToClipboard"),icon:"copy"},on:{click:e.copyCause}})],1):e._e(),e.displayCause?t("vue-json-pretty",{staticClass:"json-data",attrs:{data:e.error.cause,deep:3,showLength:!0,selectableType:"single",path:"error"}}):t("span",[t("font-awesome-icon",{attrs:{icon:"info-circle"}}),e._v(e._s(e.$locale.baseText("nodeErrorView.theErrorCauseIsTooLargeToBeDisplayed"))+" ")],1)],1)])],1):e._e(),e.error.stack?t("div",[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"clearfix box-card__title"},[t("span",[e._v(e._s(e.$locale.baseText("nodeErrorView.stack")))])])]},proxy:!0}],null,!1,1216729506)},[t("div",[t("pre",[t("code",[e._v(e._s(e.error.stack))])])])])],1):e._e()])])])},BC=[],UC=p(LC,WC,BC,!1,null,null,null,null);const FC=UC.exports,VC=async()=>Xe(()=>import("./RunDataTable-eb563a78.js"),["assets/RunDataTable-eb563a78.js","assets/axios-f993d27a.js","assets/n8n-8025af5e.js","assets/vendor-df0f493f.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/ParameterInputList-a8424193.js","assets/pinia-ba86f1d8.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css","assets/MappingPill-ddae2198.js","assets/MappingPill-35c1996e.css","assets/@fortawesome/free-solid-svg-icons-a2911fb5.js","assets/@fortawesome/free-regular-svg-icons-74cb85f8.js","assets/@fortawesome/vue-fontawesome-1701eda0.js","assets/vue2-touch-events-2bad05e9.js","assets/v-click-outside-01179a04.js","assets/vue-fragment-f3d0cc79.js","assets/vue-agile-00cde7d9.js","assets/vue-agile-d964f598.css","assets/timeago.js-a9e71aec.js","assets/canvas-confetti-60b90aac.js","assets/file-saver-d988540e.js","assets/vue2-teleport-53e66c3b.js","assets/vue-json-pretty-49f1c0cb.js","assets/humanize-duration-3471cd08.js","assets/vue-infinite-loading-8e5543e4.js","assets/copy-to-clipboard-fcf36459.js","assets/RunDataTable-085a10fc.css"]),zC=async()=>Xe(()=>import("./RunDataJson-d0759af6.js").then(s=>s.R),["assets/RunDataJson-d0759af6.js","assets/ParameterInputList-a8424193.js","assets/n8n-8025af5e.js","assets/vendor-df0f493f.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/pinia-ba86f1d8.js","assets/axios-f993d27a.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css","assets/vue-json-pretty-49f1c0cb.js","assets/MappingPill-ddae2198.js","assets/MappingPill-35c1996e.css","assets/jsonpath-da3897e0.js","assets/RunDataJson-3823e462.css"]),jC=async()=>Xe(()=>import("./RunDataSchema-8211023d.js"),["assets/RunDataSchema-8211023d.js","assets/vendor-df0f493f.js","assets/axios-f993d27a.js","assets/n8n-8025af5e.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/ParameterInputList-a8424193.js","assets/pinia-ba86f1d8.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css","assets/MappingPill-ddae2198.js","assets/MappingPill-35c1996e.css","assets/@fortawesome/free-solid-svg-icons-a2911fb5.js","assets/@fortawesome/free-regular-svg-icons-74cb85f8.js","assets/@fortawesome/vue-fontawesome-1701eda0.js","assets/vue2-touch-events-2bad05e9.js","assets/v-click-outside-01179a04.js","assets/vue-fragment-f3d0cc79.js","assets/vue-agile-00cde7d9.js","assets/vue-agile-d964f598.css","assets/timeago.js-a9e71aec.js","assets/canvas-confetti-60b90aac.js","assets/file-saver-d988540e.js","assets/vue2-teleport-53e66c3b.js","assets/vue-json-pretty-49f1c0cb.js","assets/humanize-duration-3471cd08.js","assets/vue-infinite-loading-8e5543e4.js","assets/copy-to-clipboard-fcf36459.js","assets/RunDataSchema-db860d81.css"]),KC=async()=>Xe(()=>import("./RunDataHtml-e947b70d.js"),["assets/RunDataHtml-e947b70d.js","assets/n8n-8025af5e.js","assets/vendor-df0f493f.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/RunDataHtml-f5d948a5.css"]),HC=x(xe,he,Be,Tt).extend({name:"RunData",components:{BinaryDataDisplay:RC,NodeErrorView:FC,WarningTooltip:js,CodeNodeEditor:eh,RunDataTable:VC,RunDataJson:zC,RunDataSchema:jC,RunDataHtml:KC},props:{nodeUi:{type:Object},runIndex:{type:Number},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},tooMuchDataTitle:{type:String},noDataInBranchMessage:{type:String},isExecuting:{type:Boolean},executingMessage:{type:String},sessionId:{type:String},paneType:{type:String},overrideOutputs:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},blockUI:{type:Boolean,default:!1},isProductionExecutionPreview:{type:Boolean,default:!1}},data(){return{binaryDataPreviewActive:!1,dataSize:0,showData:!1,outputIndex:0,binaryDataDisplayVisible:!1,binaryDataDisplayData:null,MAX_DISPLAY_DATA_SIZE:Wi,MAX_DISPLAY_ITEMS_AUTO_ALL:th,currentPage:1,pageSize:10,pageSizes:[10,25,50,100],pinDataDiscoveryTooltipVisible:!1,isControlledPinDataTooltip:!1}},mounted(){this.init(),this.isPaneTypeInput||(me.on("data-pinning-error",this.onDataPinningError),me.on("data-unpinning",this.onDataUnpinning),this.showPinDataDiscoveryTooltip(this.jsonData)),this.ndvStore.setNDVBranchIndex({pane:this.paneType,branchIndex:this.currentOutputIndex}),this.paneType==="output"&&this.setDisplayMode()},destroyed(){this.hidePinDataDiscoveryTooltip(),me.off("data-pinning-error",this.onDataPinningError),me.off("data-unpinning",this.onDataUnpinning)},computed:{...b(le,ce,B),activeNode(){return this.ndvStore.activeNode},dataPinningDocsUrl(){return sh},dataEditingDocsUrl(){return nh},displayMode(){return this.ndvStore.getPanelDisplayMode(this.paneType)},node(){return this.nodeUi||null},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},isSchemaView(){return this.displayMode==="schema"},isTriggerNode(){return this.nodeTypesStore.isTriggerNode(this.node.type)},canPinData(){return!this.isPaneTypeInput&&this.isPinDataNodeType&&!(this.binaryData&&this.binaryData.length>0)},buttons(){var t;const s=[{label:this.$locale.baseText("runData.table"),value:"table"},{label:this.$locale.baseText("runData.json"),value:"json"}];this.binaryData.length&&s.push({label:this.$locale.baseText("runData.binary"),value:"binary"});const e={label:this.$locale.baseText("runData.schema"),value:"schema"};return this.isPaneTypeInput?s.unshift(e):s.push(e),this.isPaneTypeOutput&&((t=this.activeNode)==null?void 0:t.type)===bn&&this.activeNode.parameters.operation==="generateHtmlTemplate"&&s.unshift({label:"HTML",value:"html"}),s},hasNodeRun(){return Boolean(!this.isExecuting&&this.node&&(this.workflowRunData&&this.workflowRunData.hasOwnProperty(this.node.name)||this.hasPinData))},isArtificialRecoveredEventItem(){var s,e,t;return((t=(e=(s=this.inputData)==null?void 0:s[0])==null?void 0:e.json)==null?void 0:t.isArtificialRecoveredEventItem)!==void 0},subworkflowExecutionError(){return this.workflowsStore.subWorkflowExecutionError},hasSubworkflowExecutionError(){return Boolean(this.subworkflowExecutionError)},hasRunError(){return Boolean(this.node&&this.workflowRunData&&this.workflowRunData[this.node.name]&&this.workflowRunData[this.node.name][this.runIndex]&&this.workflowRunData[this.node.name][this.runIndex].error)},workflowExecution(){return this.workflowsStore.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const s=this.workflowExecution.data;return s&&s.resultData?s.resultData.runData:null},dataCount(){return this.getDataCount(this.runIndex,this.currentOutputIndex)},dataSizeInMB(){return(this.dataSize/1024/1e3).toLocaleString()},maxOutputIndex(){if(this.node===null)return 0;const s=this.workflowRunData;if(s===null||!s.hasOwnProperty(this.node.name)||s[this.node.name].length<this.runIndex)return 0;if(s[this.node.name][this.runIndex]){const e=s[this.node.name][this.runIndex].data;if(e&&e.main)return e.main.length-1}return 0},currentPageOffset(){return this.pageSize*(this.currentPage-1)},maxRunIndex(){if(this.node===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.node.name)?0:s[this.node.name].length?s[this.node.name].length-1:0},rawInputData(){let s=[];return this.node&&(s=this.getNodeInputData(this.node,this.runIndex,this.currentOutputIndex)),s.length===0||!Array.isArray(s)?[]:s},inputData(){let s=this.rawInputData;if(this.node&&this.pinData&&!this.isProductionExecutionPreview&&(s=Array.isArray(this.pinData)?this.pinData.map(t=>({json:t})):[{json:this.pinData}]),this.isSchemaView)return s;const e=this.pageSize*(this.currentPage-1);return s=s.slice(e,e+this.pageSize),s},jsonData(){return xn(this.inputData)},binaryData(){return this.node?this.getBinaryData(this.workflowRunData,this.node.name,this.runIndex,this.currentOutputIndex).filter(e=>Boolean(e&&Object.keys(e).length)):[]},currentOutputIndex(){return this.overrideOutputs&&this.overrideOutputs.length&&!this.overrideOutputs.includes(this.outputIndex)?this.overrideOutputs[0]:this.outputIndex},branches(){var t;function s(n){return n.charAt(0).toLocaleUpperCase()+n.slice(1)}const e=[];for(let n=0;n<=this.maxOutputIndex;n++){if(this.overrideOutputs&&!this.overrideOutputs.includes(n))continue;const o=this.getDataCount(this.runIndex,n),a=this.$locale.baseText("ndv.output.items",{adjustToNumber:o});let i=this.getOutputName(n);if(`${i}`==`${n}`)i=`${this.$locale.baseText("ndv.output")} ${i}`;else{const r=oh.includes((t=this.node)==null?void 0:t.type)?"":` ${this.$locale.baseText("ndv.output.branch")}`;i=s(`${this.getOutputName(n)}${r}`)}e.push({label:o?`${i} (${o} ${a})`:i,value:n})}return e},editMode(){return this.isPaneTypeInput?{enabled:!1,value:""}:this.ndvStore.outputPanelEditMode},isPaneTypeInput(){return this.paneType==="input"},isPaneTypeOutput(){return this.paneType==="output"}},methods:{onItemHover(s){if(s===null){this.$emit("itemHover",null);return}this.$emit("itemHover",{outputIndex:this.currentOutputIndex,itemIndex:s})},onClickDataPinningDocsLink(){var s;this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,node_type:(s=this.activeNode)==null?void 0:s.type,pane:"output",type:"data-pinning-docs"})},showPinDataDiscoveryTooltip(s){this.isTriggerNode&&s&&s.length>0&&!this.isReadOnly&&!localStorage.getItem(Tn)&&(this.pinDataDiscoveryComplete(),setTimeout(()=>{this.isControlledPinDataTooltip=!0,this.pinDataDiscoveryTooltipVisible=!0,me.emit("data-pinning-discovery",{isTooltipVisible:!0})},500))},hidePinDataDiscoveryTooltip(){this.pinDataDiscoveryTooltipVisible&&(this.isControlledPinDataTooltip=!1,this.pinDataDiscoveryTooltipVisible=!1,me.emit("data-pinning-discovery",{isTooltipVisible:!1}))},pinDataDiscoveryComplete(){localStorage.setItem(Tn,"true"),localStorage.setItem(bs,"true")},enterEditMode({origin:s}){var n;const e=this.pinData?kn(this.pinData):xn(this.rawInputData),t=e.length>0?e:ah;this.ndvStore.setOutputPanelEditModeEnabled(!0),this.ndvStore.setOutputPanelEditModeValue(JSON.stringify(t,null,2)),this.$telemetry.track("User opened ndv edit state",{node_type:(n=this.activeNode)==null?void 0:n.type,click_type:s==="editIconButton"?"button":"link",session_id:this.sessionId,run_index:this.runIndex,is_output_present:this.hasNodeRun||this.hasPinData,view:!this.hasNodeRun&&!this.hasPinData?"undefined":this.displayMode,is_data_pinned:this.hasPinData})},onClickCancelEdit(){this.ndvStore.setOutputPanelEditModeEnabled(!1),this.ndvStore.setOutputPanelEditModeValue(""),this.onExitEditMode({type:"cancel"})},onClickSaveEdit(){const{value:s}=this.editMode;if(this.clearAllStickyNotifications(),!this.isValidPinDataSize(s)){this.onDataPinningError({errorType:"data-too-large",source:"save-edit"});return}if(!this.isValidPinDataJSON(s)){this.onDataPinningError({errorType:"invalid-json",source:"save-edit"});return}this.ndvStore.setOutputPanelEditModeEnabled(!1),this.workflowsStore.pinData({node:this.node,data:kn(s)}),this.onDataPinningSuccess({source:"save-edit"}),this.onExitEditMode({type:"save"})},onExitEditMode({type:s}){var e;this.$telemetry.track("User closed ndv edit state",{node_type:(e=this.activeNode)==null?void 0:e.type,session_id:this.sessionId,run_index:this.runIndex,view:this.displayMode,type:s})},onDataUnpinning({source:s}){var e;this.$telemetry.track("User unpinned ndv data",{node_type:(e=this.activeNode)==null?void 0:e.type,session_id:this.sessionId,run_index:this.runIndex,source:s,data_size:Lt(this.pinData)})},onDataPinningSuccess({source:s}){const e={pinning_source:s,node_type:this.activeNode.type,session_id:this.sessionId,data_size:Lt(this.pinData),view:this.displayMode,run_index:this.runIndex};this.$externalHooks().run("runData.onDataPinningSuccess",e),this.$telemetry.track("Ndv data pinning success",e)},onDataPinningError({errorType:s,source:e}){this.$telemetry.track("Ndv data pinning failure",{pinning_source:e,node_type:this.activeNode.type,session_id:this.sessionId,data_size:Lt(this.pinData),view:this.displayMode,run_index:this.runIndex,error_type:s})},async onTogglePinData({source:s}){if(s==="pin-icon-click"){const e={node_type:this.activeNode.type,session_id:this.sessionId,run_index:this.runIndex,view:!this.hasNodeRun&&!this.hasPinData?"none":this.displayMode};this.$externalHooks().run("runData.onTogglePinData",e),this.$telemetry.track("User clicked pin data icon",e)}if(this.updateNodeParameterIssues(this.node),this.hasPinData){this.onDataUnpinning({source:s}),this.workflowsStore.unpinData({node:this.node});return}if(!this.isValidPinDataSize(this.inputData)){this.onDataPinningError({errorType:"data-too-large",source:"pin-icon-click"});return}this.onDataPinningSuccess({source:"pin-icon-click"}),this.workflowsStore.pinData({node:this.node,data:this.inputData}),this.maxRunIndex>0&&this.$showToast({title:this.$locale.baseText("ndv.pinData.pin.multipleRuns.title",{interpolate:{index:`${this.runIndex}`}}),message:this.$locale.baseText("ndv.pinData.pin.multipleRuns.description"),type:"success",duration:2e3}),this.hidePinDataDiscoveryTooltip(),this.pinDataDiscoveryComplete()},switchToBinary(){this.onDisplayModeChange("binary")},onBranchChange(s){this.outputIndex=s,this.$telemetry.track("User changed ndv branch",{session_id:this.sessionId,branch_index:s,node_type:this.activeNode.type,node_type_input_selection:this.nodeType?this.nodeType.name:"",pane:this.paneType})},showTooMuchData(){this.showData=!0,this.$telemetry.track("User clicked ndv button",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:this.paneType,type:"showTooMuchData"})},linkRun(){this.$emit("linkRun")},unlinkRun(){this.$emit("unlinkRun")},onCurrentPageChange(){var s;this.$telemetry.track("User changed ndv page",{node_type:(s=this.activeNode)==null?void 0:s.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:this.paneType,page_selected:this.currentPage,page_size:this.pageSize,items_total:this.dataCount})},onPageSizeChange(s){var t;this.pageSize=s;const e=Math.ceil(this.dataCount/this.pageSize);e<this.currentPage&&(this.currentPage=e),this.$telemetry.track("User changed ndv page size",{node_type:(t=this.activeNode)==null?void 0:t.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:this.paneType,page_selected:this.currentPage,page_size:this.pageSize,items_total:this.dataCount})},onDisplayModeChange(s){const e=this.displayMode;this.ndvStore.setPanelDisplayMode({pane:this.paneType,mode:s});const t=this.$refs.dataContainer;if(t){const n=t.children[0];n&&n.scrollTo(0,0)}this.closeBinaryDataDisplay(),this.$externalHooks().run("runData.displayModeChanged",{newValue:s,oldValue:e}),this.activeNode&&this.$telemetry.track("User changed ndv item view",{previous_view:e,new_view:s,node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:this.paneType})},getRunLabel(s){let e=0;for(let o=0;o<=this.maxOutputIndex;o++)e+=this.getDataCount(s-1,o);const t=this.$locale.baseText("ndv.output.items",{adjustToNumber:e}),n=e>0?` (${e} ${t})`:"";return s+this.$locale.baseText("ndv.output.of")+(this.maxRunIndex+1)+n},getDataCount(s,e){if(this.pinData)return this.pinData.length;if(this.node===null)return 0;const t=this.workflowRunData;return t===null||!t.hasOwnProperty(this.node.name)||t[this.node.name].length<=s?0:t[this.node.name][s].hasOwnProperty("error")?1:!t[this.node.name][s].hasOwnProperty("data")||t[this.node.name][s].data===void 0?0:this.getMainInputData(t[this.node.name][s].data,e).length},init(){this.outputIndex=0,this.refreshDataSize(),this.closeBinaryDataDisplay(),this.binaryData.length>0?this.ndvStore.setPanelDisplayMode({pane:this.paneType,mode:"binary"}):this.displayMode==="binary"&&this.ndvStore.setPanelDisplayMode({pane:this.paneType,mode:"table"})},closeBinaryDataDisplay(){this.binaryDataDisplayVisible=!1,this.binaryDataDisplayData=null},clearExecutionData(){this.workflowsStore.setWorkflowExecutionData(null),this.updateNodesExecutionIssues()},isViewable(s,e){const{fileType:t}=this.binaryData[s][e];return!!t&&["image","video","text","json"].includes(t)},isDownloadable(s,e){const{mimeType:t,fileName:n}=this.binaryData[s][e];return!!(t&&n)},async downloadBinaryData(s,e){const{id:t,data:n,fileName:o,fileExtension:a,mimeType:i}=this.binaryData[s][e];if(t){const r=this.workflowsStore.getBinaryUrl(t,"download",o,i);$s.saveAs(r,[o,a].join("."));return}else{const r="data:"+i+";base64,"+n,l=await fetch(r).then(async c=>c.blob());$s.saveAs(l,o)}},displayBinaryData(s,e){this.binaryDataDisplayVisible=!0,this.binaryDataDisplayData={node:this.node.name,runIndex:this.runIndex,outputIndex:this.currentOutputIndex,index:s,key:e}},getOutputName(s){if(this.node===null)return s+1;const e=this.nodeType;return!e||!e.outputNames||e.outputNames.length<=s?s+1:e.outputNames[s]},refreshDataSize(){this.showData=!1;const s=this.getNodeInputData(this.node,this.runIndex,this.currentOutputIndex),e=this.pageSize*(this.currentPage-1),t=s.slice(e,e+this.pageSize).map(n=>n.json);this.dataSize=JSON.stringify(t).length,this.dataSize<this.MAX_DISPLAY_DATA_SIZE&&(this.showData=!0)},onRunIndexChange(s){this.$emit("runChange",s)},enableNode(){if(this.node){const s={name:this.node.name,properties:{disabled:!this.node.disabled}};this.workflowsStore.updateNodeProperties(s)}},setDisplayMode(){if(!this.activeNode)return;this.activeNode.type===bn&&this.activeNode.parameters.operation==="generateHtmlTemplate"&&this.ndvStore.setPanelDisplayMode({pane:"output",mode:"html"})}},watch:{node(){this.init()},hasNodeRun(){this.paneType==="output"&&this.setDisplayMode()},inputData:{handler(s){this.paneType&&s&&this.ndvStore.setNDVPanelDataIsEmpty({panel:this.paneType,isEmpty:s.every(e=>Ge(e.json))})},immediate:!0,deep:!0},jsonData(s){this.refreshDataSize(),this.showPinDataDiscoveryTooltip(s)},binaryData(s,e){s.length&&!e.length&&this.displayMode!=="binary"?this.switchToBinary():!s.length&&this.displayMode==="binary"&&this.onDisplayModeChange("table")},currentOutputIndex(s){this.ndvStore.setNDVBranchIndex({pane:this.paneType,branchIndex:s})}}}),GC="_infoIcon_zt0jk_1",qC="_center_zt0jk_5",YC="_container_zt0jk_19",XC="_pinnedDataCallout_zt0jk_28",JC="_header_zt0jk_36",QC="_dataContainer_zt0jk_50",ZC="_dataDisplay_zt0jk_58",eN="_tabs_zt0jk_70",tN="_itemsCount_zt0jk_74",sN="_runSelector_zt0jk_79",nN="_pagination_zt0jk_90",oN="_pageSizeSelector_zt0jk_100",aN="_binaryIndex_zt0jk_106",iN="_binaryRow_zt0jk_123",rN="_binaryCell_zt0jk_128",lN="_binaryHeader_zt0jk_140",cN="_binaryButtonContainer_zt0jk_149",dN="_binaryValue_zt0jk_160",uN="_displayModes_zt0jk_165",hN="_tooltipContain_zt0jk_171",pN="_pinDataButton_zt0jk_175",fN="_spinner_zt0jk_179",mN="_editMode_zt0jk_190",gN="_editModeBody_zt0jk_200",_N="_editModeFooter_zt0jk_207",vN="_editModeFooterInfotip_zt0jk_217",wN="_editModeActions_zt0jk_223",yN="_stretchVertically_zt0jk_230",bN="_uiBlocker_zt0jk_234",xN={infoIcon:GC,center:qC,container:YC,pinnedDataCallout:XC,header:JC,dataContainer:QC,"actions-group":"_actions-group_zt0jk_54",dataDisplay:ZC,tabs:eN,itemsCount:tN,runSelector:sN,pagination:nN,pageSizeSelector:oN,binaryIndex:aN,binaryRow:iN,binaryCell:rN,binaryHeader:lN,binaryButtonContainer:cN,binaryValue:dN,displayModes:uN,tooltipContain:hN,pinDataButton:pN,spinner:fN,editMode:mN,editModeBody:gN,editModeFooter:_N,editModeFooterInfotip:vN,editModeActions:wN,stretchVertically:yN,uiBlocker:bN};var TN=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:["run-data",e.$style.container]},[e.canPinData&&e.hasPinData&&!e.editMode.enabled&&!e.isProductionExecutionPreview?t("n8n-callout",{class:e.$style.pinnedDataCallout,attrs:{theme:"secondary",icon:"thumbtack"},scopedSlots:e._u([{key:"trailingContent",fn:function(){return[t("n8n-link",{attrs:{to:e.dataPinningDocsUrl,size:"small",theme:"secondary",bold:"",underline:""},on:{click:e.onClickDataPinningDocsLink}},[e._v(" "+e._s(e.$locale.baseText("runData.pindata.learnMore"))+" ")])]},proxy:!0}],null,!1,1222290153)},[e._v(" "+e._s(e.$locale.baseText("runData.pindata.thisDataIsPinned"))+" "),e.isReadOnly?e._e():t("span",{staticClass:"ml-4xs"},[t("n8n-link",{attrs:{theme:"secondary",size:"small",underline:"",bold:""},on:{click:function(n){return e.onTogglePinData({source:"banner-link"})}}},[e._v(" "+e._s(e.$locale.baseText("runData.pindata.unpin"))+" ")])],1)]):e._e(),t("BinaryDataDisplay",{attrs:{windowVisible:e.binaryDataDisplayVisible,displayData:e.binaryDataDisplayData},on:{close:e.closeBinaryDataDisplay}}),t("div",{class:e.$style.header},[e._t("header"),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasRunError,expression:"!hasRunError"}],class:e.$style.displayModes,attrs:{"data-test-id":"run-data-pane-header"},on:{click:function(n){n.stopPropagation()}}},[t("n8n-radio-buttons",{directives:[{name:"show",rawName:"v-show",value:e.hasNodeRun&&(e.jsonData&&e.jsonData.length>0||e.binaryData&&e.binaryData.length>0)&&!e.editMode.enabled,expression:`
					hasNodeRun &&
					((jsonData && jsonData.length > 0) || (binaryData && binaryData.length > 0)) &&
					!editMode.enabled
				`}],attrs:{value:e.displayMode,options:e.buttons,"data-test-id":"ndv-run-data-display-mode"},on:{input:e.onDisplayModeChange}}),e.canPinData&&!e.isReadOnly?t("n8n-icon-button",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],staticClass:"ml-2xs",attrs:{title:e.$locale.baseText("runData.editOutput"),circle:!1,disabled:e.node.disabled,icon:"pencil-alt",type:"tertiary","data-test-id":"ndv-edit-pinned-data"},on:{click:function(n){return e.enterEditMode({origin:"editIconButton"})}}}):e._e(),e.canPinData&&e.jsonData&&e.jsonData.length>0?t("n8n-tooltip",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],attrs:{placement:"bottom-end",value:e.pinDataDiscoveryTooltipVisible,manual:e.isControlledPinDataTooltip},scopedSlots:e._u([e.isControlledPinDataTooltip?{key:"content",fn:function(){return[t("div",{class:e.$style.tooltipContainer},[e._v(" "+e._s(e.$locale.baseText("node.discovery.pinData.ndv"))+" ")])]},proxy:!0}:{key:"content",fn:function(){return[t("div",{class:e.$style.tooltipContainer},[t("strong",[e._v(e._s(e.$locale.baseText("ndv.pinData.pin.title")))]),t("n8n-text",{attrs:{size:"small",tag:"p"}},[e._v(" "+e._s(e.$locale.baseText("ndv.pinData.pin.description"))+" "),t("n8n-link",{attrs:{to:e.dataPinningDocsUrl,size:"small"}},[e._v(" "+e._s(e.$locale.baseText("ndv.pinData.pin.link"))+" ")])],1)],1)]},proxy:!0}],null,!0)},[t("n8n-icon-button",{class:["ml-2xs",e.$style.pinDataButton],attrs:{type:"tertiary",active:e.hasPinData,icon:"thumbtack",disabled:e.editMode.enabled||e.inputData.length===0&&!e.hasPinData||e.isReadOnly,"data-test-id":"ndv-pin-data"},on:{click:function(n){return e.onTogglePinData({source:"pin-icon-click"})}}})],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode.enabled,expression:"editMode.enabled"}],class:e.$style.editModeActions},[t("n8n-button",{attrs:{type:"tertiary",label:e.$locale.baseText("runData.editor.cancel")},on:{click:e.onClickCancelEdit}}),t("n8n-button",{staticClass:"ml-2xs",attrs:{type:"primary",label:e.$locale.baseText("runData.editor.save")},on:{click:e.onClickSaveEdit}})],1)],1)],2),e.maxRunIndex>0?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],class:e.$style.runSelector,attrs:{"data-test-id":"run-selector"}},[t("n8n-select",{attrs:{size:"small",value:e.runIndex,"popper-append-to-body":""},on:{input:e.onRunIndexChange,click:function(n){n.stopPropagation()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._v(e._s(e.$locale.baseText("ndv.output.run")))]},proxy:!0}],null,!1,524491977)},e._l(e.maxRunIndex+1,function(n){return t("n8n-option",{key:n,attrs:{label:e.getRunLabel(n),value:n-1}})}),1),e.canLinkRuns?t("n8n-tooltip",{attrs:{placement:"right",content:e.$locale.baseText(e.linkedRuns?"runData.unlinking.hint":"runData.linking.hint")}},[e.linkedRuns?t("n8n-icon-button",{attrs:{icon:"unlink",text:"",type:"tertiary",size:"small"},on:{click:e.unlinkRun}}):t("n8n-icon-button",{attrs:{icon:"link",text:"",type:"tertiary",size:"small"},on:{click:e.linkRun}})],1):e._e(),e._t("run-info")],2):e._e(),e.maxOutputIndex>0&&e.branches.length>1?t("div",{class:e.$style.tabs,attrs:{"data-test-id":"branches"}},[t("n8n-tabs",{attrs:{value:e.currentOutputIndex,options:e.branches},on:{input:e.onBranchChange}})],1):e.hasNodeRun&&e.dataCount>0&&e.maxRunIndex===0&&!e.isArtificialRecoveredEventItem?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],class:e.$style.itemsCount},[t("n8n-text",[e._v(" "+e._s(e.dataCount)+" "+e._s(e.$locale.baseText("ndv.output.items",{adjustToNumber:e.dataCount}))+" ")])],1):e._e(),t("div",{ref:"dataContainer",class:e.$style.dataContainer,attrs:{"data-test-id":"ndv-data-container"}},[e.isExecuting?t("div",{class:e.$style.center,attrs:{"data-test-id":"ndv-executing"}},[t("div",{class:e.$style.spinner},[t("n8n-spinner",{attrs:{type:"ring"}})],1),t("n8n-text",[e._v(e._s(e.executingMessage))])],1):e.editMode.enabled?t("div",{class:e.$style.editMode},[t("div",{class:[e.$style.editModeBody,"ignore-key-press"]},[t("code-node-editor",{attrs:{value:e.editMode.value,language:"json"},on:{valueChanged:function(n){return e.ndvStore.setOutputPanelEditModeValue(n)}}})],1),t("div",{class:e.$style.editModeFooter},[t("n8n-info-tip",{class:e.$style.editModeFooterInfotip,attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText("runData.editor.copyDataInfo"))+" "),t("n8n-link",{attrs:{to:e.dataEditingDocsUrl,size:"small"}},[e._v(" "+e._s(e.$locale.baseText("generic.learnMore"))+" ")])],1)],1)]):e.paneType==="output"&&e.hasSubworkflowExecutionError?t("div",{class:e.$style.stretchVertically},[t("NodeErrorView",{class:e.$style.errorDisplay,attrs:{error:e.subworkflowExecutionError}})],1):e.hasNodeRun?e.paneType==="input"&&e.node.disabled?t("div",{class:e.$style.center},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.input.disabled",{interpolate:{nodeName:e.node.name}}))+" "),t("n8n-link",{on:{click:e.enableNode}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.disabled.cta"))+" ")])],1)],1):e.hasNodeRun&&e.isArtificialRecoveredEventItem?t("div",{class:e.$style.center},[e._t("recovered-artificial-output-data")],2):e.hasNodeRun&&e.hasRunError?t("div",{class:e.$style.stretchVertically},[e.isPaneTypeInput?t("n8n-text",{class:e.$style.center,attrs:{size:"large",tag:"p",bold:""}},[e._v(" "+e._s(e.$locale.baseText("nodeErrorView.inputPanel.previousNodeError.title",{interpolate:{nodeName:e.node.name}}))+" ")]):t("NodeErrorView",{class:e.$style.dataDisplay,attrs:{error:e.workflowRunData[e.node.name][e.runIndex].error}})],1):e.hasNodeRun&&e.jsonData&&e.jsonData.length===0&&e.branches.length>1?t("div",{class:e.$style.center},[t("n8n-text",[e._v(" "+e._s(e.noDataInBranchMessage)+" ")])],1):e.hasNodeRun&&e.jsonData&&e.jsonData.length===0?t("div",{class:e.$style.center},[e._t("no-output-data",function(){return[e._v("xxx")]})],2):e.hasNodeRun&&!e.showData?t("div",{class:e.$style.center},[t("n8n-text",{attrs:{bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.tooMuchDataTitle))]),t("n8n-text",{attrs:{align:"center",tag:"div"}},[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("ndv.output.tooMuchData.message",{interpolate:{size:e.dataSizeInMB}}))}})]),t("n8n-button",{attrs:{outline:"",label:e.$locale.baseText("ndv.output.tooMuchData.showDataAnyway")},on:{click:e.showTooMuchData}})],1):e.hasNodeRun&&e.displayMode==="table"&&e.binaryData.length>0&&e.jsonData.length===1&&Object.keys(e.jsonData[0]||{}).length===0?t("div",{class:e.$style.center},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("runData.switchToBinary.info"))+" "),t("a",{on:{click:e.switchToBinary}},[e._v(" "+e._s(e.$locale.baseText("runData.switchToBinary.binary"))+" ")])])],1):e.hasNodeRun&&e.displayMode==="table"?t("run-data-table",{attrs:{node:e.node,inputData:e.inputData,mappingEnabled:e.mappingEnabled,distanceFromActive:e.distanceFromActive,runIndex:e.runIndex,pageOffset:e.currentPageOffset,totalRuns:e.maxRunIndex,hasDefaultHoverState:e.paneType==="input"},on:{mounted:function(n){return e.$emit("tableMounted",n)},activeRowChanged:e.onItemHover,displayModeChange:e.onDisplayModeChange}}):e.hasNodeRun&&e.displayMode==="json"?t("run-data-json",{attrs:{paneType:e.paneType,editMode:e.editMode,sessioId:e.sessionId,node:e.node,inputData:e.inputData,mappingEnabled:e.mappingEnabled,distanceFromActive:e.distanceFromActive,runIndex:e.runIndex,totalRuns:e.maxRunIndex}}):e.hasNodeRun&&e.isPaneTypeOutput&&e.displayMode==="html"?t("run-data-html",{attrs:{inputData:e.inputData}}):e.hasNodeRun&&e.isSchemaView?t("run-data-schema",{attrs:{data:e.jsonData,mappingEnabled:e.mappingEnabled,distanceFromActive:e.distanceFromActive,node:e.node,paneType:e.paneType,runIndex:e.runIndex,totalRuns:e.maxRunIndex}}):e.displayMode==="binary"&&e.binaryData.length===0?t("div",{class:e.$style.center},[t("n8n-text",{attrs:{align:"center",tag:"div"}},[e._v(e._s(e.$locale.baseText("runData.noBinaryDataFound")))])],1):e.displayMode==="binary"?t("div",{class:e.$style.dataDisplay},e._l(e.binaryData,function(n,o){return t("div",{key:o},[e.binaryData.length>1?t("div",{class:e.$style.binaryIndex},[t("div",[e._v(" "+e._s(o+1)+" ")])]):e._e(),t("div",{class:e.$style.binaryRow},e._l(n,function(a,i){return t("div",{key:o+"_"+i,class:e.$style.binaryCell},[t("div",[t("div",{class:e.$style.binaryHeader},[e._v(" "+e._s(i)+" ")]),a.fileName?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.fileName"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(a.fileName))])]):e._e(),a.directory?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.directory"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(a.directory))])]):e._e(),a.fileExtension?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.fileExtension"))+":")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(a.fileExtension))])]):e._e(),a.mimeType?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.mimeType"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(a.mimeType))])]):e._e(),a.fileSize?t("div",[t("div",[t("n8n-text",{attrs:{size:"small",bold:!0}},[e._v(e._s(e.$locale.baseText("runData.fileSize"))+": ")])],1),t("div",{class:e.$style.binaryValue},[e._v(e._s(a.fileSize))])]):e._e(),t("div",{class:e.$style.binaryButtonContainer},[e.isViewable(o,i)?t("n8n-button",{staticClass:"binary-data-show-data-button",attrs:{size:"small",label:e.$locale.baseText("runData.showBinaryData")},on:{click:function(r){return e.displayBinaryData(o,i)}}}):e._e(),e.isDownloadable(o,i)?t("n8n-button",{staticClass:"binary-data-show-data-button",attrs:{size:"small",type:"secondary",label:e.$locale.baseText("runData.downloadBinaryData")},on:{click:function(r){return e.downloadBinaryData(o,i)}}}):e._e()],1)])])}),0)])}),0):e._e():t("div",{class:e.$style.center},[e._t("node-not-run")],2)],1),e.hasNodeRun&&!e.hasRunError&&e.binaryData.length===0&&e.dataCount>e.pageSize&&!e.isSchemaView?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editMode.enabled,expression:"!editMode.enabled"}],class:e.$style.pagination},[t("el-pagination",{attrs:{background:"","hide-on-single-page":!0,"current-page":e.currentPage,"pager-count":5,"page-size":e.pageSize,layout:"prev, pager, next",total:e.dataCount},on:{"update:currentPage":function(n){e.currentPage=n},"update:current-page":function(n){e.currentPage=n},"current-change":e.onCurrentPageChange}}),t("div",{class:e.$style.pageSizeSelector},[t("n8n-select",{attrs:{size:"mini",value:e.pageSize,"popper-append-to-body":""},on:{input:e.onPageSizeChange},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._v(e._s(e.$locale.baseText("ndv.output.pageSize")))]},proxy:!0}],null,!1,834842550)},[e._l(e.pageSizes,function(n){return t("n8n-option",{key:n,attrs:{label:n,value:n}})}),t("n8n-option",{attrs:{label:e.$locale.baseText("ndv.output.all"),value:e.dataCount}})],2)],1)],1):e._e(),t("n8n-block-ui",{class:e.$style.uiBlocker,attrs:{show:e.blockUI}})],1)},kN=[];const la={$style:xN};function SN(s){for(var e in la)this[e]=la[e]}var $N=p(HC,TN,kN,!1,SN,"73414509",null,null);const wr=$N.exports,EN=C({props:{taskData:{}},computed:{runTaskData(){return this.taskData},runMetadata(){return this.runTaskData?{executionTime:this.runTaskData.executionTime,startTime:new Date(this.runTaskData.startTime).toLocaleString()}:null}}});var CN=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.runMetadata?t("n8n-info-tip",{attrs:{type:"tooltip",theme:"info-light",tooltipPlacement:"right"}},[t("div",[t("n8n-text",{attrs:{bold:!0,size:"small"}},[e._v(e._s(e.$locale.baseText("runData.startTime")+":"))]),e._v(" "+e._s(e.runMetadata.startTime)),t("br"),t("n8n-text",{attrs:{bold:!0,size:"small"}},[e._v(e._s(e.$locale.baseText("runData.executionTime")+":"))]),e._v(" "+e._s(e.runMetadata.executionTime)+" "+e._s(e.$locale.baseText("runData.ms"))+" ")],1)]):e._e()},NN=[],IN=p(EN,CN,NN,!1,null,null,null,null);const DN=IN.exports,AN=x(Tt).extend({name:"OutputPanel",components:{RunData:wr,RunInfo:DN},props:{runIndex:{type:Number},isReadOnly:{type:Boolean},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},sessionId:{type:String},blockUI:{type:Boolean,default:!1},isProductionExecutionPreview:{type:Boolean,default:!1}},computed:{...b(le,ce,N,B),node(){return this.ndvStore.activeNode},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},isTriggerNode(){return this.nodeTypesStore.isTriggerNode(this.node.type)},isPollingTypeNode(){return!!(this.nodeType&&this.nodeType.polling)},isScheduleTrigger(){return!!(this.nodeType&&this.nodeType.group.includes("schedule"))},isNodeRunning(){const s=this.workflowsStore.executingNode;return this.node&&s===this.node.name},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},workflowExecution(){return this.workflowsStore.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const s=this.workflowExecution.data;return!s||!s.resultData||!s.resultData.runData?null:s.resultData.runData},hasNodeRun(){return this.workflowsStore.subWorkflowExecutionError?!0:Boolean(this.node&&this.workflowRunData&&this.workflowRunData.hasOwnProperty(this.node.name))},runTaskData(){if(!this.node||this.workflowExecution===null)return null;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.node.name)||s[this.node.name].length<=this.runIndex?null:s[this.node.name][this.runIndex]},runsCount(){if(this.node===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.node.name)?0:s[this.node.name].length?s[this.node.name].length:0},staleData(){if(!this.node)return!1;const s=this.workflowsStore.getParametersLastUpdate(this.node.name);if(!s||!this.runTaskData)return!1;const e=this.runTaskData.startTime;return s>e},outputPanelEditMode(){return this.ndvStore.outputPanelEditMode},canPinData(){return this.isPinDataNodeType&&!this.isReadOnly}},methods:{insertTestData(){const s=this.$refs.runData;s&&(s.enterEditMode({origin:"insertTestDataLink"}),this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,node_type:this.node.type,pane:"output",type:"insert-test-data"}))},onLinkRun(){this.$emit("linkRun")},onUnlinkRun(){this.$emit("unlinkRun")},openSettings(){this.$emit("openSettings"),this.$telemetry.track("User clicked ndv link",{node_type:this.node.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:"output",type:"settings"})},onRunIndexChange(s){this.$emit("runChange",s)}}}),PN="_titleSection_1y1ze_1",ON="_title_1y1ze_1",MN="_noOutputData_1y1ze_16",RN="_recoveredOutputData_1y1ze_26",LN={titleSection:PN,title:ON,noOutputData:MN,recoveredOutputData:RN};var WN=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("RunData",{ref:"runData",attrs:{nodeUi:e.node,runIndex:e.runIndex,linkedRuns:e.linkedRuns,canLinkRuns:e.canLinkRuns,tooMuchDataTitle:e.$locale.baseText("ndv.output.tooMuchData.title"),noDataInBranchMessage:e.$locale.baseText("ndv.output.noOutputDataInBranch"),isExecuting:e.isNodeRunning,executingMessage:e.$locale.baseText("ndv.output.executing"),sessionId:e.sessionId,blockUI:e.blockUI,isProductionExecutionPreview:e.isProductionExecutionPreview,paneType:"output"},on:{runChange:e.onRunIndexChange,linkRun:e.onLinkRun,unlinkRun:e.onUnlinkRun,tableMounted:function(n){return e.$emit("tableMounted",n)},itemHover:function(n){return e.$emit("itemHover",n)}},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.titleSection},[t("span",{class:e.$style.title},[e._v(" "+e._s(e.$locale.baseText(e.outputPanelEditMode.enabled?"ndv.output.edit":"ndv.output"))+" ")]),!e.hasPinData&&e.runsCount===1?t("RunInfo",{directives:[{name:"show",rawName:"v-show",value:!e.outputPanelEditMode.enabled,expression:"!outputPanelEditMode.enabled"}],attrs:{taskData:e.runTaskData}}):e._e(),e.hasNodeRun&&e.staleData?t("n8n-info-tip",{attrs:{theme:"warning",type:"tooltip",tooltipPlacement:"right"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText(e.hasPinData?"ndv.output.staleDataWarning.pinData":"ndv.output.staleDataWarning.regular"))}})]],2):e._e()],1)]},proxy:!0},{key:"node-not-run",fn:function(){return[e.workflowRunning&&!e.isTriggerNode?t("n8n-text",{attrs:{"data-test-id":"ndv-output-waiting"}},[e._v(e._s(e.$locale.baseText("ndv.output.waitingToRun")))]):e._e(),e.workflowRunning?e._e():t("n8n-text",{attrs:{"data-test-id":"ndv-output-run-node-hint"}},[e._v(" "+e._s(e.$locale.baseText("ndv.output.runNodeHint"))+" "),e.canPinData?t("span",{on:{click:e.insertTestData}},[t("br"),e._v(" "+e._s(e.$locale.baseText("generic.or"))+" "),t("n8n-text",{attrs:{tag:"a",size:"medium",color:"primary"}},[e._v(" "+e._s(e.$locale.baseText("ndv.output.insertTestData"))+" ")])],1):e._e()])]},proxy:!0},{key:"no-output-data",fn:function(){return[t("n8n-text",{attrs:{bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.output.noOutputData.title")))]),t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.output.noOutputData.message"))+" "),t("a",{on:{click:e.openSettings}},[e._v(e._s(e.$locale.baseText("ndv.output.noOutputData.message.settings")))]),e._v(" "+e._s(e.$locale.baseText("ndv.output.noOutputData.message.settingsOption"))+" ")])]},proxy:!0},{key:"recovered-artificial-output-data",fn:function(){return[t("div",{class:e.$style.recoveredOutputData},[t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeTitle")))]),t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeMessage"))+" ")])],1)]},proxy:!0},!e.hasPinData&&e.runsCount>1?{key:"run-info",fn:function(){return[t("RunInfo",{attrs:{taskData:e.runTaskData}})]},proxy:!0}:null],null,!0)})},BN=[];const ca={$style:LN};function UN(s){for(var e in ca)this[e]=ca[e]}var FN=p(AN,WN,BN,!1,UN,null,null,null);const VN=FN.exports,zN={};var jN=function(){var e=this,t=e._self._c;return t("svg",{attrs:{width:"112",height:"80",viewBox:"0 0 112 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask0_489_46042",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"112",height:"80"}},[t("rect",{attrs:{width:"112",height:"80",fill:"url(#paint0_linear_489_46042)"}})]),t("g",{attrs:{mask:"url(#mask0_489_46042)"}},[t("rect",{attrs:{x:"-0.5",width:"112",height:"80",fill:"url(#pattern0)","fill-opacity":"0.6"}})]),t("defs",[t("pattern",{attrs:{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"}},[t("use",{attrs:{"xlink:href":"#image0_489_46042",transform:"scale(0.00357143 0.005)"}})]),t("linearGradient",{attrs:{id:"paint0_linear_489_46042",x1:"90.5",y1:"40.4494",x2:"112.5",y2:"40.4494",gradientUnits:"userSpaceOnUse"}},[t("stop"),t("stop",{attrs:{offset:"1","stop-color":"white","stop-opacity":"0"}})],1),t("image",{attrs:{id:"image0_489_46042",width:"280",height:"200","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABhdSURBVHgB7d0JcFTVngbw/72d4IYa0Ie4IK2llgpodNwtB9AaxVILF7ZxynkgWupojaRwASXQGEBqEAI8LXfBpZQS9IFabjMFkXFfijCKyqjQqIiKShCUpdP3vvPdpXP7pjtk6dPdSX+/qlPpJX07UfrL/yz3XEOIPJNiswaZkbKBtkiluC0qRB1gCJW86ntmjzYM81YvWIhyhgFTwlCxGJGyBcJKhTQxhUrSpJraKSpcVgjDhTQqEyo5U+6prbVExmV6TnWT6ixbnuxmSZ262xCLVTUIUTsxYEoMKpdM4aKCZV5ZUmIMFMoljsGUkMk1c9RArjE39HBchcuYadVVdUKUYwyYEjEhVhstj8gqdbMi8HA8kpTBqmqJC5EGHOQtEeVlMkXSw6WB4UK6cQymBKB6UYMso4OPWYZMrWG4kGasYEpAmWGHB3Xj0ydVzRUizRgwJcAwjaFpD9gyVYjygAHTxTndo9Bium2WLBWiPGDAdHFlkWT4/KK6uVzrQnnCgOniDNuIBu/blr1aiPKEAdPF2Xba1DQeYfVCecOAISJtGDBEpA0Dhoi0YcAQkTYMGCLShgFDRNowYIhIGwYMEWnDgCEibRgwRKQNA4aItGHAEJE2DBgi0oYBQ0TaMGCISBsGDBFpw4AhIm0YMESkDQOGiLRhwBCRNgwYItKGAUNE2jBgiEgbBgwRacOAISJtGDBEpA0Dhoi0YcAQkTYMGCLShgFDRNowYIhIGwYMEWnDgCEibRgwRKQNA4aItGHAEJE2DBgi0oYBQ0TaMGCISBsGDBFpw4AhIm0YMESkDQOGiLRhwBCRNgwYItKGAUNE2jBgiEgbBgwRacOAISJtGDBEpA0Dhoi0YcAQkTYMGCLShgFDRNowYIhIGwYMEWnDgCEibRgwRKQNA4aItGHAEJE2DBgi0oYBQ0TaMGCISBsGDBFpw4AhIm0YMESkDQOGiLRhwBCRNgwYItKGAUNE2hhCXc7ll19eUVZWNto0zYFGJDLIamys8J+LRMrilpWst217WSKRqFu6dGlciDRhwHQho0aNilqWVavC4/I2vGyhCpqpDBrSISLUJYwcOfJWFS6vq5vHS9tURiKRcf3795c1a9a8JUQ5xAqmk0N3qLy8/O/q5iDpIMMwlu7evXuMqmYahCgHOMjbyalwWSE5CBdA18o7HlFOsIvUiY0YMaJWfWnLeEtr9FbdpQrVXXpDiDqIXaROavjw4aPVlwWiiapmBi9ZsqROiDqAXaTOa4popMZjtIUXlQ4GTCfkVS9R0SvqvQ9RuzFgOqe/Sn7k632oi+IYTCfjTUtvkTxJJBI9OG1N7cUKppMpKyurlDzK9/tR18KA6Xzy+oG3LCsqRO3EgOl8KiSPTNOMClE7MWCISJsyIUcsVlvRGJEVhm3Nq5k8fqEUr3wPuHKAl9qNFYwnFqtqMND9MMwF1TW16yfXzLl1Qqw2KkXGtu245Fe9ELUTAybAaPprHbXFmFsekfXV02oX3BX7r6KZSUkmk3WSR42NjQwYajcGTIBl2aubPWjL6EikfJWqalZU3zN7tBSYtyalTvJAVUt1XANDHcExmDTofmRdezhIdZ8GqaCZYog9d3fSWDYzVhWXwnhScrRFQ0sMw3hSiDqAFUyAZUi8Fd9W8O5TIpFYqr7ERa/44sWLFwpRBzBggiJm28YbCtR9QrfFsqwq0WuqEHUQz0UKwFR1MiIdOc8nns/u01VXXTXXNM1bJcdUeM174YUXxglRBzFgQlQ1goDp+GpZQxYmGxPzZsTu0DYL4534iC0uc9lNq1ddo1OEKAfYRQoYpyoYI1djG6r7ZEbKF+CYogm6Smo8ZjA265YcwHFwPCHKkZKrYPCB31cSUTEjlaYtUSNi9rVtqTTcqiUqOWKLzCtLql5XrCov07zDhg2LqYBo9y53akq6asmSJXOFKIe6ZMDEYvdGG6W80jKNioiYJ6vfUs38qDBxA0T7yYJqNqpq+qSqvH9YceG1xsZGBE1bNorihddIm04ZMMEqJILAMFWI2E5wYCwiKoUTV0E2Zlp1VZ0UEIImmUwOUjeHRiKRSnU76j9nlpU1WI2NdapieUuF0UIupCOdijZgUIXslkhFhq5MVPRWIQ3tOb4KlnrVJboiVrjFdxlNmjo7ZphmqutkW9bUaVPGx4QoDwq6ktfvyhimEVV/W/uiKyNuFVKRVC110SbEoJ2zNGywMZ1sSL2dtLdahlFvGtKgwqEe4aCmqqNqqnp9Ww6Y7/EWos5Ca8Bk6cpExa1CoipEdJVQ6Ko0uCFibbAMM94tIvWSkPieQgAho6aqpbUKNd5C1Bl0OGCaDaiaUpHelSlv+mZbcimuWr1t2RvUoGbcNiSOKkQ91pCDSiIuex7LccZbVLjUhR5vT2bm9r8MUZHYY8CgCqmQnRVZujKpKiTVnclTV0b0QlBFsz2ZZbzFCH0N3w4dIo3Riu/Z0+NERScVMM5Je1nWhiRlb21dGcGHWQWHWLJahVVDa7syOjlVkZn5Nw6Nt4S/yQg0LGJECJ+n2nGqdVPtO9XeUW2lagnZw4+R4bYdeE8GDRW9VMCURcoX2PhA5HhA1WvNujLFNtsSZBjetg12+mfYErtq+uTx86QpQFIvkab/ZOgTnqlajWpniBssQY2qrVJtumornMOK9BQ3jE5XrY9q3VXbodo61d5U7TPVtgeO4QcNQ4aKWipgsNmS+qvdnnNaAl2ZtAHVhmIOkZbYKmCM9HCJJ3bvGjtz2sT/FffDv7e4/+3wTegl7lJtt3f/JHHD5VzVjH333Ve6deuGZfjYHU62b99eZts2gmS+ajHVvlZtjGqjVNsnw4+DkxkfVW2OapuF1Qx1IoExmBY3W1LPFV9XRhcracUjpulUMKq8WP3Lr1uGPzx/Gk6CPFu1gaqdrNrB4lYjP6n2iWr/p9pG1W5X7Z9UM4499li59NJL5ZRTTnFC5ssvv5Tly5fL+++/L7t370alMkO1TaqdYqr36969uxx44IG42Bm2xpStW7fK77//fqAKpPHiVkYIpR+897Wl5WBh6FDBNQWMaSJAFhZgQLXYGNbO5AZzn4gkLWv+199+O23xgr/tpR7/V9VuUK1fhtdcLW43BhXOaart07NnT5kzZ44MGTLECQxABTN06FAZM2aM1NfXI817oyFcEEbnn3++DBgwwAmZbdu2yTvvvCNvvPGGbN68WRVU9s3ijt9sFbdqOki1fcUNEoTfL9I0rhOsbogKJhUw06qrcEZuTs7K7exmzpy49a7qe8feWzPxKXErh39TrVq1ngiLCjWv1qNHD+ybggpDGhoasMtcf/X8ieJ9sC+88EI599xzU+ECuH3MMcfIyJEjETCpxw8++GCpqqqSa665RtCl8g0fPlzuuusuWbRoEaoZHOhKcSumY8Ttgh0pbjWD6ul/xJ39+i3wq7CKoYLinrzpUlPNM9xwwQAtQuM/VeuJILjgggucdvTRRzsVyTfffCPLli2T9957D1VHauD3zDPPdLpFYfvtt5+cdtppTpD8+eefzmP9+vWTgQMHpoULoAq69tpr5e2333a6S8r54obLaaHDXqTaNar9TbUnVPtVguGC8SSDBQ3lHwOmueA0MwZdMRN01D777COnnnqq1NTUON2ZIHRr7rzzTidkfAcddJBEIpHmB1cfdARV37595YsvvnAeQ0X0l7/8JeMPc8IJJ8ghhxwin3/+ObZU6KUe6uUfPxqNyo4dO2TdunXGzp07D1UP/4dq34hbiWJ2Cq8x8J4MGSoEbjjVJLhQLhgwGNB1xkVQuYTDBc444ww5++yz5YADDkg9tv/++zthkgnCChUQIITQ3cLxM8FxjjrqKCkvb1oRjdCZMWOGzJs3zxnnufrqq3ENaTyFMZ1LxR2ANv3fif0kKhRWMOnCC+XQMMDrjJ+EuzC+vfbay+n2YEB2zZo1zmP+1HQme++9t1OV+LdRwQTHasJQ7SBg1MyTc//mm2+W66+/3jk+xoHw3GuvvSabNm3CQfp4zRmLsdWkO+sWKhRWMJkFF9JhdsYZL9m4cWPWF5x++ulOpeGHSksBg0BCFwdQoWTrHvmOOOKIVAWDMBoxYkTq2KhcevXq5by3Zz9xK5iI83uoAEL3yKlibNYylF8MmHTh6sWfoXEGWT/99NPUwGwYxkMwJY1qA10m3M80BgPoEmGGqbKy0hkMRmsJxn4wOIxQwXuEAwlhhuDx74obMs7vkFRjMIwVKhR2kVzBpf7BbhICZr1qW5LJZA/MGK1du9ZZOBeGLs5ll13mTEPj9mGHHeaPizSDQBg8eLAzZoNqpn///tISjPvMmjVLNmzYIIMGDWr2PN4Hx/Eg1RAyTsBgkDdVubCzRHnGgMkcLH4Fg9vbxK1iBm7evNlZhZspYODII4902h7fUH3QES4ImdbA2M+wYcOcGSNUMpkEwsw/uT01yEtUKKXeRco0c4SG2ZgrVLtRtb+KNxGDBXXvvvsuVtZKvmEMBqGUrdsVkgpIO5k0/HMK2FWifCvlCiZT5YJp6RGqjVXtEO++3+Vwzg/CepS6ujpnlW2RMkKNqGBYwTRVLvuLe8byveIurouKGzKYkUktcME09EsvveSvrC16lhAVTqlWMMHqxe9O3CbuuT7OdMzxxx/vnAmNLsknn3wiK1eudNah7Nq1ywmZVatWZRxwLQScsrBz507/LjIFJz2ygqGCK+Uukj8Iiq/YcW6keOFyww03yN133+2sUcHgKaqV5557TqZOnepMU3/77bfO1gvFEjDougWmzxEuu4WoCJRiwGSaLbpANWdxyVlnnSUPPfRQ2gswuDp27Fhn1ezEiROdr63xww8/yPr16+Wcc85ptugOA8aYkcIpAlg3Ex68xZQ0zrg++eSTpU+fPi0O7qKCCXTZEC47hKgIlOoYTDBk8MnFMlhnqewll1yS8QVYeYvl+Y8++qjMnDnTmTZuCVb94gzp8847T6qrq9OeQxg888wzcvHFF8tNN90kL7/8ctrzv/zyi0yYMEGuvPJKufHGG+Wrr75q8b3QbcNrPOgrdY4BIurySrmCQbj660XKvcdSS/gzwXPXXXedtAbGabBXjG3bznYLQVjP8v333zu3f/vtN6fLFYSw2LJli1Mpff3119hms8X3QsD8+uuv/l30lRAwzsw0l2pTIZXav7/wJUX8CuYP8SZc8IHvTBBgCKA//vjDuStuBfO7EBWBUvwDF5xd8cdgUttNrlu3TjqTRCIh8Xg8dVfczaawCTnX1VHBlXIFHewqob/iBAy6NnYnOusYAYOBZA+ql58leOUBNQvGVXdUKFxo58In1Pmrj5W6GP/o8IEDs0aYRtYFa3NwlrcH/SR/TwlWMFRwpV7B+PChxEhrI3bzf/7556WjsGudHzLZtnjoKExPYzr7448/9h/CANL/S9OpR9gvk0FDBVPKARP84KHEeEu89SNPPPFEh09oxJYNfsDoqmAwsPvqq6/6U9T42dHVQ1Cmn9+In4NbNVABlGLAhK/57DcsRomrlvzoo4/kvvvuS21RWawwIP3444/7dzG4i8vMImgwI8YTqKngSi1ggpdd9ZvlNVwxEbvxO4tO8MFdunRpq1ft5hsGonH6gjfrhSTEJWhxWYNguLCLRAVV6l0kS9JD5lVxr87oLFybPXu2rFixQnINXSd/gygERXtCDCdfPvvss/5d9JH+W7Ufpel3SS20S80gsZtEeVaqXaRgwwCJ5X3FwMsDqq3CN+JcICzz/+CDDySXcF6Rv8UlBmrb2hVbvXq1cyVIbxNyTK9jqTACxgo1VjBUUKVawQS7R37I+A19DlwhcR0++NiWAdce+uyzzySXgicvtqWCQWU1efJk5+cS9+fHz/uCuDNIflimmmFGbFYuVCilXMH4H0L/Q9no3cbXD1Wbr9pm7LPyyiuvSG1tbcFX+SKIHnzwQXn99df9hzCw+4i4ewYHQ5KDvFQUSn0Mxg+a4IcTAYM+CwZfZqm2BetYsDYGlcN3333XqoMfeuihqbUwuMJAEK4qgEuXADb0Dp9giX1ounfv7rwWx8HF2QAXV3vssceCXaoHxb3o/W7v5/ZD0g9PB8dfqFBatYN0F5TppMdwQ/g0iLv0/sxEIlGOcEFFc+KJJ2a91KsPwYFrUGNnPGy5cPjhh6eewxoZvB7PY9OqK664wgkVHwIFe9DgciWjRo2Sk046yTkDe/z48c64kKdO3IDBVQ8QLAlJr8KcKmbg4Iv+WQXVoFTA2PZbK+verBOiPCjVHe0QHn6I+GMwqOYS3vP+SZAIl9dU66Vme67fsmVL+YIFC+Tnn3+W6dOnOxdZywZVysiRI51qI3ypEYy/IHjuuOOO8DWNUq+96KKLnMua4Htx//777xesz/HOk8Ks0Qxxt2VISnq4sItERaPUr4sUnk0KngDp38bWB4vFvUb1v2/durUcm36j4sBMznHHHZf14AiOcHgEZbvWNaDK8a9XjbGXxYsXC05j8Dyh2iZp6hZlC5emlbxEBVDKAROsYvzxiuAVHYMnIP+k2jOq7VIVxLXbt2/f++mnn3bOMbrttttkwIABohO23sSWDN5sE6qVl6SpagmHS7ARFVSpn02daU1MIktDyDyl2gMqZLbhPKCnnnpKbr/9dmeLh/ZAcNxyyy3Su3dv6devnzz88MPBKiUF2zFg1zoPRpl/C/1smWaQRNhFogLjpWObPoTBv/jB7pIEvqK7hDUn+LTfotoBb775pnOdJAziBi5Av0c//vijzJ8/Xx544AHn/k8//SRTpkxxFt5hn97gda2xQXjghMmNkh4o4XDh+AsVDW7Zmnm62p+V8S8BEqwWMLD6d9UeVu1nDLouX77cuYxJa2FbTgQTAsZ7b6e7g5BZtGiRfPjhh2lnYKN6CWyCtUOyj70EqxeigmPAuIJdinDQBMPGb9jg5RPVPseLsGQfVUZrYYOoWbNmOVPP4p5cWe8dy8a1r1ER4Zh+qIQueWJK5vEWW9g1oiLDLlKTTFPXRuh5/3vQsO2ds7k2LkPiX4wNMLUcvg4SwgLbW2ItDS7g5p16gLDCiU4LVTtBtR5qILcPVuuiizRkyBBnvQwqG7zWg+s3ZQsXdo2oqDBg0vkBgg+tXymINL9YW3DTcKfL88gjj8iLL77oBAMWygXHUABjK9iKEwHj7aGLY8dVW6baN+IO3PZW7SpVDVXgTO4lS5Y44zp4XWBXvL7e+zJYqOgxYJoLhox4t4NB4y/CA2clNFb34vrVbYBuF1IG+898JE1ncmO7CKzK+xd1zB5r167N1IXtJu51nFi9UNFjwGQWDhlfsILBtDVOisSJRPuGno9I8038cUzMPmHnf8wEYd+ZleKGjR8MOJtyobhbX1aqdqB3LASQf0lY7PD9hzBYqBNgwGQXDBm/e+QP/vrXUkIFgg98T0m/UmQ3aQqi4DQ4ggELXbBvrn/1xeDMD74f4YNFfW94x8WxEt7rMO6zSTKfDsCQoaLDgGlZeLVveJUvQgZBgS5LRJoCxsxwnEzbRPiDyb5gFwxVzEbJvAgwKaxgqBNgwLROOBwQMqb31YcP/Z4CxsrS/IDwqx5T0isgW9L3rOGCOuoUGDB7FuyCBM9bagw8jsf8cMk2/tJSwPiCYzzB2apM+9bwrGkqegyY1guGCzQGHiuTpqom05VagwETDppgQISnws0Mr/cXAPK8Iyp6DJjWC6/2Dd72181ASwETrmQyVR/h7SLCxwhu88kxGCpqDJjWCa/ytaR5WIR3xAu/Pjzj01LA7Cmk2DWiToEB03Z+mJiB28GAEckcMMHbVuhxO/S6TCHlf1+msGLQUFFiwLSeX8X4ty1pHiit2TouU7cmU8BI6Lad5StR0WLAtE0wCMKDs209RkvPtTY8GDJU1Bgw7WNnuW+04TVEXR4DJrcYIkQB3HCKiLRhwBCRNgwYItKGAUNE2jBgiEgbBgwRacOAISJtGDBdnGFI2gWbjIjZV4jyhAHTxdmGHU9/QKJClCcMmC6uLBmpDz1UOS5W2/qLaBN1AAOmi4vFquLiXuDNV7GfaY0WojxgwJQA27KeDN43DXOoEOUBA6YElNnmwtBDg6rvmT1OiDRjwJQAdJNssdOqGDHMKRNitVEh0ogBUyLKkkZMfQlOWVeUR2QFQ4Z0YsCUCGew15CpoYejCJlJNbWDhEiDtmz1SF2ACpOY+p8+pdkThixMNMrUme6sE1FOMGBK0KSaOXMNMW7N8vRSNe20LGkl62fE7qgXog5gwJSorJUMUQ4xYEoYxl7UP4AF6mZUiDRgwJBU31M7Wv1LQDUTFaIcYsBQSmx6bWVjo3W5mOZAww2bqBB1wD8AobUpv0xPqN8AAAAASUVORK5CYII="}})],1)])},KN=[],HN=p(zN,jN,KN,!1,null,null,null,null);const GN=HN.exports,qN=x(re).extend({name:"InputPanel",components:{RunData:wr,NodeExecuteButton:Js,WireMeUp:GN},props:{currentNodeName:{type:String},runIndex:{type:Number},linkedRuns:{type:Boolean},workflow:{},canLinkRuns:{type:Boolean},sessionId:{type:String},readOnly:{type:Boolean},isProductionExecutionPreview:{type:Boolean,default:!1}},data(){return{showDraggableHintWithDelay:!1,draggableHintShown:!1}},computed:{...b(le,ce,B),focusedMappableInput(){return this.ndvStore.focusedMappableInput},isUserOnboarded(){return this.ndvStore.isMappingOnboarded},showDraggableHint(){const s=[Us,Jt,ih,rh];return!this.currentNode||s.includes(this.currentNode.type)?!1:!!this.focusedMappableInput&&!this.isUserOnboarded},isExecutingPrevious(){if(!this.workflowRunning)return!1;const s=this.workflowsStore.executedNode,e=this.workflowsStore.executingNode;return this.activeNode&&s===this.activeNode.name&&this.activeNode.name!==e?!0:e||s?!!this.parentNodes.find(t=>t.name===e||t.name===s):!1},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},currentWorkflow(){return this.workflow},activeNode(){return this.ndvStore.activeNode},currentNode(){return this.workflowsStore.getNodeByName(this.currentNodeName)},connectedCurrentNodeOutputs(){const s=this.parentNodes.find(({name:e})=>e===this.currentNodeName);if(s)return s.indicies},parentNodes(){if(!this.activeNode)return[];const s=this.workflow.getParentNodesByDepth(this.activeNode.name);return s.filter(({name:e},t)=>this.activeNode&&e!==this.activeNode.name&&s.findIndex(n=>n.name===e)===t)},currentNodeDepth(){const s=this.parentNodes.find(e=>this.currentNode&&e.name===this.currentNode.name);return s?s.depth:-1},activeNodeType(){return this.activeNode?this.nodeTypesStore.getNodeType(this.activeNode.type,this.activeNode.typeVersion):null},isMultiInputNode(){return this.activeNodeType!==null&&this.activeNodeType.inputs.length>1}},methods:{getMultipleNodesText(s){if(!s||!this.isMultiInputNode||!this.activeNode||this.activeNodeType===null||this.activeNodeType.inputNames===void 0)return"";const n=(this.currentWorkflow.connectionsByDestinationNode[this.activeNode.name].main||[]).reduce((o,a,i)=>a[0]&&a[0].node===s?[...o,i]:o,[]).map(o=>this.activeNodeType&&this.activeNodeType.inputNames&&this.activeNodeType.inputNames[o]);return n.length===0?"":`(${n.join(" & ")})`},onNodeExecute(){this.$emit("execute"),this.activeNode&&this.$telemetry.track("User clicked ndv button",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:"input",type:"executePrevious"})},onRunIndexChange(s){this.$emit("runChange",s)},onLinkRun(){this.$emit("linkRun")},onUnlinkRun(){this.$emit("unlinkRun")},onSelect(s){const e=this.parentNodes.findIndex(t=>t.name===s)+1;this.$emit("select",s,e)},onConnectionHelpClick(){this.activeNode&&this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:"input",type:"not-connected-help"})},truncate(s){const e=s.substring(0,30);return e.length<s.length?`${e}...`:e}},watch:{showDraggableHint(s,e){s&&!e?setTimeout(()=>{this.draggableHintShown||(this.showDraggableHintWithDelay=this.showDraggableHint,this.showDraggableHintWithDelay&&(this.draggableHintShown=!0,this.$telemetry.track("User viewed data mapping tooltip",{type:"unexecuted input pane"})))},1e3):s||(this.showDraggableHintWithDelay=!1)}}}),YN="_titleSection_153li_1",XN="_noOutputData_153li_9",JN="_recoveredOutputData_153li_19",QN="_notConnected_153li_28",ZN="_title_153li_1",eI={titleSection:YN,noOutputData:XN,recoveredOutputData:JN,notConnected:QN,title:ZN};var tI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("RunData",{attrs:{nodeUi:e.currentNode,runIndex:e.runIndex,linkedRuns:e.linkedRuns,canLinkRuns:e.canLinkRuns,tooMuchDataTitle:e.$locale.baseText("ndv.input.tooMuchData.title"),noDataInBranchMessage:e.$locale.baseText("ndv.input.noOutputDataInBranch"),isExecuting:e.isExecutingPrevious,executingMessage:e.$locale.baseText("ndv.input.executingPrevious"),sessionId:e.sessionId,overrideOutputs:e.connectedCurrentNodeOutputs,mappingEnabled:!e.readOnly,distanceFromActive:e.currentNodeDepth,isProductionExecutionPreview:e.isProductionExecutionPreview,paneType:"input","data-test-id":"ndv-input-panel"},on:{itemHover:function(n){return e.$emit("itemHover",n)},linkRun:e.onLinkRun,unlinkRun:e.onUnlinkRun,runChange:e.onRunIndexChange,tableMounted:function(n){return e.$emit("tableMounted",n)}},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.titleSection},[e.parentNodes.length?t("n8n-select",{attrs:{"popper-append-to-body":!0,size:"small",value:e.currentNodeName,"no-data-text":e.$locale.baseText("ndv.input.noNodesFound"),placeholder:e.$locale.baseText("ndv.input.parentNodes"),filterable:"","data-test-id":"ndv-input-select"},on:{input:e.onSelect},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("span",{class:e.$style.title},[e._v(e._s(e.$locale.baseText("ndv.input")))])]},proxy:!0}],null,!1,744717951)},e._l(e.parentNodes,function(n){return t("n8n-option",{key:n.name,staticClass:"node-option",attrs:{value:n.name,label:`${e.truncate(n.name)} ${e.getMultipleNodesText(n.name)}`,"data-test-id":"ndv-input-option"}},[t("span",{staticClass:"ph-no-capture"},[e._v(e._s(e.truncate(n.name))+"Â ")]),e.getMultipleNodesText(n.name)?t("span",[e._v(e._s(e.getMultipleNodesText(n.name)))]):t("span",[e._v(e._s(e.$locale.baseText("ndv.input.nodeDistance",{adjustToNumber:n.depth})))])])}),1):t("span",{class:e.$style.title},[e._v(e._s(e.$locale.baseText("ndv.input")))])],1)]},proxy:!0},{key:"node-not-run",fn:function(){return[e.parentNodes.length?t("div",{class:e.$style.noOutputData},[t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.input.noOutputData.title")))]),e.readOnly?e._e():t("n8n-tooltip",{attrs:{manual:!0,value:e.showDraggableHint&&e.showDraggableHintWithDelay},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{innerHTML:e._s(e.$locale.baseText("dataMapping.dragFromPreviousHint",{interpolate:{name:e.focusedMappableInput}}))}})]},proxy:!0}],null,!1,293525496)},[t("NodeExecuteButton",{attrs:{type:"secondary",transparent:!0,nodeName:e.currentNodeName,label:e.$locale.baseText("ndv.input.noOutputData.executePrevious"),telemetrySource:"inputs","data-test-id":"execute-previous-node"},on:{execute:e.onNodeExecute}})],1),e.readOnly?e._e():t("n8n-text",{attrs:{tag:"div",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.noOutputData.hint"))+" ")])],1):t("div",{class:e.$style.notConnected},[t("div",[t("WireMeUp")],1),t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.input.notConnected.title")))]),t("n8n-text",{attrs:{tag:"div"}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.notConnected.message"))+" "),t("a",{attrs:{href:"https://docs.n8n.io/workflows/connections/",target:"_blank"},on:{click:e.onConnectionHelpClick}},[e._v(" "+e._s(e.$locale.baseText("ndv.input.notConnected.learnMore"))+" ")])])],1)]},proxy:!0},{key:"no-output-data",fn:function(){return[t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("ndv.input.noOutputData")))])]},proxy:!0},{key:"recovered-artificial-output-data",fn:function(){return[t("div",{class:e.$style.recoveredOutputData},[t("n8n-text",{attrs:{tag:"div",bold:!0,color:"text-dark",size:"large"}},[e._v(e._s(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeTitle")))]),t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeMessage"))+" ")])],1)]},proxy:!0}])})},sI=[];const da={$style:eI};function nI(s){for(var e in da)this[e]=da[e]}var oI=p(qN,tI,sI,!1,nI,"13e2d073",null,null);const aI=oI.exports,iI=x(re,Je,D).extend({name:"TriggerPanel",components:{NodeExecuteButton:Js,CopyInput:Zt,NodeIcon:rt},props:{nodeName:{type:String},sessionId:{type:String}},computed:{...b(le,ce,N,B),node(){return this.workflowsStore.getNodeByName(this.nodeName)},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},hasIssues(){return Boolean(this.node&&this.node.issues&&(this.node.issues.parameters||this.node.issues.credentials))},serviceName(){return this.nodeType?je(this.nodeType):""},isWebhookNode(){return Boolean(this.node&&this.node.type===it)},webhookHttpMethod(){if(!(!this.node||!this.nodeType||!this.nodeType.webhooks||!this.nodeType.webhooks.length))return this.getWebhookExpressionValue(this.nodeType.webhooks[0],"httpMethod")},webhookTestUrl(){if(!(!this.node||!this.nodeType||!this.nodeType.webhooks||!this.nodeType.webhooks.length))return this.getWebhookUrl(this.nodeType.webhooks[0],this.node,"test")},webhookProdUrl(){if(!(!this.node||!this.nodeType||!this.nodeType.webhooks||!this.nodeType.webhooks.length))return this.getWebhookUrl(this.nodeType.webhooks[0],this.node,"prod")},isWebhookBasedNode(){return Boolean(this.nodeType&&this.nodeType.webhooks&&this.nodeType.webhooks.length)},isPollingNode(){return Boolean(this.nodeType&&this.nodeType.polling)},isListeningForEvents(){const s=this.workflowsStore.executionWaitingForWebhook,e=this.workflowsStore.executedNode;return!!this.node&&!this.node.disabled&&this.isWebhookBasedNode&&s&&(!e||e===this.nodeName)},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},isActivelyPolling(){const s=this.workflowsStore.executedNode;return this.workflowRunning&&this.isPollingNode&&this.nodeName===s},isWorkflowActive(){return this.workflowsStore.isWorkflowActive},header(){const s=this.nodeType?je(this.nodeType):"";return this.isActivelyPolling?this.$locale.baseText("ndv.trigger.pollingNode.fetchingEvent"):this.nodeType&&this.nodeType.triggerPanel&&typeof this.nodeType.triggerPanel.header=="string"?this.nodeType.triggerPanel.header:this.isWebhookBasedNode?this.$locale.baseText("ndv.trigger.webhookBasedNode.action",{interpolate:{name:s}}):""},subheader(){const s=this.nodeType?je(this.nodeType):"";return this.isActivelyPolling?this.$locale.baseText("ndv.trigger.pollingNode.fetchingHint",{interpolate:{name:s}}):""},executionsHelp(){if(this.nodeType&&this.nodeType.triggerPanel&&this.nodeType.triggerPanel.executionsHelp!==void 0){if(typeof this.nodeType.triggerPanel.executionsHelp=="string")return this.nodeType.triggerPanel.executionsHelp;if(!this.isWorkflowActive&&this.nodeType.triggerPanel.executionsHelp.inactive)return this.nodeType.triggerPanel.executionsHelp.inactive;if(this.isWorkflowActive&&this.nodeType.triggerPanel.executionsHelp.active)return this.nodeType.triggerPanel.executionsHelp.active}return this.isWebhookBasedNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.webhookBasedNode.executionsHelp.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.webhookBasedNode.executionsHelp.inactive",{interpolate:{service:this.serviceName}}):this.isPollingNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.pollingNode.executionsHelp.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.pollingNode.executionsHelp.inactive",{interpolate:{service:this.serviceName}}):""},activationHint(){if(this.isActivelyPolling)return"";if(this.nodeType&&this.nodeType.triggerPanel&&this.nodeType.triggerPanel.activationHint){if(typeof this.nodeType.triggerPanel.activationHint=="string")return this.nodeType.triggerPanel.activationHint;if(!this.isWorkflowActive&&typeof this.nodeType.triggerPanel.activationHint.inactive=="string")return this.nodeType.triggerPanel.activationHint.inactive;if(this.isWorkflowActive&&typeof this.nodeType.triggerPanel.activationHint.active=="string")return this.nodeType.triggerPanel.activationHint.active}return this.isWebhookBasedNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.webhookBasedNode.activationHint.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.webhookBasedNode.activationHint.inactive",{interpolate:{service:this.serviceName}}):this.isPollingNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.pollingNode.activationHint.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.pollingNode.activationHint.inactive",{interpolate:{service:this.serviceName}}):""}},methods:{expandExecutionHelp(){this.$refs.help&&this.$refs.help.$emit("expand")},onLinkClick(s){if(!s.target)return;const e=s.target;e.localName==="a"&&e.dataset&&e.dataset.key&&(s.stopPropagation(),s.preventDefault(),e.dataset.key==="activate"?this.$emit("activate"):e.dataset.key==="executions"?(this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:"input",type:"open-executions-log"}),this.ndvStore.activeNodeName=null,this.uiStore.openModal(Ls)):e.dataset.key==="settings"&&this.uiStore.openModal(Pe))},onTestLinkCopied(){this.$telemetry.track("User copied webhook URL",{pane:"inputs",type:"test url"})},onNodeExecute(){this.$emit("execute")}}}),rI="_container_1evnm_1",lI="_header_1evnm_18",cI="_action_1evnm_25",dI="_shake_1evnm_29",uI="_accordion_1evnm_50",hI={container:rI,header:lI,action:cI,shake:dI,accordion:uI};var pI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.hasIssues?t("div",{key:"empty"}):e.isListeningForEvents?t("div",{key:"listening"},[t("n8n-pulse",[t("NodeIcon",{attrs:{nodeType:e.nodeType,size:40}})],1),e.isWebhookNode?t("div",[t("n8n-text",{staticClass:"mb-2xs",attrs:{tag:"div",size:"large",color:"text-dark",bold:""}},[e._v(e._s(e.$locale.baseText("ndv.trigger.webhookNode.listening")))]),t("div",{class:[e.$style.shake,"mb-xs"]},[t("n8n-text",[e._v(" "+e._s(e.$locale.baseText("ndv.trigger.webhookNode.requestHint",{interpolate:{type:this.webhookHttpMethod}}))+" ")])],1),t("CopyInput",{staticClass:"mb-2xl",attrs:{value:e.webhookTestUrl,toastTitle:e.$locale.baseText("ndv.trigger.copiedTestUrl"),size:"medium",collapse:!0,"copy-button-text":e.$locale.baseText("generic.clickToCopy")},on:{copy:e.onTestLinkCopied}}),t("NodeExecuteButton",{attrs:{nodeName:e.nodeName,size:"medium",telemetrySource:"inputs"},on:{execute:e.onNodeExecute}})],1):t("div",[t("n8n-text",{staticClass:"mb-2xs",attrs:{tag:"div",size:"large",color:"text-dark",bold:""}},[e._v(e._s(e.$locale.baseText("ndv.trigger.webhookBasedNode.listening")))]),t("div",{class:[e.$style.shake,"mb-xs"]},[t("n8n-text",{attrs:{tag:"div"}},[e._v(" "+e._s(e.$locale.baseText("ndv.trigger.webhookBasedNode.serviceHint",{interpolate:{service:e.serviceName}}))+" ")])],1),t("NodeExecuteButton",{attrs:{nodeName:e.nodeName,size:"medium",telemetrySource:"inputs"},on:{execute:e.onNodeExecute}})],1)],1):t("div",{key:"default"},[e.isActivelyPolling?t("div",{staticClass:"mb-xl"},[t("n8n-spinner",{attrs:{type:"ring"}})],1):e._e(),t("div",{class:e.$style.action},[t("div",{class:e.$style.header},[e.header?t("n8n-heading",{attrs:{tag:"h1",bold:""}},[e._v(" "+e._s(e.header)+" ")]):e._e(),e.subheader?t("n8n-text",[t("span",{domProps:{textContent:e._s(e.subheader)}})]):e._e()],1),t("NodeExecuteButton",{attrs:{nodeName:e.nodeName,size:"medium",telemetrySource:"inputs"},on:{execute:e.onNodeExecute}})],1),e.activationHint?t("n8n-text",{attrs:{size:"small"},on:{click:e.onLinkClick}},[t("span",{domProps:{innerHTML:e._s(e.activationHint)}}),e._v("Â  ")]):e._e(),e.activationHint&&e.executionsHelp?t("n8n-link",{attrs:{size:"small"},on:{click:e.expandExecutionHelp}},[e._v(e._s(e.$locale.baseText("ndv.trigger.moreInfo")))]):e._e(),e.executionsHelp?t("n8n-info-accordion",{ref:"help",class:e.$style.accordion,attrs:{title:e.$locale.baseText("ndv.trigger.executionsHint.question"),description:e.executionsHelp},on:{click:e.onLinkClick}}):e._e()],1)])],1)},fI=[];const ua={$style:hI};function mI(s){for(var e in ua)this[e]=ua[e]}var gI=p(iI,pI,fI,!1,mI,"23df31cd",null,null);const _I=gI.exports,vI=x(xe,Be,re,sr,Tt).extend({name:"NodeDetailsView",components:{NodeSettings:vr,InputPanel:aI,OutputPanel:VN,NDVDraggablePanels:$C,TriggerPanel:_I},props:{readOnly:{type:Boolean},renaming:{type:Boolean},isProductionExecutionPreview:{type:Boolean,default:!1}},setup(){return{...qs()}},data(){return{settingsEventBus:q(),runInputIndex:-1,runOutputIndex:-1,isLinkingEnabled:!0,selectedInput:void 0,triggerWaitingWarningEnabled:!1,isDragging:!1,mainPanelPosition:0,pinDataDiscoveryTooltipVisible:!1,avgInputRowHeight:0,avgOutputRowHeight:0}},mounted(){me.on("data-pinning-discovery",this.setIsTooltipVisible)},destroyed(){me.off("data-pinning-discovery",this.setIsTooltipVisible)},computed:{...b(le,ce,N,B,P),sessionId(){return this.ndvStore.sessionId},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},showTriggerWaitingWarning(){return this.triggerWaitingWarningEnabled&&!!this.activeNodeType&&!this.activeNodeType.group.includes("trigger")&&this.workflowRunning&&this.workflowsStore.executionWaitingForWebhook},activeNode(){return this.ndvStore.activeNode},inputNodeName(){return this.selectedInput||this.parentNode},inputNode(){return this.inputNodeName?this.workflowsStore.getNodeByName(this.inputNodeName):null},activeNodeType(){return this.activeNode?this.nodeTypesStore.getNodeType(this.activeNode.type,this.activeNode.typeVersion):null},showTriggerPanel(){var n,o,a,i;const s=!!((o=(n=this.activeNodeType)==null?void 0:n.webhooks)!=null&&o.length),e=(a=this.activeNodeType)==null?void 0:a.polling,t=!!((i=this.activeNodeType)!=null&&i.triggerPanel);return!this.readOnly&&this.isTriggerNode&&(s||e||t)},workflow(){return this.getCurrentWorkflow()},parentNodes(){return this.activeNode?this.workflow.getParentNodesByDepth(this.activeNode.name,1).map(({name:s})=>s)||[]:[]},parentNode(){return this.parentNodes[0]},isExecutableTriggerNode(){return this.activeNodeType?lh.includes(this.activeNodeType.name):!1},isTriggerNode(){return!!this.activeNodeType&&(this.activeNodeType.group.includes("trigger")||this.activeNodeType.name===Us)},isActiveStickyNode(){return!!this.ndvStore.activeNode&&this.ndvStore.activeNode.type===Re},workflowExecution(){return this.workflowsStore.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const s=this.workflowExecution.data;return s&&s.resultData?s.resultData.runData:null},maxOutputRun(){if(this.activeNode===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.activeNode.name)?0:s[this.activeNode.name].length?s[this.activeNode.name].length-1:0},outputRun(){return this.runOutputIndex===-1?this.maxOutputRun:Math.min(this.runOutputIndex,this.maxOutputRun)},maxInputRun(){if(this.inputNode===null)return 0;const s=this.workflowRunData;return s===null||!s.hasOwnProperty(this.inputNode.name)?0:s[this.inputNode.name].length?s[this.inputNode.name].length-1:0},inputRun(){return this.isLinkingEnabled&&this.maxOutputRun===this.maxInputRun?this.outputRun:this.runInputIndex===-1?this.maxInputRun:Math.min(this.runInputIndex,this.maxInputRun)},canLinkRuns(){return this.maxOutputRun>0&&this.maxOutputRun===this.maxInputRun},linked(){return this.isLinkingEnabled&&this.canLinkRuns},inputPanelMargin(){return this.isTriggerNode?0:80},featureRequestUrl(){return this.activeNodeType?`${ch}${this.activeNodeType.name}`:""},outputPanelEditMode(){return this.ndvStore.outputPanelEditMode},isWorkflowRunning(){return this.uiStore.isActionActive("workflowRunning")},isExecutionWaitingForWebhook(){return this.workflowsStore.executionWaitingForWebhook},blockUi(){return this.isWorkflowRunning||this.isExecutionWaitingForWebhook},foreignCredentials(){const s=(this.activeNode||{}).credentials,e=this.workflowsStore.usedCredentials,t=[];return s&&this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)&&Object.values(s).forEach(n=>{n.id&&e[n.id]&&!e[n.id].currentUserHasAccess&&t.push(n.id)}),t},hasForeignCredential(){return this.foreignCredentials.length>0}},watch:{activeNode(s){s&&!this.isActiveStickyNode&&(this.runInputIndex=-1,this.runOutputIndex=-1,this.isLinkingEnabled=!0,this.selectedInput=void 0,this.triggerWaitingWarningEnabled=!1,this.avgOutputRowHeight=0,this.avgInputRowHeight=0,setTimeout(this.ndvStore.setNDVSessionId,0),this.$externalHooks().run("dataDisplay.nodeTypeChanged",{nodeSubtitle:this.getNodeSubtitle(s,this.activeNodeType,this.getCurrentWorkflow())}),setTimeout(()=>{if(this.activeNode){const e=this.workflowsStore.outgoingConnectionsByNodeName(this.activeNode.name);this.$telemetry.track("User opened node modal",{node_type:this.activeNodeType?this.activeNodeType.name:"",workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,is_editable:!this.hasForeignCredential,parameters_pane_position:this.mainPanelPosition,input_first_connector_runs:this.maxInputRun,output_first_connector_runs:this.maxOutputRun,selected_view_inputs:this.isTriggerNode?"trigger":this.ndvStore.inputPanelDisplayMode,selected_view_outputs:this.ndvStore.outputPanelDisplayMode,input_connectors:this.parentNodes.length,output_connectors:e&&e.main&&e.main.length,input_displayed_run_index:this.inputRun,output_displayed_run_index:this.outputRun,data_pinning_tooltip_presented:this.pinDataDiscoveryTooltipVisible,input_displayed_row_height_avg:this.avgInputRowHeight,output_displayed_row_height_avg:this.avgOutputRowHeight})}},2e3)),window.top&&!this.isActiveStickyNode&&window.top.postMessage(JSON.stringify({command:s?"openNDV":"closeNDV"}),"*")},maxOutputRun(){this.runOutputIndex=-1},maxInputRun(){this.runInputIndex=-1},inputNodeName(s){setTimeout(()=>{this.ndvStore.setInputNodeName(s)},0)},inputRun(){setTimeout(()=>{this.ndvStore.setInputRunIndex(this.inputRun)},0)}},methods:{setIsTooltipVisible({isTooltipVisible:s}){this.pinDataDiscoveryTooltipVisible=s},onKeyDown(s){if(s.key==="s"&&this.isCtrlKeyPressed(s)){if(s.stopPropagation(),s.preventDefault(),this.readOnly)return;this.$emit("saveKeyboardShortcut",s)}},onInputItemHover(s){if(!this.inputNodeName)return;if(s===null){this.ndvStore.setHoveringItem(null);return}const e={nodeName:this.inputNodeName,runIndex:this.inputRun,outputIndex:s.outputIndex,itemIndex:s.itemIndex};this.ndvStore.setHoveringItem(e)},onOutputItemHover(s){if(s===null||!this.activeNode){this.ndvStore.setHoveringItem(null);return}const e={nodeName:this.activeNode.name,runIndex:this.outputRun,outputIndex:s.outputIndex,itemIndex:s.itemIndex};this.ndvStore.setHoveringItem(e)},onInputTableMounted(s){this.avgInputRowHeight=s.avgRowHeight},onOutputTableMounted(s){this.avgOutputRowHeight=s.avgRowHeight},onWorkflowActivate(){this.ndvStore.activeNodeName=null,setTimeout(()=>{this.activateCurrentWorkflow("ndv")},1e3)},onFeatureRequestClick(){window.open(this.featureRequestUrl,"_blank"),this.activeNode&&this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,session_id:this.sessionId,pane:"main",type:"i-wish-this-node-would"})},onPanelsInit(s){this.mainPanelPosition=s.position},onDragStart(s){this.isDragging=!0,this.mainPanelPosition=s.position},onDragEnd(s){this.isDragging=!1,this.$telemetry.track("User moved parameters pane",{window_width:s.windowWidth,start_position:this.mainPanelPosition,end_position:s.position,node_type:this.activeNodeType?this.activeNodeType.name:"",session_id:this.sessionId,workflow_id:this.workflowsStore.workflowId}),this.mainPanelPosition=s.position},onLinkRunToInput(){this.runOutputIndex=this.runInputIndex,this.isLinkingEnabled=!0,this.trackLinking("input")},onLinkRunToOutput(){this.isLinkingEnabled=!0,this.trackLinking("output")},onUnlinkRun(s){this.runInputIndex=this.runOutputIndex,this.isLinkingEnabled=!1,this.trackLinking(s)},trackLinking(s){this.$telemetry.track("User changed ndv run linking",{node_type:this.activeNodeType?this.activeNodeType.name:"",session_id:this.sessionId,linked:this.linked,pane:s})},onNodeExecute(){setTimeout(()=>{!this.activeNode||!this.workflowRunning||(this.triggerWaitingWarningEnabled=!0)},1e3)},openSettings(){this.settingsEventBus.emit("openSettings")},valueChanged(s){this.$emit("valueChanged",s)},nodeTypeSelected(s){this.$emit("nodeTypeSelected",s)},async close(){if(!this.isDragging){if(this.outputPanelEditMode.enabled){if(await this.confirmMessage("",this.$locale.baseText("ndv.pinData.beforeClosing.title"),null,this.$locale.baseText("ndv.pinData.beforeClosing.confirm"),this.$locale.baseText("ndv.pinData.beforeClosing.cancel"))){const{value:e}=this.outputPanelEditMode;if(!this.isValidPinDataSize(e)){me.emit("data-pinning-error",{errorType:"data-too-large",source:"on-ndv-close-modal"});return}if(!this.isValidPinDataJSON(e)){me.emit("data-pinning-error",{errorType:"invalid-json",source:"on-ndv-close-modal"});return}this.activeNode&&this.workflowsStore.pinData({node:this.activeNode,data:fi(e)})}this.ndvStore.setOutputPanelEditModeEnabled(!1)}await this.$externalHooks().run("dataDisplay.nodeEditingFinished"),this.$telemetry.track("User closed node modal",{node_type:this.activeNodeType?this.activeNodeType.name:"",session_id:this.sessionId,workflow_id:this.workflowsStore.workflowId}),this.triggerWaitingWarningEnabled=!1,this.ndvStore.activeNodeName=null,this.ndvStore.resetNDVSessionId()}},onRunOutputIndexChange(s){this.runOutputIndex=s,this.trackRunChange(s,"output")},onRunInputIndexChange(s){this.runInputIndex=s,this.linked&&(this.runOutputIndex=s),this.trackRunChange(s,"input")},trackRunChange(s,e){this.$telemetry.track("User changed ndv run dropdown",{session_id:this.sessionId,run_index:s,node_type:this.activeNodeType?this.activeNodeType.name:"",pane:e})},onInputSelect(s,e){this.runInputIndex=-1,this.isLinkingEnabled=!0,this.selectedInput=s,this.$telemetry.track("User changed ndv input dropdown",{node_type:this.activeNode?this.activeNode.type:"",session_id:this.sessionId,workflow_id:this.workflowsStore.workflowId,selection_value:e,input_node_type:this.inputNode?this.inputNode.type:""})},onStopExecution(){this.$emit("stopExecution")}}});const wI="_modalBackground_1cu57_1",yI="_triggerWarning_1cu57_6",bI="_backToCanvas_1cu57_10",xI="_featureRequest_1cu57_28",TI={modalBackground:wI,triggerWarning:yI,backToCanvas:bI,featureRequest:xI};var kI=function(){var n;var e=this,t=e._self._c;return e._self._setupProxy,t("el-dialog",{staticClass:"ndv-wrapper",attrs:{visible:(!!e.activeNode||e.renaming)&&!e.isActiveStickyNode,"before-close":e.close,"show-close":!1,"custom-class":"data-display-wrapper",width:"auto","append-to-body":"","data-test-id":"ndv"}},[t("n8n-tooltip",{attrs:{placement:"bottom-start",value:e.showTriggerWaitingWarning,disabled:!e.showTriggerWaitingWarning,manual:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{class:e.$style.triggerWarning},[e._v(" "+e._s(e.$locale.baseText("ndv.backToCanvas.waitingForTriggerWarning"))+" ")])]},proxy:!0}])},[t("div",{class:e.$style.backToCanvas,attrs:{"data-test-id":"back-to-canvas"},on:{click:e.close}},[t("n8n-icon",{attrs:{icon:"arrow-left",color:"text-xlight",size:"medium"}}),t("n8n-text",{attrs:{color:"text-xlight",size:"medium",bold:!0}},[e._v(" "+e._s(e.$locale.baseText("ndv.backToCanvas"))+" ")])],1)]),e.activeNode?t("div",{ref:"container",staticClass:"data-display",attrs:{tabindex:"0"},on:{"!keydown":function(o){return e.onKeyDown.apply(null,arguments)}}},[t("div",{class:e.$style.modalBackground,on:{click:e.close}}),t("NDVDraggablePanels",{attrs:{isTriggerNode:e.isTriggerNode,hideInputAndOutput:e.activeNodeType===null,position:e.isTriggerNode&&!e.showTriggerPanel?0:void 0,isDraggable:!e.isTriggerNode,hasDoubleWidth:((n=e.activeNodeType)==null?void 0:n.parameterPane)==="wide",nodeType:e.activeNodeType},on:{close:e.close,init:e.onPanelsInit,dragstart:e.onDragStart,dragend:e.onDragEnd},scopedSlots:e._u([{key:"input",fn:function(){return[e.showTriggerPanel?t("TriggerPanel",{attrs:{nodeName:e.activeNode.name,sessionId:e.sessionId},on:{execute:e.onNodeExecute,activate:e.onWorkflowActivate}}):e.isTriggerNode?e._e():t("InputPanel",{attrs:{workflow:e.workflow,canLinkRuns:e.canLinkRuns,runIndex:e.inputRun,linkedRuns:e.linked,currentNodeName:e.inputNodeName,sessionId:e.sessionId,readOnly:e.readOnly||e.hasForeignCredential,isProductionExecutionPreview:e.isProductionExecutionPreview},on:{linkRun:e.onLinkRunToInput,unlinkRun:()=>e.onUnlinkRun("input"),runChange:e.onRunInputIndexChange,openSettings:e.openSettings,select:e.onInputSelect,execute:e.onNodeExecute,tableMounted:e.onInputTableMounted,itemHover:e.onInputItemHover}})]},proxy:!0},{key:"output",fn:function(){return[t("OutputPanel",{attrs:{"data-test-id":"output-panel",canLinkRuns:e.canLinkRuns,runIndex:e.outputRun,linkedRuns:e.linked,sessionId:e.sessionId,isReadOnly:e.readOnly||e.hasForeignCredential,blockUI:e.blockUi&&e.isTriggerNode&&!e.isExecutableTriggerNode,isProductionExecutionPreview:e.isProductionExecutionPreview},on:{linkRun:e.onLinkRunToOutput,unlinkRun:()=>e.onUnlinkRun("output"),runChange:e.onRunOutputIndexChange,openSettings:e.openSettings,tableMounted:e.onOutputTableMounted,itemHover:e.onOutputItemHover}})]},proxy:!0},{key:"main",fn:function(){return[t("NodeSettings",{attrs:{eventBus:e.settingsEventBus,dragging:e.isDragging,sessionId:e.sessionId,nodeType:e.activeNodeType,foreignCredentials:e.foreignCredentials,readOnly:e.readOnly,blockUI:e.blockUi&&e.showTriggerPanel,executable:!e.readOnly},on:{valueChanged:e.valueChanged,execute:e.onNodeExecute,stopExecution:e.onStopExecution,activate:e.onWorkflowActivate}}),e.featureRequestUrl?t("a",{class:e.$style.featureRequest,attrs:{target:"_blank"},on:{click:e.onFeatureRequestClick}},[t("font-awesome-icon",{attrs:{icon:"lightbulb"}}),e._v(" "+e._s(e.$locale.baseText("ndv.featureRequest"))+" ")],1):e._e()]},proxy:!0}],null,!1,2273905729)})],1):e._e()],1)},SI=[];const ha={$style:TI};function $I(s){for(var e in ha)this[e]=ha[e]}var EI=p(vI,kI,SI,!1,$I,null,null,null);const CI=EI.exports,yr=x(_r).extend({mounted(){if(this.data!==null)try{this.__addNode(this.data)}catch(s){}},computed:{...b(le,N,Bs,B,Xt),data(){return this.workflowsStore.getNodeByName(this.name)},nodeId(){var s;return((s=this.data)==null?void 0:s.id)||""}},props:{name:{type:String},instance:{type:Object},isReadOnly:{type:Boolean},isActive:{type:Boolean},hideActions:{type:Boolean},disableSelecting:{type:Boolean},showCustomTooltip:{type:Boolean}},methods:{__addEndpointTestingData(s,e,t){if(window!=null&&window.Cypress&&"canvas"in s.endpoint){const n=s.endpoint.canvas;this.instance.setAttribute(n,"data-endpoint-name",this.data.name),this.instance.setAttribute(n,"data-input-index",t.toString()),this.instance.setAttribute(n,"data-endpoint-type",e)}},__addInputEndpoints(s,e){let t;const n={};e.inputs.forEach((o,a)=>{var c;n.hasOwnProperty(o)?n[o]++:n[o]=0,t=n[o];const i=Sn.input[e.inputs.length][t],r={uuid:xs(this.nodeId,t),anchor:i,maxConnections:-1,endpoint:"Rectangle",paintStyle:$n(e,"--color-foreground-xdark"),hoverPaintStyle:$n(e,"--color-primary"),source:!1,target:!this.isReadOnly&&e.inputs.length>1,parameters:{nodeId:this.nodeId,type:o,index:t},enabled:!this.isReadOnly,cssClass:"rect-input-endpoint",dragAllowedWhenFull:!0,hoverClass:"dropHover"},l=(c=this.instance)==null?void 0:c.addEndpoint(this.$refs[this.data.name],r);this.__addEndpointTestingData(l,"input",t),e.inputNames&&l.addOverlay(dh(e.inputNames[t])),Array.isArray(l)||(l.__meta={nodeName:s.name,nodeId:this.nodeId,index:a,totalEndpoints:e.inputs.length})}),e.inputs.length===0&&this.instance.manage(this.$refs[this.data.name])},__addOutputEndpoints(s,e){let t;const n={};e.outputs.forEach((o,a)=>{n.hasOwnProperty(o)?n[o]++:n[o]=0,t=n[o];const i=Sn.output[e.outputs.length][t],r={uuid:Vt(this.nodeId,t),anchor:i,maxConnections:-1,endpoint:{type:"Dot",options:{radius:e&&e.outputs.length>2?7:9}},paintStyle:En(e,"--color-foreground-xdark"),hoverPaintStyle:En(e,"--color-primary"),source:!0,target:!1,enabled:!this.isReadOnly,parameters:{nodeId:this.nodeId,type:o,index:t},hoverClass:"dot-output-endpoint-hover",connectionsDirected:!0,cssClass:"dot-output-endpoint",dragAllowedWhenFull:!1},l=this.instance.addEndpoint(this.$refs[this.data.name],r);if(this.__addEndpointTestingData(l,"output",t),e.outputNames){const c=uh(e.outputNames[t]);l.addOverlay(c)}if(Array.isArray(l)||(l.__meta={nodeName:s.name,nodeId:this.nodeId,index:a,totalEndpoints:e.outputs.length}),!this.isReadOnly){const c={uuid:Vt(this.nodeId,t),anchor:i,maxConnections:-1,endpoint:{type:"N8nPlus",options:{dimensions:24,connectedEndpoint:l,showOutputLabel:e.outputs.length===1,size:e.outputs.length>=3?"small":"medium",hoverMessage:this.$locale.baseText("nodeBase.clickToAddNodeOrDragToConnect")}},source:!0,target:!1,enabled:!this.isReadOnly,paintStyle:{outlineStroke:"none"},hoverPaintStyle:{outlineStroke:"none"},parameters:{nodeId:this.nodeId,type:o,index:t},cssClass:"plus-draggable-endpoint",dragAllowedWhenFull:!1},h=this.instance.addEndpoint(this.$refs[this.data.name],c);this.__addEndpointTestingData(h,"plus",t),Array.isArray(h)||(h.__meta={nodeName:s.name,nodeId:this.nodeId,index:a,totalEndpoints:e.outputs.length})}})},__addNode(s){var t;const e=(t=this.nodeTypesStore.getNodeType(s.type,s.typeVersion))!=null?t:this.nodeTypesStore.getNodeType(hh);this.__addInputEndpoints(s,e),this.__addOutputEndpoints(s,e)},touchEnd(s){this.isTouchDevice&&this.uiStore.isActionActive("dragActive")&&this.uiStore.removeActiveAction("dragActive")},mouseLeftClick(s){const e=s.path||s.composedPath&&s.composedPath();for(let t=0;t<e.length;t++)if(e[t].className&&typeof e[t].className=="string"&&e[t].className.includes("no-select-on-click"))return;this.isTouchDevice||(this.uiStore.isActionActive("dragActive")?this.uiStore.removeActiveAction("dragActive"):(this.isCtrlKeyPressed(s)||this.$emit("deselectAllNodes"),this.uiStore.isNodeSelected(this.data.name)?this.$emit("deselectNode",this.name):this.$emit("nodeSelected",this.name)))}}}),NI=x(xe,yr,Be,re,Tt,Ie).extend({name:"Node",components:{TitledList:ph,FontAwesomeIcon:ui,NodeIcon:rt},props:{isProductionExecutionPreview:{type:Boolean,default:!1}},computed:{...b(le,ce,N,B),showPinnedDataInfo(){return this.hasPinData&&!this.isProductionExecutionPreview},isDuplicatable(){return this.nodeType?this.nodeType.maxNodes===void 0||this.sameTypeNodes.length<this.nodeType.maxNodes:!0},isScheduledGroup(){var s;return((s=this.nodeType)==null?void 0:s.group.includes("schedule"))===!0},nodeRunData(){var s;return this.workflowsStore.getWorkflowResultDataByNodeName(((s=this.data)==null?void 0:s.name)||"")||[]},hasIssues(){var s;return this.nodeExecutionStatus&&["crashed","error","failed"].includes(this.nodeExecutionStatus)?!0:this.hasPinData?!1:!!(((s=this.data)==null?void 0:s.issues)!==void 0&&Object.keys(this.data.issues).length)},workflowDataItems(){const s=this.nodeRunData;return s===null?0:s.length},canvasOffsetPosition(){return this.uiStore.nodeViewOffsetPosition},getTriggerNodeTooltip(){if(this.nodeType!==null&&this.nodeType.hasOwnProperty("eventTriggerDescription")){const s=this.$locale.shortNodeType(this.nodeType.name),{eventTriggerDescription:e}=this.nodeType;return this.$locale.nodeText().eventTriggerDescription(s,e||"")}else return this.$locale.baseText("node.waitingForYouToCreateAnEventIn",{interpolate:{nodeType:this.nodeType?je(this.nodeType):""}})},isPollingTypeNode(){return!!(this.nodeType&&this.nodeType.polling)},isExecuting(){return this.workflowsStore.executingNode===this.data.name},isSingleActiveTriggerNode(){return this.workflowsStore.workflowTriggerNodes.filter(e=>{const t=this.nodeTypesStore.getNodeType(e.type,e.typeVersion);return t&&t.eventTriggerDescription!==""&&!e.disabled}).length===1},isManualTypeNode(){return this.data.type===Jt},isTriggerNode(){var s;return this.nodeTypesStore.isTriggerNode(((s=this.data)==null?void 0:s.type)||"")},isTriggerNodeTooltipEmpty(){return this.nodeType!==null?this.nodeType.eventTriggerDescription==="":!1},isNodeDisabled(){return this.node&&this.node.disabled},nodeType(){return this.data&&this.nodeTypesStore.getNodeType(this.data.type,this.data.typeVersion)},node(){return this.workflowsStore.nodesByName[this.name]},sameTypeNodes(){return this.workflowsStore.allNodes.filter(s=>s.type===this.data.type)},nodeClass(){return{"node-box":!0,disabled:this.data.disabled,executing:this.isExecuting}},nodeExecutionStatus(){var e,t;const s=(e=this.workflowsStore.getWorkflowRunData)==null?void 0:e[this.name];return s&&(t=s[0].executionStatus)!=null?t:""},nodeIssues(){var t,n;const s=[],e=(t=this.workflowsStore.getWorkflowRunData)==null?void 0:t[this.name];return e&&e.forEach(o=>{o.error&&s.push(`${o.error.message}${o.error.description?` (${o.error.description})`:""}`)}),((n=this.data)==null?void 0:n.issues)!==void 0&&s.push(...pi(this.data.issues,this.data)),s},nodeDisabledIcon(){return this.data.disabled===!1?"pause":"play"},position(){return this.node?this.node.position:[0,0]},showDisabledLinethrough(){return!!(this.data.disabled&&this.nodeType&&this.nodeType.inputs.length===1&&this.nodeType.outputs.length===1)},nodePosition(){return{left:this.position[0]+"px",top:this.position[1]+"px"}},shortNodeType(){return this.$locale.shortNodeType(this.data.type)},nodeTitle(){return this.data.name==="Start"?this.$locale.headerText({key:"headers.start.displayName",fallback:"Start"}):this.data.name},waiting(){const s=this.workflowsStore.getWorkflowExecution;if(s&&s.waitTill){const e=Ce(s,"data.resultData.lastNodeExecuted");if(this.name===e){const t=new Date(s.waitTill);return t.toISOString()===Di?this.$locale.baseText("node.theNodeIsWaitingIndefinitelyForAnIncomingWebhookCall"):this.$locale.baseText("node.nodeIsWaitingTill",{interpolate:{date:t.toLocaleDateString(),time:t.toLocaleTimeString()}})}}},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},nodeStyle(){let s=Ze("--color-foreground-xdark");return this.data.disabled?s=Ze("--color-foreground-base"):this.isExecuting||(this.hasIssues?s=Ze("--color-danger"):this.waiting||this.showPinnedDataInfo?s=Ze("--color-secondary"):this.nodeExecutionStatus==="unknown"?s=Ze("--color-foreground-xdark"):this.workflowDataItems&&(s=Ze("--color-success"))),{"border-color":s}},isSelected(){return this.uiStore.getSelectedNodes.find(s=>s.name===this.data.name)!==void 0},shiftOutputCount(){return!!(this.nodeType&&this.nodeType.outputs.length>2)},shouldShowTriggerTooltip(){return!!this.node&&this.isTriggerNode&&!this.isPollingTypeNode&&!this.hasPinData&&!this.isNodeDisabled&&this.workflowRunning&&this.workflowDataItems===0&&this.isSingleActiveTriggerNode&&!this.isTriggerNodeTooltipEmpty&&!this.hasIssues&&!this.dragging}},watch:{isActive(s,e){!s&&e&&this.setSubtitle()},canvasOffsetPosition(){this.showTriggerNodeTooltip&&(this.showTriggerNodeTooltip=!1,setTimeout(()=>{this.showTriggerNodeTooltip=this.shouldShowTriggerTooltip},200)),this.pinDataDiscoveryTooltipVisible&&(this.pinDataDiscoveryTooltipVisible=!1,setTimeout(()=>{this.pinDataDiscoveryTooltipVisible=!0},200))},shouldShowTriggerTooltip(s){s?setTimeout(()=>{this.showTriggerNodeTooltip=this.shouldShowTriggerTooltip},2500):this.showTriggerNodeTooltip=!1},nodeRunData(s){this.$emit("run",{name:this.data.name,data:s,waiting:!!this.waiting})}},created(){localStorage.getItem(bs)||(this.unwatchWorkflowDataItems=this.$watch("workflowDataItems",e=>{this.showPinDataDiscoveryTooltip(e)}))},mounted(){this.setSubtitle(),this.nodeRunData&&setTimeout(()=>{this.$emit("run",{name:this.data&&this.data.name,data:this.nodeRunData,waiting:!!this.waiting})},0)},data(){return{isTouchActive:!1,nodeSubtitle:"",showTriggerNodeTooltip:!1,pinDataDiscoveryTooltipVisible:!1,dragging:!1,unwatchWorkflowDataItems:()=>{}}},methods:{showPinDataDiscoveryTooltip(s){!this.isTriggerNode||this.isManualTypeNode||this.isScheduledGroup||s===0||(localStorage.setItem(bs,"true"),this.pinDataDiscoveryTooltipVisible=!0,this.unwatchWorkflowDataItems())},setSubtitle(){const s=this.getNodeSubtitle(this.data,this.nodeType,this.getCurrentWorkflow())||"";this.nodeSubtitle=s.includes(fh)?"":s},disableNode(){this.data!==null&&(this.disableNodes([this.data]),this.historyStore.pushCommandToUndo(new mh(this.data.name,!this.data.disabled,this.data.disabled===!0)),this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"disable",workflow_id:this.workflowsStore.workflowId}))},executeNode(){this.$emit("runWorkflow",this.data.name,"Node.executeNode"),this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"execute",workflow_id:this.workflowsStore.workflowId})},deleteNode(){this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"delete",workflow_id:this.workflowsStore.workflowId}),S.nextTick(()=>{this.$emit("removeNode",this.data.name)})},duplicateNode(){this.$telemetry.track("User clicked node hover button",{node_type:this.data.type,button_name:"duplicate",workflow_id:this.workflowsStore.workflowId}),S.nextTick(()=>{this.$emit("duplicateNode",this.data.name)})},onClick(s){this.callDebounced("onClickDebounced",{debounceTime:50,trailing:!0},s)},onClickDebounced(s){s.detail>=2?this.setNodeActive():this.mouseLeftClick(s)},setNodeActive(){this.ndvStore.activeNodeName=this.data?this.data.name:"",this.pinDataDiscoveryTooltipVisible=!1},touchStart(){this.isTouchDevice===!0&&this.isMacOs===!1&&this.isTouchActive===!1&&(this.isTouchActive=!0,setTimeout(()=>{this.isTouchActive=!1},2e3))}}});var II=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:e.data.name,class:{"node-wrapper":!0,"node-wrapper--trigger":e.isTriggerNode},style:e.nodePosition,attrs:{id:e.nodeId,"data-test-id":"canvas-node","data-name":e.data.name}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelected,expression:"isSelected"}],staticClass:"select-background"}),t("div",{class:{"node-default":!0,"touch-active":e.isTouchActive,"is-touch-device":e.isTouchDevice}},[t("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.touchStart,expression:"touchStart",arg:"start"},{name:"touch",rawName:"v-touch:end",value:e.touchEnd,expression:"touchEnd",arg:"end"}],class:e.nodeClass,style:e.nodeStyle,on:{click:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&n.button!==0?null:e.onClick.apply(null,arguments)}}},[e.isTriggerNode?t("i",{staticClass:"trigger-icon"},[t("n8n-tooltip",{attrs:{placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("node.thisIsATriggerNode"))}})]},proxy:!0}],null,!1,2174233095)},[t("font-awesome-icon",{attrs:{icon:"bolt",size:"lg"}})],1)],1):e._e(),e.data.disabled?e._e():t("div",{class:{"node-info-icon":!0,"shift-icon":e.shiftOutputCount}},[e.hasIssues?t("div",{staticClass:"node-issues"},[t("n8n-tooltip",{attrs:{placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[t("titled-list",{attrs:{title:`${e.$locale.baseText("node.issues")}:`,items:e.nodeIssues}})]},proxy:!0}],null,!1,3162752299)},[t("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}})],1)],1):e.waiting||e.nodeExecutionStatus==="waiting"?t("div",{staticClass:"waiting"},[t("n8n-tooltip",{attrs:{placement:"bottom"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.waiting)}})]},proxy:!0}],null,!1,626657260)},[t("font-awesome-icon",{attrs:{icon:"clock"}})],1)],1):e.showPinnedDataInfo?t("span",{staticClass:"node-pin-data-icon"},[t("font-awesome-icon",{attrs:{icon:"thumbtack"}}),e.workflowDataItems>1?t("span",{staticClass:"items-count"},[e._v(" "+e._s(e.workflowDataItems))]):e._e()],1):e.nodeExecutionStatus==="unknown"?t("span"):e.workflowDataItems?t("span",{staticClass:"data-count"},[t("font-awesome-icon",{attrs:{icon:"check"}}),e.workflowDataItems>1?t("span",{staticClass:"items-count"},[e._v(" "+e._s(e.workflowDataItems))]):e._e()],1):e._e()]),t("div",{staticClass:"node-executing-info",attrs:{title:e.$locale.baseText("node.nodeIsExecuting")}},[t("font-awesome-icon",{attrs:{icon:"sync-alt",spin:""}})],1),t("div",{staticClass:"node-trigger-tooltip__wrapper"},[t("n8n-tooltip",{attrs:{placement:"top",manual:"",value:e.showTriggerNodeTooltip,"popper-class":"node-trigger-tooltip__wrapper--item"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{domProps:{textContent:e._s(e.getTriggerNodeTooltip)}})]},proxy:!0}])},[t("span")]),e.isTriggerNode?t("n8n-tooltip",{attrs:{placement:"top",manual:"",value:e.pinDataDiscoveryTooltipVisible,"popper-class":"node-trigger-tooltip__wrapper--item"},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(e.$locale.baseText("node.discovery.pinData.canvas"))+" ")]},proxy:!0}],null,!1,917840377)},[t("span")]):e._e()],1),t("NodeIcon",{staticClass:"node-icon",attrs:{nodeType:e.nodeType,size:40,shrink:!1,disabled:this.data.disabled}})],1),e.isReadOnly?e._e():t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideActions,expression:"!hideActions"}],staticClass:"node-options no-select-on-click"},[t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.deleteNode,expression:"deleteNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.deleteNode"),"data-test-id":"delete-node-button"}},[t("font-awesome-icon",{attrs:{icon:"trash"}})],1),t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.disableNode,expression:"disableNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.activateDeactivateNode"),"data-test-id":"disable-node-button"}},[t("font-awesome-icon",{attrs:{icon:e.nodeDisabledIcon}})],1),e.isDuplicatable?t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.duplicateNode,expression:"duplicateNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.duplicateNode"),"data-test-id":"duplicate-node-button"}},[t("font-awesome-icon",{attrs:{icon:"clone"}})],1):e._e(),t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.setNodeActive,expression:"setNodeActive",arg:"tap"}],staticClass:"option touch",attrs:{title:e.$locale.baseText("node.editNode"),"data-test-id":"activate-node-button"}},[t("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"cog"}})],1),e.workflowRunning?e._e():t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.executeNode,expression:"executeNode",arg:"tap"}],staticClass:"option",attrs:{title:e.$locale.baseText("node.executeNode"),"data-test-id":"execute-node-button"}},[t("font-awesome-icon",{staticClass:"execute-icon",attrs:{icon:"play-circle"}})],1)]),e.showDisabledLinethrough?t("div",{class:{"disabled-linethrough":!0,success:!["unknown"].includes(e.nodeExecutionStatus)&&e.workflowDataItems>0}}):e._e()]),t("div",{staticClass:"node-description"},[t("div",{staticClass:"node-name ph-no-capture",attrs:{title:e.nodeTitle}},[t("p",{attrs:{"data-test-id":"canvas-node-box-title"}},[e._v(" "+e._s(e.nodeTitle)+" ")]),e.data.disabled?t("p",[e._v("("+e._s(e.$locale.baseText("node.disabled"))+")")]):e._e()]),e.nodeSubtitle!==void 0?t("div",{staticClass:"node-subtitle",attrs:{title:e.nodeSubtitle}},[e._v(" "+e._s(e.nodeSubtitle)+" ")]):e._e()])])},DI=[],AI=p(NI,II,DI,!1,null,"49a255fc",null,null);const PI=AI.exports,OI=x(xe,yr,Be,re).extend({name:"Sticky",props:{nodeViewScale:{type:Number},gridSize:{type:Number}},computed:{...b(le,ce,N,B),defaultText(){if(!this.nodeType)return"";const e=this.nodeType.properties.find(t=>t.name==="content");return e&&Cn(e.default)?e.default:""},isSelected(){return this.uiStore.getSelectedNodes.find(s=>s.name===this.data.name)!==void 0},nodeType(){return this.data&&this.nodeTypesStore.getNodeType(this.data.type,this.data.typeVersion)},node(){return this.workflowsStore.getNodeByName(this.name)},position(){return this.node?this.node.position:[0,0]},height(){return this.node&&St(this.node.parameters.height)?this.node.parameters.height:0},width(){return this.node&&St(this.node.parameters.width)?this.node.parameters.width:0},stickySize(){return{height:this.height+"px",width:this.width+"px"}},stickyPosition(){return{left:this.position[0]+"px",top:this.position[1]+"px",zIndex:this.isActive?9999999:-1*Math.floor(this.height*this.width/1e3)}},showActions(){return!(this.hideActions||this.isReadOnly||this.workflowRunning||this.isResizing)},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")}},data(){return{isResizing:!1,isTouchActive:!1}},methods:{deleteNode(){S.nextTick(()=>{this.$emit("removeNode",this.data.name)})},onEdit(s){s&&!this.isActive&&this.node?this.ndvStore.activeNodeName=this.node.name:this.isActive&&!s&&(this.ndvStore.activeNodeName=null)},onMarkdownClick(s,e){if(s){const t=this.name===Bi,n=s.querySelector('img[alt="n8n quickstart video"'),o=t&&n?"welcome_video":t&&s.getAttribute("href")==="/templates"?"templates":"other";this.$telemetry.track("User clicked note link",{type:o})}},onInputChange(s){this.setParameters({content:s})},onResizeStart(){this.isResizing=!0,!this.isSelected&&this.node&&this.$emit("nodeSelected",this.node.name,!1,!0)},onResize({height:s,width:e,dX:t,dY:n}){this.node&&((t!==0||n!==0)&&this.setPosition([this.node.position[0]+(t||0),this.node.position[1]+(n||0)]),this.setParameters({height:s,width:e}))},onResizeEnd(){this.isResizing=!1},setParameters(s){if(this.node){const e={content:Cn(s.content)?s.content:this.node.parameters.content,height:St(s.height)?s.height:this.node.parameters.height,width:St(s.width)?s.width:this.node.parameters.width},t={key:this.node.id,name:this.node.name,value:e};this.workflowsStore.setNodeParameters(t)}},setPosition(s){if(!this.node)return;const e={name:this.node.name,properties:{position:s}};this.workflowsStore.updateNodeProperties(e)},touchStart(){this.isTouchDevice===!0&&this.isMacOs===!1&&this.isTouchActive===!1&&(this.isTouchActive=!0,setTimeout(()=>{this.isTouchActive=!1},2e3))}}});var MI=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:e.data.name,staticClass:"sticky-wrapper",style:e.stickyPosition,attrs:{id:e.nodeId,"data-name":e.data.name,"data-test-id":"sticky"}},[t("div",{class:{"sticky-default":!0,"touch-active":e.isTouchActive,"is-touch-device":e.isTouchDevice},style:e.stickySize},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelected,expression:"isSelected"}],staticClass:"select-sticky-background"}),t("div",{directives:[{name:"touch",rawName:"v-touch:start",value:e.touchStart,expression:"touchStart",arg:"start"},{name:"touch",rawName:"v-touch:end",value:e.touchEnd,expression:"touchEnd",arg:"end"}],staticClass:"sticky-box",on:{click:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&n.button!==0?null:e.mouseLeftClick.apply(null,arguments)}}},[t("n8n-sticky",{attrs:{content:e.node.parameters.content,height:e.node.parameters.height,width:e.node.parameters.width,scale:e.nodeViewScale,id:e.node.id,readOnly:e.isReadOnly,defaultText:e.defaultText,editMode:e.isActive&&!e.isReadOnly,gridSize:e.gridSize},on:{"update:content":function(n){return e.$set(e.node.parameters,"content",n)},input:e.onInputChange,edit:e.onEdit,resizestart:e.onResizeStart,resize:e.onResize,resizeend:e.onResizeEnd,"markdown-click":e.onMarkdownClick}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showActions,expression:"showActions"}],staticClass:"sticky-options no-select-on-click"},[t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.deleteNode,expression:"deleteNode",arg:"tap"}],staticClass:"option",attrs:{"data-test-id":"delete-sticky",title:e.$locale.baseText("node.deleteNode")}},[t("font-awesome-icon",{attrs:{icon:"trash"}})],1)])])])},RI=[],LI=p(OI,MI,RI,!1,null,"c4306613",null,null);const WI=LI.exports,BI=C({__name:"CanvasAddButton",props:{showTooltip:{type:Boolean},position:null},setup(s){const e=s,t=Ts(),n=Y(()=>({"--trigger-placeholder-left-position":`${e.position[0]}px`,"--trigger-placeholder-top-position":`${e.position[1]}px`}));return{__sfc:!0,props:e,nodeCreatorStore:t,containerCssVars:n}}}),UI="_canvasAddButton_jzm6p_1",FI="_button_jzm6p_13",VI="_tooltip_jzm6p_34",zI="_label_jzm6p_38",jI={canvasAddButton:UI,button:FI,tooltip:VI,label:zI};var KI=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{ref:"container",class:e.$style.canvasAddButton,style:n.containerCssVars,attrs:{"data-test-id":"canvas-add-button"}},[t("n8n-tooltip",{attrs:{placement:"top",value:e.showTooltip,manual:"",disabled:n.nodeCreatorStore.showScrim,"popper-class":e.$style.tooltip,"open-delay":700},scopedSlots:e._u([{key:"content",fn:function(){return[t("p",{domProps:{textContent:e._s(e.$locale.baseText("nodeView.canvasAddButton.addATriggerNodeBeforeExecuting"))}})]},proxy:!0}])},[t("button",{class:e.$style.button,attrs:{"data-test-id":"canvas-plus-button"},on:{click:function(o){return e.$emit("click")}}},[t("font-awesome-icon",{attrs:{icon:"plus",size:"lg"}})],1)]),t("p",{class:e.$style.label,domProps:{textContent:e._s(e.$locale.baseText("nodeView.canvasAddButton.addFirstStep"))}})],1)},HI=[];const pa={$style:jI};function GI(s){for(var e in pa)this[e]=pa[e]}var qI=p(BI,KI,HI,!1,GI,null,null,null);const YI=qI.exports,XI=async()=>Xe(()=>import("./NodeCreator-22fa1af6.js"),["assets/NodeCreator-22fa1af6.js","assets/vendor-df0f493f.js","assets/ParameterInputList-a8424193.js","assets/n8n-8025af5e.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/pinia-ba86f1d8.js","assets/axios-f993d27a.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css","assets/@fortawesome/free-solid-svg-icons-a2911fb5.js","assets/@fortawesome/free-regular-svg-icons-74cb85f8.js","assets/@fortawesome/vue-fontawesome-1701eda0.js","assets/vue2-touch-events-2bad05e9.js","assets/v-click-outside-01179a04.js","assets/vue-fragment-f3d0cc79.js","assets/vue-agile-00cde7d9.js","assets/vue-agile-d964f598.css","assets/timeago.js-a9e71aec.js","assets/canvas-confetti-60b90aac.js","assets/file-saver-d988540e.js","assets/vue2-teleport-53e66c3b.js","assets/vue-json-pretty-49f1c0cb.js","assets/humanize-duration-3471cd08.js","assets/vue-infinite-loading-8e5543e4.js","assets/copy-to-clipboard-fcf36459.js","assets/NodeCreator-a6bdb8af.css"]),JI=async()=>Xe(()=>import("./NodeCreation-57ba7518.js"),["assets/NodeCreation-57ba7518.js","assets/ParameterInputList-a8424193.js","assets/n8n-8025af5e.js","assets/vendor-df0f493f.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/pinia-ba86f1d8.js","assets/axios-f993d27a.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css","assets/NodeCreation-8875eee1.css"]),QI=async()=>Xe(()=>import("./CanvasControls-f270bbbc.js"),["assets/CanvasControls-f270bbbc.js","assets/vendor-df0f493f.js","assets/pinia-ba86f1d8.js","assets/ParameterInputList-a8424193.js","assets/n8n-8025af5e.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/axios-f993d27a.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css","assets/CanvasControls-fa9b9d6a.css"]),ZI=x(Je,xe,he,Q$,D,re,Xs,Ie).extend({name:"NodeView",components:{NodeDetailsView:CI,Node:PI,NodeCreator:XI,NodeSettings:vr,Sticky:WI,CanvasAddButton:YI,NodeCreation:JI,CanvasControls:QI},setup(){return{...Z$(),...rr(),...ns(),...eE(),...bt()}},errorCaptured:(s,e,t)=>{console.error("errorCaptured"),console.error(s)},watch:{$route(s,e){const t=gt(s),n=!this.uiStore.nodeViewInitialized;let o=e.params.name!==s.params.name&&!(e.params.name==="new"&&this.currentWorkflow===oe)&&s.params.action!=="workflowSave";const a=s.name===d.TEMPLATE_IMPORT;if((t===ue.WORKFLOW||a)&&(o||n||a)){if(this.startLoading(),n){const i=this.uiStore.stateIsDirty;this.resetWorkspace(),this.uiStore.stateIsDirty=i}this.loadCredentials(),this.initView().then(()=>{this.stopLoading(),this.blankRedirect&&(this.blankRedirect=!1)})}t===ue.EXECUTIONS&&(o=e.params.name!==s.params.name&&!(s.params.name==="new"&&e.params.name===void 0),o&&(this.uiStore.nodeViewInitialized=!1))},activeNode(){this.createNodeActive=!1},containsTrigger(s){s===!1&&this.canvasStore.setRecenteredCanvasAddButtonPosition(this.getNodeViewOffsetPosition)},nodeViewScale(s){const e=this.$refs.nodeView;e&&(e.style.transform=`scale(${s})`)}},async beforeRouteLeave(s,e,t){if(gt(s)===ue.EXECUTIONS||e.name===d.TEMPLATE_IMPORT){t();return}if(this.uiStore.stateIsDirty){const n=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);n===ks?(this.workflowsStore.setWorkflowId(oe),await this.saveCurrentWorkflow({},!1)&&await this.settingsStore.fetchPromptsData(),this.uiStore.stateIsDirty=!1,e.name===d.NEW_WORKFLOW?this.$router.replace({name:d.WORKFLOW,params:{name:this.currentWorkflow}},()=>{this.$router.push(s)}):t()):n===Ui&&(this.workflowsStore.setWorkflowId(oe),this.resetWorkspace(),this.uiStore.stateIsDirty=!1,t())}else t()},computed:{...b(Bs,He,be,Ts,le,ce,Z,P,Oe,N,B,z,Ts,Fi,Gt,Xt),nativelyNumberSuffixedDefaults(){return this.rootStore.nativelyNumberSuffixedDefaults},currentUser(){return this.usersStore.currentUser},activeNode(){return this.ndvStore.activeNode},executionWaitingForWebhook(){return this.workflowsStore.executionWaitingForWebhook},isDemo(){return this.$route.name===d.DEMO},showCanvasAddButton(){return this.loadingService===null&&!this.containsTrigger&&!this.isDemo},lastSelectedNode(){return this.uiStore.getLastSelectedNode},nodes(){return this.workflowsStore.allNodes},runButtonText(){return this.workflowRunning?this.executionWaitingForWebhook?this.$locale.baseText("nodeView.runButtonText.waitingForTriggerEvent"):this.$locale.baseText("nodeView.runButtonText.executingWorkflow"):this.$locale.baseText("nodeView.runButtonText.executeWorkflow")},workflowStyle(){const s=this.uiStore.nodeViewOffsetPosition;return{left:s[0]+"px",top:s[1]+"px"}},canvasAddButtonStyle(){return{"pointer-events":this.createNodeActive?"none":"all"}},backgroundStyle(){return gh(this.nodeViewScale,this.uiStore.nodeViewOffsetPosition,this.isExecutionPreview)},workflowClasses(){const s=[];return(this.ctrlKeyPressed||this.moveCanvasKeyPressed)&&(this.uiStore.nodeViewMoveInProgress===!0?s.push("move-in-process"):s.push("move-active")),(this.selectActive||this.ctrlKeyPressed||this.moveCanvasKeyPressed)&&s.push("do-not-select"),s},workflowExecution(){return this.workflowsStore.getWorkflowExecution},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},currentWorkflow(){return this.$route.params.name||this.workflowsStore.workflowId},workflowName(){return this.workflowsStore.workflowName},allTriggersDisabled(){return this.triggerNodes.filter(e=>e.disabled).length===this.triggerNodes.length},triggerNodes(){return this.nodes.filter(s=>s.type===Us||this.nodeTypesStore.isTriggerNode(s.type))},containsTrigger(){return this.triggerNodes.length>0},isExecutionDisabled(){return!this.containsTrigger||this.allTriggersDisabled},getNodeViewOffsetPosition(){return this.uiStore.nodeViewOffsetPosition},nodeViewScale(){return this.canvasStore.nodeViewScale},instance(){return this.canvasStore.jsPlumbInstance}},data(){return{GRID_SIZE:$t,STICKY_NODE_TYPE:Re,createNodeActive:!1,lastClickPosition:[450,450],ctrlKeyPressed:!1,moveCanvasKeyPressed:!1,stopExecutionInProgress:!1,blankRedirect:!1,credentialsUpdated:!1,pullConnActiveNodeName:null,pullConnActive:!1,dropPrevented:!1,renamingActive:!1,showStickyButton:!1,isExecutionPreview:!1,showTriggerMissingTooltip:!1,workflowData:null,activeConnection:null,isProductionExecutionPreview:!1,enterTimer:void 0,exitTimer:void 0,suspendRecordingDetachedConnections:!1,NODE_CREATOR_OPEN_SOURCES:Fe}},beforeDestroy(){this.resetWorkspace(),document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp),this.unregisterCustomAction("showNodeCreator")},methods:{showTriggerMissingToltip(s){this.showTriggerMissingTooltip=s},onRunNode(s,e){const t=this.workflowsStore.getNodeByName(s),n={node_type:t?t.type:null,workflow_id:this.workflowsStore.workflowId,source:"canvas"};this.$telemetry.track("User clicked execute node button",n),this.$externalHooks().run("nodeView.onRunNode",n),this.runWorkflow(s,e)},async onRunWorkflow(){this.getWorkflowDataToSave().then(s=>{const e={workflow_id:this.workflowsStore.workflowId,node_graph_string:JSON.stringify(mt(s,this.getNodeTypes()).nodeGraph)};this.$telemetry.track("User clicked execute workflow button",e),this.$externalHooks().run("nodeView.onRunWorkflow",e)}),await this.runWorkflow()},onRunContainerClick(){if(this.containsTrigger&&!this.allTriggersDisabled)return;const s=this.containsTrigger&&this.allTriggersDisabled?this.$locale.baseText("nodeView.addOrEnableTriggerNode"):this.$locale.baseText("nodeView.addATriggerNodeFirst");this.registerCustomAction("showNodeCreator",()=>this.showTriggerCreator(Fe.NO_TRIGGER_EXECUTION_TOOLTIP));const e=this.$showMessage({type:"info",title:this.$locale.baseText("nodeView.cantExecuteNoTrigger"),message:s,duration:3e3,onClick:()=>setTimeout(()=>{this.createNodeActive&&e.close()},0)})},clearExecutionData(){this.workflowsStore.workflowExecutionData=null,this.updateNodesExecutionIssues()},async onSaveKeyboardShortcut(s){let e=await this.saveCurrentWorkflow();e&&await this.settingsStore.fetchPromptsData(),this.activeNode&&(s.target instanceof HTMLInputElement?e=s.target.readOnly:e=!0,e&&this.$showMessage({title:this.$locale.baseText("generic.workflowSaved"),type:"success"}))},showTriggerCreator(s){this.createNodeActive||(this.nodeCreatorStore.setSelectedView(ps),this.nodeCreatorStore.setShowScrim(!0),this.onToggleNodeCreator({source:s,createNodeActive:!0}))},async openExecution(s){var t,n;this.startLoading(),this.resetWorkspace();let e;try{e=await this.workflowsStore.getExecution(s)}catch(o){this.$showError(o,this.$locale.baseText("nodeView.showError.openExecution.title"));return}if(e===void 0)throw new Error(`Execution with id "${s}" could not be found!`);if(this.workflowsStore.setWorkflowName({newName:e.workflowData.name,setStateDirty:!1}),this.workflowsStore.setWorkflowId(oe),this.workflowsStore.setWorkflowExecutionData(e),e.workflowData.pinData&&this.workflowsStore.setWorkflowPinData(e.workflowData.pinData),await this.addNodes(ae(e.workflowData.nodes),ae(e.workflowData.connections)),this.$nextTick(()=>{this.canvasStore.zoomToFit(),this.uiStore.stateIsDirty=!1}),this.$externalHooks().run("execution.open",{workflowId:e.workflowData.id,workflowName:e.workflowData.name,executionId:s}),this.$telemetry.track("User opened read-only execution",{workflow_id:e.workflowData.id,execution_mode:e.mode,execution_finished:e.finished}),!e.finished&&((n=(t=e.data)==null?void 0:t.resultData)!=null&&n.error)){let o=!1;if(e.data.resultData.runData){const a=e.data.resultData.runData;e:for(const i of Object.keys(a))for(const r of a[i])if(r.error){o=!0;break e}}!o&&e.data.resultData.error.stack&&(console.error(`Execution ${s} error:`),console.error(e.data.resultData.error.stack))}e.waitTill&&this.$showMessage({title:this.$locale.baseText("nodeView.thisExecutionHasntFinishedYet"),message:`<a data-action="reload">${this.$locale.baseText("nodeView.refresh")}</a> ${this.$locale.baseText("nodeView.toSeeTheLatestStatus")}.<br/> <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.wait/" target="_blank">${this.$locale.baseText("nodeView.moreInfo")}</a>`,type:"warning",duration:0}),this.stopLoading()},async importWorkflowExact(s){if(!s.workflow.nodes||!s.workflow.connections)throw new Error("Invalid workflow object");this.resetWorkspace(),s.workflow.nodes=Nn(s.workflow.nodes),await this.addNodes(s.workflow.nodes,s.workflow.connections),s.workflow.pinData&&this.workflowsStore.setWorkflowPinData(s.workflow.pinData),this.$nextTick(()=>{this.canvasStore.zoomToFit()})},async openWorkflowTemplate(s){this.startLoading(),this.setLoadingText(this.$locale.baseText("nodeView.loadingTemplate")),this.resetWorkspace(),this.workflowsStore.currentWorkflowExecutions=[],this.workflowsStore.activeWorkflowExecution=null;let e;try{if(this.$externalHooks().run("template.requested",{templateId:s}),e=await this.templatesStore.getWorkflowTemplate(s),!e)throw new Error(this.$locale.baseText("nodeView.workflowTemplateWithIdCouldNotBeFound",{interpolate:{templateId:s}}))}catch(t){this.$showError(t,this.$locale.baseText("nodeView.couldntImportWorkflow")),this.$router.replace({name:d.NEW_WORKFLOW});return}e.workflow.nodes=Nn(e.workflow.nodes),this.blankRedirect=!0,this.$router.replace({name:d.NEW_WORKFLOW,query:{templateId:s}}),await this.addNodes(e.workflow.nodes,e.workflow.connections),this.workflowData=await this.workflowsStore.getNewWorkflowData(e.name)||{},this.$nextTick(()=>{this.canvasStore.zoomToFit(),this.uiStore.stateIsDirty=!0}),this.$externalHooks().run("template.open",{templateId:s,templateName:e.name,workflow:e.workflow}),this.stopLoading()},async openWorkflow(s){this.startLoading();const e=this.workflowsStore.activeWorkflowExecution;this.resetWorkspace(),this.workflowsStore.addWorkflow(s),this.workflowsStore.setActive(s.active||!1),this.workflowsStore.setWorkflowId(s.id),this.workflowsStore.setWorkflowName({newName:s.name,setStateDirty:!1}),this.workflowsStore.setWorkflowSettings(s.settings||{}),this.workflowsStore.setWorkflowPinData(s.pinData||{}),this.workflowsStore.setWorkflowVersionId(s.versionId),s.ownedBy&&this.workflowsEEStore.setWorkflowOwnedBy({workflowId:s.id,ownedBy:s.ownedBy}),s.sharedWith&&this.workflowsEEStore.setWorkflowSharedWith({workflowId:s.id,sharedWith:s.sharedWith}),s.usedCredentials&&this.workflowsStore.setUsedCredentials(s.usedCredentials);const t=s.tags||[],n=t.map(o=>o.id);this.workflowsStore.setWorkflowTagIds(n||[]),this.tagsStore.upsertTags(t),await this.addNodes(s.nodes,s.connections),this.credentialsUpdated||(this.uiStore.stateIsDirty=!1),this.canvasStore.zoomToFit(),this.$externalHooks().run("workflow.open",{workflowId:s.id,workflowName:s.name}),(e==null?void 0:e.workflowId)!==s.id?(this.workflowsStore.activeWorkflowExecution=null,this.workflowsStore.currentWorkflowExecutions=[]):this.workflowsStore.activeWorkflowExecution=e,this.stopLoading()},touchTap(s){this.isTouchDevice&&this.mouseDown(s)},mouseDown(s){this.lastClickPosition=this.getMousePositionWithinNodeView(s),s instanceof MouseEvent&&s.button===1&&(this.moveCanvasKeyPressed=!0),this.mouseDownMouseSelect(s,this.moveCanvasKeyPressed),this.mouseDownMoveWorkflow(s,this.moveCanvasKeyPressed),this.createNodeActive=!1},mouseUp(s){s.button===1&&(this.moveCanvasKeyPressed=!1),this.mouseUpMouseSelect(s),this.mouseUpMoveWorkflow(s)},keyUp(s){s.key===this.controlKeyCode&&(this.ctrlKeyPressed=!1),s.key===" "&&(this.moveCanvasKeyPressed=!1)},async keyDown(s){if(s.key==="s"&&this.isCtrlKeyPressed(s)){if(s.stopPropagation(),s.preventDefault(),this.isReadOnly)return;this.callDebounced("onSaveKeyboardShortcut",{debounceTime:1e3},s);return}const e=s.path||s.composedPath&&s.composedPath();for(const t of e)if(t.className&&typeof t.className=="string"&&t.className.includes("ignore-key-press"))return;if(!window.document.body.classList.contains("el-popup-parent--hidden")){if(s.key==="Escape"){this.createNodeActive=!1,this.activeNode&&(this.$externalHooks().run("dataDisplay.nodeEditingFinished"),this.ndvStore.activeNodeName=null);return}if(!this.activeNode){if(s.key==="d")this.callDebounced("deactivateSelectedNode",{debounceTime:350});else if(s.key==="Delete"||s.key==="Backspace")s.stopPropagation(),s.preventDefault(),this.callDebounced("deleteSelectedNodes",{debounceTime:500});else if(s.key==="Tab")this.onToggleNodeCreator({source:Fe.TAB,createNodeActive:!this.createNodeActive&&!this.isReadOnly});else if(s.key===this.controlKeyCode)this.ctrlKeyPressed=!0;else if(s.key===" ")this.moveCanvasKeyPressed=!0;else if(s.key==="F2"&&!this.isReadOnly){const t=this.lastSelectedNode;t!==null&&t.type!==Re&&this.callDebounced("renameNodePrompt",{debounceTime:1500},t.name)}else if(s.key==="a"&&this.isCtrlKeyPressed(s)===!0)s.stopPropagation(),s.preventDefault(),this.callDebounced("selectAllNodes",{debounceTime:1e3});else if(s.key==="c"&&this.isCtrlKeyPressed(s))this.callDebounced("copySelectedNodes",{debounceTime:1e3});else if(s.key==="x"&&this.isCtrlKeyPressed(s))s.stopPropagation(),s.preventDefault(),this.callDebounced("cutSelectedNodes",{debounceTime:1e3});else if(s.key==="n"&&this.isCtrlKeyPressed(s)&&s.altKey){if(s.stopPropagation(),s.preventDefault(),this.isDemo)return;this.$router.currentRoute.name===d.NEW_WORKFLOW?this.$root.$emit("newWorkflow"):this.$router.push({name:d.NEW_WORKFLOW}),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.keyDown.title"),type:"success"})}else if(s.key==="Enter"){const t=this.lastSelectedNode;if(t!==null){if(t.type===Re&&this.isReadOnly)return;this.ndvStore.activeNodeName=t.name}}else if(s.key==="ArrowRight"&&s.shiftKey)s.stopPropagation(),s.preventDefault(),this.callDebounced("selectDownstreamNodes",{debounceTime:1e3});else if(s.key==="ArrowRight"){const t=this.lastSelectedNode;if(t===null)return;const n=this.workflowsStore.outgoingConnectionsByNodeName(t.name);if(n.main===void 0||n.main.length===0)return;this.callDebounced("nodeSelectedByName",{debounceTime:100},n.main[0][0].node,!1,!0)}else if(s.key==="ArrowLeft"&&s.shiftKey)s.stopPropagation(),s.preventDefault(),this.callDebounced("selectUpstreamNodes",{debounceTime:1e3});else if(s.key==="ArrowLeft"){const t=this.lastSelectedNode;if(t===null)return;const n=this.getCurrentWorkflow();if(!n.connectionsByDestinationNode.hasOwnProperty(t.name))return;const o=n.connectionsByDestinationNode[t.name];if(o.main===void 0||o.main.length===0)return;this.callDebounced("nodeSelectedByName",{debounceTime:100},o.main[0][0].node,!1,!0)}else if(["ArrowUp","ArrowDown"].includes(s.key)){const t=this.lastSelectedNode;if(t===null)return;const n=this.getCurrentWorkflow();if(!n.connectionsByDestinationNode.hasOwnProperty(t.name))return;const o=n.connectionsByDestinationNode[t.name];if(!Array.isArray(o.main)||!o.main.length)return;const a=o.main[0][0].node,i=this.workflowsStore.outgoingConnectionsByNodeName(a);if(!Array.isArray(i.main)||!i.main.length)return;let r,l=s.key==="ArrowUp"?-99999999:99999999,c=null;for(const h of i.main)for(const f of h)f.node!==t.name&&(r=this.workflowsStore.getNodeByName(f.node),r&&(s.key==="ArrowUp"?r.position[1]<=t.position[1]&&r.position[1]>l&&(c=r.name,l=r.position[1]):r.position[1]>=t.position[1]&&r.position[1]<l&&(c=r.name,l=r.position[1])));c!==null&&this.callDebounced("nodeSelectedByName",{debounceTime:100},c,!1,!0)}}}},deactivateSelectedNode(){this.editAllowedCheck()&&this.disableNodes(this.uiStore.getSelectedNodes,!0)},deleteSelectedNodes(){const s=this.uiStore.getSelectedNodes.map(e=>e.name);this.historyStore.startRecordingUndo(),s.forEach(e=>{this.removeNode(e,!0,!1)}),setTimeout(()=>{this.historyStore.stopRecordingUndo()},200)},selectAllNodes(){this.nodes.forEach(s=>{this.nodeSelectedByName(s.name)})},selectUpstreamNodes(){const s=this.lastSelectedNode;if(s===null)return;this.deselectAllNodes();const e=this.getCurrentWorkflow();for(const t of e.getParentNodes(s.name))this.nodeSelectedByName(t);this.nodeSelectedByName(s.name)},selectDownstreamNodes(){const s=this.lastSelectedNode;if(s===null)return;this.deselectAllNodes();const e=this.getCurrentWorkflow();for(const t of e.getChildNodes(s.name))this.nodeSelectedByName(t);this.nodeSelectedByName(s.name)},pushDownstreamNodes(s,e,t=!1){const n=this.workflowsStore.nodesByName[s],a=this.getCurrentWorkflow().getChildNodes(s);for(const i of a){const r=this.workflowsStore.nodesByName[i],l=r.position;if(r.position[0]<n.position[0])continue;const c={name:i,properties:{position:[r.position[0]+e,r.position[1]]}};this.workflowsStore.updateNodeProperties(c),this.onNodeMoved(r),(t&&l[0]!==r.position[0]||l[1]!==r.position[1])&&this.historyStore.pushCommandToUndo(new _h(i,l,r.position,this),t)}},cutSelectedNodes(){const s=!this.isReadOnly;this.copySelectedNodes(s),s&&this.deleteSelectedNodes()},copySelectedNodes(s){this.getSelectedNodesToSave().then(e=>{const t={meta:{instanceId:this.rootStore.instanceId},...e};this.removeForeignCredentialsFromWorkflow(t,this.credentialsStore.allCredentials);const n=JSON.stringify(t,null,2);this.copyToClipboard(n),e.nodes.length>0&&(s||this.$showMessage({title:"Copied!",message:"",type:"success"}),this.$telemetry.track("User copied nodes",{node_types:e.nodes.map(o=>o.type),workflow_id:this.workflowsStore.workflowId}))})},async stopExecution(){const s=this.workflowsStore.activeExecutionId;if(s!==null){try{this.stopExecutionInProgress=!0,await this.workflowsStore.stopCurrentExecution(s),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.stopExecutionTry.title"),type:"success"})}catch(e){const t=await this.workflowsStore.getExecution(s);if(t===void 0)this.workflowsStore.finishActiveExecution({executionId:s,data:{finished:!0,stoppedAt:new Date}}),this.workflowsStore.executingNode=null,this.uiStore.removeActiveAction("workflowRunning"),this.titleSet(this.workflowsStore.workflowName,"IDLE"),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.stopExecutionCatch.unsaved.title"),message:this.$locale.baseText("nodeView.showMessage.stopExecutionCatch.unsaved.message"),type:"success"});else if(t!=null&&t.finished){const n={data:t.data,finished:t.finished,mode:t.mode,startedAt:t.startedAt,stoppedAt:t.stoppedAt},o={data:n,executionId:s,retryOf:t.retryOf};this.workflowsStore.finishActiveExecution(o),this.titleSet(t.workflowData.name,"IDLE"),this.workflowsStore.executingNode=null,this.workflowsStore.setWorkflowExecutionData(n),this.uiStore.removeActiveAction("workflowRunning"),this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.stopExecutionCatch.title"),message:this.$locale.baseText("nodeView.showMessage.stopExecutionCatch.message"),type:"success"})}else this.$showError(e,this.$locale.baseText("nodeView.showError.stopExecution.title"))}this.stopExecutionInProgress=!1,this.getWorkflowDataToSave().then(e=>{const t={workflow_id:this.workflowsStore.workflowId,node_graph_string:JSON.stringify(mt(e,this.getNodeTypes()).nodeGraph)};this.$telemetry.track("User clicked stop workflow execution",t)})}},async stopWaitingForWebhook(){try{await this.workflowsStore.removeTestWebhook(this.workflowsStore.workflowId)}catch(s){this.$showError(s,this.$locale.baseText("nodeView.showError.stopWaitingForWebhook.title"));return}},async receivedCopyPasteData(s){if(gt(this.$route)===ue.WORKFLOW){let t;if(this.editAllowedCheck()===!1)return;if(s.match(/^http[s]?:\/\/.*\.json$/i)){if(!this.editAllowedCheck()||!await this.confirmMessage(this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.message",{interpolate:{plainTextData:s}}),this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.headline"),"warning",this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.confirmButtonText"),this.$locale.baseText("nodeView.confirmMessage.receivedCopyPasteData.cancelButtonText"))||(t=await this.getWorkflowDataFromUrl(s),t===void 0))return}else try{if(t=JSON.parse(s),!this.editAllowedCheck())return}catch(n){return}return this.importWorkflowData(t,"paste",!1)}},async getWorkflowDataFromUrl(s){let e;this.startLoading();try{e=await this.workflowsStore.getWorkflowFromUrl(s)}catch(t){this.stopLoading(),this.$showError(t,this.$locale.baseText("nodeView.showError.getWorkflowDataFromUrl.title"));return}return this.stopLoading(),e},async importWorkflowData(s,e,t=!0){if(!(!s.hasOwnProperty("nodes")||!s.hasOwnProperty("connections")))try{const n={};s.nodes&&s.nodes.forEach(l=>{if(l.id){const c=Ne();n[c]=l.id,l.id=c}else l.id=Ne()});const o=this.rootStore.instanceId,a=JSON.stringify(mt(s,this.getNodeTypes(),{nodeIdMap:n,sourceInstanceId:s.meta&&s.meta.instanceId!==o?s.meta.instanceId:""}).nodeGraph);e==="paste"?this.$telemetry.track("User pasted nodes",{workflow_id:this.workflowsStore.workflowId,node_graph_string:a}):this.$telemetry.track("User imported workflow",{source:e,workflow_id:this.workflowsStore.workflowId,node_graph_string:a}),this.deselectAllNodes(),this.updateNodePositions(s,et(this.nodes,this.lastClickPosition));const i=await this.addNodesToWorkflow(s);setTimeout(()=>{i.nodes.forEach(l=>{this.nodeSelectedByName(l.name)})}),s.pinData&&this.workflowsStore.setWorkflowPinData(s.pinData);const r=this.settingsStore.areTagsEnabled;if(t&&r&&Array.isArray(s.tags)){const l=await this.tagsStore.fetchAll(),c=new Set(l.map(g=>g.name)),h=s.tags,f=h.filter(g=>!c.has(g.name)),u=[];for(const g of f){const v=this.tagsStore.create(g.name).then(k=>(l.push(k),k));u.push(v)}await Promise.all(u);const w=h.reduce((g,v)=>{const k=l.find(E=>E.name===v.name);return k&&g.push(k.id),g},[]);this.workflowsStore.addWorkflowTagIds(w)}}catch(n){this.$showError(n,this.$locale.baseText("nodeView.showError.importWorkflowData.title"))}},onDragOver(s){s.preventDefault()},onDrop(s){if(!s.dataTransfer)return;const e=s.dataTransfer.getData("nodeTypeName").split(",");if(e){const t=this.getMousePositionWithinNodeView(s),n=e.map((o,a)=>({nodeTypeName:o,position:[t[0]-ht/2+ht*a*2+$t,t[1]-ht/2],dragAndDrop:!0}));this.onAddNode(n,!0),this.createNodeActive=!1}},nodeDeselectedByName(s){const e=this.workflowsStore.getNodeByName(s);e&&this.nodeDeselected(e)},nodeSelectedByName(s,e=!1,t){t===!0&&this.deselectAllNodes();const n=this.workflowsStore.getNodeByName(s);n&&(this.nodeSelected(n),this.uiStore.lastSelectedNode=n.name,this.uiStore.lastSelectedNodeOutputIndex=null,this.canvasStore.lastSelectedConnection=null,this.canvasStore.newNodeInsertPosition=null,e&&(this.ndvStore.activeNodeName=n.name))},showMaxNodeTypeError(s){const e=s.maxNodes;this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.showMaxNodeTypeError.title"),message:this.$locale.baseText("nodeView.showMessage.showMaxNodeTypeError.message",{adjustToNumber:e,interpolate:{nodeTypeDataDisplayName:s.displayName}}),type:"error",duration:0})},async getNewNodeWithDefaultCredential(s){var o,a,i;let e=s.defaultVersion;e===void 0&&(e=Array.isArray(s.version)?s.version.slice(-1)[0]:s.version);const t={id:Ne(),name:s.defaults.name,type:s.name,typeVersion:e,position:[0,0],parameters:{}},n=s.credentials&&s.credentials.map(r=>this.credentialsStore.getUsableCredentialByType(r.name)).flat();if(n&&n.length===1){const r=n[0],l=this.credentialsStore.getCredentialById(r.id),c={id:l.id,name:l.name},h={[r.type]:c};await this.loadNodesProperties([t].map(w=>({name:w.type,version:w.typeVersion})));const f=this.nodeTypesStore.getNodeType(t.type,t.typeVersion),u=Le((f==null?void 0:f.properties)||[],{},!0,!1,t);if(s.credentials){const w=s.credentials.find(v=>v.name===r.type);if((o=w==null?void 0:w.displayOptions)!=null&&o.hide)return t;const g=(a=w==null?void 0:w.displayOptions)==null?void 0:a.show;if(!g)return t.credentials=h,t;if(Object.keys(g).length===1&&g.authentication){t.credentials=h;let v={};for(const k of Object.keys(g)){if(u&&!u[k]){v={},t.credentials=void 0;break}const E=(i=g[k])==null?void 0:i[0];E&&typeof E=="string"&&(v[k]=E),t.parameters={...t.parameters,...v}}}}}return t},async injectNode(s,e={},t=!0,n=!1,o=!1){const a=this.nodeTypesStore.getNodeType(s);if(a===null){this.$showMessage({title:this.$locale.baseText("nodeView.showMessage.addNodeButton.title"),message:this.$locale.baseText("nodeView.showMessage.addNodeButton.message",{interpolate:{nodeTypeName:s}}),type:"error"});return}if(a.maxNodes!==void 0&&this.getNodeTypeCount(s)>=a.maxNodes){this.showMaxNodeTypeError(a);return}const i=await this.getNewNodeWithDefaultCredential(a),r=this.lastSelectedNode;if(e.position)i.position=et(this.canvasStore.getNodesWithPlaceholderNode(),e.position);else if(r){const c=this.canvasStore.lastSelectedConnection;if(c){const[h]=vh(c);h<=wh&&this.pushDownstreamNodes(r.name,In,n)}if(this.canvasStore.newNodeInsertPosition)i.position=et(this.nodes,[this.canvasStore.newNodeInsertPosition[0]+$t,this.canvasStore.newNodeInsertPosition[1]-ht/2]),this.canvasStore.newNodeInsertPosition=null;else{let h=0;if(c){const f=this.nodeTypesStore.getNodeType(r.type,r.typeVersion),u=[[-100,100],[-140,0,140],[-240,-100,100,240]];if(f&&f.outputs.length>1){const w=u[f.outputs.length-2],g=c.__meta?c.__meta.sourceOutputIndex:0;h=w[g]}}i.position=et(this.nodes,[r.position[0]+In,r.position[1]+h],[100,0])}}else{const c=this.nodeTypesStore.isTriggerNode(s)&&!this.containsTrigger?this.canvasStore.canvasAddButtonPosition:this.lastClickPosition;i.position=et(this.nodes,c)}const l=this.localizeNodeName(i.name,i.type);if(i.name=this.uniqueNodeName(l),a.webhooks&&a.webhooks.length&&(i.webhookId=Ne()),await this.addNodes([i],void 0,n),this.workflowsStore.setNodePristine(i.name,!0),this.uiStore.stateIsDirty=!0,s===Re)this.$telemetry.trackNodesPanel("nodeView.addSticky",{workflow_id:this.workflowsStore.workflowId});else{this.$externalHooks().run("nodeView.addNodeButton",{nodeTypeName:s}),Mi().trackAddedTrigger(s);const c={node_type:s,is_auto_add:o,workflow_id:this.workflowsStore.workflowId,drag_and_drop:e.dragAndDrop};r&&(c.input_node_type=r.type),this.$telemetry.trackNodesPanel("nodeView.addNodeButton",c)}return n&&(this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(i.name,t&&s!==Re)})),i},getConnection(s,e,t,n){const o=this.workflowsStore.outgoingConnectionsByNodeName(s).main;if(o){const a=o[e];if(a)return a.find(i=>i.node===t&&i.index===n)}},connectTwoNodes(s,e,t,n){if(this.uiStore.stateIsDirty=!0,this.getConnection(s,e,t,n))return;const o=[{node:s,type:"main",index:e},{node:t,type:"main",index:n}];this.__addConnection(o)},async addNode(s,e={},t=!0,n=!1,o=!1){if(!this.editAllowedCheck())return;const a=this.canvasStore.lastSelectedConnection,i=this.lastSelectedNode,r=this.uiStore.lastSelectedNodeOutputIndex;this.historyStore.startRecordingUndo();const l=await this.injectNode(s,e,t,n,o);if(!l)return;const c=r||0;if(i){if(await S.nextTick(),a&&a.__meta){this.__deleteJSPlumbConnection(a,n);const h=a.__meta.targetNodeName,f=a.__meta.targetOutputIndex;this.connectTwoNodes(l.name,0,h,f)}this.connectTwoNodes(i.name,c,l.name,0)}this.historyStore.stopRecordingUndo()},insertNodeAfterSelected(s){const e=this.workflowsStore.getNodeById(s.sourceId);e&&(this.uiStore.lastSelectedNode=e.name,this.uiStore.lastSelectedNodeOutputIndex=s.index,this.canvasStore.newNodeInsertPosition=null,s.connection&&(this.canvasStore.lastSelectedConnection=s.connection),this.onToggleNodeCreator({source:s.eventSource,createNodeActive:!0}))},onEventConnectionAbort(s){try{if(this.dropPrevented){this.dropPrevented=!1;return}if(this.pullConnActiveNodeName){const e=this.workflowsStore.getNodeById(s.parameters.nodeId);if(e){const t=e.name,n=s.parameters.index;this.connectTwoNodes(t,n,this.pullConnActiveNodeName,0),this.pullConnActiveNodeName=null,this.dropPrevented=!0}return}this.insertNodeAfterSelected({sourceId:s.parameters.nodeId,index:s.parameters.index,eventSource:Fe.NODE_CONNECTION_DROP})}catch(e){console.error(e)}},onInterceptBeforeDrop(s){var e,t;try{const n=s.connection.endpoints[0].parameters,o=s.dropEndpoint.parameters,a=((e=this.workflowsStore.getNodeById(n.nodeId))==null?void 0:e.name)||"",i=((t=this.workflowsStore.getNodeById(o.nodeId))==null?void 0:t.name)||"";return this.getConnection(a,n.index,i,o.index)?(this.dropPrevented=!0,this.pullConnActiveNodeName=null,!1):!0}catch(n){return console.error(n),!0}},onEventConnection(s){var e,t;try{const n=s.sourceEndpoint.parameters,o=s.targetEndpoint.parameters,a=(e=this.workflowsStore.getNodeById(n.nodeId))==null?void 0:e.name,i=(t=this.workflowsStore.getNodeById(o.nodeId))==null?void 0:t.name;a&&i&&(s.connection.__meta={sourceNodeName:a,sourceOutputIndex:n.index,targetNodeName:i,targetOutputIndex:o.index}),pt(s.connection),yh(s.targetEndpoint);const r=[{node:a,type:n.type,index:n.index},{node:i,type:o.type,index:o.index}];this.dropPrevented=!0,this.workflowsStore.addConnection({connection:r}),this.uiStore.stateIsDirty=!0,this.suspendRecordingDetachedConnections||this.historyStore.pushCommandToUndo(new bh(r)),this.isReadOnly||(xh(s.connection,()=>{this.activeConnection=null,this.__deleteJSPlumbConnection(s.connection)},()=>{this.insertNodeAfterSelected({sourceId:s.sourceEndpoint.parameters.nodeId,index:n.index,connection:s.connection,eventSource:Fe.NODE_CONNECTION_ACTION})}),setTimeout(()=>{Th(s.source,s.target,"canvas"in s.connection.connector?s.connection.connector.canvas:void 0)},0))}catch(n){console.error(n)}},onDragMove(){var s;(s=this.instance)==null||s.connections.forEach(e=>{Dn(e),An(e),Object.values(e.overlays).forEach(t=>{var n;t.canvas&&((n=this.instance)==null||n.repaint(t.canvas))})})},onConnectionMouseOver(s){try{if(this.exitTimer!==void 0&&(clearTimeout(this.exitTimer),this.exitTimer=void 0),this.isReadOnly||this.enterTimer||!s||s===this.activeConnection)return;this.activeConnection&&Pn(this.activeConnection),this.enterTimer=setTimeout(()=>{this.enterTimer=void 0,s&&(kh(s),this.activeConnection=s)},150)}catch(e){console.error(e)}},onConnectionMouseOut(s){var e;try{if(this.exitTimer||(this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=void 0),this.isReadOnly||!s||((e=this.activeConnection)==null?void 0:e.id)!==s.id))return;this.exitTimer=setTimeout(()=>{this.exitTimer=void 0,s&&this.activeConnection===s&&(Pn(this.activeConnection),this.activeConnection=null)},500)}catch(t){console.error(t)}},onConnectionMoved(s){var e,t;try{On(s.connection);const n=s.connection.parameters,o=s.originalEndpoint.parameters,a=[{node:((e=this.workflowsStore.getNodeById(n.nodeId))==null?void 0:e.name)||"",type:n.type,index:n.index},{node:((t=this.workflowsStore.getNodeById(o.nodeId))==null?void 0:t.name)||"",type:o.type,index:o.index}];this.__removeConnection(a,!1)}catch(n){console.error(n)}},onEndpointMouseOver(s,e){!s.isTarget||e.target!==s.endpoint.canvas||this.instance.setHover(s,!0)},onEndpointMouseOut(s){s.isTarget&&this.instance.setHover(s,!1)},async onConnectionDetached(s){try{const e=Mn(s);if(On(s.targetEndpoint),s.connection.removeOverlays(),this.__removeConnectionByConnectionInfo(s,!1,!1),this.pullConnActiveNodeName){this.historyStore.startRecordingUndo();const n=this.workflowsStore.getNodeById(s.connection.parameters.nodeId).name,o=s.connection.parameters.index;e&&this.historyStore.pushCommandToUndo(new Et(e)),this.connectTwoNodes(n,o,this.pullConnActiveNodeName,0),this.pullConnActiveNodeName=null,await this.$nextTick(),this.historyStore.stopRecordingUndo()}else if(!this.historyStore.bulkInProgress&&!this.suspendRecordingDetachedConnections&&e){const t=new Et(e,this);this.historyStore.pushCommandToUndo(t)}}catch(e){console.error(e)}},onConnectionDrag(s){var e;(e=s.overlays["midpoint-arrow"])==null||e.setVisible(!1);try{this.pullConnActiveNodeName=null,this.pullConnActive=!0,this.canvasStore.newNodeInsertPosition=null,pt(s);const t=[...document.querySelectorAll(".node-wrapper")],n=a=>{if(!s)return;const i=document.querySelector(".jtk-endpoint.jtk-drag-hover");if(i){const c=i.jtk.endpoint;Rn(s,c);return}const r=24;t.find(c=>{var k;const{top:h,left:f,right:u,bottom:w}=c.getBoundingClientRect(),[g,v]=Ft(a);if(h<=v&&w>=v&&f-r<=g&&u>=g){const E=c.dataset.name,I=this.workflowsStore.getNodeByName(E);if(I){const V=this.nodeTypesStore.getNodeType(I.type,I.typeVersion);if(V&&V.inputs&&V.inputs.length===1){this.pullConnActiveNodeName=I.name;const W=this.getInputEndpointUUID(E,0);if(W){const O=(k=this.instance)==null?void 0:k.getEndpoint(W);return Rn(s,O),!0}}}}return!1})||(Sh(s),this.pullConnActiveNodeName=null)},o=a=>{this.pullConnActive=!1,this.canvasStore.newNodeInsertPosition=this.getMousePositionWithinNodeView(a),$h(s),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",n),window.addEventListener("touchmove",n),window.addEventListener("mouseup",o),window.addEventListener("touchend",n)}catch(t){console.error(t)}},onConnectionDragAbortDetached(s){var e;Object.values((e=this.instance)==null?void 0:e.endpointsByElement).flatMap(t=>Object.values(t)).filter(t=>t.endpoint.type==="N8nPlus").forEach(t=>setTimeout(()=>t.instance.revalidate(t.element),0))},onPlusEndpointClick(s){s&&s.__meta&&this.insertNodeAfterSelected({sourceId:s.__meta.nodeId,index:s.__meta.index,eventSource:Fe.PLUS_ENDPOINT})},bindCanvasEvents(){this.instance.bind(Nt,this.onEventConnectionAbort),this.instance.bind(Fn,this.onInterceptBeforeDrop),this.instance.bind(Vn,this.onEventConnection),this.instance.bind(jn,this.onDragMove),this.instance.bind(Kn,this.onConnectionMouseOver),this.instance.bind(Hn,this.onConnectionMouseOut),this.instance.bind(zn,this.onConnectionMoved),this.instance.bind(Gn,this.onEndpointMouseOver),this.instance.bind(qn,this.onEndpointMouseOut),this.instance.bind(Ct,this.onConnectionDetached),this.instance.bind(It,this.onConnectionDrag),this.instance.bind([It,Nt,Ct],this.onConnectionDragAbortDetached),this.instance.bind(Ln,this.onPlusEndpointClick)},unbindCanvasEvents(){this.instance.unbind(Nt,this.onEventConnectionAbort),this.instance.unbind(Fn,this.onInterceptBeforeDrop),this.instance.unbind(Vn,this.onEventConnection),this.instance.unbind(jn,this.onDragMove),this.instance.unbind(Kn,this.onConnectionMouseOver),this.instance.unbind(Hn,this.onConnectionMouseOut),this.instance.unbind(zn,this.onConnectionMoved),this.instance.unbind(Gn,this.onEndpointMouseOver),this.instance.unbind(qn,this.onEndpointMouseOut),this.instance.unbind(Ct,this.onConnectionDetached),this.instance.unbind(It,this.onConnectionDrag),this.instance.unbind(It,this.onConnectionDragAbortDetached),this.instance.unbind(Nt,this.onConnectionDragAbortDetached),this.instance.unbind(Ct,this.onConnectionDragAbortDetached),this.instance.unbind(Ln,this.onPlusEndpointClick);const s=this.instance.getManagedElements();for(const e of Object.values(s)){const t=e.endpoints;for(const n of t||[]){const o=n==null?void 0:n.endpoint;o&&o.type===Eh&&o.unbindEvents()}}},onBeforeUnload(s){if(!(this.isDemo||window.preventNodeViewBeforeUnload))if(this.uiStore.stateIsDirty){const e=this.$locale.baseText("nodeView.itLooksLikeYouHaveBeenEditingSomething");return(s||window.event).returnValue=e,e}else{this.startLoading(this.$locale.baseText("nodeView.redirecting"));return}},async newWorkflow(){this.startLoading(),this.resetWorkspace(),this.workflowData=await this.workflowsStore.getNewWorkflowData(),this.workflowsStore.currentWorkflowExecutions=[],this.workflowsStore.activeWorkflowExecution=null,this.uiStore.stateIsDirty=!1,this.canvasStore.setZoomLevel(1,[0,0]),await this.tryToAddWelcomeSticky(),this.uiStore.nodeViewInitialized=!0,this.historyStore.reset(),this.workflowsStore.activeWorkflowExecution=null,this.stopLoading()},async tryToAddWelcomeSticky(){this.workflowData,this.canvasStore.zoomToFit()},async initView(){var s;if(this.$route.params.action==="workflowSave"){this.uiStore.stateIsDirty=!1;return}if(this.blankRedirect)this.blankRedirect=!1;else if(this.$route.name===d.TEMPLATE_IMPORT){const e=this.$route.params.id;await this.openWorkflowTemplate(e)}else{if(this.uiStore.stateIsDirty){const n=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);if(n===ks)await this.saveCurrentWorkflow()&&await this.settingsStore.fetchPromptsData();else if(n===Ch)return}let t=null;if(this.$route.params.name&&(t=this.$route.params.name),t!==null){let n;try{n=await this.workflowsStore.fetchWorkflow(t)}catch(o){this.$showError(o,this.$locale.baseText("openWorkflow.workflowNotFoundError")),this.$router.push({name:d.NEW_WORKFLOW})}n&&(this.titleSet(n.name,"IDLE"),await this.openWorkflow(n))}else((s=this.$route.meta)==null?void 0:s.nodeView)===!0&&await this.newWorkflow()}this.historyStore.reset(),this.uiStore.nodeViewInitialized=!0,document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),window.addEventListener("beforeunload",this.onBeforeUnload)},getOutputEndpointUUID(s,e){const t=this.workflowsStore.getNodeByName(s);return t?Vt(t.id,e):null},getInputEndpointUUID(s,e){const t=this.workflowsStore.getNodeByName(s);return t?xs(t.id,e):null},__addConnection(s){var o;const e=this.getOutputEndpointUUID(s[0].node,s[0].index),t=this.getInputEndpointUUID(s[1].node,s[1].index);if(!e||!t)return;const n=[e,t];(o=this.instance)==null||o.connect({uuids:n,detachable:!this.isReadOnly}),setTimeout(()=>{this.addPinDataConnections(this.workflowsStore.pinData)})},__removeConnection(s,e=!1){var t;if(e){const n=this.workflowsStore.getNodeByName(s[0].node),o=this.workflowsStore.getNodeByName(s[1].node);if(!n||!o)return;((t=this.instance)==null?void 0:t.getConnections({source:n.id,target:o.id})).forEach(i=>{i.__meta?i.__meta.sourceOutputIndex===s[0].index&&i.__meta.targetOutputIndex===s[1].index&&this.__deleteJSPlumbConnection(i):this.__deleteJSPlumbConnection(i)})}this.workflowsStore.removeConnection({connection:s})},__deleteJSPlumbConnection(s,e=!1){var t,n,o;if(s.removeOverlays(),this.pullConnActiveNodeName=null,(t=this.instance)==null||t.deleteConnection(s),e&&s.__meta){const a=[{index:(n=s.__meta)==null?void 0:n.sourceOutputIndex,node:s.__meta.sourceNodeName,type:"main"},{index:(o=s.__meta)==null?void 0:o.targetOutputIndex,node:s.__meta.targetNodeName,type:"main"}],i=new Et(a,this);this.historyStore.pushCommandToUndo(i)}},__removeConnectionByConnectionInfo(s,e=!1,t=!1){const n=Mn(s);n&&(e?this.__deleteJSPlumbConnection(s.connection,t):t&&this.historyStore.pushCommandToUndo(new Et(n)),this.workflowsStore.removeConnection({connection:n}))},async duplicateNode(s){if(!this.editAllowedCheck())return;const e=this.workflowsStore.getNodeByName(s);if(e){const t=this.nodeTypesStore.getNodeType(e.type,e.typeVersion);if(t&&t.maxNodes!==void 0&&this.getNodeTypeCount(e.type)>=t.maxNodes){this.showMaxNodeTypeError(t);return}const n=ae(this.getNodeDataToSave(e));n.id=Ne();const o=this.localizeNodeName(n.name,n.type);if(n.name=this.uniqueNodeName(o),n.position=et(this.nodes,[e.position[0],e.position[1]+140],[0,140]),n.webhookId&&(n.webhookId=Ne()),n.credentials&&this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)){const i=this.workflowsStore.usedCredentials;n.credentials=Object.fromEntries(Object.entries(n.credentials).filter(([r,l])=>{var c;return l.id&&(!i[l.id]||((c=i[l.id])==null?void 0:c.currentUserHasAccess))}))}await this.addNodes([n],[],!0);const a=this.workflowsStore.pinDataByNodeName(s);a&&this.workflowsStore.pinData({node:n,data:a}),this.uiStore.stateIsDirty=!0,this.deselectAllNodes(),setTimeout(()=>{this.nodeSelectedByName(n.name,!1)}),this.$telemetry.track("User duplicated node",{node_type:e.type,workflow_id:this.workflowsStore.workflowId})}},getJSPlumbConnection(s,e,t,n){var f;const o=this.workflowsStore.getNodeByName(s),a=this.workflowsStore.getNodeByName(t);if(!o||!a)return;const i=o.id,r=a.id,l=Vt(i,e),c=xs(r,n);return((f=this.instance)==null?void 0:f.getConnections({source:i,target:r})).find(u=>{const w=u.getUuids();return w[0]===l&&w[1]===c})},getJSPlumbEndpoints(s){var o;const e=this.workflowsStore.getNodeByName(s),t=this.instance.getManagedElement(e==null?void 0:e.id);return(o=this.instance)==null?void 0:o.getEndpoints(t)},getPlusEndpoint(s,e){return this.getJSPlumbEndpoints(s).find(n=>{var o;return n.endpoint.type==="N8nPlus"&&((o=n==null?void 0:n.__meta)==null?void 0:o.index)===e})},getIncomingOutgoingConnections(s){var t,n;const e=this.workflowsStore.getNodeByName(s);if(e){const o=(t=this.instance)==null?void 0:t.getConnections({source:e.id});return{incoming:(n=this.instance)==null?void 0:n.getConnections({target:e.id}),outgoing:o}}return{incoming:[],outgoing:[]}},onNodeMoved(s){const{incoming:e,outgoing:t}=this.getIncomingOutgoingConnections(s.name);[...e,...t].forEach(n=>{An(n),Dn(n)})},onNodeRun({name:s,data:e,waiting:t}){var c;const n=this.workflowsStore.getPinData;if(n&&n[s])return;const o=s,a=this.workflowsStore.getNodeByName(o),i=a!==null?a.id:"";if(e===null||e.length===0||t){((c=this.instance)==null?void 0:c.getConnections({source:i})).forEach(u=>{pt(u)}),this.getJSPlumbEndpoints(o).forEach(u=>{u.endpoint.type==="N8nPlus"&&u.endpoint.clearSuccessOutput()});return}const r=this.workflowsStore.outgoingConnectionsByNodeName(o).main,l=Nh(e,r||[]);Object.keys(l).forEach(h=>{Object.keys(l[h]).forEach(f=>{Object.keys(l[h][f]).forEach(u=>{if(f){const g=this.getJSPlumbConnection(o,parseInt(h,10),f,parseInt(u,10));if(g){const v=l[h][f][u];v.isArtificialRecoveredEventItem?Ih(g):(!v||!v.total)&&!v.isArtificialRecoveredEventItem?pt(g):Wn(g,v)}}const w=this.getPlusEndpoint(o,parseInt(h,10));if(w&&w.endpoint){const g=l[h][Dh][0];g&&g.total>0?w.endpoint.setSuccessOutput(Ah(g)):w.endpoint.clearSuccessOutput()}})})})},removeNode(s,e=!1,t=!0){if(!this.editAllowedCheck())return;const n=this.workflowsStore.getNodeByName(s);if(!n)return;e&&t&&this.historyStore.startRecordingUndo();const o=[];if(o.includes(n.type)){let r=!1;for(const l of this.nodes)if(l.name!==n.name&&o.includes(l.type)){r=!0;break}if(!r)return}n.type===Re?this.$telemetry.track("User deleted workflow note",{workflow_id:this.workflowsStore.workflowId,is_welcome_note:n.name===Bi}):(this.$externalHooks().run("node.deleteNode",{node:n}),this.$telemetry.track("User deleted node",{node_type:n.type,workflow_id:this.workflowsStore.workflowId}));let a=!1;const i=this.nodeTypesStore.getNodeType(n.type,n.typeVersion);if(i&&i.outputs.length===1&&i.inputs.length===1){const{incoming:r,outgoing:l}=this.getIncomingOutgoingConnections(n.name);if(r.length===1&&l.length===1){const c=r[0],h=l[0];if(c.__meta&&h.__meta){a=!0;const f=c.__meta.sourceNodeName,u=c.__meta.sourceOutputIndex,w=h.__meta.targetNodeName,g=h.__meta.targetOutputIndex;setTimeout(()=>{var v;this.connectTwoNodes(f,u,w,g),a&&((v=this.instance)==null||v.setSuspendDrawing(!1,!0),a=!1)},100)}}}setTimeout(()=>{var r,l,c;(r=this.instance)==null||r.setSuspendDrawing(!0),(((l=this.instance)==null?void 0:l.endpointsByElement[n.id])||[]).flat().forEach(h=>{var f;return(f=this.instance)==null?void 0:f.deleteEndpoint(h)}),this.workflowsStore.removeAllNodeConnection(n),this.workflowsStore.removeNode(n),this.workflowsStore.clearNodeExecutionData(n.name),a||(c=this.instance)==null||c.setSuspendDrawing(!1,!0),this.uiStore.removeNodeFromSelection(n),e&&this.historyStore.pushCommandToUndo(new Ph(n))},0),e&&t&&setTimeout(()=>{this.historyStore.stopRecordingUndo()},a?100:0)},valueChanged(s){s.name==="name"&&s.oldValue&&this.renameNode(s.oldValue,s.value)},async renameNodePrompt(s){try{const e=this.$prompt(this.$locale.baseText("nodeView.prompt.newName")+":",this.$locale.baseText("nodeView.prompt.renameNode")+`: ${s}`,{customClass:"rename-prompt",confirmButtonText:this.$locale.baseText("nodeView.prompt.rename"),cancelButtonText:this.$locale.baseText("nodeView.prompt.cancel"),inputErrorMessage:this.$locale.baseText("nodeView.prompt.invalidName"),inputValue:s});await S.nextTick();const t=document.querySelector(".rename-prompt .el-input__inner");t&&(t.focus(),t.select());const n=await e;await this.renameNode(s,n.value,!0)}catch(e){}},async renameNode(s,e,t=!1){if(s===e)return;this.suspendRecordingDetachedConnections=!0,t&&this.historyStore.startRecordingUndo();const o=(this.activeNode&&this.activeNode.name)===s;o&&(this.renamingActive=!0),e=this.uniqueNodeName(e);const a=this.getCurrentWorkflow(!0);a.renameNode(s,e),t&&this.historyStore.pushCommandToUndo(new Li(s,e)),this.workflowsStore.renameNodeSelectedAndExecution({old:s,new:e}),this.deleteEveryEndpoint(),this.workflowsStore.removeAllConnections({setStateDirty:!1}),this.workflowsStore.removeAllNodes({removePinData:!1,setStateDirty:!0}),await S.nextTick(),await this.addNodes(Object.values(a.nodes),a.connectionsBySourceNode,!1),this.deselectAllNodes(),this.nodeSelectedByName(e),o&&(this.ndvStore.activeNodeName=e,this.renamingActive=!1),t&&this.historyStore.stopRecordingUndo(),this.suspendRecordingDetachedConnections=!1},deleteEveryEndpoint(){var s,e;this.instance&&((s=this.instance)==null||s.reset(),Object.values((e=this.instance)==null?void 0:e.endpointsByElement).flatMap(t=>t).forEach(t=>t.destroy()),this.instance.deleteEveryConnection({fireEvent:!0}))},matchCredentials(s){s.credentials&&Object.entries(s.credentials).forEach(([e,t])=>{const n=this.credentialsStore.getCredentialsByType(e);if(typeof t=="string"&&(t={id:null,name:t},this.credentialsUpdated=!0),t.id){const a=t.id.toString(),i=n.find(r=>r.id===a);if(i){(i.name!==t.name||typeof t.id=="number")&&(s.credentials[e]={id:i.id,name:i.name},this.credentialsUpdated=!0);return}}s.credentials[e]=t;const o=n.filter(a=>a.name===t.name);o.length===1&&(s.credentials[e].id=o[0].id,this.credentialsUpdated=!0)})},async addNodes(s,e,t=!1){var a,i;if(!s||!s.length)return;await this.loadNodesProperties(s.map(r=>({name:r.type,version:r.typeVersion})));let n,o;if(s.forEach(r=>{if(r.id||(r.id=Ne()),n=this.nodeTypesStore.getNodeType(r.type,r.typeVersion),r.hasOwnProperty("disabled")||(r.disabled=!1),r.hasOwnProperty("parameters")||(r.parameters={}),n!==null){let l=null;try{l=Le(n.properties,r.parameters,!0,!1,r)}catch(c){console.error(this.$locale.baseText("nodeView.thereWasAProblemLoadingTheNodeParametersOfNode")+`: "${r.name}"`),console.error(c)}r.parameters=l!==null?l:{},r.type===it&&r.parameters.path===""&&(r.parameters.path=r.webhookId)}this.matchCredentials(r),o=this.getNodeIssues(n,r),o!==null&&(r.issues=o),this.workflowsStore.addNode(r),t&&this.historyStore.pushCommandToUndo(new Oh(r))}),await S.nextTick(),(a=this.instance)==null||a.setSuspendDrawing(!0),e!==void 0){let r;for(const l of Object.keys(e))for(const c of Object.keys(e[l]))for(let h=0;h<e[l][c].length;h++){const f=e[l][c][h];f&&f.forEach(u=>{r=[{node:l,type:c,index:h},{node:u.node,type:u.type,index:u.index}],this.__addConnection(r)})}}(i=this.instance)==null||i.setSuspendDrawing(!1,!0)},async addNodesToWorkflow(s){const e={},t=[];if(!s.nodes)throw new Error(this.$locale.baseText("nodeView.noNodesGivenToAdd"));const n=this.getNodeTypesMaxCount();let o,a;const i=[];await this.loadNodesProperties(s.nodes.map(k=>({name:k.type,version:k.typeVersion}))),s.nodes.forEach(k=>{if(n[k.type]!==void 0)if(n[k.type].exist>=n[k.type].max){e[k.name]=n[k.type].nodeNames[0];return}else n[k.type].exist+=1;o=k.name;const E=this.localizeNodeName(k.name,k.type);a=this.uniqueNodeName(E,t),t.push(a),e[o]=a,i.push(k)});const r={},l=s.connections,c=i.map(k=>k.name);let h,f,u,w,g;for(h of Object.keys(l)){if(!c.includes(h))continue;const k={};for(f of Object.keys(l[h]))for(k[f]=[],u=0;u<l[h][f].length;u++){const E=[];if(l[h][f][u])for(w=0;w<l[h][f][u].length;w++)g=l[h][f][u][w],c.includes(g.node)&&E.push(g);k[f].push(E)}r[h]=k}const v=this.getWorkflow(i,r);for(o in e)o!==e[o]&&v.renameNode(o,e[o]);return this.historyStore.startRecordingUndo(),await this.addNodes(Object.values(v.nodes),v.connectionsBySourceNode,!0),this.historyStore.stopRecordingUndo(),this.uiStore.stateIsDirty=!0,{nodes:Object.values(v.nodes),connections:v.connectionsBySourceNode}},async getSelectedNodesToSave(){const s={nodes:[],connections:{}};let e;const t=[];for(const h of this.uiStore.getSelectedNodes)e=this.getNodeDataToSave(h),t.push(h.name),s.nodes.push(e);let n,o,a,i,r,l,c;return s.nodes.forEach(h=>{if(o=this.workflowsStore.outgoingConnectionsByNodeName(h.name),Object.keys(o).length!==0){c={};for(a of Object.keys(o))for(r=0;r<o[a].length;r++){for(n=[],i=0;i<o[a][r].length;i++)l=o[a][r][i],t.indexOf(l.node)!==-1&&n.push(l);n.length&&(c.hasOwnProperty(a)||(c[a]=[]),c[a][r]=n)}Object.keys(c).length&&(s.connections[h.name]=c)}}),s},resetWorkspace(){this.workflowsStore.resetWorkflow(),this.onToggleNodeCreator({createNodeActive:!1}),this.nodeCreatorStore.setShowScrim(!1),this.deleteEveryEndpoint(),this.executionWaitingForWebhook&&this.restApi().removeTestWebhook(this.workflowsStore.workflowId).catch(()=>{}),this.workflowsStore.removeAllConnections({setStateDirty:!1}),this.workflowsStore.removeAllNodes({setStateDirty:!1,removePinData:!0}),this.workflowsStore.setWorkflowExecutionData(null),this.workflowsStore.resetAllNodesIssues(),this.workflowsStore.setActive(!1),this.workflowsStore.setWorkflowId(oe),this.workflowsStore.setWorkflowName({newName:"",setStateDirty:!1}),this.workflowsStore.setWorkflowSettings({}),this.workflowsStore.setWorkflowTagIds([]),this.workflowsStore.activeExecutionId=null,this.workflowsStore.executingNode=null,this.workflowsStore.executionWaitingForWebhook=!1,this.uiStore.removeActiveAction("workflowRunning"),this.uiStore.resetSelectedNodes(),this.uiStore.nodeViewOffsetPosition=[0,0],this.credentialsUpdated=!1},async loadActiveWorkflows(){await this.workflowsStore.fetchActiveWorkflows()},async loadNodeTypes(){await this.nodeTypesStore.getNodeTypes()},async loadCredentialTypes(){await this.credentialsStore.fetchCredentialTypes(!0)},async loadCredentials(){await this.credentialsStore.fetchAllCredentials()},async loadVariables(){await this.environmentsStore.fetchAllVariables()},async loadNodesProperties(s){const e=this.nodeTypesStore.allNodeTypes,t=[];e.forEach(n=>{const o=Array.isArray(n.version)?n.version:[n.version];s.find(a=>a.name===n.name&&o.includes(a.version))&&!n.hasOwnProperty("properties")&&t.push({name:n.name,version:Array.isArray(n.version)?n.version.slice(-1)[0]:n.version})}),t.length>0&&(this.startLoading(),await this.nodeTypesStore.getNodesInformation(t),this.stopLoading())},async onPostMessageReceived(s){try{const e=JSON.parse(s.data);if(e&&e.command==="openWorkflow")try{await this.importWorkflowExact(e),this.isExecutionPreview=!1}catch(t){window.top&&window.top.postMessage(JSON.stringify({command:"error",message:this.$locale.baseText("openWorkflow.workflowImportError")}),"*"),this.$showMessage({title:this.$locale.baseText("openWorkflow.workflowImportError"),message:t.message,type:"error"})}else if(e&&e.command==="openExecution")try{this.isProductionExecutionPreview=e.executionMode!=="manual",await this.openExecution(e.executionId),this.isExecutionPreview=!0}catch(t){window.top&&window.top.postMessage(JSON.stringify({command:"error",message:this.$locale.baseText("nodeView.showError.openExecution.title")}),"*"),this.$showMessage({title:this.$locale.baseText("nodeView.showError.openExecution.title"),message:t.message,type:"error"})}}catch(e){}},async onImportWorkflowDataEvent(s){await this.importWorkflowData(s.data,"file")},async onImportWorkflowUrlEvent(s){const e=await this.getWorkflowDataFromUrl(s.url);e!==void 0&&await this.importWorkflowData(e,"url")},addPinDataConnections(s){Object.keys(s).forEach(e=>{var o;const t=this.workflowsStore.getNodeByName(e);if(!t)return;((o=this.instance)==null?void 0:o.getConnections({source:t.id})).forEach(a=>{Wn(a,{total:s[e].length,iterations:0})})})},removePinDataConnections(s){Object.keys(s).forEach(e=>{var o;const t=this.workflowsStore.getNodeByName(e);if(!t)return;const n=(o=this.instance)==null?void 0:o.getConnections({source:t.id});this.instance.setSuspendDrawing(!0),n.forEach(pt),this.instance.setSuspendDrawing(!1,!0)})},onToggleNodeCreator({source:s,createNodeActive:e}){if(e===this.createNodeActive)return;this.nodeCreatorStore.setSelectedView(this.containsTrigger?Mh:ps),this.createNodeActive=e;const t=this.nodeCreatorStore.selectedView===ps?"trigger":"regular";e===!0&&this.nodeCreatorStore.setOpenSource(s),this.$externalHooks().run("nodeView.createNodeActiveChanged",{source:s,mode:t,createNodeActive:e}),this.$telemetry.trackNodesPanel("nodeView.createNodeActiveChanged",{source:s,mode:t,createNodeActive:e,workflow_id:this.workflowsStore.workflowId})},onAddNode(s,e){s.forEach(({nodeTypeName:t,position:n},o)=>{const i=!(t===Jt)&&(s.length===1||o>0);if(this.addNode(t,{position:n,dragAndDrop:e},i,!0,s.length>1&&o<1),o===0)return;const r=this.workflowsStore.$onAction(({name:l,after:c,args:h})=>{l==="addNode"&&h[0].type===t&&c(()=>{const f=this.nodes[this.nodes.length-1],u=this.nodes[this.nodes.length-2];this.$nextTick(()=>this.connectTwoNodes(u.name,0,f.name,0)),f.position=[u.position[0]+ht*2+$t,u.position[1]],r()})})})},async saveCurrentWorkflowExternal(s){await this.saveCurrentWorkflow(),s==null||s()},setSuspendRecordingDetachedConnections(s){this.suspendRecordingDetachedConnections=s},onMoveNode({nodeName:s,position:e}){this.workflowsStore.updateNodeProperties({name:s,properties:{position:e}});const t=this.workflowsStore.getNodeByName(s);setTimeout(()=>{var n;t&&((n=this.instance)==null||n.repaintEverything(),this.onNodeMoved(t))},0)},onRevertAddNode({node:s}){this.removeNode(s.name,!1)},async onRevertRemoveNode({node:s}){this.workflowsStore.workflow.nodes.find(t=>t.id===s.id)||(s.id=Ne(),await this.addNodes([s]))},onRevertAddConnection({connection:s}){this.suspendRecordingDetachedConnections=!0,this.__removeConnection(s,!0),this.suspendRecordingDetachedConnections=!1},async onRevertRemoveConnection({connection:s}){this.suspendRecordingDetachedConnections=!0,this.__addConnection(s),this.suspendRecordingDetachedConnections=!1},async onRevertNameChange({currentName:s,newName:e}){await this.renameNode(e,s)},onRevertEnableToggle({nodeName:s,isDisabled:e}){const t=this.workflowsStore.getNodeByName(s);t&&this.disableNodes([t])}},async mounted(){var e;this.resetWorkspace(),this.canvasStore.initInstance(this.$refs.nodeView),this.titleReset(),window.addEventListener("message",this.onPostMessageReceived),this.startLoading();const s=[this.loadActiveWorkflows(),this.loadCredentials(),this.loadCredentialTypes(),this.loadVariables()];this.nodeTypesStore.allNodeTypes.length===0&&s.push(this.loadNodeTypes());try{await Promise.all(s)}catch(t){this.$showError(t,this.$locale.baseText("nodeView.showError.mounted1.title"),this.$locale.baseText("nodeView.showError.mounted1.message")+":");return}if(Xh(async()=>{try{try{this.bindCanvasEvents()}catch(t){}await this.initView(),window.parent&&window.parent.postMessage(JSON.stringify({command:"n8nReady",version:this.rootStore.versionCli}),"*")}catch(t){this.$showError(t,this.$locale.baseText("nodeView.showError.mounted2.title"),this.$locale.baseText("nodeView.showError.mounted2.message")+":")}this.stopLoading(),setTimeout(()=>{this.usersStore.showPersonalizationSurvey(),this.addPinDataConnections(this.workflowsStore.getPinData||{})},0)}),this.$externalHooks().run("nodeView.mount").catch(t=>{}),((e=this.currentUser)==null?void 0:e.personalizationAnswers)!==null&&this.settingsStore.onboardingCallPromptEnabled&&this.currentUser&&Ti(this.currentUser)<=ki){const t=await this.uiStore.getNextOnboardingPrompt(),n=t.toast_sequence_number===1?Si:1e3;t.title&&t.description&&setTimeout(async()=>{this.$showToast({type:"info",title:t.title,message:t.description,duration:0,customClass:"clickable",closeOnClick:!0,onClick:()=>{this.$telemetry.track("user clicked onboarding toast",{seq_num:t.toast_sequence_number,title:t.title,description:t.description}),this.uiStore.openModal(Ht)}})},n)}},activated(){this.uiStore.addFirstStepOnLoad&&this.showTriggerCreator(Fe.TRIGGER_PLACEHOLDER_BUTTON),this.uiStore.addFirstStepOnLoad=!1,this.bindCanvasEvents(),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),window.addEventListener("message",this.onPostMessageReceived),this.$root.$on("newWorkflow",this.newWorkflow),this.$root.$on("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$on("importWorkflowUrl",this.onImportWorkflowUrlEvent),ye.on("nodeMove",this.onMoveNode),ye.on("revertAddNode",this.onRevertAddNode),ye.on("revertRemoveNode",this.onRevertRemoveNode),ye.on("revertAddConnection",this.onRevertAddConnection),ye.on("revertRemoveConnection",this.onRevertRemoveConnection),ye.on("revertRenameNode",this.onRevertNameChange),ye.on("enableNodeToggle",this.onRevertEnableToggle),me.on("pin-data",this.addPinDataConnections),me.on("unpin-data",this.removePinDataConnections),Es.on("saveWorkflow",this.saveCurrentWorkflowExternal),this.canvasStore.isDemo=this.isDemo},deactivated(){this.unbindCanvasEvents(),document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp),window.removeEventListener("message",this.onPostMessageReceived),window.removeEventListener("beforeunload",this.onBeforeUnload),this.$root.$off("newWorkflow",this.newWorkflow),this.$root.$off("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$off("importWorkflowUrl",this.onImportWorkflowUrlEvent),ye.off("nodeMove",this.onMoveNode),ye.off("revertAddNode",this.onRevertAddNode),ye.off("revertRemoveNode",this.onRevertRemoveNode),ye.off("revertAddConnection",this.onRevertAddConnection),ye.off("revertRemoveConnection",this.onRevertRemoveConnection),ye.off("revertRenameNode",this.onRevertNameChange),ye.off("enableNodeToggle",this.onRevertEnableToggle),me.off("pin-data",this.addPinDataConnections),me.off("unpin-data",this.removePinDataConnections),Es.off("saveWorkflow",this.saveCurrentWorkflowExternal)},destroyed(){this.resetWorkspace(),this.instance.unbind(),this.instance.destroy(),this.uiStore.stateIsDirty=!1,window.removeEventListener("message",this.onPostMessageReceived),this.$root.$off("newWorkflow",this.newWorkflow),this.$root.$off("importWorkflowData",this.onImportWorkflowDataEvent),this.$root.$off("importWorkflowUrl",this.onImportWorkflowUrlEvent),this.workflowsStore.setWorkflowId(oe)}});const e1="_content_xubjc_1",t1="_shake_xubjc_9",s1={content:e1,shake:t1};var n1=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.content},[t("div",{staticClass:"node-view-root do-not-select",attrs:{id:"node-view-root","data-test-id":"node-view-root"},on:{dragover:e.onDragOver,drop:e.onDrop}},[t("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.touchTap,expression:"touchTap",arg:"tap"}],staticClass:"node-view-wrapper",class:e.workflowClasses,on:{touchstart:e.mouseDown,touchend:e.mouseUp,touchmove:e.mouseMoveNodeWorkflow,mousedown:e.mouseDown,mouseup:e.mouseUp,wheel:e.canvasStore.wheelScroll}},[t("div",{staticClass:"node-view-background",style:e.backgroundStyle,attrs:{id:"node-view-background","data-test-id":"node-view-background"}}),t("div",{ref:"nodeView",staticClass:"node-view",style:e.workflowStyle,attrs:{id:"node-view","data-test-id":"node-view"}},[t("canvas-add-button",{directives:[{name:"show",rawName:"v-show",value:e.showCanvasAddButton,expression:"showCanvasAddButton"}],ref:"canvasAddButton",style:e.canvasAddButtonStyle,attrs:{showTooltip:!e.containsTrigger&&e.showTriggerMissingTooltip,position:e.canvasStore.canvasAddButtonPosition,"data-test-id":"canvas-add-button"},on:{click:function(n){return e.showTriggerCreator(e.NODE_CREATOR_OPEN_SOURCES.TRIGGER_PLACEHOLDER_BUTTON)},"hook:mounted":e.canvasStore.setRecenteredCanvasAddButtonPosition}}),e._l(e.nodes,function(n){return[n.type!==e.STICKY_NODE_TYPE?t("node",{key:`${n.id}_node`,attrs:{name:n.name,isReadOnly:e.isReadOnly,instance:e.instance,isActive:!!e.activeNode&&e.activeNode.name===n.name,hideActions:e.pullConnActive,isProductionExecutionPreview:e.isProductionExecutionPreview},on:{duplicateNode:e.duplicateNode,deselectAllNodes:e.deselectAllNodes,deselectNode:e.nodeDeselectedByName,nodeSelected:e.nodeSelectedByName,removeNode:o=>e.removeNode(o,!0),runWorkflow:e.onRunNode,moved:e.onNodeMoved,run:e.onNodeRun},scopedSlots:e._u([{key:"custom-tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$locale.baseText("nodeView.placeholderNode.addTriggerNodeBeforeExecuting"))}})]},proxy:!0}],null,!0)}):t("sticky",{key:`${n.id}_sticky`,attrs:{name:n.name,isReadOnly:e.isReadOnly,instance:e.instance,isActive:!!e.activeNode&&e.activeNode.name===n.name,nodeViewScale:e.nodeViewScale,gridSize:e.GRID_SIZE,hideActions:e.pullConnActive},on:{deselectAllNodes:e.deselectAllNodes,deselectNode:e.nodeDeselectedByName,nodeSelected:e.nodeSelectedByName,removeNode:o=>e.removeNode(o,!0)}})]})],2)]),t("node-details-view",{attrs:{readOnly:e.isReadOnly,renaming:e.renamingActive,isProductionExecutionPreview:e.isProductionExecutionPreview},on:{valueChanged:e.valueChanged,stopExecution:e.stopExecution,saveKeyboardShortcut:e.onSaveKeyboardShortcut}}),e.isReadOnly?e._e():t("node-creation",{attrs:{"create-node-active":e.createNodeActive,"node-view-scale":e.nodeViewScale},on:{toggleNodeCreator:e.onToggleNodeCreator,addNode:e.onAddNode}}),t("canvas-controls"),e.isReadOnly?e._e():t("div",{staticClass:"workflow-execute-wrapper"},[t("span",{on:{mouseenter:function(n){return e.showTriggerMissingToltip(!0)},mouseleave:function(n){return e.showTriggerMissingToltip(!1)},click:e.onRunContainerClick}},[t("n8n-button",{attrs:{loading:e.workflowRunning,label:e.runButtonText,title:e.$locale.baseText("nodeView.executesTheWorkflowFromATriggerNode"),size:"large",icon:"play-circle",type:"primary",disabled:e.isExecutionDisabled,"data-test-id":"execute-workflow-button"},on:{click:function(n){return n.stopPropagation(),e.onRunWorkflow.apply(null,arguments)}}})],1),e.workflowRunning===!0&&!e.executionWaitingForWebhook?t("n8n-icon-button",{staticClass:"stop-execution",attrs:{icon:"stop",size:"large",type:"secondary",title:e.stopExecutionInProgress?e.$locale.baseText("nodeView.stoppingCurrentExecution"):e.$locale.baseText("nodeView.stopCurrentExecution"),loading:e.stopExecutionInProgress,"data-test-id":"stop-execution-button"},on:{click:function(n){return n.stopPropagation(),e.stopExecution.apply(null,arguments)}}}):e._e(),e.workflowRunning===!0&&e.executionWaitingForWebhook===!0?t("n8n-icon-button",{staticClass:"stop-execution",attrs:{icon:"stop",size:"large",title:e.$locale.baseText("nodeView.stopWaitingForWebhookCall"),type:"secondary","data-test-id":"stop-execution-waiting-for-webhook-button"},on:{click:function(n){return n.stopPropagation(),e.stopWaitingForWebhook.apply(null,arguments)}}}):e._e(),!e.isReadOnly&&e.workflowExecution&&!e.workflowRunning&&!e.allTriggersDisabled?t("n8n-icon-button",{attrs:{title:e.$locale.baseText("nodeView.deletesTheCurrentExecutionData"),icon:"trash",size:"large","data-test-id":"clear-execution-data-button"},on:{click:function(n){return n.stopPropagation(),e.clearExecutionData.apply(null,arguments)}}}):e._e()],1)],1)])},o1=[];const fa={$style:s1};function a1(s){for(var e in fa)this[e]=fa[e]}var i1=p(ZI,n1,o1,!1,a1,"83a404e6",null,null);const At=i1.exports,r1=x(ss,D).extend({name:"execution-card",components:{ExecutionTime:tr},data(){return{VIEWS:d}},props:{execution:{type:Object,required:!0},highlight:{type:Boolean,default:!1},showGap:{type:Boolean,default:!1}},computed:{retryExecutionActions(){return[{id:"current-workflow",label:this.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow")},{id:"original-workflow",label:this.$locale.baseText("executionsList.retryWithOriginalWorkflow")}]},executionUIDetails(){return this.getExecutionUIDetails(this.execution)},isActive(){return this.execution.id===this.$route.params.executionId}},methods:{onRetryMenuItemSelect(s){this.$emit("retryExecution",{execution:this.execution,command:s})}}}),l1="_executionCard_1s3sh_1",c1="_active_1s3sh_6",d1="_executionStatus_1s3sh_9",u1="_executionLink_1s3sh_12",h1="_running_1s3sh_15",p1="_spinner_1s3sh_15",f1="_statusLabel_1s3sh_22",m1="_success_1s3sh_26",g1="_waiting_1s3sh_29",_1="_error_1s3sh_35",v1="_unknown_1s3sh_41",w1="_icon_1s3sh_57",y1="_icons_1s3sh_62",b1="_retry_1s3sh_70",x1="_manual_1s3sh_73",T1="_showGap_1s3sh_81",k1={executionCard:l1,active:c1,executionStatus:d1,executionLink:u1,running:h1,spinner:p1,statusLabel:f1,success:m1,waiting:g1,error:_1,unknown:v1,icon:w1,icons:y1,retry:b1,manual:x1,showGap:T1};var S1=function(){var n;var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{["execution-card"]:!0,[e.$style.executionCard]:!0,[e.$style.active]:e.isActive,[e.$style[e.executionUIDetails.name]]:!0,[e.$style.highlight]:e.highlight,[e.$style.showGap]:e.showGap}},[t("router-link",{class:e.$style.executionLink,attrs:{to:{name:e.VIEWS.EXECUTION_PREVIEW,params:{workflowId:e.currentWorkflow,executionId:e.execution.id}},"data-test-execution-status":e.executionUIDetails.name}},[t("div",{class:e.$style.description},[t("n8n-text",{attrs:{color:"text-dark",bold:!0,size:"medium","data-test-id":"execution-time"}},[e._v(" "+e._s(e.executionUIDetails.startTime)+" ")]),t("div",{class:e.$style.executionStatus},[e.executionUIDetails.name==="running"?t("n8n-spinner",{class:[e.$style.spinner,"mr-4xs"],attrs:{size:"small"}}):e._e(),t("n8n-text",{class:e.$style.statusLabel,attrs:{size:"small"}},[e._v(e._s(e.executionUIDetails.label))]),e.executionUIDetails.name==="running"?t("n8n-text",{attrs:{color:e.isActive?"text-dark":"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeRunning"))+" "),t("execution-time",{attrs:{"start-time":e.execution.startedAt}})],1):e.executionUIDetails.runningTime!==""?t("n8n-text",{attrs:{color:e.isActive?"text-dark":"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:(n=e.executionUIDetails)==null?void 0:n.runningTime}}))+" ")]):e._e()],1),e.execution.mode==="retry"?t("div",[t("n8n-text",{attrs:{color:e.isActive?"text-dark":"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.retry"))+" #"+e._s(e.execution.retryOf)+" ")])],1):e._e()],1),t("div",{class:e.$style.icons},[e.executionUIDetails.name==="error"?t("n8n-action-dropdown",{class:[e.$style.icon,e.$style.retry],attrs:{items:e.retryExecutionActions,activatorIcon:"redo","data-test-id":"retry-execution-button"},on:{select:e.onRetryMenuItemSelect}}):e._e(),e.execution.mode==="manual"?t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",[e._v(e._s(e.$locale.baseText("executionsList.test")))])]},proxy:!0}],null,!1,131727794)},[e.execution.mode==="manual"?t("font-awesome-icon",{class:[e.$style.icon,e.$style.manual],attrs:{icon:"flask"}}):e._e()],1):e._e()],1)])],1)},$1=[];const ma={$style:k1};function E1(s){for(var e in ma)this[e]=ma[e]}var C1=p(r1,S1,$1,!1,E1,null,null,null);const N1=C1.exports,I1=x(re).extend({name:"executions-info-accordion",props:{initiallyExpanded:{type:Boolean,default:!1}},data(){return{defaultValues:{saveFailedExecutions:"all",saveSuccessfulExecutions:"all",saveManualExecutions:!1},workflowSaveSettings:{saveFailedExecutions:!1,saveSuccessfulExecutions:!1,saveTestExecutions:!1}}},mounted(){this.defaultValues.saveFailedExecutions=this.settingsStore.saveDataErrorExecution,this.defaultValues.saveSuccessfulExecutions=this.settingsStore.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.settingsStore.saveManualExecutions,this.updateSettings(this.workflowSettings)},watch:{workflowSettings(s){this.updateSettings(s)}},computed:{...b(Z,P,N,B),accordionItems(){return[{id:"productionExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutions"),icon:this.productionExecutionsIcon.icon,iconColor:this.productionExecutionsIcon.color,tooltip:this.productionExecutionsStatus==="unknown"?this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutionsWarningTooltip"):null},{id:"manualExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.testExecutions"),icon:this.workflowSaveSettings.saveTestExecutions?"check":"times",iconColor:this.workflowSaveSettings.saveTestExecutions?"success":"danger"}]},shouldExpandAccordion(){return this.initiallyExpanded===!1?!1:!this.workflowSaveSettings.saveFailedExecutions||!this.workflowSaveSettings.saveSuccessfulExecutions||!this.workflowSaveSettings.saveTestExecutions},productionExecutionsIcon(){return this.productionExecutionsStatus==="saving"?{icon:"check",color:"success"}:this.productionExecutionsStatus==="not-saving"?{icon:"times",color:"danger"}:{icon:"exclamation-triangle",color:"warning"}},productionExecutionsStatus(){return this.workflowSaveSettings.saveSuccessfulExecutions===this.workflowSaveSettings.saveFailedExecutions?this.workflowSaveSettings.saveSuccessfulExecutions?"saving":"not-saving":"unknown"},workflowSettings(){return ae(this.workflowsStore.workflowSettings)},accordionIcon(){return!this.workflowSaveSettings.saveTestExecutions||this.productionExecutionsStatus!=="saving"?{icon:"exclamation-triangle",color:"warning"}:null},currentWorkflowId(){return this.workflowsStore.workflowId},isNewWorkflow(){return!this.currentWorkflowId||this.currentWorkflowId===oe||this.currentWorkflowId==="new"},workflowName(){return this.workflowsStore.workflowName},currentWorkflowTagIds(){return this.workflowsStore.workflowTags}},methods:{updateSettings(s){this.workflowSaveSettings.saveFailedExecutions=s.saveDataErrorExecution===void 0?this.defaultValues.saveFailedExecutions==="all":s.saveDataErrorExecution==="all",this.workflowSaveSettings.saveSuccessfulExecutions=s.saveDataSuccessExecution===void 0?this.defaultValues.saveSuccessfulExecutions==="all":s.saveDataSuccessExecution==="all",this.workflowSaveSettings.saveTestExecutions=s.saveManualExecutions===void 0?this.defaultValues.saveManualExecutions:s.saveManualExecutions},onAccordionClick(s){s.target instanceof HTMLAnchorElement&&(s.preventDefault(),this.uiStore.openModal(Pe))},onItemTooltipClick(s,e){s==="productionExecutions"&&e.target instanceof HTMLAnchorElement&&(e.preventDefault(),this.uiStore.openModal(Pe))},openWorkflowSettings(s){this.uiStore.openModal(Pe)},async onSaveWorkflowClick(s){let e;this.currentWorkflowId!==oe?e=this.currentWorkflowId:this.$route.params.name&&this.$route.params.name!=="new"&&(e=this.$route.params.name),await this.saveCurrentWorkflow({id:e,name:this.workflowName,tags:this.currentWorkflowTagIds})&&await this.settingsStore.fetchPromptsData()}}}),D1="_accordion_14pzb_1",A1="_disabled_14pzb_27",P1={accordion:D1,disabled:A1};var O1=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-info-accordion",{class:[e.$style.accordion,"mt-2xl"],attrs:{title:e.$locale.baseText("executionsLandingPage.emptyState.accordion.title"),items:e.accordionItems,initiallyExpanded:e.shouldExpandAccordion,headerIcon:e.accordionIcon},on:{click:e.onAccordionClick,tooltipClick:e.onItemTooltipClick},scopedSlots:e._u([{key:"customContent",fn:function(){return[t("footer",{staticClass:"mt-2xs"},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer"))+" "),t("n8n-tooltip",{attrs:{disabled:!e.isNewWorkflow},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("n8n-link",{on:{click:function(n){return n.preventDefault(),e.onSaveWorkflowClick.apply(null,arguments)}}},[e._v(e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipLink")))]),e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipText"))+" ")],1)]},proxy:!0}])},[t("n8n-link",{class:{[e.$style.disabled]:e.isNewWorkflow},attrs:{size:"small"},on:{click:function(n){return n.preventDefault(),e.openWorkflowSettings.apply(null,arguments)}}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.settingsLink"))+" ")])],1)],1)]},proxy:!0}])})},M1=[];const ga={$style:P1};function R1(s){for(var e in ga)this[e]=ga[e]}var L1=p(I1,O1,M1,!1,R1,null,null,null);const br=L1.exports,W1=C({name:"executions-sidebar",components:{ExecutionCard:N1,ExecutionsInfoAccordion:br,ExecutionFilter:cr},props:{executions:{type:Array,required:!0},loading:{type:Boolean,default:!0},loadingMore:{type:Boolean,default:!1},temporaryExecution:{type:Object,default:null}},data(){return{VIEWS:d,filter:{},autoRefresh:!1,autoRefreshInterval:void 0}},computed:{...b(N,B)},watch:{$route(s,e){e.name===d.EXECUTION_PREVIEW&&s.name===d.EXECUTION_HOME&&this.$router.go(-1)},"workflowsStore.activeWorkflowExecution"(){this.checkListSize(),this.scrollToActiveCard()}},mounted(){this.autoRefresh=this.uiStore.executionSidebarAutoRefresh===!0,this.autoRefresh&&(this.autoRefreshInterval=setInterval(()=>this.onRefresh(),4e3)),this.checkListSize(),this.scrollToActiveCard()},beforeDestroy(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0)},methods:{loadMore(s=20){if(!this.loading){const e=this.$refs.executionList;if(e){const t=e.offsetHeight-(e.scrollHeight-e.scrollTop);t>-10&&t<10&&this.$emit("loadMore",s)}}},onRetryExecution(s){this.$emit("retryExecution",s)},onRefresh(){this.$emit("refresh")},onFilterChanged(s){this.$emit("filterUpdated",s)},reloadExecutions(){this.$emit("reloadExecutions")},onAutoRefreshToggle(){this.uiStore.executionSidebarAutoRefresh=this.autoRefresh,this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=void 0),this.autoRefresh&&(this.autoRefreshInterval=setInterval(()=>this.onRefresh(),4*1e3))},checkListSize(){var t;const s=this.$refs.container,e=this.$refs[`execution-${(t=this.workflowsStore.activeWorkflowExecution)==null?void 0:t.id}`];if(s&&(e!=null&&e.length)){const n=e[0].$el,o=Math.ceil(s.clientHeight/n.clientHeight);o>this.executions.length&&this.$emit("loadMore",o-this.executions.length)}},scrollToActiveCard(){var t;const s=this.$refs.executionList,e=this.$refs[`execution-${(t=this.workflowsStore.activeWorkflowExecution)==null?void 0:t.id}`];if(s&&(e!=null&&e.length)&&this.workflowsStore.activeWorkflowExecution){const o=e[0].$el.getBoundingClientRect(),a=200;o.top>s.offsetHeight&&s.scrollTo({top:o.top-a})}}}}),B1="_container_1ndd8_1",U1="_heading_1ndd8_10",F1="_controls_1ndd8_17",V1="_executionList_1ndd8_29",z1="_infoAccordion_1ndd8_47",j1="_noResultsContainer_1ndd8_59",K1={container:B1,heading:U1,controls:F1,executionList:V1,infoAccordion:z1,noResultsContainer:j1};var H1=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{ref:"container",class:["executions-sidebar",e.$style.container],attrs:{"data-test-id":"executions-sidebar"}},[t("div",{class:e.$style.heading},[t("n8n-heading",{attrs:{tag:"h2",size:"medium",color:"text-dark"}},[e._v(" "+e._s(e.$locale.baseText("generic.executions"))+" ")])],1),t("div",{class:e.$style.controls},[t("el-checkbox",{attrs:{"data-test-id":"auto-refresh-checkbox"},on:{change:e.onAutoRefreshToggle},model:{value:e.autoRefresh,callback:function(n){e.autoRefresh=n},expression:"autoRefresh"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.autoRefresh"))+" ")]),t("execution-filter",{attrs:{"popover-placement":"left-start"},on:{filterChanged:e.onFilterChanged}})],1),t("div",{ref:"executionList",class:e.$style.executionList,attrs:{"data-test-id":"current-executions-list"},on:{scroll:function(n){return e.loadMore(20)}}},[e.loading?t("div",{staticClass:"mr-l"},[t("n8n-loading",{attrs:{variant:"rect"}})],1):e._e(),!e.loading&&e.executions.length===0?t("div",{class:e.$style.noResultsContainer},[t("n8n-text",{attrs:{color:"text-base",size:"medium",align:"center"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.noResults"))+" ")])],1):e.temporaryExecution?t("execution-card",{ref:`execution-${e.temporaryExecution.id}`,attrs:{execution:e.temporaryExecution,"data-test-id":`execution-details-${e.temporaryExecution.id}`,showGap:!0},on:{refresh:e.onRefresh,retryExecution:e.onRetryExecution}}):e._e(),e._l(e.executions,function(n){return t("execution-card",{key:n.id,ref:`execution-${n.id}`,refInFor:!0,attrs:{execution:n,"data-test-id":`execution-details-${n.id}`},on:{refresh:e.onRefresh,retryExecution:e.onRetryExecution}})}),e.loadingMore?t("div",{staticClass:"mr-m"},[t("n8n-loading",{attrs:{variant:"p",rows:1}})],1):e._e()],2),t("div",{class:e.$style.infoAccordion},[t("executions-info-accordion",{attrs:{initiallyExpanded:!1}})],1)])},G1=[];const _a={$style:K1};function q1(s){for(var e in _a)this[e]=_a[e]}var Y1=p(W1,H1,G1,!1,q1,"9d7a5523",null,null);const X1=Y1.exports,J1=5,Q1=100,Z1=x(D,ss,Ie,re).extend({name:"executions-list",components:{ExecutionsSidebar:X1},data(){return{loading:!1,loadingMore:!1,filter:{},temporaryExecution:null}},computed:{...b(He,le,P,N,B),hidePreview(){const s=this.filterApplied&&!this.executions.find(e=>{var t;return e.id===((t=this.activeExecution)==null?void 0:t.id)});return this.loading||!this.executions.length||s},filterApplied(){return this.filter.status!=="all"},workflowDataNotLoaded(){return this.workflowsStore.workflowId===oe&&this.workflowsStore.workflowName===""},loadedFinishedExecutionsCount(){return this.workflowsStore.getAllLoadedFinishedExecutions.length},totalFinishedExecutionsCount(){return this.workflowsStore.getTotalFinishedExecutionsCount},requestFilter(){return dr({...this.filter,workflowId:this.currentWorkflow})}},watch:{$route(s,e){const t=e.params.name!==s.params.name;if(this.initView(t),s.params.executionId){const n=this.workflowsStore.getExecutionDataById(s.params.executionId);n&&(this.workflowsStore.activeWorkflowExecution=n)}}},async beforeRouteLeave(s,e,t){if(gt(s)===ue.WORKFLOW){t();return}if(this.uiStore.stateIsDirty){const n=await this.confirmModal(this.$locale.baseText("generic.unsavedWork.confirmMessage.message"),this.$locale.baseText("generic.unsavedWork.confirmMessage.headline"),"warning",this.$locale.baseText("generic.unsavedWork.confirmMessage.confirmButtonText"),this.$locale.baseText("generic.unsavedWork.confirmMessage.cancelButtonText"),!0);n===ks?(await this.saveCurrentWorkflow({},!1)&&await this.settingsStore.fetchPromptsData(),this.uiStore.stateIsDirty=!1,t()):n===Ui&&(this.uiStore.stateIsDirty=!1,t())}else t()},async mounted(){this.loading=!0;const s=this.$route.params.name!==this.workflowsStore.workflowId,e=this.$route.params.name==="new"&&this.workflowsStore.workflowId===oe,t=s&&!e;if(await this.initView(t),!t)if(this.workflowsStore.currentWorkflowExecutions.length>0){const n=await this.loadExecutions();this.workflowsStore.addToCurrentExecutions(n),await this.setActiveExecution()}else await this.setExecutions();this.loading=!1},methods:{async initView(s){s&&(this.nodeTypesStore.allNodeTypes.length===0&&await this.nodeTypesStore.getNodeTypes(),await this.openWorkflow(this.$route.params.name),this.uiStore.nodeViewInitialized=!1,this.workflowsStore.currentWorkflowExecutions.length===0&&await this.setExecutions(),this.activeExecution&&this.$router.push({name:d.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.activeExecution.id}}).catch(()=>{}))},async onLoadMore(){this.loadingMore||await this.callDebounced("loadMore",{debounceTime:1e3})},async loadMore(s=20){var o;if(this.filter.status==="running"||this.loadedFinishedExecutionsCount>=this.totalFinishedExecutionsCount)return;this.loadingMore=!0;let e;this.executions.length!==0&&(e=this.executions.slice(-1)[0].id);let t;try{t=await this.workflowsStore.getPastExecutions(this.requestFilter,s,e)}catch(a){this.loadingMore=!1,this.$showError(a,this.$locale.baseText("executionsList.showError.loadMore.title"));return}t.results=t.results.map(a=>({...a,mode:a.mode}));const n=[...this.executions];for(const a of t.results)n.find(i=>i.id===a.id)===void 0&&n.push(a),a.id===((o=this.temporaryExecution)==null?void 0:o.id)&&(this.temporaryExecution=null);this.workflowsStore.currentWorkflowExecutions=n,this.loadingMore=!1},async onDeleteCurrentExecution(){var s;this.loading=!0;try{const e=this.executions.findIndex(n=>n.id===this.$route.params.executionId),t=this.executions[e+1]||this.executions[e-1]||this.executions[0];await this.workflowsStore.deleteExecutions({ids:[this.$route.params.executionId]}),((s=this.temporaryExecution)==null?void 0:s.id)===this.$route.params.executionId&&(this.temporaryExecution=null),this.executions.length>0?(await this.$router.push({name:d.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:t.id}}).catch(()=>{}),this.workflowsStore.activeWorkflowExecution=t):(this.workflowsStore.activeWorkflowExecution=null,await this.$router.push({name:d.EXECUTION_HOME,params:{name:this.currentWorkflow}})),await this.setExecutions()}catch(e){this.loading=!1,this.$showError(e,this.$locale.baseText("executionsList.showError.handleDeleteSelected.title"));return}this.loading=!1,this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.handleDeleteSelected.title"),type:"success"})},async onStopExecution(){const s=this.$route.params.executionId;try{await this.workflowsStore.stopCurrentExecution(s),this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.stopExecution.title"),message:this.$locale.baseText("executionsList.showMessage.stopExecution.message",{interpolate:{activeExecutionId:s}}),type:"success"}),await this.loadAutoRefresh()}catch(e){this.$showError(e,this.$locale.baseText("executionsList.showError.stopExecution.title"))}},async onFilterUpdated(s){this.filter=s,await this.setExecutions()},async setExecutions(){this.workflowsStore.currentWorkflowExecutions=await this.loadExecutions(),await this.setActiveExecution()},async loadAutoRefresh(){var i;const s=await this.loadExecutions();let e=[...this.executions];const t=e.map(r=>parseInt(r.id,10));let n=0;const o=[];let a=null;for(let r=s.length-1;r>=0;r--){const l=s[r],c=parseInt(l.id,10);if(n!==0&&!isNaN(c)&&c-n>1){const u=Hi(n+1,c);o.push(...u)}n=parseInt(l.id,10)||0;const h=t.indexOf(c);if(h!==-1){const u=e.find(v=>v.id===l.id),w=u&&u.finished===!1||(u==null?void 0:u.stoppedAt)===void 0,g=l.finished===!0||l.stoppedAt!==void 0;w&&g&&(e[h]=l,l.id===((i=this.activeExecution)==null?void 0:i.id)&&(a=l));continue}let f;for(f=e.length-1;f>=0;f--)if(c<parseInt(e[f].id,10)){e.splice(f+1,0,l);break}f===-1&&e.unshift(l)}e=e.filter(r=>!o.includes(parseInt(r.id,10))&&n>=parseInt(r.id,10)),this.workflowsStore.currentWorkflowExecutions=e,a!==null?this.workflowsStore.activeWorkflowExecution=a:!e.some(l=>{var c;return l.id===((c=this.activeExecution)==null?void 0:c.id)})&&this.executions.length>0&&!this.temporaryExecution?this.$router.push({name:d.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{}):this.executions.length===0&&(this.$router.push({name:d.EXECUTION_HOME}).catch(()=>{}),this.workflowsStore.activeWorkflowExecution=null)},async loadExecutions(){if(!this.currentWorkflow)return[];try{return await this.workflowsStore.loadCurrentWorkflowExecutions(this.requestFilter)}catch(s){return s.errorCode===Rh?this.$showMessage({title:this.$locale.baseText("executionsList.showError.refreshData.title"),message:s.message,type:"error",duration:3500},!1):this.$showError(s,this.$locale.baseText("executionsList.showError.refreshData.title")),[]}},async setActiveExecution(){const s=this.$route.params.executionId;if(s){const e=this.workflowsStore.getExecutionDataById(s);e?this.workflowsStore.activeWorkflowExecution=e:await this.tryToFindExecution(s)}this.workflowsStore.activeWorkflowExecution===null&&this.executions.length>0&&!this.temporaryExecution&&(this.workflowsStore.activeWorkflowExecution=this.executions[0],this.$router.push({name:d.EXECUTION_PREVIEW,params:{name:this.currentWorkflow,executionId:this.executions[0].id}}).catch(()=>{}))},async tryToFindExecution(s,e=0){if(e===0){const n=await this.workflowsStore.fetchExecutionDataById(s);if(n)this.temporaryExecution=n;else{this.workflowsStore.activeWorkflowExecution=null,this.$showError(new Error(this.$locale.baseText("executionView.notFound.message",{interpolate:{executionId:s}})),this.$locale.baseText("nodeView.showError.openExecution.title"));return}}if(e>=J1){if(this.temporaryExecution){this.workflowsStore.activeWorkflowExecution=this.temporaryExecution;return}this.workflowsStore.activeWorkflowExecution=null;return}await this.loadMore(Q1);const t=this.workflowsStore.getExecutionDataById(s);if(!t)await this.$nextTick(),await this.tryToFindExecution(s,e+1);else{this.workflowsStore.activeWorkflowExecution=t,this.temporaryExecution=null;return}},async openWorkflow(s){await this.loadActiveWorkflows();let e;try{e=await this.workflowsStore.fetchWorkflow(s)}catch(o){this.$showError(o,this.$locale.baseText("nodeView.showError.openWorkflow.title"));return}if(e===void 0)throw new Error(this.$locale.baseText("nodeView.workflowWithIdCouldNotBeFound",{interpolate:{workflowId:s}}));await this.addNodes(e.nodes,e.connections),this.workflowsStore.setActive(e.active||!1),this.workflowsStore.setWorkflowId(s),this.workflowsStore.setWorkflowName({newName:e.name,setStateDirty:!1}),this.workflowsStore.setWorkflowSettings(e.settings||{}),this.workflowsStore.setWorkflowPinData(e.pinData||{});const t=e.tags||[],n=t.map(o=>o.id);this.workflowsStore.setWorkflowTagIds(n||[]),this.workflowsStore.setWorkflowVersionId(e.versionId),this.tagsStore.upsertTags(t),this.$externalHooks().run("workflow.open",{workflowId:s,workflowName:e.name}),this.uiStore.stateIsDirty=!1},async addNodes(s,e){if(!s||!s.length)return;await this.loadNodesProperties(s.map(n=>({name:n.type,version:n.typeVersion})));let t;if(s.forEach(n=>{if(n.id||(n.id=Ne()),t=this.nodeTypesStore.getNodeType(n.type,n.typeVersion),n.hasOwnProperty("disabled")||(n.disabled=!1),n.hasOwnProperty("parameters")||(n.parameters={}),t!==null){let o=null;try{o=Le(t.properties,n.parameters,!0,!1,n)}catch(a){console.error(this.$locale.baseText("nodeView.thereWasAProblemLoadingTheNodeParametersOfNode")+`: "${n.name}"`),console.error(a)}n.parameters=o!==null?o:{},n.type===it&&n.parameters.path===""&&(n.parameters.path=n.webhookId)}this.workflowsStore.addNode(n)}),e!==void 0){let n;for(const o of Object.keys(e))for(const a of Object.keys(e[o]))for(let i=0;i<e[o][a].length;i++){const r=e[o][a][i];r&&r.forEach(l=>{n=[{node:o,type:a,index:i},{node:l.node,type:l.type,index:l.index}],this.workflowsStore.addConnection({connection:n,setStateDirty:!1})})}}},async loadNodesProperties(s){const e=this.nodeTypesStore.allNodeTypes,t=[];e.forEach(n=>{const o=Array.isArray(n.version)?n.version:[n.version];s.find(a=>a.name===n.name&&o.includes(a.version))&&!n.hasOwnProperty("properties")&&t.push({name:n.name,version:Array.isArray(n.version)?n.version.slice(-1)[0]:n.version})}),t.length>0&&await this.nodeTypesStore.getNodesInformation(t)},async loadActiveWorkflows(){await this.workflowsStore.fetchActiveWorkflows()},async onRetryExecution(s){const e=s.command==="current-workflow";this.$showMessage({title:this.$locale.baseText("executionDetails.runningMessage"),type:"info",duration:2e3}),await this.retryExecution(s.execution,e),await this.loadAutoRefresh(),this.$telemetry.track("User clicked retry execution button",{workflow_id:this.workflowsStore.workflowId,execution_id:s.execution.id,retry_type:e?"current":"original"})},async retryExecution(s,e){try{await this.workflowsStore.retryExecution(s.id,e)===!0?this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulTrue.title"),type:"success"}):this.$showMessage({title:this.$locale.baseText("executionsList.showMessage.retrySuccessfulFalse.title"),type:"error"})}catch(t){this.$showError(t,this.$locale.baseText("executionsList.showError.retryExecution.title"))}}}}),eD="_container_16o1g_1",tD="_content_16o1g_7",sD={container:eD,content:tD};var nD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("executions-sidebar",{attrs:{executions:e.executions,loading:e.loading&&!e.executions.length,loadingMore:e.loadingMore,temporaryExecution:e.temporaryExecution},on:{reloadExecutions:e.setExecutions,filterUpdated:e.onFilterUpdated,loadMore:e.onLoadMore,retryExecution:e.onRetryExecution,refresh:e.loadAutoRefresh}}),e.hidePreview?e._e():t("div",{class:e.$style.content},[t("router-view",{attrs:{name:"executionPreview"},on:{deleteCurrentExecution:e.onDeleteCurrentExecution,retryExecution:e.onRetryExecution,stopExecution:e.onStopExecution}})],1)],1)},oD=[];const va={$style:sD};function aD(s){for(var e in va)this[e]=va[e]}var iD=p(Z1,nD,oD,!1,aD,null,null,null);const rD=iD.exports,lD=C({name:"executions-landing-page",components:{ExecutionsInfoAccordion:br},computed:{...b(N,B),executionCount(){return this.workflowsStore.currentWorkflowExecutions.length},containsTrigger(){return this.workflowsStore.workflowTriggerNodes.length>0}},methods:{onSetupFirstStep(s){this.uiStore.addFirstStepOnLoad=!0;const e=this.getWorkflowRoute();this.$router.push(e)},getWorkflowRoute(){const s=this.workflowsStore.workflowId||this.$route.params.name;return s===oe?{name:d.NEW_WORKFLOW,params:{}}:{name:d.WORKFLOW,params:{name:s}}}}}),cD="_container_acx6b_1",dD="_messageContainer_acx6b_11",uD="_icon_acx6b_22",hD={container:cD,messageContainer:dD,icon:uD};var pD=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:["workflow-executions-container",e.$style.container]},[e.executionCount===0?t("div",{class:[e.$style.messageContainer,e.$style.noExecutionsMessage]},[e.containsTrigger?t("div",[t("n8n-heading",{staticClass:"mb-2xs",attrs:{tag:"h2",size:"xlarge",color:"text-dark"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.heading"))+" ")]),t("executions-info-accordion")],1):t("div",[t("n8n-heading",{staticClass:"mb-2xs",attrs:{tag:"h2",size:"xlarge",color:"text-dark"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.noTrigger.heading"))+" ")]),t("n8n-text",{attrs:{size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.message"))+" ")]),t("n8n-button",{staticClass:"mt-l",attrs:{type:"tertiary",size:"large"},on:{click:e.onSetupFirstStep}},[e._v(" "+e._s(e.$locale.baseText("executionsLandingPage.emptyState.noTrigger.buttonText"))+" ")])],1)]):e._e()])},fD=[];const wa={$style:hD};function mD(s){for(var e in wa)this[e]=wa[e]}var gD=p(lD,pD,fD,!1,mD,null,null,null);const _D=gD.exports,vD=x(D).extend({name:"WorkflowPreview",props:{loading:{type:Boolean,default:!1},mode:{type:String,default:"workflow",validator:s=>["workflow","execution"].includes(s)},workflow:{type:Object,required:!1},executionId:{type:String,required:!1},executionMode:{type:String,required:!1},loaderType:{type:String,default:"image",validator:s=>["image","spinner"].includes(s)}},data(){return{nodeViewDetailsOpened:!1,ready:!1,insideIframe:!1,scrollX:0,scrollY:0}},computed:{...b(Z),showPreview(){return!this.loading&&(this.mode==="workflow"&&!!this.workflow||this.mode==="execution"&&!!this.executionId)&&this.ready}},methods:{onMouseEnter(){this.insideIframe=!0,this.scrollX=window.scrollX,this.scrollY=window.scrollY},onMouseLeave(){this.insideIframe=!1},loadWorkflow(){try{if(!this.workflow)throw new Error(this.$locale.baseText("workflowPreview.showError.missingWorkflow"));if(!this.workflow.nodes||!Array.isArray(this.workflow.nodes))throw new Error(this.$locale.baseText("workflowPreview.showError.arrayEmpty"));const s=this.$refs.preview_iframe;s!=null&&s.contentWindow&&s.contentWindow.postMessage(JSON.stringify({command:"openWorkflow",workflow:this.workflow}),"*")}catch(s){this.$showError(s,this.$locale.baseText("workflowPreview.showError.previewError.title"),this.$locale.baseText("workflowPreview.showError.previewError.message"))}},loadExecution(){try{if(!this.executionId)throw new Error(this.$locale.baseText("workflowPreview.showError.missingExecution"));const s=this.$refs.preview_iframe;s!=null&&s.contentWindow&&s.contentWindow.postMessage(JSON.stringify({command:"openExecution",executionId:this.executionId,executionMode:this.executionMode||""}),"*")}catch(s){this.$showError(s,this.$locale.baseText("workflowPreview.showError.previewError.title"),this.$locale.baseText("workflowPreview.executionMode.showError.previewError.message"))}},receiveMessage({data:s}){try{const e=JSON.parse(s);e.command==="n8nReady"?this.ready=!0:e.command==="openNDV"?this.nodeViewDetailsOpened=!0:e.command==="closeNDV"?this.nodeViewDetailsOpened=!1:e.command==="error"&&this.$emit("close")}catch(e){}},onDocumentScroll(){this.insideIframe&&window.scrollTo(this.scrollX,this.scrollY)}},watch:{showPreview(s){s&&(this.mode==="workflow"?this.loadWorkflow():this.mode==="execution"&&this.loadExecution())},executionId(s){this.mode==="execution"&&this.executionId&&this.loadExecution()}},mounted(){window.addEventListener("message",this.receiveMessage),document.addEventListener("scroll",this.onDocumentScroll)},beforeDestroy(){window.removeEventListener("message",this.receiveMessage),document.removeEventListener("scroll",this.onDocumentScroll)}}),wD="_container_935xl_1",yD="_workflow_935xl_8",bD="_show_935xl_14",xD="_openNDV_935xl_20",TD="_spinner_935xl_29",kD="_imageLoader_935xl_37",SD="_executionPreview_935xl_41",$D={container:wD,workflow:yD,show:bD,openNDV:xD,spinner:TD,imageLoader:kD,executionPreview:SD};var ED=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[e.loaderType==="image"&&!e.showPreview?t("div",{class:e.$style.imageLoader},[t("n8n-loading",{attrs:{loading:!e.showPreview,rows:1,variant:"image"}})],1):e.loaderType==="spinner"&&!e.showPreview?t("div",{class:e.$style.spinner},[t("n8n-spinner",{attrs:{type:"dots"}})],1):e._e(),t("iframe",{ref:"preview_iframe",class:{[e.$style.workflow]:!this.nodeViewDetailsOpened,[e.$style.executionPreview]:e.mode==="execution",[e.$style.openNDV]:this.nodeViewDetailsOpened,[e.$style.show]:this.showPreview},attrs:{src:`${e.rootStore.baseUrl}workflows/demo`},on:{mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}})])},CD=[];const ya={$style:$D};function ND(s){for(var e in ya)this[e]=ya[e]}var ID=p(vD,ED,CD,!1,ND,null,null,null);const xr=ID.exports,DD=x(D,ss).extend({name:"execution-preview",components:{ElDropdown:se.Dropdown,WorkflowPreview:xr},data(){return{VIEWS:d}},computed:{...b(N),executionUIDetails(){return this.activeExecution?this.getExecutionUIDetails(this.activeExecution):null},sidebarCollapsed(){return this.uiStore.sidebarMenuCollapsed},executionMode(){var s;return((s=this.activeExecution)==null?void 0:s.mode)||""}},methods:{async onDeleteExecution(){await this.confirmMessage(this.$locale.baseText("executionDetails.confirmMessage.message"),this.$locale.baseText("executionDetails.confirmMessage.headline"),"warning",this.$locale.baseText("executionDetails.confirmMessage.confirmButtonText"),"")&&this.$emit("deleteCurrentExecution")},handleRetryClick(s){this.$emit("retryExecution",{execution:this.activeExecution,command:s})},handleStopClick(){this.$emit("stopExecution")},onRetryButtonBlur(s){const e=this.$refs.retryDropdown;e&&s.relatedTarget===null&&e.hide()}}}),AD="_previewContainer_wbul2_1",PD="_executionDetails_wbul2_6",OD="_sidebarCollapsed_wbul2_19",MD="_spinner_wbul2_23",RD="_running_wbul2_29",LD="_waiting_wbul2_34",WD="_success_wbul2_38",BD="_error_wbul2_42",UD="_runningInfo_wbul2_46",FD="_runningMessage_wbul2_53",VD={previewContainer:AD,executionDetails:PD,sidebarCollapsed:OD,spinner:MD,running:RD,waiting:LD,success:WD,error:BD,runningInfo:UD,runningMessage:FD};var zD=function(){var n,o,a,i,r,l,c,h;var e=this,t=e._self._c;return e._self._setupProxy,((n=e.executionUIDetails)==null?void 0:n.name)==="running"?t("div",{class:e.$style.runningInfo},[t("div",{class:e.$style.spinner},[t("n8n-spinner",{attrs:{type:"ring"}})],1),t("n8n-text",{class:e.$style.runningMessage,attrs:{color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningMessage"))+" ")]),t("n8n-button",{staticClass:"mt-l",attrs:{type:"tertiary",size:"medium"},on:{click:e.handleStopClick}},[e._v(" "+e._s(e.$locale.baseText("executionsList.stopExecution"))+" ")])],1):t("div",{class:e.$style.previewContainer},[e.activeExecution?t("div",{class:{[e.$style.executionDetails]:!0,[e.$style.sidebarCollapsed]:e.sidebarCollapsed},attrs:{"data-test-id":`execution-preview-details-${e.executionId}`}},[t("div",[t("n8n-text",{attrs:{size:"large",color:"text-base",bold:!0,"data-test-id":"execution-time"}},[e._v(e._s((o=e.executionUIDetails)==null?void 0:o.startTime))]),t("br"),((a=e.executionUIDetails)==null?void 0:a.name)==="running"?t("n8n-spinner",{class:[e.$style.spinner,"mr-4xs"],attrs:{size:"small"}}):e._e(),t("n8n-text",{class:[e.$style.status,e.$style[e.executionUIDetails.name]],attrs:{size:"medium","data-test-id":"execution-preview-label"}},[e._v(" "+e._s(e.executionUIDetails.label)+" ")]),e.executionUIDetails.name==="running"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeRunning",{interpolate:{time:(i=e.executionUIDetails)==null?void 0:i.runningTime}}))+" | ID#"+e._s(e.activeExecution.id)+" ")]):e.executionUIDetails.name!=="waiting"?t("n8n-text",{attrs:{color:"text-base",size:"medium","data-test-id":"execution-preview-id"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:(l=(r=e.executionUIDetails)==null?void 0:r.runningTime)!=null?l:"unknown"}}))+" | ID#"+e._s(e.activeExecution.id)+" ")]):((c=e.executionUIDetails)==null?void 0:c.name)==="waiting"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" | ID#"+e._s(e.activeExecution.id)+" ")]):e._e(),t("br"),e.activeExecution.mode==="retry"?t("n8n-text",{attrs:{color:"text-base",size:"medium"}},[e._v(" "+e._s(e.$locale.baseText("executionDetails.retry"))+" "),t("router-link",{class:e.$style.executionLink,attrs:{to:{name:e.VIEWS.EXECUTION_PREVIEW,params:{workflowId:e.activeExecution.workflowId,executionId:e.activeExecution.retryOf}}}},[e._v(" #"+e._s(e.activeExecution.retryOf)+" ")])],1):e._e()],1),t("div",[((h=e.executionUIDetails)==null?void 0:h.name)==="error"?t("el-dropdown",{ref:"retryDropdown",staticClass:"mr-xs",attrs:{trigger:"click"},on:{command:e.handleRetryClick},scopedSlots:e._u([{key:"dropdown",fn:function(){return[t("el-dropdown-menu",[t("el-dropdown-item",{attrs:{command:"current-workflow"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow"))+" ")]),t("el-dropdown-item",{attrs:{command:"original-workflow"}},[e._v(" "+e._s(e.$locale.baseText("executionsList.retryWithOriginalWorkflow"))+" ")])],1)]},proxy:!0}],null,!1,2885173433)},[t("span",{staticClass:"retry-button"},[t("n8n-icon-button",{attrs:{size:"large",type:"tertiary",title:e.$locale.baseText("executionsList.retryExecution"),icon:"redo","data-test-id":"execution-preview-retry-button"},on:{blur:e.onRetryButtonBlur}})],1)]):e._e(),t("n8n-icon-button",{attrs:{title:e.$locale.baseText("executionDetails.deleteExecution"),icon:"trash",size:"large",type:"tertiary","data-test-id":"execution-preview-delete-button"},on:{click:e.onDeleteExecution}})],1)]):e._e(),t("workflow-preview",{attrs:{mode:"execution",loaderType:"spinner",executionId:e.executionId,executionMode:e.executionMode}})],1)},jD=[];const ba={$style:VD};function KD(s){for(var e in ba)this[e]=ba[e]}var HD=p(DD,zD,jD,!1,KD,null,null,null);const GD=HD.exports,qD=x(Gs).extend({name:"SettingsSidebar",computed:{...b(Z,P,N),settingsFakeDoorFeatures(){return this.uiStore.getFakeDoorByLocation("settings")},sidebarMenuItems(){const s=[{id:"settings-usage-and-plan",icon:"chart-bar",label:this.$locale.baseText("settings.usageAndPlan.title"),position:"top",available:this.canAccessUsageAndPlan(),activateOnRouteNames:[d.USAGE]},{id:"settings-personal",icon:"user-circle",label:this.$locale.baseText("settings.personal"),position:"top",available:this.canAccessPersonalSettings(),activateOnRouteNames:[d.PERSONAL_SETTINGS]},{id:"settings-users",icon:"user-friends",label:this.$locale.baseText("settings.users"),position:"top",available:this.canAccessUsersSettings(),activateOnRouteNames:[d.USERS_SETTINGS]},{id:"settings-api",icon:"plug",label:this.$locale.baseText("settings.n8napi"),position:"top",available:this.canAccessApiSettings(),activateOnRouteNames:[d.API_SETTINGS]},{id:"settings-version-control",icon:"code-branch",label:this.$locale.baseText("settings.versionControl.title"),position:"top",available:this.canAccessVersionControl(),activateOnRouteNames:[d.VERSION_CONTROL]},{id:"settings-sso",icon:"user-lock",label:this.$locale.baseText("settings.sso"),position:"top",available:this.canAccessSso(),activateOnRouteNames:[d.SSO_SETTINGS]},{id:"settings-ldap",icon:"network-wired",label:this.$locale.baseText("settings.ldap"),position:"top",available:this.canAccessLdapSettings(),activateOnRouteNames:[d.LDAP_SETTINGS]}];for(const e of this.settingsFakeDoorFeatures)e.uiLocations.includes("settings")&&s.push({id:e.id,icon:e.icon||"question",label:this.$locale.baseText(e.featureName),position:"top",available:!0,activateOnRoutePaths:[`/settings/coming-soon/${e.id}`]});return s.push({id:"settings-log-streaming",icon:"sign-in-alt",label:this.$locale.baseText("settings.log-streaming"),position:"top",available:this.canAccessLogStreamingSettings(),activateOnRouteNames:[d.LOG_STREAMING_SETTINGS]}),s.push({id:"settings-community-nodes",icon:"cube",label:this.$locale.baseText("settings.communityNodes"),position:"top",available:this.canAccessCommunityNodes(),activateOnRouteNames:[d.COMMUNITY_NODES]}),s}},methods:{canAccessPersonalSettings(){return this.canUserAccessRouteByName(d.PERSONAL_SETTINGS)},canAccessUsersSettings(){return this.canUserAccessRouteByName(d.USERS_SETTINGS)},canAccessCommunityNodes(){return this.canUserAccessRouteByName(d.COMMUNITY_NODES)},canAccessApiSettings(){return this.canUserAccessRouteByName(d.API_SETTINGS)},canAccessLdapSettings(){return this.canUserAccessRouteByName(d.LDAP_SETTINGS)},canAccessLogStreamingSettings(){return this.canUserAccessRouteByName(d.LOG_STREAMING_SETTINGS)},canAccessUsageAndPlan(){return this.canUserAccessRouteByName(d.USAGE)},canAccessVersionControl(){return this.canUserAccessRouteByName(d.VERSION_CONTROL)},canAccessSso(){return this.canUserAccessRouteByName(d.SSO_SETTINGS)},onVersionClick(){this.uiStore.openModal(zt)},openUpdatesPanel(){this.uiStore.openModal(yt)},async handleSelect(s){switch(s){case"settings-personal":this.$router.currentRoute.name!==d.PERSONAL_SETTINGS&&await this.$router.push({name:d.PERSONAL_SETTINGS});break;case"settings-users":this.$router.currentRoute.name!==d.USERS_SETTINGS&&await this.$router.push({name:d.USERS_SETTINGS});break;case"settings-api":this.$router.currentRoute.name!==d.API_SETTINGS&&await this.$router.push({name:d.API_SETTINGS});break;case"settings-ldap":this.$router.currentRoute.name!==d.LDAP_SETTINGS&&this.$router.push({name:d.LDAP_SETTINGS});break;case"settings-log-streaming":this.$router.currentRoute.name!==d.LOG_STREAMING_SETTINGS&&this.$router.push({name:d.LOG_STREAMING_SETTINGS});break;case"users":case"environments":case"logging":this.$router.push({name:d.FAKE_DOOR,params:{featureId:s}}).catch(()=>{});break;case"settings-community-nodes":this.$router.currentRoute.name!==d.COMMUNITY_NODES&&await this.$router.push({name:d.COMMUNITY_NODES});break;case"settings-usage-and-plan":this.$router.currentRoute.name!==d.USAGE&&this.$router.push({name:d.USAGE});break;case"settings-sso":this.$router.currentRoute.name!==d.SSO_SETTINGS&&this.$router.push({name:d.SSO_SETTINGS});break;case"settings-version-control":this.$router.currentRoute.name!==d.VERSION_CONTROL&&this.$router.push({name:d.VERSION_CONTROL});break}}}}),YD="_container_lnceh_1",XD="_returnButton_lnceh_10",JD="_updatesSubmenu_lnceh_19",QD="_versionContainer_lnceh_20",ZD={container:YD,returnButton:XD,updatesSubmenu:JD,versionContainer:QD};var eA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("n8n-menu",{attrs:{items:e.sidebarMenuItems},on:{select:e.handleSelect},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.returnButton,attrs:{"data-test-id":"settings-back"},on:{click:function(n){return e.$emit("return")}}},[t("i",{staticClass:"mr-xs"},[t("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1),t("n8n-heading",{attrs:{size:"large",bold:!0}},[e._v(e._s(e.$locale.baseText("settings")))])],1)]},proxy:!0},{key:"menuSuffix",fn:function(){return[t("div",{class:e.$style.versionContainer},[t("n8n-link",{attrs:{size:"small"},on:{click:e.onVersionClick}},[e._v(" "+e._s(e.$locale.baseText("settings.version"))+" "+e._s(e.rootStore.versionCli)+" ")])],1)]},proxy:!0}])})],1)},tA=[];const xa={$style:ZD};function sA(s){for(var e in xa)this[e]=xa[e]}var nA=p(qD,eA,tA,!1,sA,null,null,null);const oA=nA.exports,aA=C({name:"SettingsView",components:{SettingsSidebar:oA},beforeRouteEnter(s,e,t){t(n=>{n.previousRoute=e})},data(){return{previousRoute:null}},methods:{onReturn(){this.$router.push(this.previousRoute?this.previousRoute.path:{name:d.HOMEPAGE})}}}),iA="_container_11adc_1",rA="_contentContainer_11adc_8 _container_11adc_1",lA="_content_11adc_8",cA={container:iA,contentContainer:rA,content:lA};var dA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("SettingsSidebar",{on:{return:e.onReturn}}),t("div",{class:e.$style.contentContainer},[t("div",{class:e.$style.content},[t("router-view",e._b({attrs:{name:"settingsView"}},"router-view",e.$attrs,!1))],1)])],1)},uA=[];const Ta={$style:cA};function hA(s){for(var e in Ta)this[e]=Ta[e]}var pA=p(aA,dA,uA,!1,hA,null,null,null);const Qs=pA.exports,fA=x(D).extend({name:"SettingsLdapView",components:{InfiniteLoading:Qh},data(){return{dataTable:[],tableKey:0,adConfig:{},loadingTestConnection:!1,loadingDryRun:!1,loadingLiveRun:!1,loadingTable:!1,hasAnyChanges:!1,formInputs:null,formBus:q(),readyToSubmit:!1,page:0,loginEnabled:!1,syncEnabled:!1}},async mounted(){this.isLDAPFeatureEnabled&&await this.getLdapConfig()},computed:{...b(z,P,N),currentUser(){return this.usersStore.currentUser},isLDAPFeatureEnabled(){return this.settingsStore.settings.enterprise.ldap===!0}},methods:{goToUpgrade(){this.uiStore.goToUpgrade("ldap","upgrade-ldap")},cellClassStyle({row:s,column:e}){if(e.property==="status"){if(s.status==="Success")return{color:"green"};if(s.status==="Error")return{color:"red"}}if(e.property==="runMode"){if(s.runMode==="Dry")return{color:"orange"};if(s.runMode==="Live")return{color:"blue"}}return{}},onInput(s){s.name==="loginEnabled"&&typeof s.value=="boolean"&&(this.loginEnabled=s.value),s.name==="synchronizationEnabled"&&typeof s.value=="boolean"&&(this.syncEnabled=s.value),this.hasAnyChanges=!0},onReadyToSubmit(s){this.readyToSubmit=s},syncDataMapper(s){const e=new Date(s.startedAt),t=new Date(s.endedAt),n=t.getTime()-e.getTime();return{runTime:Jh(n),runMode:Bn(s.runMode),status:Bn(s.status),endedAt:Lh(t.getTime()),details:this.$locale.baseText("settings.ldap.usersScanned",{interpolate:{scanned:s.scanned.toString()}})}},async onSubmit(){const s=this.$refs.ldapConfigForm;if(!this.hasAnyChanges||!s)return;const e={loginEnabled:s.values.loginEnabled,loginLabel:s.values.loginLabel,connectionUrl:s.values.serverAddress,allowUnauthorizedCerts:s.values.allowUnauthorizedCerts,connectionPort:+s.values.port,connectionSecurity:s.values.connectionSecurity,baseDn:s.values.baseDn,bindingAdminDn:s.values.bindingType==="admin"?s.values.adminDn:"",bindingAdminPassword:s.values.bindingType==="admin"?s.values.adminPassword:"",emailAttribute:s.values.email,firstNameAttribute:s.values.firstName,lastNameAttribute:s.values.lastName,loginIdAttribute:s.values.loginId,ldapIdAttribute:s.values.ldapId,userFilter:s.values.userFilter,synchronizationEnabled:s.values.synchronizationEnabled,synchronizationInterval:+s.values.synchronizationInterval,searchPageSize:+s.values.pageSize,searchTimeout:+s.values.searchTimeout};let t=!0;try{this.adConfig.loginEnabled===!0&&e.loginEnabled===!1&&(t=await this.confirmMessage(this.$locale.baseText("settings.ldap.confirmMessage.beforeSaveForm.message"),this.$locale.baseText("settings.ldap.confirmMessage.beforeSaveForm.headline"),null,this.$locale.baseText("settings.ldap.confirmMessage.beforeSaveForm.cancelButtonText"),this.$locale.baseText("settings.ldap.confirmMessage.beforeSaveForm.confirmButtonText"))),t||(this.hasAnyChanges=!0),this.adConfig=await this.settingsStore.updateLdapConfig(e),this.$showToast({title:this.$locale.baseText("settings.ldap.updateConfiguration"),message:"",type:"success"})}catch(n){this.$showError(n,this.$locale.baseText("settings.ldap.configurationError"))}finally{t&&(this.hasAnyChanges=!1)}},onSaveClick(){this.formBus.emit("submit")},async onTestConnectionClick(){this.loadingTestConnection=!0;try{await this.settingsStore.testLdapConnection(),this.$showToast({title:this.$locale.baseText("settings.ldap.connectionTest"),message:this.$locale.baseText("settings.ldap.toast.connection.success"),type:"success"})}catch(s){this.$showToast({title:this.$locale.baseText("settings.ldap.connectionTestError"),message:s.message,type:"error"})}finally{this.loadingTestConnection=!1}},async onDryRunClick(){this.loadingDryRun=!0;try{await this.settingsStore.runLdapSync({type:"dry"}),this.$showToast({title:this.$locale.baseText("settings.ldap.runSync.title"),message:this.$locale.baseText("settings.ldap.toast.sync.success"),type:"success"})}catch(s){this.$showError(s,this.$locale.baseText("settings.ldap.synchronizationError"))}finally{this.loadingDryRun=!1,await this.reloadLdapSynchronizations()}},async onLiveRunClick(){this.loadingLiveRun=!0;try{await this.settingsStore.runLdapSync({type:"live"}),this.$showToast({title:this.$locale.baseText("settings.ldap.runSync.title"),message:this.$locale.baseText("settings.ldap.toast.sync.success"),type:"success"})}catch(s){this.$showError(s,this.$locale.baseText("settings.ldap.synchronizationError"))}finally{this.loadingLiveRun=!1,await this.reloadLdapSynchronizations()}},async getLdapConfig(){try{this.adConfig=await this.settingsStore.getLdapConfig(),this.loginEnabled=this.adConfig.loginEnabled,this.syncEnabled=this.adConfig.synchronizationEnabled;const s=n=>n.loginEnabled===!0,e=n=>n.synchronizationEnabled===!0&&n.loginEnabled===!0,t=n=>n.bindingType==="admin"&&n.loginEnabled===!0;this.formInputs=[{name:"loginEnabled",initialValue:this.adConfig.loginEnabled,properties:{type:"toggle",label:this.$locale.baseText("settings.ldap.form.loginEnabled.label"),tooltipText:this.$locale.baseText("settings.ldap.form.loginEnabled.tooltip"),required:!0}},{name:"loginLabel",initialValue:this.adConfig.loginLabel,properties:{label:this.$locale.baseText("settings.ldap.form.loginLabel.label"),required:!0,placeholder:this.$locale.baseText("settings.ldap.form.loginLabel.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.loginLabel.infoText")},shouldDisplay:s},{name:"serverAddress",initialValue:this.adConfig.connectionUrl,properties:{label:this.$locale.baseText("settings.ldap.form.serverAddress.label"),required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.serverAddress.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.serverAddress.infoText")},shouldDisplay:s},{name:"port",initialValue:this.adConfig.connectionPort,properties:{type:"number",label:this.$locale.baseText("settings.ldap.form.port.label"),capitalize:!0,infoText:this.$locale.baseText("settings.ldap.form.port.infoText")},shouldDisplay:s},{name:"connectionSecurity",initialValue:this.adConfig.connectionSecurity,properties:{type:"select",label:this.$locale.baseText("settings.ldap.form.connectionSecurity.label"),infoText:this.$locale.baseText("settings.ldap.form.connectionSecurity.infoText"),options:[{label:"None",value:"none"},{label:"TLS",value:"tls"},{label:"STARTTLS",value:"startTls"}],required:!0,capitalize:!0},shouldDisplay:s},{name:"allowUnauthorizedCerts",initialValue:this.adConfig.allowUnauthorizedCerts,properties:{type:"toggle",label:this.$locale.baseText("settings.ldap.form.allowUnauthorizedCerts.label"),required:!1},shouldDisplay(n){return n.connectionSecurity!=="none"&&n.loginEnabled===!0}},{name:"baseDn",initialValue:this.adConfig.baseDn,properties:{label:this.$locale.baseText("settings.ldap.form.baseDn.label"),required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.baseDn.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.baseDn.infoText")},shouldDisplay:s},{name:"bindingType",initialValue:"admin",properties:{type:"select",label:this.$locale.baseText("settings.ldap.form.bindingType.label"),infoText:this.$locale.baseText("settings.ldap.form.bindingType.infoText"),options:[{value:"admin",label:"Admin"},{value:"anonymous",label:"Anonymous"}]},shouldDisplay:s},{name:"adminDn",initialValue:this.adConfig.bindingAdminDn,properties:{label:this.$locale.baseText("settings.ldap.form.adminDn.label"),placeholder:this.$locale.baseText("settings.ldap.form.adminDn.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.adminDn.infoText"),capitalize:!0},shouldDisplay:t},{name:"adminPassword",initialValue:this.adConfig.bindingAdminPassword,properties:{label:this.$locale.baseText("settings.ldap.form.adminPassword.label"),type:"password",capitalize:!0,infoText:this.$locale.baseText("settings.ldap.form.adminPassword.infoText")},shouldDisplay:t},{name:"userFilter",initialValue:this.adConfig.userFilter,properties:{label:this.$locale.baseText("settings.ldap.form.userFilter.label"),type:"text",required:!1,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.userFilter.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.userFilter.infoText")},shouldDisplay:s},{name:"attributeMappingInfo",properties:{label:this.$locale.baseText("settings.ldap.form.attributeMappingInfo.label"),type:"info",labelSize:"large",labelAlignment:"left"},shouldDisplay:s},{name:"ldapId",initialValue:this.adConfig.ldapIdAttribute,properties:{label:this.$locale.baseText("settings.ldap.form.ldapId.label"),type:"text",required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.ldapId.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.ldapId.infoText")},shouldDisplay:s},{name:"loginId",initialValue:this.adConfig.loginIdAttribute,properties:{label:this.$locale.baseText("settings.ldap.form.loginId.label"),type:"text",autocomplete:"email",required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.loginId.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.loginId.infoText")},shouldDisplay:s},{name:"email",initialValue:this.adConfig.emailAttribute,properties:{label:this.$locale.baseText("settings.ldap.form.email.label"),type:"text",autocomplete:"email",required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.email.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.email.infoText")},shouldDisplay:s},{name:"firstName",initialValue:this.adConfig.firstNameAttribute,properties:{label:this.$locale.baseText("settings.ldap.form.firstName.label"),type:"text",autocomplete:"email",required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.firstName.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.firstName.infoText")},shouldDisplay:s},{name:"lastName",initialValue:this.adConfig.lastNameAttribute,properties:{label:this.$locale.baseText("settings.ldap.form.lastName.label"),type:"text",autocomplete:"email",required:!0,capitalize:!0,placeholder:this.$locale.baseText("settings.ldap.form.lastName.placeholder"),infoText:this.$locale.baseText("settings.ldap.form.lastName.infoText")},shouldDisplay:s},{name:"synchronizationEnabled",initialValue:this.adConfig.synchronizationEnabled,properties:{type:"toggle",label:this.$locale.baseText("settings.ldap.form.synchronizationEnabled.label"),tooltipText:this.$locale.baseText("settings.ldap.form.synchronizationEnabled.tooltip"),required:!0},shouldDisplay:s},{name:"synchronizationInterval",initialValue:this.adConfig.synchronizationInterval,properties:{type:"number",label:this.$locale.baseText("settings.ldap.form.synchronizationInterval.label"),infoText:this.$locale.baseText("settings.ldap.form.synchronizationInterval.infoText")},shouldDisplay:e},{name:"pageSize",initialValue:this.adConfig.searchPageSize,properties:{type:"number",label:this.$locale.baseText("settings.ldap.form.pageSize.label"),infoText:this.$locale.baseText("settings.ldap.form.pageSize.infoText")},shouldDisplay:e},{name:"searchTimeout",initialValue:this.adConfig.searchTimeout,properties:{type:"number",label:this.$locale.baseText("settings.ldap.form.searchTimeout.label"),infoText:this.$locale.baseText("settings.ldap.form.searchTimeout.infoText")},shouldDisplay:e}]}catch(s){this.$showError(s,this.$locale.baseText("settings.ldap.configurationError"))}},async getLdapSynchronizations(s){try{this.loadingTable=!0;const e=await this.settingsStore.getLdapSynchronizations({page:this.page});e.length!==0?(this.dataTable.push(...e.map(this.syncDataMapper)),this.page+=1,s.loaded()):s.complete(),this.loadingTable=!1}catch(e){this.$showError(e,this.$locale.baseText("settings.ldap.synchronizationError"))}},async reloadLdapSynchronizations(){try{this.page=0,this.tableKey+=1,this.dataTable=[]}catch(s){this.$showError(s,this.$locale.baseText("settings.ldap.synchronizationError"))}}}}),mA="_container_17k3n_1",gA="_syncTable_17k3n_5",_A="_header_17k3n_9",vA="_enableFeatureContainer_17k3n_18",wA="_sectionHeader_17k3n_32",yA="_settingsForm_17k3n_36",bA="_docsInfoTip_17k3n_40",xA={container:mA,syncTable:gA,header:_A,enableFeatureContainer:vA,sectionHeader:wA,settingsForm:yA,docsInfoTip:bA};var TA=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.isLDAPFeatureEnabled?t("div",[t("div",{class:e.$style.container},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("settings.ldap"))+" ")])],1),t("div",{class:e.$style.docsInfoTip},[t("n8n-info-tip",{attrs:{theme:"info",type:"note"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("settings.ldap.infoTip"))}})]],2)],1),t("div",{class:e.$style.settingsForm},[e.formInputs?t("n8n-form-inputs",{ref:"ldapConfigForm",attrs:{inputs:e.formInputs,eventBus:e.formBus,columnView:!0,verticalSpacing:"l"},on:{input:e.onInput,ready:e.onReadyToSubmit,submit:e.onSubmit}}):e._e()],1),t("div",[e.loginEnabled?t("n8n-button",{staticClass:"mr-s",attrs:{label:e.loadingTestConnection?e.$locale.baseText("settings.ldap.testingConnection"):e.$locale.baseText("settings.ldap.testConnection"),size:"large",disabled:e.hasAnyChanges||!e.readyToSubmit,loading:e.loadingTestConnection},on:{click:e.onTestConnectionClick}}):e._e(),t("n8n-button",{attrs:{label:e.$locale.baseText("settings.ldap.save"),size:"large",disabled:!e.hasAnyChanges||!e.readyToSubmit},on:{click:e.onSaveClick}})],1)]),e.loginEnabled?t("div",[t("n8n-heading",{staticClass:"mb-xl mt-3xl",attrs:{tag:"h1",size:"medium"}},[e._v(e._s(e.$locale.baseText("settings.ldap.section.synchronization.title")))]),t("div",{class:e.$style.syncTable},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{border:!0,stripe:!0,data:e.dataTable,"cell-style":e.cellClassStyle,height:"250"},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v(e._s(e.$locale.baseText("settings.ldap.synchronizationTable.empty.message")))]},proxy:!0},{key:"append",fn:function(){return[t("infinite-loading",{attrs:{"force-use-infinite-wrapper":".el-table__body-wrapper"},on:{infinite:e.getLdapSynchronizations}})]},proxy:!0}],null,!1,1868578633)},[t("el-table-column",{attrs:{prop:"status",label:e.$locale.baseText("settings.ldap.synchronizationTable.column.status")}}),t("el-table-column",{attrs:{prop:"endedAt",label:e.$locale.baseText("settings.ldap.synchronizationTable.column.endedAt")}}),t("el-table-column",{attrs:{prop:"runMode",label:e.$locale.baseText("settings.ldap.synchronizationTable.column.runMode")}}),t("el-table-column",{attrs:{prop:"runTime",label:e.$locale.baseText("settings.ldap.synchronizationTable.column.runTime")}}),t("el-table-column",{attrs:{prop:"details",label:e.$locale.baseText("settings.ldap.synchronizationTable.column.details")}})],1)],1),t("div",{staticClass:"pb-3xl"},[t("n8n-button",{staticClass:"mr-s",attrs:{label:e.$locale.baseText("settings.ldap.dryRun"),type:"secondary",size:"large",disabled:e.hasAnyChanges||!e.readyToSubmit,loading:e.loadingDryRun},on:{click:e.onDryRunClick}}),t("n8n-button",{attrs:{label:e.$locale.baseText("settings.ldap.synchronizeNow"),size:"large",disabled:e.hasAnyChanges||!e.readyToSubmit,loading:e.loadingLiveRun},on:{click:e.onLiveRunClick}})],1)],1):e._e()]):t("div",[t("div",{class:[e.$style.header,"mb-2xl"]},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("settings.ldap"))+" ")])],1),t("n8n-info-tip",{staticClass:"mb-l",attrs:{type:"note",theme:"info-light",tooltipPlacement:"right"}},[e._v(" "+e._s(e.$locale.baseText("settings.ldap.note"))+" ")]),t("n8n-action-box",{attrs:{description:e.$locale.baseText("settings.ldap.disabled.description"),buttonText:e.$locale.baseText("settings.ldap.disabled.buttonText")},on:{click:e.goToUpgrade},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",[e._v(e._s(e.$locale.baseText("settings.ldap.disabled.title")))])]},proxy:!0}],null,!1,1850411914)})],1)},kA=[];const ka={$style:xA};function SA(s){for(var e in ka)this[e]=ka[e]}var $A=p(fA,TA,kA,!1,SA,null,null,null);const EA=$A.exports,CA=x(D).extend({name:"SettingsPersonalView",data(){return{hasAnyChanges:!1,formInputs:null,formBus:q(),readyToSubmit:!1}},mounted(){var s,e,t;this.formInputs=[{name:"firstName",initialValue:(s=this.currentUser)==null?void 0:s.firstName,properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0,disabled:this.isLDAPFeatureEnabled&&this.signInWithLdap}},{name:"lastName",initialValue:(e=this.currentUser)==null?void 0:e.lastName,properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0,disabled:this.isLDAPFeatureEnabled&&this.signInWithLdap}},{name:"email",initialValue:(t=this.currentUser)==null?void 0:t.email,properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0,disabled:this.isLDAPFeatureEnabled&&this.signInWithLdap||this.signInWithSaml}}]},computed:{...b(N,z,P),currentUser(){return this.usersStore.currentUser},signInWithLdap(){var s;return((s=this.currentUser)==null?void 0:s.signInType)==="ldap"},isLDAPFeatureEnabled(){return this.settingsStore.settings.enterprise.ldap===!0},signInWithSaml(){return this.settingsStore.isSamlLoginEnabled&&this.settingsStore.isDefaultAuthenticationSaml}},methods:{onInput(){this.hasAnyChanges=!0},onReadyToSubmit(s){this.readyToSubmit=s},async onSubmit(s){if(!(!this.hasAnyChanges||!this.usersStore.currentUserId))try{await this.usersStore.updateUser({id:this.usersStore.currentUserId,firstName:s.firstName,lastName:s.lastName,email:s.email}),this.$showToast({title:this.$locale.baseText("settings.personal.personalSettingsUpdated"),message:"",type:"success"}),this.hasAnyChanges=!1}catch(e){this.$showError(e,this.$locale.baseText("settings.personal.personalSettingsUpdatedError"))}},onSaveClick(){this.formBus.emit("submit")},openPasswordModal(){this.uiStore.openModal(Is)}}}),NA="_container_e57u2_1",IA="_header_e57u2_8",DA="_user_e57u2_17",AA="_username_e57u2_27",PA="_sectionHeader_e57u2_39",OA={container:NA,header:IA,user:DA,username:AA,sectionHeader:PA};var MA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container,attrs:{"data-test-id":"personal-settings-container"}},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(e.$locale.baseText("settings.personal.personalSettings")))]),t("div",{staticClass:"ph-no-capture",class:e.$style.user},[t("span",{class:e.$style.username,attrs:{"data-test-id":"current-user-name"}},[t("n8n-text",{attrs:{color:"text-light"}},[e._v(e._s(e.currentUser.fullName))])],1),t("n8n-avatar",{attrs:{firstName:e.currentUser.firstName,lastName:e.currentUser.lastName,size:"large"}})],1)],1),t("div",[t("div",{class:e.$style.sectionHeader},[t("n8n-heading",{attrs:{size:"large"}},[e._v(e._s(e.$locale.baseText("settings.personal.basicInformation")))])],1),t("div",{attrs:{"data-test-id":"personal-data-form"}},[e.formInputs?t("n8n-form-inputs",{attrs:{inputs:e.formInputs,eventBus:e.formBus},on:{input:e.onInput,ready:e.onReadyToSubmit,submit:e.onSubmit}}):e._e()],1)]),!e.signInWithLdap&&!e.signInWithSaml?t("div",[t("div",{class:e.$style.sectionHeader},[t("n8n-heading",{attrs:{size:"large"}},[e._v(e._s(e.$locale.baseText("settings.personal.security")))])],1),t("div",[t("n8n-input-label",{attrs:{label:e.$locale.baseText("auth.password")}},[t("n8n-link",{attrs:{"data-test-id":"change-password-link"},on:{click:e.openPasswordModal}},[e._v(e._s(e.$locale.baseText("auth.changePassword")))])],1)],1)]):e._e(),t("div",[t("n8n-button",{attrs:{float:"right",label:e.$locale.baseText("settings.personal.save"),size:"large",disabled:!e.hasAnyChanges||!e.readyToSubmit,"data-test-id":"save-settings-button"},on:{click:e.onSaveClick}})],1)])},RA=[];const Sa={$style:OA};function LA(s){for(var e in Sa)this[e]=Sa[e]}var WA=p(CA,MA,RA,!1,LA,null,null,null);const BA=WA.exports,UA=x(D).extend({name:"PageAlert",props:{message:{type:String,required:!0},popupClass:{type:String}},data(){return{alert:null}},mounted(){this.alert=this.$showAlert({message:Ut(this.message),type:"warning",duration:0,showClose:!0,dangerouslyUseHTMLString:!0,customClass:this.popupClass||""})},beforeDestroy(){this.alert&&this.alert.close()}});var FA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("fragment")},VA=[],zA=p(UA,FA,VA,!1,null,null,null,null);const jA=zA.exports,KA=x(D,Je).extend({name:"SettingsUsersView",components:{PageAlert:jA},async mounted(){this.usersStore.showUMSetupWarning||await this.usersStore.fetchUsers()},computed:{...b(P,N,z,Ye,xt),isSharingEnabled(){return this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)},usersListActions(){return[{label:this.$locale.baseText("settings.users.actions.copyInviteLink"),value:"copyInviteLink",guard:s=>!s.firstName&&!!s.inviteAcceptUrl},{label:this.$locale.baseText("settings.users.actions.reinvite"),value:"reinvite",guard:s=>!s.firstName&&this.settingsStore.isSmtpSetup},{label:this.$locale.baseText("settings.users.actions.delete"),value:"delete"}]}},methods:{redirectToSetup(){this.$router.push({name:d.SETUP})},onInvite(){this.uiStore.openModal(As)},async onDelete(s){this.usersStore.getUserById(s)&&this.uiStore.openDeleteUserModal(s)},async onReinvite(s){const e=this.usersStore.getUserById(s);if(e)try{await this.usersStore.reinviteUser({id:e.id}),this.$showToast({type:"success",title:this.$locale.baseText("settings.users.inviteResent"),message:this.$locale.baseText("settings.users.emailSentTo",{interpolate:{email:e.email||""}})})}catch(t){this.$showError(t,this.$locale.baseText("settings.users.userReinviteError"))}},async onCopyInviteLink(s){const e=this.usersStore.getUserById(s);e!=null&&e.inviteAcceptUrl&&(this.copyToClipboard(e.inviteAcceptUrl),this.$showToast({type:"success",title:this.$locale.baseText("settings.users.inviteUrlCreated"),message:this.$locale.baseText("settings.users.inviteUrlCreated.message")}))},goToUpgrade(){this.uiStore.goToUpgrade("users","upgrade-users")}}}),HA="_container_1qzsb_1",GA="_usersContainer_1qzsb_9",qA="_buttonContainer_1qzsb_13",YA="_setupInfoContainer_1qzsb_19",XA="_alert_1qzsb_23",JA={container:HA,usersContainer:GA,buttonContainer:qA,setupInfoContainer:YA,alert:XA};var QA=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(e.$locale.baseText("settings.users")))]),e.usersStore.showUMSetupWarning?e._e():t("div",{class:e.$style.buttonContainer},[t("n8n-tooltip",{attrs:{disabled:!e.ssoStore.isSamlLoginEnabled},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",[e._v(" "+e._s(e.$locale.baseText("settings.users.invite.tooltip"))+" ")])]},proxy:!0}],null,!1,736393020)},[t("div",[t("n8n-button",{attrs:{disabled:e.ssoStore.isSamlLoginEnabled,label:e.$locale.baseText("settings.users.invite"),size:"large","data-test-id":"settings-users-invite-button"},on:{click:e.onInvite}})],1)])],1)],1),e.settingsStore.isUserManagementEnabled?e.usersStore.showUMSetupWarning?t("div",{class:e.$style.setupInfoContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("settings.users.setupToInviteUsers"),buttonText:e.$locale.baseText("settings.users.setupMyAccount"),description:`${e.isSharingEnabled?"":e.$locale.baseText("settings.users.setupToInviteUsersInfo")}`},on:{click:e.redirectToSetup}})],1):t("div",{class:e.$style.usersContainer},[t("n8n-users-list",{attrs:{actions:e.usersListActions,users:e.usersStore.allUsers,currentUserId:e.usersStore.currentUserId},on:{delete:e.onDelete,reinvite:e.onReinvite,copyInviteLink:e.onCopyInviteLink}})],1):t("div",{class:e.$style.setupInfoContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.users.settings.unavailable.title),description:e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.users.settings.unavailable.description),buttonText:e.$locale.baseText(e.uiStore.contextBasedTranslationKeys.users.settings.unavailable.button)},on:{click:e.goToUpgrade}})],1)])},ZA=[];const $a={$style:JA};function eP(s){for(var e in $a)this[e]=$a[e]}var tP=p(KA,QA,ZA,!1,eP,null,null,null);const sP=tP.exports,nP=x(D).extend({name:"CommunityPackageCard",props:{communityPackage:{type:Object},loading:{type:Boolean,default:!1}},data(){return{packageActions:[{label:this.$locale.baseText("settings.communityNodes.viewDocsAction.label"),value:We.VIEW_DOCS,type:"external-link"},{label:this.$locale.baseText("settings.communityNodes.uninstallAction.label"),value:We.UNINSTALL}]}},computed:{...b(N)},methods:{async onAction(s){switch(s){case We.VIEW_DOCS:this.$telemetry.track("user clicked to browse the cnr package documentation",{package_name:this.communityPackage.packageName,package_version:this.communityPackage.installedVersion}),window.open(`${Ri}${this.communityPackage.packageName}`,"_blank");break;case We.UNINSTALL:this.uiStore.openCommunityPackageUninstallConfirmModal(this.communityPackage.packageName);break}},onUpdateClick(){this.uiStore.openCommunityPackageUpdateConfirmModal(this.communityPackage.packageName)}}}),oP="_cardContainer_1cg0i_1",aP="_packageCard_1cg0i_9",iP="_cardSkeleton_1cg0i_10",rP="_loader_1cg0i_24",lP="_cardInfoContainer_1cg0i_35",cP="_cardTitle_1cg0i_40",dP="_cardSubtitle_1cg0i_47",uP="_cardControlsContainer_1cg0i_52",hP="_cardActions_1cg0i_58",pP={cardContainer:oP,packageCard:aP,cardSkeleton:iP,loader:rP,cardInfoContainer:lP,cardTitle:cP,cardSubtitle:dP,cardControlsContainer:uP,cardActions:hP};var fP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.cardContainer},[e.loading?t("div",{class:e.$style.cardSkeleton},[t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}}),t("n8n-loading",{class:e.$style.loader,attrs:{variant:"p",rows:1}})],1):t("div",{class:e.$style.packageCard},[t("div",{class:e.$style.cardInfoContainer},[t("div",{class:e.$style.cardTitle},[t("n8n-text",{attrs:{bold:!0,size:"large"}},[e._v(e._s(e.communityPackage.packageName))])],1),t("div",{class:e.$style.cardSubtitle},[t("n8n-text",{attrs:{bold:!0,size:"small",color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.packageNodes.label",{adjustToNumber:e.communityPackage.installedNodes.length}))+":Â  ")]),t("n8n-text",{attrs:{size:"small",color:"text-light"}},e._l(e.communityPackage.installedNodes,function(n,o){return t("span",{key:n.name},[e._v(" "+e._s(n.name)),o!=e.communityPackage.installedNodes.length-1?t("span",[e._v(",")]):e._e()])}),0)],1)]),t("div",{class:e.$style.cardControlsContainer},[t("n8n-text",{attrs:{bold:!0,size:"large",color:"text-light"}},[e._v(" v"+e._s(e.communityPackage.installedVersion)+" ")]),e.communityPackage.failedLoading===!0?t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.failedToLoad.tooltip"))+" ")])]},proxy:!0}],null,!1,959872926)},[t("n8n-icon",{attrs:{icon:"exclamation-triangle",color:"danger",size:"large"}})],1):e.communityPackage.updateAvailable?t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.updateAvailable.tooltip"))+" ")])]},proxy:!0}])},[t("n8n-button",{attrs:{type:"outline",label:"Update"},on:{click:e.onUpdateClick}})],1):t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[e._v(" "+e._s(e.$locale.baseText("settings.communityNodes.upToDate.tooltip"))+" ")])]},proxy:!0}])},[t("n8n-icon",{attrs:{icon:"check-circle",color:"text-light",size:"large"}})],1),t("div",{class:e.$style.cardActions},[t("n8n-action-toggle",{attrs:{actions:e.packageActions},on:{action:e.onAction}})],1)],1)])])},mP=[];const Ea={$style:pP};function gP(s){for(var e in Ea)this[e]=Ea[e]}var _P=p(nP,fP,mP,!1,gP,null,null,null);const vP=_P.exports,wP=31,yP=x(D,fr).extend({name:"SettingsCommunityNodesView",components:{CommunityPackageCard:vP},data(){return{loading:!1}},async mounted(){this.pushConnect();try{this.$data.loading=!0,await this.communityNodesStore.fetchInstalledPackages();const s=this.communityNodesStore.getInstalledPackages,e=s.filter(t=>t.updateAvailable);this.$telemetry.track("user viewed cnr settings page",{num_of_packages_installed:s.length,installed_packages:s.map(t=>({package_name:t.packageName,package_version:t.installedVersion,package_nodes:t.installedNodes.map(n=>`${n.name}-v${n.latestVersion}`),is_update_available:t.updateAvailable!==void 0})),packages_to_update:e.map(t=>({package_name:t.packageName,package_version_current:t.installedVersion,package_version_available:t.updateAvailable})),number_of_updates_available:e.length})}catch(s){this.$showError(s,this.$locale.baseText("settings.communityNodes.fetchError.title"),this.$locale.baseText("settings.communityNodes.fetchError.message"))}finally{this.$data.loading=!1}try{await this.communityNodesStore.fetchAvailableCommunityPackageCount()}finally{this.$data.loading=!1}},beforeDestroy(){this.pushDisconnect()},computed:{...b(Cs,P,N),getEmptyStateDescription(){const s=this.communityNodesStore.availablePackageCount;return this.settingsStore.isDesktopDeployment?this.$locale.baseText("contextual.communityNodes.unavailable.description.desktop"):s<wP?this.$locale.baseText("settings.communityNodes.empty.description.no-packages",{interpolate:{docURL:nt}}):this.$locale.baseText("settings.communityNodes.empty.description",{interpolate:{docURL:nt,count:(Math.floor(s/10)*10).toString()}})},getEmptyStateButtonText(){return this.settingsStore.isDesktopDeployment?this.$locale.baseText("contextual.communityNodes.unavailable.button.desktop"):this.shouldShowInstallButton?this.$locale.baseText("settings.communityNodes.empty.installPackageLabel"):""},shouldShowInstallButton(){return this.settingsStore.isDesktopDeployment||this.settingsStore.isNpmAvailable},actionBoxConfig(){return this.settingsStore.isNpmAvailable?this.settingsStore.isQueueModeEnabled?{calloutText:this.$locale.baseText("settings.communityNodes.queueMode.warning",{interpolate:{docURL:nt}}),calloutTheme:"warning",hideButton:!0}:{calloutText:"",calloutTheme:"",hideButton:!1}:{calloutText:this.$locale.baseText("settings.communityNodes.npmUnavailable.warning",{interpolate:{npmUrl:Wh}}),calloutTheme:"warning",hideButton:!0}}},methods:{onClickEmptyStateButton(){if(this.settingsStore.isDesktopDeployment)return this.goToUpgrade();this.openInstallModal()},goToUpgrade(){const s=`${this.$locale.baseText("contextual.upgradeLinkUrl.desktop")}&utm_campaign=upgrade-community-nodes&selfHosted=true`;window.open(s,"_blank")},openInstallModal(){const s={is_empty_state:this.communityNodesStore.getInstalledPackages.length===0};this.$telemetry.track("user clicked cnr install button",s),this.$externalHooks().run("settingsCommunityNodesView.openInstallModal",s),this.uiStore.openModal(Ns)}}}),bP="_container_18kse_1",xP="_headingContainer_18kse_9",TP="_loadingContainer_18kse_14",kP="_actionBoxContainer_18kse_19",SP="_cardsContainer_18kse_23",$P={container:bP,headingContainer:xP,loadingContainer:TP,actionBoxContainer:kP,cardsContainer:SP};var EP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("div",{class:e.$style.headingContainer},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(e.$locale.baseText("settings.communityNodes")))]),!e.settingsStore.isQueueModeEnabled&&e.communityNodesStore.getInstalledPackages.length>0&&!e.loading?t("n8n-button",{attrs:{label:e.$locale.baseText("settings.communityNodes.installModal.installButton.label"),size:"large"},on:{click:e.openInstallModal}}):e._e()],1),e.settingsStore.isQueueModeEnabled?t("div",{class:e.$style.actionBoxContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("settings.communityNodes.empty.title"),description:e.getEmptyStateDescription,calloutText:e.actionBoxConfig.calloutText,calloutTheme:e.actionBoxConfig.calloutTheme}})],1):e.loading?t("div",{class:e.$style.cardsContainer},e._l(2,function(n){return t("community-package-card",{key:"index-"+n,attrs:{loading:!0}})}),1):e.communityNodesStore.getInstalledPackages.length===0?t("div",{class:e.$style.actionBoxContainer},[t("n8n-action-box",{attrs:{heading:e.$locale.baseText("settings.communityNodes.empty.title"),description:e.getEmptyStateDescription,buttonText:e.getEmptyStateButtonText,calloutText:e.actionBoxConfig.calloutText,calloutTheme:e.actionBoxConfig.calloutTheme},on:{click:e.onClickEmptyStateButton}})],1):t("div",{class:e.$style.cardsContainer},e._l(e.communityNodesStore.getInstalledPackages,function(n){return t("community-package-card",{key:n.packageName,attrs:{communityPackage:n}})}),1)])},CP=[];const Ca={$style:$P};function NP(s){for(var e in Ca)this[e]=Ca[e]}var IP=p(yP,EP,CP,!1,NP,null,null,null);const DP=IP.exports,AP=x(D).extend({name:"SettingsApiView",components:{CopyInput:Zt},data(){return{loading:!1,mounted:!1,apiKey:"",swaggerUIEnabled:!1,apiDocsURL:""}},mounted(){this.getApiKey();const s=this.rootStore.baseUrl,e=this.settingsStore.publicApiPath,t=this.settingsStore.publicApiLatestVersion;this.swaggerUIEnabled=this.settingsStore.isSwaggerUIEnabled,this.apiDocsURL=this.swaggerUIEnabled?`${s}${e}/v${t}/docs`:`https://${ws}/api/api-reference/`},computed:{...b(Z,P,z),currentUser(){return this.usersStore.currentUser}},methods:{async showDeleteModal(){await this.confirmMessage(this.$locale.baseText("settings.api.delete.description"),this.$locale.baseText("settings.api.delete.title"),null,this.$locale.baseText("settings.api.delete.button"),this.$locale.baseText("generic.cancel"))&&await this.deleteApiKey()},async getApiKey(){try{this.apiKey=await this.settingsStore.getApiKey()||""}catch(s){this.$showError(s,this.$locale.baseText("settings.api.view.error"))}finally{this.mounted=!0}},async createApiKey(){this.loading=!0;try{this.apiKey=await this.settingsStore.createApiKey()||""}catch(s){this.$showError(s,this.$locale.baseText("settings.api.create.error"))}finally{this.loading=!1,this.$telemetry.track("User clicked create API key button")}},async deleteApiKey(){try{await this.settingsStore.deleteApiKey(),this.$showMessage({title:this.$locale.baseText("settings.api.delete.toast"),type:"success"}),this.apiKey=""}catch(s){this.$showError(s,this.$locale.baseText("settings.api.delete.error"))}finally{this.$telemetry.track("User clicked delete API key button")}},onCopy(){this.$telemetry.track("User clicked copy API key button")}}}),PP="_container_1xc1f_1",OP="_header_1xc1f_5",MP="_card_1xc1f_14",RP="_hint_1xc1f_25",LP={container:PP,header:OP,card:MP,delete:"_delete_1xc1f_18",hint:RP};var WP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.container},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("settings.api"))+" "),t("span",{style:{fontSize:"var(--font-size-s)",color:"var(--color-text-light)"}},[e._v(" ("+e._s(e.$locale.baseText("beta"))+") ")])])],1),e.apiKey?t("div",[t("p",{staticClass:"mb-s"},[t("n8n-info-tip",{attrs:{bold:!1}},[t("i18n",{attrs:{path:"settings.api.view.info",tag:"span"},scopedSlots:e._u([{key:"apiAction",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/api",target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("settings.api.view.info.api"))}})]},proxy:!0},{key:"webhookAction",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.webhook/",target:"_blank"},domProps:{textContent:e._s(e.$locale.baseText("settings.api.view.info.webhook"))}})]},proxy:!0}],null,!1,2486472501)})],1)],1),t("n8n-card",{staticClass:"mb-4xs",class:e.$style.card},[t("span",{class:e.$style.delete},[t("n8n-link",{attrs:{bold:!0},on:{click:e.showDeleteModal}},[e._v(" "+e._s(e.$locale.baseText("generic.delete"))+" ")])],1),t("div",{staticClass:"ph-no-capture"},[t("CopyInput",{attrs:{label:e.$locale.baseText("settings.api.view.myKey"),value:e.apiKey,"copy-button-text":e.$locale.baseText("generic.clickToCopy"),"toast-title":e.$locale.baseText("settings.api.view.copy.toast")},on:{copy:e.onCopy}})],1)]),t("div",{class:e.$style.hint},[t("n8n-text",{attrs:{size:"small"}},[e._v(" "+e._s(e.$locale.baseText(`settings.api.view.${e.swaggerUIEnabled?"tryapi":"more-details"}`))+" ")]),t("n8n-link",{attrs:{to:e.apiDocsURL,newWindow:!0,size:"small"}},[e._v(" "+e._s(e.$locale.baseText(`settings.api.view.${e.swaggerUIEnabled?"apiPlayground":"external-docs"}`))+" ")])],1)],1):e.mounted?t("n8n-action-box",{attrs:{buttonText:e.$locale.baseText(e.loading?"settings.api.create.button.loading":"settings.api.create.button"),description:e.$locale.baseText("settings.api.create.description")},on:{click:e.createApiKey}}):e._e()],1)},BP=[];const Na={$style:LP};function UP(s){for(var e in Na)this[e]=Na[e]}var FP=p(AP,WP,BP,!1,UP,null,null,null);const VP=FP.exports,zP=C({name:"PageViewLayout",data(){return{loading:!1}},computed:{...b(N)}}),jP="_wrapper_1rn21_1",KP="_container_1rn21_17",HP="_aside_1rn21_26",GP="_content_1rn21_40",qP={wrapper:jP,container:KP,aside:HP,content:GP};var YP=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:[e.$style.wrapper,!this.uiStore.sidebarMenuCollapsed&&e.$style.expandedSidebar]},[t("div",{class:e.$style.container},[e.$slots.aside?t("aside",{class:e.$style.aside},[e._t("aside")],2):e._e(),t("main",{class:e.$style.content},[e._t("default")],2)])])},XP=[];const Ia={$style:qP};function JP(s){for(var e in Ia)this[e]=Ia[e]}var QP=p(zP,YP,XP,!1,JP,null,null,null);const os=QP.exports,Pt={OPEN:"open",DELETE:"delete"},ZP=x(D).extend({data(){return{EnterpriseEditionFeature:te,nodeParameters:{}}},components:{},props:{eventBus:{type:Object},destination:{type:Object,required:!0,default:ae(ze)},isInstanceOwner:Boolean},mounted(){var s;this.nodeParameters=Object.assign(ae(ze),this.destination),(s=this.eventBus)==null||s.on("destinationWasSaved",this.onDestinationWasSaved)},destroyed(){var s;(s=this.eventBus)==null||s.off("destinationWasSaved",this.onDestinationWasSaved)},computed:{...b(Yt),actions(){const s=[{label:this.$locale.baseText("workflows.item.open"),value:Pt.OPEN}];return this.isInstanceOwner&&s.push({label:this.$locale.baseText("workflows.item.delete"),value:Pt.DELETE}),s},typeLabelName(){return`settings.log-streaming.${this.destination.__type}`}},methods:{onDestinationWasSaved(){this.logStreamingStore.getDestination(this.destination.id)&&(this.nodeParameters=Object.assign(ae(ze),this.destination))},async onClick(s){s&&s.target&&"className"in s.target&&s.target.className==="el-switch__core"?s.stopPropagation():this.$emit("edit",this.destination.id)},onEnabledSwitched(s,e){this.nodeParameters.enabled=s,this.saveDestination()},async saveDestination(){await this.logStreamingStore.saveDestination(this.nodeParameters)},async onAction(s){if(s===Pt.OPEN)this.$emit("edit",this.destination.id);else if(s===Pt.DELETE){if(await this.confirmMessage(this.$locale.baseText("settings.log-streaming.destinationDelete.message",{interpolate:{destinationName:this.destination.label}}),this.$locale.baseText("settings.log-streaming.destinationDelete.headline"),"warning",this.$locale.baseText("settings.log-streaming.destinationDelete.confirmButtonText"),this.$locale.baseText("settings.log-streaming.destinationDelete.cancelButtonText"))===!1)return;this.$emit("remove",this.destination.id)}}}}),eO="_cardLink_1yliz_1",tO="_activeStatusText_1yliz_9",sO="_cardHeading_1yliz_17",nO="_cardDescription_1yliz_22",oO="_cardActions_1yliz_28",aO={cardLink:eO,activeStatusText:tO,cardHeading:sO,cardDescription:nO,cardActions:oO};var iO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",{class:e.$style.cardLink,attrs:{"data-test-id":"destination-card"},on:{click:e.onClick},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",[t("n8n-heading",{staticClass:"ph-no-capture",class:e.$style.cardHeading,attrs:{tag:"h2",bold:""}},[e._v(" "+e._s(e.destination.label)+" ")]),t("div",{class:e.$style.cardDescription},[t("n8n-text",{attrs:{color:"text-light",size:"small"}},[t("span",[e._v(e._s(e.$locale.baseText(e.typeLabelName)))])])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[t("div",{class:e.$style.cardActions},[t("div",{class:e.$style.activeStatusText,attrs:{"data-test-id":"destination-activator-status"}},[e.nodeParameters.enabled?t("n8n-text",{attrs:{color:"success",size:"small",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflowActivator.active"))+" ")]):t("n8n-text",{attrs:{color:"text-base",size:"small",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflowActivator.inactive"))+" ")])],1),t("el-switch",{staticClass:"mr-s",attrs:{disabled:!e.isInstanceOwner,value:e.nodeParameters.enabled,title:e.nodeParameters.enabled?e.$locale.baseText("workflowActivator.deactivateWorkflow"):e.$locale.baseText("workflowActivator.activateWorkflow"),"active-color":"#13ce66","inactive-color":"#8899AA","element-loading-spinner":"el-icon-loading","data-test-id":"workflow-activate-switch"},on:{change:function(n){return e.onEnabledSwitched(n,e.destination.id)}}}),t("n8n-action-toggle",{attrs:{actions:e.actions,theme:"dark"},on:{action:e.onAction}})],1)]},proxy:!0}])})},rO=[];const Da={$style:aO};function lO(s){for(var e in Da)this[e]=Da[e]}var cO=p(ZP,iO,rO,!1,lO,null,null,null);const dO=cO.exports,uO=x().extend({name:"SettingsLogStreamingView",props:{},components:{PageViewLayout:os,EventDestinationCard:dO},data(){return{eventBus:q(),destinations:Array,disableLicense:!1,allDestinations:[],isInstanceOwner:!1}},async mounted(){var s,e;this.isLicensed&&(this.isInstanceOwner=((e=(s=this.usersStore.currentUser)==null?void 0:s.globalRole)==null?void 0:e.name)==="owner",await this.credentialsStore.fetchCredentialTypes(!1),await this.credentialsStore.fetchAllCredentials(),this.uiStore.nodeViewInitialized=!1,await this.getDestinationDataFromBackend(),this.logStreamingStore.$onAction(({name:t,after:n})=>{(t==="removeDestination"||t==="updateDestination")&&n(async()=>{this.$forceUpdate()})}),this.eventBus.on("destinationWasSaved",this.onDestinationWasSaved),this.eventBus.on("remove",this.onRemove),this.eventBus.on("closing",this.onBusClosing))},destroyed(){this.eventBus.off("destinationWasSaved",this.onDestinationWasSaved),this.eventBus.off("remove",this.onRemove),this.eventBus.off("closing",this.onBusClosing)},computed:{...b(P,Yt,B,N,z,be),sortedItemKeysByLabel(){var e,t;const s=[];for(const[n,o]of Object.entries(this.logStreamingStore.items))s.push({key:n,label:(t=(e=o.destination)==null?void 0:e.label)!=null?t:"Destination"});return s.sort((n,o)=>n.label.localeCompare(o.label))},environment(){return"production"},isLicensed(){return this.disableLicense===!0?!1:this.settingsStore.isEnterpriseFeatureEnabled(te.LogStreaming)}},methods:{onDestinationWasSaved(){this.$forceUpdate()},onBusClosing(){this.workflowsStore.removeAllNodes({setStateDirty:!1,removePinData:!0}),this.uiStore.stateIsDirty=!1},async getDestinationDataFromBackend(){this.logStreamingStore.clearEventNames(),this.logStreamingStore.clearDestinationItemTrees(),this.allDestinations=[];const s=await this.logStreamingStore.fetchEventNames();if(s)for(const t of s)this.logStreamingStore.addEventName(t);const e=await this.logStreamingStore.fetchDestinations();if(e)for(const t of e)this.logStreamingStore.addDestination(t),this.allDestinations.push(t);this.$forceUpdate()},goToUpgrade(){this.uiStore.goToUpgrade("log-streaming","upgrade-log-streaming")},storeHasItems(){return this.logStreamingStore.items&&Object.keys(this.logStreamingStore.items).length>0},async addDestination(){const s=ae(ze);s.id=Ne(),this.logStreamingStore.addDestination(s),this.uiStore.openModalWithData({name:vt,data:{destination:s,isNew:!0,eventBus:this.eventBus}})},async onRemove(s){if(!s)return;await this.logStreamingStore.deleteDestination(s);const e=this.workflowsStore.getNodeByName(s);e&&this.workflowsStore.removeNode(e)},async onEdit(s){if(!s)return;const e=this.logStreamingStore.getDestination(s);e&&this.uiStore.openModalWithData({name:vt,data:{destination:e,isNew:!1,eventBus:this.eventBus}})}}}),hO="_header_brzxt_1",pO="_destinationItem_brzxt_11",fO={header:hO,destinationItem:pO};var mO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{class:e.$style.header},[t("div",{staticClass:"mb-2xl"},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("settings.log-streaming.heading"))+" ")]),e.environment!=="production"?[t("strong",{staticClass:"ml-m"},[e._v("Disable License ("+e._s(e.environment)+")Â ")]),t("el-switch",{attrs:{size:"large","data-test-id":"disable-license-toggle"},model:{value:e.disableLicense,callback:function(n){e.disableLicense=n},expression:"disableLicense"}})]:e._e()],2)]),e.isLicensed?[t("div",{staticClass:"mb-l"},[t("n8n-info-tip",{attrs:{theme:"info",type:"note"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("settings.log-streaming.infoText"))}})]],2)],1),e.storeHasItems()?[e._l(e.sortedItemKeysByLabel,function(n){var o,a;return t("el-row",{key:n.key,class:e.$style.destinationItem,attrs:{gutter:10}},[(o=e.logStreamingStore.items[n.key])!=null&&o.destination?t("el-col",[t("event-destination-card",{attrs:{destination:(a=e.logStreamingStore.items[n.key])==null?void 0:a.destination,eventBus:e.eventBus,isInstanceOwner:e.isInstanceOwner},on:{remove:function(i){var r,l;return e.onRemove((l=(r=e.logStreamingStore.items[n.key])==null?void 0:r.destination)==null?void 0:l.id)},edit:function(i){var r,l;return e.onEdit((l=(r=e.logStreamingStore.items[n.key])==null?void 0:r.destination)==null?void 0:l.id)}}})],1):e._e()],1)}),t("div",{staticClass:"mt-m text-right"},[e.isInstanceOwner?t("n8n-button",{attrs:{size:"large"},on:{click:e.addDestination}},[e._v(" "+e._s(e.$locale.baseText("settings.log-streaming.add"))+" ")]):e._e()],1)]:[t("div",{attrs:{"data-test-id":"action-box-licensed"}},[t("n8n-action-box",{attrs:{buttonText:e.$locale.baseText("settings.log-streaming.add")},on:{click:e.addDestination},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("settings.log-streaming.addFirstTitle"))}})]},proxy:!0}],null,!1,376173190)})],1)]]:[e.$locale.baseText("settings.log-streaming.infoText")?t("div",{staticClass:"mb-l"},[t("n8n-info-tip",{attrs:{theme:"info",type:"note"}},[[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("settings.log-streaming.infoText"))}})]],2)],1):e._e(),t("div",{attrs:{"data-test-id":"action-box-unlicensed"}},[t("n8n-action-box",{attrs:{description:e.$locale.baseText("settings.log-streaming.actionBox.description"),buttonText:e.$locale.baseText("settings.log-streaming.actionBox.button")},on:{click:e.goToUpgrade},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("settings.log-streaming.actionBox.title"))}})]},proxy:!0}])})],1)]],2)},gO=[];const Aa={$style:fO};function _O(s){for(var e in Aa)this[e]=Aa[e]}var vO=p(uO,mO,gO,!1,_O,null,null,null);const wO=vO.exports,yO=C({name:"SettingsFakeDoorView",components:{FeatureComingSoon:Ji},props:{featureId:{type:String,required:!0}},computed:{...b(N),featureInfo(){return this.uiStore.getFakeDoorById(this.featureId)}},methods:{openLinkPage(){this.featureInfo&&window.open(this.featureInfo.linkURL,"_blank")}}}),bO="_header_fa9t3_1",xO={header:bO};var TO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("feature-coming-soon",{attrs:{featureId:e.featureId,showTitle:""}})},kO=[];const Pa={$style:xO};function SO(s){for(var e in Pa)this[e]=Pa[e]}var $O=p(yO,TO,kO,!1,SO,null,null,null);const EO=$O.exports,CO=x(D).extend({name:"SetupView",components:{AuthView:ct},async mounted(){const{credentials:s,workflows:e}=await this.usersStore.preOwnerSetup();this.credentialsCount=s,this.workflowsCount=e},data(){return{FORM_CONFIG:{title:this.$locale.baseText("auth.setup.setupOwner"),buttonText:this.$locale.baseText("auth.setup.next"),secondaryButtonText:this.$locale.baseText("auth.setup.skipSetupTemporarily"),inputs:[{name:"email",properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0}},{name:"firstName",properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",required:!0,validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"agree",properties:{label:this.$locale.baseText("auth.agreement.label"),type:"checkbox"}}]},loading:!1,workflowsCount:0,credentialsCount:0}},computed:{...b(be,P,N,z)},methods:{async confirmSetupOrGoBack(){if(this.workflowsCount===0&&this.credentialsCount===0)return!0;const s=this.workflowsCount>0?this.$locale.baseText("auth.setup.setupConfirmation.existingWorkflows",{adjustToNumber:this.workflowsCount}):"",e=this.credentialsCount>0?this.$locale.baseText("auth.setup.setupConfirmation.credentials",{adjustToNumber:this.credentialsCount}):"",t=s&&e?this.$locale.baseText("auth.setup.setupConfirmation.concatEntities",{interpolate:{workflows:s,credentials:e}}):s||e;return this.confirmMessage(this.$locale.baseText("auth.setup.confirmOwnerSetupMessage",{interpolate:{entities:t}}),this.$locale.baseText("auth.setup.confirmOwnerSetup"),null,this.$locale.baseText("auth.setup.createAccount"),this.$locale.baseText("auth.setup.goBack"))},async onSubmit(s){try{if(!await this.confirmSetupOrGoBack())return;const t=this.settingsStore.showSetupPage;if(this.loading=!0,await this.usersStore.createOwner(s),s.agree===!0)try{await this.uiStore.submitContactEmail(s.email.toString(),s.agree)}catch(n){}t?await this.$router.push({name:d.NEW_WORKFLOW}):await this.$router.push({name:d.USERS_SETTINGS})}catch(e){this.$showError(e,this.$locale.baseText("auth.setup.settingUpOwnerError"))}this.loading=!1},async showSkipConfirmation(){await this.confirmMessage(this.$locale.baseText("auth.setup.ownerAccountBenefits"),this.$locale.baseText("auth.setup.skipOwnerSetupQuestion"),null,this.$locale.baseText("auth.setup.skipSetup"),this.$locale.baseText("auth.setup.goBack"))&&this.onSkip()},onSkip(){this.usersStore.skipOwnerSetup(),this.$router.push({name:d.NEW_WORKFLOW})}}});var NO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.FORM_CONFIG,formLoading:e.loading,"data-test-id":"setup-form"},on:{submit:e.onSubmit,secondaryClick:e.showSkipConfirmation}})},IO=[],DO=p(CO,NO,IO,!1,null,null,null,null);const AO=DO.exports,PO=x(D).extend({name:"SigninView",components:{AuthView:ct},data(){return{FORM_CONFIG:{},loading:!1}},computed:{...b(z,P)},mounted(){let s=this.$locale.baseText("auth.email");const e=this.settingsStore.ldapLoginLabel,t=this.settingsStore.isLdapLoginEnabled;t&&e&&(s=e),this.FORM_CONFIG={title:this.$locale.baseText("auth.signin"),buttonText:this.$locale.baseText("auth.signin"),redirectText:this.$locale.baseText("forgotPassword"),inputs:[{name:"email",properties:{label:s,type:"email",required:!0,...!t&&{validationRules:[{name:"VALID_EMAIL"}]},showRequiredAsterisk:!1,validateOnBlur:!1,autocomplete:"email",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",required:!0,showRequiredAsterisk:!1,validateOnBlur:!1,autocomplete:"current-password",capitalize:!0}}]},(!this.settingsStore.isDesktopDeployment||this.settingsStore.isUserManagementEnabled)&&(this.FORM_CONFIG.redirectLink="/forgot-password")},methods:{async onSubmit(s){try{if(this.loading=!0,await this.usersStore.loginWithCreds(s),this.clearAllStickyNotifications(),this.loading=!1,typeof this.$route.query.redirect=="string"){const e=decodeURIComponent(this.$route.query.redirect);if(e.startsWith("/")){this.$router.push(e);return}}await this.$router.push({name:d.HOMEPAGE})}catch(e){this.$showError(e,this.$locale.baseText("auth.signin.error")),this.loading=!1}}}});var OO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.FORM_CONFIG,formLoading:e.loading,"with-sso":!0,"data-test-id":"signin-form"},on:{submit:e.onSubmit}})},MO=[],RO=p(PO,OO,MO,!1,null,null,null,null);const LO=RO.exports,WO=x(D).extend({name:"SignupView",components:{AuthView:ct},data(){return{FORM_CONFIG:{title:this.$locale.baseText("auth.signup.setupYourAccount"),buttonText:this.$locale.baseText("auth.signup.finishAccountSetup"),inputs:[{name:"firstName",properties:{label:this.$locale.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",properties:{label:this.$locale.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"password",properties:{label:this.$locale.baseText("auth.password"),type:"password",validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],required:!0,infoText:this.$locale.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"agree",properties:{label:this.$locale.baseText("auth.agreement.label"),type:"checkbox"}}]},loading:!1,inviter:null,inviterId:null,inviteeId:null}},async mounted(){const s=!this.$route.query.inviterId||typeof this.$route.query.inviterId!="string"?null:this.$route.query.inviterId,e=!this.$route.query.inviteeId||typeof this.$route.query.inviteeId!="string"?null:this.$route.query.inviteeId;try{if(!s||!e)throw new Error(this.$locale.baseText("auth.signup.missingTokenError"));this.inviterId=s,this.inviteeId=e;const t=await this.usersStore.validateSignupToken({inviteeId:e,inviterId:s});this.inviter=t.inviter}catch(t){this.$showError(t,this.$locale.baseText("auth.signup.tokenValidationError")),this.$router.replace({name:d.SIGNIN})}},computed:{...b(N,z),inviteMessage(){return this.inviter?this.$locale.baseText("settings.signup.signUpInviterInfo",{interpolate:{firstName:this.inviter.firstName,lastName:this.inviter.lastName}}):null}},methods:{async onSubmit(s){if(!this.inviterId||!this.inviteeId){this.$showError(new Error(this.$locale.baseText("auth.changePassword.tokenValidationError")),this.$locale.baseText("auth.signup.setupYourAccountError"));return}try{if(this.loading=!0,await this.usersStore.signup({...s,inviterId:this.inviterId,inviteeId:this.inviteeId}),s.agree===!0)try{await this.uiStore.submitContactEmail(s.email.toString(),s.agree)}catch(e){}await this.$router.push({name:d.NEW_WORKFLOW})}catch(e){this.$showError(e,this.$locale.baseText("auth.signup.setupYourAccountError"))}this.loading=!1}}});var BO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("AuthView",{attrs:{form:e.FORM_CONFIG,formLoading:e.loading,subtitle:e.inviteMessage},on:{submit:e.onSubmit}})},UO=[],FO=p(WO,BO,UO,!1,null,null,null,null);const VO=FO.exports,zO=C({name:"TemplateDetailsBlock",props:{title:{type:String}}}),jO="_block_czs8t_1",KO="_header_czs8t_5",HO="_content_czs8t_10",GO={block:jO,header:KO,content:HO};var qO=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.block},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{tag:"h3",size:"small",color:"text-base"}},[e._v(e._s(e.title))])],1),t("div",{class:e.$style.content},[e._t("default")],2)])},YO=[];const Oa={$style:GO};function XO(s){for(var e in Oa)this[e]=Oa[e]}var JO=p(zO,qO,YO,!1,XO,null,null,null);const QO=JO.exports,ZO=C({name:"TemplateDetails",props:{blockTitle:{type:String},loading:{type:Boolean},template:{type:Object}},components:{NodeIcon:rt,TemplateDetailsBlock:QO},computed:{...b(Oe)},methods:{abbreviateNumber:Vi,filterTemplateNodes:Fs,redirectToCategory(s){this.templatesStore.resetSessionId(),this.$router.push(`/templates?categories=${s}`)},redirectToSearchPage(s){this.templatesStore.resetSessionId(),this.$router.push(`/templates?search=${s.displayName}`)}}}),eM="_icons_1yw74_1",tM="_icon_1yw74_1",sM="_text_1yw74_12",nM={icons:eM,icon:tM,text:sM};var oM=function(){var n;var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("n8n-loading",{attrs:{loading:e.loading,rows:5,variant:"p"}}),!e.loading&&e.template.nodes.length>0?t("template-details-block",{attrs:{title:e.blockTitle}},[t("div",{class:e.$style.icons},e._l(e.filterTemplateNodes(e.template.nodes),function(o){return t("div",{key:o.name,class:e.$style.icon},[t("NodeIcon",{attrs:{nodeType:o,size:24,showTooltip:!0},on:{click:function(a){return e.redirectToSearchPage(o)}}})],1)}),0)]):e._e(),!e.loading&&((n=e.template)==null?void 0:n.categories.length)>0?t("template-details-block",{attrs:{title:e.$locale.baseText("template.details.categories")}},[t("n8n-tags",{attrs:{tags:e.template.categories},on:{click:e.redirectToCategory}})],1):e._e(),e.loading?e._e():t("template-details-block",{attrs:{title:e.$locale.baseText("template.details.details")}},[t("div",{class:e.$style.text},[t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("template.details.created"))+" "),t("TimeAgo",{attrs:{date:e.template.createdAt}}),t("span",[e._v(e._s(e.$locale.baseText("template.details.by")))]),e.template.user?t("span",[e._v(" "+e._s(e.template.user.username))]):t("span",[e._v(" n8n team")])],1)],1),t("div",{class:e.$style.text},[e.template.totalViews!==0?t("n8n-text",{attrs:{size:"small",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("template.details.viewed"))+" "+e._s(e.abbreviateNumber(e.template.totalViews))+" "+e._s(e.$locale.baseText("template.details.times"))+" ")]):e._e()],1)])],1)},aM=[];const Ma={$style:nM};function iM(s){for(var e in Ma)this[e]=Ma[e]}var rM=p(ZO,oM,aM,!1,iM,null,null,null);const Tr=rM.exports,lM=x(he).extend({name:"NodeList",props:{nodes:{type:Array},limit:{type:Number,default:4},size:{type:String,default:"sm"}},components:{NodeIcon:rt},computed:{filteredCoreNodes(){return Fs(this.nodes)},hiddenNodes(){return this.filteredCoreNodes.length-this.countNodesToBeSliced(this.filteredCoreNodes)},slicedNodes(){return this.filteredCoreNodes.slice(0,this.countNodesToBeSliced(this.filteredCoreNodes))}},methods:{countNodesToBeSliced(s){return s.length>this.limit?this.limit-1:this.limit}}}),cM="_list_10uzg_1",dM="_container_10uzg_9",uM="_sm_10uzg_14",hM="_md_10uzg_18",pM="_button_10uzg_22",fM="_buttonSm_10uzg_36",mM="_buttonMd_10uzg_43",gM={list:cM,container:dM,sm:uM,md:hM,button:pM,buttonSm:fM,buttonMd:mM};var _M=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.list},[e._l(e.slicedNodes,function(n){return t("div",{key:n.name,class:[e.$style.container,e.$style[e.size]]},[t("NodeIcon",{attrs:{nodeType:n,size:e.size==="md"?24:18,showTooltip:!0}})],1)}),e.filteredCoreNodes.length>e.limit+1?t("div",{class:[e.$style.button,e.size==="md"?e.$style.buttonMd:e.$style.buttonSm]},[e._v(" +"+e._s(e.hiddenNodes)+" ")]):e._e()],2)},vM=[];const Ra={$style:gM};function wM(s){for(var e in Ra)this[e]=Ra[e]}var yM=p(lM,_M,vM,!1,wM,null,null,null);const kr=yM.exports,bM=x(he).extend({name:"TemplateCard",props:{lastItem:{type:Boolean,default:!1},firstItem:{type:Boolean,default:!1},workflow:{type:Object},useWorkflowButton:{type:Boolean},loading:{type:Boolean}},components:{NodeList:kr},data(){return{nodesToBeShown:5}},methods:{filterTemplateNodes:Fs,abbreviateNumber:Vi,countNodesToBeSliced(s){return s.length>this.nodesToBeShown?this.nodesToBeShown-1:this.nodesToBeShown},onUseWorkflowClick(s){this.$emit("useWorkflow",s)},onCardClick(s){this.$emit("click",s)}}}),xM="_nodes_cg1a9_1",TM="_icon_cg1a9_8",kM="_card_cg1a9_12",SM="_hideOnHover_cg1a9_23",$M="_buttonContainer_cg1a9_26",EM="_loaded_cg1a9_37",CM="_first_cg1a9_41",NM="_last_cg1a9_47",IM="_content_cg1a9_52",DM="_line_cg1a9_57",AM="_loading_cg1a9_63",PM="_nodesContainer_cg1a9_68",OM={nodes:xM,icon:TM,card:kM,hideOnHover:SM,buttonContainer:$M,loaded:EM,first:CM,last:NM,content:IM,line:DM,loading:AM,nodesContainer:PM};var MM=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:[e.$style.card,e.lastItem&&e.$style.last,e.firstItem&&e.$style.first,!e.loading&&e.$style.loaded],on:{click:e.onCardClick}},[e.loading?t("div",{class:e.$style.loading},[t("n8n-loading",{attrs:{rows:2,shrinkLast:!1,loading:e.loading}})],1):t("div",[t("n8n-heading",{attrs:{bold:!0,size:"small"}},[e._v(e._s(e.workflow.name))]),t("div",{class:e.$style.content},[e.workflow.totalViews?t("span",[t("n8n-text",{attrs:{size:"small",color:"text-light"}},[t("font-awesome-icon",{attrs:{icon:"eye"}}),e._v(" "+e._s(e.abbreviateNumber(e.workflow.totalViews))+" ")],1)],1):e._e(),e.workflow.totalViews?t("div",{class:e.$style.line,domProps:{textContent:e._s("|")}}):e._e(),t("n8n-text",{attrs:{size:"small",color:"text-light"}},[t("TimeAgo",{attrs:{date:e.workflow.createdAt}})],1),e.workflow.user?t("div",{class:e.$style.line,domProps:{textContent:e._s("|")}}):e._e(),e.workflow.user?t("n8n-text",{attrs:{size:"small",color:"text-light"}},[e._v("By "+e._s(e.workflow.user.username))]):e._e()],1)],1),e.loading?e._e():t("div",{class:[e.$style.nodesContainer,e.useWorkflowButton&&e.$style.hideOnHover]},[e.workflow.nodes?t("NodeList",{attrs:{nodes:e.workflow.nodes,limit:e.nodesToBeShown,size:"md"}}):e._e()],1),e.useWorkflowButton?t("div",{class:e.$style.buttonContainer},[e.useWorkflowButton?t("n8n-button",{attrs:{outline:"",label:"Use workflow"},on:{click:function(n){return n.stopPropagation(),e.onUseWorkflowClick.apply(null,arguments)}}}):e._e()],1):e._e()])},RM=[];const La={$style:OM};function LM(s){for(var e in La)this[e]=La[e]}var WM=p(bM,MM,RM,!1,LM,null,null,null);const as=WM.exports,BM=x(he).extend({name:"TemplateList",props:{infiniteScrollEnabled:{type:Boolean,default:!1},loading:{type:Boolean},useWorkflowButton:{type:Boolean,default:!1},workflows:{type:Array},totalWorkflows:{type:Number}},mounted(){if(this.infiniteScrollEnabled){const s=document.getElementById("content");s&&s.addEventListener("scroll",this.onScroll)}},destroyed(){const s=document.getElementById("content");s&&s.removeEventListener("scroll",this.onScroll)},components:{TemplateCard:as},methods:{onScroll(){const s=this.$refs.loader;if(!s||this.loading)return;const e=s.getBoundingClientRect();e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)&&this.$emit("loadMore")},onCardClick(s,e){this.$emit("openTemplate",{event:s,id:e})},onUseWorkflow(s,e){this.$emit("useWorkflow",{event:s,id:e})}}}),UM="_header_1ivn7_1",FM="_workflowButton_1ivn7_5",VM="_button_1ivn7_5",zM="_nodes_1ivn7_8",jM={header:UM,workflowButton:FM,button:VM,nodes:zM};var KM=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.loading||e.workflows.length?t("div",{class:e.$style.list},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{bold:!0,size:"medium",color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("templates.workflows"))+" "),!e.loading&&e.totalWorkflows?t("span",{domProps:{textContent:e._s(`(${e.totalWorkflows})`)}}):e._e()])],1),t("div",{class:e.$style.container},[e._l(e.workflows,function(n,o){return t("TemplateCard",{key:n.id,attrs:{workflow:n,firstItem:o===0,lastItem:o===e.workflows.length-1&&!e.loading,useWorkflowButton:e.useWorkflowButton},on:{click:a=>e.onCardClick(a,n.id),useWorkflow:a=>e.onUseWorkflow(a,n.id)}})}),e.infiniteScrollEnabled?t("div",{ref:"loader"}):e._e(),e.loading?t("div",e._l(4,function(n){return t("TemplateCard",{key:"index-"+n,attrs:{loading:!0,firstItem:e.workflows.length===0&&n===1,lastItem:n===4}})}),1):e._e()],2)]):e._e()},HM=[];const Wa={$style:jM};function GM(s){for(var e in Wa)this[e]=Wa[e]}var qM=p(BM,KM,HM,!1,GM,null,null,null);const Sr=qM.exports,YM=C({name:"GoBackButton",data(){return{routeHasHistory:!1}},methods:{navigateTo(){this.routeHasHistory?this.$router.go(-1):this.$router.push({name:d.TEMPLATES})}},mounted(){window.history.state?this.routeHasHistory=!0:this.routeHasHistory=!1}}),XM="_wrapper_1g0gc_1",JM="_icon_1g0gc_6",QM="_text_1g0gc_7",ZM={wrapper:XM,icon:JM,text:QM};var eR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.wrapper,on:{click:e.navigateTo}},[t("font-awesome-icon",{class:e.$style.icon,attrs:{icon:"arrow-left"}}),t("div",{class:e.$style.text,domProps:{textContent:e._s(e.$locale.baseText("template.buttons.goBackButton"))}})],1)},tR=[];const Ba={$style:ZM};function sR(s){for(var e in Ba)this[e]=Ba[e]}var nR=p(YM,eR,tR,!1,sR,null,null,null);const oR=nR.exports,aR=C({name:"TemplatesView",components:{GoBackButton:oR},props:{goBackEnabled:{type:Boolean,default:!1}}}),iR="_template_vnliu_1",rR="_container_vnliu_14",lR="_header_vnliu_18",cR="_goBack_vnliu_24",dR={template:iR,container:rR,header:lR,goBack:cR};var uR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.template},[t("div",{class:e.$style.container},[t("div",{class:e.$style.header},[e.goBackEnabled?t("div",{class:e.$style.goBack},[t("GoBackButton")],1):e._e(),e._t("header")],2),t("div",[e._t("content")],2)])])},hR=[];const Ua={$style:dR};function pR(s){for(var e in Ua)this[e]=Ua[e]}var fR=p(aR,uR,hR,!1,pR,null,null,null);const Zs=fR.exports,mR=x(re).extend({name:"TemplatesCollectionView",components:{TemplateDetails:Tr,TemplateList:Sr,TemplatesView:Zs},computed:{...b(Oe),collection(){return this.templatesStore.getCollectionById(this.collectionId)},collectionId(){return this.$route.params.id},collectionWorkflows(){return this.collection?this.collection.workflows.map(({id:s})=>this.templatesStore.getTemplateById(s.toString())):null}},data(){return{loading:!0,notFoundError:!1}},methods:{scrollToTop(){setTimeout(()=>{const s=document.getElementById("content");s&&s.scrollTo({top:0,behavior:"smooth"})},50)},onOpenTemplate({event:s,id:e}){this.navigateTo(s,d.TEMPLATE,e)},onUseWorkflow({event:s,id:e}){const t={template_id:e,wf_template_repo_session_id:this.workflowsStore.currentSessionId,source:"collection"};this.$externalHooks().run("templatesCollectionView.onUseWorkflow",t),this.$telemetry.track("User inserted workflow template",t),this.navigateTo(s,d.TEMPLATE_IMPORT,e)},navigateTo(s,e,t){if(s.metaKey||s.ctrlKey){const n=this.$router.resolve({name:e,params:{id:t}});window.open(n.href,"_blank");return}else this.$router.push({name:e,params:{id:t}})}},watch:{collection(s){s?at(`n8n - Template collection: ${s.name}`):at("n8n - Templates")}},async mounted(){if(this.scrollToTop(),this.collection&&this.collection.full){this.loading=!1;return}try{await this.templatesStore.fetchCollectionById(this.collectionId)}catch(s){this.notFoundError=!0}this.loading=!1}}),gR="_wrapper_b0vqe_1",_R="_notFound_b0vqe_11",vR="_title_b0vqe_15",wR="_button_b0vqe_19",yR="_mainContent_b0vqe_23",bR="_markdown_b0vqe_34",xR="_details_b0vqe_38",TR={wrapper:gR,notFound:_R,title:vR,button:wR,mainContent:yR,markdown:bR,details:xR};var kR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("TemplatesView",{attrs:{goBackEnabled:!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.notFoundError?t("div",{class:e.$style.notFound},[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("templates.collectionsNotFound")))])],1):t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.title},[e.collection&&e.collection.name?t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(" "+e._s(e.collection.name)+" ")]):e._e(),e.collection&&e.collection.name?t("n8n-text",{attrs:{color:"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("templates.collection"))+" ")]):e._e(),t("n8n-loading",{attrs:{loading:!e.collection||!e.collection.name,rows:2,variant:"h1"}})],1)])]},proxy:!0},e.notFoundError?null:{key:"content",fn:function(){return[t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.mainContent},[e.loading||e.collection&&e.collection.description?t("div",{class:e.$style.markdown},[t("n8n-markdown",{attrs:{content:e.collection&&e.collection.description,images:e.collection&&e.collection.image,loading:e.loading}})],1):e._e(),t("TemplateList",{attrs:{"infinite-scroll-enabled":!1,loading:e.loading,"use-workflow-button":!0,workflows:e.loading?[]:e.collectionWorkflows},on:{useWorkflow:e.onUseWorkflow,openTemplate:e.onOpenTemplate}})],1),t("div",{class:e.$style.details},[t("TemplateDetails",{attrs:{"block-title":e.$locale.baseText("template.details.appsInTheCollection"),loading:e.loading,template:e.collection}})],1)])]},proxy:!0}],null,!0)})},SR=[];const Fa={$style:TR};function $R(s){for(var e in Fa)this[e]=Fa[e]}var ER=p(mR,kR,SR,!1,$R,null,null,null);const CR=ER.exports,NR=x(re).extend({name:"TemplatesWorkflowView",components:{TemplateDetails:Tr,TemplatesView:Zs,WorkflowPreview:xr},computed:{...b(Oe),template(){return this.templatesStore.getTemplateById(this.templateId)},templateId(){return this.$route.params.id}},data(){return{loading:!0,showPreview:!0,notFoundError:!1}},methods:{openWorkflow(s,e){const t={source:"workflow",template_id:s,wf_template_repo_session_id:this.templatesStore.currentSessionId};if(this.$externalHooks().run("templatesWorkflowView.openWorkflow",t),this.$telemetry.track("User inserted workflow template",t),e.metaKey||e.ctrlKey){const n=this.$router.resolve({name:d.TEMPLATE_IMPORT,params:{id:s}});window.open(n.href,"_blank");return}else this.$router.push({name:d.TEMPLATE_IMPORT,params:{id:s}})},onHidePreview(){this.showPreview=!1},scrollToTop(){const s=document.getElementById("content");s&&s.scrollTo({top:0})}},watch:{template(s){s?at(`n8n - Template template: ${s.name}`):at("n8n - Templates")}},async mounted(){if(this.scrollToTop(),this.template&&this.template.full){this.loading=!1;return}try{await this.templatesStore.fetchTemplateById(this.templateId)}catch(s){this.notFoundError=!0}this.loading=!1}}),IR="_wrapper_trbdo_1",DR="_notFound_trbdo_6",AR="_title_trbdo_10",PR="_button_trbdo_14",OR="_image_trbdo_18",MR="_content_trbdo_29",RR="_markdown_trbdo_40",LR="_details_trbdo_51",WR={wrapper:IR,notFound:DR,title:AR,button:PR,image:OR,content:MR,markdown:RR,details:LR};var BR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("TemplatesView",{attrs:{goBackEnabled:!0},scopedSlots:e._u([{key:"header",fn:function(){return[e.notFoundError?t("div",{class:e.$style.notFound},[t("n8n-text",{attrs:{color:"text-base"}},[e._v(e._s(e.$locale.baseText("templates.workflowsNotFound")))])],1):t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.title},[e.template&&e.template.name?t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(e._s(e.template.name))]):e._e(),e.template&&e.template.name?t("n8n-text",{attrs:{color:"text-base",size:"small"}},[e._v(" "+e._s(e.$locale.baseText("generic.workflow"))+" ")]):e._e(),t("n8n-loading",{attrs:{loading:!e.template||!e.template.name,rows:2,variant:"h1"}})],1),t("div",{class:e.$style.button},[e.template?t("n8n-button",{attrs:{label:e.$locale.baseText("template.buttons.useThisWorkflowButton"),size:"large"},on:{click:function(n){return e.openWorkflow(e.template.id,n)}}}):e._e(),t("n8n-loading",{attrs:{loading:!e.template,rows:1,variant:"button"}})],1)])]},proxy:!0},e.notFoundError?null:{key:"content",fn:function(){return[t("div",{class:e.$style.image},[e.showPreview?t("WorkflowPreview",{attrs:{loading:e.loading,workflow:e.template&&e.template.workflow},on:{close:e.onHidePreview}}):e._e()],1),t("div",{class:e.$style.content},[t("div",{class:e.$style.markdown},[t("n8n-markdown",{attrs:{content:e.template&&e.template.description,images:e.template&&e.template.image,loading:e.loading}})],1),t("div",{class:e.$style.details},[t("TemplateDetails",{attrs:{"block-title":e.$locale.baseText("template.details.appsInTheWorkflow"),loading:e.loading,template:e.template}})],1)])]},proxy:!0}],null,!0)})},UR=[];const Va={$style:WR};function FR(s){for(var e in Va)this[e]=Va[e]}var VR=p(NR,BR,UR,!1,FR,null,null,null);const zR=VR.exports,jR=x(he).extend({name:"Card",props:{loading:{type:Boolean},title:{type:String}}}),KR="_card_rtr81_1",HR="_title_rtr81_17",GR={card:KR,title:HR};var qR=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",e._g({class:e.$style.card,scopedSlots:e._u([e.loading?null:{key:"header",fn:function(){return[t("span",{class:e.$style.title,domProps:{textContent:e._s(e.title)}})]},proxy:!0},e.loading?null:{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0}],null,!0)},e.$listeners),[t("n8n-loading",{attrs:{loading:e.loading,rows:3,variant:"p"}})],1)},YR=[];const za={$style:GR};function XR(s){for(var e in za)this[e]=za[e]}var JR=p(jR,qR,YR,!1,XR,null,null,null);const $r=JR.exports,QR=x(he).extend({name:"CollectionCard",props:{loading:{type:Boolean},collection:{type:Object}},components:{Card:$r,NodeList:kr},methods:{onClick(s){this.$emit("click",s)}}}),ZR={};var eL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("Card",{attrs:{loading:e.loading,title:e.collection.name},on:{click:e.onClick},scopedSlots:e._u([{key:"footer",fn:function(){return[t("n8n-text",{attrs:{size:"small",color:"text-light"}},[e._v(" "+e._s(e.collection.workflows.length)+" "+e._s(e.$locale.baseText("templates.workflows"))+" ")]),t("NodeList",{attrs:{nodes:e.collection.nodes,showMore:!1}})]},proxy:!0}])})},tL=[];const ja={$style:ZR};function sL(s){for(var e in ja)this[e]=ja[e]}var nL=p(QR,eL,tL,!1,sL,null,null,null);const oL=nL.exports,aL=x(he).extend({name:"CollectionsCarousel",props:{collections:{type:Array},loading:{type:Boolean}},watch:{collections(){setTimeout(()=>{this.updateCarouselScroll()},0)},loading(){setTimeout(()=>{this.updateCarouselScroll()},0)}},components:{Card:$r,CollectionCard:oL,VueAgile:hi},data(){return{carouselScrollPosition:0,cardWidth:240,scrollEnd:!1,listElement:null}},methods:{updateCarouselScroll(){if(this.listElement){this.carouselScrollPosition=Number(this.listElement.scrollLeft.toFixed());const s=this.listElement.clientWidth,e=this.listElement.scrollWidth,t=this.carouselScrollPosition;this.scrollEnd=e-s<=t+7}},onCardClick(s,e){this.$emit("openCollection",{event:s,id:e})},scrollLeft(){this.listElement&&this.listElement.scrollBy({left:-(this.cardWidth*2),top:0,behavior:"smooth"})},scrollRight(){this.listElement&&this.listElement.scrollBy({left:this.cardWidth*2,top:0,behavior:"smooth"})}},mounted(){this.$nextTick(()=>{const s=this.$refs.slider;s&&(this.listElement=s.$el.querySelector(".agile__list"),this.listElement&&this.listElement.addEventListener("scroll",this.updateCarouselScroll))})},beforeDestroy(){const s=this.$refs.slider;s&&s.destroy(),window.removeEventListener("scroll",this.updateCarouselScroll)}}),iL="_container_1lokv_1",rL="_button_1lokv_5",lL="_leftButton_1lokv_26 _button_1lokv_5",cL="_rightButton_1lokv_35 _button_1lokv_5",dL={container:iL,button:rL,leftButton:lL,rightButton:cL};var uL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading||e.collections.length,expression:"loading || collections.length"}],class:e.$style.container},[t("agile",{ref:"slider",attrs:{dots:!1,navButtons:!1,infinite:!1,"slides-to-show":4},on:{"after-change":e.updateCarouselScroll}},[e._l(e.loading?4:0,function(n){return t("Card",{key:`loading-${n}`,attrs:{loading:e.loading}})}),e._l(e.loading?[]:e.collections,function(n){return t("CollectionCard",{key:n.id,attrs:{collection:n},on:{click:o=>e.onCardClick(o,n.id)}})})],2),t("button",{directives:[{name:"show",rawName:"v-show",value:e.carouselScrollPosition>0,expression:"carouselScrollPosition > 0"}],class:e.$style.leftButton,on:{click:e.scrollLeft}},[t("font-awesome-icon",{attrs:{icon:"chevron-left"}})],1),t("button",{directives:[{name:"show",rawName:"v-show",value:!e.scrollEnd,expression:"!scrollEnd"}],class:e.$style.rightButton,on:{click:e.scrollRight}},[t("font-awesome-icon",{attrs:{icon:"chevron-right"}})],1)],1)},hL=[];const Ka={$style:dL};function pL(s){for(var e in Ka)this[e]=Ka[e]}var fL=p(aL,uL,hL,!1,pL,null,null,null);const mL=fL.exports,gL=x(he).extend({name:"TemplateFilters",props:{sortOnPopulate:{type:Boolean,default:!1},categories:{type:Array},expandLimit:{type:Number,default:12},loading:{type:Boolean},selected:{type:Array}},watch:{categories:{handler(s){if(!this.sortOnPopulate)this.sortedCategories=s;else{const e=this.selected||[],t=s.filter(({id:o})=>e.includes(o)),n=s.filter(({id:o})=>!e.includes(o));this.sortedCategories=t.concat(n)}},immediate:!0}},data(){return{collapsed:!0,sortedCategories:[]}},computed:{allSelected(){return this.selected.length===0}},methods:{collapseAction(){this.collapsed=!1},handleCheckboxChanged(s,e){this.$emit(s?"select":"clear",e.id)},isSelected(s){return this.selected.includes(s)},resetCategories(){this.$emit("clearAll")}}}),_L="_title_1sb10_1",vL="_categories_1sb10_6",wL="_item_1sb10_11",yL="_button_1sb10_18",bL={title:_L,categories:vL,item:wL,button:yL};var xL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"template-filters",class:e.$style.filters},[t("div",{class:e.$style.title,domProps:{textContent:e._s(e.$locale.baseText("templates.categoriesHeading"))}}),e.loading?t("div",{class:e.$style.list},[t("n8n-loading",{attrs:{loading:e.loading,rows:e.expandLimit}})],1):e._e(),e.loading?e._e():t("ul",{class:e.$style.categories},[t("li",{class:e.$style.item},[t("el-checkbox",{attrs:{label:e.$locale.baseText("templates.allCategories"),value:e.allSelected},on:{change:n=>e.resetCategories(n)}})],1),e._l(e.collapsed?e.sortedCategories.slice(0,e.expandLimit):e.sortedCategories,function(n){return t("li",{key:n.id,class:e.$style.item},[t("el-checkbox",{attrs:{label:n.name,value:e.isSelected(n.id)},on:{change:o=>e.handleCheckboxChanged(o,n)}})],1)})],2),e.sortedCategories.length>e.expandLimit&&e.collapsed&&!e.loading?t("div",{class:e.$style.button,on:{click:e.collapseAction}},[t("n8n-text",{attrs:{size:"small",color:"primary"}},[e._v(" + "+e._s(`${e.sortedCategories.length-e.expandLimit} more`)+" ")])],1):e._e()])},TL=[];const Ha={$style:bL};function kL(s){for(var e in Ha)this[e]=Ha[e]}var SL=p(gL,xL,TL,!1,kL,null,null,null);const $L=SL.exports,EL=x(he,Ie).extend({name:"TemplatesSearchView",components:{CollectionsCarousel:mL,TemplateFilters:$L,TemplateList:Sr,TemplatesView:Zs},data(){return{areCategoriesPrepopulated:!1,categories:[],loading:!0,loadingCategories:!0,loadingCollections:!0,loadingWorkflows:!0,search:"",searchEventToTrack:null,errorLoadingWorkflows:!1}},computed:{...b(P,Oe,N,z),totalWorkflows(){return this.templatesStore.getSearchedWorkflowsTotal(this.query)},workflows(){return this.templatesStore.getSearchedWorkflows(this.query)||[]},collections(){return this.templatesStore.getSearchedCollections(this.query)||[]},endOfSearchMessage(){return this.loadingWorkflows?null:this.workflows.length&&this.workflows.length>=this.totalWorkflows?this.$locale.baseText("templates.endResult"):!this.loadingCollections&&this.workflows.length===0&&this.collections.length===0?!this.settingsStore.isTemplatesEndpointReachable&&this.errorLoadingWorkflows?this.$locale.baseText("templates.connectionWarning"):this.$locale.baseText("templates.noSearchResults"):null},query(){return{categories:this.categories,search:this.search}},nothingFound(){return!this.loadingWorkflows&&!this.loadingCollections&&this.workflows.length===0&&this.collections.length===0}},methods:{onOpenCollection({event:s,id:e}){this.navigateTo(s,d.COLLECTION,e)},onOpenTemplate({event:s,id:e}){this.navigateTo(s,d.TEMPLATE,e)},navigateTo(s,e,t){if(s.metaKey||s.ctrlKey){const n=this.$router.resolve({name:e,params:{id:t}});window.open(n.href,"_blank");return}else this.$router.push({name:e,params:{id:t}})},updateSearch(){this.updateQueryParam(this.search,this.categories.join(",")),this.loadWorkflowsAndCollections(!1)},updateSearchTracking(s,e){s&&(this.searchEventToTrack&&this.searchEventToTrack.search_string.length>s.length||(this.searchEventToTrack={search_string:s,workflow_results_count:this.workflows.length,collection_results_count:this.collections.length,categories_applied:e.map(t=>this.templatesStore.getCategoryById(t.toString())),wf_template_repo_session_id:this.templatesStore.currentSessionId}))},trackSearch(){this.searchEventToTrack&&(this.$telemetry.track("User searched workflow templates",this.searchEventToTrack),this.searchEventToTrack=null)},openNewWorkflow(){this.uiStore.nodeViewInitialized=!1,this.$router.push({name:d.NEW_WORKFLOW})},onSearchInput(s){this.loadingWorkflows=!0,this.loadingCollections=!0,this.search=s,this.callDebounced("updateSearch",{debounceTime:500,trailing:!0}),s.length===0&&this.trackSearch()},onCategorySelected(s){this.categories=this.categories.concat(s),this.updateSearch(),this.trackCategories()},onCategoryUnselected(s){this.categories=this.categories.filter(e=>e!==s),this.updateSearch(),this.trackCategories()},onCategoriesCleared(){this.categories=[],this.updateSearch()},trackCategories(){this.categories.length&&this.$telemetry.track("User changed template filters",{search_string:this.search,categories_applied:this.categories.map(s=>this.templatesStore.getCollectionById(s.toString())),wf_template_repo_session_id:this.templatesStore.currentSessionId})},updateQueryParam(s,e){const t=Object.assign({},this.$route.query);e.length?t.categories=e:delete t.categories,s.length?t.search=s:delete t.search,this.$router.replace({query:t})},async onLoadMore(){if(!(this.workflows.length>=this.totalWorkflows))try{this.loadingWorkflows=!0,await this.templatesStore.getMoreWorkflows({categories:this.categories,search:this.search})}catch(s){this.$showMessage({title:"Error",message:"Could not load more workflows",type:"error"})}finally{this.loadingWorkflows=!1}},async loadCategories(){try{await this.templatesStore.getCategories()}catch(s){}this.loadingCategories=!1},async loadCollections(){try{this.loadingCollections=!0,await this.templatesStore.getCollections({categories:this.categories,search:this.search})}catch(s){}this.loadingCollections=!1},async loadWorkflows(){try{this.loadingWorkflows=!0,await this.templatesStore.getWorkflows({search:this.search,categories:this.categories}),this.errorLoadingWorkflows=!1}catch(s){this.errorLoadingWorkflows=!0}this.loadingWorkflows=!1},async loadWorkflowsAndCollections(s){const e=this.search,t=[...this.categories];await Promise.all([this.loadWorkflows(),this.loadCollections()]),s||this.updateSearchTracking(e,t)},scrollTo(s,e="smooth"){setTimeout(()=>{const t=document.getElementById("content");t&&t.scrollTo({top:s,behavior:e})},0)}},watch:{workflows(s){s.length===0&&this.scrollTo(0)}},beforeRouteLeave(s,e,t){const n=document.getElementById("content");n&&this.$route.meta&&this.$route.meta.setScrollPosition&&typeof this.$route.meta.setScrollPosition=="function"&&this.$route.meta.setScrollPosition(n.scrollTop),this.trackSearch(),t()},async mounted(){at("n8n - Templates"),this.loadCategories(),this.loadWorkflowsAndCollections(!0),this.usersStore.showPersonalizationSurvey(),setTimeout(()=>{this.$route.meta&&this.$route.meta.scrollOffset>0&&this.scrollTo(this.$route.meta.scrollOffset,"auto")},100)},async created(){this.$route.query.search&&typeof this.$route.query.search=="string"&&(this.search=this.$route.query.search),typeof this.$route.query.categories=="string"&&this.$route.query.categories.length&&(this.categories=this.$route.query.categories.split(",").map(s=>parseInt(s,10)),this.areCategoriesPrepopulated=!0)}}),CL="_wrapper_p9mwm_1",NL="_contentWrapper_p9mwm_6",IL="_filters_p9mwm_16",DL="_search_p9mwm_21",AL="_header_p9mwm_34",PL={wrapper:CL,contentWrapper:NL,filters:IL,search:DL,header:AL};var OL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("TemplatesView",{scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:e.$style.wrapper},[t("div",{class:e.$style.title},[t("n8n-heading",{attrs:{tag:"h1",size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText("templates.heading"))+" ")])],1),t("div",{class:e.$style.button},[t("n8n-button",{attrs:{size:"large",label:e.$locale.baseText("templates.newButton")},on:{click:e.openNewWorkflow}})],1)])]},proxy:!0},{key:"content",fn:function(){return[t("div",{class:e.$style.contentWrapper},[t("div",{class:e.$style.filters},[t("TemplateFilters",{attrs:{categories:e.templatesStore.allCategories,sortOnPopulate:e.areCategoriesPrepopulated,loading:e.loadingCategories,selected:e.categories},on:{clear:e.onCategoryUnselected,clearAll:e.onCategoriesCleared,select:e.onCategorySelected}})],1),t("div",{class:e.$style.search},[t("n8n-input",{attrs:{value:e.search,placeholder:e.$locale.baseText("templates.searchPlaceholder"),clearable:""},on:{input:e.onSearchInput,blur:e.trackSearch},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("font-awesome-icon",{attrs:{icon:"search"}})]},proxy:!0}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.collections.length||e.loadingCollections,expression:"collections.length || loadingCollections"}],class:e.$style.carouselContainer},[t("div",{class:e.$style.header},[t("n8n-heading",{attrs:{bold:!0,size:"medium",color:"text-light"}},[e._v(" "+e._s(e.$locale.baseText("templates.collections"))+" "),e.loadingCollections?e._e():t("span",{domProps:{textContent:e._s(`(${e.collections.length})`)}})])],1),t("CollectionsCarousel",{attrs:{collections:e.collections,loading:e.loadingCollections},on:{openCollection:e.onOpenCollection}})],1),t("TemplateList",{attrs:{"infinite-scroll-enabled":!0,loading:e.loadingWorkflows,"total-workflows":e.totalWorkflows,workflows:e.workflows},on:{loadMore:e.onLoadMore,openTemplate:e.onOpenTemplate}}),e.endOfSearchMessage?t("div",{class:e.$style.endText},[t("n8n-text",{attrs:{size:"medium",color:"text-base"}},[t("span",{domProps:{innerHTML:e._s(e.endOfSearchMessage)}})])],1):e._e()],1)])]},proxy:!0}])})},ML=[];const Ga={$style:PL};function RL(s){for(var e in Ga)this[e]=Ga[e]}var LL=p(EL,OL,ML,!1,RL,null,null,null);const WL=LL.exports,BL=C({props:{overflow:{type:Boolean,default:!1}}}),UL="_wrapper_1s8j6_1",FL="_overflow_1s8j6_7",VL="_list_1s8j6_7",zL="_body_1s8j6_7",jL="_header_1s8j6_17",KL={wrapper:UL,overflow:FL,list:VL,body:zL,header:jL};var HL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:{[e.$style.wrapper]:!0,[e.$style.overflow]:e.overflow}},[t("div",{class:e.$style.list},[e.$slots.header?t("div",{class:e.$style.header},[e._t("header")],2):e._e(),t("div",{class:e.$style.body},[e._t("default")],2)])])},GL=[];const qa={$style:KL};function qL(s){for(var e in qa)this[e]=qa[e]}var YL=p(BL,HL,GL,!1,qL,null,null,null);const en=YL.exports,XL=C({props:{value:{type:Boolean,default:!0},myResourcesLabel:{type:String,default:""},allResourcesLabel:{type:String,default:""}},computed:{menuItems(){return[{id:"all",icon:"globe-americas",label:this.allResourcesLabel,position:"top"},{id:"owner",icon:"user",label:this.myResourcesLabel,position:"top"}]}},methods:{onSelectOwner(s){this.$emit("input",s==="owner")}}});var JL=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-menu",{attrs:{items:e.menuItems,mode:"tabs",value:e.value?"owner":"all"},on:{input:e.onSelectOwner}})},QL=[],ZL=p(XL,JL,QL,!1,null,"a473922f",null,null);const Er=ZL.exports,e0=C({props:{value:{type:Object,default:()=>({})},keys:{type:Array,default:()=>[]},shareable:{type:Boolean,default:!0},reset:{type:Function}},data(){return{EnterpriseEditionFeature:te}},computed:{...b(z),ownedByUsers(){return this.usersStore.allUsers.map(s=>s.id===this.value.sharedWith?{...s,disabled:!0}:s)},sharedWithUsers(){return this.usersStore.allUsers.map(s=>s.id===this.value.ownedBy?{...s,disabled:!0}:s)},filtersLength(){let s=0;return this.keys.forEach(e=>{e!=="search"&&(s+=(Array.isArray(this.value[e])?this.value[e].length>0:this.value[e]!=="")?1:0)}),s},hasFilters(){return this.filtersLength>0}},methods:{setKeyValue(s,e){const t={...this.value,[s]:e};this.$emit("input",t)},resetFilters(){if(this.reset)this.reset();else{const s={...this.value};this.keys.forEach(e=>{s[e]=Array.isArray(this.value[e])?[]:""}),this.$emit("input",s)}}},watch:{filtersLength(s){this.$emit("update:filtersLength",s)}}}),t0={"filter-button":"_filter-button_xlfpy_1","filters-dropdown":"_filters-dropdown_xlfpy_6","filters-dropdown-footer":"_filters-dropdown-footer_xlfpy_11"};var s0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-popover",{attrs:{trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("n8n-button",{class:[e.$style["filter-button"],"ml-2xs"],attrs:{icon:"filter",type:"tertiary",size:"medium",active:e.hasFilters,"data-test-id":"resources-list-filters-trigger"}},[t("n8n-badge",{directives:[{name:"show",rawName:"v-show",value:e.filtersLength>0,expression:"filtersLength > 0"}],staticClass:"mr-4xs",attrs:{theme:"primary"}},[e._v(" "+e._s(e.filtersLength)+" ")]),e._v(" "+e._s(e.$locale.baseText("forms.resourceFiltersDropdown.filters"))+" ")],1)]},proxy:!0}])},[t("div",{class:e.$style["filters-dropdown"],attrs:{"data-test-id":"resources-list-filters-dropdown"}},[e._t("default",null,{filters:e.value,setKeyValue:e.setKeyValue}),e.shareable?t("enterprise-edition",{staticClass:"mb-s",attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("forms.resourceFiltersDropdown.ownedBy"),bold:!1,size:"small",color:"text-base"}}),t("n8n-user-select",{attrs:{users:e.ownedByUsers,currentUserId:e.usersStore.currentUser.id,value:e.value.ownedBy,size:"medium"},on:{input:function(n){return e.setKeyValue("ownedBy",n)}}})],1):e._e(),e.shareable?t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("forms.resourceFiltersDropdown.sharedWith"),bold:!1,size:"small",color:"text-base"}}),t("n8n-user-select",{attrs:{users:e.sharedWithUsers,currentUserId:e.usersStore.currentUser.id,value:e.value.sharedWith,size:"medium"},on:{input:function(n){return e.setKeyValue("sharedWith",n)}}})],1):e._e(),e.hasFilters?t("div",{class:[e.$style["filters-dropdown-footer"],"mt-s"]},[t("n8n-link",{on:{click:e.resetFilters}},[e._v(" "+e._s(e.$locale.baseText("forms.resourceFiltersDropdown.reset"))+" ")])],1):e._e()],2)])},n0=[];const Ya={$style:t0};function o0(s){for(var e in Ya)this[e]=Ya[e]}var a0=p(e0,s0,n0,!1,o0,null,null,null);const Cr=a0.exports,i0=x(D,Ie).extend({name:"resources-list-layout",components:{TemplateCard:as,PageViewLayout:os,PageViewLayoutList:en,ResourceOwnershipSelect:Er,ResourceFiltersDropdown:Cr},props:{resourceKey:{type:String,default:""},displayName:{type:Function,default:s=>s.name},resources:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},initialize:{type:Function,default:()=>async()=>{}},filters:{type:Object,default:()=>({search:"",ownedBy:"",sharedWith:""})},additionalFiltersHandler:{type:Function},showAside:{type:Boolean,default:!0},shareable:{type:Boolean,default:!0},showFiltersDropdown:{type:Boolean,default:!0},sortFns:{type:Object,default:()=>({})},sortOptions:{type:Array,default:()=>["lastUpdated","lastCreated","nameAsc","nameDesc"]},type:{type:String,default:"list"},typeProps:{type:Object,default:()=>({itemSize:0})}},data(){return{loading:!0,isOwnerSubview:!1,sortBy:this.sortOptions[0],hasFilters:!1,currentPage:1,rowsPerPage:10,resettingFilters:!1,EnterpriseEditionFeature:te,repoUrl:Bh}},computed:{...b(P,z),starsBannerShouldRender(){return this.resourceKey==="workflows"&&new Date<Uh},subviewResources(){return this.shareable?this.resources.filter(s=>{var e;return this.isOwnerSubview&&this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)?!!(s.ownedBy&&s.ownedBy.id===((e=this.usersStore.currentUser)==null?void 0:e.id)):!0}):this.resources},filterKeys(){return Object.keys(this.filters)},filteredAndSortedSubviewResources(){return this.subviewResources.filter(e=>{let t=!0;if(this.filters.ownedBy&&(t=t&&!!(e.ownedBy&&e.ownedBy.id===this.filters.ownedBy)),this.filters.sharedWith&&(t=t&&!!(e.sharedWith&&e.sharedWith.find(n=>n.id===this.filters.sharedWith))),this.filters.search){const n=this.filters.search.toLowerCase();t=t&&this.displayName(e).toLowerCase().includes(n)}return this.additionalFiltersHandler&&(t=this.additionalFiltersHandler(e,this.filters,t)),t}).sort((e,t)=>{switch(this.sortBy){case"lastUpdated":return this.sortFns.lastUpdated?this.sortFns.lastUpdated(e,t):new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf();case"lastCreated":return this.sortFns.lastCreated?this.sortFns.lastCreated(e,t):new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf();case"nameAsc":return this.sortFns.nameAsc?this.sortFns.nameAsc(e,t):this.displayName(e).trim().localeCompare(this.displayName(t).trim());case"nameDesc":return this.sortFns.nameDesc?this.sortFns.nameDesc(e,t):this.displayName(t).trim().localeCompare(this.displayName(e).trim());default:return this.sortFns[this.sortBy]?this.sortFns[this.sortBy](e,t):0}})},resourcesNotOwned(){return this.resources.filter(s=>{var e;return s.ownedBy&&s.ownedBy.id!==((e=this.usersStore.currentUser)==null?void 0:e.id)})},shouldSwitchToAllSubview(){return!this.hasFilters&&this.isOwnerSubview&&this.resourcesNotOwned.length>0}},methods:{async onMounted(){await this.initialize(),this.loading=!1,this.$nextTick(this.focusSearchInput)},setCurrentPage(s){this.currentPage=s},setRowsPerPage(s){this.rowsPerPage=s},resetFilters(){Object.keys(this.filters).forEach(s=>{this.filters[s]=Array.isArray(this.filters[s])?[]:""}),this.resettingFilters=!0,this.sendFiltersTelemetry("reset")},focusSearchInput(){this.$refs.search&&this.$refs.search.focus()},setOwnerSubview(s){this.isOwnerSubview=s},getTelemetrySubview(){return this.$locale.baseText(`${this.resourceKey}.menu.${this.isOwnerSubview?"my":"all"}`)},sendSubviewTelemetry(){this.$telemetry.track(`User changed ${this.resourceKey} sub view`,{sub_view:this.getTelemetrySubview()})},sendSortingTelemetry(){this.$telemetry.track(`User changed sorting in ${this.resourceKey} list`,{sub_view:this.getTelemetrySubview(),sorting:this.sortBy})},sendFiltersTelemetry(s){if(this.resettingFilters){if(s!=="reset")return;setTimeout(()=>this.resettingFilters=!1,1500)}const e=this.filters,t=[],n=[];Object.keys(e).forEach(o=>{e[o]&&(t.push(o),n.push(o==="search"?null:e[o]))}),this.$telemetry.track(`User set filters in ${this.resourceKey} list`,{filters_set:t,filter_values:n,sub_view:this.getTelemetrySubview(),[`${this.resourceKey}_total_in_view`]:this.subviewResources.length,[`${this.resourceKey}_after_filtering`]:this.filteredAndSortedSubviewResources.length})},onUpdateFiltersLength(s){this.hasFilters=s>0}},mounted(){this.onMounted()},watch:{isOwnerSubview(){this.sendSubviewTelemetry()},"filters.ownedBy"(s){s&&this.setOwnerSubview(!1),this.sendFiltersTelemetry("ownedBy")},"filters.sharedWith"(){this.sendFiltersTelemetry("sharedWith")},"filters.search"(){this.callDebounced("sendFiltersTelemetry",{debounceTime:1e3,trailing:!0},"search")},sortBy(s){this.$emit("sort",s),this.sendSortingTelemetry()}}}),r0="_search_ioakb_12",l0="_listWrapper_ioakb_16",c0="_datatable_ioakb_35",d0={"heading-wrapper":"_heading-wrapper_ioakb_1","filters-row":"_filters-row_ioakb_5",search:r0,listWrapper:l0,"sort-and-filter":"_sort-and-filter_ioakb_20","header-loading":"_header-loading_ioakb_27","card-loading":"_card-loading_ioakb_31",datatable:c0,"github-stars-banner":"_github-stars-banner_ioakb_39"};var u0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("page-view-layout",{scopedSlots:e._u([e.showAside?{key:"aside",fn:function(){return[t("div",{class:[e.$style["heading-wrapper"],"mb-xs"]},[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.heading`))+" ")])],1),t("div",{staticClass:"mt-xs mb-l"},[e._t("add-button",function(){return[t("n8n-button",{attrs:{size:"large",block:"",disabled:e.disabled,"data-test-id":"resources-list-add"},on:{click:function(n){return e.$emit("click:add",n)}}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.add`))+" ")])]})],2),e.shareable?t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[t("resource-ownership-select",{attrs:{"my-resources-label":e.$locale.baseText(`${e.resourceKey}.menu.my`),"all-resources-label":e.$locale.baseText(`${e.resourceKey}.menu.all`)},model:{value:e.isOwnerSubview,callback:function(n){e.isOwnerSubview=n},expression:"isOwnerSubview"}})],1):e._e()]},proxy:!0}:null],null,!0)},[e.loading?t("div",[t("n8n-loading",{class:[e.$style["header-loading"],"mb-l"],attrs:{variant:"custom"}}),t("n8n-loading",{class:[e.$style["card-loading"],"mb-2xs"],attrs:{variant:"custom"}}),t("n8n-loading",{class:e.$style["card-loading"],attrs:{variant:"custom"}})],1):[e.resources.length===0?t("div",[e._t("empty",function(){return[t("n8n-action-box",{attrs:{"data-test-id":"empty-resources-list",emoji:"ðŸ‘‹",heading:e.$locale.baseText(e.usersStore.currentUser.firstName?`${e.resourceKey}.empty.heading`:`${e.resourceKey}.empty.heading.userNotSetup`,{interpolate:{name:e.usersStore.currentUser.firstName}}),description:e.$locale.baseText(`${e.resourceKey}.empty.description`),buttonText:e.$locale.baseText(`${e.resourceKey}.empty.button`),buttonType:"secondary"},on:{click:function(n){return e.$emit("click:add",n)}}})]})],2):t("page-view-layout-list",{attrs:{overflow:e.type!=="list"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"mb-xs"},[e.starsBannerShouldRender?t("n8n-callout",{class:e.$style["github-stars-banner"],attrs:{theme:"secondary",icon:"star"},scopedSlots:e._u([{key:"trailingContent",fn:function(){return[t("n8n-link",{attrs:{to:e.repoUrl,size:"small",theme:"secondary",bold:"",underline:""}},[e._v(" "+e._s(e.$locale.baseText("githubStars.banner.link"))+" ")])]},proxy:!0}],null,!1,3877623074)},[t("span",{domProps:{innerHTML:e._s(e.$locale.baseText("githubStars.banner.title"))}})]):e._e(),t("div",{class:e.$style["filters-row"]},[t("n8n-input",{ref:"search",class:[e.$style.search,"mr-2xs"],attrs:{placeholder:e.$locale.baseText(`${e.resourceKey}.search.placeholder`),size:"medium",clearable:"","data-test-id":"resources-list-search"},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("n8n-icon",{attrs:{icon:"search"}})]},proxy:!0}]),model:{value:e.filters.search,callback:function(n){e.$set(e.filters,"search",n)},expression:"filters.search"}}),t("div",{class:e.$style["sort-and-filter"]},[t("n8n-select",{attrs:{size:"medium","data-test-id":"resources-list-sort"},model:{value:e.sortBy,callback:function(n){e.sortBy=n},expression:"sortBy"}},e._l(e.sortOptions,function(n){return t("n8n-option",{key:n,attrs:{value:n,label:e.$locale.baseText(`${e.resourceKey}.sort.${n}`)}})}),1),e.showFiltersDropdown?t("resource-filters-dropdown",{attrs:{keys:e.filterKeys,reset:e.resetFilters,value:e.filters,shareable:e.shareable},on:{input:function(n){return e.$emit("update:filters",n)},"update:filtersLength":e.onUpdateFiltersLength},scopedSlots:e._u([{key:"default",fn:function(n){return[e._t("filters",null,null,n)]}}],null,!0)}):e._e()],1)],1)],1),e._t("callout"),t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasFilters,expression:"hasFilters"}],staticClass:"mt-xs"},[t("n8n-info-tip",{attrs:{bold:!1}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.filters.active`))+" "),t("n8n-link",{attrs:{size:"small"},on:{click:e.resetFilters}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.filters.active.reset`))+" ")])],1)],1),t("div",{staticClass:"pb-xs"})]},proxy:!0}],null,!0)},[e._t("preamble"),e.filteredAndSortedSubviewResources.length>0?t("div",{ref:"listWrapperRef",class:e.$style.listWrapper},[e.type==="list"?t("n8n-recycle-scroller",{class:[e.$style.list,"list-style-none"],attrs:{"data-test-id":"resources-list",items:e.filteredAndSortedSubviewResources,"item-size":e.typeProps.itemSize,"item-key":"id"},scopedSlots:e._u([{key:"default",fn:function({item:n,updateItemSize:o}){return[e._t("default",null,{data:n,updateItemSize:o})]}}],null,!0)}):e._e(),e.typeProps.columns?t("n8n-datatable",{class:e.$style.datatable,attrs:{"data-test-id":"resources-table",columns:e.typeProps.columns,rows:e.filteredAndSortedSubviewResources,currentPage:e.currentPage,rowsPerPage:e.rowsPerPage},on:{"update:currentPage":e.setCurrentPage,"update:rowsPerPage":e.setRowsPerPage},scopedSlots:e._u([{key:"row",fn:function({columns:n,row:o}){return[e._t("default",null,{data:o,columns:n})]}}],null,!0)}):e._e()],1):t("n8n-text",{attrs:{color:"text-base",size:"medium","data-test-id":"resources-list-empty"}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.noResults`))+" "),e.shouldSwitchToAllSubview?[e.filters.search?t("span",[e._v(" ("+e._s(e.$locale.baseText(`${e.resourceKey}.noResults.withSearch.switchToShared.preamble`))+" "),t("n8n-link",{on:{click:function(n){return e.setOwnerSubview(!1)}}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.noResults.withSearch.switchToShared.link`))+" ")]),e._v(") ")],1):t("span",[e._v(" ("+e._s(e.$locale.baseText(`${e.resourceKey}.noResults.switchToShared.preamble`))+" "),t("n8n-link",{on:{click:function(n){return e.setOwnerSubview(!1)}}},[e._v(" "+e._s(e.$locale.baseText(`${e.resourceKey}.noResults.switchToShared.link`))+" ")]),e._v(") ")],1)]:e._e()],2),e._t("postamble")],2)]],2)},h0=[];const Xa={$style:d0};function p0(s){for(var e in Xa)this[e]=Xa[e]}var f0=p(i0,u0,h0,!1,p0,null,null,null);const tn=f0.exports,Ot={OPEN:"open",DELETE:"delete"},m0=x(D).extend({data(){return{EnterpriseEditionFeature:te}},components:{CredentialIcon:qi},props:{data:{type:Object,required:!0,default:()=>({id:"",createdAt:"",updatedAt:"",type:"",name:"",nodesAccess:[],sharedWith:[],ownedBy:{}})},readonly:{type:Boolean,default:!1}},computed:{...b(be,N,z),currentUser(){return this.usersStore.currentUser},credentialType(){return this.credentialsStore.getCredentialTypeByName(this.data.type)},credentialPermissions(){return this.currentUser?yi(this.currentUser,this.data):null},actions(){return this.credentialPermissions?[{label:this.$locale.baseText("credentials.item.open"),value:Ot.OPEN}].concat(this.credentialPermissions.delete?[{label:this.$locale.baseText("credentials.item.delete"),value:Ot.DELETE}]:[]):[]},formattedCreatedAtDate(){const s=new Date().getFullYear();return ji(this.data.createdAt,`d mmmm${this.data.createdAt.startsWith(s)?"":", yyyy"}`)}},methods:{async onClick(){this.uiStore.openExistingCredential(this.data.id)},async onAction(s){s===Ot.OPEN?await this.onClick():s===Ot.DELETE&&await this.confirmMessage(this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.message",{interpolate:{savedCredentialName:this.data.name}}),this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.headline"),null,this.$locale.baseText("credentialEdit.credentialEdit.confirmMessage.deleteCredential.confirmButtonText"))&&await this.credentialsStore.deleteCredential({id:this.data.id})}}}),g0={"card-link":"_card-link_1p68k_1","card-heading":"_card-heading_1p68k_9","card-actions":"_card-actions_1p68k_13"};var _0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",{class:e.$style["card-link"],on:{click:e.onClick},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("credential-icon",{attrs:{"credential-type-name":e.credentialType?e.credentialType.name:""}})]},proxy:!0},{key:"header",fn:function(){return[t("n8n-heading",{staticClass:"ph-no-capture",class:e.$style["card-heading"],attrs:{tag:"h2",bold:""}},[e._v(" "+e._s(e.data.name)+" ")])]},proxy:!0},{key:"append",fn:function(){return[t("div",{class:e.$style["card-actions"]},[t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[e.credentialPermissions.isOwner?t("n8n-badge",{staticClass:"mr-xs",attrs:{theme:"tertiary",bold:""}},[e._v(" "+e._s(e.$locale.baseText("credentials.item.owner"))+" ")]):e._e()],1),t("n8n-action-toggle",{attrs:{actions:e.actions,theme:"dark"},on:{action:e.onAction}})],1)]},proxy:!0}])},[t("n8n-text",{attrs:{color:"text-light",size:"small"}},[e.credentialType?t("span",[e._v(e._s(e.credentialType.displayName)+" | ")]):e._e(),t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[e._v(e._s(e.$locale.baseText("credentials.item.updated"))+" "),t("time-ago",{attrs:{date:e.data.updatedAt}}),e._v(" | ")],1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[e._v(e._s(e.$locale.baseText("credentials.item.created"))+" "+e._s(e.formattedCreatedAtDate)+" ")])])],1)},v0=[];const Ja={$style:g0};function w0(s){for(var e in Ja)this[e]=Ja[e]}var y0=p(m0,_0,v0,!1,w0,null,null,null);const b0=y0.exports,x0=x(D,Ie).extend({name:"SettingsPersonalView",components:{ResourcesListLayout:tn,TemplateCard:as,PageViewLayout:os,PageViewLayoutList:en,SettingsView:Qs,CredentialCard:b0,ResourceOwnershipSelect:Er,ResourceFiltersDropdown:Cr},data(){return{filters:{search:"",ownedBy:"",sharedWith:"",type:""}}},computed:{...b(be,le,N,z),allCredentials(){return this.credentialsStore.allCredentials},allCredentialTypes(){return this.credentialsStore.allCredentialTypes},credentialTypesById(){return this.credentialsStore.credentialTypesById}},methods:{addCredential(){this.uiStore.openModal(Ps),this.$telemetry.track("User clicked add cred button",{source:"Creds list"})},async initialize(){const s=[this.credentialsStore.fetchAllCredentials(),this.credentialsStore.fetchCredentialTypes(!1)];this.nodeTypesStore.allNodeTypes.length===0&&s.push(this.nodeTypesStore.getNodeTypes()),await Promise.all(s),await this.usersStore.fetchUsers()},onFilter(s,e,t){if(e.type.length>0&&(t=t&&e.type.includes(s.type)),e.search){const n=e.search.toLowerCase();t=t||this.credentialTypesById[s.type]&&this.credentialTypesById[s.type].displayName.toLowerCase().includes(n)}return t},sendFiltersTelemetry(s){this.$refs.layout.sendFiltersTelemetry(s)}},watch:{"filters.type"(){this.sendFiltersTelemetry("type")}}}),T0="_sidebarContainer_pm4w0_5",k0={"type-input":"_type-input_pm4w0_1",sidebarContainer:T0};var S0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("resources-list-layout",{ref:"layout",attrs:{"resource-key":"credentials",resources:e.allCredentials,initialize:e.initialize,filters:e.filters,"additional-filters-handler":e.onFilter,"type-props":{itemSize:77}},on:{"click:add":e.addCredential,"update:filters":function(n){e.filters=n}},scopedSlots:e._u([{key:"default",fn:function({data:n}){return[t("credential-card",{staticClass:"mb-2xs",attrs:{"data-test-id":"resources-list-item",data:n}})]}},{key:"filters",fn:function({setKeyValue:n}){return[t("div",{staticClass:"mb-s"},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("credentials.filters.type"),bold:!1,size:"small",color:"text-base"}}),t("n8n-select",{ref:"typeInput",class:e.$style["type-input"],attrs:{value:e.filters.type,size:"medium",multiple:"",filterable:""},on:{input:function(o){return n("type",o)}}},e._l(e.allCredentialTypes,function(o){return t("n8n-option",{key:o.name,attrs:{value:o.name,label:o.displayName}})}),1)],1)]}}])})},$0=[];const Qa={$style:k0};function E0(s){for(var e in Qa)this[e]=Qa[e]}var C0=p(x0,S0,$0,!1,E0,null,null,null);const N0=C0.exports,I0=C({name:"ExecutionsView",components:{ExecutionsList:ur}});var D0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ExecutionsList")},A0=[],P0=p(I0,D0,A0,!1,null,null,null,null);const O0=P0.exports,Me={OPEN:"open",SHARE:"share",DUPLICATE:"duplicate",DELETE:"delete"},M0=x(D).extend({data(){return{EnterpriseEditionFeature:te}},components:{WorkflowActivator:Ks},props:{data:{type:Object,required:!0,default:()=>({id:"",createdAt:"",updatedAt:"",active:!1,connections:{},nodes:[],name:"",sharedWith:[],ownedBy:{},versionId:""})},readonly:{type:Boolean,default:!1}},computed:{...b(P,N,z,B),currentUser(){return this.usersStore.currentUser||{}},workflowPermissions(){return Kt(this.currentUser,this.data)},actions(){return[{label:this.$locale.baseText("workflows.item.open"),value:Me.OPEN},{label:this.$locale.baseText("workflows.item.share"),value:Me.SHARE},{label:this.$locale.baseText("workflows.item.duplicate"),value:Me.DUPLICATE}].concat(this.workflowPermissions.delete?[{label:this.$locale.baseText("workflows.item.delete"),value:Me.DELETE}]:[])},formattedCreatedAtDate(){const s=new Date().getFullYear();return ji(this.data.createdAt,`d mmmm${this.data.createdAt.startsWith(s)?"":", yyyy"}`)}},methods:{async onClick(s){var e;if(s){if((e=this.$refs.activator)!=null&&e.$el.contains(s.target))return;if(s.metaKey||s.ctrlKey){const t=this.$router.resolve({name:d.WORKFLOW,params:{name:this.data.id}});window.open(t.href,"_blank");return}}await this.$router.push({name:d.WORKFLOW,params:{name:this.data.id}})},onClickTag(s,e){e.stopPropagation(),this.$emit("click:tag",s,e)},onExpandTags(){this.$emit("expand:tags")},async onAction(s){if(s===Me.OPEN)await this.onClick();else if(s===Me.DUPLICATE)this.uiStore.openModalWithData({name:Ws,data:{id:this.data.id,name:this.data.name,tags:(this.data.tags||[]).map(e=>e.id)}});else if(s===Me.SHARE)this.uiStore.openModalWithData({name:qt,data:{id:this.data.id}}),this.$telemetry.track("User opened sharing modal",{workflow_id:this.data.id,user_id_sharer:this.currentUser.id,sub_view:this.$route.name===d.WORKFLOWS?"Workflows listing":"Workflow editor"});else if(s===Me.DELETE){if(await this.confirmMessage(this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.message",{interpolate:{workflowName:this.data.name}}),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.headline"),"warning",this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.confirmButtonText"),this.$locale.baseText("mainSidebar.confirmMessage.workflowDelete.cancelButtonText"))===!1)return;try{await this.workflowsStore.deleteWorkflow(this.data.id)}catch(t){this.$showError(t,this.$locale.baseText("generic.deleteWorkflowError"));return}this.$showMessage({title:this.$locale.baseText("mainSidebar.showMessage.handleSelect1.title"),type:"success"})}}}}),R0="_cardLink_1j2h1_1",L0="_cardHeading_1j2h1_9",W0="_cardDescription_1j2h1_14",B0="_cardActions_1j2h1_20",U0={cardLink:R0,cardHeading:L0,cardDescription:W0,cardActions:B0};var F0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("n8n-card",{class:e.$style.cardLink,on:{click:e.onClick},scopedSlots:e._u([{key:"header",fn:function(){return[t("n8n-heading",{staticClass:"ph-no-capture",class:e.$style.cardHeading,attrs:{tag:"h2",bold:"","data-test-id":"workflow-card-name"}},[e._v(" "+e._s(e.data.name)+" ")])]},proxy:!0},{key:"append",fn:function(){return[t("div",{class:e.$style.cardActions},[t("enterprise-edition",{attrs:{features:[e.EnterpriseEditionFeature.Sharing]}},[e.workflowPermissions.isOwner?t("n8n-badge",{staticClass:"mr-xs",attrs:{theme:"tertiary",bold:""}},[e._v(" "+e._s(e.$locale.baseText("workflows.item.owner"))+" ")]):e._e()],1),t("workflow-activator",{ref:"activator",staticClass:"mr-s",attrs:{"workflow-active":e.data.active,"workflow-id":e.data.id,"data-test-id":"workflow-card-activator"}}),t("n8n-action-toggle",{attrs:{actions:e.actions,theme:"dark","data-test-id":"workflow-card-actions"},on:{action:e.onAction}})],1)]},proxy:!0}])},[t("div",{class:e.$style.cardDescription},[t("n8n-text",{attrs:{color:"text-light",size:"small"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[e._v(e._s(e.$locale.baseText("workflows.item.updated"))+" "),t("time-ago",{attrs:{date:e.data.updatedAt}}),e._v(" | ")],1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}],staticClass:"mr-2xs"},[e._v(e._s(e.$locale.baseText("workflows.item.created"))+" "+e._s(e.formattedCreatedAtDate)+" ")]),e.settingsStore.areTagsEnabled&&e.data.tags&&e.data.tags.length>0?t("span",{directives:[{name:"show",rawName:"v-show",value:e.data,expression:"data"}]},[t("n8n-tags",{attrs:{tags:e.data.tags,truncateAt:3,truncate:"","data-test-id":"workflow-card-tags"},on:{click:e.onClickTag,expand:e.onExpandTags}})],1):e._e()])],1)])},V0=[];const Za={$style:U0};function z0(s){for(var e in Za)this[e]=Za[e]}var j0=p(M0,F0,V0,!1,z0,null,null,null);const K0=j0.exports,Mt={ACTIVE:!0,DEACTIVATED:!1,ALL:""},H0=x(D,Ie).extend({name:"WorkflowsView",components:{ResourcesListLayout:tn,TemplateCard:as,PageViewLayout:os,PageViewLayoutList:en,SettingsView:Qs,WorkflowCard:K0,TagsDropdown:ts},data(){return{filters:{search:"",ownedBy:"",sharedWith:"",status:Mt.ALL,tags:[]}}},computed:{...b(P,N,z,B,be),currentUser(){return this.usersStore.currentUser||{}},allWorkflows(){return this.workflowsStore.allWorkflows},isShareable(){return this.settingsStore.isEnterpriseFeatureEnabled(te.Sharing)},hasActiveWorkflows(){return!!this.workflowsStore.activeWorkflows.length},statusFilterOptions(){return[{label:this.$locale.baseText("workflows.filters.status.all"),value:Mt.ALL},{label:this.$locale.baseText("workflows.filters.status.active"),value:Mt.ACTIVE},{label:this.$locale.baseText("workflows.filters.status.deactivated"),value:Mt.DEACTIVATED}]}},methods:{addWorkflow(){this.uiStore.nodeViewInitialized=!1,this.$router.push({name:d.NEW_WORKFLOW}),this.$telemetry.track("User clicked add workflow button",{source:"Workflows list"})},async initialize(){await Promise.all([this.usersStore.fetchUsers(),this.workflowsStore.fetchAllWorkflows(),this.workflowsStore.fetchActiveWorkflows(),this.credentialsStore.fetchAllCredentials()])},onClickTag(s,e){this.filters.tags.includes(s)||this.filters.tags.push(s)},onFilter(s,e,t){return this.settingsStore.areTagsEnabled&&e.tags.length>0&&(t=t&&e.tags.every(n=>{var o;return(o=s.tags)==null?void 0:o.find(a=>typeof a=="object"?`${a.id}`==`${n}`:`${a}`==`${n}`)})),e.status!==""&&(t=t&&s.active===e.status),t},sendFiltersTelemetry(s){this.$refs.layout.sendFiltersTelemetry(s)}},watch:{"filters.tags"(){this.sendFiltersTelemetry("tags")}},mounted(){this.usersStore.showPersonalizationSurvey()}}),G0="_actionsContainer_1gv00_1",q0="_emptyStateCard_1gv00_6",Y0="_emptyStateCardIcon_1gv00_19",X0={actionsContainer:G0,emptyStateCard:q0,emptyStateCardIcon:Y0};var J0=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("resources-list-layout",{ref:"layout",attrs:{"resource-key":"workflows",resources:e.allWorkflows,filters:e.filters,"additional-filters-handler":e.onFilter,"show-aside":e.allWorkflows.length>0,shareable:e.isShareable,initialize:e.initialize},on:{"click:add":e.addWorkflow,"update:filters":function(n){e.filters=n}},scopedSlots:e._u([{key:"default",fn:function({data:n,updateItemSize:o}){return[t("workflow-card",{staticClass:"mb-2xs",attrs:{"data-test-id":"resources-list-item",data:n},on:{"expand:tags":function(a){return o(n)},"click:tag":e.onClickTag}})]}},{key:"empty",fn:function(){return[t("div",{staticClass:"text-center mt-s"},[t("n8n-heading",{staticClass:"mb-2xs",attrs:{tag:"h2",size:"xlarge"}},[e._v(" "+e._s(e.$locale.baseText(e.currentUser.firstName?"workflows.empty.heading":"workflows.empty.heading.userNotSetup",{interpolate:{name:e.currentUser.firstName}}))+" ")]),t("n8n-text",{attrs:{size:"large",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("workflows.empty.description"))+" ")])],1),t("div",{class:["text-center","mt-2xl",e.$style.actionsContainer]},[t("n8n-card",{class:e.$style.emptyStateCard,attrs:{hoverable:"","data-test-id":"new-workflow-card"},on:{click:e.addWorkflow}},[t("n8n-icon",{class:e.$style.emptyStateCardIcon,attrs:{icon:"file"}}),t("n8n-text",{staticClass:"mt-xs",attrs:{size:"large",color:"text-base"}},[e._v(" "+e._s(e.$locale.baseText("workflows.empty.startFromScratch"))+" ")])],1)],1)]},proxy:!0},{key:"filters",fn:function({setKeyValue:n}){return[e.settingsStore.areTagsEnabled?t("div",{staticClass:"mb-s"},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("workflows.filters.tags"),bold:!1,size:"small",color:"text-base"}}),t("TagsDropdown",{attrs:{placeholder:e.$locale.baseText("workflowOpen.filterWorkflows"),currentTagIds:e.filters.tags,createEnabled:!1},on:{update:function(o){return n("tags",o)}}})],1):e._e(),t("div",{staticClass:"mb-s"},[t("n8n-input-label",{staticClass:"mb-3xs",attrs:{label:e.$locale.baseText("workflows.filters.status"),bold:!1,size:"small",color:"text-base"}}),t("n8n-select",{attrs:{value:e.filters.status,size:"medium"},on:{input:function(o){return n("status",o)}}},e._l(e.statusFilterOptions,function(o){return t("n8n-option",{key:o.label,attrs:{label:o.label,value:o.value}})}),1)],1)]}}])})},Q0=[];const ei={$style:X0};function Z0(s){for(var e in ei)this[e]=ei[e]}var eW=p(H0,J0,Q0,!1,Z0,null,null,null);const tW=eW.exports,sW=C({__name:"VariablesRow",props:{data:{type:Object,default:()=>({})},editing:{type:Boolean,default:!1}},emits:["save","cancel","edit","delete"],setup(s,{emit:e}){const t=s,{i18n:n}=bt(),o=Xy(),{showMessage:a}=lr(),i=P(),r=z(),l=zi(r.currentUser),c=H({...t.data}),h=H({key:!1,value:!1}),f=Y(()=>h.value.key&&h.value.value),u=H(),w=H(),g=H(`$vars.${t.data.key}`),v=Y(()=>i.isEnterpriseFeatureEnabled(te.Variables)),k=Y(()=>v.value&&(l.edit||l.delete));qe(()=>{pe()});const E=[{name:"REQUIRED"},{name:"MAX_LENGTH",config:{maximum:50}},{name:"MATCH_REGEX",config:{regex:/^[a-zA-Z]/,message:n.baseText("variables.editing.key.error.startsWithLetter")}},{name:"MATCH_REGEX",config:{regex:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:n.baseText("variables.editing.key.error.jsonKey")}}],I=[{name:"MAX_LENGTH",config:{maximum:220}}];Mr(()=>c.value.key,()=>{Wt(()=>{h.value.key&&V()})});function V(){g.value=`$vars.${c.value.key||t.data.key}`}async function W(){c.value={...t.data},e("cancel",c.value)}async function O(){e("save",c.value)}async function $(){e("edit",c.value),await Wt(),pe()}async function M(){e("delete",c.value)}function G(R,U){h.value[R]=U}function ne(){o(g.value),a({title:n.baseText("variables.row.usage.copiedToClipboard"),type:"success"})}function pe(){var R,U,X;(X=(U=(R=u.value)==null?void 0:R.inputRef)==null?void 0:U.focus)==null||X.call(U)}return{__sfc:!0,i18n:n,copyToClipboard:o,showMessage:a,settingsStore:i,usersStore:r,emit:e,props:t,permissions:l,modelValue:c,formValidationStatus:h,formValid:f,keyInputRef:u,valueInputRef:w,usage:g,isFeatureEnabled:v,showActions:k,keyValidationRules:E,valueValidationRules:I,updateUsageSyntax:V,onCancel:W,onSave:O,onEdit:$,onDelete:M,onValidate:G,onUsageClick:ne,focusFirstInput:pe}}}),nW="_variablesRow_dicva_1",oW="_hoverButtons_dicva_1",aW="_buttons_dicva_10",iW="_usageSyntax_dicva_21",rW={variablesRow:nW,hoverButtons:oW,buttons:aW,usageSyntax:iW};var lW=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("tr",{class:e.$style.variablesRow,attrs:{"data-test-id":"variables-row"}},[t("td",{staticClass:"variables-key-column"},[t("div",[e.editing?t("n8n-form-input",{ref:"keyInputRef",attrs:{label:"",name:"key","data-test-id":"variable-row-key-input",placeholder:n.i18n.baseText("variables.editing.key.placeholder"),required:"",validateOnBlur:"",validationRules:n.keyValidationRules},on:{validate:o=>n.onValidate("key",o)},model:{value:n.modelValue.key,callback:function(o){e.$set(n.modelValue,"key",o)},expression:"modelValue.key"}}):t("span",[e._v(e._s(e.data.key))])],1)]),t("td",{staticClass:"variables-value-column"},[t("div",[e.editing?t("n8n-form-input",{ref:"valueInputRef",attrs:{label:"",name:"value","data-test-id":"variable-row-value-input",placeholder:n.i18n.baseText("variables.editing.value.placeholder"),validateOnBlur:"",validationRules:n.valueValidationRules},on:{validate:o=>n.onValidate("value",o)},model:{value:n.modelValue.value,callback:function(o){e.$set(n.modelValue,"value",o)},expression:"modelValue.value"}}):t("span",[e._v(e._s(e.data.value))])],1)]),t("td",{staticClass:"variables-usage-column"},[t("div",[t("n8n-tooltip",{attrs:{placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(n.i18n.baseText("variables.row.usage.copyToClipboard"))+" ")]},proxy:!0}])},[n.modelValue.key&&n.usage?t("span",{class:e.$style.usageSyntax,on:{click:n.onUsageClick}},[e._v(e._s(n.usage))]):e._e()])],1)]),n.isFeatureEnabled?t("td",[e.editing?t("div",{class:e.$style.buttons},[t("n8n-button",{staticClass:"mr-xs",attrs:{"data-test-id":"variable-row-cancel-button",type:"tertiary"},on:{click:n.onCancel}},[e._v(" "+e._s(n.i18n.baseText("variables.row.button.cancel"))+" ")]),t("n8n-button",{attrs:{"data-test-id":"variable-row-save-button",disabled:!n.formValid,type:"primary"},on:{click:n.onSave}},[e._v(" "+e._s(n.i18n.baseText("variables.row.button.save"))+" ")])],1):t("div",{class:[e.$style.buttons,e.$style.hoverButtons]},[t("n8n-tooltip",{attrs:{disabled:n.permissions.edit,placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(n.i18n.baseText("variables.row.button.edit.onlyOwnerCanSave"))+" ")]},proxy:!0}],null,!1,3768934237)},[t("div",[t("n8n-button",{staticClass:"mr-xs",attrs:{"data-test-id":"variable-row-edit-button",type:"tertiary",disabled:!n.permissions.edit},on:{click:n.onEdit}},[e._v(" "+e._s(n.i18n.baseText("variables.row.button.edit"))+" ")])],1)]),t("n8n-tooltip",{attrs:{disabled:n.permissions.delete,placement:"top"},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(n.i18n.baseText("variables.row.button.delete.onlyOwnerCanDelete"))+" ")]},proxy:!0}],null,!1,1887337696)},[t("div",[t("n8n-button",{attrs:{"data-test-id":"variable-row-delete-button",type:"tertiary",disabled:!n.permissions.delete},on:{click:n.onDelete}},[e._v(" "+e._s(n.i18n.baseText("variables.row.button.delete"))+" ")])],1)])],1)]):e._e()])},cW=[];const ti={$style:rW};function dW(s){for(var e in ti)this[e]=ti[e]}var uW=p(sW,lW,cW,!1,dW,null,null,null);const hW=uW.exports,pW=C({__name:"VariablesView",setup(s){const e=P(),t=Fi(),n=z(),o=N(),a=Hs(),{i18n:i}=bt(),r=Vs(),l=H(null),{showError:c}=lr(),h="@tmpvar",f=H([]),u=H({}),w=zi(n.currentUser),g=Y(()=>e.isEnterpriseFeatureEnabled(te.Variables)),v=Y(()=>g.value&&w.create),k=Y(()=>[{id:0,path:"name",label:i.baseText("variables.table.key"),classes:["variables-key-column"]},{id:1,path:"value",label:i.baseText("variables.table.value"),classes:["variables-value-column"]},{id:2,path:"usage",label:i.baseText("variables.table.usage"),classes:["variables-usage-column"]},...g.value?[{id:3,path:"actions",label:""}]:[]]),E=Y(()=>o.contextBasedTranslationKeys),{upgradeLinkUrl:I}=tb({default:"&source=variables",desktop:"&utm_campaign=upgrade-variables"}),V=H([]),W=(L,K,de)=>`${L.id}`.startsWith(h)?-1:`${K.id}`.startsWith(h)?1:V.value.includes(L.id)&&V.value.includes(K.id)?V.value.indexOf(L.id)-V.value.indexOf(K.id):V.value.includes(L.id)?-1:V.value.includes(K.id)?1:de==="asc"?ge(L).trim().localeCompare(ge(K).trim()):ge(K).trim().localeCompare(ge(L).trim()),O={nameAsc:(L,K)=>W(L,K,"asc"),nameDesc:(L,K)=>W(L,K,"desc")};function $(){V.value=[]}async function M(){await t.fetchAllVariables(),f.value=[...t.variables]}function G(){const L={id:dd(h),key:"",value:""};l.value&&(l.value.$refs.listWrapperRef&&(l.value.$refs.listWrapperRef.scrollTop=0),l.value.currentPage!==1&&l.value.setCurrentPage(1)),f.value.unshift(L),u.value[L.id]=!0,a.track("User clicked add variable button")}async function ne(L){let K;try{if(typeof L.id=="string"&&L.id.startsWith(h)){const{id:de,...j}=L;K=await t.createVariable(j),f.value.unshift(K),f.value=f.value.filter(y=>y.id!==L.id),V.value.unshift(K.id)}else K=await t.updateVariable(L),f.value=f.value.map(de=>de.id===L.id?K:de),pe(K)}catch(de){c(de,i.baseText("variables.errors.save"))}}function pe(L){u.value={...u.value,[L.id]:!u.value[L.id]}}function R(L){typeof L.id=="string"&&L.id.startsWith(h)?f.value=f.value.filter(K=>K.id!==L.id):pe(L)}async function U(L){try{await r.confirm(i.baseText("variables.modals.deleteConfirm.message",{interpolate:{name:L.key}}),i.baseText("variables.modals.deleteConfirm.title"),{confirmButtonText:i.baseText("variables.modals.deleteConfirm.confirmButton"),cancelButtonText:i.baseText("variables.modals.deleteConfirm.cancelButton")})}catch(K){return}try{await t.deleteVariable(L),f.value=f.value.filter(K=>K.id!==L.id)}catch(K){c(K,i.baseText("variables.errors.delete"))}}function X(){window.open(I.value,"_blank")}function ge(L){return L.key}return{__sfc:!0,settingsStore:e,environmentsStore:t,usersStore:n,uiStore:o,telemetry:a,i18n:i,message:r,layoutRef:l,showError:c,TEMPORARY_VARIABLE_UID_BASE:h,allVariables:f,editMode:u,permissions:w,isFeatureEnabled:g,canCreateVariables:v,datatableColumns:k,contextBasedTranslationKeys:E,upgradeLinkUrl:I,newlyAddedVariableIds:V,nameSortFn:W,sortFns:O,resetNewVariablesList:$,initialize:M,addTemporaryVariable:G,saveVariable:ne,toggleEditing:pe,cancelEditing:R,deleteVariable:U,goToUpgrade:X,displayName:ge,ResourcesListLayout:tn,VariablesRow:hW}}}),fW="_sidebarContainer_pm4w0_5",mW={"type-input":"_type-input_pm4w0_1",sidebarContainer:fW};var gW=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.ResourcesListLayout,{ref:"layoutRef",attrs:{"resource-key":"variables",disabled:!n.isFeatureEnabled,resources:n.allVariables,initialize:n.initialize,shareable:!1,displayName:n.displayName,sortFns:n.sortFns,sortOptions:["nameAsc","nameDesc"],showFiltersDropdown:!1,type:"datatable","type-props":{columns:n.datatableColumns}},on:{sort:n.resetNewVariablesList,"click:add":n.addTemporaryVariable},scopedSlots:e._u([{key:"add-button",fn:function(){return[t("n8n-tooltip",{attrs:{placement:"top",disabled:n.canCreateVariables},scopedSlots:e._u([{key:"content",fn:function(){return[n.isFeatureEnabled?t("span",[e._v(e._s(n.i18n.baseText("variables.add.onlyOwnerCanCreate")))]):t("span",[e._v(e._s(n.i18n.baseText(`variables.add.unavailable${n.allVariables.length===0?".empty":""}`)))])]},proxy:!0}])},[t("div",[t("n8n-button",{attrs:{size:"large",block:"",disabled:!n.canCreateVariables,"data-test-id":"resources-list-add"},on:{click:n.addTemporaryVariable}},[e._v(" "+e._s(e.$locale.baseText("variables.add"))+" ")])],1)])]},proxy:!0},n.isFeatureEnabled?null:{key:"preamble",fn:function(){return[t("n8n-action-box",{staticClass:"mb-m",attrs:{"data-test-id":"unavailable-resources-list",emoji:"ðŸ‘‹",heading:e.$locale.baseText(n.contextBasedTranslationKeys.variables.unavailable.title),description:e.$locale.baseText(n.contextBasedTranslationKeys.variables.unavailable.description),buttonText:e.$locale.baseText(n.contextBasedTranslationKeys.variables.unavailable.button),buttonType:"secondary"},on:{click:n.goToUpgrade}})]},proxy:!0},n.isFeatureEnabled?null:{key:"empty",fn:function(){return[t("n8n-action-box",{attrs:{"data-test-id":"unavailable-resources-list",emoji:"ðŸ‘‹",heading:e.$locale.baseText(n.contextBasedTranslationKeys.variables.unavailable.title),description:e.$locale.baseText(n.contextBasedTranslationKeys.variables.unavailable.description),buttonText:e.$locale.baseText(n.contextBasedTranslationKeys.variables.unavailable.button),buttonType:"secondary"},on:{click:n.goToUpgrade}})]},proxy:!0},{key:"default",fn:function({data:o}){return[t(n.VariablesRow,{key:o.id,attrs:{editing:n.editMode[o.id],data:o},on:{save:n.saveVariable,edit:n.toggleEditing,cancel:n.cancelEditing,delete:n.deleteVariable}})]}}],null,!0)})},_W=[];const si={$style:mW};function vW(s){for(var e in si)this[e]=si[e]}var wW=p(pW,gW,_W,!1,vW,"45ef3eda",null,null);const yW=wW.exports,bW=C({__name:"SettingsUsageAndPlan",setup(s){const e=Ye(),t=pr(),n=hr(),o=H(`callback=${encodeURIComponent(`${window.location.origin}${window.location.pathname}`)}`),a=Y(()=>`${e.viewPlansUrl}&${o.value}&source=usage_page`),i=Y(()=>`${e.managePlanUrl}&${o.value}`),r=H(!1),l=H(""),c=H(null),h=()=>{se.Notification.success({title:J.baseText("settings.usageAndPlan.license.activation.success.title"),message:J.baseText("settings.usageAndPlan.license.activation.success.message",{interpolate:{name:e.planName,type:e.planId?J.baseText("settings.usageAndPlan.plan"):J.baseText("settings.usageAndPlan.edition")}}),position:"bottom-right"})},f=W=>{se.Notification.error({title:J.baseText("settings.usageAndPlan.license.activation.error.title"),message:W.message,position:"bottom-right"})},u=async()=>{try{await e.activateLicense(l.value),r.value=!1,h()}catch(W){f(W)}};qe(async()=>{if(!e.isDesktop){if(e.setLoading(!0),t.query.key)try{await e.activateLicense(t.query.key),await n.replace({query:{}}),h(),e.setLoading(!1);return}catch(W){f(W)}try{!t.query.key&&e.canUserActivateLicense?await e.refreshLicenseManagementToken():await e.getLicenseInfo(),e.setLoading(!1)}catch(W){W.name||(W.name=J.baseText("settings.usageAndPlan.error")),se.Notification.error({title:W.name,message:W.message,position:"bottom-right"})}}});const w=W=>{const O=e.telemetryPayload;O.action=W,wt.track("User clicked button on usage page",O)};return{__sfc:!0,usageStore:e,route:t,router:n,queryParamCallback:o,viewPlansUrl:a,managePlanUrl:i,activationKeyModal:r,activationKey:l,activationKeyInput:c,showActivationSuccess:h,showActivationError:f,onLicenseActivation:u,sendUsageTelemetry:w,onAddActivationKey:()=>{r.value=!0,w("add_activation_key")},onViewPlans:()=>{w("view_plans")},onManagePlan:()=>{w("manage_plan")},onDialogClosed:()=>{l.value=""},onDialogOpened:()=>{var W;(W=c.value)==null||W.focus()},openPricingPage:()=>{w("desktop_view_plans"),window.open(Fh,"_blank")},locale:J}}}),xW="_actionBox_1ok1x_1",TW="_spacedFlex_1ok1x_5",kW="_title_1ok1x_11",SW="_quota_1ok1x_16",$W="_count_1ok1x_28",EW="_buttons_1ok1x_33",CW="_chart_1ok1x_49",NW="_chartLine_1ok1x_56",IW="_chartBar_1ok1x_66",DW="_buttonTertiary_1ok1x_80",AW={actionBox:xW,spacedFlex:TW,title:kW,quota:SW,count:$W,buttons:EW,chart:CW,chartLine:NW,chartBar:IW,buttonTertiary:DW};var PW=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(n.locale.baseText("settings.usageAndPlan.title")))]),n.usageStore.isDesktop?t("n8n-action-box",{class:e.$style.actionBox,attrs:{heading:n.locale.baseText("settings.usageAndPlan.desktop.title"),description:n.locale.baseText("settings.usageAndPlan.desktop.description"),buttonText:n.locale.baseText("settings.usageAndPlan.button.plans")},on:{click:n.openPricingPage}}):e._e(),!n.usageStore.isDesktop&&!n.usageStore.isLoading?t("div",[t("n8n-heading",{class:e.$style.title,attrs:{size:"large"}},[t("i18n",{attrs:{path:"settings.usageAndPlan.description"},scopedSlots:e._u([{key:"name",fn:function(){return[e._v(e._s(n.usageStore.planName))]},proxy:!0},{key:"type",fn:function(){return[n.usageStore.planId?t("span",[e._v(e._s(n.locale.baseText("settings.usageAndPlan.plan")))]):t("span",[e._v(e._s(n.locale.baseText("settings.usageAndPlan.edition")))])]},proxy:!0}],null,!1,2973668506)})],1),t("div",{class:e.$style.quota},[t("n8n-text",{attrs:{size:"medium",color:"text-light"}},[e._v(" "+e._s(n.locale.baseText("settings.usageAndPlan.activeWorkflows"))+" ")]),t("div",{class:e.$style.chart},[n.usageStore.executionLimit>0?t("span",{class:e.$style.chartLine},[t("span",{class:e.$style.chartBar,style:{width:`${n.usageStore.executionPercentage}%`}})]):e._e(),t("i18n",{class:e.$style.count,attrs:{path:"settings.usageAndPlan.activeWorkflows.count"},scopedSlots:e._u([{key:"count",fn:function(){return[e._v(e._s(n.usageStore.executionCount))]},proxy:!0},{key:"limit",fn:function(){return[n.usageStore.executionLimit<0?t("span",[e._v(e._s(n.locale.baseText("settings.usageAndPlan.activeWorkflows.unlimited")))]):t("span",[e._v(e._s(n.usageStore.executionLimit))])]},proxy:!0}],null,!1,867348077)})],1)],1),t("n8n-info-tip",[e._v(e._s(n.locale.baseText("settings.usageAndPlan.activeWorkflows.hint")))]),t("div",{class:e.$style.buttons},[n.usageStore.canUserActivateLicense?t("n8n-button",{class:e.$style.buttonTertiary,attrs:{type:"tertiary",size:"large"},on:{click:n.onAddActivationKey}},[t("strong",[e._v(e._s(n.locale.baseText("settings.usageAndPlan.button.activation")))])]):e._e(),n.usageStore.managementToken?t("n8n-button",{attrs:{size:"large"},on:{click:n.onManagePlan}},[t("a",{attrs:{href:n.managePlanUrl,target:"_blank"}},[e._v(e._s(n.locale.baseText("settings.usageAndPlan.button.manage")))])]):t("n8n-button",{attrs:{size:"large"},on:{click:n.onViewPlans}},[t("a",{attrs:{href:n.viewPlansUrl,target:"_blank"}},[e._v(e._s(n.locale.baseText("settings.usageAndPlan.button.plans")))])])],1),t("el-dialog",{attrs:{width:"480px",top:"0",visible:n.activationKeyModal,title:n.locale.baseText("settings.usageAndPlan.dialog.activation.title")},on:{closed:n.onDialogClosed,opened:n.onDialogOpened,"update:visible":function(o){n.activationKeyModal=o}},scopedSlots:e._u([{key:"default",fn:function(){return[t("n8n-input",{ref:"activationKeyInput",attrs:{size:"medium",placeholder:n.locale.baseText("settings.usageAndPlan.dialog.activation.label")},model:{value:n.activationKey,callback:function(o){n.activationKey=o},expression:"activationKey"}})]},proxy:!0},{key:"footer",fn:function(){return[t("n8n-button",{attrs:{size:"medium",type:"secondary"},on:{click:function(o){n.activationKeyModal=!1}}},[e._v(" "+e._s(n.locale.baseText("settings.usageAndPlan.dialog.activation.cancel"))+" ")]),t("n8n-button",{attrs:{size:"medium"},on:{click:n.onLicenseActivation}},[e._v(" "+e._s(n.locale.baseText("settings.usageAndPlan.dialog.activation.activate"))+" ")])]},proxy:!0}],null,!1,453177732)})],1):e._e()],1)},OW=[];const ni={$style:AW};function MW(s){for(var e in ni)this[e]=ni[e]}var RW=p(bW,PW,OW,!1,MW,"047b4ba2",null,null);const LW=RW.exports,WW=C({__name:"SettingsSso",setup(s){const e=xt(),t=N(),n=Y(()=>e.isSamlLoginEnabled?J.baseText("settings.sso.activated"):J.baseText("settings.sso.deactivated")),o=H(!1),a=H(),i=H(),r=H(),l=async()=>{const u=await e.getSamlConfig();r.value=u==null?void 0:u.entityID,i.value=u==null?void 0:u.returnUrl,a.value=u==null?void 0:u.metadata,o.value=!!(u!=null&&u.metadata)},c=async()=>{try{await e.saveSamlConfig({metadata:a.value}),await l()}catch(u){se.Notification.error({title:"Error",message:u.message,position:"bottom-right"})}},h=async()=>{try{const u=await e.testSamlConfig();window.open(u,"_blank")}catch(u){se.Notification.error({title:"Error",message:u.message,position:"bottom-right"})}},f=()=>{t.goToUpgrade("sso","upgrade-sso")};return li(async()=>{if(e.isEnterpriseSamlEnabled)try{await l()}catch(u){se.Notification.error({title:"Error",message:u.message,position:"bottom-right"})}}),{__sfc:!0,ssoStore:e,uiStore:t,ssoActivatedLabel:n,ssoSettingsSaved:o,metadata:a,redirectUrl:i,entityId:r,getSamlConfig:l,onSave:c,onTest:h,goToUpgrade:f,locale:J,CopyInput:Zt}}}),BW="_top_1inyg_1",UW="_buttons_1inyg_14",FW="_group_1inyg_23",VW="_actionBox_1inyg_39",zW={top:BW,switch:"_switch_1inyg_8",buttons:UW,group:FW,actionBox:VW};var jW=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(n.locale.baseText("settings.sso.title")))]),t("div",{class:e.$style.top},[t("n8n-heading",{attrs:{size:"medium"}},[e._v(e._s(n.locale.baseText("settings.sso.subtitle")))]),n.ssoStore.isEnterpriseSamlEnabled?t("n8n-tooltip",{attrs:{disabled:n.ssoStore.isSamlLoginEnabled},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",[e._v(" "+e._s(n.locale.baseText("settings.sso.activation.tooltip"))+" ")])]},proxy:!0}],null,!1,701049960)},[t("el-switch",{class:e.$style.switch,attrs:{disabled:!n.ssoSettingsSaved,"inactive-text":n.ssoActivatedLabel},model:{value:n.ssoStore.isSamlLoginEnabled,callback:function(o){e.$set(n.ssoStore,"isSamlLoginEnabled",o)},expression:"ssoStore.isSamlLoginEnabled"}})],1):e._e()],1),t("n8n-info-tip",[t("i18n",{attrs:{path:"settings.sso.info"},scopedSlots:e._u([{key:"link",fn:function(){return[t("a",{attrs:{href:"https://docs.n8n.io/user-management/saml/",target:"_blank"}},[e._v(" "+e._s(n.locale.baseText("settings.sso.info.link"))+" ")])]},proxy:!0}])})],1),n.ssoStore.isEnterpriseSamlEnabled?t("div",{attrs:{"data-test-id":"sso-content-licensed"}},[t("div",{class:e.$style.group},[t("label",[e._v(e._s(n.locale.baseText("settings.sso.settings.redirectUrl.label")))]),t(n.CopyInput,{attrs:{value:n.redirectUrl,"copy-button-text":n.locale.baseText("generic.clickToCopy"),"toast-title":n.locale.baseText("settings.sso.settings.redirectUrl.copied")}}),t("small",[e._v(e._s(n.locale.baseText("settings.sso.settings.redirectUrl.help")))])],1),t("div",{class:e.$style.group},[t("label",[e._v(e._s(n.locale.baseText("settings.sso.settings.entityId.label")))]),t(n.CopyInput,{attrs:{value:n.entityId,"copy-button-text":n.locale.baseText("generic.clickToCopy"),"toast-title":n.locale.baseText("settings.sso.settings.entityId.copied")}}),t("small",[e._v(e._s(n.locale.baseText("settings.sso.settings.entityId.help")))])],1),t("div",{class:e.$style.group},[t("label",[e._v(e._s(n.locale.baseText("settings.sso.settings.ips.label")))]),t("n8n-input",{attrs:{type:"textarea",name:"metadata"},model:{value:n.metadata,callback:function(o){n.metadata=o},expression:"metadata"}}),t("small",[e._v(e._s(n.locale.baseText("settings.sso.settings.ips.help")))])],1),t("div",{class:e.$style.buttons},[t("n8n-button",{attrs:{disabled:!n.ssoSettingsSaved,type:"tertiary","data-test-id":"sso-test"},on:{click:n.onTest}},[e._v(" "+e._s(n.locale.baseText("settings.sso.settings.test"))+" ")]),t("n8n-button",{attrs:{disabled:!n.metadata,"data-test-id":"sso-save"},on:{click:n.onSave}},[e._v(" "+e._s(n.locale.baseText("settings.sso.settings.save"))+" ")])],1)]):t("n8n-action-box",{class:e.$style.actionBox,attrs:{"data-test-id":"sso-content-unlicensed",description:n.locale.baseText("settings.sso.actionBox.description"),buttonText:n.locale.baseText("settings.sso.actionBox.buttonText")},on:{click:n.goToUpgrade},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",[e._v(e._s(n.locale.baseText("settings.sso.actionBox.title")))])]},proxy:!0}])})],1)},KW=[];const oi={$style:zW};function HW(s){for(var e in oi)this[e]=oi[e]}var GW=p(WW,jW,KW,!1,HW,null,null,null);const qW=GW.exports,YW=x(D).extend({name:"SignoutView",computed:{...b(z)},methods:{async logout(){try{await this.usersStore.logout(),this.$router.replace({name:d.SIGNIN})}catch(s){this.$showError(s,this.$locale.baseText("auth.signout.error"))}}},mounted(){this.logout()}});var XW=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div")},JW=[],QW=p(YW,XW,JW,!1,null,null,null,null);const ZW=QW.exports,eB=C({__name:"SamlOnboarding",setup(s){var i,r;const e=hr(),t=xt(),n=H(!1),o=Ke({title:J.baseText("auth.signup.setupYourAccount"),buttonText:J.baseText("auth.signup.finishAccountSetup"),inputs:[{name:"firstName",initialValue:(i=t.userData)==null?void 0:i.firstName,properties:{label:J.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",initialValue:(r=t.userData)==null?void 0:r.lastName,properties:{label:J.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}}]});return{__sfc:!0,router:e,ssoStore:t,loading:n,FORM_CONFIG:o,onSubmit:async l=>{try{n.value=!0,await t.updateUser(l),await e.push({name:d.HOMEPAGE})}catch(c){n.value=!1,se.Notification.error({title:"Error",message:c.message,position:"bottom-right"})}},AuthView:ct}}});var tB=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.AuthView,{attrs:{form:n.FORM_CONFIG,formLoading:n.loading},on:{submit:n.onSubmit}})},sB=[],nB=p(eB,tB,sB,!1,null,null,null,null);const oB=nB.exports,aB=C({__name:"SettingsVersionControl",setup(s){const e=Ys(),t=N(),n=Vs(),o=Y(()=>e.state.sshKey),a=Y(()=>e.state.currentBranch),i=H([]),r=H(null);return{__sfc:!0,versionControlStore:e,uiStore:t,message:n,sshKey:o,branch:a,branches:i,selectElement:r,onContinue:()=>{e.initSsh({name:e.state.authorName,email:e.state.authorEmail,remoteRepository:e.state.repositoryUrl})},onConnect:()=>{e.initRepository()},onSelect:async u=>{var g;if(u===a.value)return;await n.confirm(J.baseText("settings.versionControl.switchBranch.description",{interpolate:{branch:u}}),J.baseText("settings.versionControl.switchBranch.title",{interpolate:{branch:u}})).catch(()=>{})==="confirm"&&(e.state.currentBranch=u,(g=r.value)==null||g.blur())},goToUpgrade:()=>{t.goToUpgrade("version-control","upgrade-version-control")},locale:J}}}),iB="_group_1s0uc_1",rB="_connect_1s0uc_16",lB="_actionBox_1s0uc_20",cB={group:iB,connect:rB,actionBox:lB};var dB=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("n8n-heading",{attrs:{size:"2xlarge"}},[e._v(e._s(n.locale.baseText("settings.versionControl.title")))]),n.versionControlStore.isEnterpriseVersionControlEnabled?t("div",{attrs:{"data-test-id":"version-control-content-licensed"}},[t("n8n-callout",{staticClass:"mt-2xl mb-l",attrs:{theme:"secondary",icon:"info-circle"}},[e._v(e._s(n.locale.baseText("settings.versionControl.description")))]),t("div",{class:e.$style.group},[t("label",{attrs:{for:"repoUrl"}},[e._v(e._s(n.locale.baseText("settings.versionControl.repoUrl")))]),t("n8n-input",{attrs:{id:"repoUrl",placeholder:n.locale.baseText("settings.versionControl.repoUrlPlaceholder")},model:{value:n.versionControlStore.state.repositoryUrl,callback:function(o){e.$set(n.versionControlStore.state,"repositoryUrl",o)},expression:"versionControlStore.state.repositoryUrl"}}),t("small",[e._v(e._s(n.locale.baseText("settings.versionControl.repoUrlDescription")))])],1),t("div",{class:e.$style.group},[t("label",{attrs:{for:"authorName"}},[e._v(e._s(n.locale.baseText("settings.versionControl.authorName")))]),t("n8n-input",{attrs:{id:"authorName"},model:{value:n.versionControlStore.state.authorName,callback:function(o){e.$set(n.versionControlStore.state,"authorName",o)},expression:"versionControlStore.state.authorName"}})],1),t("div",{class:e.$style.group},[t("label",{attrs:{for:"authorEmail"}},[e._v(e._s(n.locale.baseText("settings.versionControl.authorEmail")))]),t("n8n-input",{attrs:{id:"authorEmail"},model:{value:n.versionControlStore.state.authorEmail,callback:function(o){e.$set(n.versionControlStore.state,"authorEmail",o)},expression:"versionControlStore.state.authorEmail"}})],1),n.sshKey?e._e():t("n8n-button",{staticClass:"mt-2xs",attrs:{size:"large"},on:{click:n.onContinue}},[e._v(e._s(n.locale.baseText("settings.versionControl.button.continue")))]),n.sshKey?t("div",{class:e.$style.group},[t("label",[e._v(e._s(n.locale.baseText("settings.versionControl.sshKey")))]),t("CopyInput",{attrs:{value:n.versionControlStore.state.sshKey,"copy-button-text":n.locale.baseText("generic.clickToCopy")}}),t("n8n-notice",{staticClass:"mt-s",attrs:{type:"info"}},[t("i18n",{attrs:{path:"settings.versionControl.sshKeyDescription"},scopedSlots:e._u([{key:"link",fn:function(){return[t("a",{attrs:{href:"#",target:"_blank"}},[e._v(" "+e._s(n.locale.baseText("settings.versionControl.sshKeyDescriptionLink"))+" ")])]},proxy:!0}],null,!1,1223165324)})],1)],1):e._e(),n.sshKey?t("n8n-button",{class:e.$style.connect,attrs:{size:"large"},on:{click:n.onConnect}},[e._v(e._s(n.locale.baseText("settings.versionControl.button.connect")))]):e._e(),n.versionControlStore.state.branches.length?t("div",{class:e.$style.group},[t("label",[e._v(e._s(n.locale.baseText("settings.versionControl.branches")))]),t("n8n-select",{ref:"selectElement",attrs:{value:n.versionControlStore.state.currentBranch,size:"medium",filterable:""},on:{input:n.onSelect}},e._l(n.versionControlStore.state.branches,function(o){return t("n8n-option",{key:o,attrs:{value:o,label:o}})}),1)],1):e._e()],1):t("n8n-action-box",{class:e.$style.actionBox,attrs:{"data-test-id":"version-control-content-unlicensed",description:n.locale.baseText("settings.versionControl.actionBox.description"),buttonText:n.locale.baseText("settings.versionControl.actionBox.buttonText")},on:{click:n.goToUpgrade},scopedSlots:e._u([{key:"heading",fn:function(){return[t("span",[e._v(e._s(n.locale.baseText("settings.versionControl.actionBox.title")))])]},proxy:!0}])})],1)},uB=[];const ai={$style:cB};function hB(s){for(var e in ai)this[e]=ai[e]}var pB=p(aB,dB,uB,!1,hB,null,null,null);const fB=pB.exports;S.use(di);function Rt(){const s=P(),e=Vh(),t=s.isTemplatesEnabled;return!e.isVariantEnabled(Un.name,Un.variant)&&!t?{name:d.NOT_FOUND}:!1}const mB=[{path:"/",name:d.HOMEPAGE,meta:{getRedirect(){return{name:d.WORKFLOWS}},permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/collections/:id",name:d.COLLECTION,components:{default:CR,sidebar:Ee},meta:{templatesEnabled:!0,telemetry:{getProperties(s){const e=Oe();return{collection_id:s.params.id,wf_template_repo_session_id:e.currentSessionId}}},getRedirect:Rt,permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/templates/:id",name:d.TEMPLATE,components:{default:zR,sidebar:Ee},meta:{templatesEnabled:!0,getRedirect:Rt,telemetry:{getProperties(s){const e=Oe();return{template_id:s.params.id,wf_template_repo_session_id:e.currentSessionId}}},permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/templates/",name:d.TEMPLATES,components:{default:WL,sidebar:Ee},meta:{templatesEnabled:!0,getRedirect:Rt,scrollOffset:0,telemetry:{getProperties(s){return{wf_template_repo_session_id:Oe().currentSessionId}}},setScrollPosition(s){this.scrollOffset=s},permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/credentials",name:d.CREDENTIALS,components:{default:N0,sidebar:Ee},meta:{permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/variables",name:d.VARIABLES,components:{default:yW,sidebar:Ee},meta:{permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/executions",name:d.EXECUTIONS,components:{default:O0,sidebar:Ee},meta:{permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/workflow",redirect:"/workflow/new"},{path:"/workflows",name:d.WORKFLOWS,components:{default:tW,sidebar:Ee},meta:{permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/workflow/new",name:d.NEW_WORKFLOW,components:{default:At,header:Dt,sidebar:Ee},meta:{nodeView:!0,permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/workflow/:name",name:d.WORKFLOW,components:{default:At,header:Dt,sidebar:Ee},meta:{nodeView:!0,permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/workflow/:name/executions",name:d.WORKFLOW_EXECUTIONS,components:{default:rD,header:Dt,sidebar:Ee},meta:{keepWorkflowAlive:!0,permissions:{allow:{loginStatus:[ee.LoggedIn]}}},children:[{path:"",name:d.EXECUTION_HOME,components:{executionPreview:_D},meta:{keepWorkflowAlive:!0,permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:":executionId",name:d.EXECUTION_PREVIEW,components:{executionPreview:GD},meta:{keepWorkflowAlive:!0,permissions:{allow:{loginStatus:[ee.LoggedIn]}}}}]},{path:"/workflows/demo",name:d.DEMO,components:{default:At},meta:{permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/workflows/templates/:id",name:d.TEMPLATE_IMPORT,components:{default:At,header:Dt,sidebar:Ee},meta:{templatesEnabled:!0,getRedirect:Rt,permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/signin",name:d.SIGNIN,components:{default:LO},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[ee.LoggedOut]}}}},{path:"/signup",name:d.SIGNUP,components:{default:VO},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[ee.LoggedOut]}}}},{path:"/signout",name:d.SIGNOUT,components:{default:ZW},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"/setup",name:d.SETUP,components:{default:AO},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{role:[fe.Default]},deny:{shouldDeny:()=>P().isUserManagementEnabled===!1}}}},{path:"/forgot-password",name:d.FORGOT_PASSWORD,components:{default:nS},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[ee.LoggedOut]}}}},{path:"/change-password",name:d.CHANGE_PASSWORD,components:{default:Vk},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[ee.LoggedOut]}}}},{path:"/settings",component:Qs,props:!0,children:[{path:"usage",name:d.USAGE,components:{settingsView:LW},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:"usage"}}},permissions:{allow:{loginStatus:[ee.LoggedIn]},deny:{shouldDeny:()=>{var e;const s=P();return s.settings.hideUsagePage===!0||((e=s.settings.deployment)==null?void 0:e.type)==="cloud"}}}}},{path:"personal",name:d.PERSONAL_SETTINGS,components:{settingsView:BA},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:"personal"}}},permissions:{allow:{loginStatus:[ee.LoggedIn]},deny:{role:[fe.Default]}}}},{path:"users",name:d.USERS_SETTINGS,components:{settingsView:sP},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:"users"}}},permissions:{allow:{role:[fe.Default,fe.Owner]},deny:{shouldDeny:()=>{const s=P();return s.isUserManagementEnabled===!1&&!(s.isCloudDeployment||s.isDesktopDeployment)}}}}},{path:"api",name:d.API_SETTINGS,components:{settingsView:VP},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:"api"}}},permissions:{allow:{loginStatus:[ee.LoggedIn]},deny:{shouldDeny:()=>P().isPublicApiEnabled===!1}}}},{path:"version-control",name:d.VERSION_CONTROL,components:{settingsView:fB},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:"vc"}}},permissions:{allow:{role:[fe.Owner]},deny:{shouldDeny:()=>!window.localStorage.getItem("version-control")}}}},{path:"sso",name:d.SSO_SETTINGS,components:{settingsView:qW},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:"sso"}}},permissions:{allow:{role:[fe.Owner]},deny:{shouldDeny:()=>P().isDesktopDeployment}}}},{path:"log-streaming",name:d.LOG_STREAMING_SETTINGS,components:{settingsView:wO},meta:{telemetry:{pageCategory:"settings"},permissions:{allow:{role:[fe.Default,fe.Owner]},deny:{role:[fe.Member]}}}},{path:"community-nodes",name:d.COMMUNITY_NODES,components:{settingsView:DP},meta:{telemetry:{pageCategory:"settings"},permissions:{allow:{role:[fe.Default,fe.Owner]},deny:{shouldDeny:()=>P().isCommunityNodesFeatureEnabled===!1}}}},{path:"coming-soon/:featureId",name:d.FAKE_DOOR,components:{settingsView:EO},meta:{telemetry:{pageCategory:"settings",getProperties(s){return{feature:s.params.featureId}}},permissions:{allow:{loginStatus:[ee.LoggedIn]}}}},{path:"ldap",name:d.LDAP_SETTINGS,components:{settingsView:EA},meta:{permissions:{allow:{role:[fe.Default,fe.Owner]},deny:{role:[fe.Member]}}}}]},{path:"/saml/onboarding",name:d.SAML_ONBOARDING,components:{default:oB},meta:{telemetry:{pageCategory:"auth"},permissions:{allow:{loginStatus:[ee.LoggedIn]},deny:{shouldDeny:()=>{const s=P();return!xt().isEnterpriseSamlEnabled||s.isCloudDeployment||s.isDesktopDeployment}}}}},{path:"*",name:d.NOT_FOUND,component:Qk,props:{messageKey:"error.pageNotFound",errorCode:404,redirectTextKey:"error.goBack",redirectPage:d.HOMEPAGE},meta:{nodeView:!0,telemetry:{disabled:!0},permissions:{allow:{loginStatus:[ee.LoggedIn,ee.LoggedOut]}}}}];var ii;const Nr=new di({mode:"history",base:(ii=window.BASE_PATH)!=null?ii:"/",scrollBehavior(s,e,t){t===null&&s.name===d.TEMPLATES&&s.meta&&s.meta.setScrollPosition(0)},routes:mB});S.config.productionTip=!1;S.use(Zy);S.use(s=>zh(s));S.use(ud);const gB=hd();new S({i18n:jh,router:Nr,pinia:gB,render:s=>s(ok)}).$mount("#app");Nr.afterEach((s,e)=>{Ni("main.routeChange",Ii(),{from:e,to:s});const t=z();t.currentUser&&s.name&&s.name!==d.SIGNOUT&&!s.name.includes("Modal")&&t.showUserActivationSurveyModal()});export{GE as D,rt as N,vB as __vite_legacy_guard,Je as c,Tt as p,wt as t};
//# sourceMappingURL=index-3ee35394.js.map
