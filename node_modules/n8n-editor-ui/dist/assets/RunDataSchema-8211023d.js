import{d as y,c,r as v}from"./vendor-df0f493f.js";import"./axios-f993d27a.js";import{c3 as f,e9 as b,eb as x,p as $,bv as S,ec as A,bA as D,bw as P,bu as T}from"./ParameterInputList-a8424193.js";import{y as h,a9 as E}from"./n8n-8025af5e.js";import{D as k,t as F}from"./index-3ee35394.js";import{M as I}from"./MappingPill-ddae2198.js";import"./pinia-ba86f1d8.js";import"./flatted-8b14da7d.js";import"./vue-i18n-b439dfd7.js";import"./en-bbe6b9d4.js";import"./dateformat-ef117725.js";import"./lodash-es-e1022157.js";import"./vue-typed-mixins-a25478b2.js";import"./codemirror-lang-html-n8n-728c3977.js";import"./@jsplumb/browser-ui-ddea9532.js";import"./@jsplumb/core-75ba1e73.js";import"./@jsplumb/util-79bcf4d9.js";import"./@jsplumb/common-fe415eb9.js";import"./@jsplumb/connector-bezier-c9c16c6b.js";import"./uuid-cf522c50.js";import"./codemirror-lang-n8n-expression-0036beb8.js";import"./luxon-3d1ae2f1.js";import"./fast-json-stable-stringify-0e965c3b.js";import"./esprima-next-d1b163ef.js";import"./prettier-50ab9e24.js";import"./@fortawesome/fontawesome-svg-core-a6b9645d.js";import"./@fortawesome/free-solid-svg-icons-a2911fb5.js";import"./@fortawesome/free-regular-svg-icons-74cb85f8.js";import"./@fortawesome/vue-fontawesome-1701eda0.js";import"./vue2-touch-events-2bad05e9.js";import"./v-click-outside-01179a04.js";import"./vue-fragment-f3d0cc79.js";import"./vue-agile-00cde7d9.js";import"./timeago.js-a9e71aec.js";import"./canvas-confetti-60b90aac.js";import"./file-saver-d988540e.js";import"./vue2-teleport-53e66c3b.js";import"./vue-json-pretty-49f1c0cb.js";import"./humanize-duration-3471cd08.js";import"./vue-infinite-loading-8e5543e4.js";import"./copy-to-clipboard-fcf36459.js";const M=y({__name:"RunDataSchemaItem",props:{schema:null,level:null,parent:null,subKey:null,paneType:null,mappingEnabled:{type:Boolean},draggingPath:null,distanceFromActive:null,node:null},setup(l){const e=l,t=c(()=>Array.isArray(e.schema.value)),a=c(()=>{var s;return((s=e.parent)==null?void 0:s.type)==="array"}),n=c(()=>e.level===0&&Array.isArray(e.schema.value)&&e.schema.value.every(s=>!Array.isArray(s.value))),o=c(()=>a.value?`[${e.schema.key}]`:e.schema.key),m=c(()=>a.value?`${e.schema.type}[${e.schema.key}]`:e.schema.key),i=c(()=>Array.isArray(e.schema.value)?"":f(e.schema.value,600,0));return{__sfc:!0,props:e,isSchemaValueArray:t,isSchemaParentTypeArray:a,isFlat:n,key:o,schemaName:m,text:i,getJsonParameterPath:s=>b({nodeName:e.node.name,distanceFromActive:e.distanceFromActive,path:s}),transitionDelay:s=>`${s*.033}s`,getIconBySchemaType:s=>{switch(s){case"object":return"cube";case"array":return"list";case"string":case"null":return"font";case"number":return"hashtag";case"boolean":return"check-square";case"function":return"code";case"bigint":return"calculator";case"symbol":return"sun";case"undefined":return"ban"}x(s)}}}}),R="_item_14xdy_1",w="_sub_14xdy_14",V="_toggle_14xdy_20",K="_flat_14xdy_41",B="_pill_14xdy_51",W="_mappable_14xdy_70",J="_dragged_14xdy_78",N="_label_14xdy_89",j="_arrayIndex_14xdy_94",C="_text_14xdy_100",z={item:R,sub:w,toggle:V,flat:K,pill:B,mappable:W,dragged:J,label:N,arrayIndex:j,text:C};var H=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style.item,attrs:{"data-test-id":"run-data-schema-item"}},[e.level>0||e.level===0&&!a.isSchemaValueArray?t("div",{class:{[e.$style.pill]:!0,[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===e.schema.path},attrs:{title:e.schema.type}},[t("span",{class:e.$style.label,attrs:{"data-value":a.getJsonParameterPath(e.schema.path),"data-name":a.schemaName,"data-path":e.schema.path,"data-depth":e.level,"data-target":"mappable"}},[t("font-awesome-icon",{attrs:{icon:a.getIconBySchemaType(e.schema.type),size:"sm"}}),a.isSchemaParentTypeArray?t("span",[e._v(e._s(e.parent.key))]):e._e(),a.key?t("span",{class:{[e.$style.arrayIndex]:a.isSchemaParentTypeArray}},[e._v(e._s(a.key))]):e._e()],1)]):e._e(),a.text?t("span",{staticClass:"ph-no-capture",class:e.$style.text},[e._v(e._s(a.text))]):e._e(),e.level>0&&a.isSchemaValueArray?t("input",{attrs:{id:e.subKey,type:"checkbox",checked:""}}):e._e(),e.level>0&&a.isSchemaValueArray?t("label",{class:e.$style.toggle,attrs:{for:e.subKey}},[t("font-awesome-icon",{attrs:{icon:"angle-up"}})],1):e._e(),a.isSchemaValueArray?t("div",{class:{[e.$style.sub]:!0,[e.$style.flat]:a.isFlat}},e._l(e.schema.value,function(n,o){return t("run-data-schema-item",{key:`${n.type}-${e.level}-${o}`,style:{transitionDelay:a.transitionDelay(o)},attrs:{schema:n,level:e.level+1,parent:e.schema,paneType:e.paneType,subKey:`${e.paneType}_${n.type}-${e.level}-${o}`,mappingEnabled:e.mappingEnabled,draggingPath:e.draggingPath,distanceFromActive:e.distanceFromActive,node:e.node}})}),1):e._e()])},q=[];const _={$style:z};function L(l){for(var e in _)this[e]=_[e]}var U=h(M,H,q,!1,L,null,null,null);const G=U.exports,O=y({__name:"RunDataSchema",props:{data:null,mappingEnabled:{type:Boolean},distanceFromActive:{default:0},runIndex:null,totalRuns:null,paneType:null,node:null},setup(l){const e=l,t=v(""),a=$(),n=S(),o=c(()=>{const[r,...p]=e.data;return A(E({},r,...p,r))}),m=c(()=>D(e.data));return{__sfc:!0,props:e,draggingPath:t,ndvStore:a,webhooksStore:n,schema:o,isDataEmpty:m,onDragStart:r=>{var p;r&&((p=r.dataset)!=null&&p.path)&&(t.value=r.dataset.path),a.resetMappingTelemetry()},onDragEnd:r=>{t.value="",setTimeout(()=>{var d;const p=a.mappingTelemetry,s={src_node_type:(d=e.node)==null?void 0:d.type,src_field_name:r.dataset.name||"",src_nodes_back:e.distanceFromActive,src_run_index:e.runIndex,src_runs_total:e.totalRuns,src_field_nest_level:r.dataset.depth||0,src_view:"schema",src_element:r,success:!1,...p};T("runDataJson.onDragEnd",n,s),F.track("User dragged data for mapping",s)},1e3)},RunDataSchemaItem:G,Draggable:k,i18n:P,MappingPill:I}}}),Q="_schemaWrapper_1mtap_1",X="_schema_1mtap_1",Y={schemaWrapper:Q,schema:X};var Z=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{class:e.$style.schemaWrapper},[a.isDataEmpty?t("n8n-info-tip",[e._v(e._s(a.i18n.baseText("dataMapping.schemaView.emptyData")))]):t(a.Draggable,{attrs:{type:"mapping",targetDataKey:"mappable",disabled:!e.mappingEnabled},on:{dragstart:a.onDragStart,dragend:a.onDragEnd},scopedSlots:e._u([{key:"preview",fn:function({canDrop:n,el:o}){return[o?t(a.MappingPill,{attrs:{html:o.outerHTML,"can-drop":n}}):e._e()]}}])},[[t("div",{class:e.$style.schema},[t(a.RunDataSchemaItem,{attrs:{schema:a.schema,level:0,parent:null,paneType:e.paneType,subKey:`${a.schema.type}-0-0`,mappingEnabled:e.mappingEnabled,draggingPath:a.draggingPath,distanceFromActive:e.distanceFromActive,node:e.node}})],1)]],2)],1)},ee=[];const u={$style:Y};function ae(l){for(var e in u)this[e]=u[e]}var te=h(O,Z,ee,!1,ae,null,null,null);const He=te.exports;export{He as default};
//# sourceMappingURL=RunDataSchema-8211023d.js.map
