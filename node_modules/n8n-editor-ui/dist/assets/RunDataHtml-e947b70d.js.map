{"version":3,"file":"RunDataHtml-e947b70d.js","sources":["../../src/components/RunDataHtml.vue"],"sourcesContent":["<template>\n\t<div class=\"__html-display ph-no-capture\" v-html=\"html\"></div>\n</template>\n\n<script lang=\"ts\">\nimport type { PropType } from 'vue';\nimport type { INodeExecutionData } from 'n8n-workflow';\n\nexport default {\n\tname: 'RunDataHtml',\n\tprops: {\n\t\tinputData: {\n\t\t\ttype: Array as PropType<INodeExecutionData[]>,\n\t\t},\n\t},\n\tcomputed: {\n\t\thtml() {\n\t\t\tif (!this.inputData) return '';\n\n\t\t\treturn this.scopeCss(this.inputData[0].json.html as string);\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Scope all CSS selectors to prevent user stylesheets from leaking.\n\t\t */\n\t\tscopeCss(str: string) {\n\t\t\tconst stylesheets = str.match(/<style>([\\s\\S]*?)<\\/style>/g);\n\n\t\t\tif (!stylesheets) return str;\n\n\t\t\tconst map = stylesheets.reduce<Record<string, string>>((acc, match) => {\n\t\t\t\tmatch.split('\\n').forEach((line) => {\n\t\t\t\t\tif (line.endsWith('{')) acc[line] = ['.__html-display', line].join(' ');\n\t\t\t\t});\n\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\t\treturn Object.entries(map).reduce((acc, [key, value]) => acc.replace(key, value), str);\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n.__html-display {\n\tpadding: 0 var(--spacing-s);\n}\n</style>\n"],"names":["_sfc_main","str","stylesheets","map","acc","match","line","key","value"],"mappings":"0LAQA,MAAAA,EAAA,CACA,KAAA,cACA,MAAA,CACA,UAAA,CACA,KAAA,KACA,CACA,EACA,SAAA,CACA,MAAA,CACA,OAAA,KAAA,UAEA,KAAA,SAAA,KAAA,UAAA,CAAA,EAAA,KAAA,IAAA,EAFA,EAGA,CACA,EACA,QAAA,CAIA,SAAAC,EAAA,CACA,MAAAC,EAAAD,EAAA,MAAA,6BAAA,EAEA,GAAA,CAAAC,EAAA,OAAAD,EAEA,MAAAE,EAAAD,EAAA,OAAA,CAAAE,EAAAC,KACAA,EAAA,MAAA;AAAA,CAAA,EAAA,QAAAC,GAAA,CACAA,EAAA,SAAA,GAAA,IAAAF,EAAAE,CAAA,EAAA,CAAA,kBAAAA,CAAA,EAAA,KAAA,GAAA,EAAA,CACA,EAEAF,GACA,CAAA,CAAA,EAEA,OAAA,OAAA,QAAAD,CAAA,EAAA,OAAA,CAAAC,EAAA,CAAAG,EAAAC,CAAA,IAAAJ,EAAA,QAAAG,EAAAC,CAAA,EAAAP,CAAA,CACA,CACA,CACA"}