{"version":3,"file":"core-75ba1e73.js","sources":["../../../../../node_modules/.pnpm/@jsplumb+core@5.13.2/node_modules/@jsplumb/core/js/jsplumb.core.es.js"],"sourcesContent":["import { log, quadrant, gradient, pointOnLine, lineLength, uuid, isString, EventGenerator, isFunction, clone, extend, merge, setToArray, populate, isNumber, map, isObject, isAssignableFrom, getWithFunction, removeWithFunction, suggest, forEach, getsert, insertSorted, findWithFunction, rotatePoint, filterList, functionChain, addToDictionary, TWO_PI, theta, normal, perpendicularLineTo } from '@jsplumb/util';\nimport { EMPTY_BOUNDS, AbstractSegment, PerimeterAnchorShapes, AnchorLocations, DEFAULT, WILDCARD } from '@jsplumb/common';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar endpointMap = {};\nvar endpointComputers = {};\nvar handlers = {};\nvar EndpointFactory = {\n  get: function get(ep, name, params) {\n    var e = endpointMap[name];\n    if (!e) {\n      throw {\n        message: \"jsPlumb: unknown endpoint type '\" + name + \"'\"\n      };\n    } else {\n      return new e(ep, params);\n    }\n  },\n  clone: function clone(epr) {\n    var handler = handlers[epr.type];\n    return EndpointFactory.get(epr.endpoint, epr.type, handler.getParams(epr));\n  },\n  compute: function compute(endpoint, anchorPoint, orientation, endpointStyle) {\n    var c = endpointComputers[endpoint.type];\n    if (c != null) {\n      return c(endpoint, anchorPoint, orientation, endpointStyle);\n    } else {\n      log(\"jsPlumb: cannot find endpoint calculator for endpoint of type \", endpoint.type);\n    }\n  },\n  registerHandler: function registerHandler(eph) {\n    handlers[eph.type] = eph;\n    endpointMap[eph.type] = eph.cls;\n    endpointComputers[eph.type] = eph.compute;\n  }\n};\n\nvar EndpointRepresentation = function () {\n  function EndpointRepresentation(endpoint, params) {\n    _classCallCheck(this, EndpointRepresentation);\n    this.endpoint = endpoint;\n    _defineProperty(this, \"typeId\", void 0);\n    _defineProperty(this, \"x\", void 0);\n    _defineProperty(this, \"y\", void 0);\n    _defineProperty(this, \"w\", void 0);\n    _defineProperty(this, \"h\", void 0);\n    _defineProperty(this, \"computedValue\", void 0);\n    _defineProperty(this, \"bounds\", EMPTY_BOUNDS());\n    _defineProperty(this, \"classes\", []);\n    _defineProperty(this, \"instance\", void 0);\n    _defineProperty(this, \"type\", void 0);\n    params = params || {};\n    this.instance = endpoint.instance;\n    if (endpoint.cssClass) {\n      this.classes.push(endpoint.cssClass);\n    }\n    if (params.cssClass) {\n      this.classes.push(params.cssClass);\n    }\n  }\n  _createClass(EndpointRepresentation, [{\n    key: \"addClass\",\n    value: function addClass(c) {\n      this.classes.push(c);\n      this.instance.addEndpointClass(this.endpoint, c);\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(c) {\n      this.classes = this.classes.filter(function (_c) {\n        return _c !== c;\n      });\n      this.instance.removeEndpointClass(this.endpoint, c);\n    }\n  }, {\n    key: \"compute\",\n    value: function compute(anchorPoint, orientation, endpointStyle) {\n      this.computedValue = EndpointFactory.compute(this, anchorPoint, orientation, endpointStyle);\n      this.bounds.xmin = this.x;\n      this.bounds.ymin = this.y;\n      this.bounds.xmax = this.x + this.w;\n      this.bounds.ymax = this.y + this.h;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(v) {\n      this.instance.setEndpointVisible(this.endpoint, v);\n    }\n  }]);\n  return EndpointRepresentation;\n}();\n\nvar DotEndpoint = function (_EndpointRepresentati) {\n  _inherits(DotEndpoint, _EndpointRepresentati);\n  var _super = _createSuper(DotEndpoint);\n  function DotEndpoint(endpoint, params) {\n    var _this;\n    _classCallCheck(this, DotEndpoint);\n    _this = _super.call(this, endpoint, params);\n    _defineProperty(_assertThisInitialized(_this), \"radius\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"defaultOffset\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"defaultInnerRadius\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", DotEndpoint.type);\n    params = params || {};\n    _this.radius = params.radius || 5;\n    _this.defaultOffset = 0.5 * _this.radius;\n    _this.defaultInnerRadius = _this.radius / 3;\n    return _this;\n  }\n  return DotEndpoint;\n}(EndpointRepresentation);\n_defineProperty(DotEndpoint, \"type\", \"Dot\");\nvar DotEndpointHandler = {\n  type: DotEndpoint.type,\n  cls: DotEndpoint,\n  compute: function compute(ep, anchorPoint, orientation, endpointStyle) {\n    var x = anchorPoint.curX - ep.radius,\n        y = anchorPoint.curY - ep.radius,\n        w = ep.radius * 2,\n        h = ep.radius * 2;\n    if (endpointStyle && endpointStyle.stroke) {\n      var lw = endpointStyle.strokeWidth || 1;\n      x -= lw;\n      y -= lw;\n      w += lw * 2;\n      h += lw * 2;\n    }\n    ep.x = x;\n    ep.y = y;\n    ep.w = w;\n    ep.h = h;\n    return [x, y, w, h, ep.radius];\n  },\n  getParams: function getParams(ep) {\n    return {\n      radius: ep.radius\n    };\n  }\n};\n\nvar BlankEndpoint = function (_EndpointRepresentati) {\n  _inherits(BlankEndpoint, _EndpointRepresentati);\n  var _super = _createSuper(BlankEndpoint);\n  function BlankEndpoint(endpoint, params) {\n    var _this;\n    _classCallCheck(this, BlankEndpoint);\n    _this = _super.call(this, endpoint, params);\n    _defineProperty(_assertThisInitialized(_this), \"type\", BlankEndpoint.type);\n    return _this;\n  }\n  return BlankEndpoint;\n}(EndpointRepresentation);\n_defineProperty(BlankEndpoint, \"type\", \"Blank\");\nvar BlankEndpointHandler = {\n  type: BlankEndpoint.type,\n  cls: BlankEndpoint,\n  compute: function compute(ep, anchorPoint, orientation, endpointStyle) {\n    ep.x = anchorPoint.curX;\n    ep.y = anchorPoint.curY;\n    ep.w = 10;\n    ep.h = 0;\n    return [anchorPoint.curX, anchorPoint.curY, 10, 0];\n  },\n  getParams: function getParams(ep) {\n    return {};\n  }\n};\n\nvar RectangleEndpoint = function (_EndpointRepresentati) {\n  _inherits(RectangleEndpoint, _EndpointRepresentati);\n  var _super = _createSuper(RectangleEndpoint);\n  function RectangleEndpoint(endpoint, params) {\n    var _this;\n    _classCallCheck(this, RectangleEndpoint);\n    _this = _super.call(this, endpoint, params);\n    _defineProperty(_assertThisInitialized(_this), \"width\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"height\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", RectangleEndpoint.type);\n    params = params || {};\n    _this.width = params.width || 10;\n    _this.height = params.height || 10;\n    return _this;\n  }\n  _createClass(RectangleEndpoint, null, [{\n    key: \"_getParams\",\n    value: function _getParams(ep) {\n      return {\n        width: ep.width,\n        height: ep.height\n      };\n    }\n  }]);\n  return RectangleEndpoint;\n}(EndpointRepresentation);\n_defineProperty(RectangleEndpoint, \"type\", \"Rectangle\");\nvar RectangleEndpointHandler = {\n  type: RectangleEndpoint.type,\n  cls: RectangleEndpoint,\n  compute: function compute(ep, anchorPoint, orientation, endpointStyle) {\n    var width = endpointStyle.width || ep.width,\n        height = endpointStyle.height || ep.height,\n        x = anchorPoint.curX - width / 2,\n        y = anchorPoint.curY - height / 2;\n    ep.x = x;\n    ep.y = y;\n    ep.w = width;\n    ep.h = height;\n    return [x, y, width, height];\n  },\n  getParams: function getParams(ep) {\n    return {\n      width: ep.width,\n      height: ep.height\n    };\n  }\n};\n\nvar AbstractConnector = function () {\n  function AbstractConnector(connection, params) {\n    _classCallCheck(this, AbstractConnector);\n    this.connection = connection;\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"edited\", false);\n    _defineProperty(this, \"stub\", void 0);\n    _defineProperty(this, \"sourceStub\", void 0);\n    _defineProperty(this, \"targetStub\", void 0);\n    _defineProperty(this, \"maxStub\", void 0);\n    _defineProperty(this, \"typeId\", void 0);\n    _defineProperty(this, \"gap\", void 0);\n    _defineProperty(this, \"sourceGap\", void 0);\n    _defineProperty(this, \"targetGap\", void 0);\n    _defineProperty(this, \"segments\", []);\n    _defineProperty(this, \"totalLength\", 0);\n    _defineProperty(this, \"segmentProportions\", []);\n    _defineProperty(this, \"segmentProportionalLengths\", []);\n    _defineProperty(this, \"paintInfo\", null);\n    _defineProperty(this, \"strokeWidth\", void 0);\n    _defineProperty(this, \"x\", void 0);\n    _defineProperty(this, \"y\", void 0);\n    _defineProperty(this, \"w\", void 0);\n    _defineProperty(this, \"h\", void 0);\n    _defineProperty(this, \"segment\", void 0);\n    _defineProperty(this, \"bounds\", EMPTY_BOUNDS());\n    _defineProperty(this, \"cssClass\", void 0);\n    _defineProperty(this, \"hoverClass\", void 0);\n    _defineProperty(this, \"geometry\", void 0);\n    this.stub = params.stub || this.getDefaultStubs();\n    this.sourceStub = Array.isArray(this.stub) ? this.stub[0] : this.stub;\n    this.targetStub = Array.isArray(this.stub) ? this.stub[1] : this.stub;\n    this.gap = params.gap || 0;\n    this.sourceGap = Array.isArray(this.gap) ? this.gap[0] : this.gap;\n    this.targetGap = Array.isArray(this.gap) ? this.gap[1] : this.gap;\n    this.maxStub = Math.max(this.sourceStub, this.targetStub);\n    this.cssClass = params.cssClass || \"\";\n    this.hoverClass = params.hoverClass || \"\";\n  }\n  _createClass(AbstractConnector, [{\n    key: \"getTypeDescriptor\",\n    value: function getTypeDescriptor() {\n      return \"connector\";\n    }\n  }, {\n    key: \"getIdPrefix\",\n    value: function getIdPrefix() {\n      return \"_jsplumb_connector\";\n    }\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(g, internal) {\n      this.geometry = g;\n      this.edited = g != null && !internal;\n    }\n  }, {\n    key: \"exportGeometry\",\n    value: function exportGeometry() {\n      return this.geometry;\n    }\n  }, {\n    key: \"importGeometry\",\n    value: function importGeometry(g) {\n      this.geometry = g;\n      return true;\n    }\n  }, {\n    key: \"resetGeometry\",\n    value: function resetGeometry() {\n      this.geometry = null;\n      this.edited = false;\n    }\n  }, {\n    key: \"transformAnchorPlacement\",\n    value:\n    function transformAnchorPlacement(a, dx, dy) {\n      return {\n        x: a.x,\n        y: a.y,\n        ox: a.ox,\n        oy: a.oy,\n        curX: a.curX + dx,\n        curY: a.curY + dy\n      };\n    }\n  }, {\n    key: \"resetBounds\",\n    value: function resetBounds() {\n      this.bounds = EMPTY_BOUNDS();\n    }\n  }, {\n    key: \"findSegmentForPoint\",\n    value: function findSegmentForPoint(x, y) {\n      var out = {\n        d: Infinity,\n        s: null,\n        x: null,\n        y: null,\n        l: null,\n        x1: null,\n        y1: null,\n        x2: null,\n        y2: null,\n        index: null,\n        connectorLocation: null\n      };\n      for (var i = 0; i < this.segments.length; i++) {\n        var _s = this.segments[i].findClosestPointOnPath(x, y);\n        if (_s.d < out.d) {\n          out.d = _s.d;\n          out.l = _s.l;\n          out.x = _s.x;\n          out.y = _s.y;\n          out.s = this.segments[i];\n          out.x1 = _s.x1;\n          out.x2 = _s.x2;\n          out.y1 = _s.y1;\n          out.y2 = _s.y2;\n          out.index = i;\n          out.connectorLocation = this.segmentProportions[i][0] + _s.l * (this.segmentProportions[i][1] - this.segmentProportions[i][0]);\n        }\n      }\n      return out;\n    }\n  }, {\n    key: \"lineIntersection\",\n    value: function lineIntersection(x1, y1, x2, y2) {\n      var out = [];\n      for (var i = 0; i < this.segments.length; i++) {\n        out.push.apply(out, this.segments[i].lineIntersection(x1, y1, x2, y2));\n      }\n      return out;\n    }\n  }, {\n    key: \"boxIntersection\",\n    value: function boxIntersection(x, y, w, h) {\n      var out = [];\n      for (var i = 0; i < this.segments.length; i++) {\n        out.push.apply(out, this.segments[i].boxIntersection(x, y, w, h));\n      }\n      return out;\n    }\n  }, {\n    key: \"boundingBoxIntersection\",\n    value: function boundingBoxIntersection(box) {\n      var out = [];\n      for (var i = 0; i < this.segments.length; i++) {\n        out.push.apply(out, this.segments[i].boundingBoxIntersection(box));\n      }\n      return out;\n    }\n  }, {\n    key: \"_updateSegmentProportions\",\n    value: function _updateSegmentProportions() {\n      var curLoc = 0;\n      for (var i = 0; i < this.segments.length; i++) {\n        var sl = this.segments[i].getLength();\n        this.segmentProportionalLengths[i] = sl / this.totalLength;\n        this.segmentProportions[i] = [curLoc, curLoc += sl / this.totalLength];\n      }\n    }\n  }, {\n    key: \"_findSegmentForLocation\",\n    value: function _findSegmentForLocation(location, absolute) {\n      var idx, i, inSegmentProportion;\n      if (absolute) {\n        location = location > 0 ? location / this.totalLength : (this.totalLength + location) / this.totalLength;\n      }\n      if (location === 1) {\n        idx = this.segments.length - 1;\n        inSegmentProportion = 1;\n      } else if (location === 0) {\n        inSegmentProportion = 0;\n        idx = 0;\n      } else {\n        if (location >= 0.5) {\n          idx = 0;\n          inSegmentProportion = 0;\n          for (i = this.segmentProportions.length - 1; i > -1; i--) {\n            if (this.segmentProportions[i][1] >= location && this.segmentProportions[i][0] <= location) {\n              idx = i;\n              inSegmentProportion = (location - this.segmentProportions[i][0]) / this.segmentProportionalLengths[i];\n              break;\n            }\n          }\n        } else {\n          idx = this.segmentProportions.length - 1;\n          inSegmentProportion = 1;\n          for (i = 0; i < this.segmentProportions.length; i++) {\n            if (this.segmentProportions[i][1] >= location) {\n              idx = i;\n              inSegmentProportion = (location - this.segmentProportions[i][0]) / this.segmentProportionalLengths[i];\n              break;\n            }\n          }\n        }\n      }\n      return {\n        segment: this.segments[idx],\n        proportion: inSegmentProportion,\n        index: idx\n      };\n    }\n  }, {\n    key: \"_addSegment\",\n    value: function _addSegment(clazz, params) {\n      if (params.x1 === params.x2 && params.y1 === params.y2) {\n        return;\n      }\n      var s = new clazz(params);\n      this.segments.push(s);\n      this.totalLength += s.getLength();\n      this.updateBounds(s);\n    }\n  }, {\n    key: \"_clearSegments\",\n    value: function _clearSegments() {\n      this.totalLength = 0;\n      this.segments.length = 0;\n      this.segmentProportions.length = 0;\n      this.segmentProportionalLengths.length = 0;\n    }\n  }, {\n    key: \"getLength\",\n    value: function getLength() {\n      return this.totalLength;\n    }\n  }, {\n    key: \"_prepareCompute\",\n    value: function _prepareCompute(params) {\n      this.strokeWidth = params.strokeWidth;\n      var x1 = params.sourcePos.curX,\n          x2 = params.targetPos.curX,\n          y1 = params.sourcePos.curY,\n          y2 = params.targetPos.curY,\n          segment = quadrant({\n        x: x1,\n        y: y1\n      }, {\n        x: x2,\n        y: y2\n      }),\n          swapX = x2 < x1,\n          swapY = y2 < y1,\n          so = [params.sourcePos.ox, params.sourcePos.oy],\n          to = [params.targetPos.ox, params.targetPos.oy],\n          x = swapX ? x2 : x1,\n          y = swapY ? y2 : y1,\n          w = Math.abs(x2 - x1),\n          h = Math.abs(y2 - y1);\n      var noSourceOrientation = so[0] === 0 && so[1] === 0;\n      var noTargetOrientation = to[0] === 0 && to[1] === 0;\n      if (noSourceOrientation || noTargetOrientation) {\n        var index = w > h ? 0 : 1,\n            oIndex = [1, 0][index],\n            v1 = index === 0 ? x1 : y1,\n            v2 = index === 0 ? x2 : y2;\n        if (noSourceOrientation) {\n          so[index] = v1 > v2 ? -1 : 1;\n          so[oIndex] = 0;\n        }\n        if (noTargetOrientation) {\n          to[index] = v1 > v2 ? 1 : -1;\n          to[oIndex] = 0;\n        }\n      }\n      var sx = swapX ? w + this.sourceGap * so[0] : this.sourceGap * so[0],\n          sy = swapY ? h + this.sourceGap * so[1] : this.sourceGap * so[1],\n          tx = swapX ? this.targetGap * to[0] : w + this.targetGap * to[0],\n          ty = swapY ? this.targetGap * to[1] : h + this.targetGap * to[1],\n          oProduct = so[0] * to[0] + so[1] * to[1];\n      var result = {\n        sx: sx,\n        sy: sy,\n        tx: tx,\n        ty: ty,\n        xSpan: Math.abs(tx - sx),\n        ySpan: Math.abs(ty - sy),\n        mx: (sx + tx) / 2,\n        my: (sy + ty) / 2,\n        so: so,\n        to: to,\n        x: x,\n        y: y,\n        w: w,\n        h: h,\n        segment: segment,\n        startStubX: sx + so[0] * this.sourceStub,\n        startStubY: sy + so[1] * this.sourceStub,\n        endStubX: tx + to[0] * this.targetStub,\n        endStubY: ty + to[1] * this.targetStub,\n        isXGreaterThanStubTimes2: Math.abs(sx - tx) > this.sourceStub + this.targetStub,\n        isYGreaterThanStubTimes2: Math.abs(sy - ty) > this.sourceStub + this.targetStub,\n        opposite: oProduct === -1,\n        perpendicular: oProduct === 0,\n        orthogonal: oProduct === 1,\n        sourceAxis: so[0] === 0 ? \"y\" : \"x\",\n        points: [x, y, w, h, sx, sy, tx, ty],\n        stubs: [this.sourceStub, this.targetStub]\n      };\n      result.anchorOrientation = result.opposite ? \"opposite\" : result.orthogonal ? \"orthogonal\" : \"perpendicular\";\n      return result;\n    }\n  }, {\n    key: \"updateBounds\",\n    value: function updateBounds(segment) {\n      var segBounds = segment.extents;\n      this.bounds.xmin = Math.min(this.bounds.xmin, segBounds.xmin);\n      this.bounds.xmax = Math.max(this.bounds.xmax, segBounds.xmax);\n      this.bounds.ymin = Math.min(this.bounds.ymin, segBounds.ymin);\n      this.bounds.ymax = Math.max(this.bounds.ymax, segBounds.ymax);\n    }\n  }, {\n    key: \"dumpSegmentsToConsole\",\n    value: function dumpSegmentsToConsole() {\n      log(\"SEGMENTS:\");\n      for (var i = 0; i < this.segments.length; i++) {\n        log(this.segments[i].type, \"\" + this.segments[i].getLength(), \"\" + this.segmentProportions[i]);\n      }\n    }\n  }, {\n    key: \"pointOnPath\",\n    value: function pointOnPath(location, absolute) {\n      var seg = this._findSegmentForLocation(location, absolute);\n      return seg.segment && seg.segment.pointOnPath(seg.proportion, false) || {\n        x: 0,\n        y: 0\n      };\n    }\n  }, {\n    key: \"gradientAtPoint\",\n    value: function gradientAtPoint(location, absolute) {\n      var seg = this._findSegmentForLocation(location, absolute);\n      return seg.segment && seg.segment.gradientAtPoint(seg.proportion, false) || 0;\n    }\n  }, {\n    key: \"pointAlongPathFrom\",\n    value: function pointAlongPathFrom(location, distance, absolute) {\n      var seg = this._findSegmentForLocation(location, absolute);\n      return seg.segment && seg.segment.pointAlongPathFrom(seg.proportion, distance, false) || {\n        x: 0,\n        y: 0\n      };\n    }\n  }, {\n    key: \"compute\",\n    value: function compute(params) {\n      this.paintInfo = this._prepareCompute(params);\n      this._clearSegments();\n      this._compute(this.paintInfo, params);\n      this.x = this.paintInfo.points[0];\n      this.y = this.paintInfo.points[1];\n      this.w = this.paintInfo.points[2];\n      this.h = this.paintInfo.points[3];\n      this.segment = this.paintInfo.segment;\n      this._updateSegmentProportions();\n    }\n  }, {\n    key: \"setAnchorOrientation\",\n    value: function setAnchorOrientation(idx, orientation) {}\n  }]);\n  return AbstractConnector;\n}();\n\nvar StraightSegment = function (_AbstractSegment) {\n  _inherits(StraightSegment, _AbstractSegment);\n  var _super = _createSuper(StraightSegment);\n  function StraightSegment(params) {\n    var _this;\n    _classCallCheck(this, StraightSegment);\n    _this = _super.call(this, params);\n    _defineProperty(_assertThisInitialized(_this), \"length\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"m\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"m2\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", StraightSegment.segmentType);\n    _this._setCoordinates({\n      x1: params.x1,\n      y1: params.y1,\n      x2: params.x2,\n      y2: params.y2\n    });\n    return _this;\n  }\n  _createClass(StraightSegment, [{\n    key: \"getPath\",\n    value: function getPath(isFirstSegment) {\n      return (isFirstSegment ? \"M \" + this.x1 + \" \" + this.y1 + \" \" : \"\") + \"L \" + this.x2 + \" \" + this.y2;\n    }\n  }, {\n    key: \"_recalc\",\n    value: function _recalc() {\n      this.length = Math.sqrt(Math.pow(this.x2 - this.x1, 2) + Math.pow(this.y2 - this.y1, 2));\n      this.m = gradient({\n        x: this.x1,\n        y: this.y1\n      }, {\n        x: this.x2,\n        y: this.y2\n      });\n      this.m2 = -1 / this.m;\n      this.extents = {\n        xmin: Math.min(this.x1, this.x2),\n        ymin: Math.min(this.y1, this.y2),\n        xmax: Math.max(this.x1, this.x2),\n        ymax: Math.max(this.y1, this.y2)\n      };\n    }\n  }, {\n    key: \"getLength\",\n    value: function getLength() {\n      return this.length;\n    }\n  }, {\n    key: \"getGradient\",\n    value: function getGradient() {\n      return this.m;\n    }\n  }, {\n    key: \"_setCoordinates\",\n    value: function _setCoordinates(coords) {\n      this.x1 = coords.x1;\n      this.y1 = coords.y1;\n      this.x2 = coords.x2;\n      this.y2 = coords.y2;\n      this._recalc();\n    }\n  }, {\n    key: \"pointOnPath\",\n    value: function pointOnPath(location, absolute) {\n      if (location === 0 && !absolute) {\n        return {\n          x: this.x1,\n          y: this.y1\n        };\n      } else if (location === 1 && !absolute) {\n        return {\n          x: this.x2,\n          y: this.y2\n        };\n      } else {\n        var l = absolute ? location > 0 ? location : this.length + location : location * this.length;\n        return pointOnLine({\n          x: this.x1,\n          y: this.y1\n        }, {\n          x: this.x2,\n          y: this.y2\n        }, l);\n      }\n    }\n  }, {\n    key: \"gradientAtPoint\",\n    value: function gradientAtPoint(location, absolute) {\n      return this.m;\n    }\n  }, {\n    key: \"pointAlongPathFrom\",\n    value: function pointAlongPathFrom(location, distance, absolute) {\n      var p = this.pointOnPath(location, absolute),\n          farAwayPoint = distance <= 0 ? {\n        x: this.x1,\n        y: this.y1\n      } : {\n        x: this.x2,\n        y: this.y2\n      };\n      if (distance <= 0 && Math.abs(distance) > 1) {\n        distance *= -1;\n      }\n      return pointOnLine(p, farAwayPoint, distance);\n    }\n  }, {\n    key: \"within\",\n    value: function within(a, b, c) {\n      return c >= Math.min(a, b) && c <= Math.max(a, b);\n    }\n  }, {\n    key: \"closest\",\n    value: function closest(a, b, c) {\n      return Math.abs(c - a) < Math.abs(c - b) ? a : b;\n    }\n  }, {\n    key: \"findClosestPointOnPath\",\n    value: function findClosestPointOnPath(x, y) {\n      var out = {\n        d: Infinity,\n        x: null,\n        y: null,\n        l: null,\n        x1: this.x1,\n        x2: this.x2,\n        y1: this.y1,\n        y2: this.y2\n      };\n      if (this.m === 0) {\n        out.y = this.y1;\n        out.x = this.within(this.x1, this.x2, x) ? x : this.closest(this.x1, this.x2, x);\n      } else if (this.m === Infinity || this.m === -Infinity) {\n        out.x = this.x1;\n        out.y = this.within(this.y1, this.y2, y) ? y : this.closest(this.y1, this.y2, y);\n      } else {\n        var b = this.y1 - this.m * this.x1,\n            b2 = y - this.m2 * x,\n        _x1 = (b2 - b) / (this.m - this.m2),\n            _y1 = this.m * _x1 + b;\n        out.x = this.within(this.x1, this.x2, _x1) ? _x1 : this.closest(this.x1, this.x2, _x1);\n        out.y = this.within(this.y1, this.y2, _y1) ? _y1 : this.closest(this.y1, this.y2, _y1);\n      }\n      var fractionInSegment = lineLength({\n        x: out.x,\n        y: out.y\n      }, {\n        x: this.x1,\n        y: this.y1\n      });\n      out.d = lineLength({\n        x: x,\n        y: y\n      }, out);\n      out.l = fractionInSegment / length;\n      return out;\n    }\n  }, {\n    key: \"_pointLiesBetween\",\n    value: function _pointLiesBetween(q, p1, p2) {\n      return p2 > p1 ? p1 <= q && q <= p2 : p1 >= q && q >= p2;\n    }\n  }, {\n    key: \"lineIntersection\",\n    value: function lineIntersection(_x1, _y1, _x2, _y2) {\n      var m2 = Math.abs(gradient({\n        x: _x1,\n        y: _y1\n      }, {\n        x: _x2,\n        y: _y2\n      })),\n          m1 = Math.abs(this.m),\n          b = m1 === Infinity ? this.x1 : this.y1 - m1 * this.x1,\n          out = [],\n          b2 = m2 === Infinity ? _x1 : _y1 - m2 * _x1;\n      if (m2 !== m1) {\n        if (m2 === Infinity && m1 === 0) {\n          if (this._pointLiesBetween(_x1, this.x1, this.x2) && this._pointLiesBetween(this.y1, _y1, _y2)) {\n            out.push({\n              x: _x1,\n              y: this.y1\n            });\n          }\n        } else if (m2 === 0 && m1 === Infinity) {\n          if (this._pointLiesBetween(_y1, this.y1, this.y2) && this._pointLiesBetween(this.x1, _x1, _x2)) {\n            out.push({\n              x: this.x1,\n              y: _y1\n            });\n          }\n        } else {\n          var X, Y;\n          if (m2 === Infinity) {\n            X = _x1;\n            if (this._pointLiesBetween(X, this.x1, this.x2)) {\n              Y = m1 * _x1 + b;\n              if (this._pointLiesBetween(Y, _y1, _y2)) {\n                out.push({\n                  x: X,\n                  y: Y\n                });\n              }\n            }\n          } else if (m2 === 0) {\n            Y = _y1;\n            if (this._pointLiesBetween(Y, this.y1, this.y2)) {\n              X = (_y1 - b) / m1;\n              if (this._pointLiesBetween(X, _x1, _x2)) {\n                out.push({\n                  x: X,\n                  y: Y\n                });\n              }\n            }\n          } else {\n            X = (b2 - b) / (m1 - m2);\n            Y = m1 * X + b;\n            if (this._pointLiesBetween(X, this.x1, this.x2) && this._pointLiesBetween(Y, this.y1, this.y2)) {\n              out.push({\n                x: X,\n                y: Y\n              });\n            }\n          }\n        }\n      }\n      return out;\n    }\n  }, {\n    key: \"boxIntersection\",\n    value: function boxIntersection(x, y, w, h) {\n      var a = [];\n      a.push.apply(a, this.lineIntersection(x, y, x + w, y));\n      a.push.apply(a, this.lineIntersection(x + w, y, x + w, y + h));\n      a.push.apply(a, this.lineIntersection(x + w, y + h, x, y + h));\n      a.push.apply(a, this.lineIntersection(x, y + h, x, y));\n      return a;\n    }\n  }]);\n  return StraightSegment;\n}(AbstractSegment);\n_defineProperty(StraightSegment, \"segmentType\", \"Straight\");\n\nvar StraightConnector = function (_AbstractConnector) {\n  _inherits(StraightConnector, _AbstractConnector);\n  var _super = _createSuper(StraightConnector);\n  function StraightConnector() {\n    var _this;\n    _classCallCheck(this, StraightConnector);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"type\", StraightConnector.type);\n    return _this;\n  }\n  _createClass(StraightConnector, [{\n    key: \"getDefaultStubs\",\n    value: function getDefaultStubs() {\n      return [0, 0];\n    }\n  }, {\n    key: \"_compute\",\n    value: function _compute(paintInfo, p) {\n      this._addSegment(StraightSegment, {\n        x1: paintInfo.sx,\n        y1: paintInfo.sy,\n        x2: paintInfo.startStubX,\n        y2: paintInfo.startStubY\n      });\n      this._addSegment(StraightSegment, {\n        x1: paintInfo.startStubX,\n        y1: paintInfo.startStubY,\n        x2: paintInfo.endStubX,\n        y2: paintInfo.endStubY\n      });\n      this._addSegment(StraightSegment, {\n        x1: paintInfo.endStubX,\n        y1: paintInfo.endStubY,\n        x2: paintInfo.tx,\n        y2: paintInfo.ty\n      });\n      this.geometry = {\n        source: p.sourcePos,\n        target: p.targetPos\n      };\n    }\n  }, {\n    key: \"transformGeometry\",\n    value: function transformGeometry(g, dx, dy) {\n      return {\n        source: this.transformAnchorPlacement(g.source, dx, dy),\n        target: this.transformAnchorPlacement(g.target, dx, dy)\n      };\n    }\n  }]);\n  return StraightConnector;\n}(AbstractConnector);\n_defineProperty(StraightConnector, \"type\", \"Straight\");\n\nvar connectorMap = {};\nvar Connectors = {\n  get: function get(connection, name, params) {\n    var c = connectorMap[name];\n    if (!c) {\n      throw {\n        message: \"jsPlumb: unknown connector type '\" + name + \"'\"\n      };\n    } else {\n      return new c(connection, params);\n    }\n  },\n  register: function register(name, conn) {\n    connectorMap[name] = conn;\n  }\n};\n\nfunction cls() {\n  for (var _len = arguments.length, className = new Array(_len), _key = 0; _key < _len; _key++) {\n    className[_key] = arguments[_key];\n  }\n  return className.map(function (cn) {\n    return \".\" + cn;\n  }).join(\",\");\n}\nfunction classList() {\n  for (var _len2 = arguments.length, className = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    className[_key2] = arguments[_key2];\n  }\n  return className.join(\" \");\n}\nfunction att() {\n  for (var _len3 = arguments.length, attName = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    attName[_key3] = arguments[_key3];\n  }\n  return attName.map(function (an) {\n    return \"[\" + an + \"]\";\n  }).join(\",\");\n}\nvar SOURCE = \"source\";\nvar TARGET = \"target\";\nvar BLOCK = \"block\";\nvar NONE = \"none\";\nvar SOURCE_INDEX = 0;\nvar TARGET_INDEX = 1;\nvar ABSOLUTE = \"absolute\";\nvar FIXED = \"fixed\";\nvar STATIC = \"static\";\nvar ATTRIBUTE_GROUP = \"data-jtk-group\";\nvar ATTRIBUTE_MANAGED = \"data-jtk-managed\";\nvar ATTRIBUTE_NOT_DRAGGABLE = \"data-jtk-not-draggable\";\nvar ATTRIBUTE_TABINDEX = \"tabindex\";\nvar ATTRIBUTE_SCOPE = \"data-jtk-scope\";\nvar ATTRIBUTE_SCOPE_PREFIX = ATTRIBUTE_SCOPE + \"-\";\nvar CHECK_CONDITION = \"checkCondition\";\nvar CHECK_DROP_ALLOWED = \"checkDropAllowed\";\nvar CLASS_CONNECTOR = \"jtk-connector\";\nvar CLASS_CONNECTOR_OUTLINE = \"jtk-connector-outline\";\nvar CLASS_CONNECTED = \"jtk-connected\";\nvar CLASS_ENDPOINT = \"jtk-endpoint\";\nvar CLASS_ENDPOINT_CONNECTED = \"jtk-endpoint-connected\";\nvar CLASS_ENDPOINT_FULL = \"jtk-endpoint-full\";\nvar CLASS_ENDPOINT_FLOATING = \"jtk-floating-endpoint\";\nvar CLASS_ENDPOINT_DROP_ALLOWED = \"jtk-endpoint-drop-allowed\";\nvar CLASS_ENDPOINT_DROP_FORBIDDEN = \"jtk-endpoint-drop-forbidden\";\nvar CLASS_ENDPOINT_ANCHOR_PREFIX = \"jtk-endpoint-anchor\";\nvar CLASS_GROUP_COLLAPSED = \"jtk-group-collapsed\";\nvar CLASS_GROUP_EXPANDED = \"jtk-group-expanded\";\nvar CLASS_OVERLAY = \"jtk-overlay\";\nvar EVENT_ANCHOR_CHANGED = \"anchor:changed\";\nvar EVENT_CONNECTION = \"connection\";\nvar EVENT_INTERNAL_CONNECTION = \"internal.connection\";\nvar EVENT_CONNECTION_DETACHED = \"connection:detach\";\nvar EVENT_CONNECTION_MOVED = \"connection:move\";\nvar EVENT_CONTAINER_CHANGE = \"container:change\";\nvar EVENT_ENDPOINT_REPLACED = \"endpoint:replaced\";\nvar EVENT_INTERNAL_ENDPOINT_UNREGISTERED = \"internal.endpoint:unregistered\";\nvar EVENT_INTERNAL_CONNECTION_DETACHED = \"internal.connection:detached\";\nvar EVENT_MANAGE_ELEMENT = \"element:manage\";\nvar EVENT_GROUP_ADDED = \"group:added\";\nvar EVENT_GROUP_COLLAPSE = \"group:collapse\";\nvar EVENT_GROUP_EXPAND = \"group:expand\";\nvar EVENT_GROUP_MEMBER_ADDED = \"group:member:added\";\nvar EVENT_GROUP_MEMBER_REMOVED = \"group:member:removed\";\nvar EVENT_GROUP_REMOVED = \"group:removed\";\nvar EVENT_MAX_CONNECTIONS = \"maxConnections\";\nvar EVENT_NESTED_GROUP_ADDED = \"group:nested:added\";\nvar EVENT_NESTED_GROUP_REMOVED = \"group:nested:removed\";\nvar EVENT_UNMANAGE_ELEMENT = \"element:unmanage\";\nvar EVENT_ZOOM = \"zoom\";\nvar IS_DETACH_ALLOWED = \"isDetachAllowed\";\nvar INTERCEPT_BEFORE_DRAG = \"beforeDrag\";\nvar INTERCEPT_BEFORE_DROP = \"beforeDrop\";\nvar INTERCEPT_BEFORE_DETACH = \"beforeDetach\";\nvar INTERCEPT_BEFORE_START_DETACH = \"beforeStartDetach\";\nvar SELECTOR_MANAGED_ELEMENT = att(ATTRIBUTE_MANAGED);\nvar ERROR_SOURCE_ENDPOINT_FULL = \"Cannot establish connection: source endpoint is full\";\nvar ERROR_TARGET_ENDPOINT_FULL = \"Cannot establish connection: target endpoint is full\";\nvar ERROR_SOURCE_DOES_NOT_EXIST = \"Cannot establish connection: source does not exist\";\nvar ERROR_TARGET_DOES_NOT_EXIST = \"Cannot establish connection: target does not exist\";\nvar KEY_CONNECTION_OVERLAYS = \"connectionOverlays\";\n\nvar DEFAULT_KEY_ALLOW_NESTED_GROUPS = \"allowNestedGroups\";\nvar DEFAULT_KEY_ANCHOR = \"anchor\";\nvar DEFAULT_KEY_ANCHORS = \"anchors\";\nvar DEFAULT_KEY_CONNECTION_OVERLAYS = \"connectionOverlays\";\nvar DEFAULT_KEY_CONNECTIONS_DETACHABLE = \"connectionsDetachable\";\nvar DEFAULT_KEY_CONNECTOR = \"connector\";\nvar DEFAULT_KEY_CONTAINER = \"container\";\nvar DEFAULT_KEY_ENDPOINT = \"endpoint\";\nvar DEFAULT_KEY_ENDPOINT_OVERLAYS = \"endpointOverlays\";\nvar DEFAULT_KEY_ENDPOINTS = \"endpoints\";\nvar DEFAULT_KEY_ENDPOINT_STYLE = \"endpointStyle\";\nvar DEFAULT_KEY_ENDPOINT_STYLES = \"endpointStyles\";\nvar DEFAULT_KEY_ENDPOINT_HOVER_STYLE = \"endpointHoverStyle\";\nvar DEFAULT_KEY_ENDPOINT_HOVER_STYLES = \"endpointHoverStyles\";\nvar DEFAULT_KEY_HOVER_CLASS = \"hoverClass\";\nvar DEFAULT_KEY_HOVER_PAINT_STYLE = \"hoverPaintStyle\";\nvar DEFAULT_KEY_LIST_STYLE = \"listStyle\";\nvar DEFAULT_KEY_MAX_CONNECTIONS = \"maxConnections\";\nvar DEFAULT_KEY_PAINT_STYLE = \"paintStyle\";\nvar DEFAULT_KEY_REATTACH_CONNECTIONS = \"reattachConnections\";\nvar DEFAULT_KEY_SCOPE = \"scope\";\n\nfunction isFullOverlaySpec(o) {\n  return o.type != null && o.options != null;\n}\nfunction convertToFullOverlaySpec(spec) {\n  var o = null;\n  if (isString(spec)) {\n    o = {\n      type: spec,\n      options: {}\n    };\n  } else {\n    o = spec;\n  }\n  o.options.id = o.options.id || uuid();\n  return o;\n}\nvar Overlay = function (_EventGenerator) {\n  _inherits(Overlay, _EventGenerator);\n  var _super = _createSuper(Overlay);\n  function Overlay(instance, component, p) {\n    var _this;\n    _classCallCheck(this, Overlay);\n    _this = _super.call(this);\n    _this.instance = instance;\n    _this.component = component;\n    _defineProperty(_assertThisInitialized(_this), \"id\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"cssClass\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"visible\", true);\n    _defineProperty(_assertThisInitialized(_this), \"location\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"events\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"attributes\", void 0);\n    p = p || {};\n    _this.id = p.id || uuid();\n    _this.cssClass = p.cssClass || \"\";\n    _this.setLocation(p.location);\n    _this.events = p.events || {};\n    _this.attributes = p.attributes || {};\n    for (var _event in _this.events) {\n      _this.bind(_event, _this.events[_event]);\n    }\n    return _this;\n  }\n  _createClass(Overlay, [{\n    key: \"setLocation\",\n    value: function setLocation(l) {\n      var newLocation = this.location == null ? 0.5 : this.location;\n      if (l != null) {\n        try {\n          var _l = typeof l === \"string\" ? parseFloat(l) : l;\n          if (!isNaN(_l)) {\n            newLocation = _l;\n          }\n        } catch (e) {\n        }\n      }\n      this.location = newLocation;\n    }\n  }, {\n    key: \"shouldFireEvent\",\n    value: function shouldFireEvent(event, value, originalEvent) {\n      return true;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(v) {\n      this.visible = v;\n      this.instance.setOverlayVisible(this, v);\n    }\n  }, {\n    key: \"isVisible\",\n    value: function isVisible() {\n      return this.visible;\n    }\n  }]);\n  return Overlay;\n}(EventGenerator);\n\nvar overlayMap = {};\nvar OverlayFactory = {\n  get: function get(instance, name, component, params) {\n    var c = overlayMap[name];\n    if (!c) {\n      throw {\n        message: \"jsPlumb: unknown overlay type '\" + name + \"'\"\n      };\n    } else {\n      return new c(instance, component, params);\n    }\n  },\n  register: function register(name, overlay) {\n    overlayMap[name] = overlay;\n  }\n};\n\nvar LabelOverlay = function (_Overlay) {\n  _inherits(LabelOverlay, _Overlay);\n  var _super = _createSuper(LabelOverlay);\n  function LabelOverlay(instance, component, p) {\n    var _this;\n    _classCallCheck(this, LabelOverlay);\n    _this = _super.call(this, instance, component, p);\n    _this.instance = instance;\n    _this.component = component;\n    _defineProperty(_assertThisInitialized(_this), \"label\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"labelText\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", LabelOverlay.type);\n    _defineProperty(_assertThisInitialized(_this), \"cachedDimensions\", void 0);\n    p = p || {\n      label: \"\"\n    };\n    _this.setLabel(p.label);\n    return _this;\n  }\n  _createClass(LabelOverlay, [{\n    key: \"getLabel\",\n    value: function getLabel() {\n      if (isFunction(this.label)) {\n        return this.label(this);\n      } else {\n        return this.labelText;\n      }\n    }\n  }, {\n    key: \"setLabel\",\n    value: function setLabel(l) {\n      this.label = l;\n      this.labelText = null;\n      this.instance.updateLabel(this);\n    }\n  }, {\n    key: \"getDimensions\",\n    value: function getDimensions() {\n      return {\n        w: 1,\n        h: 1\n      };\n    }\n  }, {\n    key: \"updateFrom\",\n    value: function updateFrom(d) {\n      if (d.label != null) {\n        this.setLabel(d.label);\n      }\n      if (d.location != null) {\n        this.setLocation(d.location);\n        this.instance.updateLabel(this);\n      }\n    }\n  }]);\n  return LabelOverlay;\n}(Overlay);\n_defineProperty(LabelOverlay, \"type\", \"Label\");\nfunction isLabelOverlay(o) {\n  return o.type === LabelOverlay.type;\n}\nOverlayFactory.register(LabelOverlay.type, LabelOverlay);\n\nfunction _splitType(t) {\n  return t == null ? null : t.split(\" \").filter(function (t) {\n    return t != null && t.length > 0;\n  });\n}\nfunction _mapType(map, obj, typeId) {\n  for (var i in obj) {\n    map[i] = typeId;\n  }\n}\nvar CONNECTOR = \"connector\";\nvar MERGE_STRATEGY_OVERRIDE = \"override\";\nvar CSS_CLASS = \"cssClass\";\nvar DEFAULT_TYPE_KEY = \"__default\";\nvar ANCHOR = \"anchor\";\nvar ANCHORS = \"anchors\";\nvar _internalLabelOverlayId = \"__label\";\nvar _internalLabelOverlayClass = \"jtk-default-label\";\nvar TYPE_ITEM_OVERLAY = \"overlay\";\nvar LOCATION_ATTRIBUTE = \"labelLocation\";\nvar ACTION_ADD = \"add\";\nvar ACTION_REMOVE = \"remove\";\nfunction _applyTypes(component, params) {\n  if (component.getDefaultType) {\n    var td = component.getTypeDescriptor(),\n        map = {};\n    var defType = component.getDefaultType();\n    var o = extend({}, defType);\n    _mapType(map, defType, DEFAULT_TYPE_KEY);\n    component._types.forEach(function (tid) {\n      if (tid !== DEFAULT_TYPE_KEY) {\n        var _t = component.instance.getType(tid, td);\n        if (_t != null) {\n          var overrides = new Set([CONNECTOR, ANCHOR, ANCHORS]);\n          if (_t.mergeStrategy === MERGE_STRATEGY_OVERRIDE) {\n            for (var k in _t) {\n              overrides.add(k);\n            }\n          }\n          o = merge(o, _t, [CSS_CLASS], setToArray(overrides));\n          _mapType(map, _t, tid);\n        }\n      }\n    });\n    if (params) {\n      o = populate(o, params, \"_\");\n    }\n    component.applyType(o, map);\n  }\n}\nfunction _removeTypeCssHelper(component, typeId) {\n  var type = component.instance.getType(typeId, component.getTypeDescriptor());\n  if (type != null && type.cssClass) {\n    component.removeClass(type.cssClass);\n  }\n}\nfunction _updateHoverStyle(component) {\n  if (component.paintStyle && component.hoverPaintStyle) {\n    var mergedHoverStyle = {};\n    extend(mergedHoverStyle, component.paintStyle);\n    extend(mergedHoverStyle, component.hoverPaintStyle);\n    component.hoverPaintStyle = mergedHoverStyle;\n  }\n}\nvar ADD_CLASS_ACTION = \"add\";\nvar REMOVE_CLASS_ACTION = \"remove\";\nfunction _makeLabelOverlay(component, params) {\n  var _params = {\n    cssClass: params.cssClass,\n    id: _internalLabelOverlayId,\n    component: component\n  },\n      mergedParams = extend(_params, params);\n  return new LabelOverlay(component.instance, component, mergedParams);\n}\nfunction _processOverlay(component, o) {\n  var _newOverlay = null;\n  if (isString(o)) {\n    _newOverlay = OverlayFactory.get(component.instance, o, component, {});\n  } else if (o.type != null && o.options != null) {\n    var oa = o;\n    var p = extend({}, oa.options);\n    _newOverlay = OverlayFactory.get(component.instance, oa.type, component, p);\n  } else {\n    _newOverlay = o;\n  }\n  _newOverlay.id = _newOverlay.id || uuid();\n  component.cacheTypeItem(TYPE_ITEM_OVERLAY, _newOverlay, _newOverlay.id);\n  component.overlays[_newOverlay.id] = _newOverlay;\n  return _newOverlay;\n}\nvar Component = function (_EventGenerator) {\n  _inherits(Component, _EventGenerator);\n  var _super = _createSuper(Component);\n  function Component(instance, params) {\n    var _this;\n    _classCallCheck(this, Component);\n    _this = _super.call(this);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"defaultLabelLocation\", 0.5);\n    _defineProperty(_assertThisInitialized(_this), \"overlays\", {});\n    _defineProperty(_assertThisInitialized(_this), \"overlayPositions\", {});\n    _defineProperty(_assertThisInitialized(_this), \"overlayPlacements\", {});\n    _defineProperty(_assertThisInitialized(_this), \"clone\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"deleted\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"segment\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"x\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"y\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"w\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"h\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"id\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"visible\", true);\n    _defineProperty(_assertThisInitialized(_this), \"typeId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"params\", {});\n    _defineProperty(_assertThisInitialized(_this), \"paintStyle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"hoverPaintStyle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"paintStyleInUse\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_hover\", false);\n    _defineProperty(_assertThisInitialized(_this), \"lastPaintedAt\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"data\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_defaultType\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"events\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"parameters\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_types\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_typeCache\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"cssClass\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"hoverClass\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"beforeDetach\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"beforeDrop\", void 0);\n    params = params || {};\n    _this.cssClass = params.cssClass || \"\";\n    _this.hoverClass = params.hoverClass || instance.defaults.hoverClass;\n    _this.beforeDetach = params.beforeDetach;\n    _this.beforeDrop = params.beforeDrop;\n    _this._types = new Set();\n    _this._typeCache = {};\n    _this.parameters = clone(params.parameters || {});\n    _this.id = params.id || _this.getIdPrefix() + new Date().getTime();\n    _this._defaultType = {\n      parameters: _this.parameters,\n      scope: params.scope || _this.instance.defaultScope,\n      overlays: {}\n    };\n    if (params.events) {\n      for (var evtName in params.events) {\n        _this.bind(evtName, params.events[evtName]);\n      }\n    }\n    _this.clone = function () {\n      var o = Object.create(_this.constructor.prototype);\n      _this.constructor.apply(o, [instance, params]);\n      return o;\n    };\n    _this.overlays = {};\n    _this.overlayPositions = {};\n    var o = params.overlays || [],\n        oo = {};\n    var defaultOverlayKey = _this.getDefaultOverlayKey();\n    if (defaultOverlayKey) {\n      var defaultOverlays = _this.instance.defaults[defaultOverlayKey];\n      if (defaultOverlays) {\n        o.push.apply(o, _toConsumableArray(defaultOverlays));\n      }\n      for (var i = 0; i < o.length; i++) {\n        var fo = convertToFullOverlaySpec(o[i]);\n        oo[fo.options.id] = fo;\n      }\n    }\n    _this._defaultType.overlays = oo;\n    if (params.label) {\n      _this.getDefaultType().overlays[_internalLabelOverlayId] = {\n        type: LabelOverlay.type,\n        options: {\n          label: params.label,\n          location: params.labelLocation || _this.defaultLabelLocation,\n          id: _internalLabelOverlayId,\n          cssClass: _internalLabelOverlayClass\n        }\n      };\n    }\n    return _this;\n  }\n  _createClass(Component, [{\n    key: \"isDetachAllowed\",\n    value: function isDetachAllowed(connection) {\n      var r = true;\n      if (this.beforeDetach) {\n        try {\n          r = this.beforeDetach(connection);\n        } catch (e) {\n          log(\"jsPlumb: beforeDetach callback failed\", e);\n        }\n      }\n      return r;\n    }\n  }, {\n    key: \"isDropAllowed\",\n    value: function isDropAllowed(sourceId, targetId, scope, connection, dropEndpoint) {\n      var r;\n      var payload = {\n        sourceId: sourceId,\n        targetId: targetId,\n        scope: scope,\n        connection: connection,\n        dropEndpoint: dropEndpoint\n      };\n      if (this.beforeDrop) {\n        try {\n          r = this.beforeDrop(payload);\n        } catch (e) {\n          log(\"jsPlumb: beforeDrop callback failed\", e);\n        }\n      } else {\n        r = this.instance.checkCondition(INTERCEPT_BEFORE_DROP, payload);\n      }\n      return r;\n    }\n  }, {\n    key: \"getDefaultType\",\n    value: function getDefaultType() {\n      return this._defaultType;\n    }\n  }, {\n    key: \"appendToDefaultType\",\n    value: function appendToDefaultType(obj) {\n      for (var i in obj) {\n        this._defaultType[i] = obj[i];\n      }\n    }\n  }, {\n    key: \"getId\",\n    value: function getId() {\n      return this.id;\n    }\n  }, {\n    key: \"cacheTypeItem\",\n    value: function cacheTypeItem(key, item, typeId) {\n      this._typeCache[typeId] = this._typeCache[typeId] || {};\n      this._typeCache[typeId][key] = item;\n    }\n  }, {\n    key: \"getCachedTypeItem\",\n    value: function getCachedTypeItem(key, typeId) {\n      return this._typeCache[typeId] ? this._typeCache[typeId][key] : null;\n    }\n  }, {\n    key: \"setType\",\n    value: function setType(typeId, params) {\n      this.clearTypes();\n      (_splitType(typeId) || []).forEach(this._types.add, this._types);\n      _applyTypes(this, params);\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return Array.from(this._types.keys());\n    }\n  }, {\n    key: \"reapplyTypes\",\n    value: function reapplyTypes(params) {\n      _applyTypes(this, params);\n    }\n  }, {\n    key: \"hasType\",\n    value: function hasType(typeId) {\n      return this._types.has(typeId);\n    }\n  }, {\n    key: \"addType\",\n    value: function addType(typeId, params) {\n      var t = _splitType(typeId),\n          _somethingAdded = false;\n      if (t != null) {\n        for (var i = 0, j = t.length; i < j; i++) {\n          if (!this._types.has(t[i])) {\n            this._types.add(t[i]);\n            _somethingAdded = true;\n          }\n        }\n        if (_somethingAdded) {\n          _applyTypes(this, params);\n        }\n      }\n    }\n  }, {\n    key: \"removeType\",\n    value: function removeType(typeId, params) {\n      var _this2 = this;\n      var t = _splitType(typeId),\n          _cont = false,\n          _one = function _one(tt) {\n        if (_this2._types.has(tt)) {\n          _removeTypeCssHelper(_this2, tt);\n          _this2._types[\"delete\"](tt);\n          return true;\n        }\n        return false;\n      };\n      if (t != null) {\n        for (var i = 0, j = t.length; i < j; i++) {\n          _cont = _one(t[i]) || _cont;\n        }\n        if (_cont) {\n          _applyTypes(this, params);\n        }\n      }\n    }\n  }, {\n    key: \"clearTypes\",\n    value: function clearTypes(params) {\n      var _this3 = this;\n      this._types.forEach(function (t) {\n        _removeTypeCssHelper(_this3, t);\n      });\n      this._types.clear();\n      _applyTypes(this, params);\n    }\n  }, {\n    key: \"toggleType\",\n    value: function toggleType(typeId, params) {\n      var t = _splitType(typeId);\n      if (t != null) {\n        for (var i = 0, j = t.length; i < j; i++) {\n          if (this._types.has(t[i])) {\n            _removeTypeCssHelper(this, t[i]);\n            this._types[\"delete\"](t[i]);\n          } else {\n            this._types.add(t[i]);\n          }\n        }\n        _applyTypes(this, params);\n      }\n    }\n  }, {\n    key: \"applyType\",\n    value: function applyType(t, params) {\n      this.setPaintStyle(t.paintStyle);\n      this.setHoverPaintStyle(t.hoverPaintStyle);\n      this.mergeParameters(t.parameters);\n      this.paintStyleInUse = this.getPaintStyle();\n      if (t.overlays) {\n        var keep = {},\n            i;\n        for (i in t.overlays) {\n          var existing = this.overlays[t.overlays[i].options.id];\n          if (existing) {\n            existing.updateFrom(t.overlays[i].options);\n            keep[t.overlays[i].options.id] = true;\n            this.instance.reattachOverlay(existing, this);\n          } else {\n            var _c = this.getCachedTypeItem(TYPE_ITEM_OVERLAY, t.overlays[i].options.id);\n            if (_c != null) {\n              this.instance.reattachOverlay(_c, this);\n              _c.setVisible(true);\n              _c.updateFrom(t.overlays[i].options);\n              this.overlays[_c.id] = _c;\n            } else {\n              _c = this.addOverlay(t.overlays[i]);\n            }\n            keep[_c.id] = true;\n          }\n        }\n        for (i in this.overlays) {\n          if (keep[this.overlays[i].id] == null) {\n            this.removeOverlay(this.overlays[i].id, true);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"setPaintStyle\",\n    value: function setPaintStyle(style) {\n      this.paintStyle = style;\n      this.paintStyleInUse = this.paintStyle;\n      _updateHoverStyle(this);\n    }\n  }, {\n    key: \"getPaintStyle\",\n    value: function getPaintStyle() {\n      return this.paintStyle;\n    }\n  }, {\n    key: \"setHoverPaintStyle\",\n    value: function setHoverPaintStyle(style) {\n      this.hoverPaintStyle = style;\n      _updateHoverStyle(this);\n    }\n  }, {\n    key: \"getHoverPaintStyle\",\n    value: function getHoverPaintStyle() {\n      return this.hoverPaintStyle;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      for (var i in this.overlays) {\n        this.instance.destroyOverlay(this.overlays[i]);\n      }\n      this.overlays = {};\n      this.overlayPositions = {};\n      this.unbind();\n      this.clone = null;\n    }\n  }, {\n    key: \"isHover\",\n    value: function isHover() {\n      return this._hover;\n    }\n  }, {\n    key: \"mergeParameters\",\n    value: function mergeParameters(p) {\n      if (p != null) {\n        extend(this.parameters, p);\n      }\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(v) {\n      this.visible = v;\n      if (v) {\n        this.showOverlays();\n      } else {\n        this.hideOverlays();\n      }\n    }\n  }, {\n    key: \"isVisible\",\n    value: function isVisible() {\n      return this.visible;\n    }\n  }, {\n    key: \"setAbsoluteOverlayPosition\",\n    value: function setAbsoluteOverlayPosition(overlay, xy) {\n      this.overlayPositions[overlay.id] = xy;\n    }\n  }, {\n    key: \"getAbsoluteOverlayPosition\",\n    value: function getAbsoluteOverlayPosition(overlay) {\n      return this.overlayPositions ? this.overlayPositions[overlay.id] : null;\n    }\n  }, {\n    key: \"_clazzManip\",\n    value: function _clazzManip(action, clazz) {\n      for (var i in this.overlays) {\n        if (action === ACTION_ADD) {\n          this.instance.addOverlayClass(this.overlays[i], clazz);\n        } else if (action === ACTION_REMOVE) {\n          this.instance.removeOverlayClass(this.overlays[i], clazz);\n        }\n      }\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(clazz, cascade) {\n      var parts = (this.cssClass || \"\").split(\" \");\n      parts.push(clazz);\n      this.cssClass = parts.join(\" \");\n      this._clazzManip(ACTION_ADD, clazz);\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(clazz, cascade) {\n      var parts = (this.cssClass || \"\").split(\" \");\n      this.cssClass = parts.filter(function (p) {\n        return p !== clazz;\n      }).join(\" \");\n      this._clazzManip(ACTION_REMOVE, clazz);\n    }\n  }, {\n    key: \"getClass\",\n    value: function getClass() {\n      return this.cssClass;\n    }\n  }, {\n    key: \"shouldFireEvent\",\n    value: function shouldFireEvent(event, value, originalEvent) {\n      return true;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.data;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(d) {\n      this.data = d || {};\n    }\n  }, {\n    key: \"mergeData\",\n    value: function mergeData(d) {\n      this.data = extend(this.data, d);\n    }\n  }, {\n    key: \"addOverlay\",\n    value: function addOverlay(overlay) {\n      var o = _processOverlay(this, overlay);\n      if (this.getData && o.type === LabelOverlay.type && !isString(overlay)) {\n        var d = this.getData(),\n            p = overlay.options;\n        if (d) {\n          var locationAttribute = p.labelLocationAttribute || LOCATION_ATTRIBUTE;\n          var loc = d[locationAttribute];\n          if (loc) {\n            o.location = loc;\n          }\n        }\n      }\n      return o;\n    }\n  }, {\n    key: \"getOverlay\",\n    value: function getOverlay(id) {\n      return this.overlays[id];\n    }\n  }, {\n    key: \"getOverlays\",\n    value: function getOverlays() {\n      return this.overlays;\n    }\n  }, {\n    key: \"hideOverlay\",\n    value: function hideOverlay(id) {\n      var o = this.getOverlay(id);\n      if (o) {\n        o.setVisible(false);\n      }\n    }\n  }, {\n    key: \"hideOverlays\",\n    value: function hideOverlays() {\n      for (var _len = arguments.length, ids = new Array(_len), _key = 0; _key < _len; _key++) {\n        ids[_key] = arguments[_key];\n      }\n      ids = ids || [];\n      for (var i in this.overlays) {\n        if (ids.length === 0 || ids.indexOf(i) !== -1) {\n          this.overlays[i].setVisible(false);\n        }\n      }\n    }\n  }, {\n    key: \"showOverlay\",\n    value: function showOverlay(id) {\n      var o = this.getOverlay(id);\n      if (o) {\n        o.setVisible(true);\n      }\n    }\n  }, {\n    key: \"showOverlays\",\n    value: function showOverlays() {\n      for (var _len2 = arguments.length, ids = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        ids[_key2] = arguments[_key2];\n      }\n      ids = ids || [];\n      for (var i in this.overlays) {\n        if (ids.length === 0 || ids.indexOf(i) !== -1) {\n          this.overlays[i].setVisible(true);\n        }\n      }\n    }\n  }, {\n    key: \"removeAllOverlays\",\n    value: function removeAllOverlays() {\n      for (var i in this.overlays) {\n        this.instance.destroyOverlay(this.overlays[i]);\n      }\n      this.overlays = {};\n      this.overlayPositions = null;\n      this.overlayPlacements = {};\n    }\n  }, {\n    key: \"removeOverlay\",\n    value: function removeOverlay(overlayId, dontCleanup) {\n      var o = this.overlays[overlayId];\n      if (o) {\n        o.setVisible(false);\n        if (!dontCleanup) {\n          this.instance.destroyOverlay(o);\n        }\n        delete this.overlays[overlayId];\n        if (this.overlayPositions) {\n          delete this.overlayPositions[overlayId];\n        }\n        if (this.overlayPlacements) {\n          delete this.overlayPlacements[overlayId];\n        }\n      }\n    }\n  }, {\n    key: \"removeOverlays\",\n    value: function removeOverlays() {\n      for (var _len3 = arguments.length, overlays = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        overlays[_key3] = arguments[_key3];\n      }\n      for (var i = 0, j = overlays.length; i < j; i++) {\n        this.removeOverlay(arguments[i]);\n      }\n    }\n  }, {\n    key: \"getLabel\",\n    value: function getLabel() {\n      var lo = this.getLabelOverlay();\n      return lo != null ? lo.getLabel() : null;\n    }\n  }, {\n    key: \"getLabelOverlay\",\n    value: function getLabelOverlay() {\n      return this.getOverlay(_internalLabelOverlayId);\n    }\n  }, {\n    key: \"setLabel\",\n    value: function setLabel(l) {\n      var lo = this.getLabelOverlay();\n      if (!lo) {\n        var _params2 = isString(l) || isFunction(l) ? {\n          label: l\n        } : l;\n        lo = _makeLabelOverlay(this, _params2);\n        this.overlays[_internalLabelOverlayId] = lo;\n      } else {\n        if (isString(l) || isFunction(l)) {\n          lo.setLabel(l);\n        } else {\n          var ll = l;\n          if (ll.label) {\n            lo.setLabel(ll.label);\n          }\n          if (ll.location) {\n            lo.location = ll.location;\n          }\n        }\n      }\n    }\n  }]);\n  return Component;\n}(EventGenerator);\n\nvar _opposites, _clockwiseOptions, _antiClockwiseOptions;\nvar FaceValues;\n(function (FaceValues) {\n  FaceValues[\"top\"] = \"top\";\n  FaceValues[\"left\"] = \"left\";\n  FaceValues[\"right\"] = \"right\";\n  FaceValues[\"bottom\"] = \"bottom\";\n})(FaceValues || (FaceValues = {}));\nvar TOP = FaceValues.top;\nvar LEFT = FaceValues.left;\nvar RIGHT = FaceValues.right;\nvar BOTTOM = FaceValues.bottom;\nvar X_AXIS_FACES = [LEFT, RIGHT];\nvar Y_AXIS_FACES = [TOP, BOTTOM];\nvar LightweightFloatingAnchor = function () {\n  function LightweightFloatingAnchor(instance, element, elementId) {\n    _classCallCheck(this, LightweightFloatingAnchor);\n    this.instance = instance;\n    this.element = element;\n    _defineProperty(this, \"isFloating\", true);\n    _defineProperty(this, \"isContinuous\", void 0);\n    _defineProperty(this, \"isDynamic\", void 0);\n    _defineProperty(this, \"locations\", []);\n    _defineProperty(this, \"currentLocation\", 0);\n    _defineProperty(this, \"locked\", false);\n    _defineProperty(this, \"cssClass\", '');\n    _defineProperty(this, \"timestamp\", null);\n    _defineProperty(this, \"type\", \"Floating\");\n    _defineProperty(this, \"id\", uuid());\n    _defineProperty(this, \"orientation\", [0, 0]);\n    _defineProperty(this, \"size\", void 0);\n    this.size = instance.viewport.getPosition(elementId);\n    this.locations.push({\n      x: 0.5,\n      y: 0.5,\n      ox: this.orientation[0],\n      oy: this.orientation[1],\n      offx: 0,\n      offy: 0,\n      iox: this.orientation[0],\n      ioy: this.orientation[1],\n      cls: ''\n    });\n  }\n  _createClass(LightweightFloatingAnchor, [{\n    key: \"_updateOrientationInRouter\",\n    value: function _updateOrientationInRouter() {\n      this.instance.router.setAnchorOrientation(this, [this.locations[0].ox, this.locations[0].oy]);\n    }\n  }, {\n    key: \"over\",\n    value: function over(endpoint) {\n      this.orientation = this.instance.router.getEndpointOrientation(endpoint);\n      this.locations[0].ox = this.orientation[0];\n      this.locations[0].oy = this.orientation[1];\n      this._updateOrientationInRouter();\n    }\n  }, {\n    key: \"out\",\n    value: function out() {\n      this.orientation = null;\n      this.locations[0].ox = this.locations[0].iox;\n      this.locations[0].oy = this.locations[0].ioy;\n      this._updateOrientationInRouter();\n    }\n  }]);\n  return LightweightFloatingAnchor;\n}();\nvar opposites = (_opposites = {}, _defineProperty(_opposites, TOP, BOTTOM), _defineProperty(_opposites, RIGHT, LEFT), _defineProperty(_opposites, LEFT, RIGHT), _defineProperty(_opposites, BOTTOM, TOP), _opposites);\nvar clockwiseOptions = (_clockwiseOptions = {}, _defineProperty(_clockwiseOptions, TOP, RIGHT), _defineProperty(_clockwiseOptions, RIGHT, BOTTOM), _defineProperty(_clockwiseOptions, LEFT, TOP), _defineProperty(_clockwiseOptions, BOTTOM, LEFT), _clockwiseOptions);\nvar antiClockwiseOptions = (_antiClockwiseOptions = {}, _defineProperty(_antiClockwiseOptions, TOP, LEFT), _defineProperty(_antiClockwiseOptions, RIGHT, TOP), _defineProperty(_antiClockwiseOptions, LEFT, BOTTOM), _defineProperty(_antiClockwiseOptions, BOTTOM, RIGHT), _antiClockwiseOptions);\nfunction getDefaultFace(a) {\n  return a.faces.length === 0 ? TOP : a.faces[0];\n}\nfunction _isFaceAvailable(a, face) {\n  return a.faces.indexOf(face) !== -1;\n}\nfunction _secondBest(a, edge) {\n  return (a.clockwise ? clockwiseOptions : antiClockwiseOptions)[edge];\n}\nfunction _lastChoice(a, edge) {\n  return (a.clockwise ? antiClockwiseOptions : clockwiseOptions)[edge];\n}\nfunction isEdgeSupported(a, edge) {\n  return a.lockedAxis == null ? a.lockedFace == null ? _isFaceAvailable(a, edge) === true : a.lockedFace === edge : a.lockedAxis.indexOf(edge) !== -1;\n}\nfunction verifyFace(a, edge) {\n  if (_isFaceAvailable(a, edge)) {\n    return edge;\n  } else if (_isFaceAvailable(a, opposites[edge])) {\n    return opposites[edge];\n  } else {\n    var secondBest = _secondBest(a, edge);\n    if (_isFaceAvailable(a, secondBest)) {\n      return secondBest;\n    } else {\n      var lastChoice = _lastChoice(a, edge);\n      if (_isFaceAvailable(a, lastChoice)) {\n        return lastChoice;\n      }\n    }\n  }\n  return edge;\n}\nvar _top = {\n  x: 0.5,\n  y: 0,\n  ox: 0,\n  oy: -1,\n  offx: 0,\n  offy: 0\n},\n    _bottom = {\n  x: 0.5,\n  y: 1,\n  ox: 0,\n  oy: 1,\n  offx: 0,\n  offy: 0\n},\n    _left = {\n  x: 0,\n  y: 0.5,\n  ox: -1,\n  oy: 0,\n  offx: 0,\n  offy: 0\n},\n    _right = {\n  x: 1,\n  y: 0.5,\n  ox: 1,\n  oy: 0,\n  offx: 0,\n  offy: 0\n},\n    _topLeft = {\n  x: 0,\n  y: 0,\n  ox: 0,\n  oy: -1,\n  offx: 0,\n  offy: 0\n},\n    _topRight = {\n  x: 1,\n  y: 0,\n  ox: 1,\n  oy: -1,\n  offx: 0,\n  offy: 0\n},\n    _bottomLeft = {\n  x: 0,\n  y: 1,\n  ox: 0,\n  oy: 1,\n  offx: 0,\n  offy: 0\n},\n    _bottomRight = {\n  x: 1,\n  y: 1,\n  ox: 0,\n  oy: 1,\n  offx: 0,\n  offy: 0\n},\n    _center = {\n  x: 0.5,\n  y: 0.5,\n  ox: 0,\n  oy: 0,\n  offx: 0,\n  offy: 0\n};\nvar namedValues = {\n  \"Top\": [_top],\n  \"Bottom\": [_bottom],\n  \"Left\": [_left],\n  \"Right\": [_right],\n  \"TopLeft\": [_topLeft],\n  \"TopRight\": [_topRight],\n  \"BottomLeft\": [_bottomLeft],\n  \"BottomRight\": [_bottomRight],\n  \"Center\": [_center],\n  \"AutoDefault\": [_top, _left, _bottom, _right]\n};\nvar namedContinuousValues = {\n  \"Continuous\": {\n    faces: [TOP, LEFT, BOTTOM, RIGHT]\n  },\n  \"ContinuousTop\": {\n    faces: [TOP]\n  },\n  \"ContinuousRight\": {\n    faces: [RIGHT]\n  },\n  \"ContinuousBottom\": {\n    faces: [BOTTOM]\n  },\n  \"ContinuousLeft\": {\n    faces: [LEFT]\n  },\n  \"ContinuousLeftRight\": {\n    faces: [LEFT, RIGHT]\n  },\n  \"ContinuousTopBottom\": {\n    faces: [TOP, BOTTOM]\n  }\n};\nfunction getNamedAnchor(name, params) {\n  params = params || {};\n  if (name === AnchorLocations.Perimeter) {\n    return _createPerimeterAnchor(params);\n  }\n  var a = namedValues[name];\n  if (a != null) {\n    return _createAnchor(name, map(a, function (_a) {\n      return extend({\n        iox: _a.ox,\n        ioy: _a.oy\n      }, _a);\n    }), params);\n  }\n  a = namedContinuousValues[name];\n  if (a != null) {\n    return _createContinuousAnchor(name, a.faces, params);\n  }\n  throw {\n    message: \"jsPlumb: unknown anchor type '\" + name + \"'\"\n  };\n}\nfunction _createAnchor(type, locations, params) {\n  return {\n    type: type,\n    locations: locations,\n    currentLocation: 0,\n    locked: false,\n    id: uuid(),\n    isFloating: false,\n    isContinuous: false,\n    isDynamic: locations.length > 1,\n    timestamp: null,\n    cssClass: params.cssClass || \"\"\n  };\n}\nfunction createFloatingAnchor(instance, element, elementId) {\n  return new LightweightFloatingAnchor(instance, element, elementId);\n}\nvar PROPERTY_CURRENT_FACE = \"currentFace\";\nfunction _createContinuousAnchor(type, faces, params) {\n  var ca = {\n    type: type,\n    locations: [],\n    currentLocation: 0,\n    locked: false,\n    id: uuid(),\n    cssClass: params.cssClass || \"\",\n    isFloating: false,\n    isContinuous: true,\n    timestamp: null,\n    faces: params.faces || faces,\n    lockedFace: null,\n    lockedAxis: null,\n    clockwise: !(params.clockwise === false),\n    __currentFace: null\n  };\n  Object.defineProperty(ca, PROPERTY_CURRENT_FACE, {\n    get: function get() {\n      return this.__currentFace;\n    },\n    set: function set(f) {\n      this.__currentFace = verifyFace(this, f);\n    }\n  });\n  return ca;\n}\nfunction isPrimitiveAnchorSpec(sa) {\n  return sa.length < 7 && sa.every(isNumber) || sa.length === 7 && sa.slice(0, 5).every(isNumber) && isString(sa[6]);\n}\nfunction makeLightweightAnchorFromSpec(spec) {\n  if (isString(spec)) {\n    return getNamedAnchor(spec, null);\n  } else if (Array.isArray(spec)) {\n    if (isPrimitiveAnchorSpec(spec)) {\n      var _spec = spec;\n      return _createAnchor(null, [{\n        x: _spec[0],\n        y: _spec[1],\n        ox: _spec[2],\n        oy: _spec[3],\n        offx: _spec[4] == null ? 0 : _spec[4],\n        offy: _spec[5] == null ? 0 : _spec[5],\n        iox: _spec[2],\n        ioy: _spec[3],\n        cls: _spec[6] || \"\"\n      }], {\n        cssClass: _spec[6] || \"\"\n      });\n    } else {\n      var locations = map(spec, function (aSpec) {\n        if (isString(aSpec)) {\n          var a = namedValues[aSpec];\n          return a != null ? extend({\n            iox: a[0].ox,\n            ioy: a[0].oy,\n            cls: \"\"\n          }, a[0]) : null;\n        } else if (isPrimitiveAnchorSpec(aSpec)) {\n          return {\n            x: aSpec[0],\n            y: aSpec[1],\n            ox: aSpec[2],\n            oy: aSpec[3],\n            offx: aSpec[4] == null ? 0 : aSpec[4],\n            offy: aSpec[5] == null ? 0 : aSpec[5],\n            iox: aSpec[2],\n            ioy: aSpec[3],\n            cls: aSpec[6] || \"\"\n          };\n        }\n      }).filter(function (ar) {\n        return ar != null;\n      });\n      return _createAnchor(\"Dynamic\", locations, {});\n    }\n  } else {\n    var sa = spec;\n    return getNamedAnchor(sa.type, sa.options);\n  }\n}\nfunction circleGenerator(anchorCount) {\n  var r = 0.5,\n      step = Math.PI * 2 / anchorCount,\n      a = [];\n  var current = 0;\n  for (var i = 0; i < anchorCount; i++) {\n    var x = r + r * Math.sin(current),\n        y = r + r * Math.cos(current);\n    a.push({\n      x: x,\n      y: y,\n      ox: 0,\n      oy: 0,\n      offx: 0,\n      offy: 0,\n      iox: 0,\n      ioy: 0,\n      cls: ''\n    });\n    current += step;\n  }\n  return a;\n}\nfunction _path(segments, anchorCount) {\n  var anchorsPerFace = anchorCount / segments.length,\n      a = [],\n      _computeFace = function _computeFace(x1, y1, x2, y2, fractionalLength, ox, oy) {\n    anchorsPerFace = anchorCount * fractionalLength;\n    var dx = (x2 - x1) / anchorsPerFace,\n        dy = (y2 - y1) / anchorsPerFace;\n    for (var i = 0; i < anchorsPerFace; i++) {\n      a.push({\n        x: x1 + dx * i,\n        y: y1 + dy * i,\n        ox: ox == null ? 0 : ox,\n        oy: oy == null ? 0 : oy,\n        offx: 0,\n        offy: 0,\n        iox: 0,\n        ioy: 0,\n        cls: ''\n      });\n    }\n  };\n  for (var i = 0; i < segments.length; i++) {\n    _computeFace.apply(null, segments[i]);\n  }\n  return a;\n}\nfunction shapeGenerator(faces, anchorCount) {\n  var s = [];\n  for (var i = 0; i < faces.length; i++) {\n    s.push([faces[i][0], faces[i][1], faces[i][2], faces[i][3], 1 / faces.length, faces[i][4], faces[i][5]]);\n  }\n  return _path(s, anchorCount);\n}\nfunction rectangleGenerator(anchorCount) {\n  return shapeGenerator([[0, 0, 1, 0, 0, -1], [1, 0, 1, 1, 1, 0], [1, 1, 0, 1, 0, 1], [0, 1, 0, 0, -1, 0]], anchorCount);\n}\nfunction diamondGenerator(anchorCount) {\n  return shapeGenerator([[0.5, 0, 1, 0.5], [1, 0.5, 0.5, 1], [0.5, 1, 0, 0.5], [0, 0.5, 0.5, 0]], anchorCount);\n}\nfunction triangleGenerator(anchorCount) {\n  return shapeGenerator([[0.5, 0, 1, 1], [1, 1, 0, 1], [0, 1, 0.5, 0]], anchorCount);\n}\nfunction rotate$1(points, amountInDegrees) {\n  var o = [],\n      theta = amountInDegrees / 180 * Math.PI;\n  for (var i = 0; i < points.length; i++) {\n    var _x = points[i].x - 0.5,\n        _y = points[i].y - 0.5;\n    o.push({\n      x: 0.5 + (_x * Math.cos(theta) - _y * Math.sin(theta)),\n      y: 0.5 + (_x * Math.sin(theta) + _y * Math.cos(theta)),\n      ox: points[i].ox,\n      oy: points[i].oy,\n      offx: 0,\n      offy: 0,\n      iox: 0,\n      ioy: 0,\n      cls: ''\n    });\n  }\n  return o;\n}\nvar anchorGenerators = new Map();\nanchorGenerators.set(PerimeterAnchorShapes.Circle, circleGenerator);\nanchorGenerators.set(PerimeterAnchorShapes.Ellipse, circleGenerator);\nanchorGenerators.set(PerimeterAnchorShapes.Rectangle, rectangleGenerator);\nanchorGenerators.set(PerimeterAnchorShapes.Square, rectangleGenerator);\nanchorGenerators.set(PerimeterAnchorShapes.Diamond, diamondGenerator);\nanchorGenerators.set(PerimeterAnchorShapes.Triangle, triangleGenerator);\nfunction _createPerimeterAnchor(params) {\n  params = params || {};\n  var anchorCount = params.anchorCount || 60,\n      shape = params.shape;\n  if (!shape) {\n    throw new Error(\"no shape supplied to Perimeter Anchor type\");\n  }\n  if (!anchorGenerators.has(shape)) {\n    throw new Error(\"Shape [\" + shape + \"] is unknown by Perimeter Anchor type\");\n  }\n  var da = anchorGenerators.get(shape)(anchorCount);\n  if (params.rotation) {\n    da = rotate$1(da, params.rotation);\n  }\n  var a = _createAnchor(AnchorLocations.Perimeter, da, params);\n  var aa = extend(a, {\n    shape: shape\n  });\n  return aa;\n}\n\nvar TYPE_ITEM_ANCHORS = \"anchors\";\nvar TYPE_ITEM_CONNECTOR = \"connector\";\nfunction prepareEndpoint(conn, existing, index, anchor, element, elementId, endpoint) {\n  var e;\n  if (existing) {\n    conn.endpoints[index] = existing;\n    existing.addConnection(conn);\n  } else {\n    var ep = endpoint || conn.endpointSpec || conn.endpointsSpec[index] || conn.instance.defaults.endpoints[index] || conn.instance.defaults.endpoint;\n    var es = conn.endpointStyles[index] || conn.endpointStyle || conn.instance.defaults.endpointStyles[index] || conn.instance.defaults.endpointStyle;\n    if (es.fill == null && conn.paintStyle != null) {\n      es.fill = conn.paintStyle.stroke;\n    }\n    if (es.outlineStroke == null && conn.paintStyle != null) {\n      es.outlineStroke = conn.paintStyle.outlineStroke;\n    }\n    if (es.outlineWidth == null && conn.paintStyle != null) {\n      es.outlineWidth = conn.paintStyle.outlineWidth;\n    }\n    var ehs = conn.endpointHoverStyles[index] || conn.endpointHoverStyle || conn.endpointHoverStyle || conn.instance.defaults.endpointHoverStyles[index] || conn.instance.defaults.endpointHoverStyle;\n    if (conn.hoverPaintStyle != null) {\n      if (ehs == null) {\n        ehs = {};\n      }\n      if (ehs.fill == null) {\n        ehs.fill = conn.hoverPaintStyle.stroke;\n      }\n    }\n    var u = conn.uuids ? conn.uuids[index] : null;\n    anchor = anchor != null ? anchor : conn.instance.defaults.anchors != null ? conn.instance.defaults.anchors[index] : conn.instance.defaults.anchor;\n    e = conn.instance._internal_newEndpoint({\n      paintStyle: es,\n      hoverPaintStyle: ehs,\n      endpoint: ep,\n      connections: [conn],\n      uuid: u,\n      element: element,\n      scope: conn.scope,\n      anchor: anchor,\n      reattachConnections: conn.reattach || conn.instance.defaults.reattachConnections,\n      connectionsDetachable: conn.detachable || conn.instance.defaults.connectionsDetachable\n    });\n    conn.instance._refreshEndpoint(e);\n    if (existing == null) {\n      e.deleteOnEmpty = true;\n    }\n    conn.endpoints[index] = e;\n  }\n  return e;\n}\nvar Connection = function (_Component) {\n  _inherits(Connection, _Component);\n  var _super = _createSuper(Connection);\n  function Connection(instance, params) {\n    var _this;\n    _classCallCheck(this, Connection);\n    _this = _super.call(this, instance, params);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"connector\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"defaultLabelLocation\", 0.5);\n    _defineProperty(_assertThisInitialized(_this), \"scope\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"typeId\", \"_jsplumb_connection\");\n    _defineProperty(_assertThisInitialized(_this), \"previousConnection\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"sourceId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"targetId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"source\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"target\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"detachable\", true);\n    _defineProperty(_assertThisInitialized(_this), \"reattach\", false);\n    _defineProperty(_assertThisInitialized(_this), \"uuids\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"cost\", 1);\n    _defineProperty(_assertThisInitialized(_this), \"directed\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"endpoints\", [null, null]);\n    _defineProperty(_assertThisInitialized(_this), \"endpointStyles\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"endpointSpec\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"endpointsSpec\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"endpointStyle\", {});\n    _defineProperty(_assertThisInitialized(_this), \"endpointHoverStyle\", {});\n    _defineProperty(_assertThisInitialized(_this), \"endpointHoverStyles\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"suspendedEndpoint\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"suspendedIndex\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"suspendedElement\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"suspendedElementId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"suspendedElementType\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_forceReattach\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_forceDetach\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"proxies\", []);\n    _defineProperty(_assertThisInitialized(_this), \"pending\", false);\n    _this.id = params.id;\n    _this.previousConnection = params.previousConnection;\n    _this.source = params.source;\n    _this.target = params.target;\n    if (params.sourceEndpoint) {\n      _this.source = params.sourceEndpoint.element;\n      _this.sourceId = params.sourceEndpoint.elementId;\n    } else {\n      _this.sourceId = instance.getId(_this.source);\n    }\n    if (params.targetEndpoint) {\n      _this.target = params.targetEndpoint.element;\n      _this.targetId = params.targetEndpoint.elementId;\n    } else {\n      _this.targetId = instance.getId(_this.target);\n    }\n    _this.scope = params.scope;\n    var sourceAnchor = params.anchors ? params.anchors[0] : params.anchor;\n    var targetAnchor = params.anchors ? params.anchors[1] : params.anchor;\n    instance.manage(_this.source);\n    instance.manage(_this.target);\n    _this.visible = true;\n    _this.params = {\n      cssClass: params.cssClass,\n      hoverClass: params.hoverClass,\n      \"pointer-events\": params[\"pointer-events\"],\n      overlays: params.overlays\n    };\n    _this.lastPaintedAt = null;\n    if (params.type) {\n      params.endpoints = params.endpoints || _this.instance._deriveEndpointAndAnchorSpec(params.type).endpoints;\n    }\n    _this.endpointSpec = params.endpoint;\n    _this.endpointsSpec = params.endpoints || [null, null];\n    _this.endpointStyle = params.endpointStyle;\n    _this.endpointHoverStyle = params.endpointHoverStyle;\n    _this.endpointStyles = params.endpointStyles || [null, null];\n    _this.endpointHoverStyles = params.endpointHoverStyles || [null, null];\n    _this.paintStyle = params.paintStyle;\n    _this.hoverPaintStyle = params.hoverPaintStyle;\n    _this.uuids = params.uuids;\n    _this.makeEndpoint(true, _this.source, _this.sourceId, sourceAnchor, params.sourceEndpoint);\n    _this.makeEndpoint(false, _this.target, _this.targetId, targetAnchor, params.targetEndpoint);\n    if (!_this.scope) {\n      _this.scope = _this.endpoints[0].scope;\n    }\n    if (params.deleteEndpointsOnEmpty != null) {\n      _this.endpoints[0].deleteOnEmpty = params.deleteEndpointsOnEmpty;\n      _this.endpoints[1].deleteOnEmpty = params.deleteEndpointsOnEmpty;\n    }\n    var _detachable = _this.instance.defaults.connectionsDetachable;\n    if (params.detachable === false) {\n      _detachable = false;\n    }\n    if (_this.endpoints[0].connectionsDetachable === false) {\n      _detachable = false;\n    }\n    if (_this.endpoints[1].connectionsDetachable === false) {\n      _detachable = false;\n    }\n    _this.endpointsSpec = params.endpoints || [null, null];\n    _this.endpointSpec = params.endpoint || null;\n    var _reattach = params.reattach || _this.endpoints[0].reattachConnections || _this.endpoints[1].reattachConnections || _this.instance.defaults.reattachConnections;\n    var initialPaintStyle = extend({}, _this.endpoints[0].connectorStyle || _this.endpoints[1].connectorStyle || params.paintStyle || _this.instance.defaults.paintStyle);\n    _this.appendToDefaultType({\n      detachable: _detachable,\n      reattach: _reattach,\n      paintStyle: initialPaintStyle,\n      hoverPaintStyle: extend({}, _this.endpoints[0].connectorHoverStyle || _this.endpoints[1].connectorHoverStyle || params.hoverPaintStyle || _this.instance.defaults.hoverPaintStyle)\n    });\n    if (params.outlineWidth) {\n      initialPaintStyle.outlineWidth = params.outlineWidth;\n    }\n    if (params.outlineColor) {\n      initialPaintStyle.outlineStroke = params.outlineColor;\n    }\n    if (params.lineWidth) {\n      initialPaintStyle.strokeWidth = params.lineWidth;\n    }\n    if (params.color) {\n      initialPaintStyle.stroke = params.color;\n    }\n    if (!_this.instance._suspendDrawing) {\n      var initialTimestamp = _this.instance._suspendedAt || uuid();\n      _this.instance._paintEndpoint(_this.endpoints[0], {\n        timestamp: initialTimestamp\n      });\n      _this.instance._paintEndpoint(_this.endpoints[1], {\n        timestamp: initialTimestamp\n      });\n    }\n    _this.cost = params.cost || _this.endpoints[0].connectionCost;\n    _this.directed = params.directed;\n    if (params.directed == null) {\n      _this.directed = _this.endpoints[0].connectionsDirected;\n    }\n    var _p = extend({}, _this.endpoints[1].parameters);\n    extend(_p, _this.endpoints[0].parameters);\n    extend(_p, _this.parameters);\n    _this.parameters = _p;\n    _this.paintStyleInUse = _this.getPaintStyle() || {};\n    _this._setConnector(_this.endpoints[0].connector || _this.endpoints[1].connector || params.connector || _this.instance.defaults.connector, true);\n    var data = params.data == null || !isObject(params.data) ? {} : params.data;\n    _this.setData(data);\n    var _types = [DEFAULT, _this.endpoints[0].edgeType, _this.endpoints[1].edgeType, params.type].join(\" \");\n    if (/[^\\s]/.test(_types)) {\n      _this.addType(_types, params.data);\n    }\n    return _this;\n  }\n  _createClass(Connection, [{\n    key: \"getIdPrefix\",\n    value: function getIdPrefix() {\n      return \"_jsPlumb_c\";\n    }\n  }, {\n    key: \"getDefaultOverlayKey\",\n    value: function getDefaultOverlayKey() {\n      return KEY_CONNECTION_OVERLAYS;\n    }\n  }, {\n    key: \"getXY\",\n    value: function getXY() {\n      return {\n        x: this.connector.x,\n        y: this.connector.y\n      };\n    }\n  }, {\n    key: \"makeEndpoint\",\n    value: function makeEndpoint(isSource, el, elId, anchor, ep) {\n      elId = elId || this.instance.getId(el);\n      return prepareEndpoint(this, ep, isSource ? 0 : 1, anchor, el);\n    }\n  }, {\n    key: \"getTypeDescriptor\",\n    value: function getTypeDescriptor() {\n      return Connection.type;\n    }\n  }, {\n    key: \"isDetachable\",\n    value: function isDetachable(ep) {\n      return this.detachable === false ? false : ep != null ? ep.connectionsDetachable === true : this.detachable === true;\n    }\n  }, {\n    key: \"setDetachable\",\n    value: function setDetachable(detachable) {\n      this.detachable = detachable === true;\n    }\n  }, {\n    key: \"isReattach\",\n    value: function isReattach() {\n      return this.reattach === true || this.endpoints[0].reattachConnections === true || this.endpoints[1].reattachConnections === true;\n    }\n  }, {\n    key: \"setReattach\",\n    value: function setReattach(reattach) {\n      this.reattach = reattach === true;\n    }\n  }, {\n    key: \"applyType\",\n    value: function applyType(t, typeMap) {\n      var _connector = null;\n      if (t.connector != null) {\n        _connector = this.getCachedTypeItem(TYPE_ITEM_CONNECTOR, typeMap.connector);\n        if (_connector == null) {\n          _connector = this.prepareConnector(t.connector, typeMap.connector);\n          this.cacheTypeItem(TYPE_ITEM_CONNECTOR, _connector, typeMap.connector);\n        }\n        this.setPreparedConnector(_connector);\n      }\n      _get(_getPrototypeOf(Connection.prototype), \"applyType\", this).call(this, t, typeMap);\n      if (t.detachable != null) {\n        this.setDetachable(t.detachable);\n      }\n      if (t.reattach != null) {\n        this.setReattach(t.reattach);\n      }\n      if (t.scope) {\n        this.scope = t.scope;\n      }\n      var _anchors = null;\n      if (t.anchor) {\n        _anchors = this.getCachedTypeItem(TYPE_ITEM_ANCHORS, typeMap.anchor);\n        if (_anchors == null) {\n          _anchors = [makeLightweightAnchorFromSpec(t.anchor), makeLightweightAnchorFromSpec(t.anchor)];\n          this.cacheTypeItem(TYPE_ITEM_ANCHORS, _anchors, typeMap.anchor);\n        }\n      } else if (t.anchors) {\n        _anchors = this.getCachedTypeItem(TYPE_ITEM_ANCHORS, typeMap.anchors);\n        if (_anchors == null) {\n          _anchors = [makeLightweightAnchorFromSpec(t.anchors[0]), makeLightweightAnchorFromSpec(t.anchors[1])];\n          this.cacheTypeItem(TYPE_ITEM_ANCHORS, _anchors, typeMap.anchors);\n        }\n      }\n      if (_anchors != null) {\n        this.instance.router.setConnectionAnchors(this, _anchors);\n        if (this.instance.router.isDynamicAnchor(this.endpoints[1])) {\n          this.instance.repaint(this.endpoints[1].element);\n        }\n      }\n      this.instance.applyConnectorType(this.connector, t);\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(c, cascade) {\n      _get(_getPrototypeOf(Connection.prototype), \"addClass\", this).call(this, c);\n      if (cascade) {\n        this.endpoints[0].addClass(c);\n        this.endpoints[1].addClass(c);\n        if (this.suspendedEndpoint) {\n          this.suspendedEndpoint.addClass(c);\n        }\n      }\n      if (this.connector) {\n        this.instance.addConnectorClass(this.connector, c);\n      }\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(c, cascade) {\n      _get(_getPrototypeOf(Connection.prototype), \"removeClass\", this).call(this, c);\n      if (cascade) {\n        this.endpoints[0].removeClass(c);\n        this.endpoints[1].removeClass(c);\n        if (this.suspendedEndpoint) {\n          this.suspendedEndpoint.removeClass(c);\n        }\n      }\n      if (this.connector) {\n        this.instance.removeConnectorClass(this.connector, c);\n      }\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(v) {\n      _get(_getPrototypeOf(Connection.prototype), \"setVisible\", this).call(this, v);\n      if (this.connector) {\n        this.instance.setConnectorVisible(this.connector, v);\n      }\n      this.instance._paintConnection(this);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Connection.prototype), \"destroy\", this).call(this);\n      this.endpoints = null;\n      this.endpointStyles = null;\n      this.source = null;\n      this.target = null;\n      this.instance.destroyConnector(this);\n      this.connector = null;\n      this.deleted = true;\n    }\n  }, {\n    key: \"getUuids\",\n    value: function getUuids() {\n      return [this.endpoints[0].getUuid(), this.endpoints[1].getUuid()];\n    }\n  }, {\n    key: \"prepareConnector\",\n    value: function prepareConnector(connectorSpec, typeId) {\n      var connectorArgs = {\n        cssClass: this.params.cssClass,\n        hoverClass: this.params.hoverClass,\n        \"pointer-events\": this.params[\"pointer-events\"]\n      },\n          connector;\n      if (isString(connectorSpec)) {\n        connector = this.instance._makeConnector(this, connectorSpec, connectorArgs);\n      } else {\n        var co = connectorSpec;\n        connector = this.instance._makeConnector(this, co.type, merge(co.options || {}, connectorArgs));\n      }\n      if (typeId != null) {\n        connector.typeId = typeId;\n      }\n      return connector;\n    }\n  }, {\n    key: \"setPreparedConnector\",\n    value: function setPreparedConnector(connector, doNotRepaint, doNotChangeListenerComponent, typeId) {\n      if (this.connector !== connector) {\n        var previous,\n            previousClasses = \"\";\n        if (this.connector != null) {\n          previous = this.connector;\n          previousClasses = this.instance.getConnectorClass(this.connector);\n          this.instance.destroyConnector(this);\n        }\n        this.connector = connector;\n        if (typeId) {\n          this.cacheTypeItem(TYPE_ITEM_CONNECTOR, connector, typeId);\n        }\n        this.addClass(previousClasses);\n        if (previous != null) {\n          var o = this.getOverlays();\n          for (var i in o) {\n            this.instance.reattachOverlay(o[i], this);\n          }\n        }\n        if (!doNotRepaint) {\n          this.instance._paintConnection(this);\n        }\n      }\n    }\n  }, {\n    key: \"_setConnector\",\n    value: function _setConnector(connectorSpec, doNotRepaint, doNotChangeListenerComponent, typeId) {\n      var connector = this.prepareConnector(connectorSpec, typeId);\n      this.setPreparedConnector(connector, doNotRepaint, doNotChangeListenerComponent, typeId);\n    }\n  }, {\n    key: \"replaceEndpoint\",\n    value: function replaceEndpoint(idx, endpointDef) {\n      var current = this.endpoints[idx],\n          elId = current.elementId,\n          ebe = this.instance.getEndpoints(current.element),\n          _idx = ebe.indexOf(current),\n          _new = prepareEndpoint(this, null, idx, null, current.element, elId, endpointDef);\n      this.endpoints[idx] = _new;\n      ebe.splice(_idx, 1, _new);\n      current.detachFromConnection(this);\n      this.instance.deleteEndpoint(current);\n      this.instance.fire(EVENT_ENDPOINT_REPLACED, {\n        previous: current,\n        current: _new\n      });\n    }\n  }]);\n  return Connection;\n}(Component);\n_defineProperty(Connection, \"type\", \"connection\");\n\nvar typeParameters = [\"connectorStyle\", \"connectorHoverStyle\", \"connectorOverlays\", \"connector\", \"connectionType\", \"connectorClass\", \"connectorHoverClass\"];\nvar Endpoint = function (_Component) {\n  _inherits(Endpoint, _Component);\n  var _super = _createSuper(Endpoint);\n  function Endpoint(instance, params) {\n    var _this;\n    _classCallCheck(this, Endpoint);\n    _this = _super.call(this, instance, params);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"connections\", []);\n    _defineProperty(_assertThisInitialized(_this), \"endpoint\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"element\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"elementId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"dragAllowedWhenFull\", true);\n    _defineProperty(_assertThisInitialized(_this), \"timestamp\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"portId\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"maxConnections\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"proxiedBy\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectorClass\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectorHoverClass\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"finalEndpoint\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"enabled\", true);\n    _defineProperty(_assertThisInitialized(_this), \"isSource\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"isTarget\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"isTemporarySource\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectionCost\", 1);\n    _defineProperty(_assertThisInitialized(_this), \"connectionsDirected\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectionsDetachable\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"reattachConnections\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"currentAnchorClass\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"referenceEndpoint\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"edgeType\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connector\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectorOverlays\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectorStyle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connectorHoverStyle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"deleteOnEmpty\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"uuid\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"scope\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_anchor\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"defaultLabelLocation\", [0.5, 0.5]);\n    _this.appendToDefaultType({\n      edgeType: params.edgeType,\n      maxConnections: params.maxConnections == null ? _this.instance.defaults.maxConnections : params.maxConnections,\n      paintStyle: params.paintStyle || _this.instance.defaults.endpointStyle,\n      hoverPaintStyle: params.hoverPaintStyle || _this.instance.defaults.endpointHoverStyle,\n      connectorStyle: params.connectorStyle,\n      connectorHoverStyle: params.connectorHoverStyle,\n      connectorClass: params.connectorClass,\n      connectorHoverClass: params.connectorHoverClass,\n      connectorOverlays: params.connectorOverlays,\n      connector: params.connector\n    });\n    _this.enabled = !(params.enabled === false);\n    _this.visible = true;\n    _this.element = params.element;\n    _this.uuid = params.uuid;\n    _this.portId = params.portId;\n    _this.elementId = params.elementId;\n    _this.connectionCost = params.connectionCost == null ? 1 : params.connectionCost;\n    _this.connectionsDirected = params.connectionsDirected;\n    _this.currentAnchorClass = \"\";\n    _this.events = {};\n    _this.connectorOverlays = params.connectorOverlays;\n    _this.connectorStyle = params.connectorStyle;\n    _this.connectorHoverStyle = params.connectorHoverStyle;\n    _this.connector = params.connector;\n    _this.edgeType = params.edgeType;\n    _this.connectorClass = params.connectorClass;\n    _this.connectorHoverClass = params.connectorHoverClass;\n    _this.deleteOnEmpty = params.deleteOnEmpty === true;\n    _this.isSource = params.source || false;\n    _this.isTemporarySource = params.isTemporarySource || false;\n    _this.isTarget = params.target || false;\n    _this.connections = params.connections || [];\n    _this.scope = params.scope || instance.defaultScope;\n    _this.timestamp = null;\n    _this.reattachConnections = params.reattachConnections || instance.defaults.reattachConnections;\n    _this.connectionsDetachable = instance.defaults.connectionsDetachable;\n    if (params.connectionsDetachable === false) {\n      _this.connectionsDetachable = false;\n    }\n    _this.dragAllowedWhenFull = params.dragAllowedWhenFull !== false;\n    if (params.onMaxConnections) {\n      _this.bind(EVENT_MAX_CONNECTIONS, params.onMaxConnections);\n    }\n    var ep = params.endpoint || params.existingEndpoint || instance.defaults.endpoint;\n    _this.setEndpoint(ep);\n    if (params.preparedAnchor != null) {\n      _this.setPreparedAnchor(params.preparedAnchor);\n    } else {\n      var anchorParamsToUse = params.anchor ? params.anchor : params.anchors ? params.anchors : instance.defaults.anchor || AnchorLocations.Top;\n      _this.setAnchor(anchorParamsToUse);\n    }\n    var type = [DEFAULT, params.type || \"\"].join(\" \");\n    _this.addType(type, params.data);\n    return _this;\n  }\n  _createClass(Endpoint, [{\n    key: \"getIdPrefix\",\n    value: function getIdPrefix() {\n      return \"_jsplumb_e\";\n    }\n  }, {\n    key: \"getTypeDescriptor\",\n    value: function getTypeDescriptor() {\n      return \"endpoint\";\n    }\n  }, {\n    key: \"getXY\",\n    value: function getXY() {\n      return {\n        x: this.endpoint.x,\n        y: this.endpoint.y\n      };\n    }\n  }, {\n    key: \"getDefaultOverlayKey\",\n    value: function getDefaultOverlayKey() {\n      return \"endpointOverlays\";\n    }\n  }, {\n    key: \"_updateAnchorClass\",\n    value: function _updateAnchorClass() {\n      var ac = this._anchor && this._anchor.cssClass;\n      if (ac != null && ac.length > 0) {\n        var oldAnchorClass = this.instance.endpointAnchorClassPrefix + \"-\" + this.currentAnchorClass;\n        this.currentAnchorClass = ac;\n        var anchorClass = this.instance.endpointAnchorClassPrefix + (this.currentAnchorClass ? \"-\" + this.currentAnchorClass : \"\");\n        if (oldAnchorClass !== anchorClass) {\n          this.removeClass(oldAnchorClass);\n          this.addClass(anchorClass);\n          this.instance.removeClass(this.element, oldAnchorClass);\n          this.instance.addClass(this.element, anchorClass);\n        }\n      }\n    }\n  }, {\n    key: \"setPreparedAnchor\",\n    value: function setPreparedAnchor(anchor) {\n      this.instance.router.setAnchor(this, anchor);\n      this._updateAnchorClass();\n      return this;\n    }\n  }, {\n    key: \"_anchorLocationChanged\",\n    value: function _anchorLocationChanged(currentAnchor) {\n      this.fire(EVENT_ANCHOR_CHANGED, {\n        endpoint: this,\n        anchor: currentAnchor\n      });\n      this._updateAnchorClass();\n    }\n  }, {\n    key: \"setAnchor\",\n    value: function setAnchor(anchorParams) {\n      var a = this.instance.router.prepareAnchor(anchorParams);\n      this.setPreparedAnchor(a);\n      return this;\n    }\n  }, {\n    key: \"addConnection\",\n    value: function addConnection(conn) {\n      this.connections.push(conn);\n      this.instance._refreshEndpoint(this);\n    }\n  }, {\n    key: \"detachFromConnection\",\n    value: function detachFromConnection(connection, idx, transientDetach) {\n      idx = idx == null ? this.connections.indexOf(connection) : idx;\n      if (idx >= 0) {\n        this.connections.splice(idx, 1);\n        this.instance._refreshEndpoint(this);\n      }\n      if (!transientDetach && this.deleteOnEmpty && this.connections.length === 0) {\n        this.instance.deleteEndpoint(this);\n      }\n    }\n  }, {\n    key: \"deleteEveryConnection\",\n    value: function deleteEveryConnection(params) {\n      var c = this.connections.length;\n      for (var i = 0; i < c; i++) {\n        this.instance.deleteConnection(this.connections[0], params);\n      }\n    }\n  }, {\n    key: \"detachFrom\",\n    value: function detachFrom(otherEndpoint) {\n      var c = [];\n      for (var i = 0; i < this.connections.length; i++) {\n        if (this.connections[i].endpoints[1] === otherEndpoint || this.connections[i].endpoints[0] === otherEndpoint) {\n          c.push(this.connections[i]);\n        }\n      }\n      for (var j = 0, count = c.length; j < count; j++) {\n        this.instance.deleteConnection(c[0]);\n      }\n      return this;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(v, doNotChangeConnections, doNotNotifyOtherEndpoint) {\n      _get(_getPrototypeOf(Endpoint.prototype), \"setVisible\", this).call(this, v);\n      this.endpoint.setVisible(v);\n      if (v) {\n        this.showOverlays();\n      } else {\n        this.hideOverlays();\n      }\n      if (!doNotChangeConnections) {\n        for (var i = 0; i < this.connections.length; i++) {\n          this.connections[i].setVisible(v);\n          if (!doNotNotifyOtherEndpoint) {\n            var oIdx = this === this.connections[i].endpoints[0] ? 1 : 0;\n            if (this.connections[i].endpoints[oIdx].connections.length === 1) {\n              this.connections[i].endpoints[oIdx].setVisible(v, true, true);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"applyType\",\n    value: function applyType(t, typeMap) {\n      _get(_getPrototypeOf(Endpoint.prototype), \"applyType\", this).call(this, t, typeMap);\n      this.setPaintStyle(t.endpointStyle || t.paintStyle);\n      this.setHoverPaintStyle(t.endpointHoverStyle || t.hoverPaintStyle);\n      this.connectorStyle = t.connectorStyle;\n      this.connectorHoverStyle = t.connectorHoverStyle;\n      this.connector = t.connector;\n      this.connectorOverlays = t.connectorOverlays;\n      this.edgeType = t.edgeType;\n      if (t.maxConnections != null) {\n        this.maxConnections = t.maxConnections;\n      }\n      if (t.scope) {\n        this.scope = t.scope;\n      }\n      extend(t, typeParameters);\n      this.instance.applyEndpointType(this, t);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Endpoint.prototype), \"destroy\", this).call(this);\n      this.deleted = true;\n      if (this.endpoint != null) {\n        this.instance.destroyEndpoint(this);\n      }\n    }\n  }, {\n    key: \"isFull\",\n    value: function isFull() {\n      return this.maxConnections === 0 ? true : !(this.isFloating() || this.maxConnections < 0 || this.connections.length < this.maxConnections);\n    }\n  }, {\n    key: \"isFloating\",\n    value: function isFloating() {\n      return this.instance.router.isFloating(this);\n    }\n  }, {\n    key: \"isConnectedTo\",\n    value: function isConnectedTo(otherEndpoint) {\n      var found = false;\n      if (otherEndpoint) {\n        for (var i = 0; i < this.connections.length; i++) {\n          if (this.connections[i].endpoints[1] === otherEndpoint || this.connections[i].endpoints[0] === otherEndpoint) {\n            found = true;\n            break;\n          }\n        }\n      }\n      return found;\n    }\n  }, {\n    key: \"setDragAllowedWhenFull\",\n    value: function setDragAllowedWhenFull(allowed) {\n      this.dragAllowedWhenFull = allowed;\n    }\n  }, {\n    key: \"getUuid\",\n    value: function getUuid() {\n      return this.uuid;\n    }\n  }, {\n    key: \"connectorSelector\",\n    value: function connectorSelector() {\n      return this.connections[0];\n    }\n  }, {\n    key: \"prepareEndpoint\",\n    value: function prepareEndpoint(ep, typeId) {\n      var endpointArgs = {\n        cssClass: this.cssClass,\n        endpoint: this\n      };\n      var endpoint;\n      if (isAssignableFrom(ep, EndpointRepresentation)) {\n        var epr = ep;\n        endpoint = EndpointFactory.clone(epr);\n        endpoint.classes = endpointArgs.cssClass.split(\" \");\n      } else if (isString(ep)) {\n        endpoint = EndpointFactory.get(this, ep, endpointArgs);\n      } else {\n        var fep = ep;\n        extend(endpointArgs, fep.options || {});\n        endpoint = EndpointFactory.get(this, fep.type, endpointArgs);\n      }\n      endpoint.typeId = typeId;\n      return endpoint;\n    }\n  }, {\n    key: \"setEndpoint\",\n    value: function setEndpoint(ep) {\n      var _ep = this.prepareEndpoint(ep);\n      this.setPreparedEndpoint(_ep);\n    }\n  }, {\n    key: \"setPreparedEndpoint\",\n    value: function setPreparedEndpoint(ep) {\n      if (this.endpoint != null) {\n        this.instance.destroyEndpoint(this);\n      }\n      this.endpoint = ep;\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(clazz, cascade) {\n      _get(_getPrototypeOf(Endpoint.prototype), \"addClass\", this).call(this, clazz, cascade);\n      if (this.endpoint != null) {\n        this.endpoint.addClass(clazz);\n      }\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(clazz, cascade) {\n      _get(_getPrototypeOf(Endpoint.prototype), \"removeClass\", this).call(this, clazz, cascade);\n      if (this.endpoint != null) {\n        this.endpoint.removeClass(clazz);\n      }\n    }\n  }]);\n  return Endpoint;\n}(Component);\n\nvar UINode = function UINode(instance, el) {\n  _classCallCheck(this, UINode);\n  this.instance = instance;\n  this.el = el;\n  _defineProperty(this, \"group\", void 0);\n};\nvar UIGroup = function (_UINode) {\n  _inherits(UIGroup, _UINode);\n  var _super = _createSuper(UIGroup);\n  function UIGroup(instance, el, options) {\n    var _this;\n    _classCallCheck(this, UIGroup);\n    _this = _super.call(this, instance, el);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"children\", []);\n    _defineProperty(_assertThisInitialized(_this), \"collapsed\", false);\n    _defineProperty(_assertThisInitialized(_this), \"droppable\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"enabled\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"orphan\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"constrain\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"proxied\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"ghost\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"revert\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"prune\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"dropOverride\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"anchor\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"endpoint\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"connections\", {\n      source: [],\n      target: [],\n      internal: []\n    });\n    _defineProperty(_assertThisInitialized(_this), \"manager\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"id\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"elId\", void 0);\n    var jel = _this.el;\n    jel._isJsPlumbGroup = true;\n    jel._jsPlumbGroup = _assertThisInitialized(_this);\n    _this.elId = instance.getId(el);\n    _this.orphan = options.orphan === true;\n    _this.revert = _this.orphan === true ? false : options.revert !== false;\n    _this.droppable = options.droppable !== false;\n    _this.ghost = options.ghost === true;\n    _this.enabled = options.enabled !== false;\n    _this.prune = _this.orphan !== true && options.prune === true;\n    _this.constrain = _this.ghost || options.constrain === true;\n    _this.proxied = options.proxied !== false;\n    _this.id = options.id || uuid();\n    _this.dropOverride = options.dropOverride === true;\n    _this.anchor = options.anchor;\n    _this.endpoint = options.endpoint;\n    _this.anchor = options.anchor;\n    instance.setAttribute(el, ATTRIBUTE_GROUP, \"\");\n    return _this;\n  }\n  _createClass(UIGroup, [{\n    key: \"contentArea\",\n    get: function get() {\n      return this.instance.getGroupContentArea(this);\n    }\n  }, {\n    key: \"overrideDrop\",\n    value: function overrideDrop(el, targetGroup) {\n      return this.dropOverride && (this.revert || this.prune || this.orphan);\n    }\n  }, {\n    key: \"getAnchor\",\n    value: function getAnchor(conn, endpointIndex) {\n      return this.anchor || \"Continuous\";\n    }\n  }, {\n    key: \"getEndpoint\",\n    value: function getEndpoint(conn, endpointIndex) {\n      return this.endpoint || {\n        type: DotEndpoint.type,\n        options: {\n          radius: 10\n        }\n      };\n    }\n  }, {\n    key: \"add\",\n    value: function add(_el, doNotFireEvent) {\n      var dragArea = this.instance.getGroupContentArea(this);\n      var __el = _el;\n      if (__el._jsPlumbParentGroup != null) {\n        if (__el._jsPlumbParentGroup === this) {\n          return;\n        } else {\n          __el._jsPlumbParentGroup.remove(_el, true, doNotFireEvent, false);\n        }\n      }\n      __el._jsPlumbParentGroup = this;\n      this.children.push(new UINode(this.instance, _el));\n      this.instance._appendElement(__el, dragArea);\n      this.manager._updateConnectionsForGroup(this);\n    }\n  }, {\n    key: \"resolveNode\",\n    value: function resolveNode(el) {\n      return el == null ? null : getWithFunction(this.children, function (u) {\n        return u.el === el;\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(el, manipulateDOM, doNotFireEvent, doNotUpdateConnections, targetGroup) {\n      var uiNode = this.resolveNode(el);\n      if (uiNode != null) {\n        this._doRemove(uiNode, manipulateDOM, doNotFireEvent, doNotUpdateConnections, targetGroup);\n      }\n    }\n  }, {\n    key: \"_doRemove\",\n    value: function _doRemove(child, manipulateDOM, doNotFireEvent, doNotUpdateConnections, targetGroup) {\n      var __el = child.el;\n      delete __el._jsPlumbParentGroup;\n      removeWithFunction(this.children, function (e) {\n        return e === child;\n      });\n      if (manipulateDOM) {\n        try {\n          this.instance.getGroupContentArea(this).removeChild(__el);\n        } catch (e) {\n          log(\"Could not remove element from Group \" + e);\n        }\n      }\n      if (!doNotFireEvent) {\n        var p = {\n          group: this,\n          el: __el\n        };\n        if (targetGroup) {\n          p.targetGroup = targetGroup;\n        }\n        this.instance.fire(EVENT_GROUP_MEMBER_REMOVED, p);\n      }\n      if (!doNotUpdateConnections) {\n        this.manager._updateConnectionsForGroup(this);\n      }\n    }\n  }, {\n    key: \"removeAll\",\n    value: function removeAll(manipulateDOM, doNotFireEvent) {\n      for (var i = 0, l = this.children.length; i < l; i++) {\n        var child = this.children[0];\n        this._doRemove(child, manipulateDOM, doNotFireEvent, true);\n        this.instance.unmanage(child.el, true);\n      }\n      this.children.length = 0;\n      this.manager._updateConnectionsForGroup(this);\n    }\n  }, {\n    key: \"orphanAll\",\n    value: function orphanAll() {\n      var orphanedPositions = {};\n      for (var i = 0; i < this.children.length; i++) {\n        var newPosition = this.manager.orphan(this.children[i].el, false);\n        orphanedPositions[newPosition.id] = newPosition.pos;\n      }\n      this.children.length = 0;\n      return orphanedPositions;\n    }\n  }, {\n    key: \"addGroup\",\n    value: function addGroup(group) {\n      if (this.instance.allowNestedGroups && group !== this) {\n        if (this.instance.groupManager.isAncestor(this, group)) {\n          return false;\n        }\n        if (group.group != null) {\n          group.group.removeGroup(group);\n        }\n        var groupElId = this.instance.getId(group.el);\n        var entry = this.instance.getManagedElements()[groupElId];\n        entry.group = this.elId;\n        var elpos = this.instance.getOffsetRelativeToRoot(group.el);\n        var cpos = this.collapsed ? this.instance.getOffsetRelativeToRoot(this.el) : this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));\n        group.el._jsPlumbParentGroup = this;\n        this.children.push(group);\n        this.instance._appendElementToGroup(this, group.el);\n        group.group = this;\n        var newPosition = {\n          x: elpos.x - cpos.x,\n          y: elpos.y - cpos.y\n        };\n        this.instance.setPosition(group.el, newPosition);\n        this.instance.fire(EVENT_NESTED_GROUP_ADDED, {\n          parent: this,\n          child: group\n        });\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"removeGroup\",\n    value: function removeGroup(group) {\n      if (group.group === this) {\n        var jel = group.el;\n        var d = this.instance.getGroupContentArea(this);\n        if (d === jel.parentNode) {\n          d.removeChild(group.el);\n        }\n        var groupElId = this.instance.getId(group.el);\n        var entry = this.instance.getManagedElements()[groupElId];\n        if (entry) {\n          delete entry.group;\n        }\n        this.children = this.children.filter(function (cg) {\n          return cg.id !== group.id;\n        });\n        delete group.group;\n        delete jel._jsPlumbParentGroup;\n        this.instance.fire(EVENT_NESTED_GROUP_REMOVED, {\n          parent: this,\n          child: group\n        });\n      }\n    }\n  }, {\n    key: \"getGroups\",\n    value: function getGroups() {\n      return this.children.filter(function (cg) {\n        return cg.constructor === UIGroup;\n      });\n    }\n  }, {\n    key: \"getNodes\",\n    value: function getNodes() {\n      return this.children.filter(function (cg) {\n        return cg.constructor === UINode;\n      });\n    }\n  }, {\n    key: \"collapseParent\",\n    get: function get() {\n      var cg = null;\n      if (this.group == null) {\n        return null;\n      } else {\n        var g = this.group;\n        while (g != null) {\n          if (g.collapsed) {\n            cg = g;\n          }\n          g = g.group;\n        }\n        return cg;\n      }\n    }\n  }]);\n  return UIGroup;\n}(UINode);\n\nvar GroupManager = function () {\n  function GroupManager(instance) {\n    var _this = this;\n    _classCallCheck(this, GroupManager);\n    this.instance = instance;\n    _defineProperty(this, \"groupMap\", {});\n    _defineProperty(this, \"_connectionSourceMap\", {});\n    _defineProperty(this, \"_connectionTargetMap\", {});\n    instance.bind(EVENT_INTERNAL_CONNECTION, function (p) {\n      var sourceGroup = _this.getGroupFor(p.source);\n      var targetGroup = _this.getGroupFor(p.target);\n      if (sourceGroup != null && targetGroup != null && sourceGroup === targetGroup) {\n        _this._connectionSourceMap[p.connection.id] = sourceGroup;\n        _this._connectionTargetMap[p.connection.id] = sourceGroup;\n        suggest(sourceGroup.connections.internal, p.connection);\n      } else {\n        if (sourceGroup != null) {\n          if (p.target._jsPlumbGroup === sourceGroup) {\n            suggest(sourceGroup.connections.internal, p.connection);\n          } else {\n            suggest(sourceGroup.connections.source, p.connection);\n          }\n          _this._connectionSourceMap[p.connection.id] = sourceGroup;\n        }\n        if (targetGroup != null) {\n          if (p.source._jsPlumbGroup === targetGroup) {\n            suggest(targetGroup.connections.internal, p.connection);\n          } else {\n            suggest(targetGroup.connections.target, p.connection);\n          }\n          _this._connectionTargetMap[p.connection.id] = targetGroup;\n        }\n      }\n    });\n    instance.bind(EVENT_INTERNAL_CONNECTION_DETACHED, function (p) {\n      _this._cleanupDetachedConnection(p.connection);\n    });\n    instance.bind(EVENT_CONNECTION_MOVED, function (p) {\n      var originalElement = p.originalEndpoint.element,\n          originalGroup = _this.getGroupFor(originalElement),\n          newEndpoint = p.connection.endpoints[p.index],\n          newElement = newEndpoint.element,\n          newGroup = _this.getGroupFor(newElement),\n          connMap = p.index === 0 ? _this._connectionSourceMap : _this._connectionTargetMap,\n          otherConnMap = p.index === 0 ? _this._connectionTargetMap : _this._connectionSourceMap;\n      if (newGroup != null) {\n        connMap[p.connection.id] = newGroup;\n        if (p.connection.source === p.connection.target) {\n          otherConnMap[p.connection.id] = newGroup;\n        }\n      } else {\n        delete connMap[p.connection.id];\n        if (p.connection.source === p.connection.target) {\n          delete otherConnMap[p.connection.id];\n        }\n      }\n      if (originalGroup != null) {\n        _this._updateConnectionsForGroup(originalGroup);\n      }\n      if (newGroup != null) {\n        _this._updateConnectionsForGroup(newGroup);\n      }\n    });\n  }\n  _createClass(GroupManager, [{\n    key: \"_cleanupDetachedConnection\",\n    value: function _cleanupDetachedConnection(conn) {\n      conn.proxies.length = 0;\n      var group = this._connectionSourceMap[conn.id],\n          f;\n      if (group != null) {\n        f = function f(c) {\n          return c.id === conn.id;\n        };\n        removeWithFunction(group.connections.source, f);\n        removeWithFunction(group.connections.target, f);\n        removeWithFunction(group.connections.internal, f);\n        delete this._connectionSourceMap[conn.id];\n      }\n      group = this._connectionTargetMap[conn.id];\n      if (group != null) {\n        f = function f(c) {\n          return c.id === conn.id;\n        };\n        removeWithFunction(group.connections.source, f);\n        removeWithFunction(group.connections.target, f);\n        removeWithFunction(group.connections.internal, f);\n        delete this._connectionTargetMap[conn.id];\n      }\n    }\n  }, {\n    key: \"addGroup\",\n    value: function addGroup(params) {\n      var jel = params.el;\n      if (this.groupMap[params.id] != null) {\n        throw new Error(\"cannot create Group [\" + params.id + \"]; a Group with that ID exists\");\n      }\n      if (jel._isJsPlumbGroup != null) {\n        throw new Error(\"cannot create Group [\" + params.id + \"]; the given element is already a Group\");\n      }\n      var group = new UIGroup(this.instance, params.el, params);\n      this.groupMap[group.id] = group;\n      if (params.collapsed) {\n        this.collapseGroup(group);\n      }\n      this.instance.manage(group.el);\n      this.instance.addClass(group.el, CLASS_GROUP_EXPANDED);\n      group.manager = this;\n      this._updateConnectionsForGroup(group);\n      this.instance.fire(EVENT_GROUP_ADDED, {\n        group: group\n      });\n      return group;\n    }\n  }, {\n    key: \"getGroup\",\n    value: function getGroup(groupId) {\n      var group = groupId;\n      if (isString(groupId)) {\n        group = this.groupMap[groupId];\n        if (group == null) {\n          throw new Error(\"No such group [\" + groupId + \"]\");\n        }\n      }\n      return group;\n    }\n  }, {\n    key: \"getGroupFor\",\n    value: function getGroupFor(el) {\n      var jel = el;\n      var c = this.instance.getContainer();\n      var abort = false,\n          g = null;\n      while (!abort) {\n        if (jel == null || jel === c) {\n          abort = true;\n        } else {\n          if (jel._jsPlumbParentGroup) {\n            g = jel._jsPlumbParentGroup;\n            abort = true;\n          } else {\n            jel = jel.parentNode;\n          }\n        }\n      }\n      return g;\n    }\n  }, {\n    key: \"getGroups\",\n    value: function getGroups() {\n      var g = [];\n      for (var key in this.groupMap) {\n        g.push(this.groupMap[key]);\n      }\n      return g;\n    }\n  }, {\n    key: \"removeGroup\",\n    value: function removeGroup(group, deleteMembers, manipulateView, doNotFireEvent) {\n      var _this2 = this;\n      var actualGroup = this.getGroup(group);\n      this.expandGroup(actualGroup, true);\n      var newPositions = {};\n      forEach(actualGroup.children, function (uiNode) {\n        var entry = _this2.instance.getManagedElements()[_this2.instance.getId(uiNode.el)];\n        if (entry) {\n          delete entry.group;\n        }\n      });\n      if (deleteMembers) {\n        forEach(actualGroup.getGroups(), function (cg) {\n          return _this2.removeGroup(cg, deleteMembers, manipulateView);\n        });\n        actualGroup.removeAll(manipulateView, doNotFireEvent);\n      } else {\n        if (actualGroup.group) {\n          forEach(actualGroup.children, function (c) {\n            return actualGroup.group.add(c.el);\n          });\n        }\n        newPositions = actualGroup.orphanAll();\n      }\n      if (actualGroup.group) {\n        actualGroup.group.removeGroup(actualGroup);\n      }\n      this.instance.unmanage(actualGroup.el, true);\n      delete this.groupMap[actualGroup.id];\n      this.instance.fire(EVENT_GROUP_REMOVED, {\n        group: actualGroup\n      });\n      return newPositions;\n    }\n  }, {\n    key: \"removeAllGroups\",\n    value: function removeAllGroups(deleteMembers, manipulateView, doNotFireEvent) {\n      for (var _g in this.groupMap) {\n        this.removeGroup(this.groupMap[_g], deleteMembers, manipulateView, doNotFireEvent);\n      }\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(f) {\n      for (var key in this.groupMap) {\n        f(this.groupMap[key]);\n      }\n    }\n  }, {\n    key: \"orphan\",\n    value: function orphan(el, doNotTransferToAncestor) {\n      var jel = el;\n      if (jel._jsPlumbParentGroup) {\n        var currentParent = jel._jsPlumbParentGroup;\n        var id = this.instance.getId(jel);\n        var pos = this.instance.getOffset(el);\n        if (doNotTransferToAncestor !== true && currentParent.group) {\n          this.instance._appendElementToGroup(currentParent.group, el);\n        } else {\n          this.instance._appendElementToContainer(el);\n        }\n        this.instance.setPosition(el, pos);\n        delete jel._jsPlumbParentGroup;\n        return {\n          id: id,\n          pos: pos\n        };\n      }\n    }\n  }, {\n    key: \"_updateConnectionsForGroup\",\n    value: function _updateConnectionsForGroup(group) {\n      var _this3 = this;\n      group.connections.source.length = 0;\n      group.connections.target.length = 0;\n      group.connections.internal.length = 0;\n      var members = group.children.slice().map(function (cn) {\n        return cn.el;\n      });\n      var childMembers = [];\n      forEach(members, function (member) {\n        Array.prototype.push.apply(childMembers, _this3.instance.getSelector(member, SELECTOR_MANAGED_ELEMENT));\n      });\n      Array.prototype.push.apply(members, childMembers);\n      if (members.length > 0) {\n        var c1 = this.instance.getConnections({\n          source: members,\n          scope: WILDCARD\n        }, true);\n        var c2 = this.instance.getConnections({\n          target: members,\n          scope: WILDCARD\n        }, true);\n        var processed = {};\n        var gs, gt;\n        var oneSet = function oneSet(c) {\n          for (var i = 0; i < c.length; i++) {\n            if (processed[c[i].id]) {\n              continue;\n            }\n            processed[c[i].id] = true;\n            gs = _this3.getGroupFor(c[i].source);\n            gt = _this3.getGroupFor(c[i].target);\n            if (c[i].source === group.el && gt === group || c[i].target === group.el && gs === group) {\n              group.connections.internal.push(c[i]);\n            } else if (gs === group) {\n              if (gt !== group) {\n                group.connections.source.push(c[i]);\n              } else {\n                group.connections.internal.push(c[i]);\n              }\n              _this3._connectionSourceMap[c[i].id] = group;\n            } else if (gt === group) {\n              group.connections.target.push(c[i]);\n              _this3._connectionTargetMap[c[i].id] = group;\n            }\n          }\n        };\n        oneSet(c1);\n        oneSet(c2);\n      }\n    }\n  }, {\n    key: \"_collapseConnection\",\n    value: function _collapseConnection(conn, index, group) {\n      var otherEl = conn.endpoints[index === 0 ? 1 : 0].element;\n      if (otherEl._jsPlumbParentGroup && !otherEl._jsPlumbParentGroup.proxied && otherEl._jsPlumbParentGroup.collapsed) {\n        return false;\n      }\n      var es = conn.endpoints[0].element,\n          esg = es._jsPlumbParentGroup,\n          esgcp = esg != null ? esg.collapseParent || esg : null,\n          et = conn.endpoints[1].element,\n          etg = et._jsPlumbParentGroup,\n          etgcp = etg != null ? etg.collapseParent || etg : null;\n      if (esgcp == null || etgcp == null || esgcp.id !== etgcp.id) {\n        var groupEl = group.el;\n            this.instance.getId(groupEl);\n        this.instance.proxyConnection(conn, index, groupEl,\n        function (conn, index) {\n          return group.getEndpoint(conn, index);\n        }, function (conn, index) {\n          return group.getAnchor(conn, index);\n        });\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"_expandConnection\",\n    value: function _expandConnection(c, index, group) {\n      this.instance.unproxyConnection(c, index);\n    }\n  }, {\n    key: \"isElementDescendant\",\n    value: function isElementDescendant(el, parentEl) {\n      var c = this.instance.getContainer();\n      var abort = false;\n      while (!abort) {\n        if (el == null || el === c) {\n          return false;\n        } else {\n          if (el === parentEl) {\n            return true;\n          } else {\n            el = el.parentNode;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"collapseGroup\",\n    value: function collapseGroup(group) {\n      var _this4 = this;\n      var actualGroup = this.getGroup(group);\n      if (actualGroup == null || actualGroup.collapsed) {\n        return;\n      }\n      var groupEl = actualGroup.el;\n      if (actualGroup.collapseParent == null) {\n        this.instance.setGroupVisible(actualGroup, false);\n        actualGroup.collapsed = true;\n        this.instance.removeClass(groupEl, CLASS_GROUP_EXPANDED);\n        this.instance.addClass(groupEl, CLASS_GROUP_COLLAPSED);\n        if (actualGroup.proxied) {\n          var collapsedConnectionIds = new Set();\n          var _collapseSet = function _collapseSet(conns, index) {\n            for (var i = 0; i < conns.length; i++) {\n              var c = conns[i];\n              if (_this4._collapseConnection(c, index, actualGroup) === true) {\n                collapsedConnectionIds.add(c.id);\n              }\n            }\n          };\n          _collapseSet(actualGroup.connections.source, 0);\n          _collapseSet(actualGroup.connections.target, 1);\n          forEach(actualGroup.getGroups(), function (cg) {\n            _this4.cascadeCollapse(actualGroup, cg, collapsedConnectionIds);\n          });\n        }\n        this.instance.revalidate(groupEl);\n        this.repaintGroup(actualGroup);\n        this.instance.fire(EVENT_GROUP_COLLAPSE, {\n          group: actualGroup\n        });\n      } else {\n        actualGroup.collapsed = true;\n        this.instance.removeClass(groupEl, CLASS_GROUP_EXPANDED);\n        this.instance.addClass(groupEl, CLASS_GROUP_COLLAPSED);\n      }\n    }\n  }, {\n    key: \"cascadeCollapse\",\n    value: function cascadeCollapse(collapsedGroup, targetGroup, collapsedIds) {\n      var _this5 = this;\n      if (collapsedGroup.proxied) {\n        var _collapseSet = function _collapseSet(conns, index) {\n          for (var i = 0; i < conns.length; i++) {\n            var c = conns[i];\n            if (!collapsedIds.has(c.id)) {\n              if (_this5._collapseConnection(c, index, collapsedGroup) === true) {\n                collapsedIds.add(c.id);\n              }\n            }\n          }\n        };\n        _collapseSet(targetGroup.connections.source, 0);\n        _collapseSet(targetGroup.connections.target, 1);\n      }\n      forEach(targetGroup.getGroups(), function (cg) {\n        _this5.cascadeCollapse(collapsedGroup, cg, collapsedIds);\n      });\n    }\n  }, {\n    key: \"expandGroup\",\n    value: function expandGroup(group, doNotFireEvent) {\n      var _this6 = this;\n      var actualGroup = this.getGroup(group);\n      if (actualGroup == null) {\n        return;\n      }\n      var groupEl = actualGroup.el;\n      if (actualGroup.collapseParent == null) {\n        this.instance.setGroupVisible(actualGroup, true);\n        actualGroup.collapsed = false;\n        this.instance.addClass(groupEl, CLASS_GROUP_EXPANDED);\n        this.instance.removeClass(groupEl, CLASS_GROUP_COLLAPSED);\n        if (actualGroup.proxied) {\n          var _expandSet = function _expandSet(conns, index) {\n            for (var i = 0; i < conns.length; i++) {\n              var c = conns[i];\n              _this6._expandConnection(c, index, actualGroup);\n            }\n          };\n          _expandSet(actualGroup.connections.source, 0);\n          _expandSet(actualGroup.connections.target, 1);\n          var _expandNestedGroup = function _expandNestedGroup(group, ignoreCollapsedStateForNested) {\n            if (ignoreCollapsedStateForNested || group.collapsed) {\n              var _collapseSet = function _collapseSet(conns, index) {\n                for (var i = 0; i < conns.length; i++) {\n                  var c = conns[i];\n                  _this6._collapseConnection(c, index, group.collapseParent || group);\n                }\n              };\n              _collapseSet(group.connections.source, 0);\n              _collapseSet(group.connections.target, 1);\n              forEach(group.connections.internal, function (c) {\n                return c.setVisible(false);\n              });\n              forEach(group.getGroups(), function (g) {\n                return _expandNestedGroup(g, true);\n              });\n            } else {\n              _this6.expandGroup(group, true);\n            }\n          };\n          forEach(actualGroup.getGroups(), _expandNestedGroup);\n        }\n        this.instance.revalidate(groupEl);\n        this.repaintGroup(actualGroup);\n        if (!doNotFireEvent) {\n          this.instance.fire(EVENT_GROUP_EXPAND, {\n            group: actualGroup\n          });\n        }\n      } else {\n        actualGroup.collapsed = false;\n        this.instance.addClass(groupEl, CLASS_GROUP_EXPANDED);\n        this.instance.removeClass(groupEl, CLASS_GROUP_COLLAPSED);\n      }\n    }\n  }, {\n    key: \"toggleGroup\",\n    value: function toggleGroup(group) {\n      group = this.getGroup(group);\n      if (group != null) {\n        if (group.collapsed) {\n          this.expandGroup(group);\n        } else {\n          this.collapseGroup(group);\n        }\n      }\n    }\n  }, {\n    key: \"repaintGroup\",\n    value: function repaintGroup(group) {\n      var actualGroup = this.getGroup(group);\n      var m = actualGroup.children;\n      for (var i = 0; i < m.length; i++) {\n        this.instance.revalidate(m[i].el);\n      }\n    }\n  }, {\n    key: \"addToGroup\",\n    value: function addToGroup(group, doNotFireEvent) {\n      var _this7 = this;\n      var actualGroup = this.getGroup(group);\n      if (actualGroup) {\n        var groupEl = actualGroup.el;\n        var _one = function _one(el) {\n          var jel = el;\n          var isGroup = jel._isJsPlumbGroup != null,\n              droppingGroup = jel._jsPlumbGroup;\n          var currentGroup = jel._jsPlumbParentGroup;\n          if (currentGroup !== actualGroup) {\n            var entry = _this7.instance.manage(el);\n            var elpos = _this7.instance.getOffset(el);\n            var cpos = actualGroup.collapsed ? _this7.instance.getOffsetRelativeToRoot(groupEl) : _this7.instance.getOffset(_this7.instance.getGroupContentArea(actualGroup));\n            entry.group = actualGroup.elId;\n            if (currentGroup != null) {\n              currentGroup.remove(el, false, doNotFireEvent, false, actualGroup);\n              _this7._updateConnectionsForGroup(currentGroup);\n            }\n            if (isGroup) {\n              actualGroup.addGroup(droppingGroup);\n            } else {\n              actualGroup.add(el, doNotFireEvent);\n            }\n            var handleDroppedConnections = function handleDroppedConnections(list, index) {\n              var oidx = index === 0 ? 1 : 0;\n              list.each(function (c) {\n                c.setVisible(false);\n                if (c.endpoints[oidx].element._jsPlumbGroup === actualGroup) {\n                  c.endpoints[oidx].setVisible(false);\n                  _this7._expandConnection(c, oidx, actualGroup);\n                } else {\n                  c.endpoints[index].setVisible(false);\n                  _this7._collapseConnection(c, index, actualGroup);\n                }\n              });\n            };\n            if (actualGroup.collapsed) {\n              handleDroppedConnections(_this7.instance.select({\n                source: el\n              }), 0);\n              handleDroppedConnections(_this7.instance.select({\n                target: el\n              }), 1);\n            }\n            _this7.instance.getId(el);\n            var newPosition = {\n              x: elpos.x - cpos.x,\n              y: elpos.y - cpos.y\n            };\n            _this7.instance.setPosition(el, newPosition);\n            _this7._updateConnectionsForGroup(actualGroup);\n            _this7.instance.revalidate(el);\n            if (!doNotFireEvent) {\n              var p = {\n                group: actualGroup,\n                el: el,\n                pos: newPosition\n              };\n              if (currentGroup) {\n                p.sourceGroup = currentGroup;\n              }\n              _this7.instance.fire(EVENT_GROUP_MEMBER_ADDED, p);\n            }\n          }\n        };\n        for (var _len = arguments.length, el = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n          el[_key - 2] = arguments[_key];\n        }\n        forEach(el, _one);\n      }\n    }\n  }, {\n    key: \"removeFromGroup\",\n    value: function removeFromGroup(group, doNotFireEvent) {\n      var _this8 = this;\n      var actualGroup = this.getGroup(group);\n      if (actualGroup) {\n        var _one = function _one(_el) {\n          if (actualGroup.collapsed) {\n            var _expandSet = function _expandSet(conns, index) {\n              for (var i = 0; i < conns.length; i++) {\n                var c = conns[i];\n                if (c.proxies) {\n                  for (var j = 0; j < c.proxies.length; j++) {\n                    if (c.proxies[j] != null) {\n                      var proxiedElement = c.proxies[j].originalEp.element;\n                      if (proxiedElement === _el || _this8.isElementDescendant(proxiedElement, _el)) {\n                        _this8._expandConnection(c, index, actualGroup);\n                      }\n                    }\n                  }\n                }\n              }\n            };\n            _expandSet(actualGroup.connections.source.slice(), 0);\n            _expandSet(actualGroup.connections.target.slice(), 1);\n          }\n          actualGroup.remove(_el, null, doNotFireEvent);\n          var entry = _this8.instance.getManagedElements()[_this8.instance.getId(_el)];\n          if (entry) {\n            delete entry.group;\n          }\n        };\n        for (var _len2 = arguments.length, el = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n          el[_key2 - 2] = arguments[_key2];\n        }\n        forEach(el, _one);\n      }\n    }\n  }, {\n    key: \"getAncestors\",\n    value: function getAncestors(group) {\n      var ancestors = [];\n      var p = group.group;\n      while (p != null) {\n        ancestors.push(p);\n        p = p.group;\n      }\n      return ancestors;\n    }\n  }, {\n    key: \"isAncestor\",\n    value: function isAncestor(group, possibleAncestor) {\n      if (group == null || possibleAncestor == null) {\n        return false;\n      }\n      return this.getAncestors(group).indexOf(possibleAncestor) !== -1;\n    }\n  }, {\n    key: \"getDescendants\",\n    value: function getDescendants(group) {\n      var d = [];\n      var _one = function _one(g) {\n        var childGroups = g.getGroups();\n        d.push.apply(d, _toConsumableArray(childGroups));\n        forEach(childGroups, _one);\n      };\n      _one(group);\n      return d;\n    }\n  }, {\n    key: \"isDescendant\",\n    value: function isDescendant(possibleDescendant, ancestor) {\n      if (possibleDescendant == null || ancestor == null) {\n        return false;\n      }\n      return this.getDescendants(ancestor).indexOf(possibleDescendant) !== -1;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._connectionSourceMap = {};\n      this._connectionTargetMap = {};\n      this.groupMap = {};\n    }\n  }]);\n  return GroupManager;\n}();\n\nvar SelectionBase = function () {\n  function SelectionBase(instance, entries) {\n    _classCallCheck(this, SelectionBase);\n    this.instance = instance;\n    this.entries = entries;\n  }\n  _createClass(SelectionBase, [{\n    key: \"length\",\n    get: function get() {\n      return this.entries.length;\n    }\n  }, {\n    key: \"each\",\n    value: function each(handler) {\n      forEach(this.entries, function (e) {\n        return handler(e);\n      });\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function get(index) {\n      return this.entries[index];\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(clazz, cascade) {\n      this.each(function (c) {\n        return c.addClass(clazz, cascade);\n      });\n      return this;\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(clazz, cascade) {\n      this.each(function (c) {\n        return c.removeClass(clazz, cascade);\n      });\n      return this;\n    }\n  }, {\n    key: \"removeAllOverlays\",\n    value: function removeAllOverlays() {\n      this.each(function (c) {\n        return c.removeAllOverlays();\n      });\n      return this;\n    }\n  }, {\n    key: \"setLabel\",\n    value: function setLabel(label) {\n      this.each(function (c) {\n        return c.setLabel(label);\n      });\n      return this;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.entries.length = 0;\n      return this;\n    }\n  }, {\n    key: \"map\",\n    value: function map(fn) {\n      var a = [];\n      this.each(function (e) {\n        return a.push(fn(e));\n      });\n      return a;\n    }\n  }, {\n    key: \"addOverlay\",\n    value: function addOverlay(spec) {\n      this.each(function (c) {\n        return c.addOverlay(spec);\n      });\n      return this;\n    }\n  }, {\n    key: \"removeOverlay\",\n    value: function removeOverlay(id) {\n      this.each(function (c) {\n        return c.removeOverlay(id);\n      });\n      return this;\n    }\n  }, {\n    key: \"removeOverlays\",\n    value: function removeOverlays() {\n      this.each(function (c) {\n        return c.removeOverlays();\n      });\n      return this;\n    }\n  }, {\n    key: \"showOverlay\",\n    value: function showOverlay(id) {\n      this.each(function (c) {\n        return c.showOverlay(id);\n      });\n      return this;\n    }\n  }, {\n    key: \"hideOverlay\",\n    value: function hideOverlay(id) {\n      this.each(function (c) {\n        return c.hideOverlay(id);\n      });\n      return this;\n    }\n  }, {\n    key: \"setPaintStyle\",\n    value: function setPaintStyle(style) {\n      this.each(function (c) {\n        return c.setPaintStyle(style);\n      });\n      return this;\n    }\n  }, {\n    key: \"setHoverPaintStyle\",\n    value: function setHoverPaintStyle(style) {\n      this.each(function (c) {\n        return c.setHoverPaintStyle(style);\n      });\n      return this;\n    }\n  }, {\n    key: \"setSuspendEvents\",\n    value: function setSuspendEvents(suspend) {\n      this.each(function (c) {\n        return c.setSuspendEvents(suspend);\n      });\n      return this;\n    }\n  }, {\n    key: \"setParameter\",\n    value: function setParameter(name, value) {\n      this.each(function (c) {\n        return c.parameters[name] = value;\n      });\n      return this;\n    }\n  }, {\n    key: \"setParameters\",\n    value: function setParameters(p) {\n      this.each(function (c) {\n        return c.parameters = p;\n      });\n      return this;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(v) {\n      this.each(function (c) {\n        return c.setVisible(v);\n      });\n      return this;\n    }\n  }, {\n    key: \"addType\",\n    value: function addType(name) {\n      this.each(function (c) {\n        return c.addType(name);\n      });\n      return this;\n    }\n  }, {\n    key: \"toggleType\",\n    value: function toggleType(name) {\n      this.each(function (c) {\n        return c.toggleType(name);\n      });\n      return this;\n    }\n  }, {\n    key: \"removeType\",\n    value: function removeType(name) {\n      this.each(function (c) {\n        return c.removeType(name);\n      });\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(evt, handler) {\n      this.each(function (c) {\n        return c.bind(evt, handler);\n      });\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(evt, handler) {\n      this.each(function (c) {\n        return c.unbind(evt, handler);\n      });\n      return this;\n    }\n  }, {\n    key: \"setHover\",\n    value: function setHover(h) {\n      var _this = this;\n      this.each(function (c) {\n        return _this.instance.setHover(c, h);\n      });\n      return this;\n    }\n  }]);\n  return SelectionBase;\n}();\n\nvar EndpointSelection = function (_SelectionBase) {\n  _inherits(EndpointSelection, _SelectionBase);\n  var _super = _createSuper(EndpointSelection);\n  function EndpointSelection() {\n    _classCallCheck(this, EndpointSelection);\n    return _super.apply(this, arguments);\n  }\n  _createClass(EndpointSelection, [{\n    key: \"setEnabled\",\n    value: function setEnabled(e) {\n      this.each(function (ep) {\n        return ep.enabled = e;\n      });\n      return this;\n    }\n  }, {\n    key: \"setAnchor\",\n    value: function setAnchor(a) {\n      this.each(function (ep) {\n        return ep.setAnchor(a);\n      });\n      return this;\n    }\n  }, {\n    key: \"deleteEveryConnection\",\n    value: function deleteEveryConnection() {\n      this.each(function (ep) {\n        return ep.deleteEveryConnection();\n      });\n      return this;\n    }\n  }, {\n    key: \"deleteAll\",\n    value: function deleteAll() {\n      var _this = this;\n      this.each(function (ep) {\n        return _this.instance.deleteEndpoint(ep);\n      });\n      this.clear();\n      return this;\n    }\n  }]);\n  return EndpointSelection;\n}(SelectionBase);\n\nvar ConnectionSelection = function (_SelectionBase) {\n  _inherits(ConnectionSelection, _SelectionBase);\n  var _super = _createSuper(ConnectionSelection);\n  function ConnectionSelection() {\n    _classCallCheck(this, ConnectionSelection);\n    return _super.apply(this, arguments);\n  }\n  _createClass(ConnectionSelection, [{\n    key: \"setDetachable\",\n    value: function setDetachable(d) {\n      this.each(function (c) {\n        return c.setDetachable(d);\n      });\n      return this;\n    }\n  }, {\n    key: \"setReattach\",\n    value: function setReattach(d) {\n      this.each(function (c) {\n        return c.setReattach(d);\n      });\n      return this;\n    }\n  }, {\n    key: \"setConnector\",\n    value: function setConnector(spec) {\n      this.each(function (c) {\n        return c._setConnector(spec);\n      });\n      return this;\n    }\n  }, {\n    key: \"deleteAll\",\n    value: function deleteAll() {\n      var _this = this;\n      this.each(function (c) {\n        return _this.instance.deleteConnection(c);\n      });\n      this.clear();\n    }\n  }, {\n    key: \"repaint\",\n    value: function repaint() {\n      var _this2 = this;\n      this.each(function (c) {\n        return _this2.instance._paintConnection(c);\n      });\n      return this;\n    }\n  }]);\n  return ConnectionSelection;\n}(SelectionBase);\n\nvar Transaction = function Transaction() {\n  _classCallCheck(this, Transaction);\n  _defineProperty(this, \"affectedElements\", new Set());\n};\nfunction EMPTY_POSITION() {\n  return {\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    r: 0,\n    c: {\n      x: 0,\n      y: 0\n    },\n    x2: 0,\n    y2: 0,\n    t: {\n      x: 0,\n      y: 0,\n      c: {\n        x: 0,\n        y: 0\n      },\n      w: 0,\n      h: 0,\n      r: 0,\n      x2: 0,\n      y2: 0,\n      cr: 0,\n      sr: 0\n    },\n    dirty: true\n  };\n}\nfunction rotate(x, y, w, h, r) {\n  var center = {\n    x: x + w / 2,\n    y: y + h / 2\n  },\n      cr = Math.cos(r / 360 * Math.PI * 2),\n      sr = Math.sin(r / 360 * Math.PI * 2),\n      _point = function _point(x, y) {\n    return {\n      x: center.x + Math.round((x - center.x) * cr - (y - center.y) * sr),\n      y: center.y + Math.round((y - center.y) * cr - (x - center.x) * sr)\n    };\n  };\n  var p1 = _point(x, y),\n      p2 = _point(x + w, y),\n      p3 = _point(x + w, y + h),\n      p4 = _point(x, y + h),\n      c = _point(x + w / 2, y + h / 2);\n  var xmin = Math.min(p1.x, p2.x, p3.x, p4.x),\n      xmax = Math.max(p1.x, p2.x, p3.x, p4.x),\n      ymin = Math.min(p1.y, p2.y, p3.y, p4.y),\n      ymax = Math.max(p1.y, p2.y, p3.y, p4.y);\n  return {\n    x: xmin,\n    y: ymin,\n    w: xmax - xmin,\n    h: ymax - ymin,\n    c: c,\n    r: r,\n    x2: xmax,\n    y2: ymax,\n    cr: cr,\n    sr: sr\n  };\n}\nvar entryComparator = function entryComparator(value, arrayEntry) {\n  var c = 0;\n  if (arrayEntry[1] > value[1]) {\n    c = -1;\n  } else if (arrayEntry[1] < value[1]) {\n    c = 1;\n  }\n  return c;\n};\nvar reverseEntryComparator = function reverseEntryComparator(value, arrayEntry) {\n  return entryComparator(value, arrayEntry) * -1;\n};\nfunction _updateElementIndex(id, value, array, sortDescending) {\n  insertSorted([id, value], array, entryComparator, sortDescending);\n}\nfunction _clearElementIndex(id, array) {\n  var idx = findWithFunction(array, function (entry) {\n    return entry[0] === id;\n  });\n  if (idx > -1) {\n    array.splice(idx, 1);\n  }\n}\nvar Viewport = function (_EventGenerator) {\n  _inherits(Viewport, _EventGenerator);\n  var _super = _createSuper(Viewport);\n  function Viewport(instance) {\n    var _this;\n    _classCallCheck(this, Viewport);\n    _this = _super.call(this);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"_currentTransaction\", null);\n    _defineProperty(_assertThisInitialized(_this), \"_sortedElements\", {\n      xmin: [],\n      xmax: [],\n      ymin: [],\n      ymax: []\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_elementMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"_transformedElementMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"_bounds\", {\n      minx: 0,\n      maxx: 0,\n      miny: 0,\n      maxy: 0\n    });\n    return _this;\n  }\n  _createClass(Viewport, [{\n    key: \"_updateBounds\",\n    value: function _updateBounds(id, updatedElement, doNotRecalculateBounds) {\n      if (updatedElement != null) {\n        _clearElementIndex(id, this._sortedElements.xmin);\n        _clearElementIndex(id, this._sortedElements.xmax);\n        _clearElementIndex(id, this._sortedElements.ymin);\n        _clearElementIndex(id, this._sortedElements.ymax);\n        _updateElementIndex(id, updatedElement.t.x, this._sortedElements.xmin, false);\n        _updateElementIndex(id, updatedElement.t.x + updatedElement.t.w, this._sortedElements.xmax, true);\n        _updateElementIndex(id, updatedElement.t.y, this._sortedElements.ymin, false);\n        _updateElementIndex(id, updatedElement.t.y + updatedElement.t.h, this._sortedElements.ymax, true);\n        if (doNotRecalculateBounds !== true) {\n          this._recalculateBounds();\n        }\n      }\n    }\n  }, {\n    key: \"_recalculateBounds\",\n    value: function _recalculateBounds() {\n      this._bounds.minx = this._sortedElements.xmin.length > 0 ? this._sortedElements.xmin[0][1] : 0;\n      this._bounds.maxx = this._sortedElements.xmax.length > 0 ? this._sortedElements.xmax[0][1] : 0;\n      this._bounds.miny = this._sortedElements.ymin.length > 0 ? this._sortedElements.ymin[0][1] : 0;\n      this._bounds.maxy = this._sortedElements.ymax.length > 0 ? this._sortedElements.ymax[0][1] : 0;\n    }\n  }, {\n    key: \"recomputeBounds\",\n    value: function recomputeBounds() {\n      var _this2 = this;\n      this._sortedElements.xmin.length = 0;\n      this._sortedElements.xmax.length = 0;\n      this._sortedElements.ymin.length = 0;\n      this._sortedElements.ymax.length = 0;\n      this._elementMap.forEach(function (vp, id) {\n        _this2._sortedElements.xmin.push([id, vp.t.x]);\n        _this2._sortedElements.xmax.push([id, vp.t.x + vp.t.w]);\n        _this2._sortedElements.ymin.push([id, vp.t.y]);\n        _this2._sortedElements.ymax.push([id, vp.t.y + vp.t.h]);\n      });\n      this._sortedElements.xmin.sort(entryComparator);\n      this._sortedElements.ymin.sort(entryComparator);\n      this._sortedElements.xmax.sort(reverseEntryComparator);\n      this._sortedElements.ymax.sort(reverseEntryComparator);\n      this._recalculateBounds();\n    }\n  }, {\n    key: \"_finaliseUpdate\",\n    value: function _finaliseUpdate(id, e, doNotRecalculateBounds) {\n      e.t = rotate(e.x, e.y, e.w, e.h, e.r);\n      this._transformedElementMap.set(id, e.t);\n      if (doNotRecalculateBounds !== true) {\n        this._updateBounds(id, e, doNotRecalculateBounds);\n      }\n    }\n  }, {\n    key: \"shouldFireEvent\",\n    value: function shouldFireEvent(event, value, originalEvent) {\n      return true;\n    }\n  }, {\n    key: \"startTransaction\",\n    value: function startTransaction() {\n      if (this._currentTransaction != null) {\n        throw new Error(\"Viewport: cannot start transaction; a transaction is currently active.\");\n      }\n      this._currentTransaction = new Transaction();\n    }\n  }, {\n    key: \"endTransaction\",\n    value: function endTransaction() {\n      var _this3 = this;\n      if (this._currentTransaction != null) {\n        this._currentTransaction.affectedElements.forEach(function (id) {\n          var entry = _this3.getPosition(id);\n          _this3._finaliseUpdate(id, entry, true);\n        });\n        this.recomputeBounds();\n        this._currentTransaction = null;\n      }\n    }\n  }, {\n    key: \"updateElements\",\n    value: function updateElements(entries) {\n      var _this4 = this;\n      forEach(entries, function (e) {\n        return _this4.updateElement(e.id, e.x, e.y, e.width, e.height, e.rotation);\n      });\n    }\n  }, {\n    key: \"updateElement\",\n    value: function updateElement(id, x, y, width, height, rotation, doNotRecalculateBounds) {\n      var e = getsert(this._elementMap, id, EMPTY_POSITION);\n      e.dirty = x == null && e.x == null || y == null && e.y == null || width == null && e.w == null || height == null && e.h == null;\n      if (x != null) {\n        e.x = x;\n      }\n      if (y != null) {\n        e.y = y;\n      }\n      if (width != null) {\n        e.w = width;\n      }\n      if (height != null) {\n        e.h = height;\n      }\n      if (rotation != null) {\n        e.r = rotation || 0;\n      }\n      e.c.x = e.x + e.w / 2;\n      e.c.y = e.y + e.h / 2;\n      e.x2 = e.x + e.w;\n      e.y2 = e.y + e.h;\n      if (this._currentTransaction == null) {\n        this._finaliseUpdate(id, e, doNotRecalculateBounds);\n      } else {\n        this._currentTransaction.affectedElements.add(id);\n      }\n      return e;\n    }\n  }, {\n    key: \"refreshElement\",\n    value: function refreshElement(elId, doNotRecalculateBounds) {\n      var me = this.instance.getManagedElements();\n      var s = me[elId] ? me[elId].el : null;\n      if (s != null) {\n        var size = this.getSize(s);\n        var offset = this.getOffset(s);\n        return this.updateElement(elId, offset.x, offset.y, size.w, size.h, null, doNotRecalculateBounds);\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize(el) {\n      return this.instance.getSize(el);\n    }\n  }, {\n    key: \"getOffset\",\n    value: function getOffset(el) {\n      return this.instance.getOffset(el);\n    }\n  }, {\n    key: \"registerElement\",\n    value: function registerElement(id, doNotRecalculateBounds) {\n      return this.updateElement(id, 0, 0, 0, 0, 0, doNotRecalculateBounds);\n    }\n  }, {\n    key: \"addElement\",\n    value: function addElement(id, x, y, width, height, rotation) {\n      return this.updateElement(id, x, y, width, height, rotation);\n    }\n  }, {\n    key: \"rotateElement\",\n    value: function rotateElement(id, rotation) {\n      var e = getsert(this._elementMap, id, EMPTY_POSITION);\n      e.r = rotation || 0;\n      this._finaliseUpdate(id, e);\n      return e;\n    }\n  }, {\n    key: \"getBoundsWidth\",\n    value: function getBoundsWidth() {\n      return this._bounds.maxx - this._bounds.minx;\n    }\n  }, {\n    key: \"getBoundsHeight\",\n    value: function getBoundsHeight() {\n      return this._bounds.maxy - this._bounds.miny;\n    }\n  }, {\n    key: \"getX\",\n    value: function getX() {\n      return this._bounds.minx;\n    }\n  }, {\n    key: \"getY\",\n    value: function getY() {\n      return this._bounds.miny;\n    }\n  }, {\n    key: \"setSize\",\n    value: function setSize(id, w, h) {\n      if (this._elementMap.has(id)) {\n        return this.updateElement(id, null, null, w, h, null);\n      }\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(id, x, y) {\n      if (this._elementMap.has(id)) {\n        return this.updateElement(id, x, y, null, null, null);\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._sortedElements.xmin.length = 0;\n      this._sortedElements.xmax.length = 0;\n      this._sortedElements.ymin.length = 0;\n      this._sortedElements.ymax.length = 0;\n      this._elementMap.clear();\n      this._transformedElementMap.clear();\n      this._recalculateBounds();\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(id) {\n      _clearElementIndex(id, this._sortedElements.xmin);\n      _clearElementIndex(id, this._sortedElements.xmax);\n      _clearElementIndex(id, this._sortedElements.ymin);\n      _clearElementIndex(id, this._sortedElements.ymax);\n      this._elementMap[\"delete\"](id);\n      this._transformedElementMap[\"delete\"](id);\n      this._recalculateBounds();\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition(id) {\n      return this._elementMap.get(id);\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return this._elementMap;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._elementMap.size === 0;\n    }\n  }]);\n  return Viewport;\n}(EventGenerator);\n\nvar _edgeSortFunctions;\nfunction _placeAnchorsOnLine(element, connections, horizontal, otherMultiplier, reverse) {\n  var sizeInAxis = horizontal ? element.w : element.h;\n  var sizeInOtherAxis = horizontal ? element.h : element.w;\n  var a = [],\n      step = sizeInAxis / (connections.length + 1);\n  for (var i = 0; i < connections.length; i++) {\n    var val = (i + 1) * step,\n        other = otherMultiplier * sizeInOtherAxis;\n    if (reverse) {\n      val = sizeInAxis - val;\n    }\n    var dx = horizontal ? val : other,\n        x = element.x + dx,\n        xp = dx / element.w;\n    var dy = horizontal ? other : val,\n        y = element.y + dy,\n        yp = dy / element.h;\n    if (element.r !== 0 && element.r != null) {\n      var rotated = rotatePoint({\n        x: x,\n        y: y\n      }, element.c, element.r);\n      x = rotated.x;\n      y = rotated.y;\n    }\n    a.push({\n      x: x,\n      y: y,\n      xLoc: xp,\n      yLoc: yp,\n      c: connections[i].c\n    });\n  }\n  return a;\n}\nfunction _rightAndBottomSort(a, b) {\n  return b.theta - a.theta;\n}\nfunction _leftAndTopSort(a, b) {\n  var p1 = a.theta < 0 ? -Math.PI - a.theta : Math.PI - a.theta,\n      p2 = b.theta < 0 ? -Math.PI - b.theta : Math.PI - b.theta;\n  return p1 - p2;\n}\nvar edgeSortFunctions = (_edgeSortFunctions = {}, _defineProperty(_edgeSortFunctions, TOP, _leftAndTopSort), _defineProperty(_edgeSortFunctions, RIGHT, _rightAndBottomSort), _defineProperty(_edgeSortFunctions, BOTTOM, _rightAndBottomSort), _defineProperty(_edgeSortFunctions, LEFT, _leftAndTopSort), _edgeSortFunctions);\nfunction isContinuous(a) {\n  return a.isContinuous === true;\n}\nfunction _isFloating(a) {\n  return a.isContinuous === true;\n}\nfunction isDynamic(a) {\n  return a.locations.length > 1;\n}\nfunction getCurrentLocation(anchor) {\n  return [anchor.currentLocation, anchor.locations[anchor.currentLocation]];\n}\nvar LightweightRouter = function () {\n  function LightweightRouter(instance) {\n    var _this = this;\n    _classCallCheck(this, LightweightRouter);\n    this.instance = instance;\n    _defineProperty(this, \"anchorLists\", new Map());\n    _defineProperty(this, \"anchorLocations\", new Map());\n    instance.bind(EVENT_INTERNAL_CONNECTION_DETACHED, function (p) {\n      if (p.sourceEndpoint._anchor.isContinuous) {\n        _this._removeEndpointFromAnchorLists(p.sourceEndpoint);\n      }\n      if (p.targetEndpoint._anchor.isContinuous) {\n        _this._removeEndpointFromAnchorLists(p.targetEndpoint);\n      }\n    });\n    instance.bind(EVENT_INTERNAL_ENDPOINT_UNREGISTERED, function (ep) {\n      _this._removeEndpointFromAnchorLists(ep);\n    });\n  }\n  _createClass(LightweightRouter, [{\n    key: \"getAnchorOrientation\",\n    value: function getAnchorOrientation(anchor) {\n      var loc = this.anchorLocations.get(anchor.id);\n      return loc ? [loc.ox, loc.oy] : [0, 0];\n    }\n  }, {\n    key: \"_distance\",\n    value: function _distance(anchor, cx, cy, xy, wh, rotation, targetRotation) {\n      var ax = xy.x + anchor.x * wh.w,\n          ay = xy.y + anchor.y * wh.h,\n          acx = xy.x + wh.w / 2,\n          acy = xy.y + wh.h / 2;\n      if (rotation != null && rotation.length > 0) {\n        var rotated = this.instance._applyRotations([ax, ay, 0, 0], rotation);\n        ax = rotated.x;\n        ay = rotated.y;\n      }\n      return Math.sqrt(Math.pow(cx - ax, 2) + Math.pow(cy - ay, 2)) + Math.sqrt(Math.pow(acx - ax, 2) + Math.pow(acy - ay, 2));\n    }\n  }, {\n    key: \"_anchorSelector\",\n    value: function _anchorSelector(xy, wh, txy, twh, rotation, targetRotation, locations) {\n      var cx = txy.x + twh.w / 2,\n          cy = txy.y + twh.h / 2;\n      var minIdx = -1,\n          minDist = Infinity;\n      for (var i = 0; i < locations.length; i++) {\n        var d = this._distance(locations[i], cx, cy, xy, wh, rotation, targetRotation);\n        if (d < minDist) {\n          minIdx = i + 0;\n          minDist = d;\n        }\n      }\n      return [minIdx, locations[minIdx]];\n    }\n  }, {\n    key: \"_floatingAnchorCompute\",\n    value: function _floatingAnchorCompute(anchor, params) {\n      var xy = params.xy;\n      var pos = {\n        curX: xy.x + anchor.size.w / 2,\n        curY: xy.y + anchor.size.h / 2,\n        x: 0,\n        y: 0,\n        ox: 0,\n        oy: 0\n      };\n      return this._setComputedPosition(anchor, pos);\n    }\n  }, {\n    key: \"_setComputedPosition\",\n    value: function _setComputedPosition(anchor, pos, timestamp) {\n      this.anchorLocations.set(anchor.id, pos);\n      anchor.computedPosition = pos;\n      if (timestamp) {\n        anchor.timestamp = timestamp;\n      }\n      return pos;\n    }\n  }, {\n    key: \"_computeSingleLocation\",\n    value: function _computeSingleLocation(loc, xy, wh, params) {\n      var pos;\n      var rotation = params.rotation;\n      var candidate = {\n        curX: xy.x + loc.x * wh.w + loc.offx,\n        curY: xy.y + loc.y * wh.h + loc.offy,\n        x: loc.x,\n        y: loc.y,\n        ox: 0,\n        oy: 0\n      };\n      if (rotation != null && rotation.length > 0) {\n        var o = [loc.iox, loc.ioy],\n            current = {\n          x: candidate.curX,\n          y: candidate.curY,\n          cr: 0,\n          sr: 0\n        };\n        forEach(rotation, function (r) {\n          current = rotatePoint(current, r.c, r.r);\n          var _o = [Math.round(o[0] * current.cr - o[1] * current.sr), Math.round(o[1] * current.cr + o[0] * current.sr)];\n          o = _o.slice();\n        });\n        loc.ox = o[0];\n        loc.oy = o[1];\n        pos = {\n          curX: current.x,\n          curY: current.y,\n          x: loc.x,\n          y: loc.y,\n          ox: o[0],\n          oy: o[1]\n        };\n      } else {\n        loc.ox = loc.iox;\n        loc.oy = loc.ioy;\n        pos = extend({\n          ox: loc.iox,\n          oy: loc.ioy\n        }, candidate);\n      }\n      return pos;\n    }\n  }, {\n    key: \"_singleAnchorCompute\",\n    value: function _singleAnchorCompute(anchor, params) {\n      var xy = params.xy,\n          wh = params.wh,\n          timestamp = params.timestamp,\n          pos = this.anchorLocations.get(anchor.id);\n      if (pos != null && timestamp && timestamp === anchor.timestamp) {\n        return pos;\n      }\n      var _getCurrentLocation = getCurrentLocation(anchor),\n          _getCurrentLocation2 = _slicedToArray(_getCurrentLocation, 2);\n          _getCurrentLocation2[0];\n          var currentLoc = _getCurrentLocation2[1];\n      pos = this._computeSingleLocation(currentLoc, xy, wh, params);\n      return this._setComputedPosition(anchor, pos, timestamp);\n    }\n  }, {\n    key: \"_defaultAnchorCompute\",\n    value: function _defaultAnchorCompute(anchor, params) {\n      var pos;\n      if (anchor.locations.length === 1) {\n        return this._singleAnchorCompute(anchor, params);\n      }\n      var xy = params.xy,\n          wh = params.wh,\n          txy = params.txy,\n          twh = params.twh;\n      var _getCurrentLocation3 = getCurrentLocation(anchor),\n          _getCurrentLocation4 = _slicedToArray(_getCurrentLocation3, 2),\n          currentIdx = _getCurrentLocation4[0],\n          currentLoc = _getCurrentLocation4[1];\n      if (anchor.locked || txy == null || twh == null) {\n        pos = this._computeSingleLocation(currentLoc, xy, wh, params);\n      } else {\n        var _this$_anchorSelector = this._anchorSelector(xy, wh, txy, twh, params.rotation, params.tRotation, anchor.locations),\n            _this$_anchorSelector2 = _slicedToArray(_this$_anchorSelector, 2),\n            newIdx = _this$_anchorSelector2[0],\n            newLoc = _this$_anchorSelector2[1];\n        anchor.currentLocation = newIdx;\n        if (newIdx !== currentIdx) {\n          anchor.cssClass = newLoc.cls || anchor.cssClass;\n          params.element._anchorLocationChanged(anchor);\n        }\n        pos = this._computeSingleLocation(newLoc, xy, wh, params);\n      }\n      return this._setComputedPosition(anchor, pos, params.timestamp);\n    }\n  }, {\n    key: \"_placeAnchors\",\n    value: function _placeAnchors(elementId, _anchorLists) {\n      var _this2 = this;\n      var cd = this.instance.viewport.getPosition(elementId),\n          placeSomeAnchors = function placeSomeAnchors(desc, element, unsortedConnections, isHorizontal, otherMultiplier, orientation) {\n        if (unsortedConnections.length > 0) {\n          var sc = unsortedConnections.sort(edgeSortFunctions[desc]),\n          reverse = desc === RIGHT || desc === TOP,\n              anchors = _placeAnchorsOnLine(cd, sc, isHorizontal, otherMultiplier, reverse);\n          for (var i = 0; i < anchors.length; i++) {\n            var c = anchors[i].c,\n                weAreSource = c.endpoints[0].elementId === elementId,\n                ep = weAreSource ? c.endpoints[0] : c.endpoints[1];\n            _this2._setComputedPosition(ep._anchor, {\n              curX: anchors[i].x,\n              curY: anchors[i].y,\n              x: anchors[i].xLoc,\n              y: anchors[i].yLoc,\n              ox: orientation[0],\n              oy: orientation[1]\n            });\n          }\n        }\n      };\n      placeSomeAnchors(BOTTOM, cd, _anchorLists.bottom, true, 1, [0, 1]);\n      placeSomeAnchors(TOP, cd, _anchorLists.top, true, 0, [0, -1]);\n      placeSomeAnchors(LEFT, cd, _anchorLists.left, false, 0, [-1, 0]);\n      placeSomeAnchors(RIGHT, cd, _anchorLists.right, false, 1, [1, 0]);\n    }\n  }, {\n    key: \"_updateAnchorList\",\n    value: function _updateAnchorList(lists, theta, order, conn, aBoolean, otherElId, idx, reverse, edgeId, connsToPaint, endpointsToPaint) {\n      var endpoint = conn.endpoints[idx],\n          endpointId = endpoint.id,\n          oIdx = [1, 0][idx],\n          values = {\n        theta: theta,\n        order: order,\n        c: conn,\n        b: aBoolean,\n        elId: otherElId,\n        epId: endpointId\n      },\n          listToAddTo = lists[edgeId],\n          listToRemoveFrom = endpoint._continuousAnchorEdge ? lists[endpoint._continuousAnchorEdge] : null,\n          candidate;\n      if (listToRemoveFrom) {\n        var rIdx = findWithFunction(listToRemoveFrom, function (e) {\n          return e.epId === endpointId;\n        });\n        if (rIdx !== -1) {\n          listToRemoveFrom.splice(rIdx, 1);\n          for (var i = 0; i < listToRemoveFrom.length; i++) {\n            candidate = listToRemoveFrom[i].c;\n            if (candidate.placeholder !== true) {\n              connsToPaint.add(candidate);\n            }\n            endpointsToPaint.add(listToRemoveFrom[i].c.endpoints[idx]);\n            endpointsToPaint.add(listToRemoveFrom[i].c.endpoints[oIdx]);\n          }\n        }\n      }\n      for (var _i = 0; _i < listToAddTo.length; _i++) {\n        candidate = listToAddTo[_i].c;\n        if (candidate.placeholder !== true) {\n          connsToPaint.add(candidate);\n        }\n        endpointsToPaint.add(listToAddTo[_i].c.endpoints[idx]);\n        endpointsToPaint.add(listToAddTo[_i].c.endpoints[oIdx]);\n      }\n      {\n        var insertIdx = reverse ? 0 : listToAddTo.length;\n        listToAddTo.splice(insertIdx, 0, values);\n      }\n      endpoint._continuousAnchorEdge = edgeId;\n    }\n  }, {\n    key: \"_removeEndpointFromAnchorLists\",\n    value: function _removeEndpointFromAnchorLists(endpoint) {\n      var listsForElement = this.anchorLists.get(endpoint.elementId);\n      var total = 0;\n      (function (list, eId) {\n        if (list) {\n          var f = function f(e) {\n            return e.epId === eId;\n          };\n          removeWithFunction(list.top, f);\n          removeWithFunction(list.left, f);\n          removeWithFunction(list.bottom, f);\n          removeWithFunction(list.right, f);\n          total += list.top.length;\n          total += list.left.length;\n          total += list.bottom.length;\n          total += list.right.length;\n        }\n      })(listsForElement, endpoint.id);\n      if (total === 0) {\n        this.anchorLists[\"delete\"](endpoint.elementId);\n      }\n      this.anchorLocations[\"delete\"](endpoint._anchor.id);\n    }\n  }, {\n    key: \"computeAnchorLocation\",\n    value: function computeAnchorLocation(anchor, params) {\n      var pos;\n      if (isContinuous(anchor)) {\n        pos = this.anchorLocations.get(anchor.id) || {\n          curX: 0,\n          curY: 0,\n          x: 0,\n          y: 0,\n          ox: 0,\n          oy: 0\n        };\n      } else if (_isFloating(anchor)) {\n        pos = this._floatingAnchorCompute(anchor, params);\n      } else {\n        pos = this._defaultAnchorCompute(anchor, params);\n      }\n      anchor.timestamp = params.timestamp;\n      return pos;\n    }\n  }, {\n    key: \"computePath\",\n    value: function computePath(connection, timestamp) {\n      var sourceInfo = this.instance.viewport.getPosition(connection.sourceId),\n          targetInfo = this.instance.viewport.getPosition(connection.targetId),\n          sE = connection.endpoints[0],\n          tE = connection.endpoints[1];\n      var sAnchorP = this.getEndpointLocation(sE, {\n        xy: sourceInfo,\n        wh: sourceInfo,\n        element: sE,\n        timestamp: timestamp,\n        rotation: this.instance._getRotations(connection.sourceId)\n      }),\n          tAnchorP = this.getEndpointLocation(tE, {\n        xy: targetInfo,\n        wh: targetInfo,\n        element: tE,\n        timestamp: timestamp,\n        rotation: this.instance._getRotations(connection.targetId)\n      });\n      connection.connector.resetBounds();\n      connection.connector.compute({\n        sourcePos: sAnchorP,\n        targetPos: tAnchorP,\n        sourceEndpoint: connection.endpoints[0],\n        targetEndpoint: connection.endpoints[1],\n        strokeWidth: connection.paintStyleInUse.strokeWidth,\n        sourceInfo: sourceInfo,\n        targetInfo: targetInfo\n      });\n    }\n  }, {\n    key: \"getEndpointLocation\",\n    value: function getEndpointLocation(endpoint, params) {\n      params = params || {};\n      var anchor = endpoint._anchor;\n      var pos = this.anchorLocations.get(anchor.id);\n      if (pos == null || params.timestamp != null && anchor.timestamp !== params.timestamp) {\n        pos = this.computeAnchorLocation(anchor, params);\n        this._setComputedPosition(anchor, pos, params.timestamp);\n      }\n      return pos;\n    }\n  }, {\n    key: \"getEndpointOrientation\",\n    value: function getEndpointOrientation(ep) {\n      return ep._anchor ? this.getAnchorOrientation(ep._anchor) : [0, 0];\n    }\n  }, {\n    key: \"setAnchorOrientation\",\n    value: function setAnchorOrientation(anchor, orientation) {\n      var anchorLoc = this.anchorLocations.get(anchor.id);\n      if (anchorLoc != null) {\n        anchorLoc.ox = orientation[0];\n        anchorLoc.oy = orientation[1];\n      }\n    }\n  }, {\n    key: \"isDynamicAnchor\",\n    value: function isDynamicAnchor(ep) {\n      return ep._anchor ? !isContinuous(ep._anchor) && ep._anchor.locations.length > 1 : false;\n    }\n  }, {\n    key: \"isFloating\",\n    value: function isFloating(ep) {\n      return ep._anchor ? _isFloating(ep._anchor) : false;\n    }\n  }, {\n    key: \"prepareAnchor\",\n    value: function prepareAnchor(params) {\n      return makeLightweightAnchorFromSpec(params);\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw(elementId, timestamp, offsetToUI) {\n      var _this3 = this;\n      var connectionsToPaint = new Set(),\n          endpointsToPaint = new Set(),\n          anchorsToUpdate = new Set();\n      if (!this.instance._suspendDrawing) {\n        var ep = this.instance.endpointsByElement[elementId] || [];\n        timestamp = timestamp || uuid();\n        var orientationCache = {},\n            a,\n            anEndpoint;\n        for (var i = 0; i < ep.length; i++) {\n          anEndpoint = ep[i];\n          endpointsToPaint.add(anEndpoint);\n          a = anEndpoint._anchor;\n          if (anEndpoint.connections.length === 0) {\n            if (isContinuous(a)) {\n              if (!this.anchorLists.has(elementId)) {\n                this.anchorLists.set(elementId, {\n                  top: [],\n                  right: [],\n                  bottom: [],\n                  left: []\n                });\n              }\n              this._updateAnchorList(this.anchorLists.get(elementId), -Math.PI / 2, 0, {\n                endpoints: [anEndpoint, anEndpoint],\n                placeholder: true\n              }, false, elementId, 0, false, getDefaultFace(a), connectionsToPaint, endpointsToPaint);\n              anchorsToUpdate.add(elementId);\n            }\n          } else {\n            for (var _i2 = 0; _i2 < anEndpoint.connections.length; _i2++) {\n              var conn = anEndpoint.connections[_i2],\n                  sourceId = conn.sourceId,\n                  targetId = conn.targetId,\n                  sourceContinuous = isContinuous(conn.endpoints[0]._anchor),\n                  targetContinuous = isContinuous(conn.endpoints[1]._anchor);\n              if (sourceContinuous || targetContinuous) {\n                var c1 = (conn.endpoints[0]._anchor.faces || []).join(\"-\"),\n                    c2 = (conn.endpoints[1]._anchor.faces || []).join(\"-\"),\n                    oKey = [sourceId, c1, targetId, c2].join(\"-\"),\n                    o = orientationCache[oKey],\n                    oIdx = conn.sourceId === elementId ? 1 : 0;\n                if (sourceContinuous && !this.anchorLists.has(sourceId)) {\n                  this.anchorLists.set(sourceId, {\n                    top: [],\n                    right: [],\n                    bottom: [],\n                    left: []\n                  });\n                }\n                if (targetContinuous && !this.anchorLists.has(targetId)) {\n                  this.anchorLists.set(targetId, {\n                    top: [],\n                    right: [],\n                    bottom: [],\n                    left: []\n                  });\n                }\n                var td = this.instance.viewport.getPosition(targetId),\n                    sd = this.instance.viewport.getPosition(sourceId);\n                if (targetId === sourceId && (sourceContinuous || targetContinuous)) {\n                  this._updateAnchorList(this.anchorLists.get(sourceId), -Math.PI / 2, 0, conn, false, targetId, 0, false, TOP, connectionsToPaint, endpointsToPaint);\n                  this._updateAnchorList(this.anchorLists.get(targetId), -Math.PI / 2, 0, conn, false, sourceId, 1, false, TOP, connectionsToPaint, endpointsToPaint);\n                } else {\n                  var sourceRotation = this.instance._getRotations(sourceId);\n                  var targetRotation = this.instance._getRotations(targetId);\n                  if (!o) {\n                    o = this._calculateOrientation(sourceId, targetId, sd, td, conn.endpoints[0]._anchor, conn.endpoints[1]._anchor, sourceRotation, targetRotation);\n                    orientationCache[oKey] = o;\n                  }\n                  if (sourceContinuous) {\n                    this._updateAnchorList(this.anchorLists.get(sourceId), o.theta, 0, conn, false, targetId, 0, false, o.a[0], connectionsToPaint, endpointsToPaint);\n                  }\n                  if (targetContinuous) {\n                    this._updateAnchorList(this.anchorLists.get(targetId), o.theta2, -1, conn, true, sourceId, 1, true, o.a[1], connectionsToPaint, endpointsToPaint);\n                  }\n                }\n                if (sourceContinuous) {\n                  anchorsToUpdate.add(sourceId);\n                }\n                if (targetContinuous) {\n                  anchorsToUpdate.add(targetId);\n                }\n                connectionsToPaint.add(conn);\n                if (sourceContinuous && oIdx === 0 || targetContinuous && oIdx === 1) {\n                  endpointsToPaint.add(conn.endpoints[oIdx]);\n                }\n              } else {\n                var otherEndpoint = anEndpoint.connections[_i2].endpoints[conn.sourceId === elementId ? 1 : 0],\n                    otherAnchor = otherEndpoint._anchor;\n                if (isDynamic(otherAnchor)) {\n                  this.instance._paintEndpoint(otherEndpoint, {\n                    elementWithPrecedence: elementId,\n                    timestamp: timestamp\n                  });\n                  connectionsToPaint.add(anEndpoint.connections[_i2]);\n                  for (var k = 0; k < otherEndpoint.connections.length; k++) {\n                    if (otherEndpoint.connections[k] !== anEndpoint.connections[_i2]) {\n                      connectionsToPaint.add(otherEndpoint.connections[k]);\n                    }\n                  }\n                } else {\n                  connectionsToPaint.add(anEndpoint.connections[_i2]);\n                }\n              }\n            }\n          }\n        }\n        anchorsToUpdate.forEach(function (anchor) {\n          _this3._placeAnchors(anchor, _this3.anchorLists.get(anchor));\n        });\n        endpointsToPaint.forEach(function (ep) {\n          var cd = _this3.instance.viewport.getPosition(ep.elementId);\n          _this3.instance._paintEndpoint(ep, {\n            timestamp: timestamp,\n            offset: cd\n          });\n        });\n        connectionsToPaint.forEach(function (c) {\n          _this3.instance._paintConnection(c, {\n            timestamp: timestamp\n          });\n        });\n      }\n      return {\n        c: connectionsToPaint,\n        e: endpointsToPaint\n      };\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.anchorLocations.clear();\n      this.anchorLists.clear();\n    }\n  }, {\n    key: \"setAnchor\",\n    value: function setAnchor(endpoint, anchor) {\n      if (anchor != null) {\n        endpoint._anchor = anchor;\n      }\n    }\n  }, {\n    key: \"setConnectionAnchors\",\n    value: function setConnectionAnchors(conn, anchors) {\n      conn.endpoints[0]._anchor = anchors[0];\n      conn.endpoints[1]._anchor = anchors[1];\n    }\n  }, {\n    key: \"_calculateOrientation\",\n    value: function _calculateOrientation(sourceId, targetId, sd, td, sourceAnchor, targetAnchor, sourceRotation, targetRotation) {\n      var _this4 = this;\n      var Orientation = {\n        HORIZONTAL: \"horizontal\",\n        VERTICAL: \"vertical\",\n        DIAGONAL: \"diagonal\",\n        IDENTITY: \"identity\"\n      };\n      if (sourceId === targetId) {\n        return {\n          orientation: Orientation.IDENTITY,\n          a: [TOP, TOP]\n        };\n      }\n      var theta = Math.atan2(td.c.y - sd.c.y, td.c.x - sd.c.x),\n          theta2 = Math.atan2(sd.c.y - td.c.y, sd.c.x - td.c.x);\n      var candidates = [],\n          midpoints = {};\n      (function (types, dim) {\n        for (var i = 0; i < types.length; i++) {\n          var _midpoints$types$i;\n          midpoints[types[i]] = (_midpoints$types$i = {}, _defineProperty(_midpoints$types$i, LEFT, {\n            x: dim[i][0].x,\n            y: dim[i][0].c.y\n          }), _defineProperty(_midpoints$types$i, RIGHT, {\n            x: dim[i][0].x + dim[i][0].w,\n            y: dim[i][0].c.y\n          }), _defineProperty(_midpoints$types$i, TOP, {\n            x: dim[i][0].c.x,\n            y: dim[i][0].y\n          }), _defineProperty(_midpoints$types$i, BOTTOM, {\n            x: dim[i][0].c.x,\n            y: dim[i][0].y + dim[i][0].h\n          }), _midpoints$types$i);\n          if (dim[i][1] != null && dim[i][1].length > 0) {\n            for (var axis in midpoints[types[i]]) {\n              midpoints[types[i]][axis] = _this4.instance._applyRotationsXY(midpoints[types[i]][axis], dim[i][1]);\n            }\n          }\n        }\n      })([SOURCE, TARGET], [[sd, sourceRotation], [td, targetRotation]]);\n      var FACES = [TOP, LEFT, RIGHT, BOTTOM];\n      for (var sf = 0; sf < FACES.length; sf++) {\n        for (var tf = 0; tf < FACES.length; tf++) {\n          candidates.push({\n            source: FACES[sf],\n            target: FACES[tf],\n            dist: lineLength(midpoints.source[FACES[sf]], midpoints.target[FACES[tf]])\n          });\n        }\n      }\n      candidates.sort(function (a, b) {\n        if (a.dist < b.dist) {\n          return -1;\n        } else if (b.dist < a.dist) {\n          return 1;\n        } else {\n          var _axisIndices;\n          var axisIndices = (_axisIndices = {}, _defineProperty(_axisIndices, LEFT, 0), _defineProperty(_axisIndices, TOP, 1), _defineProperty(_axisIndices, RIGHT, 2), _defineProperty(_axisIndices, BOTTOM, 3), _axisIndices),\n              ais = axisIndices[a.source],\n              bis = axisIndices[b.source],\n              ait = axisIndices[a.target],\n              bit = axisIndices[b.target];\n          return ais < bis ? -1 : bis < ais ? 1 : ait < bit ? -1 : bit < ait ? 1 : 0;\n        }\n      });\n      var sourceEdge = candidates[0].source,\n          targetEdge = candidates[0].target;\n      for (var i = 0; i < candidates.length; i++) {\n        if (isContinuous(sourceAnchor) && sourceAnchor.locked) {\n          sourceEdge = sourceAnchor.currentFace;\n        } else if (!sourceAnchor.isContinuous || isEdgeSupported(sourceAnchor, candidates[i].source)) {\n          sourceEdge = candidates[i].source;\n        } else {\n          sourceEdge = null;\n        }\n        if (targetAnchor.isContinuous && targetAnchor.locked) {\n          targetEdge = targetAnchor.currentFace;\n        } else if (!targetAnchor.isContinuous || isEdgeSupported(targetAnchor, candidates[i].target)) {\n          targetEdge = candidates[i].target;\n        } else {\n          targetEdge = null;\n        }\n        if (sourceEdge != null && targetEdge != null) {\n          break;\n        }\n      }\n      if (sourceAnchor.isContinuous) {\n        this.setCurrentFace(sourceAnchor, sourceEdge);\n      }\n      if (targetAnchor.isContinuous) {\n        this.setCurrentFace(targetAnchor, targetEdge);\n      }\n      return {\n        a: [sourceEdge, targetEdge],\n        theta: theta,\n        theta2: theta2\n      };\n    }\n  }, {\n    key: \"setCurrentFace\",\n    value: function setCurrentFace(a, face, overrideLock) {\n      a.currentFace = face;\n      if (overrideLock && a.lockedFace != null) {\n        a.lockedFace = a.currentFace;\n      }\n    }\n  }, {\n    key: \"lock\",\n    value: function lock(a) {\n      a.locked = true;\n      if (isContinuous(a)) {\n        a.lockedFace = a.currentFace;\n      }\n    }\n  }, {\n    key: \"unlock\",\n    value: function unlock(a) {\n      a.locked = false;\n      if (isContinuous(a)) {\n        a.lockedFace = null;\n      }\n    }\n  }, {\n    key: \"selectAnchorLocation\",\n    value: function selectAnchorLocation(a, coords) {\n      var idx = findWithFunction(a.locations, function (loc) {\n        return loc.x === coords.x && loc.y === coords.y;\n      });\n      if (idx !== -1) {\n        a.currentLocation = idx;\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"lockCurrentAxis\",\n    value: function lockCurrentAxis(a) {\n      if (a.currentFace != null) {\n        a.lockedAxis = a.currentFace === LEFT || a.currentFace === RIGHT ? X_AXIS_FACES : Y_AXIS_FACES;\n      }\n    }\n  }, {\n    key: \"unlockCurrentAxis\",\n    value: function unlockCurrentAxis(a) {\n      a.lockedAxis = null;\n    }\n  }, {\n    key: \"anchorsEqual\",\n    value: function anchorsEqual(a1, a2) {\n      if (!a1 || !a2) {\n        return false;\n      }\n      var l1 = a1.locations[a1.currentLocation],\n          l2 = a2.locations[a2.currentLocation];\n      return l1.x === l2.x && l1.y === l2.y && l1.offx === l2.offx && l1.offy === l2.offy && l1.ox === l2.ox && l1.oy === l2.oy;\n    }\n  }]);\n  return LightweightRouter;\n}();\n\nvar ConnectionDragSelector = function () {\n  function ConnectionDragSelector(selector, def) {\n    var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    _classCallCheck(this, ConnectionDragSelector);\n    this.selector = selector;\n    this.def = def;\n    this.exclude = exclude;\n    _defineProperty(this, \"id\", void 0);\n    _defineProperty(this, \"redrop\", void 0);\n    this.id = uuid();\n    this.redrop = def.def.redrop || REDROP_POLICY_STRICT;\n  }\n  _createClass(ConnectionDragSelector, [{\n    key: \"setEnabled\",\n    value: function setEnabled(enabled) {\n      this.def.enabled = enabled;\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.def.enabled !== false;\n    }\n  }]);\n  return ConnectionDragSelector;\n}();\nvar REDROP_POLICY_STRICT = \"strict\";\nvar REDROP_POLICY_ANY = \"any\";\nvar REDROP_POLICY_ANY_SOURCE = \"anySource\";\nvar REDROP_POLICY_ANY_TARGET = \"anyTarget\";\nvar REDROP_POLICY_ANY_SOURCE_OR_TARGET = \"anySourceOrTarget\";\n\nfunction _scopeMatch(e1, e2) {\n  var s1 = e1.scope.split(/\\s/),\n      s2 = e2.scope.split(/\\s/);\n  for (var i = 0; i < s1.length; i++) {\n    for (var j = 0; j < s2.length; j++) {\n      if (s2[j] === s1[i]) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nfunction prepareList(instance, input, doNotGetIds) {\n  var r = [];\n  var _resolveId = function _resolveId(i) {\n    if (isString(i)) {\n      return i;\n    } else {\n      return instance.getId(i);\n    }\n  };\n  if (input) {\n    if (typeof input === 'string') {\n      if (input === \"*\") {\n        return input;\n      }\n      r.push(input);\n    } else {\n      if (doNotGetIds) {\n        r = input;\n      } else {\n        if (input.length != null) {\n          var _r;\n          (_r = r).push.apply(_r, _toConsumableArray(_toConsumableArray(input).map(_resolveId)));\n        } else {\n          r.push(_resolveId(input));\n        }\n      }\n    }\n  }\n  return r;\n}\nfunction addManagedEndpoint(managedElement, ep) {\n  if (managedElement != null) {\n    managedElement.endpoints.push(ep);\n  }\n}\nfunction removeManagedEndpoint(managedElement, endpoint) {\n  if (managedElement != null) {\n    removeWithFunction(managedElement.endpoints, function (ep) {\n      return ep === endpoint;\n    });\n  }\n}\nfunction addManagedConnection(connection, sourceEl, targetEl) {\n  if (sourceEl != null) {\n    sourceEl.connections.push(connection);\n    if (sourceEl.connections.length === 1) {\n      connection.instance.addClass(connection.source, connection.instance.connectedClass);\n    }\n  }\n  if (targetEl != null) {\n    if (sourceEl == null || connection.sourceId !== connection.targetId) {\n      targetEl.connections.push(connection);\n      if (targetEl.connections.length === 1) {\n        connection.instance.addClass(connection.target, connection.instance.connectedClass);\n      }\n    }\n  }\n}\nfunction removeManagedConnection(connection, sourceEl, targetEl) {\n  if (sourceEl != null) {\n    var sourceCount = sourceEl.connections.length;\n    removeWithFunction(sourceEl.connections, function (_c) {\n      return connection.id === _c.id;\n    });\n    if (sourceCount > 0 && sourceEl.connections.length === 0) {\n      connection.instance.removeClass(connection.source, connection.instance.connectedClass);\n    }\n  }\n  if (targetEl != null) {\n    var targetCount = targetEl.connections.length;\n    if (sourceEl == null || connection.sourceId !== connection.targetId) {\n      removeWithFunction(targetEl.connections, function (_c) {\n        return connection.id === _c.id;\n      });\n    }\n    if (targetCount > 0 && targetEl.connections.length === 0) {\n      connection.instance.removeClass(connection.target, connection.instance.connectedClass);\n    }\n  }\n}\nvar JsPlumbInstance = function (_EventGenerator) {\n  _inherits(JsPlumbInstance, _EventGenerator);\n  var _super = _createSuper(JsPlumbInstance);\n  function JsPlumbInstance(_instanceIndex, defaults) {\n    var _this;\n    _classCallCheck(this, JsPlumbInstance);\n    _this = _super.call(this);\n    _this._instanceIndex = _instanceIndex;\n    _defineProperty(_assertThisInitialized(_this), \"defaults\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialDefaults\", {});\n    _defineProperty(_assertThisInitialized(_this), \"isConnectionBeingDragged\", false);\n    _defineProperty(_assertThisInitialized(_this), \"currentlyDragging\", false);\n    _defineProperty(_assertThisInitialized(_this), \"hoverSuspended\", false);\n    _defineProperty(_assertThisInitialized(_this), \"_suspendDrawing\", false);\n    _defineProperty(_assertThisInitialized(_this), \"_suspendedAt\", null);\n    _defineProperty(_assertThisInitialized(_this), \"connectorClass\", CLASS_CONNECTOR);\n    _defineProperty(_assertThisInitialized(_this), \"connectorOutlineClass\", CLASS_CONNECTOR_OUTLINE);\n    _defineProperty(_assertThisInitialized(_this), \"connectedClass\", CLASS_CONNECTED);\n    _defineProperty(_assertThisInitialized(_this), \"endpointClass\", CLASS_ENDPOINT);\n    _defineProperty(_assertThisInitialized(_this), \"endpointConnectedClass\", CLASS_ENDPOINT_CONNECTED);\n    _defineProperty(_assertThisInitialized(_this), \"endpointFullClass\", CLASS_ENDPOINT_FULL);\n    _defineProperty(_assertThisInitialized(_this), \"endpointFloatingClass\", CLASS_ENDPOINT_FLOATING);\n    _defineProperty(_assertThisInitialized(_this), \"endpointDropAllowedClass\", CLASS_ENDPOINT_DROP_ALLOWED);\n    _defineProperty(_assertThisInitialized(_this), \"endpointDropForbiddenClass\", CLASS_ENDPOINT_DROP_FORBIDDEN);\n    _defineProperty(_assertThisInitialized(_this), \"endpointAnchorClassPrefix\", CLASS_ENDPOINT_ANCHOR_PREFIX);\n    _defineProperty(_assertThisInitialized(_this), \"overlayClass\", CLASS_OVERLAY);\n    _defineProperty(_assertThisInitialized(_this), \"connections\", []);\n    _defineProperty(_assertThisInitialized(_this), \"endpointsByElement\", {});\n    _defineProperty(_assertThisInitialized(_this), \"endpointsByUUID\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"sourceSelectors\", []);\n    _defineProperty(_assertThisInitialized(_this), \"targetSelectors\", []);\n    _defineProperty(_assertThisInitialized(_this), \"allowNestedGroups\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_curIdStamp\", 1);\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", new Viewport(_assertThisInitialized(_this)));\n    _defineProperty(_assertThisInitialized(_this), \"router\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"groupManager\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_connectionTypes\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"_endpointTypes\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"_container\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_managedElements\", {});\n    _defineProperty(_assertThisInitialized(_this), \"DEFAULT_SCOPE\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_zoom\", 1);\n    _this.defaults = {\n      anchor: AnchorLocations.Bottom,\n      anchors: [null, null],\n      connectionsDetachable: true,\n      connectionOverlays: [],\n      connector: StraightConnector.type,\n      container: null,\n      endpoint: DotEndpoint.type,\n      endpointOverlays: [],\n      endpoints: [null, null],\n      endpointStyle: {\n        fill: \"#456\"\n      },\n      endpointStyles: [null, null],\n      endpointHoverStyle: null,\n      endpointHoverStyles: [null, null],\n      hoverPaintStyle: null,\n      listStyle: {},\n      maxConnections: 1,\n      paintStyle: {\n        strokeWidth: 2,\n        stroke: \"#456\"\n      },\n      reattachConnections: false,\n      scope: \"jsplumb_defaultscope\",\n      allowNestedGroups: true\n    };\n    if (defaults) {\n      extend(_this.defaults, defaults);\n    }\n    extend(_this._initialDefaults, _this.defaults);\n    if (_this._initialDefaults[DEFAULT_KEY_PAINT_STYLE] != null) {\n      _this._initialDefaults[DEFAULT_KEY_PAINT_STYLE].strokeWidth = _this._initialDefaults[DEFAULT_KEY_PAINT_STYLE].strokeWidth || 2;\n    }\n    _this.DEFAULT_SCOPE = _this.defaults[DEFAULT_KEY_SCOPE];\n    _this.allowNestedGroups = _this._initialDefaults[DEFAULT_KEY_ALLOW_NESTED_GROUPS] !== false;\n    _this.router = new LightweightRouter(_assertThisInitialized(_this));\n    _this.groupManager = new GroupManager(_assertThisInitialized(_this));\n    _this.setContainer(_this._initialDefaults.container);\n    return _this;\n  }\n  _createClass(JsPlumbInstance, [{\n    key: \"defaultScope\",\n    get: function get() {\n      return this.DEFAULT_SCOPE;\n    }\n  }, {\n    key: \"currentZoom\",\n    get: function get() {\n      return this._zoom;\n    }\n  }, {\n    key: \"areDefaultAnchorsSet\",\n    value: function areDefaultAnchorsSet() {\n      return this.validAnchorsSpec(this.defaults.anchors);\n    }\n  }, {\n    key: \"validAnchorsSpec\",\n    value: function validAnchorsSpec(anchors) {\n      return anchors != null && anchors[0] != null && anchors[1] != null;\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this._container;\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(z, repaintEverything) {\n      this._zoom = z;\n      this.fire(EVENT_ZOOM, this._zoom);\n      if (repaintEverything) {\n        this.repaintEverything();\n      }\n      return true;\n    }\n  }, {\n    key: \"_idstamp\",\n    value: function _idstamp() {\n      return \"\" + this._curIdStamp++;\n    }\n  }, {\n    key: \"checkCondition\",\n    value: function checkCondition(conditionName, args) {\n      var l = this.getListener(conditionName),\n          r = true;\n      if (l && l.length > 0) {\n        var values = Array.prototype.slice.call(arguments, 1);\n        try {\n          for (var i = 0, j = l.length; i < j; i++) {\n            r = r && l[i].apply(l[i], values);\n          }\n        } catch (e) {\n          log(\"cannot check condition [\" + conditionName + \"]\" + e);\n        }\n      }\n      return r;\n    }\n  }, {\n    key: \"getId\",\n    value: function getId(element, uuid) {\n      if (element == null) {\n        return null;\n      }\n      var id = this.getAttribute(element, ATTRIBUTE_MANAGED);\n      if (!id || id === \"undefined\") {\n        if (arguments.length === 2 && arguments[1] !== undefined) {\n          id = uuid;\n        } else if (arguments.length === 1 || arguments.length === 3 && !arguments[2]) {\n          id = \"jsplumb-\" + this._instanceIndex + \"-\" + this._idstamp();\n        }\n        this.setAttribute(element, ATTRIBUTE_MANAGED, id);\n      }\n      return id;\n    }\n  }, {\n    key: \"getConnections\",\n    value: function getConnections(options, flat) {\n      if (!options) {\n        options = {};\n      } else if (options.constructor === String) {\n        options = {\n          \"scope\": options\n        };\n      }\n      var scope = options.scope || this.defaultScope,\n          scopes = prepareList(this, scope, true),\n          sources = prepareList(this, options.source),\n          targets = prepareList(this, options.target),\n          results = !flat && scopes.length > 1 ? {} : [],\n          _addOne = function _addOne(scope, obj) {\n        if (!flat && scopes.length > 1) {\n          var ss = results[scope];\n          if (ss == null) {\n            ss = results[scope] = [];\n          }\n          ss.push(obj);\n        } else {\n          results.push(obj);\n        }\n      };\n      for (var j = 0, jj = this.connections.length; j < jj; j++) {\n        var _c2 = this.connections[j],\n            sourceId = _c2.proxies && _c2.proxies[0] ? _c2.proxies[0].originalEp.elementId : _c2.sourceId,\n            targetId = _c2.proxies && _c2.proxies[1] ? _c2.proxies[1].originalEp.elementId : _c2.targetId;\n        if (filterList(scopes, _c2.scope) && filterList(sources, sourceId) && filterList(targets, targetId)) {\n          _addOne(_c2.scope, _c2);\n        }\n      }\n      return results;\n    }\n  }, {\n    key: \"select\",\n    value: function select(params) {\n      params = params || {};\n      params.scope = params.scope || \"*\";\n      return new ConnectionSelection(this, params.connections || this.getConnections(params, true));\n    }\n  }, {\n    key: \"selectEndpoints\",\n    value: function selectEndpoints(params) {\n      params = params || {};\n      params.scope = params.scope || WILDCARD;\n      var noElementFilters = !params.element && !params.source && !params.target,\n          elements = noElementFilters ? WILDCARD : prepareList(this, params.element),\n          sources = noElementFilters ? WILDCARD : prepareList(this, params.source),\n          targets = noElementFilters ? WILDCARD : prepareList(this, params.target),\n          scopes = prepareList(this, params.scope, true);\n      var ep = [];\n      for (var _el2 in this.endpointsByElement) {\n        var either = filterList(elements, _el2, true),\n            source = filterList(sources, _el2, true),\n            sourceMatchExact = sources !== \"*\",\n            target = filterList(targets, _el2, true),\n            targetMatchExact = targets !== \"*\";\n        if (either || source || target) {\n          inner: for (var i = 0, ii = this.endpointsByElement[_el2].length; i < ii; i++) {\n            var _ep = this.endpointsByElement[_el2][i];\n            if (filterList(scopes, _ep.scope, true)) {\n              var noMatchSource = sourceMatchExact && sources.length > 0 && !_ep.isSource,\n                  noMatchTarget = targetMatchExact && targets.length > 0 && !_ep.isTarget;\n              if (noMatchSource || noMatchTarget) {\n                continue inner;\n              }\n              ep.push(_ep);\n            }\n          }\n        }\n      }\n      return new EndpointSelection(this, ep);\n    }\n  }, {\n    key: \"setContainer\",\n    value: function setContainer(c) {\n      this._container = c;\n      this.fire(EVENT_CONTAINER_CHANGE, this._container);\n    }\n  }, {\n    key: \"_set\",\n    value: function _set(c, el, idx) {\n      var stTypes = [{\n        el: \"source\",\n        elId: \"sourceId\"\n      }, {\n        el: \"target\",\n        elId: \"targetId\"\n      }];\n      var ep,\n          _st = stTypes[idx],\n          cId = c[_st.elId],\n          sid,\n          oldEndpoint = c.endpoints[idx];\n      var evtParams = {\n        index: idx,\n        originalEndpoint: oldEndpoint,\n        originalSourceId: idx === 0 ? cId : c.sourceId,\n        newSourceId: c.sourceId,\n        originalTargetId: idx === 1 ? cId : c.targetId,\n        newTargetId: c.targetId,\n        connection: c,\n        newEndpoint: oldEndpoint\n      };\n      if (el instanceof Endpoint) {\n        ep = el;\n        ep.addConnection(c);\n      } else {\n        sid = this.getId(el);\n        if (sid === c[_st.elId]) {\n          ep = null;\n        } else {\n          ep = c.makeEndpoint(idx === 0, el, sid);\n        }\n      }\n      if (ep != null) {\n        evtParams.newEndpoint = ep;\n        oldEndpoint.detachFromConnection(c);\n        c.endpoints[idx] = ep;\n        c[_st.el] = ep.element;\n        c[_st.elId] = ep.elementId;\n        evtParams[idx === 0 ? \"newSourceId\" : \"newTargetId\"] = ep.elementId;\n        this.fireMoveEvent(evtParams);\n        this._paintConnection(c);\n      }\n      return evtParams;\n    }\n  }, {\n    key: \"setSource\",\n    value: function setSource(connection, el) {\n      removeManagedConnection(connection, this._managedElements[connection.sourceId]);\n      var p = this._set(connection, el, 0);\n      addManagedConnection(connection, this._managedElements[p.newSourceId]);\n    }\n  }, {\n    key: \"setTarget\",\n    value: function setTarget(connection, el) {\n      removeManagedConnection(connection, this._managedElements[connection.targetId]);\n      var p = this._set(connection, el, 1);\n      addManagedConnection(connection, this._managedElements[p.newTargetId]);\n    }\n  }, {\n    key: \"setConnectionType\",\n    value: function setConnectionType(connection, type, params) {\n      connection.setType(type, params);\n      this._paintConnection(connection);\n    }\n  }, {\n    key: \"isHoverSuspended\",\n    value: function isHoverSuspended() {\n      return this.hoverSuspended;\n    }\n  }, {\n    key: \"setSuspendDrawing\",\n    value: function setSuspendDrawing(val, repaintAfterwards) {\n      var curVal = this._suspendDrawing;\n      this._suspendDrawing = val;\n      if (val) {\n        this._suspendedAt = \"\" + new Date().getTime();\n      } else {\n        this._suspendedAt = null;\n        this.viewport.recomputeBounds();\n      }\n      if (repaintAfterwards) {\n        this.repaintEverything();\n      }\n      return curVal;\n    }\n  }, {\n    key: \"getSuspendedAt\",\n    value: function getSuspendedAt() {\n      return this._suspendedAt;\n    }\n  }, {\n    key: \"batch\",\n    value: function batch(fn, doNotRepaintAfterwards) {\n      var _wasSuspended = this._suspendDrawing === true;\n      if (!_wasSuspended) {\n        this.setSuspendDrawing(true);\n      }\n      fn();\n      if (!_wasSuspended) {\n        this.setSuspendDrawing(false, !doNotRepaintAfterwards);\n      }\n    }\n  }, {\n    key: \"each\",\n    value: function each(spec, fn) {\n      if (spec == null) {\n        return;\n      }\n      if (spec.length != null) {\n        for (var i = 0; i < spec.length; i++) {\n          fn(spec[i]);\n        }\n      } else {\n        fn(spec);\n      }\n      return this;\n    }\n  }, {\n    key: \"updateOffset\",\n    value: function updateOffset(params) {\n      var elId = params.elId;\n      if (params.recalc) {\n        return this.viewport.refreshElement(elId);\n      } else {\n        return this.viewport.getPosition(elId);\n      }\n    }\n  }, {\n    key: \"deleteConnection\",\n    value: function deleteConnection(connection, params) {\n      if (connection != null && connection.deleted !== true) {\n        params = params || {};\n        if (params.force || functionChain(true, false, [[connection.endpoints[0], IS_DETACH_ALLOWED, [connection]], [connection.endpoints[1], IS_DETACH_ALLOWED, [connection]], [connection, IS_DETACH_ALLOWED, [connection]], [this, CHECK_CONDITION, [INTERCEPT_BEFORE_DETACH, connection]]])) {\n          removeManagedConnection(connection, this._managedElements[connection.sourceId], this._managedElements[connection.targetId]);\n          this.fireDetachEvent(connection, !connection.pending && params.fireEvent !== false, params.originalEvent);\n          var _sourceEndpoint = connection.endpoints[0];\n          var targetEndpoint = connection.endpoints[1];\n          if (_sourceEndpoint !== params.endpointToIgnore) {\n            _sourceEndpoint.detachFromConnection(connection, null, true);\n          }\n          if (targetEndpoint !== params.endpointToIgnore) {\n            targetEndpoint.detachFromConnection(connection, null, true);\n          }\n          removeWithFunction(this.connections, function (_c) {\n            return connection.id === _c.id;\n          });\n          connection.destroy();\n          if (_sourceEndpoint !== params.endpointToIgnore && _sourceEndpoint.deleteOnEmpty && _sourceEndpoint.connections.length === 0) {\n            this.deleteEndpoint(_sourceEndpoint);\n          }\n          if (targetEndpoint !== params.endpointToIgnore && targetEndpoint.deleteOnEmpty && targetEndpoint.connections.length === 0) {\n            this.deleteEndpoint(targetEndpoint);\n          }\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: \"deleteEveryConnection\",\n    value: function deleteEveryConnection(params) {\n      var _this2 = this;\n      params = params || {};\n      var count = this.connections.length,\n          deletedCount = 0;\n      this.batch(function () {\n        for (var i = 0; i < count; i++) {\n          deletedCount += _this2.deleteConnection(_this2.connections[0], params) ? 1 : 0;\n        }\n      });\n      return deletedCount;\n    }\n  }, {\n    key: \"deleteConnectionsForElement\",\n    value: function deleteConnectionsForElement(el, params) {\n      var id = this.getId(el),\n          m = this._managedElements[id];\n      if (m) {\n        var l = m.connections.length;\n        for (var i = 0; i < l; i++) {\n          this.deleteConnection(m.connections[0], params);\n        }\n      }\n      return this;\n    }\n  }, {\n    key: \"fireDetachEvent\",\n    value: function fireDetachEvent(jpc, doFireEvent, originalEvent) {\n      var argIsConnection = jpc.id != null,\n          params = argIsConnection ? {\n        connection: jpc,\n        source: jpc.source,\n        target: jpc.target,\n        sourceId: jpc.sourceId,\n        targetId: jpc.targetId,\n        sourceEndpoint: jpc.endpoints[0],\n        targetEndpoint: jpc.endpoints[1]\n      } : jpc;\n      if (doFireEvent) {\n        this.fire(EVENT_CONNECTION_DETACHED, params, originalEvent);\n      }\n      this.fire(EVENT_INTERNAL_CONNECTION_DETACHED, params, originalEvent);\n    }\n  }, {\n    key: \"fireMoveEvent\",\n    value: function fireMoveEvent(params, evt) {\n      this.fire(EVENT_CONNECTION_MOVED, params, evt);\n    }\n  }, {\n    key: \"manageAll\",\n    value: function manageAll(elements, recalc) {\n      var nl = isString(elements) ? this.getSelector(this.getContainer(), elements) : elements;\n      for (var i = 0; i < nl.length; i++) {\n        this.manage(nl[i], null, recalc);\n      }\n    }\n  }, {\n    key: \"manage\",\n    value: function manage(element, internalId, _recalc) {\n      if (this.getAttribute(element, ATTRIBUTE_MANAGED) == null) {\n        internalId = internalId || this.getAttribute(element, \"id\") || uuid();\n        this.setAttribute(element, ATTRIBUTE_MANAGED, internalId);\n      }\n      var elId = this.getId(element);\n      if (!this._managedElements[elId]) {\n        var obj = {\n          el: element,\n          endpoints: [],\n          connections: [],\n          rotation: 0,\n          data: {}\n        };\n        this._managedElements[elId] = obj;\n        if (this._suspendDrawing) {\n          obj.viewportElement = this.viewport.registerElement(elId, true);\n        } else {\n          obj.viewportElement = this.updateOffset({\n            elId: elId,\n            recalc: true\n          });\n        }\n        this.fire(EVENT_MANAGE_ELEMENT, {\n          el: element\n        });\n      } else {\n        if (_recalc) {\n          this._managedElements[elId].viewportElement = this.updateOffset({\n            elId: elId,\n            timestamp: null,\n            recalc: true\n          });\n        }\n      }\n      return this._managedElements[elId];\n    }\n  }, {\n    key: \"getManagedData\",\n    value: function getManagedData(elementId, dataIdentifier, key) {\n      if (this._managedElements[elementId]) {\n        var data = this._managedElements[elementId].data[dataIdentifier];\n        return data != null ? data[key] : null;\n      }\n    }\n  }, {\n    key: \"setManagedData\",\n    value: function setManagedData(elementId, dataIdentifier, key, data) {\n      if (this._managedElements[elementId]) {\n        this._managedElements[elementId].data[dataIdentifier] = this._managedElements[elementId].data[dataIdentifier] || {};\n        this._managedElements[elementId].data[dataIdentifier][key] = data;\n      }\n    }\n  }, {\n    key: \"getManagedElement\",\n    value: function getManagedElement(id) {\n      return this._managedElements[id] ? this._managedElements[id].el : null;\n    }\n  }, {\n    key: \"unmanage\",\n    value: function unmanage(el, removeElement) {\n      var _this3 = this;\n      this.removeAllEndpoints(el, true);\n      var _one = function _one(_el) {\n        var id = _this3.getId(_el);\n        _this3.removeAttribute(_el, ATTRIBUTE_MANAGED);\n        delete _this3._managedElements[id];\n        _this3.viewport.remove(id);\n        _this3.fire(EVENT_UNMANAGE_ELEMENT, {\n          el: _el,\n          id: id\n        });\n        if (_el && removeElement) {\n          _this3._removeElement(_el);\n        }\n      };\n      this._getAssociatedElements(el).map(_one);\n      _one(el);\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(element, rotation, _doNotRepaint) {\n      var elementId = this.getId(element);\n      if (this._managedElements[elementId]) {\n        this._managedElements[elementId].rotation = rotation;\n        this.viewport.rotateElement(elementId, rotation);\n        if (_doNotRepaint !== true) {\n          return this.revalidate(element);\n        }\n      }\n      return {\n        c: new Set(),\n        e: new Set()\n      };\n    }\n  }, {\n    key: \"_getRotation\",\n    value: function _getRotation(elementId) {\n      var entry = this._managedElements[elementId];\n      if (entry != null) {\n        return entry.rotation || 0;\n      } else {\n        return 0;\n      }\n    }\n  }, {\n    key: \"_getRotations\",\n    value: function _getRotations(elementId) {\n      var _this4 = this;\n      var rotations = [];\n      var entry = this._managedElements[elementId];\n      var _oneLevel = function _oneLevel(e) {\n        if (e.group != null) {\n          var gEntry = _this4._managedElements[e.group];\n          if (gEntry != null) {\n            rotations.push({\n              r: gEntry.viewportElement.r,\n              c: gEntry.viewportElement.c\n            });\n            _oneLevel(gEntry);\n          }\n        }\n      };\n      if (entry != null) {\n        rotations.push({\n          r: entry.viewportElement.r || 0,\n          c: entry.viewportElement.c\n        });\n        _oneLevel(entry);\n      }\n      return rotations;\n    }\n  }, {\n    key: \"_applyRotations\",\n    value: function _applyRotations(point, rotations) {\n      var sl = point.slice();\n      var current = {\n        x: sl[0],\n        y: sl[1],\n        cr: 0,\n        sr: 0\n      };\n      forEach(rotations, function (rotation) {\n        current = rotatePoint(current, rotation.c, rotation.r);\n      });\n      return current;\n    }\n  }, {\n    key: \"_applyRotationsXY\",\n    value: function _applyRotationsXY(point, rotations) {\n      forEach(rotations, function (rotation) {\n        point = rotatePoint(point, rotation.c, rotation.r);\n      });\n      return point;\n    }\n  }, {\n    key: \"_internal_newEndpoint\",\n    value: function _internal_newEndpoint(params) {\n      var _p = extend({}, params);\n      var managedElement = this.manage(_p.element);\n      _p.elementId = this.getId(_p.element);\n      _p.id = \"ep_\" + this._idstamp();\n      var ep = new Endpoint(this, _p);\n      addManagedEndpoint(managedElement, ep);\n      if (params.uuid) {\n        this.endpointsByUUID.set(params.uuid, ep);\n      }\n      addToDictionary(this.endpointsByElement, ep.elementId, ep);\n      if (!this._suspendDrawing) {\n        this._paintEndpoint(ep, {\n          timestamp: this._suspendedAt\n        });\n      }\n      return ep;\n    }\n  }, {\n    key: \"_deriveEndpointAndAnchorSpec\",\n    value: function _deriveEndpointAndAnchorSpec(type, dontPrependDefault) {\n      var bits = ((dontPrependDefault ? \"\" : \"default \") + type).split(/[\\s]/),\n          eps = null,\n          ep = null,\n          a = null,\n          as = null;\n      for (var i = 0; i < bits.length; i++) {\n        var _t = this.getConnectionType(bits[i]);\n        if (_t) {\n          if (_t.endpoints) {\n            eps = _t.endpoints;\n          }\n          if (_t.endpoint) {\n            ep = _t.endpoint;\n          }\n          if (_t.anchors) {\n            as = _t.anchors;\n          }\n          if (_t.anchor) {\n            a = _t.anchor;\n          }\n        }\n      }\n      return {\n        endpoints: eps ? eps : [ep, ep],\n        anchors: as ? as : [a, a]\n      };\n    }\n  }, {\n    key: \"revalidate\",\n    value: function revalidate(el, timestamp) {\n      var elId = this.getId(el);\n      this.updateOffset({\n        elId: elId,\n        recalc: true,\n        timestamp: timestamp\n      });\n      return this.repaint(el);\n    }\n  }, {\n    key: \"repaintEverything\",\n    value: function repaintEverything() {\n      var timestamp = uuid(),\n          elId;\n      for (elId in this._managedElements) {\n        this.viewport.refreshElement(elId, true);\n      }\n      this.viewport.recomputeBounds();\n      for (elId in this._managedElements) {\n        this.repaint(this._managedElements[elId].el, timestamp, true);\n      }\n      return this;\n    }\n  }, {\n    key: \"setElementPosition\",\n    value: function setElementPosition(el, x, y) {\n      var id = this.getId(el);\n      this.viewport.setPosition(id, x, y);\n      return this.repaint(el);\n    }\n  }, {\n    key: \"repaint\",\n    value: function repaint(el, timestamp, offsetsWereJustCalculated) {\n      var r = {\n        c: new Set(),\n        e: new Set()\n      };\n      var _mergeRedraw = function _mergeRedraw(r2) {\n        r2.c.forEach(function (c) {\n          return r.c.add(c);\n        });\n        r2.e.forEach(function (e) {\n          return r.e.add(e);\n        });\n      };\n      if (!this._suspendDrawing) {\n        var id = this.getId(el);\n        if (el != null) {\n          var repaintEls = this._getAssociatedElements(el);\n          if (timestamp == null) {\n            timestamp = uuid();\n          }\n          if (!offsetsWereJustCalculated) {\n            for (var i = 0; i < repaintEls.length; i++) {\n              this.updateOffset({\n                elId: this.getId(repaintEls[i]),\n                recalc: true,\n                timestamp: timestamp\n              });\n            }\n          }\n          _mergeRedraw(this.router.redraw(id, timestamp, null));\n          if (repaintEls.length > 0) {\n            for (var j = 0; j < repaintEls.length; j++) {\n              _mergeRedraw(this.router.redraw(this.getId(repaintEls[j]), timestamp, null));\n            }\n          }\n        }\n      }\n      return r;\n    }\n  }, {\n    key: \"unregisterEndpoint\",\n    value: function unregisterEndpoint(endpoint) {\n      var uuid = endpoint.getUuid();\n      if (uuid) {\n        this.endpointsByUUID[\"delete\"](uuid);\n      }\n      removeManagedEndpoint(this._managedElements[endpoint.elementId], endpoint);\n      var ebe = this.endpointsByElement[endpoint.elementId];\n      if (ebe != null) {\n        if (ebe.length > 1) {\n          this.endpointsByElement[endpoint.elementId] = ebe.filter(function (e) {\n            return e !== endpoint;\n          });\n        } else {\n          delete this.endpointsByElement[endpoint.elementId];\n        }\n      }\n      this.fire(EVENT_INTERNAL_ENDPOINT_UNREGISTERED, endpoint);\n    }\n  }, {\n    key: \"_maybePruneEndpoint\",\n    value: function _maybePruneEndpoint(endpoint) {\n      if (endpoint.deleteOnEmpty && endpoint.connections.length === 0) {\n        this.deleteEndpoint(endpoint);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"deleteEndpoint\",\n    value: function deleteEndpoint(object) {\n      var _this5 = this;\n      var endpoint = typeof object === \"string\" ? this.endpointsByUUID.get(object) : object;\n      if (endpoint) {\n        var proxy = endpoint.proxiedBy;\n        var connectionsToDelete = endpoint.connections.slice();\n        forEach(connectionsToDelete, function (connection) {\n          endpoint.detachFromConnection(connection, null, true);\n        });\n        this.unregisterEndpoint(endpoint);\n        endpoint.destroy();\n        forEach(connectionsToDelete, function (connection) {\n          _this5.deleteConnection(connection, {\n            force: true,\n            endpointToIgnore: endpoint\n          });\n        });\n        if (proxy != null) {\n          this.deleteEndpoint(proxy);\n        }\n      }\n      return this;\n    }\n  }, {\n    key: \"addEndpoint\",\n    value: function addEndpoint(el, params, referenceParams) {\n      referenceParams = referenceParams || {};\n      var p = extend({}, referenceParams);\n      extend(p, params || {});\n      var _p = extend({\n        element: el\n      }, p);\n      return this._internal_newEndpoint(_p);\n    }\n  }, {\n    key: \"addEndpoints\",\n    value: function addEndpoints(el, endpoints, referenceParams) {\n      var results = [];\n      for (var i = 0, j = endpoints.length; i < j; i++) {\n        results.push(this.addEndpoint(el, endpoints[i], referenceParams));\n      }\n      return results;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var _this6 = this;\n      this.silently(function () {\n        _this6.endpointsByElement = {};\n        _this6._managedElements = {};\n        _this6.endpointsByUUID.clear();\n        _this6.viewport.reset();\n        _this6.router.reset();\n        _this6.groupManager.reset();\n        _this6.connections.length = 0;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.reset();\n      this.unbind();\n      this.sourceSelectors.length = 0;\n      this.targetSelectors.length = 0;\n      this._connectionTypes.clear();\n      this._endpointTypes.clear();\n    }\n  }, {\n    key: \"getEndpoints\",\n    value: function getEndpoints(el) {\n      return this.endpointsByElement[this.getId(el)] || [];\n    }\n  }, {\n    key: \"getEndpoint\",\n    value: function getEndpoint(uuid) {\n      return this.endpointsByUUID.get(uuid);\n    }\n  }, {\n    key: \"setEndpointUuid\",\n    value: function setEndpointUuid(endpoint, uuid) {\n      if (endpoint.uuid) {\n        this.endpointsByUUID[\"delete\"](endpoint.uuid);\n      }\n      endpoint.uuid = uuid;\n      this.endpointsByUUID.set(uuid, endpoint);\n    }\n  }, {\n    key: \"connect\",\n    value: function connect(params, referenceParams) {\n      try {\n        var _p = this._prepareConnectionParams(params, referenceParams),\n            jpc = this._newConnection(_p);\n        this._finaliseConnection(jpc, _p);\n        return jpc;\n      } catch (errorMessage) {\n        log(errorMessage);\n        return;\n      }\n    }\n  }, {\n    key: \"_prepareConnectionParams\",\n    value: function _prepareConnectionParams(params, referenceParams) {\n      var temp = extend({}, params);\n      if (referenceParams) {\n        extend(temp, referenceParams);\n      }\n      var _p = temp;\n      if (_p.source) {\n        if (_p.source.endpoint) {\n          _p.sourceEndpoint = _p.source;\n        }\n      }\n      if (_p.target) {\n        if (_p.target.endpoint) {\n          _p.targetEndpoint = _p.target;\n        }\n      }\n      if (params.uuids) {\n        _p.sourceEndpoint = this.getEndpoint(params.uuids[0]);\n        _p.targetEndpoint = this.getEndpoint(params.uuids[1]);\n      }\n      if (_p.sourceEndpoint != null) {\n        if (_p.sourceEndpoint.isFull()) {\n          throw ERROR_SOURCE_ENDPOINT_FULL;\n        }\n        if (!_p.type) {\n          _p.type = _p.sourceEndpoint.edgeType;\n        }\n        if (_p.sourceEndpoint.connectorOverlays) {\n          _p.overlays = _p.overlays || [];\n          for (var i = 0, j = _p.sourceEndpoint.connectorOverlays.length; i < j; i++) {\n            _p.overlays.push(_p.sourceEndpoint.connectorOverlays[i]);\n          }\n        }\n        if (_p.sourceEndpoint.scope) {\n          _p.scope = _p.sourceEndpoint.scope;\n        }\n      } else {\n        if (_p.source == null) {\n          throw ERROR_SOURCE_DOES_NOT_EXIST;\n        }\n      }\n      if (_p.targetEndpoint != null) {\n        if (_p.targetEndpoint.isFull()) {\n          throw ERROR_TARGET_ENDPOINT_FULL;\n        }\n      } else {\n        if (_p.target == null) {\n          throw ERROR_TARGET_DOES_NOT_EXIST;\n        }\n      }\n      if (_p.sourceEndpoint && _p.targetEndpoint) {\n        if (!_scopeMatch(_p.sourceEndpoint, _p.targetEndpoint)) {\n          throw \"Cannot establish connection: scopes do not match\";\n        }\n      }\n      return _p;\n    }\n  }, {\n    key: \"_newConnection\",\n    value: function _newConnection(params) {\n      params.id = \"con_\" + this._idstamp();\n      var c = new Connection(this, params);\n      addManagedConnection(c, this._managedElements[c.sourceId], this._managedElements[c.targetId]);\n      this._paintConnection(c);\n      return c;\n    }\n  }, {\n    key: \"_finaliseConnection\",\n    value: function _finaliseConnection(jpc, params, originalEvent) {\n      params = params || {};\n      if (!jpc.suspendedEndpoint) {\n        this.connections.push(jpc);\n      }\n      jpc.pending = null;\n      jpc.endpoints[0].isTemporarySource = false;\n      this.repaint(jpc.source);\n      var payload = {\n        connection: jpc,\n        source: jpc.source,\n        target: jpc.target,\n        sourceId: jpc.sourceId,\n        targetId: jpc.targetId,\n        sourceEndpoint: jpc.endpoints[0],\n        targetEndpoint: jpc.endpoints[1]\n      };\n      this.fire(EVENT_INTERNAL_CONNECTION, payload, originalEvent);\n      if (!params.doNotFireConnectionEvent && params.fireEvent !== false) {\n        this.fire(EVENT_CONNECTION, payload, originalEvent);\n      }\n    }\n  }, {\n    key: \"removeAllEndpoints\",\n    value: function removeAllEndpoints(el, recurse) {\n      var _this7 = this;\n      var _one = function _one(_el) {\n        var id = _this7.getId(_el),\n            ebe = _this7.endpointsByElement[id],\n            i,\n            ii;\n        if (ebe) {\n          for (i = 0, ii = ebe.length; i < ii; i++) {\n            _this7.deleteEndpoint(ebe[i]);\n          }\n        }\n        delete _this7.endpointsByElement[id];\n      };\n      if (recurse) {\n        this._getAssociatedElements(el).map(_one);\n      }\n      _one(el);\n      return this;\n    }\n  }, {\n    key: \"_createSourceDefinition\",\n    value: function _createSourceDefinition(params, referenceParams) {\n      var p = extend({}, referenceParams);\n      extend(p, params);\n      p.edgeType = p.edgeType || DEFAULT;\n      var aae = this._deriveEndpointAndAnchorSpec(p.edgeType);\n      p.endpoint = p.endpoint || aae.endpoints[0];\n      p.anchor = p.anchor || aae.anchors[0];\n      var maxConnections = p.maxConnections || -1;\n      var _def = {\n        def: extend({}, p),\n        uniqueEndpoint: p.uniqueEndpoint,\n        maxConnections: maxConnections,\n        enabled: true,\n        endpoint: null\n      };\n      return _def;\n    }\n  }, {\n    key: \"addSourceSelector\",\n    value: function addSourceSelector(selector, params) {\n      var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _def = this._createSourceDefinition(params);\n      var sel = new ConnectionDragSelector(selector, _def, exclude);\n      this.sourceSelectors.push(sel);\n      return sel;\n    }\n  }, {\n    key: \"removeSourceSelector\",\n    value: function removeSourceSelector(selector) {\n      removeWithFunction(this.sourceSelectors, function (s) {\n        return s === selector;\n      });\n    }\n  }, {\n    key: \"removeTargetSelector\",\n    value: function removeTargetSelector(selector) {\n      removeWithFunction(this.targetSelectors, function (s) {\n        return s === selector;\n      });\n    }\n  }, {\n    key: \"addTargetSelector\",\n    value: function addTargetSelector(selector, params) {\n      var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _def = this._createTargetDefinition(params);\n      var sel = new ConnectionDragSelector(selector, _def, exclude);\n      this.targetSelectors.push(sel);\n      return sel;\n    }\n  }, {\n    key: \"_createTargetDefinition\",\n    value: function _createTargetDefinition(params, referenceParams) {\n      var p = extend({}, referenceParams);\n      extend(p, params);\n      p.edgeType = p.edgeType || DEFAULT;\n      var maxConnections = p.maxConnections || -1;\n      var _def = {\n        def: extend({}, p),\n        uniqueEndpoint: p.uniqueEndpoint,\n        maxConnections: maxConnections,\n        enabled: true,\n        endpoint: null\n      };\n      return _def;\n    }\n  }, {\n    key: \"show\",\n    value: function show(el, changeEndpoints) {\n      return this._setVisible(el, BLOCK, changeEndpoints);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide(el, changeEndpoints) {\n      return this._setVisible(el, NONE, changeEndpoints);\n    }\n  }, {\n    key: \"_setVisible\",\n    value: function _setVisible(el, state, alsoChangeEndpoints) {\n      var visible = state === BLOCK;\n      var endpointFunc = null;\n      if (alsoChangeEndpoints) {\n        endpointFunc = function endpointFunc(ep) {\n          ep.setVisible(visible, true, true);\n        };\n      }\n      var id = this.getId(el);\n      this._operation(el, function (jpc) {\n        if (visible && alsoChangeEndpoints) {\n          var oidx = jpc.sourceId === id ? 1 : 0;\n          if (jpc.endpoints[oidx].isVisible()) {\n            jpc.setVisible(true);\n          }\n        } else {\n          jpc.setVisible(visible);\n        }\n      }, endpointFunc);\n      return this;\n    }\n  }, {\n    key: \"toggleVisible\",\n    value: function toggleVisible(el, changeEndpoints) {\n      var endpointFunc = null;\n      if (changeEndpoints) {\n        endpointFunc = function endpointFunc(ep) {\n          var state = ep.isVisible();\n          ep.setVisible(!state);\n        };\n      }\n      this._operation(el, function (jpc) {\n        var state = jpc.isVisible();\n        jpc.setVisible(!state);\n      }, endpointFunc);\n    }\n  }, {\n    key: \"_operation\",\n    value: function _operation(el, func, endpointFunc) {\n      var elId = this.getId(el);\n      var endpoints = this.endpointsByElement[elId];\n      if (endpoints && endpoints.length) {\n        for (var i = 0, ii = endpoints.length; i < ii; i++) {\n          for (var j = 0, jj = endpoints[i].connections.length; j < jj; j++) {\n            var retVal = func(endpoints[i].connections[j]);\n            if (retVal) {\n              return;\n            }\n          }\n          if (endpointFunc) {\n            endpointFunc(endpoints[i]);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"registerConnectionType\",\n    value: function registerConnectionType(id, type) {\n      this._connectionTypes.set(id, extend({}, type));\n      if (type.overlays) {\n        var to = {};\n        for (var i = 0; i < type.overlays.length; i++) {\n          var fo = convertToFullOverlaySpec(type.overlays[i]);\n          to[fo.options.id] = fo;\n        }\n        this._connectionTypes.get(id).overlays = to;\n      }\n    }\n  }, {\n    key: \"registerConnectionTypes\",\n    value: function registerConnectionTypes(types) {\n      for (var i in types) {\n        this.registerConnectionType(i, types[i]);\n      }\n    }\n  }, {\n    key: \"registerEndpointType\",\n    value: function registerEndpointType(id, type) {\n      this._endpointTypes.set(id, extend({}, type));\n      if (type.overlays) {\n        var to = {};\n        for (var i = 0; i < type.overlays.length; i++) {\n          var fo = convertToFullOverlaySpec(type.overlays[i]);\n          to[fo.options.id] = fo;\n        }\n        this._endpointTypes.get(id).overlays = to;\n      }\n    }\n  }, {\n    key: \"registerEndpointTypes\",\n    value: function registerEndpointTypes(types) {\n      for (var i in types) {\n        this.registerEndpointType(i, types[i]);\n      }\n    }\n  }, {\n    key: \"getType\",\n    value: function getType(id, typeDescriptor) {\n      return typeDescriptor === \"connection\" ? this.getConnectionType(id) : this.getEndpointType(id);\n    }\n  }, {\n    key: \"getConnectionType\",\n    value: function getConnectionType(id) {\n      return this._connectionTypes.get(id);\n    }\n  }, {\n    key: \"getEndpointType\",\n    value: function getEndpointType(id) {\n      return this._endpointTypes.get(id);\n    }\n  }, {\n    key: \"importDefaults\",\n    value: function importDefaults(d) {\n      for (var i in d) {\n        this.defaults[i] = d[i];\n      }\n      if (this.defaults[DEFAULT_KEY_PAINT_STYLE] != null) {\n        this.defaults[DEFAULT_KEY_PAINT_STYLE].strokeWidth = this.defaults[DEFAULT_KEY_PAINT_STYLE].strokeWidth || 2;\n      }\n      if (d.container) {\n        this.setContainer(d.container);\n      }\n      return this;\n    }\n  }, {\n    key: \"restoreDefaults\",\n    value: function restoreDefaults() {\n      this.defaults = extend({}, this._initialDefaults);\n      return this;\n    }\n  }, {\n    key: \"getManagedElements\",\n    value: function getManagedElements() {\n      return this._managedElements;\n    }\n  }, {\n    key: \"proxyConnection\",\n    value: function proxyConnection(connection, index, proxyEl, endpointGenerator, anchorGenerator) {\n      var alreadyProxied = connection.proxies[index] != null,\n          proxyEp,\n          originalElementId = alreadyProxied ? connection.proxies[index].originalEp.elementId : connection.endpoints[index].elementId,\n          originalEndpoint = alreadyProxied ? connection.proxies[index].originalEp : connection.endpoints[index],\n          proxyElId = this.getId(proxyEl);\n      if (connection.proxies[index]) {\n        if (connection.proxies[index].ep.elementId === proxyElId) {\n          proxyEp = connection.proxies[index].ep;\n        } else {\n          connection.proxies[index].ep.detachFromConnection(connection, index);\n          proxyEp = this._internal_newEndpoint({\n            element: proxyEl,\n            endpoint: endpointGenerator(connection, index),\n            anchor: anchorGenerator(connection, index),\n            parameters: {\n              isProxyEndpoint: true\n            }\n          });\n        }\n      } else {\n        proxyEp = this._internal_newEndpoint({\n          element: proxyEl,\n          endpoint: endpointGenerator(connection, index),\n          anchor: anchorGenerator(connection, index),\n          parameters: {\n            isProxyEndpoint: true\n          }\n        });\n      }\n      proxyEp.deleteOnEmpty = true;\n      connection.proxies[index] = {\n        ep: proxyEp,\n        originalEp: originalEndpoint\n      };\n      this.sourceOrTargetChanged(originalElementId, proxyElId, connection, proxyEl, index);\n      originalEndpoint.detachFromConnection(connection, null, true);\n      proxyEp.connections = [connection];\n      connection.endpoints[index] = proxyEp;\n      originalEndpoint.proxiedBy = proxyEp;\n      originalEndpoint.setVisible(false);\n      connection.setVisible(true);\n      this.revalidate(proxyEl);\n    }\n  }, {\n    key: \"unproxyConnection\",\n    value: function unproxyConnection(connection, index) {\n      if (connection.proxies == null || connection.proxies[index] == null) {\n        return;\n      }\n      var originalElement = connection.proxies[index].originalEp.element,\n          originalElementId = connection.proxies[index].originalEp.elementId,\n          proxyElId = connection.proxies[index].ep.elementId;\n      connection.endpoints[index] = connection.proxies[index].originalEp;\n      delete connection.proxies[index].originalEp.proxiedBy;\n      this.sourceOrTargetChanged(proxyElId, originalElementId, connection, originalElement, index);\n      connection.proxies[index].ep.detachFromConnection(connection, null);\n      connection.proxies[index].originalEp.addConnection(connection);\n      if (connection.isVisible()) {\n        connection.proxies[index].originalEp.setVisible(true);\n      }\n      connection.proxies[index] = null;\n      if (findWithFunction(connection.proxies, function (p) {\n        return p != null;\n      }) === -1) {\n        connection.proxies.length = 0;\n      }\n    }\n  }, {\n    key: \"sourceOrTargetChanged\",\n    value: function sourceOrTargetChanged(originalId, newId, connection, newElement, index) {\n      if (originalId !== newId) {\n        if (index === 0) {\n          connection.sourceId = newId;\n          connection.source = newElement;\n        } else if (index === 1) {\n          connection.targetId = newId;\n          connection.target = newElement;\n        }\n        removeManagedConnection(connection, this._managedElements[originalId]);\n        addManagedConnection(connection, this._managedElements[newId]);\n      }\n    }\n  }, {\n    key: \"getGroup\",\n    value:\n    function getGroup(groupId) {\n      return this.groupManager.getGroup(groupId);\n    }\n  }, {\n    key: \"getGroupFor\",\n    value: function getGroupFor(el) {\n      return this.groupManager.getGroupFor(el);\n    }\n  }, {\n    key: \"addGroup\",\n    value: function addGroup(params) {\n      return this.groupManager.addGroup(params);\n    }\n  }, {\n    key: \"addToGroup\",\n    value: function addToGroup(group) {\n      var _this$groupManager;\n      for (var _len = arguments.length, el = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        el[_key - 1] = arguments[_key];\n      }\n      return (_this$groupManager = this.groupManager).addToGroup.apply(_this$groupManager, [group, false].concat(el));\n    }\n  }, {\n    key: \"collapseGroup\",\n    value: function collapseGroup(group) {\n      this.groupManager.collapseGroup(group);\n    }\n  }, {\n    key: \"expandGroup\",\n    value: function expandGroup(group) {\n      this.groupManager.expandGroup(group);\n    }\n  }, {\n    key: \"toggleGroup\",\n    value: function toggleGroup(group) {\n      this.groupManager.toggleGroup(group);\n    }\n  }, {\n    key: \"removeGroup\",\n    value: function removeGroup(group, deleteMembers, _manipulateView, _doNotFireEvent) {\n      return this.groupManager.removeGroup(group, deleteMembers, _manipulateView, _doNotFireEvent);\n    }\n  }, {\n    key: \"removeAllGroups\",\n    value: function removeAllGroups(deleteMembers, _manipulateView) {\n      this.groupManager.removeAllGroups(deleteMembers, _manipulateView, false);\n    }\n  }, {\n    key: \"removeFromGroup\",\n    value: function removeFromGroup(group, el, _doNotFireEvent) {\n      this.groupManager.removeFromGroup(group, _doNotFireEvent, el);\n      this._appendElement(el, this.getContainer());\n      this.updateOffset({\n        recalc: true,\n        elId: this.getId(el)\n      });\n    }\n  }, {\n    key: \"_paintEndpoint\",\n    value: function _paintEndpoint(endpoint, params) {\n      function findConnectionToUseForDynamicAnchor(ep) {\n        var idx = 0;\n        if (params.elementWithPrecedence != null) {\n          for (var i = 0; i < ep.connections.length; i++) {\n            if (ep.connections[i].sourceId === params.elementWithPrecedence || ep.connections[i].targetId === params.elementWithPrecedence) {\n              idx = i;\n              break;\n            }\n          }\n        }\n        return ep.connections[idx];\n      }\n      params = params || {};\n      var timestamp = params.timestamp,\n          recalc = !(params.recalc === false);\n      if (!timestamp || endpoint.timestamp !== timestamp) {\n        var info = this.viewport.getPosition(endpoint.elementId);\n        var xy = params.offset ? {\n          x: params.offset.x,\n          y: params.offset.y\n        } : {\n          x: info.x,\n          y: info.y\n        };\n        if (xy != null) {\n          var ap = params.anchorLoc;\n          if (ap == null) {\n            var anchorParams = {\n              xy: xy,\n              wh: info,\n              element: endpoint,\n              timestamp: timestamp\n            };\n            if (recalc && this.router.isDynamicAnchor(endpoint) && endpoint.connections.length > 0) {\n              var _c3 = findConnectionToUseForDynamicAnchor(endpoint),\n                  oIdx = _c3.endpoints[0] === endpoint ? 1 : 0,\n                  oId = oIdx === 0 ? _c3.sourceId : _c3.targetId,\n                  oInfo = this.viewport.getPosition(oId);\n              anchorParams.index = oIdx === 0 ? 1 : 0;\n              anchorParams.connection = _c3;\n              anchorParams.txy = oInfo;\n              anchorParams.twh = oInfo;\n              anchorParams.tElement = _c3.endpoints[oIdx];\n              anchorParams.tRotation = this._getRotations(oId);\n            } else if (endpoint.connections.length > 0) {\n              anchorParams.connection = endpoint.connections[0];\n            }\n            anchorParams.rotation = this._getRotations(endpoint.elementId);\n            ap = this.router.computeAnchorLocation(endpoint._anchor, anchorParams);\n          }\n          endpoint.endpoint.compute(ap, this.router.getEndpointOrientation(endpoint), endpoint.paintStyleInUse);\n          this.renderEndpoint(endpoint, endpoint.paintStyleInUse);\n          endpoint.timestamp = timestamp;\n          for (var i in endpoint.overlays) {\n            if (endpoint.overlays.hasOwnProperty(i)) {\n              var _o = endpoint.overlays[i];\n              if (_o.isVisible()) {\n                endpoint.overlayPlacements[i] = this.drawOverlay(_o, endpoint.endpoint, endpoint.paintStyleInUse, endpoint.getAbsoluteOverlayPosition(_o));\n                this._paintOverlay(_o, endpoint.overlayPlacements[i], {\n                  xmin: 0,\n                  ymin: 0\n                });\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_paintConnection\",\n    value: function _paintConnection(connection, params) {\n      if (!this._suspendDrawing && connection.visible !== false) {\n        params = params || {};\n        var timestamp = params.timestamp;\n        if (timestamp != null && timestamp === connection.lastPaintedAt) {\n          return;\n        }\n        if (timestamp == null || timestamp !== connection.lastPaintedAt) {\n          this.router.computePath(connection, timestamp);\n          var overlayExtents = {\n            xmin: Infinity,\n            ymin: Infinity,\n            xmax: -Infinity,\n            ymax: -Infinity\n          };\n          for (var i in connection.overlays) {\n            if (connection.overlays.hasOwnProperty(i)) {\n              var _o2 = connection.overlays[i];\n              if (_o2.isVisible()) {\n                connection.overlayPlacements[i] = this.drawOverlay(_o2, connection.connector, connection.paintStyleInUse, connection.getAbsoluteOverlayPosition(_o2));\n                overlayExtents.xmin = Math.min(overlayExtents.xmin, connection.overlayPlacements[i].xmin);\n                overlayExtents.xmax = Math.max(overlayExtents.xmax, connection.overlayPlacements[i].xmax);\n                overlayExtents.ymin = Math.min(overlayExtents.ymin, connection.overlayPlacements[i].ymin);\n                overlayExtents.ymax = Math.max(overlayExtents.ymax, connection.overlayPlacements[i].ymax);\n              }\n            }\n          }\n          var lineWidth = parseFloat(\"\" + connection.paintStyleInUse.strokeWidth || \"1\") / 2,\n              outlineWidth = parseFloat(\"\" + connection.paintStyleInUse.strokeWidth || \"0\"),\n              _extents = {\n            xmin: Math.min(connection.connector.bounds.xmin - (lineWidth + outlineWidth), overlayExtents.xmin),\n            ymin: Math.min(connection.connector.bounds.ymin - (lineWidth + outlineWidth), overlayExtents.ymin),\n            xmax: Math.max(connection.connector.bounds.xmax + (lineWidth + outlineWidth), overlayExtents.xmax),\n            ymax: Math.max(connection.connector.bounds.ymax + (lineWidth + outlineWidth), overlayExtents.ymax)\n          };\n          this.paintConnector(connection.connector, connection.paintStyleInUse, _extents);\n          for (var j in connection.overlays) {\n            if (connection.overlays.hasOwnProperty(j)) {\n              var _p2 = connection.overlays[j];\n              if (_p2.isVisible()) {\n                this._paintOverlay(_p2, connection.overlayPlacements[j], _extents);\n              }\n            }\n          }\n        }\n        connection.lastPaintedAt = timestamp;\n      }\n    }\n  }, {\n    key: \"_refreshEndpoint\",\n    value: function _refreshEndpoint(endpoint) {\n      if (!endpoint._anchor.isFloating) {\n        if (endpoint.connections.length > 0) {\n          this.addEndpointClass(endpoint, this.endpointConnectedClass);\n        } else {\n          this.removeEndpointClass(endpoint, this.endpointConnectedClass);\n        }\n        if (endpoint.isFull()) {\n          this.addEndpointClass(endpoint, this.endpointFullClass);\n        } else {\n          this.removeEndpointClass(endpoint, this.endpointFullClass);\n        }\n      }\n    }\n  }, {\n    key: \"_makeConnector\",\n    value: function _makeConnector(connection, name, args) {\n      return Connectors.get(connection, name, args);\n    }\n  }, {\n    key: \"addOverlay\",\n    value: function addOverlay(component, overlay, doNotRevalidate) {\n      component.addOverlay(overlay);\n      if (!doNotRevalidate) {\n        var relatedElement = component instanceof Endpoint ? component.element : component.source;\n        this.revalidate(relatedElement);\n      }\n    }\n  }, {\n    key: \"removeOverlay\",\n    value: function removeOverlay(component, overlayId) {\n      component.removeOverlay(overlayId);\n      var relatedElement = component instanceof Endpoint ? component.element : component.source;\n      this.revalidate(relatedElement);\n    }\n  }, {\n    key: \"setOutlineColor\",\n    value: function setOutlineColor(conn, color) {\n      conn.paintStyleInUse.outlineStroke = color;\n      this._paintConnection(conn);\n    }\n  }, {\n    key: \"setOutlineWidth\",\n    value: function setOutlineWidth(conn, width) {\n      conn.paintStyleInUse.outlineWidth = width;\n      this._paintConnection(conn);\n    }\n  }, {\n    key: \"setColor\",\n    value: function setColor(conn, color) {\n      conn.paintStyleInUse.stroke = color;\n      this._paintConnection(conn);\n    }\n  }, {\n    key: \"setLineWidth\",\n    value: function setLineWidth(conn, width) {\n      conn.paintStyleInUse.strokeWidth = width;\n      this._paintConnection(conn);\n    }\n  }, {\n    key: \"setLineStyle\",\n    value: function setLineStyle(conn, style) {\n      if (style.lineWidth != null) {\n        conn.paintStyleInUse.strokeWidth = style.lineWidth;\n      }\n      if (style.outlineWidth != null) {\n        conn.paintStyleInUse.outlineWidth = style.outlineWidth;\n      }\n      if (style.color != null) {\n        conn.paintStyleInUse.stroke = style.color;\n      }\n      if (style.outlineColor != null) {\n        conn.paintStyleInUse.outlineStroke = style.outlineColor;\n      }\n      this._paintConnection(conn);\n    }\n  }, {\n    key: \"getPathData\",\n    value:\n    function getPathData(connector) {\n      var p = \"\";\n      for (var i = 0; i < connector.segments.length; i++) {\n        p += connector.segments[i].getPath(i === 0);\n        p += \" \";\n      }\n      return p;\n    }\n  }]);\n  return JsPlumbInstance;\n}(EventGenerator);\n\nvar VERY_SMALL_VALUE = 0.0000000001;\nfunction gentleRound(n) {\n  var f = Math.floor(n),\n      r = Math.ceil(n);\n  if (n - f < VERY_SMALL_VALUE) {\n    return f;\n  } else if (r - n < VERY_SMALL_VALUE) {\n    return r;\n  }\n  return n;\n}\nvar ArcSegment = function (_AbstractSegment) {\n  _inherits(ArcSegment, _AbstractSegment);\n  var _super = _createSuper(ArcSegment);\n  function ArcSegment(params) {\n    var _this;\n    _classCallCheck(this, ArcSegment);\n    _this = _super.call(this, params);\n    _defineProperty(_assertThisInitialized(_this), \"type\", ArcSegment.segmentType);\n    _defineProperty(_assertThisInitialized(_this), \"cx\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"cy\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"radius\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"anticlockwise\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"startAngle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"endAngle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"sweep\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"length\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"circumference\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"frac\", void 0);\n    _this.cx = params.cx;\n    _this.cy = params.cy;\n    _this.radius = params.r;\n    _this.anticlockwise = params.ac;\n    if (params.startAngle && params.endAngle) {\n      _this.startAngle = params.startAngle;\n      _this.endAngle = params.endAngle;\n      _this.x1 = _this.cx + _this.radius * Math.cos(_this.startAngle);\n      _this.y1 = _this.cy + _this.radius * Math.sin(_this.startAngle);\n      _this.x2 = _this.cx + _this.radius * Math.cos(_this.endAngle);\n      _this.y2 = _this.cy + _this.radius * Math.sin(_this.endAngle);\n    } else {\n      _this.startAngle = _this._calcAngle(_this.x1, _this.y1);\n      _this.endAngle = _this._calcAngle(_this.x2, _this.y2);\n    }\n    if (_this.endAngle < 0) {\n      _this.endAngle += TWO_PI;\n    }\n    if (_this.startAngle < 0) {\n      _this.startAngle += TWO_PI;\n    }\n    var ea = _this.endAngle < _this.startAngle ? _this.endAngle + TWO_PI : _this.endAngle;\n    _this.sweep = Math.abs(ea - _this.startAngle);\n    if (_this.anticlockwise) {\n      _this.sweep = TWO_PI - _this.sweep;\n    }\n    _this.circumference = 2 * Math.PI * _this.radius;\n    _this.frac = _this.sweep / TWO_PI;\n    _this.length = _this.circumference * _this.frac;\n    _this.extents = {\n      xmin: _this.cx - _this.radius,\n      xmax: _this.cx + _this.radius,\n      ymin: _this.cy - _this.radius,\n      ymax: _this.cy + _this.radius\n    };\n    return _this;\n  }\n  _createClass(ArcSegment, [{\n    key: \"_calcAngle\",\n    value: function _calcAngle(_x, _y) {\n      return theta({\n        x: this.cx,\n        y: this.cy\n      }, {\n        x: _x,\n        y: _y\n      });\n    }\n  }, {\n    key: \"_calcAngleForLocation\",\n    value: function _calcAngleForLocation(segment, location) {\n      if (segment.anticlockwise) {\n        var sa = segment.startAngle < segment.endAngle ? segment.startAngle + TWO_PI : segment.startAngle,\n            s = Math.abs(sa - segment.endAngle);\n        return sa - s * location;\n      } else {\n        var ea = segment.endAngle < segment.startAngle ? segment.endAngle + TWO_PI : segment.endAngle,\n            ss = Math.abs(ea - segment.startAngle);\n        return segment.startAngle + ss * location;\n      }\n    }\n  }, {\n    key: \"getPath\",\n    value: function getPath(isFirstSegment) {\n      var laf = this.sweep > Math.PI ? 1 : 0,\n          sf = this.anticlockwise ? 0 : 1;\n      return (isFirstSegment ? \"M\" + this.x1 + \" \" + this.y1 + \" \" : \"\") + \"A \" + this.radius + \" \" + this.radius + \" 0 \" + laf + \",\" + sf + \" \" + this.x2 + \" \" + this.y2;\n    }\n  }, {\n    key: \"getLength\",\n    value: function getLength() {\n      return this.length;\n    }\n  }, {\n    key: \"pointOnPath\",\n    value: function pointOnPath(location, absolute) {\n      if (location === 0) {\n        return {\n          x: this.x1,\n          y: this.y1,\n          theta: this.startAngle\n        };\n      } else if (location === 1) {\n        return {\n          x: this.x2,\n          y: this.y2,\n          theta: this.endAngle\n        };\n      }\n      if (absolute) {\n        location = location / length;\n      }\n      var angle = this._calcAngleForLocation(this, location),\n          _x = this.cx + this.radius * Math.cos(angle),\n          _y = this.cy + this.radius * Math.sin(angle);\n      return {\n        x: gentleRound(_x),\n        y: gentleRound(_y),\n        theta: angle\n      };\n    }\n  }, {\n    key: \"gradientAtPoint\",\n    value: function gradientAtPoint(location, absolute) {\n      var p = this.pointOnPath(location, absolute);\n      var m = normal({\n        x: this.cx,\n        y: this.cy\n      }, p);\n      if (!this.anticlockwise && (m === Infinity || m === -Infinity)) {\n        m *= -1;\n      }\n      return m;\n    }\n  }, {\n    key: \"pointAlongPathFrom\",\n    value: function pointAlongPathFrom(location, distance, absolute) {\n      var p = this.pointOnPath(location, absolute),\n          arcSpan = distance / this.circumference * 2 * Math.PI,\n          dir = this.anticlockwise ? -1 : 1,\n          startAngle = p.theta + dir * arcSpan,\n          startX = this.cx + this.radius * Math.cos(startAngle),\n          startY = this.cy + this.radius * Math.sin(startAngle);\n      return {\n        x: startX,\n        y: startY\n      };\n    }\n  }]);\n  return ArcSegment;\n}(AbstractSegment);\n_defineProperty(ArcSegment, \"segmentType\", \"Arc\");\n\nvar DEFAULT_WIDTH = 20;\nvar DEFAULT_LENGTH = 20;\nvar ArrowOverlay = function (_Overlay) {\n  _inherits(ArrowOverlay, _Overlay);\n  var _super = _createSuper(ArrowOverlay);\n  function ArrowOverlay(instance, component, p) {\n    var _this;\n    _classCallCheck(this, ArrowOverlay);\n    _this = _super.call(this, instance, component, p);\n    _this.instance = instance;\n    _this.component = component;\n    _defineProperty(_assertThisInitialized(_this), \"width\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"length\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"foldback\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"direction\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"location\", 0.5);\n    _defineProperty(_assertThisInitialized(_this), \"paintStyle\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", ArrowOverlay.type);\n    _defineProperty(_assertThisInitialized(_this), \"cachedDimensions\", void 0);\n    p = p || {};\n    _this.width = p.width || DEFAULT_WIDTH;\n    _this.length = p.length || DEFAULT_LENGTH;\n    _this.direction = (p.direction || 1) < 0 ? -1 : 1;\n    _this.foldback = p.foldback || 0.623;\n    _this.paintStyle = p.paintStyle || {\n      \"strokeWidth\": 1\n    };\n    _this.location = p.location == null ? _this.location : Array.isArray(p.location) ? p.location[0] : p.location;\n    return _this;\n  }\n  _createClass(ArrowOverlay, [{\n    key: \"draw\",\n    value: function draw(component, currentConnectionPaintStyle, absolutePosition) {\n      if (component instanceof AbstractConnector) {\n        var connector = component;\n        var hxy, mid, txy, tail, cxy;\n        if (this.location > 1 || this.location < 0) {\n          var fromLoc = this.location < 0 ? 1 : 0;\n          hxy = connector.pointAlongPathFrom(fromLoc, this.location, false);\n          mid = connector.pointAlongPathFrom(fromLoc, this.location - this.direction * this.length / 2, false);\n          txy = pointOnLine(hxy, mid, this.length);\n        } else if (this.location === 1) {\n          hxy = connector.pointOnPath(this.location);\n          mid = connector.pointAlongPathFrom(this.location, -this.length);\n          txy = pointOnLine(hxy, mid, this.length);\n          if (this.direction === -1) {\n            var _ = txy;\n            txy = hxy;\n            hxy = _;\n          }\n        } else if (this.location === 0) {\n          txy = connector.pointOnPath(this.location);\n          mid = connector.pointAlongPathFrom(this.location, this.length);\n          hxy = pointOnLine(txy, mid, this.length);\n          if (this.direction === -1) {\n            var __ = txy;\n            txy = hxy;\n            hxy = __;\n          }\n        } else {\n          hxy = connector.pointAlongPathFrom(this.location, this.direction * this.length / 2);\n          mid = connector.pointOnPath(this.location);\n          txy = pointOnLine(hxy, mid, this.length);\n        }\n        tail = perpendicularLineTo(hxy, txy, this.width);\n        cxy = pointOnLine(hxy, txy, this.foldback * this.length);\n        var d = {\n          hxy: hxy,\n          tail: tail,\n          cxy: cxy\n        },\n            stroke = this.paintStyle.stroke || currentConnectionPaintStyle.stroke,\n            fill = this.paintStyle.fill || currentConnectionPaintStyle.stroke,\n            lineWidth = this.paintStyle.strokeWidth || currentConnectionPaintStyle.strokeWidth;\n        return {\n          component: component,\n          d: d,\n          \"stroke-width\": lineWidth,\n          stroke: stroke,\n          fill: fill,\n          xmin: Math.min(hxy.x, tail[0].x, tail[1].x),\n          xmax: Math.max(hxy.x, tail[0].x, tail[1].x),\n          ymin: Math.min(hxy.y, tail[0].y, tail[1].y),\n          ymax: Math.max(hxy.y, tail[0].y, tail[1].y)\n        };\n      }\n    }\n  }, {\n    key: \"updateFrom\",\n    value: function updateFrom(d) {}\n  }]);\n  return ArrowOverlay;\n}(Overlay);\n_defineProperty(ArrowOverlay, \"type\", \"Arrow\");\nfunction isArrowOverlay(o) {\n  return o.type === ArrowOverlay.type;\n}\nOverlayFactory.register(ArrowOverlay.type, ArrowOverlay);\n\nvar PlainArrowOverlay = function (_ArrowOverlay) {\n  _inherits(PlainArrowOverlay, _ArrowOverlay);\n  var _super = _createSuper(PlainArrowOverlay);\n  function PlainArrowOverlay(instance, component, p) {\n    var _this;\n    _classCallCheck(this, PlainArrowOverlay);\n    _this = _super.call(this, instance, component, p);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"type\", PlainArrowOverlay.type);\n    _this.foldback = 1;\n    return _this;\n  }\n  return PlainArrowOverlay;\n}(ArrowOverlay);\n_defineProperty(PlainArrowOverlay, \"type\", \"PlainArrow\");\nfunction isPlainArrowOverlay(o) {\n  return o.type === PlainArrowOverlay.type;\n}\nOverlayFactory.register(\"PlainArrow\", PlainArrowOverlay);\n\nvar DiamondOverlay = function (_ArrowOverlay) {\n  _inherits(DiamondOverlay, _ArrowOverlay);\n  var _super = _createSuper(DiamondOverlay);\n  function DiamondOverlay(instance, component, p) {\n    var _this;\n    _classCallCheck(this, DiamondOverlay);\n    _this = _super.call(this, instance, component, p);\n    _this.instance = instance;\n    _defineProperty(_assertThisInitialized(_this), \"type\", DiamondOverlay.type);\n    _this.length = _this.length / 2;\n    _this.foldback = 2;\n    return _this;\n  }\n  return DiamondOverlay;\n}(ArrowOverlay);\n_defineProperty(DiamondOverlay, \"type\", \"Diamond\");\nfunction isDiamondOverlay(o) {\n  return o.type === DiamondOverlay.type;\n}\nOverlayFactory.register(DiamondOverlay.type, DiamondOverlay);\n\nvar CustomOverlay = function (_Overlay) {\n  _inherits(CustomOverlay, _Overlay);\n  var _super = _createSuper(CustomOverlay);\n  function CustomOverlay(instance, component, p) {\n    var _this;\n    _classCallCheck(this, CustomOverlay);\n    _this = _super.call(this, instance, component, p);\n    _this.instance = instance;\n    _this.component = component;\n    _defineProperty(_assertThisInitialized(_this), \"create\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"type\", CustomOverlay.type);\n    _this.create = p.create;\n    return _this;\n  }\n  _createClass(CustomOverlay, [{\n    key: \"updateFrom\",\n    value: function updateFrom(d) {}\n  }]);\n  return CustomOverlay;\n}(Overlay);\n_defineProperty(CustomOverlay, \"type\", \"Custom\");\nfunction isCustomOverlay(o) {\n  return o.type === CustomOverlay.type;\n}\nOverlayFactory.register(CustomOverlay.type, CustomOverlay);\n\nEndpointFactory.registerHandler(DotEndpointHandler);\nEndpointFactory.registerHandler(RectangleEndpointHandler);\nEndpointFactory.registerHandler(BlankEndpointHandler);\nConnectors.register(StraightConnector.type, StraightConnector);\n\nexport { ABSOLUTE, ADD_CLASS_ACTION, ATTRIBUTE_GROUP, ATTRIBUTE_MANAGED, ATTRIBUTE_NOT_DRAGGABLE, ATTRIBUTE_SCOPE, ATTRIBUTE_SCOPE_PREFIX, ATTRIBUTE_TABINDEX, AbstractConnector, ArcSegment, ArrowOverlay, BLOCK, BOTTOM, BlankEndpoint, BlankEndpointHandler, CHECK_CONDITION, CHECK_DROP_ALLOWED, CLASS_CONNECTED, CLASS_CONNECTOR, CLASS_CONNECTOR_OUTLINE, CLASS_ENDPOINT, CLASS_ENDPOINT_ANCHOR_PREFIX, CLASS_ENDPOINT_CONNECTED, CLASS_ENDPOINT_DROP_ALLOWED, CLASS_ENDPOINT_DROP_FORBIDDEN, CLASS_ENDPOINT_FLOATING, CLASS_ENDPOINT_FULL, CLASS_GROUP_COLLAPSED, CLASS_GROUP_EXPANDED, CLASS_OVERLAY, Component, Connection, ConnectionDragSelector, ConnectionSelection, Connectors, CustomOverlay, DEFAULT_KEY_ALLOW_NESTED_GROUPS, DEFAULT_KEY_ANCHOR, DEFAULT_KEY_ANCHORS, DEFAULT_KEY_CONNECTIONS_DETACHABLE, DEFAULT_KEY_CONNECTION_OVERLAYS, DEFAULT_KEY_CONNECTOR, DEFAULT_KEY_CONTAINER, DEFAULT_KEY_ENDPOINT, DEFAULT_KEY_ENDPOINTS, DEFAULT_KEY_ENDPOINT_HOVER_STYLE, DEFAULT_KEY_ENDPOINT_HOVER_STYLES, DEFAULT_KEY_ENDPOINT_OVERLAYS, DEFAULT_KEY_ENDPOINT_STYLE, DEFAULT_KEY_ENDPOINT_STYLES, DEFAULT_KEY_HOVER_CLASS, DEFAULT_KEY_HOVER_PAINT_STYLE, DEFAULT_KEY_LIST_STYLE, DEFAULT_KEY_MAX_CONNECTIONS, DEFAULT_KEY_PAINT_STYLE, DEFAULT_KEY_REATTACH_CONNECTIONS, DEFAULT_KEY_SCOPE, DiamondOverlay, DotEndpoint, DotEndpointHandler, ERROR_SOURCE_DOES_NOT_EXIST, ERROR_SOURCE_ENDPOINT_FULL, ERROR_TARGET_DOES_NOT_EXIST, ERROR_TARGET_ENDPOINT_FULL, EVENT_ANCHOR_CHANGED, EVENT_CONNECTION, EVENT_CONNECTION_DETACHED, EVENT_CONNECTION_MOVED, EVENT_CONTAINER_CHANGE, EVENT_ENDPOINT_REPLACED, EVENT_GROUP_ADDED, EVENT_GROUP_COLLAPSE, EVENT_GROUP_EXPAND, EVENT_GROUP_MEMBER_ADDED, EVENT_GROUP_MEMBER_REMOVED, EVENT_GROUP_REMOVED, EVENT_INTERNAL_CONNECTION, EVENT_INTERNAL_CONNECTION_DETACHED, EVENT_INTERNAL_ENDPOINT_UNREGISTERED, EVENT_MANAGE_ELEMENT, EVENT_MAX_CONNECTIONS, EVENT_NESTED_GROUP_ADDED, EVENT_NESTED_GROUP_REMOVED, EVENT_UNMANAGE_ELEMENT, EVENT_ZOOM, Endpoint, EndpointFactory, EndpointRepresentation, EndpointSelection, FIXED, GroupManager, INTERCEPT_BEFORE_DETACH, INTERCEPT_BEFORE_DRAG, INTERCEPT_BEFORE_DROP, INTERCEPT_BEFORE_START_DETACH, IS_DETACH_ALLOWED, JsPlumbInstance, KEY_CONNECTION_OVERLAYS, LEFT, LabelOverlay, LightweightFloatingAnchor, LightweightRouter, NONE, Overlay, OverlayFactory, PlainArrowOverlay, REDROP_POLICY_ANY, REDROP_POLICY_ANY_SOURCE, REDROP_POLICY_ANY_SOURCE_OR_TARGET, REDROP_POLICY_ANY_TARGET, REDROP_POLICY_STRICT, REMOVE_CLASS_ACTION, RIGHT, RectangleEndpoint, RectangleEndpointHandler, SELECTOR_MANAGED_ELEMENT, SOURCE, SOURCE_INDEX, STATIC, StraightConnector, StraightSegment, TARGET, TARGET_INDEX, TOP, UIGroup, UINode, Viewport, X_AXIS_FACES, Y_AXIS_FACES, _createPerimeterAnchor, _removeTypeCssHelper, _updateHoverStyle, att, classList, cls, convertToFullOverlaySpec, createFloatingAnchor, getDefaultFace, isArrowOverlay, isContinuous, isCustomOverlay, isDiamondOverlay, isDynamic, isEdgeSupported, _isFloating as isFloating, isFullOverlaySpec, isLabelOverlay, isPlainArrowOverlay, makeLightweightAnchorFromSpec };\n"],"names":["_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","_createClass","protoProps","staticProps","_defineProperty","obj","key","value","_inherits","subClass","superClass","_setPrototypeOf","_getPrototypeOf","o","p","_isNativeReflectConstruct","e","_assertThisInitialized","self","_possibleConstructorReturn","call","_createSuper","Derived","hasNativeReflectConstruct","Super","result","NewTarget","_superPropBase","object","property","_get","receiver","base","desc","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","_i","_arr","_n","_d","_s","_e","err","minLen","n","len","arr2","endpointMap","endpointComputers","handlers","EndpointFactory","ep","name","params","epr","handler","endpoint","anchorPoint","orientation","endpointStyle","c","log","eph","EndpointRepresentation","EMPTY_BOUNDS","_c","v","DotEndpoint","_EndpointRepresentati","_super","_this","DotEndpointHandler","x","y","w","h","lw","BlankEndpoint","BlankEndpointHandler","RectangleEndpoint","RectangleEndpointHandler","width","height","AbstractConnector","connection","g","internal","a","dx","dy","out","x1","y1","x2","y2","box","curLoc","sl","location","absolute","idx","inSegmentProportion","clazz","s","segment","quadrant","swapX","swapY","so","to","noSourceOrientation","noTargetOrientation","index","oIndex","v1","v2","sx","sy","tx","ty","oProduct","segBounds","seg","distance","StraightSegment","_AbstractSegment","isFirstSegment","gradient","coords","l","pointOnLine","farAwayPoint","b","b2","_x1","_y1","fractionInSegment","lineLength","q","p1","p2","_x2","_y2","m2","m1","X","Y","AbstractSegment","StraightConnector","_AbstractConnector","_len","args","_key","paintInfo","connectorMap","Connectors","conn","cls","className","cn","classList","_len2","_key2","att","_len3","attName","_key3","an","SOURCE","TARGET","BLOCK","NONE","ABSOLUTE","FIXED","STATIC","ATTRIBUTE_GROUP","ATTRIBUTE_MANAGED","ATTRIBUTE_NOT_DRAGGABLE","ATTRIBUTE_TABINDEX","ATTRIBUTE_SCOPE","ATTRIBUTE_SCOPE_PREFIX","CHECK_CONDITION","CHECK_DROP_ALLOWED","CLASS_CONNECTOR","CLASS_CONNECTOR_OUTLINE","CLASS_CONNECTED","CLASS_ENDPOINT","CLASS_ENDPOINT_CONNECTED","CLASS_ENDPOINT_FULL","CLASS_ENDPOINT_FLOATING","CLASS_ENDPOINT_DROP_ALLOWED","CLASS_ENDPOINT_DROP_FORBIDDEN","CLASS_ENDPOINT_ANCHOR_PREFIX","CLASS_GROUP_COLLAPSED","CLASS_GROUP_EXPANDED","CLASS_OVERLAY","EVENT_ANCHOR_CHANGED","EVENT_CONNECTION","EVENT_INTERNAL_CONNECTION","EVENT_CONNECTION_DETACHED","EVENT_CONNECTION_MOVED","EVENT_CONTAINER_CHANGE","EVENT_ENDPOINT_REPLACED","EVENT_INTERNAL_ENDPOINT_UNREGISTERED","EVENT_INTERNAL_CONNECTION_DETACHED","EVENT_MANAGE_ELEMENT","EVENT_GROUP_ADDED","EVENT_GROUP_COLLAPSE","EVENT_GROUP_EXPAND","EVENT_GROUP_MEMBER_ADDED","EVENT_GROUP_MEMBER_REMOVED","EVENT_GROUP_REMOVED","EVENT_MAX_CONNECTIONS","EVENT_NESTED_GROUP_ADDED","EVENT_NESTED_GROUP_REMOVED","EVENT_UNMANAGE_ELEMENT","EVENT_ZOOM","IS_DETACH_ALLOWED","INTERCEPT_BEFORE_DRAG","INTERCEPT_BEFORE_DROP","INTERCEPT_BEFORE_DETACH","INTERCEPT_BEFORE_START_DETACH","SELECTOR_MANAGED_ELEMENT","ERROR_SOURCE_ENDPOINT_FULL","ERROR_TARGET_ENDPOINT_FULL","ERROR_SOURCE_DOES_NOT_EXIST","ERROR_TARGET_DOES_NOT_EXIST","KEY_CONNECTION_OVERLAYS","DEFAULT_KEY_ALLOW_NESTED_GROUPS","DEFAULT_KEY_PAINT_STYLE","DEFAULT_KEY_SCOPE","convertToFullOverlaySpec","spec","isString","uuid","Overlay","_EventGenerator","component","_event","newLocation","_l","event","originalEvent","EventGenerator","overlayMap","OverlayFactory","overlay","LabelOverlay","_Overlay","isFunction","d","isLabelOverlay","_splitType","t","_mapType","map","typeId","CONNECTOR","MERGE_STRATEGY_OVERRIDE","CSS_CLASS","DEFAULT_TYPE_KEY","ANCHOR","ANCHORS","_internalLabelOverlayId","_internalLabelOverlayClass","TYPE_ITEM_OVERLAY","LOCATION_ATTRIBUTE","ACTION_ADD","ACTION_REMOVE","_applyTypes","td","defType","extend","tid","_t","overrides","k","merge","setToArray","populate","_removeTypeCssHelper","type","_updateHoverStyle","mergedHoverStyle","_makeLabelOverlay","_params","mergedParams","_processOverlay","_newOverlay","oa","Component","clone","evtName","oo","defaultOverlayKey","defaultOverlays","fo","r","sourceId","targetId","scope","dropEndpoint","payload","item","_somethingAdded","j","_this2","_cont","_one","tt","_this3","keep","existing","style","xy","action","cascade","parts","locationAttribute","loc","id","ids","overlayId","dontCleanup","overlays","lo","ll","_params2","_opposites","_clockwiseOptions","_antiClockwiseOptions","FaceValues","TOP","LEFT","RIGHT","BOTTOM","X_AXIS_FACES","Y_AXIS_FACES","LightweightFloatingAnchor","element","elementId","opposites","clockwiseOptions","antiClockwiseOptions","getDefaultFace","_isFaceAvailable","face","_secondBest","edge","_lastChoice","isEdgeSupported","verifyFace","secondBest","lastChoice","_top","_bottom","_left","_right","_topLeft","_topRight","_bottomLeft","_bottomRight","_center","namedValues","namedContinuousValues","getNamedAnchor","AnchorLocations","_createPerimeterAnchor","_createAnchor","_a","_createContinuousAnchor","locations","createFloatingAnchor","PROPERTY_CURRENT_FACE","faces","ca","f","isPrimitiveAnchorSpec","sa","isNumber","makeLightweightAnchorFromSpec","_spec","aSpec","ar","circleGenerator","anchorCount","step","current","_path","segments","anchorsPerFace","_computeFace","fractionalLength","ox","oy","shapeGenerator","rectangleGenerator","diamondGenerator","triangleGenerator","rotate$1","points","amountInDegrees","theta","_x","_y","anchorGenerators","PerimeterAnchorShapes","shape","da","aa","TYPE_ITEM_ANCHORS","TYPE_ITEM_CONNECTOR","prepareEndpoint","anchor","es","ehs","u","Connection","_Component","sourceAnchor","targetAnchor","_detachable","_reattach","initialPaintStyle","initialTimestamp","_p","data","isObject","_types","DEFAULT","isSource","el","elId","detachable","reattach","typeMap","_connector","_anchors","connectorSpec","connectorArgs","connector","co","doNotRepaint","doNotChangeListenerComponent","previous","previousClasses","endpointDef","ebe","_idx","_new","typeParameters","Endpoint","anchorParamsToUse","ac","oldAnchorClass","anchorClass","currentAnchor","anchorParams","transientDetach","otherEndpoint","count","doNotChangeConnections","doNotNotifyOtherEndpoint","oIdx","found","allowed","endpointArgs","isAssignableFrom","fep","_ep","UINode","UIGroup","_UINode","options","jel","targetGroup","endpointIndex","_el","doNotFireEvent","dragArea","__el","getWithFunction","manipulateDOM","doNotUpdateConnections","uiNode","child","removeWithFunction","orphanedPositions","newPosition","group","groupElId","entry","elpos","cpos","cg","GroupManager","sourceGroup","suggest","originalElement","originalGroup","newEndpoint","newElement","newGroup","connMap","otherConnMap","groupId","abort","deleteMembers","manipulateView","actualGroup","newPositions","forEach","_g","doNotTransferToAncestor","currentParent","pos","members","childMembers","member","c1","WILDCARD","c2","processed","gs","gt","oneSet","otherEl","esg","esgcp","et","etg","etgcp","groupEl","parentEl","_this4","collapsedConnectionIds","_collapseSet","conns","collapsedGroup","collapsedIds","_this5","_this6","_expandSet","_expandNestedGroup","ignoreCollapsedStateForNested","m","_this7","isGroup","droppingGroup","currentGroup","handleDroppedConnections","list","oidx","_this8","proxiedElement","ancestors","possibleAncestor","childGroups","possibleDescendant","ancestor","SelectionBase","entries","label","fn","suspend","evt","EndpointSelection","_SelectionBase","ConnectionSelection","Transaction","EMPTY_POSITION","rotate","center","cr","sr","_point","p3","p4","xmin","xmax","ymin","ymax","entryComparator","arrayEntry","reverseEntryComparator","_updateElementIndex","array","sortDescending","insertSorted","_clearElementIndex","findWithFunction","Viewport","updatedElement","doNotRecalculateBounds","vp","rotation","getsert","me","size","offset","_edgeSortFunctions","_placeAnchorsOnLine","connections","horizontal","otherMultiplier","reverse","sizeInAxis","sizeInOtherAxis","val","other","xp","yp","rotated","rotatePoint","_rightAndBottomSort","_leftAndTopSort","edgeSortFunctions","isContinuous","_isFloating","isDynamic","getCurrentLocation","LightweightRouter","cx","cy","wh","targetRotation","ax","ay","acx","acy","txy","twh","minIdx","minDist","timestamp","candidate","_o","_getCurrentLocation","_getCurrentLocation2","currentLoc","_getCurrentLocation3","_getCurrentLocation4","currentIdx","_this$_anchorSelector","_this$_anchorSelector2","newIdx","newLoc","_anchorLists","cd","placeSomeAnchors","unsortedConnections","isHorizontal","sc","anchors","weAreSource","lists","order","aBoolean","otherElId","edgeId","connsToPaint","endpointsToPaint","endpointId","values","listToAddTo","listToRemoveFrom","rIdx","insertIdx","listsForElement","total","eId","sourceInfo","targetInfo","sE","tE","sAnchorP","tAnchorP","anchorLoc","offsetToUI","connectionsToPaint","anchorsToUpdate","orientationCache","anEndpoint","_i2","sourceContinuous","targetContinuous","oKey","sd","sourceRotation","otherAnchor","Orientation","theta2","candidates","midpoints","types","dim","_midpoints$types$i","axis","FACES","sf","tf","_axisIndices","axisIndices","ais","bis","ait","bit","sourceEdge","targetEdge","overrideLock","a1","a2","l1","l2","ConnectionDragSelector","selector","def","exclude","REDROP_POLICY_STRICT","enabled","REDROP_POLICY_ANY","REDROP_POLICY_ANY_SOURCE","REDROP_POLICY_ANY_TARGET","REDROP_POLICY_ANY_SOURCE_OR_TARGET","_scopeMatch","e1","e2","s1","s2","prepareList","input","doNotGetIds","_resolveId","_r","addManagedEndpoint","managedElement","removeManagedEndpoint","addManagedConnection","sourceEl","targetEl","removeManagedConnection","sourceCount","targetCount","JsPlumbInstance","_instanceIndex","defaults","z","repaintEverything","conditionName","flat","scopes","sources","targets","results","_addOne","ss","jj","_c2","filterList","noElementFilters","elements","_el2","either","source","sourceMatchExact","targetMatchExact","inner","ii","noMatchSource","noMatchTarget","stTypes","_st","cId","sid","oldEndpoint","evtParams","repaintAfterwards","curVal","doNotRepaintAfterwards","_wasSuspended","functionChain","_sourceEndpoint","targetEndpoint","deletedCount","jpc","doFireEvent","argIsConnection","recalc","nl","internalId","_recalc","dataIdentifier","removeElement","_doNotRepaint","rotations","_oneLevel","gEntry","point","addToDictionary","dontPrependDefault","bits","eps","as","offsetsWereJustCalculated","_mergeRedraw","r2","repaintEls","proxy","connectionsToDelete","referenceParams","endpoints","errorMessage","temp","recurse","aae","maxConnections","_def","sel","changeEndpoints","state","alsoChangeEndpoints","visible","endpointFunc","func","retVal","typeDescriptor","proxyEl","endpointGenerator","anchorGenerator","alreadyProxied","proxyEp","originalElementId","originalEndpoint","proxyElId","originalId","newId","_this$groupManager","_manipulateView","_doNotFireEvent","findConnectionToUseForDynamicAnchor","info","ap","_c3","oId","oInfo","overlayExtents","_o2","lineWidth","outlineWidth","_extents","_p2","doNotRevalidate","relatedElement","color","VERY_SMALL_VALUE","gentleRound","ArcSegment","TWO_PI","ea","laf","angle","normal","arcSpan","dir","startAngle","startX","startY","DEFAULT_WIDTH","DEFAULT_LENGTH","ArrowOverlay","currentConnectionPaintStyle","absolutePosition","hxy","mid","tail","cxy","fromLoc","_","__","perpendicularLineTo","stroke","fill","isArrowOverlay","PlainArrowOverlay","_ArrowOverlay","isPlainArrowOverlay","DiamondOverlay","isDiamondOverlay","CustomOverlay","isCustomOverlay"],"mappings":"kXAGA,SAASA,EAAgBC,EAAUC,EAAa,CAC9C,GAAI,EAAED,aAAoBC,GACxB,MAAM,IAAI,UAAU,mCAAmC,CAE3D,CAEA,SAASC,GAAkBC,EAAQC,EAAO,CACxC,QAAS,EAAI,EAAG,EAAIA,EAAM,OAAQ,IAAK,CACrC,IAAIC,EAAaD,EAAM,CAAC,EACxBC,EAAW,WAAaA,EAAW,YAAc,GACjDA,EAAW,aAAe,GACtB,UAAWA,IAAYA,EAAW,SAAW,IACjD,OAAO,eAAeF,EAAQE,EAAW,IAAKA,CAAU,CACzD,CACH,CAEA,SAASC,EAAaL,EAAaM,EAAYC,EAAa,CAC1D,OAAID,GAAYL,GAAkBD,EAAY,UAAWM,CAAU,EAC/DC,GAAaN,GAAkBD,EAAaO,CAAW,EACpDP,CACT,CAEA,SAASQ,EAAgBC,EAAKC,EAAKC,EAAO,CACxC,OAAID,KAAOD,EACT,OAAO,eAAeA,EAAKC,EAAK,CAC9B,MAAOC,EACP,WAAY,GACZ,aAAc,GACd,SAAU,EAChB,CAAK,EAEDF,EAAIC,CAAG,EAAIC,EAGNF,CACT,CAEA,SAASG,EAAUC,EAAUC,EAAY,CACvC,GAAI,OAAOA,GAAe,YAAcA,IAAe,KACrD,MAAM,IAAI,UAAU,oDAAoD,EAG1ED,EAAS,UAAY,OAAO,OAAOC,GAAcA,EAAW,UAAW,CACrE,YAAa,CACX,MAAOD,EACP,SAAU,GACV,aAAc,EACf,CACL,CAAG,EACGC,GAAYC,GAAgBF,EAAUC,CAAU,CACtD,CAEA,SAASE,EAAgBC,EAAG,CAC1B,OAAAD,EAAkB,OAAO,eAAiB,OAAO,eAAiB,SAAyBC,EAAG,CAC5F,OAAOA,EAAE,WAAa,OAAO,eAAeA,CAAC,CACjD,EACSD,EAAgBC,CAAC,CAC1B,CAEA,SAASF,GAAgBE,EAAGC,EAAG,CAC7B,OAAAH,GAAkB,OAAO,gBAAkB,SAAyBE,EAAGC,EAAG,CACxE,OAAAD,EAAE,UAAYC,EACPD,CACX,EAESF,GAAgBE,EAAGC,CAAC,CAC7B,CAEA,SAASC,IAA4B,CAEnC,GADI,OAAO,QAAY,KAAe,CAAC,QAAQ,WAC3C,QAAQ,UAAU,KAAM,MAAO,GACnC,GAAI,OAAO,OAAU,WAAY,MAAO,GAExC,GAAI,CACF,eAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,QAAS,CAAE,EAAE,UAAY,CAAE,CAAA,CAAC,EACtE,EACR,OAAQC,EAAP,CACA,MAAO,EACR,CACH,CAEA,SAASC,EAAuBC,EAAM,CACpC,GAAIA,IAAS,OACX,MAAM,IAAI,eAAe,2DAA2D,EAGtF,OAAOA,CACT,CAEA,SAASC,GAA2BD,EAAME,EAAM,CAC9C,OAAIA,IAAS,OAAOA,GAAS,UAAY,OAAOA,GAAS,YAChDA,EAGFH,EAAuBC,CAAI,CACpC,CAEA,SAASG,EAAaC,EAAS,CAC7B,IAAIC,EAA4BR,KAEhC,OAAO,UAAgC,CACrC,IAAIS,EAAQZ,EAAgBU,CAAO,EAC/BG,EAEJ,GAAIF,EAA2B,CAC7B,IAAIG,EAAYd,EAAgB,IAAI,EAAE,YAEtCa,EAAS,QAAQ,UAAUD,EAAO,UAAWE,CAAS,CAC5D,MACMD,EAASD,EAAM,MAAM,KAAM,SAAS,EAGtC,OAAOL,GAA2B,KAAMM,CAAM,CAClD,CACA,CAEA,SAASE,GAAeC,EAAQC,EAAU,CACxC,KAAO,CAAC,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAQ,IAC3DD,EAAShB,EAAgBgB,CAAM,EAC3BA,IAAW,OAAf,CAGF,OAAOA,CACT,CAEA,SAASE,EAAKhC,EAAQ+B,EAAUE,EAAU,CACxC,OAAI,OAAO,QAAY,KAAe,QAAQ,IAC5CD,EAAO,QAAQ,IAEfA,EAAO,SAAchC,EAAQ+B,EAAUE,EAAU,CAC/C,IAAIC,EAAOL,GAAe7B,EAAQ+B,CAAQ,EAE1C,GAAKG,EACL,KAAIC,EAAO,OAAO,yBAAyBD,EAAMH,CAAQ,EAEzD,OAAII,EAAK,IACAA,EAAK,IAAI,KAAKF,CAAQ,EAGxBE,EAAK,MAClB,EAGSH,EAAKhC,EAAQ+B,EAAUE,GAAYjC,CAAM,CAClD,CAEA,SAASoC,GAAeC,EAAKC,EAAG,CAC9B,OAAOC,GAAgBF,CAAG,GAAKG,GAAsBH,EAAKC,CAAC,GAAKG,GAA4BJ,EAAKC,CAAC,GAAKI,GAAgB,CACzH,CAEA,SAASC,GAAmBN,EAAK,CAC/B,OAAOO,GAAmBP,CAAG,GAAKQ,GAAiBR,CAAG,GAAKI,GAA4BJ,CAAG,GAAKS,IACjG,CAEA,SAASF,GAAmBP,EAAK,CAC/B,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOU,GAAkBV,CAAG,CACtD,CAEA,SAASE,GAAgBF,EAAK,CAC5B,GAAI,MAAM,QAAQA,CAAG,EAAG,OAAOA,CACjC,CAEA,SAASQ,GAAiBG,EAAM,CAC9B,GAAI,OAAO,OAAW,KAAeA,EAAK,OAAO,QAAQ,GAAK,MAAQA,EAAK,YAAY,GAAK,KAAM,OAAO,MAAM,KAAKA,CAAI,CAC1H,CAEA,SAASR,GAAsBH,EAAKC,EAAG,CACrC,IAAIW,EAAKZ,GAAO,KAAO,KAAO,OAAO,OAAW,KAAeA,EAAI,OAAO,QAAQ,GAAKA,EAAI,YAAY,EAEvG,GAAIY,GAAM,KACV,KAAIC,EAAO,CAAA,EACPC,EAAK,GACLC,EAAK,GAELC,EAAIC,EAER,GAAI,CACF,IAAKL,EAAKA,EAAG,KAAKZ,CAAG,EAAG,EAAEc,GAAME,EAAKJ,EAAG,KAAM,GAAE,QAC9CC,EAAK,KAAKG,EAAG,KAAK,EAEd,EAAAf,GAAKY,EAAK,SAAWZ,IAH4Ba,EAAK,GAG1D,CAEH,OAAQI,EAAP,CACAH,EAAK,GACLE,EAAKC,CACT,QAAY,CACR,GAAI,CACE,CAACJ,GAAMF,EAAG,QAAa,MAAMA,EAAG,QAC1C,QAAc,CACR,GAAIG,EAAI,MAAME,CACf,CACF,CAED,OAAOJ,EACT,CAEA,SAAST,GAA4B1B,EAAGyC,EAAQ,CAC9C,GAAKzC,EACL,IAAI,OAAOA,GAAM,SAAU,OAAOgC,GAAkBhC,EAAGyC,CAAM,EAC7D,IAAIC,EAAI,OAAO,UAAU,SAAS,KAAK1C,CAAC,EAAE,MAAM,EAAG,EAAE,EAErD,GADI0C,IAAM,UAAY1C,EAAE,cAAa0C,EAAI1C,EAAE,YAAY,MACnD0C,IAAM,OAASA,IAAM,MAAO,OAAO,MAAM,KAAK1C,CAAC,EACnD,GAAI0C,IAAM,aAAe,2CAA2C,KAAKA,CAAC,EAAG,OAAOV,GAAkBhC,EAAGyC,CAAM,EACjH,CAEA,SAAST,GAAkBV,EAAKqB,EAAK,EAC/BA,GAAO,MAAQA,EAAMrB,EAAI,UAAQqB,EAAMrB,EAAI,QAE/C,QAAS,EAAI,EAAGsB,EAAO,IAAI,MAAMD,CAAG,EAAG,EAAIA,EAAK,IAAKC,EAAK,CAAC,EAAItB,EAAI,CAAC,EAEpE,OAAOsB,CACT,CAEA,SAASb,IAAqB,CAC5B,MAAM,IAAI,UAAU;AAAA,mFAAsI,CAC5J,CAEA,SAASJ,IAAmB,CAC1B,MAAM,IAAI,UAAU;AAAA,mFAA2I,CACjK,CAEA,IAAIkB,GAAc,CAAA,EACdC,GAAoB,CAAA,EACpBC,GAAW,CAAA,EACXC,EAAkB,CACpB,IAAK,SAAaC,EAAIC,EAAMC,EAAQ,CAClC,IAAI,EAAIN,GAAYK,CAAI,EACxB,GAAK,EAKH,OAAO,IAAI,EAAED,EAAIE,CAAM,EAJvB,KAAM,CACJ,QAAS,mCAAqCD,EAAO,GAC7D,CAIG,EACD,MAAO,SAAeE,EAAK,CACzB,IAAIC,EAAUN,GAASK,EAAI,IAAI,EAC/B,OAAOJ,EAAgB,IAAII,EAAI,SAAUA,EAAI,KAAMC,EAAQ,UAAUD,CAAG,CAAC,CAC1E,EACD,QAAS,SAAiBE,EAAUC,EAAaC,EAAaC,EAAe,CAC3E,IAAIC,EAAIZ,GAAkBQ,EAAS,IAAI,EACvC,GAAII,GAAK,KACP,OAAOA,EAAEJ,EAAUC,EAAaC,EAAaC,CAAa,EAE1DE,EAAI,iEAAkEL,EAAS,IAAI,CAEtF,EACD,gBAAiB,SAAyBM,EAAK,CAC7Cb,GAASa,EAAI,IAAI,EAAIA,EACrBf,GAAYe,EAAI,IAAI,EAAIA,EAAI,IAC5Bd,GAAkBc,EAAI,IAAI,EAAIA,EAAI,OACnC,CACH,EAEIC,GAAyB,UAAY,CACvC,SAASA,EAAuBP,EAAUH,EAAQ,CAChDtE,EAAgB,KAAMgF,CAAsB,EAC5C,KAAK,SAAWP,EAChB/D,EAAgB,KAAM,SAAU,MAAM,EACtCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,gBAAiB,MAAM,EAC7CA,EAAgB,KAAM,SAAUuE,GAAc,CAAA,EAC9CvE,EAAgB,KAAM,UAAW,CAAA,CAAE,EACnCA,EAAgB,KAAM,WAAY,MAAM,EACxCA,EAAgB,KAAM,OAAQ,MAAM,EACpC4D,EAASA,GAAU,GACnB,KAAK,SAAWG,EAAS,SACrBA,EAAS,UACX,KAAK,QAAQ,KAAKA,EAAS,QAAQ,EAEjCH,EAAO,UACT,KAAK,QAAQ,KAAKA,EAAO,QAAQ,CAEpC,CACD,OAAA/D,EAAayE,EAAwB,CAAC,CACpC,IAAK,WACL,MAAO,SAAkBH,EAAG,CAC1B,KAAK,QAAQ,KAAKA,CAAC,EACnB,KAAK,SAAS,iBAAiB,KAAK,SAAUA,CAAC,CAChD,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAG,CAC7B,KAAK,QAAU,KAAK,QAAQ,OAAO,SAAUK,EAAI,CAC/C,OAAOA,IAAOL,CACtB,CAAO,EACD,KAAK,SAAS,oBAAoB,KAAK,SAAUA,CAAC,CACnD,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBH,EAAaC,EAAaC,EAAe,CAC/D,KAAK,cAAgBT,EAAgB,QAAQ,KAAMO,EAAaC,EAAaC,CAAa,EAC1F,KAAK,OAAO,KAAO,KAAK,EACxB,KAAK,OAAO,KAAO,KAAK,EACxB,KAAK,OAAO,KAAO,KAAK,EAAI,KAAK,EACjC,KAAK,OAAO,KAAO,KAAK,EAAI,KAAK,CAClC,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBO,EAAG,CAC5B,KAAK,SAAS,mBAAmB,KAAK,SAAUA,CAAC,CAClD,CACF,CAAA,CAAC,EACKH,CACT,EAAI,EAEAI,GAAc,SAAUC,EAAuB,CACjDvE,EAAUsE,EAAaC,CAAqB,EAC5C,IAAIC,EAAS3D,EAAayD,CAAW,EACrC,SAASA,EAAYX,EAAUH,EAAQ,CACrC,IAAIiB,EACJ,OAAAvF,EAAgB,KAAMoF,CAAW,EACjCG,EAAQD,EAAO,KAAK,KAAMb,EAAUH,CAAM,EAC1C5D,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,qBAAsB,MAAM,EAC3E7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQH,EAAY,IAAI,EACvEd,EAASA,GAAU,GACnBiB,EAAM,OAASjB,EAAO,QAAU,EAChCiB,EAAM,cAAgB,GAAMA,EAAM,OAClCA,EAAM,mBAAqBA,EAAM,OAAS,EACnCA,CACR,CACD,OAAOH,CACT,EAAEJ,EAAsB,EACxBtE,EAAgB0E,GAAa,OAAQ,KAAK,EAC1C,IAAII,GAAqB,CACvB,KAAMJ,GAAY,KAClB,IAAKA,GACL,QAAS,SAAiBhB,EAAIM,EAAaC,EAAaC,EAAe,CACrE,IAAIa,EAAIf,EAAY,KAAON,EAAG,OAC1BsB,EAAIhB,EAAY,KAAON,EAAG,OAC1BuB,EAAIvB,EAAG,OAAS,EAChBwB,EAAIxB,EAAG,OAAS,EACpB,GAAIQ,GAAiBA,EAAc,OAAQ,CACzC,IAAIiB,EAAKjB,EAAc,aAAe,EACtCa,GAAKI,EACLH,GAAKG,EACLF,GAAKE,EAAK,EACVD,GAAKC,EAAK,CACX,CACD,OAAAzB,EAAG,EAAIqB,EACPrB,EAAG,EAAIsB,EACPtB,EAAG,EAAIuB,EACPvB,EAAG,EAAIwB,EACA,CAACH,EAAGC,EAAGC,EAAGC,EAAGxB,EAAG,MAAM,CAC9B,EACD,UAAW,SAAmBA,EAAI,CAChC,MAAO,CACL,OAAQA,EAAG,MACjB,CACG,CACH,EAEI0B,GAAgB,SAAUT,EAAuB,CACnDvE,EAAUgF,EAAeT,CAAqB,EAC9C,IAAIC,EAAS3D,EAAamE,CAAa,EACvC,SAASA,EAAcrB,EAAUH,EAAQ,CACvC,IAAIiB,EACJ,OAAAvF,EAAgB,KAAM8F,CAAa,EACnCP,EAAQD,EAAO,KAAK,KAAMb,EAAUH,CAAM,EAC1C5D,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQO,EAAc,IAAI,EAClEP,CACR,CACD,OAAOO,CACT,EAAEd,EAAsB,EACxBtE,EAAgBoF,GAAe,OAAQ,OAAO,EAC9C,IAAIC,GAAuB,CACzB,KAAMD,GAAc,KACpB,IAAKA,GACL,QAAS,SAAiB1B,EAAIM,EAAaC,EAAaC,EAAe,CACrE,OAAAR,EAAG,EAAIM,EAAY,KACnBN,EAAG,EAAIM,EAAY,KACnBN,EAAG,EAAI,GACPA,EAAG,EAAI,EACA,CAACM,EAAY,KAAMA,EAAY,KAAM,GAAI,CAAC,CAClD,EACD,UAAW,SAAmBN,EAAI,CAChC,MAAO,EACR,CACH,EAEI4B,GAAoB,SAAUX,EAAuB,CACvDvE,EAAUkF,EAAmBX,CAAqB,EAClD,IAAIC,EAAS3D,EAAaqE,CAAiB,EAC3C,SAASA,EAAkBvB,EAAUH,EAAQ,CAC3C,IAAIiB,EACJ,OAAAvF,EAAgB,KAAMgG,CAAiB,EACvCT,EAAQD,EAAO,KAAK,KAAMb,EAAUH,CAAM,EAC1C5D,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQS,EAAkB,IAAI,EAC7E1B,EAASA,GAAU,GACnBiB,EAAM,MAAQjB,EAAO,OAAS,GAC9BiB,EAAM,OAASjB,EAAO,QAAU,GACzBiB,CACR,CACD,OAAAhF,EAAayF,EAAmB,KAAM,CAAC,CACrC,IAAK,aACL,MAAO,SAAoB5B,EAAI,CAC7B,MAAO,CACL,MAAOA,EAAG,MACV,OAAQA,EAAG,MACnB,CACK,CACF,CAAA,CAAC,EACK4B,CACT,EAAEhB,EAAsB,EACxBtE,EAAgBsF,GAAmB,OAAQ,WAAW,EACtD,IAAIC,GAA2B,CAC7B,KAAMD,GAAkB,KACxB,IAAKA,GACL,QAAS,SAAiB5B,EAAIM,EAAaC,EAAaC,EAAe,CACrE,IAAIsB,EAAQtB,EAAc,OAASR,EAAG,MAClC+B,EAASvB,EAAc,QAAUR,EAAG,OACpCqB,EAAIf,EAAY,KAAOwB,EAAQ,EAC/BR,EAAIhB,EAAY,KAAOyB,EAAS,EACpC,OAAA/B,EAAG,EAAIqB,EACPrB,EAAG,EAAIsB,EACPtB,EAAG,EAAI8B,EACP9B,EAAG,EAAI+B,EACA,CAACV,EAAGC,EAAGQ,EAAOC,CAAM,CAC5B,EACD,UAAW,SAAmB/B,EAAI,CAChC,MAAO,CACL,MAAOA,EAAG,MACV,OAAQA,EAAG,MACjB,CACG,CACH,EAEIgC,GAAoB,UAAY,CAClC,SAASA,EAAkBC,EAAY/B,EAAQ,CAC7CtE,EAAgB,KAAMoG,CAAiB,EACvC,KAAK,WAAaC,EAClB3F,EAAgB,KAAM,OAAQ,MAAM,EACpCA,EAAgB,KAAM,SAAU,EAAK,EACrCA,EAAgB,KAAM,OAAQ,MAAM,EACpCA,EAAgB,KAAM,aAAc,MAAM,EAC1CA,EAAgB,KAAM,aAAc,MAAM,EAC1CA,EAAgB,KAAM,UAAW,MAAM,EACvCA,EAAgB,KAAM,SAAU,MAAM,EACtCA,EAAgB,KAAM,MAAO,MAAM,EACnCA,EAAgB,KAAM,YAAa,MAAM,EACzCA,EAAgB,KAAM,YAAa,MAAM,EACzCA,EAAgB,KAAM,WAAY,CAAA,CAAE,EACpCA,EAAgB,KAAM,cAAe,CAAC,EACtCA,EAAgB,KAAM,qBAAsB,CAAA,CAAE,EAC9CA,EAAgB,KAAM,6BAA8B,CAAA,CAAE,EACtDA,EAAgB,KAAM,YAAa,IAAI,EACvCA,EAAgB,KAAM,cAAe,MAAM,EAC3CA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,IAAK,MAAM,EACjCA,EAAgB,KAAM,UAAW,MAAM,EACvCA,EAAgB,KAAM,SAAUuE,GAAc,CAAA,EAC9CvE,EAAgB,KAAM,WAAY,MAAM,EACxCA,EAAgB,KAAM,aAAc,MAAM,EAC1CA,EAAgB,KAAM,WAAY,MAAM,EACxC,KAAK,KAAO4D,EAAO,MAAQ,KAAK,gBAAe,EAC/C,KAAK,WAAa,MAAM,QAAQ,KAAK,IAAI,EAAI,KAAK,KAAK,CAAC,EAAI,KAAK,KACjE,KAAK,WAAa,MAAM,QAAQ,KAAK,IAAI,EAAI,KAAK,KAAK,CAAC,EAAI,KAAK,KACjE,KAAK,IAAMA,EAAO,KAAO,EACzB,KAAK,UAAY,MAAM,QAAQ,KAAK,GAAG,EAAI,KAAK,IAAI,CAAC,EAAI,KAAK,IAC9D,KAAK,UAAY,MAAM,QAAQ,KAAK,GAAG,EAAI,KAAK,IAAI,CAAC,EAAI,KAAK,IAC9D,KAAK,QAAU,KAAK,IAAI,KAAK,WAAY,KAAK,UAAU,EACxD,KAAK,SAAWA,EAAO,UAAY,GACnC,KAAK,WAAaA,EAAO,YAAc,EACxC,CACD,OAAA/D,EAAa6F,EAAmB,CAAC,CAC/B,IAAK,oBACL,MAAO,UAA6B,CAClC,MAAO,WACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,CAC5B,MAAO,oBACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBE,EAAGC,EAAU,CACvC,KAAK,SAAWD,EAChB,KAAK,OAASA,GAAK,MAAQ,CAACC,CAC7B,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,OAAO,KAAK,QACb,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBD,EAAG,CAChC,YAAK,SAAWA,EACT,EACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,UAAyB,CAC9B,KAAK,SAAW,KAChB,KAAK,OAAS,EACf,CACL,EAAK,CACD,IAAK,2BACL,MACA,SAAkCE,EAAGC,EAAIC,EAAI,CAC3C,MAAO,CACL,EAAGF,EAAE,EACL,EAAGA,EAAE,EACL,GAAIA,EAAE,GACN,GAAIA,EAAE,GACN,KAAMA,EAAE,KAAOC,EACf,KAAMD,EAAE,KAAOE,CACvB,CACK,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,CAC5B,KAAK,OAASzB,IACf,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6BQ,EAAGC,EAAG,CAcxC,QAbIiB,EAAM,CACR,EAAG,IACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,MAAO,KACP,kBAAmB,IAC3B,EACejE,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IAAK,CAC7C,IAAIe,EAAK,KAAK,SAASf,CAAC,EAAE,uBAAuB+C,EAAGC,CAAC,EACjDjC,EAAG,EAAIkD,EAAI,IACbA,EAAI,EAAIlD,EAAG,EACXkD,EAAI,EAAIlD,EAAG,EACXkD,EAAI,EAAIlD,EAAG,EACXkD,EAAI,EAAIlD,EAAG,EACXkD,EAAI,EAAI,KAAK,SAASjE,CAAC,EACvBiE,EAAI,GAAKlD,EAAG,GACZkD,EAAI,GAAKlD,EAAG,GACZkD,EAAI,GAAKlD,EAAG,GACZkD,EAAI,GAAKlD,EAAG,GACZkD,EAAI,MAAQjE,EACZiE,EAAI,kBAAoB,KAAK,mBAAmBjE,CAAC,EAAE,CAAC,EAAIe,EAAG,GAAK,KAAK,mBAAmBf,CAAC,EAAE,CAAC,EAAI,KAAK,mBAAmBA,CAAC,EAAE,CAAC,GAE/H,CACD,OAAOiE,CACR,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0BC,EAAIC,EAAIC,EAAIC,EAAI,CAE/C,QADIJ,EAAM,CAAA,EACDjE,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IACxCiE,EAAI,KAAK,MAAMA,EAAK,KAAK,SAASjE,CAAC,EAAE,iBAAiBkE,EAAIC,EAAIC,EAAIC,CAAE,CAAC,EAEvE,OAAOJ,CACR,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBlB,EAAGC,EAAGC,EAAGC,EAAG,CAE1C,QADIe,EAAM,CAAA,EACDjE,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IACxCiE,EAAI,KAAK,MAAMA,EAAK,KAAK,SAASjE,CAAC,EAAE,gBAAgB+C,EAAGC,EAAGC,EAAGC,CAAC,CAAC,EAElE,OAAOe,CACR,CACL,EAAK,CACD,IAAK,0BACL,MAAO,SAAiCK,EAAK,CAE3C,QADIL,EAAM,CAAA,EACDjE,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IACxCiE,EAAI,KAAK,MAAMA,EAAK,KAAK,SAASjE,CAAC,EAAE,wBAAwBsE,CAAG,CAAC,EAEnE,OAAOL,CACR,CACL,EAAK,CACD,IAAK,4BACL,MAAO,UAAqC,CAE1C,QADIM,EAAS,EACJvE,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IAAK,CAC7C,IAAIwE,EAAK,KAAK,SAASxE,CAAC,EAAE,UAAS,EACnC,KAAK,2BAA2BA,CAAC,EAAIwE,EAAK,KAAK,YAC/C,KAAK,mBAAmBxE,CAAC,EAAI,CAACuE,EAAQA,GAAUC,EAAK,KAAK,WAAW,CACtE,CACF,CACL,EAAK,CACD,IAAK,0BACL,MAAO,SAAiCC,EAAUC,EAAU,CAC1D,IAAIC,EAAK3E,EAAG4E,EAIZ,GAHIF,IACFD,EAAWA,EAAW,EAAIA,EAAW,KAAK,aAAe,KAAK,YAAcA,GAAY,KAAK,aAE3FA,IAAa,EACfE,EAAM,KAAK,SAAS,OAAS,EAC7BC,EAAsB,UACbH,IAAa,EACtBG,EAAsB,EACtBD,EAAM,UAEFF,GAAY,IAGd,IAFAE,EAAM,EACNC,EAAsB,EACjB5E,EAAI,KAAK,mBAAmB,OAAS,EAAGA,EAAI,GAAIA,IACnD,GAAI,KAAK,mBAAmBA,CAAC,EAAE,CAAC,GAAKyE,GAAY,KAAK,mBAAmBzE,CAAC,EAAE,CAAC,GAAKyE,EAAU,CAC1FE,EAAM3E,EACN4E,GAAuBH,EAAW,KAAK,mBAAmBzE,CAAC,EAAE,CAAC,GAAK,KAAK,2BAA2BA,CAAC,EACpG,KACD,MAKH,KAFA2E,EAAM,KAAK,mBAAmB,OAAS,EACvCC,EAAsB,EACjB5E,EAAI,EAAGA,EAAI,KAAK,mBAAmB,OAAQA,IAC9C,GAAI,KAAK,mBAAmBA,CAAC,EAAE,CAAC,GAAKyE,EAAU,CAC7CE,EAAM3E,EACN4E,GAAuBH,EAAW,KAAK,mBAAmBzE,CAAC,EAAE,CAAC,GAAK,KAAK,2BAA2BA,CAAC,EACpG,KACD,CAIP,MAAO,CACL,QAAS,KAAK,SAAS2E,CAAG,EAC1B,WAAYC,EACZ,MAAOD,CACf,CACK,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBE,EAAOjD,EAAQ,CACzC,GAAI,EAAAA,EAAO,KAAOA,EAAO,IAAMA,EAAO,KAAOA,EAAO,IAGpD,KAAIkD,EAAI,IAAID,EAAMjD,CAAM,EACxB,KAAK,SAAS,KAAKkD,CAAC,EACpB,KAAK,aAAeA,EAAE,YACtB,KAAK,aAAaA,CAAC,EACpB,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,KAAK,YAAc,EACnB,KAAK,SAAS,OAAS,EACvB,KAAK,mBAAmB,OAAS,EACjC,KAAK,2BAA2B,OAAS,CAC1C,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,WACb,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBlD,EAAQ,CACtC,KAAK,YAAcA,EAAO,YAC1B,IAAIsC,EAAKtC,EAAO,UAAU,KACtBwC,EAAKxC,EAAO,UAAU,KACtBuC,EAAKvC,EAAO,UAAU,KACtByC,EAAKzC,EAAO,UAAU,KACtBmD,EAAUC,GAAS,CACrB,EAAGd,EACH,EAAGC,CACX,EAAS,CACD,EAAGC,EACH,EAAGC,CACX,CAAO,EACGY,EAAQb,EAAKF,EACbgB,EAAQb,EAAKF,EACbgB,EAAK,CAACvD,EAAO,UAAU,GAAIA,EAAO,UAAU,EAAE,EAC9CwD,EAAK,CAACxD,EAAO,UAAU,GAAIA,EAAO,UAAU,EAAE,EAC9CmB,EAAIkC,EAAQb,EAAKF,EACjB,EAAIgB,EAAQb,EAAKF,EACjBlB,EAAI,KAAK,IAAImB,EAAKF,CAAE,EACpBhB,EAAI,KAAK,IAAImB,EAAKF,CAAE,EACpBkB,EAAsBF,EAAG,CAAC,IAAM,GAAKA,EAAG,CAAC,IAAM,EAC/CG,EAAsBF,EAAG,CAAC,IAAM,GAAKA,EAAG,CAAC,IAAM,EACnD,GAAIC,GAAuBC,EAAqB,CAC9C,IAAIC,EAAQtC,EAAIC,EAAI,EAAI,EACpBsC,EAAS,CAAC,EAAG,CAAC,EAAED,CAAK,EACrBE,EAAKF,IAAU,EAAIrB,EAAKC,EACxBuB,EAAKH,IAAU,EAAInB,EAAKC,EACxBgB,IACFF,EAAGI,CAAK,EAAIE,EAAKC,EAAK,GAAK,EAC3BP,EAAGK,CAAM,EAAI,GAEXF,IACFF,EAAGG,CAAK,EAAIE,EAAKC,EAAK,EAAI,GAC1BN,EAAGI,CAAM,EAAI,EAEhB,CACD,IAAIG,EAAKV,EAAQhC,EAAI,KAAK,UAAYkC,EAAG,CAAC,EAAI,KAAK,UAAYA,EAAG,CAAC,EAC/DS,EAAKV,EAAQhC,EAAI,KAAK,UAAYiC,EAAG,CAAC,EAAI,KAAK,UAAYA,EAAG,CAAC,EAC/DU,EAAKZ,EAAQ,KAAK,UAAYG,EAAG,CAAC,EAAInC,EAAI,KAAK,UAAYmC,EAAG,CAAC,EAC/DU,EAAKZ,EAAQ,KAAK,UAAYE,EAAG,CAAC,EAAIlC,EAAI,KAAK,UAAYkC,EAAG,CAAC,EAC/DW,EAAWZ,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EACvC/F,EAAS,CACX,GAAIsG,EACJ,GAAIC,EACJ,GAAIC,EACJ,GAAIC,EACJ,MAAO,KAAK,IAAID,EAAKF,CAAE,EACvB,MAAO,KAAK,IAAIG,EAAKF,CAAE,EACvB,IAAKD,EAAKE,GAAM,EAChB,IAAKD,EAAKE,GAAM,EAChB,GAAIX,EACJ,GAAIC,EACJ,EAAGrC,EACH,EACA,EAAGE,EACH,EAAGC,EACH,QAAS6B,EACT,WAAYY,EAAKR,EAAG,CAAC,EAAI,KAAK,WAC9B,WAAYS,EAAKT,EAAG,CAAC,EAAI,KAAK,WAC9B,SAAUU,EAAKT,EAAG,CAAC,EAAI,KAAK,WAC5B,SAAUU,EAAKV,EAAG,CAAC,EAAI,KAAK,WAC5B,yBAA0B,KAAK,IAAIO,EAAKE,CAAE,EAAI,KAAK,WAAa,KAAK,WACrE,yBAA0B,KAAK,IAAID,EAAKE,CAAE,EAAI,KAAK,WAAa,KAAK,WACrE,SAAUC,IAAa,GACvB,cAAeA,IAAa,EAC5B,WAAYA,IAAa,EACzB,WAAYZ,EAAG,CAAC,IAAM,EAAI,IAAM,IAChC,OAAQ,CAACpC,EAAG,EAAGE,EAAGC,EAAGyC,EAAIC,EAAIC,EAAIC,CAAE,EACnC,MAAO,CAAC,KAAK,WAAY,KAAK,UAAU,CAChD,EACM,OAAAzG,EAAO,kBAAoBA,EAAO,SAAW,WAAaA,EAAO,WAAa,aAAe,gBACtFA,CACR,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsB0F,EAAS,CACpC,IAAIiB,EAAYjB,EAAQ,QACxB,KAAK,OAAO,KAAO,KAAK,IAAI,KAAK,OAAO,KAAMiB,EAAU,IAAI,EAC5D,KAAK,OAAO,KAAO,KAAK,IAAI,KAAK,OAAO,KAAMA,EAAU,IAAI,EAC5D,KAAK,OAAO,KAAO,KAAK,IAAI,KAAK,OAAO,KAAMA,EAAU,IAAI,EAC5D,KAAK,OAAO,KAAO,KAAK,IAAI,KAAK,OAAO,KAAMA,EAAU,IAAI,CAC7D,CACL,EAAK,CACD,IAAK,wBACL,MAAO,UAAiC,CACtC5D,EAAI,WAAW,EACf,QAAS,EAAI,EAAG,EAAI,KAAK,SAAS,OAAQ,IACxCA,EAAI,KAAK,SAAS,CAAC,EAAE,KAAM,GAAK,KAAK,SAAS,CAAC,EAAE,UAAS,EAAI,GAAK,KAAK,mBAAmB,CAAC,CAAC,CAEhG,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBqC,EAAUC,EAAU,CAC9C,IAAIuB,EAAM,KAAK,wBAAwBxB,EAAUC,CAAQ,EACzD,OAAOuB,EAAI,SAAWA,EAAI,QAAQ,YAAYA,EAAI,WAAY,EAAK,GAAK,CACtE,EAAG,EACH,EAAG,CACX,CACK,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBxB,EAAUC,EAAU,CAClD,IAAIuB,EAAM,KAAK,wBAAwBxB,EAAUC,CAAQ,EACzD,OAAOuB,EAAI,SAAWA,EAAI,QAAQ,gBAAgBA,EAAI,WAAY,EAAK,GAAK,CAC7E,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4BxB,EAAUyB,EAAUxB,EAAU,CAC/D,IAAIuB,EAAM,KAAK,wBAAwBxB,EAAUC,CAAQ,EACzD,OAAOuB,EAAI,SAAWA,EAAI,QAAQ,mBAAmBA,EAAI,WAAYC,EAAU,EAAK,GAAK,CACvF,EAAG,EACH,EAAG,CACX,CACK,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBtE,EAAQ,CAC9B,KAAK,UAAY,KAAK,gBAAgBA,CAAM,EAC5C,KAAK,eAAc,EACnB,KAAK,SAAS,KAAK,UAAWA,CAAM,EACpC,KAAK,EAAI,KAAK,UAAU,OAAO,CAAC,EAChC,KAAK,EAAI,KAAK,UAAU,OAAO,CAAC,EAChC,KAAK,EAAI,KAAK,UAAU,OAAO,CAAC,EAChC,KAAK,EAAI,KAAK,UAAU,OAAO,CAAC,EAChC,KAAK,QAAU,KAAK,UAAU,QAC9B,KAAK,0BAAyB,CAC/B,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8B+C,EAAK1C,EAAa,CAAE,CAC1D,CAAA,CAAC,EACKyB,CACT,EAAI,EAEAyC,GAAkB,SAAUC,EAAkB,CAChDhI,EAAU+H,EAAiBC,CAAgB,EAC3C,IAAIxD,EAAS3D,EAAakH,CAAe,EACzC,SAASA,EAAgBvE,EAAQ,CAC/B,IAAIiB,EACJ,OAAAvF,EAAgB,KAAM6I,CAAe,EACrCtD,EAAQD,EAAO,KAAK,KAAMhB,CAAM,EAChC5D,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,IAAK,MAAM,EAC1D7E,EAAgBa,EAAuBgE,CAAK,EAAG,KAAM,MAAM,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQsD,EAAgB,WAAW,EAClFtD,EAAM,gBAAgB,CACpB,GAAIjB,EAAO,GACX,GAAIA,EAAO,GACX,GAAIA,EAAO,GACX,GAAIA,EAAO,EACjB,CAAK,EACMiB,CACR,CACD,OAAAhF,EAAasI,EAAiB,CAAC,CAC7B,IAAK,UACL,MAAO,SAAiBE,EAAgB,CACtC,OAAQA,EAAiB,KAAO,KAAK,GAAK,IAAM,KAAK,GAAK,IAAM,IAAM,KAAO,KAAK,GAAK,IAAM,KAAK,EACnG,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,KAAK,OAAS,KAAK,KAAK,KAAK,IAAI,KAAK,GAAK,KAAK,GAAI,CAAC,EAAI,KAAK,IAAI,KAAK,GAAK,KAAK,GAAI,CAAC,CAAC,EACvF,KAAK,EAAIC,GAAS,CAChB,EAAG,KAAK,GACR,EAAG,KAAK,EAChB,EAAS,CACD,EAAG,KAAK,GACR,EAAG,KAAK,EAChB,CAAO,EACD,KAAK,GAAK,GAAK,KAAK,EACpB,KAAK,QAAU,CACb,KAAM,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,EAC/B,KAAM,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,EAC/B,KAAM,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,EAC/B,KAAM,KAAK,IAAI,KAAK,GAAI,KAAK,EAAE,CACvC,CACK,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,MACb,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,CAC5B,OAAO,KAAK,CACb,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBC,EAAQ,CACtC,KAAK,GAAKA,EAAO,GACjB,KAAK,GAAKA,EAAO,GACjB,KAAK,GAAKA,EAAO,GACjB,KAAK,GAAKA,EAAO,GACjB,KAAK,QAAO,CACb,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqB9B,EAAUC,EAAU,CAC9C,GAAID,IAAa,GAAK,CAACC,EACrB,MAAO,CACL,EAAG,KAAK,GACR,EAAG,KAAK,EAClB,EACa,GAAID,IAAa,GAAK,CAACC,EAC5B,MAAO,CACL,EAAG,KAAK,GACR,EAAG,KAAK,EAClB,EAEQ,IAAI8B,EAAI9B,EAAWD,EAAW,EAAIA,EAAW,KAAK,OAASA,EAAWA,EAAW,KAAK,OACtF,OAAOgC,GAAY,CACjB,EAAG,KAAK,GACR,EAAG,KAAK,EAClB,EAAW,CACD,EAAG,KAAK,GACR,EAAG,KAAK,EACT,EAAED,CAAC,CAEP,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB/B,EAAUC,EAAU,CAClD,OAAO,KAAK,CACb,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4BD,EAAUyB,EAAUxB,EAAU,CAC/D,IAAIhG,EAAI,KAAK,YAAY+F,EAAUC,CAAQ,EACvCgC,EAAeR,GAAY,EAAI,CACjC,EAAG,KAAK,GACR,EAAG,KAAK,EAChB,EAAU,CACF,EAAG,KAAK,GACR,EAAG,KAAK,EAChB,EACM,OAAIA,GAAY,GAAK,KAAK,IAAIA,CAAQ,EAAI,IACxCA,GAAY,IAEPO,GAAY/H,EAAGgI,EAAcR,CAAQ,CAC7C,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgBpC,EAAG6C,EAAGxE,EAAG,CAC9B,OAAOA,GAAK,KAAK,IAAI2B,EAAG6C,CAAC,GAAKxE,GAAK,KAAK,IAAI2B,EAAG6C,CAAC,CACjD,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiB7C,EAAG6C,EAAGxE,EAAG,CAC/B,OAAO,KAAK,IAAIA,EAAI2B,CAAC,EAAI,KAAK,IAAI3B,EAAIwE,CAAC,EAAI7C,EAAI6C,CAChD,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgC5D,EAAGC,EAAG,CAC3C,IAAIiB,EAAM,CACR,EAAG,IACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,GAAI,KAAK,GACT,GAAI,KAAK,GACT,GAAI,KAAK,GACT,GAAI,KAAK,EACjB,EACM,GAAI,KAAK,IAAM,EACbA,EAAI,EAAI,KAAK,GACbA,EAAI,EAAI,KAAK,OAAO,KAAK,GAAI,KAAK,GAAIlB,CAAC,EAAIA,EAAI,KAAK,QAAQ,KAAK,GAAI,KAAK,GAAIA,CAAC,UACtE,KAAK,IAAM,KAAY,KAAK,IAAM,KAC3CkB,EAAI,EAAI,KAAK,GACbA,EAAI,EAAI,KAAK,OAAO,KAAK,GAAI,KAAK,GAAIjB,CAAC,EAAIA,EAAI,KAAK,QAAQ,KAAK,GAAI,KAAK,GAAIA,CAAC,MAC1E,CACL,IAAI2D,EAAI,KAAK,GAAK,KAAK,EAAI,KAAK,GAC5BC,EAAK5D,EAAI,KAAK,GAAKD,EACvB8D,GAAOD,EAAKD,IAAM,KAAK,EAAI,KAAK,IAC5BG,EAAM,KAAK,EAAID,EAAMF,EACzB1C,EAAI,EAAI,KAAK,OAAO,KAAK,GAAI,KAAK,GAAI4C,CAAG,EAAIA,EAAM,KAAK,QAAQ,KAAK,GAAI,KAAK,GAAIA,CAAG,EACrF5C,EAAI,EAAI,KAAK,OAAO,KAAK,GAAI,KAAK,GAAI6C,CAAG,EAAIA,EAAM,KAAK,QAAQ,KAAK,GAAI,KAAK,GAAIA,CAAG,CACtF,CACD,IAAIC,EAAoBC,GAAW,CACjC,EAAG/C,EAAI,EACP,EAAGA,EAAI,CACf,EAAS,CACD,EAAG,KAAK,GACR,EAAG,KAAK,EAChB,CAAO,EACD,OAAAA,EAAI,EAAI+C,GAAW,CACjB,EAAGjE,EACH,EAAGC,CACJ,EAAEiB,CAAG,EACNA,EAAI,EAAI8C,EAAoB,OACrB9C,CACR,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BgD,EAAGC,EAAIC,EAAI,CAC3C,OAAOA,EAAKD,EAAKA,GAAMD,GAAKA,GAAKE,EAAKD,GAAMD,GAAKA,GAAKE,CACvD,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0BN,EAAKC,EAAKM,EAAKC,EAAK,CACnD,IAAIC,EAAK,KAAK,IAAIhB,GAAS,CACzB,EAAGO,EACH,EAAGC,CACX,EAAS,CACD,EAAGM,EACH,EAAGC,CACX,CAAO,CAAC,EACEE,EAAK,KAAK,IAAI,KAAK,CAAC,EACpBZ,EAAIY,IAAO,IAAW,KAAK,GAAK,KAAK,GAAKA,EAAK,KAAK,GACpDtD,EAAM,CAAE,EACR2C,EAAKU,IAAO,IAAWT,EAAMC,EAAMQ,EAAKT,EAC5C,GAAIS,IAAOC,EACT,GAAID,IAAO,KAAYC,IAAO,EACxB,KAAK,kBAAkBV,EAAK,KAAK,GAAI,KAAK,EAAE,GAAK,KAAK,kBAAkB,KAAK,GAAIC,EAAKO,CAAG,GAC3FpD,EAAI,KAAK,CACP,EAAG4C,EACH,EAAG,KAAK,EACtB,CAAa,UAEMS,IAAO,GAAKC,IAAO,IACxB,KAAK,kBAAkBT,EAAK,KAAK,GAAI,KAAK,EAAE,GAAK,KAAK,kBAAkB,KAAK,GAAID,EAAKO,CAAG,GAC3FnD,EAAI,KAAK,CACP,EAAG,KAAK,GACR,EAAG6C,CACjB,CAAa,MAEE,CACL,IAAIU,EAAGC,EACHH,IAAO,KACTE,EAAIX,EACA,KAAK,kBAAkBW,EAAG,KAAK,GAAI,KAAK,EAAE,IAC5CC,EAAIF,EAAKV,EAAMF,EACX,KAAK,kBAAkBc,EAAGX,EAAKO,CAAG,GACpCpD,EAAI,KAAK,CACP,EAAGuD,EACH,EAAGC,CACrB,CAAiB,IAGIH,IAAO,GAChBG,EAAIX,EACA,KAAK,kBAAkBW,EAAG,KAAK,GAAI,KAAK,EAAE,IAC5CD,GAAKV,EAAMH,GAAKY,EACZ,KAAK,kBAAkBC,EAAGX,EAAKO,CAAG,GACpCnD,EAAI,KAAK,CACP,EAAGuD,EACH,EAAGC,CACrB,CAAiB,KAILD,GAAKZ,EAAKD,IAAMY,EAAKD,GACrBG,EAAIF,EAAKC,EAAIb,EACT,KAAK,kBAAkBa,EAAG,KAAK,GAAI,KAAK,EAAE,GAAK,KAAK,kBAAkBC,EAAG,KAAK,GAAI,KAAK,EAAE,GAC3FxD,EAAI,KAAK,CACP,EAAGuD,EACH,EAAGC,CACnB,CAAe,EAGN,CAEH,OAAOxD,CACR,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBlB,EAAGC,EAAGC,EAAGC,EAAG,CAC1C,IAAIY,EAAI,CAAA,EACR,OAAAA,EAAE,KAAK,MAAMA,EAAG,KAAK,iBAAiBf,EAAGC,EAAGD,EAAIE,EAAGD,CAAC,CAAC,EACrDc,EAAE,KAAK,MAAMA,EAAG,KAAK,iBAAiBf,EAAIE,EAAGD,EAAGD,EAAIE,EAAGD,EAAIE,CAAC,CAAC,EAC7DY,EAAE,KAAK,MAAMA,EAAG,KAAK,iBAAiBf,EAAIE,EAAGD,EAAIE,EAAGH,EAAGC,EAAIE,CAAC,CAAC,EAC7DY,EAAE,KAAK,MAAMA,EAAG,KAAK,iBAAiBf,EAAGC,EAAIE,EAAGH,EAAGC,CAAC,CAAC,EAC9Cc,CACR,CACF,CAAA,CAAC,EACKqC,CACT,EAAEuB,EAAe,EACjB1J,EAAgBmI,GAAiB,cAAe,UAAU,EAE1D,IAAIwB,GAAoB,SAAUC,EAAoB,CACpDxJ,EAAUuJ,EAAmBC,CAAkB,EAC/C,IAAIhF,EAAS3D,EAAa0I,CAAiB,EAC3C,SAASA,GAAoB,CAC3B,IAAI9E,EACJvF,EAAgB,KAAMqK,CAAiB,EACvC,QAASE,EAAO,UAAU,OAAQC,EAAO,IAAI,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC/ED,EAAKC,CAAI,EAAI,UAAUA,CAAI,EAE7B,OAAAlF,EAAQD,EAAO,KAAK,MAAMA,EAAQ,CAAC,IAAI,EAAE,OAAOkF,CAAI,CAAC,EACrD9J,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ8E,EAAkB,IAAI,EACtE9E,CACR,CACD,OAAAhF,EAAa8J,EAAmB,CAAC,CAC/B,IAAK,kBACL,MAAO,UAA2B,CAChC,MAAO,CAAC,EAAG,CAAC,CACb,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBK,EAAWtJ,EAAG,CACrC,KAAK,YAAYyH,GAAiB,CAChC,GAAI6B,EAAU,GACd,GAAIA,EAAU,GACd,GAAIA,EAAU,WACd,GAAIA,EAAU,UACtB,CAAO,EACD,KAAK,YAAY7B,GAAiB,CAChC,GAAI6B,EAAU,WACd,GAAIA,EAAU,WACd,GAAIA,EAAU,SACd,GAAIA,EAAU,QACtB,CAAO,EACD,KAAK,YAAY7B,GAAiB,CAChC,GAAI6B,EAAU,SACd,GAAIA,EAAU,SACd,GAAIA,EAAU,GACd,GAAIA,EAAU,EACtB,CAAO,EACD,KAAK,SAAW,CACd,OAAQtJ,EAAE,UACV,OAAQA,EAAE,SAClB,CACK,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BkF,EAAGG,EAAIC,EAAI,CAC3C,MAAO,CACL,OAAQ,KAAK,yBAAyBJ,EAAE,OAAQG,EAAIC,CAAE,EACtD,OAAQ,KAAK,yBAAyBJ,EAAE,OAAQG,EAAIC,CAAE,CAC9D,CACK,CACF,CAAA,CAAC,EACK2D,CACT,EAAEjE,EAAiB,EACnB1F,EAAgB2J,GAAmB,OAAQ,UAAU,EAErD,IAAIM,GAAe,CAAA,EACfC,GAAa,CACf,IAAK,SAAavE,EAAYhC,EAAMC,EAAQ,CAC1C,IAAIO,EAAI8F,GAAatG,CAAI,EACzB,GAAKQ,EAKH,OAAO,IAAIA,EAAEwB,EAAY/B,CAAM,EAJ/B,KAAM,CACJ,QAAS,oCAAsCD,EAAO,GAC9D,CAIG,EACD,SAAU,SAAkBA,EAAMwG,EAAM,CACtCF,GAAatG,CAAI,EAAIwG,CACtB,CACH,EAEA,SAASC,IAAM,CACb,QAASP,EAAO,UAAU,OAAQQ,EAAY,IAAI,MAAMR,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IACpFM,EAAUN,CAAI,EAAI,UAAUA,CAAI,EAElC,OAAOM,EAAU,IAAI,SAAUC,EAAI,CACjC,MAAO,IAAMA,CACjB,CAAG,EAAE,KAAK,GAAG,CACb,CACA,SAASC,IAAY,CACnB,QAASC,EAAQ,UAAU,OAAQH,EAAY,IAAI,MAAMG,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACzFJ,EAAUI,CAAK,EAAI,UAAUA,CAAK,EAEpC,OAAOJ,EAAU,KAAK,GAAG,CAC3B,CACA,SAASK,IAAM,CACb,QAASC,EAAQ,UAAU,OAAQC,EAAU,IAAI,MAAMD,CAAK,EAAGE,EAAQ,EAAGA,EAAQF,EAAOE,IACvFD,EAAQC,CAAK,EAAI,UAAUA,CAAK,EAElC,OAAOD,EAAQ,IAAI,SAAUE,EAAI,CAC/B,MAAO,IAAMA,EAAK,GACtB,CAAG,EAAE,KAAK,GAAG,CACb,CACG,IAACC,GAAS,SACTC,GAAS,SACTC,GAAQ,QACRC,GAAO,OAGPC,GAAW,WACXC,GAAQ,QACRC,GAAS,SACTC,GAAkB,iBAClBC,GAAoB,mBACpBC,GAA0B,yBAC1BC,GAAqB,WACrBC,GAAkB,iBAClBC,GAAyBD,GAAkB,IAC3CE,GAAkB,iBAClBC,GAAqB,mBACrBC,GAAkB,gBAClBC,GAA0B,wBAC1BC,GAAkB,gBAClBC,GAAiB,eACjBC,GAA2B,yBAC3BC,GAAsB,oBACtBC,GAA0B,wBAC1BC,GAA8B,4BAC9BC,GAAgC,8BAChCC,GAA+B,sBAC/BC,GAAwB,sBACxBC,GAAuB,qBACvBC,GAAgB,cAChBC,GAAuB,iBACvBC,GAAmB,aACnBC,GAA4B,sBAC5BC,GAA4B,oBAC5BC,GAAyB,kBACzBC,GAAyB,mBACzBC,GAA0B,oBAC1BC,GAAuC,iCACvCC,GAAqC,+BACrCC,GAAuB,iBACvBC,GAAoB,cACpBC,GAAuB,iBACvBC,GAAqB,eACrBC,GAA2B,qBAC3BC,GAA6B,uBAC7BC,GAAsB,gBACtBC,GAAwB,iBACxBC,GAA2B,qBAC3BC,GAA6B,uBAC7BC,GAAyB,mBACzBC,GAAa,OACbC,GAAoB,kBACpBC,GAAwB,aACxBC,GAAwB,aACxBC,GAA0B,eAC1BC,GAAgC,oBAChCC,GAA2B3D,GAAIa,EAAiB,EAChD+C,GAA6B,uDAC7BC,GAA6B,uDAC7BC,GAA8B,qDAC9BC,GAA8B,qDAC9BC,GAA0B,qBAE1BC,GAAkC,oBAkBlCC,GAA0B,aAE1BC,GAAoB,QAKxB,SAASC,GAAyBC,EAAM,CACtC,IAAI,EAAI,KACR,OAAIC,EAASD,CAAI,EACf,EAAI,CACF,KAAMA,EACN,QAAS,CAAE,CACjB,EAEI,EAAIA,EAEN,EAAE,QAAQ,GAAK,EAAE,QAAQ,IAAME,IACxB,CACT,CACG,IAACC,GAAU,SAAUC,EAAiB,CACvC/O,EAAU8O,EAASC,CAAe,EAClC,IAAIvK,EAAS3D,EAAaiO,CAAO,EACjC,SAASA,EAAQ3P,EAAU6P,EAAW1O,EAAG,CACvC,IAAImE,EACJvF,EAAgB,KAAM4P,CAAO,EAC7BrK,EAAQD,EAAO,KAAK,IAAI,EACxBC,EAAM,SAAWtF,EACjBsF,EAAM,UAAYuK,EAClBpP,EAAgBa,EAAuBgE,CAAK,EAAG,KAAM,MAAM,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ,MAAM,EAC7D7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,EAAI,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnEnE,EAAIA,GAAK,GACTmE,EAAM,GAAKnE,EAAE,IAAMuO,EAAI,EACvBpK,EAAM,SAAWnE,EAAE,UAAY,GAC/BmE,EAAM,YAAYnE,EAAE,QAAQ,EAC5BmE,EAAM,OAASnE,EAAE,QAAU,CAAA,EAC3BmE,EAAM,WAAanE,EAAE,YAAc,CAAA,EACnC,QAAS2O,KAAUxK,EAAM,OACvBA,EAAM,KAAKwK,EAAQxK,EAAM,OAAOwK,CAAM,CAAC,EAEzC,OAAOxK,CACR,CACD,OAAAhF,EAAaqP,EAAS,CAAC,CACrB,IAAK,cACL,MAAO,SAAqB1G,EAAG,CAC7B,IAAI8G,EAAc,KAAK,UAAY,KAAO,GAAM,KAAK,SACrD,GAAI9G,GAAK,KACP,GAAI,CACF,IAAI+G,EAAK,OAAO/G,GAAM,SAAW,WAAWA,CAAC,EAAIA,EAC5C,MAAM+G,CAAE,IACXD,EAAcC,EAEjB,OAAQ3O,EAAP,CACD,CAEH,KAAK,SAAW0O,CACjB,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBE,EAAOrP,EAAOsP,EAAe,CAC3D,MAAO,EACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBhL,EAAG,CAC5B,KAAK,QAAUA,EACf,KAAK,SAAS,kBAAkB,KAAMA,CAAC,CACxC,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,OACb,CACF,CAAA,CAAC,EACKyK,CACT,EAAEQ,EAAc,EAEZC,GAAa,CAAA,EACbC,GAAiB,CACnB,IAAK,SAAarQ,EAAUoE,EAAMyL,EAAWxL,EAAQ,CACnD,IAAIO,EAAIwL,GAAWhM,CAAI,EACvB,GAAKQ,EAKH,OAAO,IAAIA,EAAE5E,EAAU6P,EAAWxL,CAAM,EAJxC,KAAM,CACJ,QAAS,kCAAoCD,EAAO,GAC5D,CAIG,EACD,SAAU,SAAkBA,EAAMkM,EAAS,CACzCF,GAAWhM,CAAI,EAAIkM,CACpB,CACH,EAEIC,GAAe,SAAUC,EAAU,CACrC3P,EAAU0P,EAAcC,CAAQ,EAChC,IAAInL,EAAS3D,EAAa6O,CAAY,EACtC,SAASA,EAAavQ,EAAU6P,EAAW1O,EAAG,CAC5C,IAAImE,EACJ,OAAAvF,EAAgB,KAAMwQ,CAAY,EAClCjL,EAAQD,EAAO,KAAK,KAAMrF,EAAU6P,EAAW1O,CAAC,EAChDmE,EAAM,SAAWtF,EACjBsF,EAAM,UAAYuK,EAClBpP,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQiL,EAAa,IAAI,EACxE9P,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,MAAM,EACzEnE,EAAIA,GAAK,CACP,MAAO,EACb,EACImE,EAAM,SAASnE,EAAE,KAAK,EACfmE,CACR,CACD,OAAAhF,EAAaiQ,EAAc,CAAC,CAC1B,IAAK,WACL,MAAO,UAAoB,CACzB,OAAIE,GAAW,KAAK,KAAK,EAChB,KAAK,MAAM,IAAI,EAEf,KAAK,SAEf,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBxH,EAAG,CAC1B,KAAK,MAAQA,EACb,KAAK,UAAY,KACjB,KAAK,SAAS,YAAY,IAAI,CAC/B,CACL,EAAK,CACD,IAAK,gBACL,MAAO,UAAyB,CAC9B,MAAO,CACL,EAAG,EACH,EAAG,CACX,CACK,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoByH,EAAG,CACxBA,EAAE,OAAS,MACb,KAAK,SAASA,EAAE,KAAK,EAEnBA,EAAE,UAAY,OAChB,KAAK,YAAYA,EAAE,QAAQ,EAC3B,KAAK,SAAS,YAAY,IAAI,EAEjC,CACF,CAAA,CAAC,EACKH,CACT,EAAEZ,EAAO,EACTlP,EAAgB8P,GAAc,OAAQ,OAAO,EAC7C,SAASI,GAAezP,EAAG,CACzB,OAAOA,EAAE,OAASqP,GAAa,IACjC,CACAF,GAAe,SAASE,GAAa,KAAMA,EAAY,EAEvD,SAASK,GAAWC,EAAG,CACrB,OAAOA,GAAK,KAAO,KAAOA,EAAE,MAAM,GAAG,EAAE,OAAO,SAAUA,EAAG,CACzD,OAAOA,GAAK,MAAQA,EAAE,OAAS,CACnC,CAAG,CACH,CACA,SAASC,GAASC,EAAKrQ,EAAKsQ,EAAQ,CAClC,QAASvO,KAAK/B,EACZqQ,EAAItO,CAAC,EAAIuO,CAEb,CACA,IAAIC,GAAY,YACZC,GAA0B,WAC1BC,GAAY,WACZC,GAAmB,YACnBC,GAAS,SACTC,GAAU,UACVC,GAA0B,UAC1BC,GAA6B,oBAC7BC,GAAoB,UACpBC,GAAqB,gBACrBC,GAAa,MACbC,GAAgB,SACpB,SAASC,GAAYhC,EAAWxL,EAAQ,CACtC,GAAIwL,EAAU,eAAgB,CAC5B,IAAIiC,EAAKjC,EAAU,kBAAmB,EAClCkB,EAAM,CAAA,EACNgB,EAAUlC,EAAU,iBACpB3O,EAAI8Q,EAAO,CAAE,EAAED,CAAO,EAC1BjB,GAASC,EAAKgB,EAASX,EAAgB,EACvCvB,EAAU,OAAO,QAAQ,SAAUoC,EAAK,CACtC,GAAIA,IAAQb,GAAkB,CAC5B,IAAIc,EAAKrC,EAAU,SAAS,QAAQoC,EAAKH,CAAE,EAC3C,GAAII,GAAM,KAAM,CACd,IAAIC,EAAY,IAAI,IAAI,CAAClB,GAAWI,GAAQC,EAAO,CAAC,EACpD,GAAIY,EAAG,gBAAkBhB,GACvB,QAASkB,KAAKF,EACZC,EAAU,IAAIC,CAAC,EAGnBlR,EAAImR,GAAMnR,EAAGgR,EAAI,CAACf,EAAS,EAAGmB,GAAWH,CAAS,CAAC,EACnDrB,GAASC,EAAKmB,EAAID,CAAG,CACtB,CACF,CACP,CAAK,EACG5N,IACFnD,EAAIqR,GAASrR,EAAGmD,EAAQ,GAAG,GAE7BwL,EAAU,UAAU3O,EAAG6P,CAAG,CAC3B,CACH,CACA,SAASyB,GAAqB3C,EAAWmB,EAAQ,CAC/C,IAAIyB,EAAO5C,EAAU,SAAS,QAAQmB,EAAQnB,EAAU,kBAAiB,CAAE,EACvE4C,GAAQ,MAAQA,EAAK,UACvB5C,EAAU,YAAY4C,EAAK,QAAQ,CAEvC,CACA,SAASC,GAAkB7C,EAAW,CACpC,GAAIA,EAAU,YAAcA,EAAU,gBAAiB,CACrD,IAAI8C,EAAmB,CAAA,EACvBX,EAAOW,EAAkB9C,EAAU,UAAU,EAC7CmC,EAAOW,EAAkB9C,EAAU,eAAe,EAClDA,EAAU,gBAAkB8C,CAC7B,CACH,CAGA,SAASC,GAAkB/C,EAAWxL,EAAQ,CAC5C,IAAIwO,EAAU,CACZ,SAAUxO,EAAO,SACjB,GAAIkN,GACJ,UAAW1B,CACZ,EACGiD,EAAed,EAAOa,EAASxO,CAAM,EACzC,OAAO,IAAIkM,GAAaV,EAAU,SAAUA,EAAWiD,CAAY,CACrE,CACA,SAASC,GAAgBlD,EAAW,EAAG,CACrC,IAAImD,EAAc,KAClB,GAAIvD,EAAS,CAAC,EACZuD,EAAc3C,GAAe,IAAIR,EAAU,SAAU,EAAGA,EAAW,CAAA,CAAE,UAC5D,EAAE,MAAQ,MAAQ,EAAE,SAAW,KAAM,CAC9C,IAAIoD,EAAK,EACL9R,EAAI6Q,EAAO,CAAE,EAAEiB,EAAG,OAAO,EAC7BD,EAAc3C,GAAe,IAAIR,EAAU,SAAUoD,EAAG,KAAMpD,EAAW1O,CAAC,CAC9E,MACI6R,EAAc,EAEhB,OAAAA,EAAY,GAAKA,EAAY,IAAMtD,EAAI,EACvCG,EAAU,cAAc4B,GAAmBuB,EAAaA,EAAY,EAAE,EACtEnD,EAAU,SAASmD,EAAY,EAAE,EAAIA,EAC9BA,CACT,CACA,IAAIE,GAAY,SAAUtD,EAAiB,CACzC/O,EAAUqS,EAAWtD,CAAe,EACpC,IAAIvK,EAAS3D,EAAawR,CAAS,EACnC,SAASA,EAAUlT,EAAUqE,EAAQ,CACnC,IAAIiB,EAgDJ,GA/CAvF,EAAgB,KAAMmT,CAAS,EAC/B5N,EAAQD,EAAO,KAAK,IAAI,EACxBC,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,uBAAwB,EAAG,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,CAAE,CAAA,EAC7D7E,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,CAAE,CAAA,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,CAAE,CAAA,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,IAAK,MAAM,EAC1D7E,EAAgBa,EAAuBgE,CAAK,EAAG,IAAK,MAAM,EAC1D7E,EAAgBa,EAAuBgE,CAAK,EAAG,IAAK,MAAM,EAC1D7E,EAAgBa,EAAuBgE,CAAK,EAAG,IAAK,MAAM,EAC1D7E,EAAgBa,EAAuBgE,CAAK,EAAG,KAAM,MAAM,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,EAAI,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,CAAE,CAAA,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,MAAM,EACxE7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,MAAM,EACxE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,EAAK,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ,MAAM,EAC7D7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,MAAM,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,MAAM,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnEjB,EAASA,GAAU,GACnBiB,EAAM,SAAWjB,EAAO,UAAY,GACpCiB,EAAM,WAAajB,EAAO,YAAcrE,EAAS,SAAS,WAC1DsF,EAAM,aAAejB,EAAO,aAC5BiB,EAAM,WAAajB,EAAO,WAC1BiB,EAAM,OAAS,IAAI,IACnBA,EAAM,WAAa,GACnBA,EAAM,WAAa6N,GAAM9O,EAAO,YAAc,CAAE,CAAA,EAChDiB,EAAM,GAAKjB,EAAO,IAAMiB,EAAM,YAAW,EAAK,IAAI,OAAO,UACzDA,EAAM,aAAe,CACnB,WAAYA,EAAM,WAClB,MAAOjB,EAAO,OAASiB,EAAM,SAAS,aACtC,SAAU,CAAE,CAClB,EACQjB,EAAO,OACT,QAAS+O,KAAW/O,EAAO,OACzBiB,EAAM,KAAK8N,EAAS/O,EAAO,OAAO+O,CAAO,CAAC,EAG9C9N,EAAM,MAAQ,UAAY,CACxB,IAAIpE,EAAI,OAAO,OAAOoE,EAAM,YAAY,SAAS,EACjD,OAAAA,EAAM,YAAY,MAAMpE,EAAG,CAAClB,EAAUqE,CAAM,CAAC,EACtCnD,CACb,EACIoE,EAAM,SAAW,GACjBA,EAAM,iBAAmB,GACzB,IAAIpE,EAAImD,EAAO,UAAY,CAAE,EACzBgP,EAAK,CAAA,EACLC,EAAoBhO,EAAM,uBAC9B,GAAIgO,EAAmB,CACrB,IAAIC,EAAkBjO,EAAM,SAAS,SAASgO,CAAiB,EAC3DC,GACFrS,EAAE,KAAK,MAAMA,EAAG4B,GAAmByQ,CAAe,CAAC,EAErD,QAAS9Q,EAAI,EAAGA,EAAIvB,EAAE,OAAQuB,IAAK,CACjC,IAAI+Q,EAAKjE,GAAyBrO,EAAEuB,CAAC,CAAC,EACtC4Q,EAAGG,EAAG,QAAQ,EAAE,EAAIA,CACrB,CACF,CACD,OAAAlO,EAAM,aAAa,SAAW+N,EAC1BhP,EAAO,QACTiB,EAAM,eAAc,EAAG,SAASiM,EAAuB,EAAI,CACzD,KAAMhB,GAAa,KACnB,QAAS,CACP,MAAOlM,EAAO,MACd,SAAUA,EAAO,eAAiBiB,EAAM,qBACxC,GAAIiM,GACJ,SAAUC,EACX,CACT,GAEWlM,CACR,CACD,OAAAhF,EAAa4S,EAAW,CAAC,CACvB,IAAK,kBACL,MAAO,SAAyB9M,EAAY,CAC1C,IAAIqN,EAAI,GACR,GAAI,KAAK,aACP,GAAI,CACFA,EAAI,KAAK,aAAarN,CAAU,CACjC,OAAQ/E,EAAP,CACAwD,EAAI,wCAAyCxD,CAAC,CAC/C,CAEH,OAAOoS,CACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBC,EAAUC,EAAUC,EAAOxN,EAAYyN,EAAc,CACjF,IAAIJ,EACAK,EAAU,CACZ,SAAUJ,EACV,SAAUC,EACV,MAAOC,EACP,WAAYxN,EACZ,aAAcyN,CACtB,EACM,GAAI,KAAK,WACP,GAAI,CACFJ,EAAI,KAAK,WAAWK,CAAO,CAC5B,OAAQzS,EAAP,CACAwD,EAAI,sCAAuCxD,CAAC,CAC7C,MAEDoS,EAAI,KAAK,SAAS,eAAe9E,GAAuBmF,CAAO,EAEjE,OAAOL,CACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,OAAO,KAAK,YACb,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6B/S,EAAK,CACvC,QAAS+B,KAAK/B,EACZ,KAAK,aAAa+B,CAAC,EAAI/B,EAAI+B,CAAC,CAE/B,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,OAAO,KAAK,EACb,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB9B,EAAKoT,EAAM/C,EAAQ,CAC/C,KAAK,WAAWA,CAAM,EAAI,KAAK,WAAWA,CAAM,GAAK,GACrD,KAAK,WAAWA,CAAM,EAAErQ,CAAG,EAAIoT,CAChC,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BpT,EAAKqQ,EAAQ,CAC7C,OAAO,KAAK,WAAWA,CAAM,EAAI,KAAK,WAAWA,CAAM,EAAErQ,CAAG,EAAI,IACjE,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBqQ,EAAQ3M,EAAQ,CACtC,KAAK,WAAU,GACduM,GAAWI,CAAM,GAAK,CAAA,GAAI,QAAQ,KAAK,OAAO,IAAK,KAAK,MAAM,EAC/Da,GAAY,KAAMxN,CAAM,CACzB,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,OAAO,MAAM,KAAK,KAAK,OAAO,KAAM,CAAA,CACrC,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBA,EAAQ,CACnCwN,GAAY,KAAMxN,CAAM,CACzB,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiB2M,EAAQ,CAC9B,OAAO,KAAK,OAAO,IAAIA,CAAM,CAC9B,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBA,EAAQ3M,EAAQ,CACtC,IAAIwM,EAAID,GAAWI,CAAM,EACrBgD,EAAkB,GACtB,GAAInD,GAAK,KAAM,CACb,QAASpO,EAAI,EAAGwR,EAAIpD,EAAE,OAAQpO,EAAIwR,EAAGxR,IAC9B,KAAK,OAAO,IAAIoO,EAAEpO,CAAC,CAAC,IACvB,KAAK,OAAO,IAAIoO,EAAEpO,CAAC,CAAC,EACpBuR,EAAkB,IAGlBA,GACFnC,GAAY,KAAMxN,CAAM,CAE3B,CACF,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoB2M,EAAQ3M,EAAQ,CACzC,IAAI6P,EAAS,KACTrD,EAAID,GAAWI,CAAM,EACrBmD,EAAQ,GACRC,EAAO,SAAcC,EAAI,CAC3B,OAAIH,EAAO,OAAO,IAAIG,CAAE,GACtB7B,GAAqB0B,EAAQG,CAAE,EAC/BH,EAAO,OAAO,OAAUG,CAAE,EACnB,IAEF,EACf,EACM,GAAIxD,GAAK,KAAM,CACb,QAASpO,EAAI,EAAGwR,EAAIpD,EAAE,OAAQpO,EAAIwR,EAAGxR,IACnC0R,EAAQC,EAAKvD,EAAEpO,CAAC,CAAC,GAAK0R,EAEpBA,GACFtC,GAAY,KAAMxN,CAAM,CAE3B,CACF,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBA,EAAQ,CACjC,IAAIiQ,EAAS,KACb,KAAK,OAAO,QAAQ,SAAUzD,EAAG,CAC/B2B,GAAqB8B,EAAQzD,CAAC,CACtC,CAAO,EACD,KAAK,OAAO,QACZgB,GAAY,KAAMxN,CAAM,CACzB,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoB2M,EAAQ3M,EAAQ,CACzC,IAAIwM,EAAID,GAAWI,CAAM,EACzB,GAAIH,GAAK,KAAM,CACb,QAASpO,EAAI,EAAGwR,EAAIpD,EAAE,OAAQpO,EAAIwR,EAAGxR,IAC/B,KAAK,OAAO,IAAIoO,EAAEpO,CAAC,CAAC,GACtB+P,GAAqB,KAAM3B,EAAEpO,CAAC,CAAC,EAC/B,KAAK,OAAO,OAAUoO,EAAEpO,CAAC,CAAC,GAE1B,KAAK,OAAO,IAAIoO,EAAEpO,CAAC,CAAC,EAGxBoP,GAAY,KAAMxN,CAAM,CACzB,CACF,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBwM,EAAGxM,EAAQ,CAKnC,GAJA,KAAK,cAAcwM,EAAE,UAAU,EAC/B,KAAK,mBAAmBA,EAAE,eAAe,EACzC,KAAK,gBAAgBA,EAAE,UAAU,EACjC,KAAK,gBAAkB,KAAK,gBACxBA,EAAE,SAAU,CACd,IAAI0D,EAAO,CAAE,EACT9R,EACJ,IAAKA,KAAKoO,EAAE,SAAU,CACpB,IAAI2D,EAAW,KAAK,SAAS3D,EAAE,SAASpO,CAAC,EAAE,QAAQ,EAAE,EACrD,GAAI+R,EACFA,EAAS,WAAW3D,EAAE,SAASpO,CAAC,EAAE,OAAO,EACzC8R,EAAK1D,EAAE,SAASpO,CAAC,EAAE,QAAQ,EAAE,EAAI,GACjC,KAAK,SAAS,gBAAgB+R,EAAU,IAAI,MACvC,CACL,IAAIvP,EAAK,KAAK,kBAAkBwM,GAAmBZ,EAAE,SAASpO,CAAC,EAAE,QAAQ,EAAE,EACvEwC,GAAM,MACR,KAAK,SAAS,gBAAgBA,EAAI,IAAI,EACtCA,EAAG,WAAW,EAAI,EAClBA,EAAG,WAAW4L,EAAE,SAASpO,CAAC,EAAE,OAAO,EACnC,KAAK,SAASwC,EAAG,EAAE,EAAIA,GAEvBA,EAAK,KAAK,WAAW4L,EAAE,SAASpO,CAAC,CAAC,EAEpC8R,EAAKtP,EAAG,EAAE,EAAI,EACf,CACF,CACD,IAAKxC,KAAK,KAAK,SACT8R,EAAK,KAAK,SAAS9R,CAAC,EAAE,EAAE,GAAK,MAC/B,KAAK,cAAc,KAAK,SAASA,CAAC,EAAE,GAAI,EAAI,CAGjD,CACF,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBgS,EAAO,CACnC,KAAK,WAAaA,EAClB,KAAK,gBAAkB,KAAK,WAC5B/B,GAAkB,IAAI,CACvB,CACL,EAAK,CACD,IAAK,gBACL,MAAO,UAAyB,CAC9B,OAAO,KAAK,UACb,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4B+B,EAAO,CACxC,KAAK,gBAAkBA,EACvB/B,GAAkB,IAAI,CACvB,CACL,EAAK,CACD,IAAK,qBACL,MAAO,UAA8B,CACnC,OAAO,KAAK,eACb,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,QAASjQ,KAAK,KAAK,SACjB,KAAK,SAAS,eAAe,KAAK,SAASA,CAAC,CAAC,EAE/C,KAAK,SAAW,GAChB,KAAK,iBAAmB,GACxB,KAAK,OAAM,EACX,KAAK,MAAQ,IACd,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,OAAO,KAAK,MACb,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBtB,EAAG,CAC7BA,GAAK,MACP6Q,EAAO,KAAK,WAAY7Q,CAAC,CAE5B,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoB+D,EAAG,CAC5B,KAAK,QAAUA,EACXA,EACF,KAAK,aAAY,EAEjB,KAAK,aAAY,CAEpB,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,OACb,CACL,EAAK,CACD,IAAK,6BACL,MAAO,SAAoCoL,EAASoE,EAAI,CACtD,KAAK,iBAAiBpE,EAAQ,EAAE,EAAIoE,CACrC,CACL,EAAK,CACD,IAAK,6BACL,MAAO,SAAoCpE,EAAS,CAClD,OAAO,KAAK,iBAAmB,KAAK,iBAAiBA,EAAQ,EAAE,EAAI,IACpE,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBqE,EAAQrN,EAAO,CACzC,QAAS7E,KAAK,KAAK,SACbkS,IAAWhD,GACb,KAAK,SAAS,gBAAgB,KAAK,SAASlP,CAAC,EAAG6E,CAAK,EAC5CqN,IAAW/C,IACpB,KAAK,SAAS,mBAAmB,KAAK,SAASnP,CAAC,EAAG6E,CAAK,CAG7D,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBA,EAAOsN,EAAS,CACvC,IAAIC,GAAS,KAAK,UAAY,IAAI,MAAM,GAAG,EAC3CA,EAAM,KAAKvN,CAAK,EAChB,KAAK,SAAWuN,EAAM,KAAK,GAAG,EAC9B,KAAK,YAAYlD,GAAYrK,CAAK,CACnC,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAOsN,EAAS,CAC1C,IAAIC,GAAS,KAAK,UAAY,IAAI,MAAM,GAAG,EAC3C,KAAK,SAAWA,EAAM,OAAO,SAAU1T,EAAG,CACxC,OAAOA,IAAMmG,CACrB,CAAO,EAAE,KAAK,GAAG,EACX,KAAK,YAAYsK,GAAetK,CAAK,CACtC,CACL,EAAK,CACD,IAAK,WACL,MAAO,UAAoB,CACzB,OAAO,KAAK,QACb,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB2I,EAAOrP,EAAOsP,EAAe,CAC3D,MAAO,EACR,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,OAAO,KAAK,IACb,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBQ,EAAG,CACzB,KAAK,KAAOA,GAAK,EAClB,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBA,EAAG,CAC3B,KAAK,KAAOsB,EAAO,KAAK,KAAMtB,CAAC,CAChC,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBJ,EAAS,CAClC,IAAIpP,EAAI6R,GAAgB,KAAMzC,CAAO,EACrC,GAAI,KAAK,SAAWpP,EAAE,OAASqP,GAAa,MAAQ,CAACd,EAASa,CAAO,EAAG,CACtE,IAAII,EAAI,KAAK,QAAS,EAClBvP,EAAImP,EAAQ,QAChB,GAAII,EAAG,CACL,IAAIoE,EAAoB3T,EAAE,wBAA0BuQ,GAChDqD,EAAMrE,EAAEoE,CAAiB,EACzBC,IACF7T,EAAE,SAAW6T,EAEhB,CACF,CACD,OAAO7T,CACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoB8T,EAAI,CAC7B,OAAO,KAAK,SAASA,CAAE,CACxB,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,CAC5B,OAAO,KAAK,QACb,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAI,CAC9B,IAAI9T,EAAI,KAAK,WAAW8T,CAAE,EACtB9T,GACFA,EAAE,WAAW,EAAK,CAErB,CACL,EAAK,CACD,IAAK,eACL,MAAO,UAAwB,CAC7B,QAASoJ,EAAO,UAAU,OAAQ2K,EAAM,IAAI,MAAM3K,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC9EyK,EAAIzK,CAAI,EAAI,UAAUA,CAAI,EAE5ByK,EAAMA,GAAO,GACb,QAASxS,KAAK,KAAK,UACbwS,EAAI,SAAW,GAAKA,EAAI,QAAQxS,CAAC,IAAM,KACzC,KAAK,SAASA,CAAC,EAAE,WAAW,EAAK,CAGtC,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBuS,EAAI,CAC9B,IAAI9T,EAAI,KAAK,WAAW8T,CAAE,EACtB9T,GACFA,EAAE,WAAW,EAAI,CAEpB,CACL,EAAK,CACD,IAAK,eACL,MAAO,UAAwB,CAC7B,QAAS+J,EAAQ,UAAU,OAAQgK,EAAM,IAAI,MAAMhK,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACnF+J,EAAI/J,CAAK,EAAI,UAAUA,CAAK,EAE9B+J,EAAMA,GAAO,GACb,QAASxS,KAAK,KAAK,UACbwS,EAAI,SAAW,GAAKA,EAAI,QAAQxS,CAAC,IAAM,KACzC,KAAK,SAASA,CAAC,EAAE,WAAW,EAAI,CAGrC,CACL,EAAK,CACD,IAAK,oBACL,MAAO,UAA6B,CAClC,QAASA,KAAK,KAAK,SACjB,KAAK,SAAS,eAAe,KAAK,SAASA,CAAC,CAAC,EAE/C,KAAK,SAAW,GAChB,KAAK,iBAAmB,KACxB,KAAK,kBAAoB,EAC1B,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuByS,EAAWC,EAAa,CACpD,IAAIjU,EAAI,KAAK,SAASgU,CAAS,EAC3BhU,IACFA,EAAE,WAAW,EAAK,EACbiU,GACH,KAAK,SAAS,eAAejU,CAAC,EAEhC,OAAO,KAAK,SAASgU,CAAS,EAC1B,KAAK,kBACP,OAAO,KAAK,iBAAiBA,CAAS,EAEpC,KAAK,mBACP,OAAO,KAAK,kBAAkBA,CAAS,EAG5C,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,QAAS9J,EAAQ,UAAU,OAAQgK,EAAW,IAAI,MAAMhK,CAAK,EAAGE,EAAQ,EAAGA,EAAQF,EAAOE,IACxF8J,EAAS9J,CAAK,EAAI,UAAUA,CAAK,EAEnC,QAAS7I,EAAI,EAAGwR,EAAImB,EAAS,OAAQ3S,EAAIwR,EAAGxR,IAC1C,KAAK,cAAc,UAAUA,CAAC,CAAC,CAElC,CACL,EAAK,CACD,IAAK,WACL,MAAO,UAAoB,CACzB,IAAI4S,EAAK,KAAK,kBACd,OAAOA,GAAM,KAAOA,EAAG,SAAQ,EAAK,IACrC,CACL,EAAK,CACD,IAAK,kBACL,MAAO,UAA2B,CAChC,OAAO,KAAK,WAAW9D,EAAuB,CAC/C,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBtI,EAAG,CAC1B,IAAIoM,EAAK,KAAK,kBACd,GAAKA,EAOH,GAAI5F,EAASxG,CAAC,GAAKwH,GAAWxH,CAAC,EAC7BoM,EAAG,SAASpM,CAAC,MACR,CACL,IAAIqM,EAAKrM,EACLqM,EAAG,OACLD,EAAG,SAASC,EAAG,KAAK,EAElBA,EAAG,WACLD,EAAG,SAAWC,EAAG,SAEpB,KAjBM,CACP,IAAIC,EAAW9F,EAASxG,CAAC,GAAKwH,GAAWxH,CAAC,EAAI,CAC5C,MAAOA,CACR,EAAGA,EACJoM,EAAKzC,GAAkB,KAAM2C,CAAQ,EACrC,KAAK,SAAShE,EAAuB,EAAI8D,CACjD,CAaK,CACF,CAAA,CAAC,EACKnC,CACT,EAAE/C,EAAc,EAEZqF,GAAYC,GAAmBC,GAC/BC,IACH,SAAUA,EAAY,CACrBA,EAAW,IAAS,MACpBA,EAAW,KAAU,OACrBA,EAAW,MAAW,QACtBA,EAAW,OAAY,QACzB,GAAGA,KAAeA,GAAa,CAAE,EAAC,EAClC,IAAIC,EAAMD,GAAW,IACjBE,EAAOF,GAAW,KAClBG,EAAQH,GAAW,MACnBI,EAASJ,GAAW,OACpBK,GAAe,CAACH,EAAMC,CAAK,EAC3BG,GAAe,CAACL,EAAKG,CAAM,EAC3BG,GAA4B,UAAY,CAC1C,SAASA,EAA0BlW,EAAUmW,EAASC,EAAW,CAC/DrW,EAAgB,KAAMmW,CAAyB,EAC/C,KAAK,SAAWlW,EAChB,KAAK,QAAUmW,EACf1V,EAAgB,KAAM,aAAc,EAAI,EACxCA,EAAgB,KAAM,eAAgB,MAAM,EAC5CA,EAAgB,KAAM,YAAa,MAAM,EACzCA,EAAgB,KAAM,YAAa,CAAA,CAAE,EACrCA,EAAgB,KAAM,kBAAmB,CAAC,EAC1CA,EAAgB,KAAM,SAAU,EAAK,EACrCA,EAAgB,KAAM,WAAY,EAAE,EACpCA,EAAgB,KAAM,YAAa,IAAI,EACvCA,EAAgB,KAAM,OAAQ,UAAU,EACxCA,EAAgB,KAAM,KAAMiP,EAAM,CAAA,EAClCjP,EAAgB,KAAM,cAAe,CAAC,EAAG,CAAC,CAAC,EAC3CA,EAAgB,KAAM,OAAQ,MAAM,EACpC,KAAK,KAAOT,EAAS,SAAS,YAAYoW,CAAS,EACnD,KAAK,UAAU,KAAK,CAClB,EAAG,GACH,EAAG,GACH,GAAI,KAAK,YAAY,CAAC,EACtB,GAAI,KAAK,YAAY,CAAC,EACtB,KAAM,EACN,KAAM,EACN,IAAK,KAAK,YAAY,CAAC,EACvB,IAAK,KAAK,YAAY,CAAC,EACvB,IAAK,EACX,CAAK,CACF,CACD,OAAA9V,EAAa4V,EAA2B,CAAC,CACvC,IAAK,6BACL,MAAO,UAAsC,CAC3C,KAAK,SAAS,OAAO,qBAAqB,KAAM,CAAC,KAAK,UAAU,CAAC,EAAE,GAAI,KAAK,UAAU,CAAC,EAAE,EAAE,CAAC,CAC7F,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAc1R,EAAU,CAC7B,KAAK,YAAc,KAAK,SAAS,OAAO,uBAAuBA,CAAQ,EACvE,KAAK,UAAU,CAAC,EAAE,GAAK,KAAK,YAAY,CAAC,EACzC,KAAK,UAAU,CAAC,EAAE,GAAK,KAAK,YAAY,CAAC,EACzC,KAAK,2BAA0B,CAChC,CACL,EAAK,CACD,IAAK,MACL,MAAO,UAAe,CACpB,KAAK,YAAc,KACnB,KAAK,UAAU,CAAC,EAAE,GAAK,KAAK,UAAU,CAAC,EAAE,IACzC,KAAK,UAAU,CAAC,EAAE,GAAK,KAAK,UAAU,CAAC,EAAE,IACzC,KAAK,2BAA0B,CAChC,CACF,CAAA,CAAC,EACK0R,CACT,IACIG,IAAab,GAAa,GAAI/U,EAAgB+U,GAAYI,EAAKG,CAAM,EAAGtV,EAAgB+U,GAAYM,EAAOD,CAAI,EAAGpV,EAAgB+U,GAAYK,EAAMC,CAAK,EAAGrV,EAAgB+U,GAAYO,EAAQH,CAAG,EAAGJ,IACtMc,IAAoBb,GAAoB,GAAIhV,EAAgBgV,GAAmBG,EAAKE,CAAK,EAAGrV,EAAgBgV,GAAmBK,EAAOC,CAAM,EAAGtV,EAAgBgV,GAAmBI,EAAMD,CAAG,EAAGnV,EAAgBgV,GAAmBM,EAAQF,CAAI,EAAGJ,IAChPc,IAAwBb,GAAwB,GAAIjV,EAAgBiV,GAAuBE,EAAKC,CAAI,EAAGpV,EAAgBiV,GAAuBI,EAAOF,CAAG,EAAGnV,EAAgBiV,GAAuBG,EAAME,CAAM,EAAGtV,EAAgBiV,GAAuBK,EAAQD,CAAK,EAAGJ,IAC5Q,SAASc,GAAe,EAAG,CACzB,OAAO,EAAE,MAAM,SAAW,EAAIZ,EAAM,EAAE,MAAM,CAAC,CAC/C,CACA,SAASa,GAAiB,EAAGC,EAAM,CACjC,OAAO,EAAE,MAAM,QAAQA,CAAI,IAAM,EACnC,CACA,SAASC,GAAY,EAAGC,EAAM,CAC5B,OAAQ,EAAE,UAAYN,GAAmBC,IAAsBK,CAAI,CACrE,CACA,SAASC,GAAY,EAAGD,EAAM,CAC5B,OAAQ,EAAE,UAAYL,GAAuBD,IAAkBM,CAAI,CACrE,CACA,SAASE,GAAgB,EAAGF,EAAM,CAChC,OAAO,EAAE,YAAc,KAAO,EAAE,YAAc,KAAOH,GAAiB,EAAGG,CAAI,IAAM,GAAO,EAAE,aAAeA,EAAO,EAAE,WAAW,QAAQA,CAAI,IAAM,EACnJ,CACA,SAASG,GAAW,EAAGH,EAAM,CAC3B,GAAIH,GAAiB,EAAGG,CAAI,EAC1B,OAAOA,EACF,GAAIH,GAAiB,EAAGJ,GAAUO,CAAI,CAAC,EAC5C,OAAOP,GAAUO,CAAI,EAErB,IAAII,EAAaL,GAAY,EAAGC,CAAI,EACpC,GAAIH,GAAiB,EAAGO,CAAU,EAChC,OAAOA,EAEP,IAAIC,EAAaJ,GAAY,EAAGD,CAAI,EACpC,OAAIH,GAAiB,EAAGQ,CAAU,EACzBA,EAINL,CACT,CACA,IAAIM,GAAO,CACT,EAAG,GACH,EAAG,EACH,GAAI,EACJ,GAAI,GACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAU,CACZ,EAAG,GACH,EAAG,EACH,GAAI,EACJ,GAAI,EACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAQ,CACV,EAAG,EACH,EAAG,GACH,GAAI,GACJ,GAAI,EACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAS,CACX,EAAG,EACH,EAAG,GACH,GAAI,EACJ,GAAI,EACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAW,CACb,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,GACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAY,CACd,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,GACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAc,CAChB,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,EACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAe,CACjB,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,EACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAU,CACZ,EAAG,GACH,EAAG,GACH,GAAI,EACJ,GAAI,EACJ,KAAM,EACN,KAAM,CACR,EACIC,GAAc,CAChB,IAAO,CAACT,EAAI,EACZ,OAAU,CAACC,EAAO,EAClB,KAAQ,CAACC,EAAK,EACd,MAAS,CAACC,EAAM,EAChB,QAAW,CAACC,EAAQ,EACpB,SAAY,CAACC,EAAS,EACtB,WAAc,CAACC,EAAW,EAC1B,YAAe,CAACC,EAAY,EAC5B,OAAU,CAACC,EAAO,EAClB,YAAe,CAACR,GAAME,GAAOD,GAASE,EAAM,CAC9C,EACIO,GAAwB,CAC1B,WAAc,CACZ,MAAO,CAAChC,EAAKC,EAAME,EAAQD,CAAK,CACjC,EACD,cAAiB,CACf,MAAO,CAACF,CAAG,CACZ,EACD,gBAAmB,CACjB,MAAO,CAACE,CAAK,CACd,EACD,iBAAoB,CAClB,MAAO,CAACC,CAAM,CACf,EACD,eAAkB,CAChB,MAAO,CAACF,CAAI,CACb,EACD,oBAAuB,CACrB,MAAO,CAACA,EAAMC,CAAK,CACpB,EACD,oBAAuB,CACrB,MAAO,CAACF,EAAKG,CAAM,CACpB,CACH,EACA,SAAS8B,GAAezT,EAAMC,EAAQ,CAEpC,GADAA,EAASA,GAAU,GACfD,IAAS0T,GAAgB,UAC3B,OAAOC,GAAuB1T,CAAM,EAEtC,IAAIkC,EAAIoR,GAAYvT,CAAI,EACxB,GAAImC,GAAK,KACP,OAAOyR,GAAc5T,EAAM2M,GAAIxK,EAAG,SAAU0R,EAAI,CAC9C,OAAOjG,EAAO,CACZ,IAAKiG,EAAG,GACR,IAAKA,EAAG,EACT,EAAEA,CAAE,CACX,CAAK,EAAG5T,CAAM,EAGZ,GADAkC,EAAIqR,GAAsBxT,CAAI,EAC1BmC,GAAK,KACP,OAAO2R,GAAwB9T,EAAMmC,EAAE,MAAOlC,CAAM,EAEtD,KAAM,CACJ,QAAS,iCAAmCD,EAAO,GACvD,CACA,CACA,SAAS4T,GAAcvF,EAAM0F,EAAW9T,EAAQ,CAC9C,MAAO,CACL,KAAMoO,EACN,UAAW0F,EACX,gBAAiB,EACjB,OAAQ,GACR,GAAIzI,EAAM,EACV,WAAY,GACZ,aAAc,GACd,UAAWyI,EAAU,OAAS,EAC9B,UAAW,KACX,SAAU9T,EAAO,UAAY,EACjC,CACA,CACA,SAAS+T,GAAqBpY,EAAUmW,EAASC,EAAW,CAC1D,OAAO,IAAIF,GAA0BlW,EAAUmW,EAASC,CAAS,CACnE,CACA,IAAIiC,GAAwB,cAC5B,SAASH,GAAwBzF,EAAM6F,EAAOjU,EAAQ,CACpD,IAAIkU,EAAK,CACP,KAAM9F,EACN,UAAW,CAAE,EACb,gBAAiB,EACjB,OAAQ,GACR,GAAI/C,EAAM,EACV,SAAUrL,EAAO,UAAY,GAC7B,WAAY,GACZ,aAAc,GACd,UAAW,KACX,MAAOA,EAAO,OAASiU,EACvB,WAAY,KACZ,WAAY,KACZ,UAAajU,EAAO,YAAc,GAClC,cAAe,IACnB,EACE,cAAO,eAAekU,EAAIF,GAAuB,CAC/C,IAAK,UAAe,CAClB,OAAO,KAAK,aACb,EACD,IAAK,SAAaG,EAAG,CACnB,KAAK,cAAgBzB,GAAW,KAAMyB,CAAC,CACxC,CACL,CAAG,EACMD,CACT,CACA,SAASE,GAAsBC,EAAI,CACjC,OAAOA,EAAG,OAAS,GAAKA,EAAG,MAAMC,EAAQ,GAAKD,EAAG,SAAW,GAAKA,EAAG,MAAM,EAAG,CAAC,EAAE,MAAMC,EAAQ,GAAKlJ,EAASiJ,EAAG,CAAC,CAAC,CACnH,CACA,SAASE,GAA8BpJ,EAAM,CAC3C,GAAIC,EAASD,CAAI,EACf,OAAOqI,GAAerI,EAAM,IAAI,EAC3B,GAAI,MAAM,QAAQA,CAAI,EAC3B,GAAIiJ,GAAsBjJ,CAAI,EAAG,CAC/B,IAAIqJ,EAAQrJ,EACZ,OAAOwI,GAAc,KAAM,CAAC,CAC1B,EAAGa,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,GAAIA,EAAM,CAAC,EACX,GAAIA,EAAM,CAAC,EACX,KAAMA,EAAM,CAAC,GAAK,KAAO,EAAIA,EAAM,CAAC,EACpC,KAAMA,EAAM,CAAC,GAAK,KAAO,EAAIA,EAAM,CAAC,EACpC,IAAKA,EAAM,CAAC,EACZ,IAAKA,EAAM,CAAC,EACZ,IAAKA,EAAM,CAAC,GAAK,EACzB,CAAO,EAAG,CACF,SAAUA,EAAM,CAAC,GAAK,EAC9B,CAAO,CACP,KAAW,CACL,IAAIV,EAAYpH,GAAIvB,EAAM,SAAUsJ,EAAO,CACzC,GAAIrJ,EAASqJ,CAAK,EAAG,CACnB,IAAIvS,EAAIoR,GAAYmB,CAAK,EACzB,OAAOvS,GAAK,KAAOyL,EAAO,CACxB,IAAKzL,EAAE,CAAC,EAAE,GACV,IAAKA,EAAE,CAAC,EAAE,GACV,IAAK,EACN,EAAEA,EAAE,CAAC,CAAC,EAAI,IACrB,SAAmBkS,GAAsBK,CAAK,EACpC,MAAO,CACL,EAAGA,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,GAAIA,EAAM,CAAC,EACX,GAAIA,EAAM,CAAC,EACX,KAAMA,EAAM,CAAC,GAAK,KAAO,EAAIA,EAAM,CAAC,EACpC,KAAMA,EAAM,CAAC,GAAK,KAAO,EAAIA,EAAM,CAAC,EACpC,IAAKA,EAAM,CAAC,EACZ,IAAKA,EAAM,CAAC,EACZ,IAAKA,EAAM,CAAC,GAAK,EAC7B,CAEA,CAAO,EAAE,OAAO,SAAUC,EAAI,CACtB,OAAOA,GAAM,IACrB,CAAO,EACD,OAAOf,GAAc,UAAWG,EAAW,CAAE,CAAA,CAC9C,KACI,CACL,IAAIO,EAAKlJ,EACT,OAAOqI,GAAea,EAAG,KAAMA,EAAG,OAAO,CAC1C,CACH,CACA,SAASM,GAAgBC,EAAa,CAKpC,QAJIxF,EAAI,GACJyF,EAAO,KAAK,GAAK,EAAID,EACrB1S,EAAI,CAAA,EACJ4S,EAAU,EACL1W,EAAI,EAAGA,EAAIwW,EAAaxW,IAAK,CACpC,IAAI+C,EAAIiO,EAAIA,EAAI,KAAK,IAAI0F,CAAO,EAC5B1T,EAAIgO,EAAIA,EAAI,KAAK,IAAI0F,CAAO,EAChC5S,EAAE,KAAK,CACL,EAAGf,EACH,EAAGC,EACH,GAAI,EACJ,GAAI,EACJ,KAAM,EACN,KAAM,EACN,IAAK,EACL,IAAK,EACL,IAAK,EACX,CAAK,EACD0T,GAAWD,CACZ,CACD,OAAO3S,CACT,CACA,SAAS6S,GAAMC,EAAUJ,EAAa,CAqBpC,QApBIK,EAAiBL,EAAcI,EAAS,OACxC9S,EAAI,CAAE,EACNgT,EAAe,SAAsB5S,EAAIC,EAAIC,EAAIC,EAAI0S,EAAkBC,EAAIC,EAAI,CACjFJ,EAAiBL,EAAcO,EAG/B,QAFIhT,GAAMK,EAAKF,GAAM2S,EACjB7S,GAAMK,EAAKF,GAAM0S,EACZ7W,EAAI,EAAGA,EAAI6W,EAAgB7W,IAClC8D,EAAE,KAAK,CACL,EAAGI,EAAKH,EAAK/D,EACb,EAAGmE,EAAKH,EAAKhE,EACb,GAAIgX,GAAM,KAAO,EAAIA,EACrB,GAAIC,GAAM,KAAO,EAAIA,EACrB,KAAM,EACN,KAAM,EACN,IAAK,EACL,IAAK,EACL,IAAK,EACb,CAAO,CAEP,EACWjX,EAAI,EAAGA,EAAI4W,EAAS,OAAQ5W,IACnC8W,EAAa,MAAM,KAAMF,EAAS5W,CAAC,CAAC,EAEtC,OAAO8D,CACT,CACA,SAASoT,GAAerB,EAAOW,EAAa,CAE1C,QADI1R,EAAI,CAAA,EACC9E,EAAI,EAAGA,EAAI6V,EAAM,OAAQ7V,IAChC8E,EAAE,KAAK,CAAC+Q,EAAM7V,CAAC,EAAE,CAAC,EAAG6V,EAAM7V,CAAC,EAAE,CAAC,EAAG6V,EAAM7V,CAAC,EAAE,CAAC,EAAG6V,EAAM7V,CAAC,EAAE,CAAC,EAAG,EAAI6V,EAAM,OAAQA,EAAM7V,CAAC,EAAE,CAAC,EAAG6V,EAAM7V,CAAC,EAAE,CAAC,CAAC,CAAC,EAEzG,OAAO2W,GAAM7R,EAAG0R,CAAW,CAC7B,CACA,SAASW,GAAmBX,EAAa,CACvC,OAAOU,GAAe,CAAC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,CAAC,CAAC,EAAGV,CAAW,CACvH,CACA,SAASY,GAAiBZ,EAAa,CACrC,OAAOU,GAAe,CAAC,CAAC,GAAK,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,GAAK,GAAK,CAAC,EAAG,CAAC,GAAK,EAAG,EAAG,EAAG,EAAG,CAAC,EAAG,GAAK,GAAK,CAAC,CAAC,EAAGV,CAAW,CAC7G,CACA,SAASa,GAAkBb,EAAa,CACtC,OAAOU,GAAe,CAAC,CAAC,GAAK,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,GAAK,CAAC,CAAC,EAAGV,CAAW,CACnF,CACA,SAASc,GAASC,EAAQC,EAAiB,CAGzC,QAFI/Y,EAAI,CAAE,EACNgZ,EAAQD,EAAkB,IAAM,KAAK,GAChCxX,EAAI,EAAGA,EAAIuX,EAAO,OAAQvX,IAAK,CACtC,IAAI0X,EAAKH,EAAOvX,CAAC,EAAE,EAAI,GACnB2X,EAAKJ,EAAOvX,CAAC,EAAE,EAAI,GACvBvB,EAAE,KAAK,CACL,EAAG,IAAOiZ,EAAK,KAAK,IAAID,CAAK,EAAIE,EAAK,KAAK,IAAIF,CAAK,GACpD,EAAG,IAAOC,EAAK,KAAK,IAAID,CAAK,EAAIE,EAAK,KAAK,IAAIF,CAAK,GACpD,GAAIF,EAAOvX,CAAC,EAAE,GACd,GAAIuX,EAAOvX,CAAC,EAAE,GACd,KAAM,EACN,KAAM,EACN,IAAK,EACL,IAAK,EACL,IAAK,EACX,CAAK,CACF,CACD,OAAOvB,CACT,CACA,IAAImZ,EAAmB,IAAI,IAC3BA,EAAiB,IAAIC,GAAsB,OAAQtB,EAAe,EAClEqB,EAAiB,IAAIC,GAAsB,QAAStB,EAAe,EACnEqB,EAAiB,IAAIC,GAAsB,UAAWV,EAAkB,EACxES,EAAiB,IAAIC,GAAsB,OAAQV,EAAkB,EACrES,EAAiB,IAAIC,GAAsB,QAAST,EAAgB,EACpEQ,EAAiB,IAAIC,GAAsB,SAAUR,EAAiB,EACtE,SAAS/B,GAAuB1T,EAAQ,CACtCA,EAASA,GAAU,GACnB,IAAI4U,EAAc5U,EAAO,aAAe,GACpCkW,EAAQlW,EAAO,MACnB,GAAI,CAACkW,EACH,MAAM,IAAI,MAAM,4CAA4C,EAE9D,GAAI,CAACF,EAAiB,IAAIE,CAAK,EAC7B,MAAM,IAAI,MAAM,UAAYA,EAAQ,uCAAuC,EAE7E,IAAIC,EAAKH,EAAiB,IAAIE,CAAK,EAAEtB,CAAW,EAC5C5U,EAAO,WACTmW,EAAKT,GAASS,EAAInW,EAAO,QAAQ,GAEnC,IAAIkC,EAAIyR,GAAcF,GAAgB,UAAW0C,EAAInW,CAAM,EACvDoW,EAAKzI,EAAOzL,EAAG,CACjB,MAAOgU,CACX,CAAG,EACD,OAAOE,CACT,CAEA,IAAIC,GAAoB,UACpBC,GAAsB,YAC1B,SAASC,GAAgBhQ,EAAM4J,EAAUxM,EAAO6S,EAAQ1E,EAASC,EAAW5R,EAAU,CACpF,IAAInD,EACJ,GAAImT,EACF5J,EAAK,UAAU5C,CAAK,EAAIwM,EACxBA,EAAS,cAAc5J,CAAI,MACtB,CACL,IAAIzG,EAAKK,GAAYoG,EAAK,cAAgBA,EAAK,cAAc5C,CAAK,GAAK4C,EAAK,SAAS,SAAS,UAAU5C,CAAK,GAAK4C,EAAK,SAAS,SAAS,SACrIkQ,EAAKlQ,EAAK,eAAe5C,CAAK,GAAK4C,EAAK,eAAiBA,EAAK,SAAS,SAAS,eAAe5C,CAAK,GAAK4C,EAAK,SAAS,SAAS,cAChIkQ,EAAG,MAAQ,MAAQlQ,EAAK,YAAc,OACxCkQ,EAAG,KAAOlQ,EAAK,WAAW,QAExBkQ,EAAG,eAAiB,MAAQlQ,EAAK,YAAc,OACjDkQ,EAAG,cAAgBlQ,EAAK,WAAW,eAEjCkQ,EAAG,cAAgB,MAAQlQ,EAAK,YAAc,OAChDkQ,EAAG,aAAelQ,EAAK,WAAW,cAEpC,IAAImQ,EAAMnQ,EAAK,oBAAoB5C,CAAK,GAAK4C,EAAK,oBAAsBA,EAAK,oBAAsBA,EAAK,SAAS,SAAS,oBAAoB5C,CAAK,GAAK4C,EAAK,SAAS,SAAS,mBAC3KA,EAAK,iBAAmB,OACtBmQ,GAAO,OACTA,EAAM,CAAA,GAEJA,EAAI,MAAQ,OACdA,EAAI,KAAOnQ,EAAK,gBAAgB,SAGpC,IAAIoQ,EAAIpQ,EAAK,MAAQA,EAAK,MAAM5C,CAAK,EAAI,KACzC6S,EAASA,GAAU,KAAOA,EAASjQ,EAAK,SAAS,SAAS,SAAW,KAAOA,EAAK,SAAS,SAAS,QAAQ5C,CAAK,EAAI4C,EAAK,SAAS,SAAS,OAC3IvJ,EAAIuJ,EAAK,SAAS,sBAAsB,CACtC,WAAYkQ,EACZ,gBAAiBC,EACjB,SAAU5W,EACV,YAAa,CAACyG,CAAI,EAClB,KAAMoQ,EACN,QAAS7E,EACT,MAAOvL,EAAK,MACZ,OAAQiQ,EACR,oBAAqBjQ,EAAK,UAAYA,EAAK,SAAS,SAAS,oBAC7D,sBAAuBA,EAAK,YAAcA,EAAK,SAAS,SAAS,qBACvE,CAAK,EACDA,EAAK,SAAS,iBAAiBvJ,CAAC,EAC5BmT,GAAY,OACdnT,EAAE,cAAgB,IAEpBuJ,EAAK,UAAU5C,CAAK,EAAI3G,CACzB,CACD,OAAOA,CACT,CACG,IAAC4Z,GAAa,SAAUC,EAAY,CACrCra,EAAUoa,EAAYC,CAAU,EAChC,IAAI7V,EAAS3D,EAAauZ,CAAU,EACpC,SAASA,EAAWjb,EAAUqE,EAAQ,CACpC,IAAIiB,EACJvF,EAAgB,KAAMkb,CAAU,EAChC3V,EAAQD,EAAO,KAAK,KAAMrF,EAAUqE,CAAM,EAC1CiB,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,uBAAwB,EAAG,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,qBAAqB,EAC9E7E,EAAgBa,EAAuBgE,CAAK,EAAG,qBAAsB,MAAM,EAC3E7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,EAAI,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,EAAK,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ,CAAC,EACxD7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,CAAC,KAAM,IAAI,CAAC,EACxE7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,MAAM,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,MAAM,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,CAAE,CAAA,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,qBAAsB,CAAE,CAAA,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,MAAM,EAC5E7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,MAAM,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,MAAM,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,MAAM,EACzE7E,EAAgBa,EAAuBgE,CAAK,EAAG,qBAAsB,MAAM,EAC3E7E,EAAgBa,EAAuBgE,CAAK,EAAG,uBAAwB,MAAM,EAC7E7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,MAAM,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,MAAM,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,CAAE,CAAA,EAC5D7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,EAAK,EAC/DA,EAAM,GAAKjB,EAAO,GAClBiB,EAAM,mBAAqBjB,EAAO,mBAClCiB,EAAM,OAASjB,EAAO,OACtBiB,EAAM,OAASjB,EAAO,OAClBA,EAAO,gBACTiB,EAAM,OAASjB,EAAO,eAAe,QACrCiB,EAAM,SAAWjB,EAAO,eAAe,WAEvCiB,EAAM,SAAWtF,EAAS,MAAMsF,EAAM,MAAM,EAE1CjB,EAAO,gBACTiB,EAAM,OAASjB,EAAO,eAAe,QACrCiB,EAAM,SAAWjB,EAAO,eAAe,WAEvCiB,EAAM,SAAWtF,EAAS,MAAMsF,EAAM,MAAM,EAE9CA,EAAM,MAAQjB,EAAO,MACrB,IAAI8W,EAAe9W,EAAO,QAAUA,EAAO,QAAQ,CAAC,EAAIA,EAAO,OAC3D+W,EAAe/W,EAAO,QAAUA,EAAO,QAAQ,CAAC,EAAIA,EAAO,OAC/DrE,EAAS,OAAOsF,EAAM,MAAM,EAC5BtF,EAAS,OAAOsF,EAAM,MAAM,EAC5BA,EAAM,QAAU,GAChBA,EAAM,OAAS,CACb,SAAUjB,EAAO,SACjB,WAAYA,EAAO,WACnB,iBAAkBA,EAAO,gBAAgB,EACzC,SAAUA,EAAO,QACvB,EACIiB,EAAM,cAAgB,KAClBjB,EAAO,OACTA,EAAO,UAAYA,EAAO,WAAaiB,EAAM,SAAS,6BAA6BjB,EAAO,IAAI,EAAE,WAElGiB,EAAM,aAAejB,EAAO,SAC5BiB,EAAM,cAAgBjB,EAAO,WAAa,CAAC,KAAM,IAAI,EACrDiB,EAAM,cAAgBjB,EAAO,cAC7BiB,EAAM,mBAAqBjB,EAAO,mBAClCiB,EAAM,eAAiBjB,EAAO,gBAAkB,CAAC,KAAM,IAAI,EAC3DiB,EAAM,oBAAsBjB,EAAO,qBAAuB,CAAC,KAAM,IAAI,EACrEiB,EAAM,WAAajB,EAAO,WAC1BiB,EAAM,gBAAkBjB,EAAO,gBAC/BiB,EAAM,MAAQjB,EAAO,MACrBiB,EAAM,aAAa,GAAMA,EAAM,OAAQA,EAAM,SAAU6V,EAAc9W,EAAO,cAAc,EAC1FiB,EAAM,aAAa,GAAOA,EAAM,OAAQA,EAAM,SAAU8V,EAAc/W,EAAO,cAAc,EACtFiB,EAAM,QACTA,EAAM,MAAQA,EAAM,UAAU,CAAC,EAAE,OAE/BjB,EAAO,wBAA0B,OACnCiB,EAAM,UAAU,CAAC,EAAE,cAAgBjB,EAAO,uBAC1CiB,EAAM,UAAU,CAAC,EAAE,cAAgBjB,EAAO,wBAE5C,IAAIgX,EAAc/V,EAAM,SAAS,SAAS,sBACtCjB,EAAO,aAAe,KACxBgX,EAAc,IAEZ/V,EAAM,UAAU,CAAC,EAAE,wBAA0B,KAC/C+V,EAAc,IAEZ/V,EAAM,UAAU,CAAC,EAAE,wBAA0B,KAC/C+V,EAAc,IAEhB/V,EAAM,cAAgBjB,EAAO,WAAa,CAAC,KAAM,IAAI,EACrDiB,EAAM,aAAejB,EAAO,UAAY,KACxC,IAAIiX,EAAYjX,EAAO,UAAYiB,EAAM,UAAU,CAAC,EAAE,qBAAuBA,EAAM,UAAU,CAAC,EAAE,qBAAuBA,EAAM,SAAS,SAAS,oBAC3IiW,EAAoBvJ,EAAO,GAAI1M,EAAM,UAAU,CAAC,EAAE,gBAAkBA,EAAM,UAAU,CAAC,EAAE,gBAAkBjB,EAAO,YAAciB,EAAM,SAAS,SAAS,UAAU,EAmBpK,GAlBAA,EAAM,oBAAoB,CACxB,WAAY+V,EACZ,SAAUC,EACV,WAAYC,EACZ,gBAAiBvJ,EAAO,GAAI1M,EAAM,UAAU,CAAC,EAAE,qBAAuBA,EAAM,UAAU,CAAC,EAAE,qBAAuBjB,EAAO,iBAAmBiB,EAAM,SAAS,SAAS,eAAe,CACvL,CAAK,EACGjB,EAAO,eACTkX,EAAkB,aAAelX,EAAO,cAEtCA,EAAO,eACTkX,EAAkB,cAAgBlX,EAAO,cAEvCA,EAAO,YACTkX,EAAkB,YAAclX,EAAO,WAErCA,EAAO,QACTkX,EAAkB,OAASlX,EAAO,OAEhC,CAACiB,EAAM,SAAS,gBAAiB,CACnC,IAAIkW,EAAmBlW,EAAM,SAAS,cAAgBoK,EAAI,EAC1DpK,EAAM,SAAS,eAAeA,EAAM,UAAU,CAAC,EAAG,CAChD,UAAWkW,CACnB,CAAO,EACDlW,EAAM,SAAS,eAAeA,EAAM,UAAU,CAAC,EAAG,CAChD,UAAWkW,CACnB,CAAO,CACF,CACDlW,EAAM,KAAOjB,EAAO,MAAQiB,EAAM,UAAU,CAAC,EAAE,eAC/CA,EAAM,SAAWjB,EAAO,SACpBA,EAAO,UAAY,OACrBiB,EAAM,SAAWA,EAAM,UAAU,CAAC,EAAE,qBAEtC,IAAImW,EAAKzJ,EAAO,GAAI1M,EAAM,UAAU,CAAC,EAAE,UAAU,EACjD0M,EAAOyJ,EAAInW,EAAM,UAAU,CAAC,EAAE,UAAU,EACxC0M,EAAOyJ,EAAInW,EAAM,UAAU,EAC3BA,EAAM,WAAamW,EACnBnW,EAAM,gBAAkBA,EAAM,cAAa,GAAM,CAAA,EACjDA,EAAM,cAAcA,EAAM,UAAU,CAAC,EAAE,WAAaA,EAAM,UAAU,CAAC,EAAE,WAAajB,EAAO,WAAaiB,EAAM,SAAS,SAAS,UAAW,EAAI,EAC/I,IAAIoW,EAAOrX,EAAO,MAAQ,MAAQ,CAACsX,GAAStX,EAAO,IAAI,EAAI,GAAKA,EAAO,KACvEiB,EAAM,QAAQoW,CAAI,EAClB,IAAIE,EAAS,CAACC,GAASvW,EAAM,UAAU,CAAC,EAAE,SAAUA,EAAM,UAAU,CAAC,EAAE,SAAUjB,EAAO,IAAI,EAAE,KAAK,GAAG,EACtG,MAAI,QAAQ,KAAKuX,CAAM,GACrBtW,EAAM,QAAQsW,EAAQvX,EAAO,IAAI,EAE5BiB,CACR,CACD,OAAAhF,EAAa2a,EAAY,CAAC,CACxB,IAAK,cACL,MAAO,UAAuB,CAC5B,MAAO,YACR,CACL,EAAK,CACD,IAAK,uBACL,MAAO,UAAgC,CACrC,OAAO9L,EACR,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,MAAO,CACL,EAAG,KAAK,UAAU,EAClB,EAAG,KAAK,UAAU,CAC1B,CACK,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsB2M,EAAUC,EAAIC,EAAMnB,EAAQ1W,EAAI,CAC3D,OAAA6X,EAAOA,GAAQ,KAAK,SAAS,MAAMD,CAAE,EAC9BnB,GAAgB,KAAMzW,EAAI2X,EAAW,EAAI,EAAGjB,EAAQkB,CAAE,CAC9D,CACL,EAAK,CACD,IAAK,oBACL,MAAO,UAA6B,CAClC,OAAOd,EAAW,IACnB,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsB9W,EAAI,CAC/B,OAAO,KAAK,aAAe,GAAQ,GAAQA,GAAM,KAAOA,EAAG,wBAA0B,GAAO,KAAK,aAAe,EACjH,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB8X,EAAY,CACxC,KAAK,WAAaA,IAAe,EAClC,CACL,EAAK,CACD,IAAK,aACL,MAAO,UAAsB,CAC3B,OAAO,KAAK,WAAa,IAAQ,KAAK,UAAU,CAAC,EAAE,sBAAwB,IAAQ,KAAK,UAAU,CAAC,EAAE,sBAAwB,EAC9H,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBC,EAAU,CACpC,KAAK,SAAWA,IAAa,EAC9B,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBrL,EAAGsL,EAAS,CACpC,IAAIC,EAAa,KACbvL,EAAE,WAAa,OACjBuL,EAAa,KAAK,kBAAkBzB,GAAqBwB,EAAQ,SAAS,EACtEC,GAAc,OAChBA,EAAa,KAAK,iBAAiBvL,EAAE,UAAWsL,EAAQ,SAAS,EACjE,KAAK,cAAcxB,GAAqByB,EAAYD,EAAQ,SAAS,GAEvE,KAAK,qBAAqBC,CAAU,GAEtCja,EAAKlB,EAAgBga,EAAW,SAAS,EAAG,YAAa,IAAI,EAAE,KAAK,KAAMpK,EAAGsL,CAAO,EAChFtL,EAAE,YAAc,MAClB,KAAK,cAAcA,EAAE,UAAU,EAE7BA,EAAE,UAAY,MAChB,KAAK,YAAYA,EAAE,QAAQ,EAEzBA,EAAE,QACJ,KAAK,MAAQA,EAAE,OAEjB,IAAIwL,EAAW,KACXxL,EAAE,QACJwL,EAAW,KAAK,kBAAkB3B,GAAmByB,EAAQ,MAAM,EAC/DE,GAAY,OACdA,EAAW,CAACzD,GAA8B/H,EAAE,MAAM,EAAG+H,GAA8B/H,EAAE,MAAM,CAAC,EAC5F,KAAK,cAAc6J,GAAmB2B,EAAUF,EAAQ,MAAM,IAEvDtL,EAAE,UACXwL,EAAW,KAAK,kBAAkB3B,GAAmByB,EAAQ,OAAO,EAChEE,GAAY,OACdA,EAAW,CAACzD,GAA8B/H,EAAE,QAAQ,CAAC,CAAC,EAAG+H,GAA8B/H,EAAE,QAAQ,CAAC,CAAC,CAAC,EACpG,KAAK,cAAc6J,GAAmB2B,EAAUF,EAAQ,OAAO,IAG/DE,GAAY,OACd,KAAK,SAAS,OAAO,qBAAqB,KAAMA,CAAQ,EACpD,KAAK,SAAS,OAAO,gBAAgB,KAAK,UAAU,CAAC,CAAC,GACxD,KAAK,SAAS,QAAQ,KAAK,UAAU,CAAC,EAAE,OAAO,GAGnD,KAAK,SAAS,mBAAmB,KAAK,UAAWxL,CAAC,CACnD,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBjM,EAAGgQ,EAAS,CACnCzS,EAAKlB,EAAgBga,EAAW,SAAS,EAAG,WAAY,IAAI,EAAE,KAAK,KAAMrW,CAAC,EACtEgQ,IACF,KAAK,UAAU,CAAC,EAAE,SAAShQ,CAAC,EAC5B,KAAK,UAAU,CAAC,EAAE,SAASA,CAAC,EACxB,KAAK,mBACP,KAAK,kBAAkB,SAASA,CAAC,GAGjC,KAAK,WACP,KAAK,SAAS,kBAAkB,KAAK,UAAWA,CAAC,CAEpD,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAGgQ,EAAS,CACtCzS,EAAKlB,EAAgBga,EAAW,SAAS,EAAG,cAAe,IAAI,EAAE,KAAK,KAAMrW,CAAC,EACzEgQ,IACF,KAAK,UAAU,CAAC,EAAE,YAAYhQ,CAAC,EAC/B,KAAK,UAAU,CAAC,EAAE,YAAYA,CAAC,EAC3B,KAAK,mBACP,KAAK,kBAAkB,YAAYA,CAAC,GAGpC,KAAK,WACP,KAAK,SAAS,qBAAqB,KAAK,UAAWA,CAAC,CAEvD,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBM,EAAG,CAC5B/C,EAAKlB,EAAgBga,EAAW,SAAS,EAAG,aAAc,IAAI,EAAE,KAAK,KAAM/V,CAAC,EACxE,KAAK,WACP,KAAK,SAAS,oBAAoB,KAAK,UAAWA,CAAC,EAErD,KAAK,SAAS,iBAAiB,IAAI,CACpC,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB/C,EAAKlB,EAAgBga,EAAW,SAAS,EAAG,UAAW,IAAI,EAAE,KAAK,IAAI,EACtE,KAAK,UAAY,KACjB,KAAK,eAAiB,KACtB,KAAK,OAAS,KACd,KAAK,OAAS,KACd,KAAK,SAAS,iBAAiB,IAAI,EACnC,KAAK,UAAY,KACjB,KAAK,QAAU,EAChB,CACL,EAAK,CACD,IAAK,WACL,MAAO,UAAoB,CACzB,MAAO,CAAC,KAAK,UAAU,CAAC,EAAE,QAAO,EAAI,KAAK,UAAU,CAAC,EAAE,QAAS,CAAA,CACjE,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0BqB,EAAetL,EAAQ,CACtD,IAAIuL,EAAgB,CAClB,SAAU,KAAK,OAAO,SACtB,WAAY,KAAK,OAAO,WACxB,iBAAkB,KAAK,OAAO,gBAAgB,CAC/C,EACGC,EACJ,GAAI/M,EAAS6M,CAAa,EACxBE,EAAY,KAAK,SAAS,eAAe,KAAMF,EAAeC,CAAa,MACtE,CACL,IAAIE,EAAKH,EACTE,EAAY,KAAK,SAAS,eAAe,KAAMC,EAAG,KAAMpK,GAAMoK,EAAG,SAAW,CAAA,EAAIF,CAAa,CAAC,CAC/F,CACD,OAAIvL,GAAU,OACZwL,EAAU,OAASxL,GAEdwL,CACR,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BA,EAAWE,EAAcC,EAA8B3L,EAAQ,CAClG,GAAI,KAAK,YAAcwL,EAAW,CAChC,IAAII,EACAC,EAAkB,GAWtB,GAVI,KAAK,WAAa,OACpBD,EAAW,KAAK,UAChBC,EAAkB,KAAK,SAAS,kBAAkB,KAAK,SAAS,EAChE,KAAK,SAAS,iBAAiB,IAAI,GAErC,KAAK,UAAYL,EACbxL,GACF,KAAK,cAAc2J,GAAqB6B,EAAWxL,CAAM,EAE3D,KAAK,SAAS6L,CAAe,EACzBD,GAAY,KAAM,CACpB,IAAI1b,EAAI,KAAK,cACb,QAASuB,KAAKvB,EACZ,KAAK,SAAS,gBAAgBA,EAAEuB,CAAC,EAAG,IAAI,CAE3C,CACIia,GACH,KAAK,SAAS,iBAAiB,IAAI,CAEtC,CACF,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBJ,EAAeI,EAAcC,EAA8B3L,EAAQ,CAC/F,IAAIwL,EAAY,KAAK,iBAAiBF,EAAetL,CAAM,EAC3D,KAAK,qBAAqBwL,EAAWE,EAAcC,EAA8B3L,CAAM,CACxF,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB5J,EAAK0V,EAAa,CAChD,IAAI3D,EAAU,KAAK,UAAU/R,CAAG,EAC5B4U,EAAO7C,EAAQ,UACf4D,EAAM,KAAK,SAAS,aAAa5D,EAAQ,OAAO,EAChD6D,EAAOD,EAAI,QAAQ5D,CAAO,EAC1B8D,EAAOrC,GAAgB,KAAM,KAAMxT,EAAK,KAAM+R,EAAQ,QAAS6C,EAAMc,CAAW,EACpF,KAAK,UAAU1V,CAAG,EAAI6V,EACtBF,EAAI,OAAOC,EAAM,EAAGC,CAAI,EACxB9D,EAAQ,qBAAqB,IAAI,EACjC,KAAK,SAAS,eAAeA,CAAO,EACpC,KAAK,SAAS,KAAKzL,GAAyB,CAC1C,SAAUyL,EACV,QAAS8D,CACjB,CAAO,CACF,CACF,CAAA,CAAC,EACKhC,CACT,EAAE/H,EAAS,EACXzS,EAAgBwa,GAAY,OAAQ,YAAY,EAEhD,IAAIiC,GAAiB,CAAC,iBAAkB,sBAAuB,oBAAqB,YAAa,iBAAkB,iBAAkB,qBAAqB,EACtJC,GAAW,SAAUjC,EAAY,CACnCra,EAAUsc,EAAUjC,CAAU,EAC9B,IAAI7V,EAAS3D,EAAayb,CAAQ,EAClC,SAASA,EAASnd,EAAUqE,EAAQ,CAClC,IAAIiB,EACJvF,EAAgB,KAAMod,CAAQ,EAC9B7X,EAAQD,EAAO,KAAK,KAAMrF,EAAUqE,CAAM,EAC1CiB,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,cAAe,CAAE,CAAA,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,EAAI,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,MAAM,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,MAAM,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,MAAM,EAC5E7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,EAAI,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,MAAM,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,CAAC,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,MAAM,EAC5E7E,EAAgBa,EAAuBgE,CAAK,EAAG,wBAAyB,MAAM,EAC9E7E,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,MAAM,EAC5E7E,EAAgBa,EAAuBgE,CAAK,EAAG,qBAAsB,MAAM,EAC3E7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,MAAM,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,MAAM,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,MAAM,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,MAAM,EAC5E7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ,MAAM,EAC7D7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,uBAAwB,CAAC,GAAK,EAAG,CAAC,EACjFA,EAAM,oBAAoB,CACxB,SAAUjB,EAAO,SACjB,eAAgBA,EAAO,gBAAkB,KAAOiB,EAAM,SAAS,SAAS,eAAiBjB,EAAO,eAChG,WAAYA,EAAO,YAAciB,EAAM,SAAS,SAAS,cACzD,gBAAiBjB,EAAO,iBAAmBiB,EAAM,SAAS,SAAS,mBACnE,eAAgBjB,EAAO,eACvB,oBAAqBA,EAAO,oBAC5B,eAAgBA,EAAO,eACvB,oBAAqBA,EAAO,oBAC5B,kBAAmBA,EAAO,kBAC1B,UAAWA,EAAO,SACxB,CAAK,EACDiB,EAAM,QAAYjB,EAAO,UAAY,GACrCiB,EAAM,QAAU,GAChBA,EAAM,QAAUjB,EAAO,QACvBiB,EAAM,KAAOjB,EAAO,KACpBiB,EAAM,OAASjB,EAAO,OACtBiB,EAAM,UAAYjB,EAAO,UACzBiB,EAAM,eAAiBjB,EAAO,gBAAkB,KAAO,EAAIA,EAAO,eAClEiB,EAAM,oBAAsBjB,EAAO,oBACnCiB,EAAM,mBAAqB,GAC3BA,EAAM,OAAS,GACfA,EAAM,kBAAoBjB,EAAO,kBACjCiB,EAAM,eAAiBjB,EAAO,eAC9BiB,EAAM,oBAAsBjB,EAAO,oBACnCiB,EAAM,UAAYjB,EAAO,UACzBiB,EAAM,SAAWjB,EAAO,SACxBiB,EAAM,eAAiBjB,EAAO,eAC9BiB,EAAM,oBAAsBjB,EAAO,oBACnCiB,EAAM,cAAgBjB,EAAO,gBAAkB,GAC/CiB,EAAM,SAAWjB,EAAO,QAAU,GAClCiB,EAAM,kBAAoBjB,EAAO,mBAAqB,GACtDiB,EAAM,SAAWjB,EAAO,QAAU,GAClCiB,EAAM,YAAcjB,EAAO,aAAe,CAAA,EAC1CiB,EAAM,MAAQjB,EAAO,OAASrE,EAAS,aACvCsF,EAAM,UAAY,KAClBA,EAAM,oBAAsBjB,EAAO,qBAAuBrE,EAAS,SAAS,oBAC5EsF,EAAM,sBAAwBtF,EAAS,SAAS,sBAC5CqE,EAAO,wBAA0B,KACnCiB,EAAM,sBAAwB,IAEhCA,EAAM,oBAAsBjB,EAAO,sBAAwB,GACvDA,EAAO,kBACTiB,EAAM,KAAK8I,GAAuB/J,EAAO,gBAAgB,EAE3D,IAAIF,EAAKE,EAAO,UAAYA,EAAO,kBAAoBrE,EAAS,SAAS,SAEzE,GADAsF,EAAM,YAAYnB,CAAE,EAChBE,EAAO,gBAAkB,KAC3BiB,EAAM,kBAAkBjB,EAAO,cAAc,MACxC,CACL,IAAI+Y,EAAoB/Y,EAAO,OAASA,EAAO,OAASA,EAAO,QAAUA,EAAO,QAAUrE,EAAS,SAAS,QAAU8X,GAAgB,IACtIxS,EAAM,UAAU8X,CAAiB,CAClC,CACD,IAAI3K,EAAO,CAACoJ,GAASxX,EAAO,MAAQ,EAAE,EAAE,KAAK,GAAG,EAChD,OAAAiB,EAAM,QAAQmN,EAAMpO,EAAO,IAAI,EACxBiB,CACR,CACD,OAAAhF,EAAa6c,EAAU,CAAC,CACtB,IAAK,cACL,MAAO,UAAuB,CAC5B,MAAO,YACR,CACL,EAAK,CACD,IAAK,oBACL,MAAO,UAA6B,CAClC,MAAO,UACR,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,MAAO,CACL,EAAG,KAAK,SAAS,EACjB,EAAG,KAAK,SAAS,CACzB,CACK,CACL,EAAK,CACD,IAAK,uBACL,MAAO,UAAgC,CACrC,MAAO,kBACR,CACL,EAAK,CACD,IAAK,qBACL,MAAO,UAA8B,CACnC,IAAIE,EAAK,KAAK,SAAW,KAAK,QAAQ,SACtC,GAAIA,GAAM,MAAQA,EAAG,OAAS,EAAG,CAC/B,IAAIC,EAAiB,KAAK,SAAS,0BAA4B,IAAM,KAAK,mBAC1E,KAAK,mBAAqBD,EAC1B,IAAIE,EAAc,KAAK,SAAS,2BAA6B,KAAK,mBAAqB,IAAM,KAAK,mBAAqB,IACnHD,IAAmBC,IACrB,KAAK,YAAYD,CAAc,EAC/B,KAAK,SAASC,CAAW,EACzB,KAAK,SAAS,YAAY,KAAK,QAASD,CAAc,EACtD,KAAK,SAAS,SAAS,KAAK,QAASC,CAAW,EAEnD,CACF,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2B1C,EAAQ,CACxC,YAAK,SAAS,OAAO,UAAU,KAAMA,CAAM,EAC3C,KAAK,mBAAkB,EAChB,IACR,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgC2C,EAAe,CACpD,KAAK,KAAKpQ,GAAsB,CAC9B,SAAU,KACV,OAAQoQ,CAChB,CAAO,EACD,KAAK,mBAAkB,CACxB,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBC,EAAc,CACtC,IAAIlX,EAAI,KAAK,SAAS,OAAO,cAAckX,CAAY,EACvD,YAAK,kBAAkBlX,CAAC,EACjB,IACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBqE,EAAM,CAClC,KAAK,YAAY,KAAKA,CAAI,EAC1B,KAAK,SAAS,iBAAiB,IAAI,CACpC,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BxE,EAAYgB,EAAKsW,EAAiB,CACrEtW,EAAMA,GAAO,KAAO,KAAK,YAAY,QAAQhB,CAAU,EAAIgB,EACvDA,GAAO,IACT,KAAK,YAAY,OAAOA,EAAK,CAAC,EAC9B,KAAK,SAAS,iBAAiB,IAAI,GAEjC,CAACsW,GAAmB,KAAK,eAAiB,KAAK,YAAY,SAAW,GACxE,KAAK,SAAS,eAAe,IAAI,CAEpC,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+BrZ,EAAQ,CAE5C,QADIO,EAAI,KAAK,YAAY,OAChBnC,EAAI,EAAGA,EAAImC,EAAGnC,IACrB,KAAK,SAAS,iBAAiB,KAAK,YAAY,CAAC,EAAG4B,CAAM,CAE7D,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBsZ,EAAe,CAExC,QADI/Y,EAAI,CAAA,EACCnC,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,KACvC,KAAK,YAAYA,CAAC,EAAE,UAAU,CAAC,IAAMkb,GAAiB,KAAK,YAAYlb,CAAC,EAAE,UAAU,CAAC,IAAMkb,IAC7F/Y,EAAE,KAAK,KAAK,YAAYnC,CAAC,CAAC,EAG9B,QAASwR,EAAI,EAAG2J,EAAQhZ,EAAE,OAAQqP,EAAI2J,EAAO3J,IAC3C,KAAK,SAAS,iBAAiBrP,EAAE,CAAC,CAAC,EAErC,OAAO,IACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBM,EAAG2Y,EAAwBC,EAA0B,CAQ9E,GAPA3b,EAAKlB,EAAgBkc,EAAS,SAAS,EAAG,aAAc,IAAI,EAAE,KAAK,KAAMjY,CAAC,EAC1E,KAAK,SAAS,WAAWA,CAAC,EACtBA,EACF,KAAK,aAAY,EAEjB,KAAK,aAAY,EAEf,CAAC2Y,GACH,QAASpb,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAE3C,GADA,KAAK,YAAYA,CAAC,EAAE,WAAWyC,CAAC,EAC5B,CAAC4Y,EAA0B,CAC7B,IAAIC,EAAO,OAAS,KAAK,YAAYtb,CAAC,EAAE,UAAU,CAAC,EAAI,EAAI,EACvD,KAAK,YAAYA,CAAC,EAAE,UAAUsb,CAAI,EAAE,YAAY,SAAW,GAC7D,KAAK,YAAYtb,CAAC,EAAE,UAAUsb,CAAI,EAAE,WAAW7Y,EAAG,GAAM,EAAI,CAE/D,EAGN,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmB2L,EAAGsL,EAAS,CACpCha,EAAKlB,EAAgBkc,EAAS,SAAS,EAAG,YAAa,IAAI,EAAE,KAAK,KAAMtM,EAAGsL,CAAO,EAClF,KAAK,cAActL,EAAE,eAAiBA,EAAE,UAAU,EAClD,KAAK,mBAAmBA,EAAE,oBAAsBA,EAAE,eAAe,EACjE,KAAK,eAAiBA,EAAE,eACxB,KAAK,oBAAsBA,EAAE,oBAC7B,KAAK,UAAYA,EAAE,UACnB,KAAK,kBAAoBA,EAAE,kBAC3B,KAAK,SAAWA,EAAE,SACdA,EAAE,gBAAkB,OACtB,KAAK,eAAiBA,EAAE,gBAEtBA,EAAE,QACJ,KAAK,MAAQA,EAAE,OAEjBmB,EAAOnB,EAAGqM,EAAc,EACxB,KAAK,SAAS,kBAAkB,KAAMrM,CAAC,CACxC,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB1O,EAAKlB,EAAgBkc,EAAS,SAAS,EAAG,UAAW,IAAI,EAAE,KAAK,IAAI,EACpE,KAAK,QAAU,GACX,KAAK,UAAY,MACnB,KAAK,SAAS,gBAAgB,IAAI,CAErC,CACL,EAAK,CACD,IAAK,SACL,MAAO,UAAkB,CACvB,OAAO,KAAK,iBAAmB,EAAI,GAAO,EAAE,KAAK,WAAY,GAAI,KAAK,eAAiB,GAAK,KAAK,YAAY,OAAS,KAAK,eAC5H,CACL,EAAK,CACD,IAAK,aACL,MAAO,UAAsB,CAC3B,OAAO,KAAK,SAAS,OAAO,WAAW,IAAI,CAC5C,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBQ,EAAe,CAC3C,IAAIK,EAAQ,GACZ,GAAIL,GACF,QAASlb,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAC3C,GAAI,KAAK,YAAYA,CAAC,EAAE,UAAU,CAAC,IAAMkb,GAAiB,KAAK,YAAYlb,CAAC,EAAE,UAAU,CAAC,IAAMkb,EAAe,CAC5GK,EAAQ,GACR,KACD,EAGL,OAAOA,CACR,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgCC,EAAS,CAC9C,KAAK,oBAAsBA,CAC5B,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,OAAO,KAAK,IACb,CACL,EAAK,CACD,IAAK,oBACL,MAAO,UAA6B,CAClC,OAAO,KAAK,YAAY,CAAC,CAC1B,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB9Z,EAAI6M,EAAQ,CAC1C,IAAIkN,EAAe,CACjB,SAAU,KAAK,SACf,SAAU,IAClB,EACU1Z,EACJ,GAAI2Z,GAAiBha,EAAIY,EAAsB,EAAG,CAChD,IAAIT,EAAMH,EACVK,EAAWN,EAAgB,MAAMI,CAAG,EACpCE,EAAS,QAAU0Z,EAAa,SAAS,MAAM,GAAG,CAC1D,SAAiBzO,EAAStL,CAAE,EACpBK,EAAWN,EAAgB,IAAI,KAAMC,EAAI+Z,CAAY,MAChD,CACL,IAAIE,EAAMja,EACV6N,EAAOkM,EAAcE,EAAI,SAAW,CAAE,CAAA,EACtC5Z,EAAWN,EAAgB,IAAI,KAAMka,EAAI,KAAMF,CAAY,CAC5D,CACD,OAAA1Z,EAAS,OAASwM,EACXxM,CACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBL,EAAI,CAC9B,IAAIka,EAAM,KAAK,gBAAgBla,CAAE,EACjC,KAAK,oBAAoBka,CAAG,CAC7B,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6Bla,EAAI,CAClC,KAAK,UAAY,MACnB,KAAK,SAAS,gBAAgB,IAAI,EAEpC,KAAK,SAAWA,CACjB,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBmD,EAAOsN,EAAS,CACvCzS,EAAKlB,EAAgBkc,EAAS,SAAS,EAAG,WAAY,IAAI,EAAE,KAAK,KAAM7V,EAAOsN,CAAO,EACjF,KAAK,UAAY,MACnB,KAAK,SAAS,SAAStN,CAAK,CAE/B,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAOsN,EAAS,CAC1CzS,EAAKlB,EAAgBkc,EAAS,SAAS,EAAG,cAAe,IAAI,EAAE,KAAK,KAAM7V,EAAOsN,CAAO,EACpF,KAAK,UAAY,MACnB,KAAK,SAAS,YAAYtN,CAAK,CAElC,CACF,CAAA,CAAC,EACK6V,CACT,EAAEjK,EAAS,EAEPoL,GAAS,SAASA,EAAOte,EAAU+b,EAAI,CACzChc,EAAgB,KAAMue,CAAM,EAC5B,KAAK,SAAWte,EAChB,KAAK,GAAK+b,EACVtb,EAAgB,KAAM,QAAS,MAAM,CACvC,EACI8d,GAAU,SAAUC,EAAS,CAC/B3d,EAAU0d,EAASC,CAAO,EAC1B,IAAInZ,EAAS3D,EAAa6c,CAAO,EACjC,SAASA,EAAQve,EAAU+b,EAAI0C,EAAS,CACtC,IAAInZ,EACJvF,EAAgB,KAAMwe,CAAO,EAC7BjZ,EAAQD,EAAO,KAAK,KAAMrF,EAAU+b,CAAE,EACtCzW,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,CAAE,CAAA,EAC7D7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,EAAK,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,MAAM,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,cAAe,CAC5D,OAAQ,CAAE,EACV,OAAQ,CAAE,EACV,SAAU,CAAE,CAClB,CAAK,EACD7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,MAAM,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,KAAM,MAAM,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ,MAAM,EAC7D,IAAIoZ,EAAMpZ,EAAM,GAChB,OAAAoZ,EAAI,gBAAkB,GACtBA,EAAI,cAAgBpd,EAAuBgE,CAAK,EAChDA,EAAM,KAAOtF,EAAS,MAAM+b,CAAE,EAC9BzW,EAAM,OAASmZ,EAAQ,SAAW,GAClCnZ,EAAM,OAASA,EAAM,SAAW,GAAO,GAAQmZ,EAAQ,SAAW,GAClEnZ,EAAM,UAAYmZ,EAAQ,YAAc,GACxCnZ,EAAM,MAAQmZ,EAAQ,QAAU,GAChCnZ,EAAM,QAAUmZ,EAAQ,UAAY,GACpCnZ,EAAM,MAAQA,EAAM,SAAW,IAAQmZ,EAAQ,QAAU,GACzDnZ,EAAM,UAAYA,EAAM,OAASmZ,EAAQ,YAAc,GACvDnZ,EAAM,QAAUmZ,EAAQ,UAAY,GACpCnZ,EAAM,GAAKmZ,EAAQ,IAAM/O,EAAI,EAC7BpK,EAAM,aAAemZ,EAAQ,eAAiB,GAC9CnZ,EAAM,OAASmZ,EAAQ,OACvBnZ,EAAM,SAAWmZ,EAAQ,SACzBnZ,EAAM,OAASmZ,EAAQ,OACvBze,EAAS,aAAa+b,EAAIhQ,GAAiB,EAAE,EACtCzG,CACR,CACD,OAAAhF,EAAaie,EAAS,CAAC,CACrB,IAAK,cACL,IAAK,UAAe,CAClB,OAAO,KAAK,SAAS,oBAAoB,IAAI,CAC9C,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBxC,EAAI4C,EAAa,CAC5C,OAAO,KAAK,eAAiB,KAAK,QAAU,KAAK,OAAS,KAAK,OAChE,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmB/T,EAAMgU,EAAe,CAC7C,OAAO,KAAK,QAAU,YACvB,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBhU,EAAMgU,EAAe,CAC/C,OAAO,KAAK,UAAY,CACtB,KAAMzZ,GAAY,KAClB,QAAS,CACP,OAAQ,EACT,CACT,CACK,CACL,EAAK,CACD,IAAK,MACL,MAAO,SAAa0Z,EAAKC,EAAgB,CACvC,IAAIC,EAAW,KAAK,SAAS,oBAAoB,IAAI,EACjDC,EAAOH,EACX,GAAIG,EAAK,qBAAuB,KAAM,CACpC,GAAIA,EAAK,sBAAwB,KAC/B,OAEAA,EAAK,oBAAoB,OAAOH,EAAK,GAAMC,EAAgB,EAAK,CAEnE,CACDE,EAAK,oBAAsB,KAC3B,KAAK,SAAS,KAAK,IAAIV,GAAO,KAAK,SAAUO,CAAG,CAAC,EACjD,KAAK,SAAS,eAAeG,EAAMD,CAAQ,EAC3C,KAAK,QAAQ,2BAA2B,IAAI,CAC7C,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBhD,EAAI,CAC9B,OAAOA,GAAM,KAAO,KAAOkD,GAAgB,KAAK,SAAU,SAAUjE,EAAG,CACrE,OAAOA,EAAE,KAAOe,CACxB,CAAO,CACF,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgBA,EAAImD,EAAeJ,EAAgBK,EAAwBR,EAAa,CAC7F,IAAIS,EAAS,KAAK,YAAYrD,CAAE,EAC5BqD,GAAU,MACZ,KAAK,UAAUA,EAAQF,EAAeJ,EAAgBK,EAAwBR,CAAW,CAE5F,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBU,EAAOH,EAAeJ,EAAgBK,EAAwBR,EAAa,CACnG,IAAIK,EAAOK,EAAM,GAKjB,GAJA,OAAOL,EAAK,oBACZM,EAAmB,KAAK,SAAU,SAAUje,EAAG,CAC7C,OAAOA,IAAMge,CACrB,CAAO,EACGH,EACF,GAAI,CACF,KAAK,SAAS,oBAAoB,IAAI,EAAE,YAAYF,CAAI,CACzD,OAAQ3d,EAAP,CACAwD,EAAI,uCAAyCxD,CAAC,CAC/C,CAEH,GAAI,CAACyd,EAAgB,CACnB,IAAI3d,EAAI,CACN,MAAO,KACP,GAAI6d,CACd,EACYL,IACFxd,EAAE,YAAcwd,GAElB,KAAK,SAAS,KAAKzQ,GAA4B/M,CAAC,CACjD,CACIge,GACH,KAAK,QAAQ,2BAA2B,IAAI,CAE/C,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBD,EAAeJ,EAAgB,CACvD,QAASrc,EAAI,EAAGwG,EAAI,KAAK,SAAS,OAAQxG,EAAIwG,EAAGxG,IAAK,CACpD,IAAI4c,EAAQ,KAAK,SAAS,CAAC,EAC3B,KAAK,UAAUA,EAAOH,EAAeJ,EAAgB,EAAI,EACzD,KAAK,SAAS,SAASO,EAAM,GAAI,EAAI,CACtC,CACD,KAAK,SAAS,OAAS,EACvB,KAAK,QAAQ,2BAA2B,IAAI,CAC7C,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAE1B,QADIE,EAAoB,CAAA,EACf9c,EAAI,EAAGA,EAAI,KAAK,SAAS,OAAQA,IAAK,CAC7C,IAAI+c,EAAc,KAAK,QAAQ,OAAO,KAAK,SAAS/c,CAAC,EAAE,GAAI,EAAK,EAChE8c,EAAkBC,EAAY,EAAE,EAAIA,EAAY,GACjD,CACD,YAAK,SAAS,OAAS,EAChBD,CACR,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBE,EAAO,CAC9B,GAAI,KAAK,SAAS,mBAAqBA,IAAU,KAAM,CACrD,GAAI,KAAK,SAAS,aAAa,WAAW,KAAMA,CAAK,EACnD,MAAO,GAELA,EAAM,OAAS,MACjBA,EAAM,MAAM,YAAYA,CAAK,EAE/B,IAAIC,EAAY,KAAK,SAAS,MAAMD,EAAM,EAAE,EACxCE,EAAQ,KAAK,SAAS,mBAAoB,EAACD,CAAS,EACxDC,EAAM,MAAQ,KAAK,KACnB,IAAIC,EAAQ,KAAK,SAAS,wBAAwBH,EAAM,EAAE,EACtDI,EAAO,KAAK,UAAY,KAAK,SAAS,wBAAwB,KAAK,EAAE,EAAI,KAAK,SAAS,wBAAwB,KAAK,SAAS,oBAAoB,IAAI,CAAC,EAC1JJ,EAAM,GAAG,oBAAsB,KAC/B,KAAK,SAAS,KAAKA,CAAK,EACxB,KAAK,SAAS,sBAAsB,KAAMA,EAAM,EAAE,EAClDA,EAAM,MAAQ,KACd,IAAID,EAAc,CAChB,EAAGI,EAAM,EAAIC,EAAK,EAClB,EAAGD,EAAM,EAAIC,EAAK,CAC5B,EACQ,YAAK,SAAS,YAAYJ,EAAM,GAAID,CAAW,EAC/C,KAAK,SAAS,KAAKnR,GAA0B,CAC3C,OAAQ,KACR,MAAOoR,CACjB,CAAS,EACM,EACf,KACQ,OAAO,EAEV,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAO,CACjC,GAAIA,EAAM,QAAU,KAAM,CACxB,IAAIf,EAAMe,EAAM,GACZ/O,EAAI,KAAK,SAAS,oBAAoB,IAAI,EAC1CA,IAAMgO,EAAI,YACZhO,EAAE,YAAY+O,EAAM,EAAE,EAExB,IAAIC,EAAY,KAAK,SAAS,MAAMD,EAAM,EAAE,EACxCE,EAAQ,KAAK,SAAS,mBAAoB,EAACD,CAAS,EACpDC,GACF,OAAOA,EAAM,MAEf,KAAK,SAAW,KAAK,SAAS,OAAO,SAAUG,EAAI,CACjD,OAAOA,EAAG,KAAOL,EAAM,EACjC,CAAS,EACD,OAAOA,EAAM,MACb,OAAOf,EAAI,oBACX,KAAK,SAAS,KAAKpQ,GAA4B,CAC7C,OAAQ,KACR,MAAOmR,CACjB,CAAS,CACF,CACF,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,SAAS,OAAO,SAAUK,EAAI,CACxC,OAAOA,EAAG,cAAgBvB,CAClC,CAAO,CACF,CACL,EAAK,CACD,IAAK,WACL,MAAO,UAAoB,CACzB,OAAO,KAAK,SAAS,OAAO,SAAUuB,EAAI,CACxC,OAAOA,EAAG,cAAgBxB,EAClC,CAAO,CACF,CACL,EAAK,CACD,IAAK,iBACL,IAAK,UAAe,CAClB,IAAIwB,EAAK,KACT,GAAI,KAAK,OAAS,KAChB,OAAO,KAGP,QADIzZ,EAAI,KAAK,MACNA,GAAK,MACNA,EAAE,YACJyZ,EAAKzZ,GAEPA,EAAIA,EAAE,MAER,OAAOyZ,CAEV,CACF,CAAA,CAAC,EACKvB,CACT,EAAED,EAAM,EAEJyB,GAAe,UAAY,CAC7B,SAASA,EAAa/f,EAAU,CAC9B,IAAIsF,EAAQ,KACZvF,EAAgB,KAAMggB,CAAY,EAClC,KAAK,SAAW/f,EAChBS,EAAgB,KAAM,WAAY,CAAA,CAAE,EACpCA,EAAgB,KAAM,uBAAwB,CAAA,CAAE,EAChDA,EAAgB,KAAM,uBAAwB,CAAA,CAAE,EAChDT,EAAS,KAAKsN,GAA2B,SAAUnM,EAAG,CACpD,IAAI6e,EAAc1a,EAAM,YAAYnE,EAAE,MAAM,EACxCwd,EAAcrZ,EAAM,YAAYnE,EAAE,MAAM,EACxC6e,GAAe,MAAQrB,GAAe,MAAQqB,IAAgBrB,GAChErZ,EAAM,qBAAqBnE,EAAE,WAAW,EAAE,EAAI6e,EAC9C1a,EAAM,qBAAqBnE,EAAE,WAAW,EAAE,EAAI6e,EAC9CC,GAAQD,EAAY,YAAY,SAAU7e,EAAE,UAAU,IAElD6e,GAAe,OACb7e,EAAE,OAAO,gBAAkB6e,EAC7BC,GAAQD,EAAY,YAAY,SAAU7e,EAAE,UAAU,EAEtD8e,GAAQD,EAAY,YAAY,OAAQ7e,EAAE,UAAU,EAEtDmE,EAAM,qBAAqBnE,EAAE,WAAW,EAAE,EAAI6e,GAE5CrB,GAAe,OACbxd,EAAE,OAAO,gBAAkBwd,EAC7BsB,GAAQtB,EAAY,YAAY,SAAUxd,EAAE,UAAU,EAEtD8e,GAAQtB,EAAY,YAAY,OAAQxd,EAAE,UAAU,EAEtDmE,EAAM,qBAAqBnE,EAAE,WAAW,EAAE,EAAIwd,GAGxD,CAAK,EACD3e,EAAS,KAAK4N,GAAoC,SAAUzM,EAAG,CAC7DmE,EAAM,2BAA2BnE,EAAE,UAAU,CACnD,CAAK,EACDnB,EAAS,KAAKwN,GAAwB,SAAUrM,EAAG,CACjD,IAAI+e,EAAkB/e,EAAE,iBAAiB,QACrCgf,EAAgB7a,EAAM,YAAY4a,CAAe,EACjDE,EAAcjf,EAAE,WAAW,UAAUA,EAAE,KAAK,EAC5Ckf,EAAaD,EAAY,QACzBE,EAAWhb,EAAM,YAAY+a,CAAU,EACvCE,EAAUpf,EAAE,QAAU,EAAImE,EAAM,qBAAuBA,EAAM,qBAC7Dkb,EAAerf,EAAE,QAAU,EAAImE,EAAM,qBAAuBA,EAAM,qBAClEgb,GAAY,MACdC,EAAQpf,EAAE,WAAW,EAAE,EAAImf,EACvBnf,EAAE,WAAW,SAAWA,EAAE,WAAW,SACvCqf,EAAarf,EAAE,WAAW,EAAE,EAAImf,KAGlC,OAAOC,EAAQpf,EAAE,WAAW,EAAE,EAC1BA,EAAE,WAAW,SAAWA,EAAE,WAAW,QACvC,OAAOqf,EAAarf,EAAE,WAAW,EAAE,GAGnCgf,GAAiB,MACnB7a,EAAM,2BAA2B6a,CAAa,EAE5CG,GAAY,MACdhb,EAAM,2BAA2Bgb,CAAQ,CAEjD,CAAK,CACF,CACD,OAAAhgB,EAAayf,EAAc,CAAC,CAC1B,IAAK,6BACL,MAAO,SAAoCnV,EAAM,CAC/CA,EAAK,QAAQ,OAAS,EACtB,IAAI6U,EAAQ,KAAK,qBAAqB7U,EAAK,EAAE,EACzC4N,EACAiH,GAAS,OACXjH,EAAI,SAAW5T,EAAG,CAChB,OAAOA,EAAE,KAAOgG,EAAK,EAC/B,EACQ0U,EAAmBG,EAAM,YAAY,OAAQjH,CAAC,EAC9C8G,EAAmBG,EAAM,YAAY,OAAQjH,CAAC,EAC9C8G,EAAmBG,EAAM,YAAY,SAAUjH,CAAC,EAChD,OAAO,KAAK,qBAAqB5N,EAAK,EAAE,GAE1C6U,EAAQ,KAAK,qBAAqB7U,EAAK,EAAE,EACrC6U,GAAS,OACXjH,EAAI,SAAW5T,EAAG,CAChB,OAAOA,EAAE,KAAOgG,EAAK,EAC/B,EACQ0U,EAAmBG,EAAM,YAAY,OAAQjH,CAAC,EAC9C8G,EAAmBG,EAAM,YAAY,OAAQjH,CAAC,EAC9C8G,EAAmBG,EAAM,YAAY,SAAUjH,CAAC,EAChD,OAAO,KAAK,qBAAqB5N,EAAK,EAAE,EAE3C,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBvG,EAAQ,CAC/B,IAAIqa,EAAMra,EAAO,GACjB,GAAI,KAAK,SAASA,EAAO,EAAE,GAAK,KAC9B,MAAM,IAAI,MAAM,wBAA0BA,EAAO,GAAK,gCAAgC,EAExF,GAAIqa,EAAI,iBAAmB,KACzB,MAAM,IAAI,MAAM,wBAA0Bra,EAAO,GAAK,yCAAyC,EAEjG,IAAIob,EAAQ,IAAIlB,GAAQ,KAAK,SAAUla,EAAO,GAAIA,CAAM,EACxD,YAAK,SAASob,EAAM,EAAE,EAAIA,EACtBpb,EAAO,WACT,KAAK,cAAcob,CAAK,EAE1B,KAAK,SAAS,OAAOA,EAAM,EAAE,EAC7B,KAAK,SAAS,SAASA,EAAM,GAAIvS,EAAoB,EACrDuS,EAAM,QAAU,KAChB,KAAK,2BAA2BA,CAAK,EACrC,KAAK,SAAS,KAAK3R,GAAmB,CACpC,MAAO2R,CACf,CAAO,EACMA,CACR,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBgB,EAAS,CAChC,IAAIhB,EAAQgB,EACZ,GAAIhR,EAASgR,CAAO,IAClBhB,EAAQ,KAAK,SAASgB,CAAO,EACzBhB,GAAS,MACX,MAAM,IAAI,MAAM,kBAAoBgB,EAAU,GAAG,EAGrD,OAAOhB,CACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqB1D,EAAI,CAK9B,QAJI2C,EAAM3C,EACNnX,EAAI,KAAK,SAAS,aAAY,EAC9B8b,EAAQ,GACRra,EAAI,KACD,CAACqa,GACFhC,GAAO,MAAQA,IAAQ9Z,EACzB8b,EAAQ,GAEJhC,EAAI,qBACNrY,EAAIqY,EAAI,oBACRgC,EAAQ,IAERhC,EAAMA,EAAI,WAIhB,OAAOrY,CACR,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,IAAIA,EAAI,CAAA,EACR,QAAS1F,KAAO,KAAK,SACnB0F,EAAE,KAAK,KAAK,SAAS1F,CAAG,CAAC,EAE3B,OAAO0F,CACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBoZ,EAAOkB,EAAeC,EAAgB9B,EAAgB,CAChF,IAAI5K,EAAS,KACT2M,EAAc,KAAK,SAASpB,CAAK,EACrC,KAAK,YAAYoB,EAAa,EAAI,EAClC,IAAIC,EAAe,CAAA,EACnB,OAAAC,EAAQF,EAAY,SAAU,SAAUzB,EAAQ,CAC9C,IAAIO,EAAQzL,EAAO,SAAS,mBAAoB,EAACA,EAAO,SAAS,MAAMkL,EAAO,EAAE,CAAC,EAC7EO,GACF,OAAOA,EAAM,KAEvB,CAAO,EACGgB,GACFI,EAAQF,EAAY,UAAW,EAAE,SAAUf,EAAI,CAC7C,OAAO5L,EAAO,YAAY4L,EAAIa,EAAeC,CAAc,CACrE,CAAS,EACDC,EAAY,UAAUD,EAAgB9B,CAAc,IAEhD+B,EAAY,OACdE,EAAQF,EAAY,SAAU,SAAU,EAAG,CACzC,OAAOA,EAAY,MAAM,IAAI,EAAE,EAAE,CAC7C,CAAW,EAEHC,EAAeD,EAAY,aAEzBA,EAAY,OACdA,EAAY,MAAM,YAAYA,CAAW,EAE3C,KAAK,SAAS,SAASA,EAAY,GAAI,EAAI,EAC3C,OAAO,KAAK,SAASA,EAAY,EAAE,EACnC,KAAK,SAAS,KAAK1S,GAAqB,CACtC,MAAO0S,CACf,CAAO,EACMC,CACR,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBH,EAAeC,EAAgB9B,EAAgB,CAC7E,QAASkC,KAAM,KAAK,SAClB,KAAK,YAAY,KAAK,SAASA,CAAE,EAAGL,EAAeC,EAAgB9B,CAAc,CAEpF,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBtG,EAAG,CACzB,QAAS7X,KAAO,KAAK,SACnB6X,EAAE,KAAK,SAAS7X,CAAG,CAAC,CAEvB,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgBob,EAAIkF,EAAyB,CAClD,IAAIvC,EAAM3C,EACV,GAAI2C,EAAI,oBAAqB,CAC3B,IAAIwC,EAAgBxC,EAAI,oBACpB1J,EAAK,KAAK,SAAS,MAAM0J,CAAG,EAC5ByC,EAAM,KAAK,SAAS,UAAUpF,CAAE,EACpC,OAAIkF,IAA4B,IAAQC,EAAc,MACpD,KAAK,SAAS,sBAAsBA,EAAc,MAAOnF,CAAE,EAE3D,KAAK,SAAS,0BAA0BA,CAAE,EAE5C,KAAK,SAAS,YAAYA,EAAIoF,CAAG,EACjC,OAAOzC,EAAI,oBACJ,CACL,GAAI1J,EACJ,IAAKmM,CACf,CACO,CACF,CACL,EAAK,CACD,IAAK,6BACL,MAAO,SAAoC1B,EAAO,CAChD,IAAInL,EAAS,KACbmL,EAAM,YAAY,OAAO,OAAS,EAClCA,EAAM,YAAY,OAAO,OAAS,EAClCA,EAAM,YAAY,SAAS,OAAS,EACpC,IAAI2B,EAAU3B,EAAM,SAAS,MAAK,EAAG,IAAI,SAAU1U,EAAI,CACrD,OAAOA,EAAG,EAClB,CAAO,EACGsW,EAAe,CAAA,EAKnB,GAJAN,EAAQK,EAAS,SAAUE,EAAQ,CACjC,MAAM,UAAU,KAAK,MAAMD,EAAc/M,EAAO,SAAS,YAAYgN,EAAQxS,EAAwB,CAAC,CAC9G,CAAO,EACD,MAAM,UAAU,KAAK,MAAMsS,EAASC,CAAY,EAC5CD,EAAQ,OAAS,EAAG,CACtB,IAAIG,EAAK,KAAK,SAAS,eAAe,CACpC,OAAQH,EACR,MAAOI,EACR,EAAE,EAAI,EACHC,EAAK,KAAK,SAAS,eAAe,CACpC,OAAQL,EACR,MAAOI,EACR,EAAE,EAAI,EACHE,EAAY,CAAA,EACZC,EAAIC,EACJC,EAAS,SAAgBjd,EAAG,CAC9B,QAASnC,EAAI,EAAGA,EAAImC,EAAE,OAAQnC,IACxBif,EAAU9c,EAAEnC,CAAC,EAAE,EAAE,IAGrBif,EAAU9c,EAAEnC,CAAC,EAAE,EAAE,EAAI,GACrBkf,EAAKrN,EAAO,YAAY1P,EAAEnC,CAAC,EAAE,MAAM,EACnCmf,EAAKtN,EAAO,YAAY1P,EAAEnC,CAAC,EAAE,MAAM,EAC/BmC,EAAEnC,CAAC,EAAE,SAAWgd,EAAM,IAAMmC,IAAOnC,GAAS7a,EAAEnC,CAAC,EAAE,SAAWgd,EAAM,IAAMkC,IAAOlC,EACjFA,EAAM,YAAY,SAAS,KAAK7a,EAAEnC,CAAC,CAAC,EAC3Bkf,IAAOlC,GACZmC,IAAOnC,EACTA,EAAM,YAAY,OAAO,KAAK7a,EAAEnC,CAAC,CAAC,EAElCgd,EAAM,YAAY,SAAS,KAAK7a,EAAEnC,CAAC,CAAC,EAEtC6R,EAAO,qBAAqB1P,EAAEnC,CAAC,EAAE,EAAE,EAAIgd,GAC9BmC,IAAOnC,IAChBA,EAAM,YAAY,OAAO,KAAK7a,EAAEnC,CAAC,CAAC,EAClC6R,EAAO,qBAAqB1P,EAAEnC,CAAC,EAAE,EAAE,EAAIgd,GAGrD,EACQoC,EAAON,CAAE,EACTM,EAAOJ,CAAE,CACV,CACF,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6B7W,EAAM5C,EAAOyX,EAAO,CACtD,IAAIqC,EAAUlX,EAAK,UAAU5C,IAAU,EAAI,EAAI,CAAC,EAAE,QAClD,GAAI8Z,EAAQ,qBAAuB,CAACA,EAAQ,oBAAoB,SAAWA,EAAQ,oBAAoB,UACrG,MAAO,GAET,IAAIhH,EAAKlQ,EAAK,UAAU,CAAC,EAAE,QACvBmX,EAAMjH,EAAG,oBACTkH,EAAQD,GAAO,KAAOA,EAAI,gBAAkBA,EAAM,KAClDE,EAAKrX,EAAK,UAAU,CAAC,EAAE,QACvBsX,EAAMD,EAAG,oBACTE,EAAQD,GAAO,KAAOA,EAAI,gBAAkBA,EAAM,KACtD,GAAIF,GAAS,MAAQG,GAAS,MAAQH,EAAM,KAAOG,EAAM,GAAI,CAC3D,IAAIC,EAAU3C,EAAM,GAChB,YAAK,SAAS,MAAM2C,CAAO,EAC/B,KAAK,SAAS,gBAAgBxX,EAAM5C,EAAOoa,EAC3C,SAAUxX,EAAM5C,EAAO,CACrB,OAAOyX,EAAM,YAAY7U,EAAM5C,CAAK,CAC9C,EAAW,SAAU4C,EAAM5C,EAAO,CACxB,OAAOyX,EAAM,UAAU7U,EAAM5C,CAAK,CAC5C,CAAS,EACM,EACf,KACQ,OAAO,EAEV,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BpD,EAAGoD,EAAOyX,EAAO,CACjD,KAAK,SAAS,kBAAkB7a,EAAGoD,CAAK,CACzC,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6B+T,EAAIsG,EAAU,CAGhD,QAFIzd,EAAI,KAAK,SAAS,aAAY,EAC9B8b,EAAQ,GACL,CAACA,GAAO,CACb,GAAI3E,GAAM,MAAQA,IAAOnX,EACvB,MAAO,GAEP,GAAImX,IAAOsG,EACT,MAAO,GAEPtG,EAAKA,EAAG,UAGb,CACF,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB0D,EAAO,CACnC,IAAI6C,EAAS,KACTzB,EAAc,KAAK,SAASpB,CAAK,EACrC,GAAI,EAAAoB,GAAe,MAAQA,EAAY,WAGvC,KAAIuB,EAAUvB,EAAY,GAC1B,GAAIA,EAAY,gBAAkB,KAAM,CAKtC,GAJA,KAAK,SAAS,gBAAgBA,EAAa,EAAK,EAChDA,EAAY,UAAY,GACxB,KAAK,SAAS,YAAYuB,EAASlV,EAAoB,EACvD,KAAK,SAAS,SAASkV,EAASnV,EAAqB,EACjD4T,EAAY,QAAS,CACvB,IAAI0B,EAAyB,IAAI,IAC7BC,EAAe,SAAsBC,EAAOza,EAAO,CACrD,QAASvF,EAAI,EAAGA,EAAIggB,EAAM,OAAQhgB,IAAK,CACrC,IAAImC,EAAI6d,EAAMhgB,CAAC,EACX6f,EAAO,oBAAoB1d,EAAGoD,EAAO6Y,CAAW,IAAM,IACxD0B,EAAuB,IAAI3d,EAAE,EAAE,CAElC,CACb,EACU4d,EAAa3B,EAAY,YAAY,OAAQ,CAAC,EAC9C2B,EAAa3B,EAAY,YAAY,OAAQ,CAAC,EAC9CE,EAAQF,EAAY,UAAW,EAAE,SAAUf,EAAI,CAC7CwC,EAAO,gBAAgBzB,EAAaf,EAAIyC,CAAsB,CAC1E,CAAW,CACF,CACD,KAAK,SAAS,WAAWH,CAAO,EAChC,KAAK,aAAavB,CAAW,EAC7B,KAAK,SAAS,KAAK9S,GAAsB,CACvC,MAAO8S,CACjB,CAAS,CACT,MACQA,EAAY,UAAY,GACxB,KAAK,SAAS,YAAYuB,EAASlV,EAAoB,EACvD,KAAK,SAAS,SAASkV,EAASnV,EAAqB,EAExD,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyByV,EAAgB/D,EAAagE,EAAc,CACzE,IAAIC,EAAS,KACb,GAAIF,EAAe,QAAS,CAC1B,IAAIF,EAAe,SAAsBC,EAAOza,EAAO,CACrD,QAASvF,EAAI,EAAGA,EAAIggB,EAAM,OAAQhgB,IAAK,CACrC,IAAImC,EAAI6d,EAAMhgB,CAAC,EACVkgB,EAAa,IAAI/d,EAAE,EAAE,GACpBge,EAAO,oBAAoBhe,EAAGoD,EAAO0a,CAAc,IAAM,IAC3DC,EAAa,IAAI/d,EAAE,EAAE,CAG1B,CACX,EACQ4d,EAAa7D,EAAY,YAAY,OAAQ,CAAC,EAC9C6D,EAAa7D,EAAY,YAAY,OAAQ,CAAC,CAC/C,CACDoC,EAAQpC,EAAY,UAAW,EAAE,SAAUmB,EAAI,CAC7C8C,EAAO,gBAAgBF,EAAgB5C,EAAI6C,CAAY,CAC/D,CAAO,CACF,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBlD,EAAOX,EAAgB,CACjD,IAAI+D,EAAS,KACThC,EAAc,KAAK,SAASpB,CAAK,EACrC,GAAIoB,GAAe,KAGnB,KAAIuB,EAAUvB,EAAY,GAC1B,GAAIA,EAAY,gBAAkB,KAAM,CAKtC,GAJA,KAAK,SAAS,gBAAgBA,EAAa,EAAI,EAC/CA,EAAY,UAAY,GACxB,KAAK,SAAS,SAASuB,EAASlV,EAAoB,EACpD,KAAK,SAAS,YAAYkV,EAASnV,EAAqB,EACpD4T,EAAY,QAAS,CACvB,IAAIiC,EAAa,SAAoBL,EAAOza,EAAO,CACjD,QAASvF,EAAI,EAAGA,EAAIggB,EAAM,OAAQhgB,IAAK,CACrC,IAAImC,EAAI6d,EAAMhgB,CAAC,EACfogB,EAAO,kBAAkBje,EAAGoD,EAAO6Y,CAAW,CAC/C,CACb,EACUiC,EAAWjC,EAAY,YAAY,OAAQ,CAAC,EAC5CiC,EAAWjC,EAAY,YAAY,OAAQ,CAAC,EAC5C,IAAIkC,EAAqB,SAASA,EAAmBtD,EAAOuD,EAA+B,CACzF,GAAIA,GAAiCvD,EAAM,UAAW,CACpD,IAAI+C,EAAe,SAAsBC,EAAOza,EAAO,CACrD,QAASvF,EAAI,EAAGA,EAAIggB,EAAM,OAAQhgB,IAAK,CACrC,IAAImC,EAAI6d,EAAMhgB,CAAC,EACfogB,EAAO,oBAAoBje,EAAGoD,EAAOyX,EAAM,gBAAkBA,CAAK,CACnE,CACjB,EACc+C,EAAa/C,EAAM,YAAY,OAAQ,CAAC,EACxC+C,EAAa/C,EAAM,YAAY,OAAQ,CAAC,EACxCsB,EAAQtB,EAAM,YAAY,SAAU,SAAU7a,EAAG,CAC/C,OAAOA,EAAE,WAAW,EAAK,CACzC,CAAe,EACDmc,EAAQtB,EAAM,UAAW,EAAE,SAAUpZ,EAAG,CACtC,OAAO0c,EAAmB1c,EAAG,EAAI,CACjD,CAAe,CACf,MACcwc,EAAO,YAAYpD,EAAO,EAAI,CAE5C,EACUsB,EAAQF,EAAY,UAAW,EAAEkC,CAAkB,CACpD,CACD,KAAK,SAAS,WAAWX,CAAO,EAChC,KAAK,aAAavB,CAAW,EACxB/B,GACH,KAAK,SAAS,KAAK9Q,GAAoB,CACrC,MAAO6S,CACnB,CAAW,CAEX,MACQA,EAAY,UAAY,GACxB,KAAK,SAAS,SAASuB,EAASlV,EAAoB,EACpD,KAAK,SAAS,YAAYkV,EAASnV,EAAqB,EAE3D,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBwS,EAAO,CACjCA,EAAQ,KAAK,SAASA,CAAK,EACvBA,GAAS,OACPA,EAAM,UACR,KAAK,YAAYA,CAAK,EAEtB,KAAK,cAAcA,CAAK,EAG7B,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBA,EAAO,CAGlC,QAFIoB,EAAc,KAAK,SAASpB,CAAK,EACjCwD,EAAIpC,EAAY,SACXpe,EAAI,EAAGA,EAAIwgB,EAAE,OAAQxgB,IAC5B,KAAK,SAAS,WAAWwgB,EAAExgB,CAAC,EAAE,EAAE,CAEnC,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBgd,EAAOX,EAAgB,CAChD,IAAIoE,EAAS,KACTrC,EAAc,KAAK,SAASpB,CAAK,EACrC,GAAIoB,EAAa,CA+Df,QA9DIuB,EAAUvB,EAAY,GACtBzM,EAAO,SAAc2H,EAAI,CAC3B,IAAI2C,EAAM3C,EACNoH,EAAUzE,EAAI,iBAAmB,KACjC0E,EAAgB1E,EAAI,cACpB2E,EAAe3E,EAAI,oBACvB,GAAI2E,IAAiBxC,EAAa,CAChC,IAAIlB,EAAQuD,EAAO,SAAS,OAAOnH,CAAE,EACjC6D,EAAQsD,EAAO,SAAS,UAAUnH,CAAE,EACpC8D,EAAOgB,EAAY,UAAYqC,EAAO,SAAS,wBAAwBd,CAAO,EAAIc,EAAO,SAAS,UAAUA,EAAO,SAAS,oBAAoBrC,CAAW,CAAC,EAChKlB,EAAM,MAAQkB,EAAY,KACtBwC,GAAgB,OAClBA,EAAa,OAAOtH,EAAI,GAAO+C,EAAgB,GAAO+B,CAAW,EACjEqC,EAAO,2BAA2BG,CAAY,GAE5CF,EACFtC,EAAY,SAASuC,CAAa,EAElCvC,EAAY,IAAI9E,EAAI+C,CAAc,EAEpC,IAAIwE,EAA2B,SAAkCC,EAAMvb,EAAO,CAC5E,IAAIwb,EAAOxb,IAAU,EAAI,EAAI,EAC7Bub,EAAK,KAAK,SAAU3e,EAAG,CACrBA,EAAE,WAAW,EAAK,EACdA,EAAE,UAAU4e,CAAI,EAAE,QAAQ,gBAAkB3C,GAC9Cjc,EAAE,UAAU4e,CAAI,EAAE,WAAW,EAAK,EAClCN,EAAO,kBAAkBte,EAAG4e,EAAM3C,CAAW,IAE7Cjc,EAAE,UAAUoD,CAAK,EAAE,WAAW,EAAK,EACnCkb,EAAO,oBAAoBte,EAAGoD,EAAO6Y,CAAW,EAElE,CAAe,CACf,EACgBA,EAAY,YACdyC,EAAyBJ,EAAO,SAAS,OAAO,CAC9C,OAAQnH,CACxB,CAAe,EAAG,CAAC,EACLuH,EAAyBJ,EAAO,SAAS,OAAO,CAC9C,OAAQnH,CACxB,CAAe,EAAG,CAAC,GAEPmH,EAAO,SAAS,MAAMnH,CAAE,EACxB,IAAIyD,EAAc,CAChB,EAAGI,EAAM,EAAIC,EAAK,EAClB,EAAGD,EAAM,EAAIC,EAAK,CAChC,EAIY,GAHAqD,EAAO,SAAS,YAAYnH,EAAIyD,CAAW,EAC3C0D,EAAO,2BAA2BrC,CAAW,EAC7CqC,EAAO,SAAS,WAAWnH,CAAE,EACzB,CAAC+C,EAAgB,CACnB,IAAI3d,EAAI,CACN,MAAO0f,EACP,GAAI9E,EACJ,IAAKyD,CACrB,EACkB6D,IACFliB,EAAE,YAAckiB,GAElBH,EAAO,SAAS,KAAKjV,GAA0B9M,CAAC,CACjD,CACF,CACX,EACiBmJ,EAAO,UAAU,OAAQyR,EAAK,IAAI,MAAMzR,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAChGuR,EAAGvR,EAAO,CAAC,EAAI,UAAUA,CAAI,EAE/BuW,EAAQhF,EAAI3H,CAAI,CACjB,CACF,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBqL,EAAOX,EAAgB,CACrD,IAAI2E,EAAS,KACT5C,EAAc,KAAK,SAASpB,CAAK,EACrC,GAAIoB,EAAa,CA2Bf,QA1BIzM,EAAO,SAAcyK,EAAK,CAC5B,GAAIgC,EAAY,UAAW,CACzB,IAAIiC,EAAa,SAAoBL,EAAOza,EAAO,CACjD,QAASvF,EAAI,EAAGA,EAAIggB,EAAM,OAAQhgB,IAAK,CACrC,IAAImC,EAAI6d,EAAMhgB,CAAC,EACf,GAAImC,EAAE,SACJ,QAASqP,EAAI,EAAGA,EAAIrP,EAAE,QAAQ,OAAQqP,IACpC,GAAIrP,EAAE,QAAQqP,CAAC,GAAK,KAAM,CACxB,IAAIyP,EAAiB9e,EAAE,QAAQqP,CAAC,EAAE,WAAW,SACzCyP,IAAmB7E,GAAO4E,EAAO,oBAAoBC,EAAgB7E,CAAG,IAC1E4E,EAAO,kBAAkB7e,EAAGoD,EAAO6Y,CAAW,CAEjD,EAGN,CACf,EACYiC,EAAWjC,EAAY,YAAY,OAAO,MAAK,EAAI,CAAC,EACpDiC,EAAWjC,EAAY,YAAY,OAAO,MAAK,EAAI,CAAC,CACrD,CACDA,EAAY,OAAOhC,EAAK,KAAMC,CAAc,EAC5C,IAAIa,EAAQ8D,EAAO,SAAS,mBAAkB,EAAGA,EAAO,SAAS,MAAM5E,CAAG,CAAC,EACvEc,GACF,OAAOA,EAAM,KAEzB,EACiB1U,EAAQ,UAAU,OAAQ8Q,EAAK,IAAI,MAAM9Q,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACtG6Q,EAAG7Q,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEjC6V,EAAQhF,EAAI3H,CAAI,CACjB,CACF,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBqL,EAAO,CAGlC,QAFIkE,EAAY,CAAA,EACZxiB,EAAIse,EAAM,MACPte,GAAK,MACVwiB,EAAU,KAAKxiB,CAAC,EAChBA,EAAIA,EAAE,MAER,OAAOwiB,CACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBlE,EAAOmE,EAAkB,CAClD,OAAInE,GAAS,MAAQmE,GAAoB,KAChC,GAEF,KAAK,aAAanE,CAAK,EAAE,QAAQmE,CAAgB,IAAM,EAC/D,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBnE,EAAO,CACpC,IAAI/O,EAAI,CAAA,EACJ0D,EAAO,SAASA,EAAK/N,EAAG,CAC1B,IAAIwd,EAAcxd,EAAE,YACpBqK,EAAE,KAAK,MAAMA,EAAG5N,GAAmB+gB,CAAW,CAAC,EAC/C9C,EAAQ8C,EAAazP,CAAI,CACjC,EACM,OAAAA,EAAKqL,CAAK,EACH/O,CACR,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBoT,EAAoBC,EAAU,CACzD,OAAID,GAAsB,MAAQC,GAAY,KACrC,GAEF,KAAK,eAAeA,CAAQ,EAAE,QAAQD,CAAkB,IAAM,EACtE,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,KAAK,qBAAuB,GAC5B,KAAK,qBAAuB,GAC5B,KAAK,SAAW,EACjB,CACF,CAAA,CAAC,EACK/D,CACT,IAEIiE,GAAgB,UAAY,CAC9B,SAASA,EAAchkB,EAAUikB,EAAS,CACxClkB,EAAgB,KAAMikB,CAAa,EACnC,KAAK,SAAWhkB,EAChB,KAAK,QAAUikB,CAChB,CACD,OAAA3jB,EAAa0jB,EAAe,CAAC,CAC3B,IAAK,SACL,IAAK,UAAe,CAClB,OAAO,KAAK,QAAQ,MACrB,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAczf,EAAS,CAC5B,OAAAwc,EAAQ,KAAK,QAAS,SAAU1f,EAAG,CACjC,OAAOkD,EAAQlD,CAAC,CACxB,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,MACL,MAAO,SAAa2G,EAAO,CACzB,OAAO,KAAK,QAAQA,CAAK,CAC1B,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBV,EAAOsN,EAAS,CACvC,YAAK,KAAK,SAAUhQ,EAAG,CACrB,OAAOA,EAAE,SAAS0C,EAAOsN,CAAO,CACxC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBtN,EAAOsN,EAAS,CAC1C,YAAK,KAAK,SAAUhQ,EAAG,CACrB,OAAOA,EAAE,YAAY0C,EAAOsN,CAAO,CAC3C,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,oBACL,MAAO,UAA6B,CAClC,YAAK,KAAK,SAAUhQ,EAAG,CACrB,OAAOA,EAAE,mBACjB,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBsf,EAAO,CAC9B,YAAK,KAAK,SAAUtf,EAAG,CACrB,OAAOA,EAAE,SAASsf,CAAK,CAC/B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,YAAK,QAAQ,OAAS,EACf,IACR,CACL,EAAK,CACD,IAAK,MACL,MAAO,SAAaC,EAAI,CACtB,IAAI5d,EAAI,CAAA,EACR,YAAK,KAAK,SAAU,EAAG,CACrB,OAAOA,EAAE,KAAK4d,EAAG,CAAC,CAAC,CAC3B,CAAO,EACM5d,CACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBiJ,EAAM,CAC/B,YAAK,KAAK,SAAU5K,EAAG,CACrB,OAAOA,EAAE,WAAW4K,CAAI,CAChC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBwF,EAAI,CAChC,YAAK,KAAK,SAAUpQ,EAAG,CACrB,OAAOA,EAAE,cAAcoQ,CAAE,CACjC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,YAAK,KAAK,SAAUpQ,EAAG,CACrB,OAAOA,EAAE,gBACjB,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBoQ,EAAI,CAC9B,YAAK,KAAK,SAAUpQ,EAAG,CACrB,OAAOA,EAAE,YAAYoQ,CAAE,CAC/B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAI,CAC9B,YAAK,KAAK,SAAUpQ,EAAG,CACrB,OAAOA,EAAE,YAAYoQ,CAAE,CAC/B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBP,EAAO,CACnC,YAAK,KAAK,SAAU7P,EAAG,CACrB,OAAOA,EAAE,cAAc6P,CAAK,CACpC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4BA,EAAO,CACxC,YAAK,KAAK,SAAU7P,EAAG,CACrB,OAAOA,EAAE,mBAAmB6P,CAAK,CACzC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0B2P,EAAS,CACxC,YAAK,KAAK,SAAUxf,EAAG,CACrB,OAAOA,EAAE,iBAAiBwf,CAAO,CACzC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBhgB,EAAMxD,EAAO,CACxC,YAAK,KAAK,SAAUgE,EAAG,CACrB,OAAOA,EAAE,WAAWR,CAAI,EAAIxD,CACpC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBO,EAAG,CAC/B,YAAK,KAAK,SAAUyD,EAAG,CACrB,OAAOA,EAAE,WAAazD,CAC9B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoB+D,EAAG,CAC5B,YAAK,KAAK,SAAUN,EAAG,CACrB,OAAOA,EAAE,WAAWM,CAAC,CAC7B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBd,EAAM,CAC5B,YAAK,KAAK,SAAUQ,EAAG,CACrB,OAAOA,EAAE,QAAQR,CAAI,CAC7B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBA,EAAM,CAC/B,YAAK,KAAK,SAAUQ,EAAG,CACrB,OAAOA,EAAE,WAAWR,CAAI,CAChC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBA,EAAM,CAC/B,YAAK,KAAK,SAAUQ,EAAG,CACrB,OAAOA,EAAE,WAAWR,CAAI,CAChC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAcigB,EAAK9f,EAAS,CACjC,YAAK,KAAK,SAAUK,EAAG,CACrB,OAAOA,EAAE,KAAKyf,EAAK9f,CAAO,CAClC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgB8f,EAAK9f,EAAS,CACnC,YAAK,KAAK,SAAUK,EAAG,CACrB,OAAOA,EAAE,OAAOyf,EAAK9f,CAAO,CACpC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBoB,EAAG,CAC1B,IAAIL,EAAQ,KACZ,YAAK,KAAK,SAAUV,EAAG,CACrB,OAAOU,EAAM,SAAS,SAASV,EAAGe,CAAC,CAC3C,CAAO,EACM,IACR,CACF,CAAA,CAAC,EACKqe,CACT,IAEIM,GAAoB,SAAUC,EAAgB,CAChD1jB,EAAUyjB,EAAmBC,CAAc,EAC3C,IAAIlf,EAAS3D,EAAa4iB,CAAiB,EAC3C,SAASA,GAAoB,CAC3B,OAAAvkB,EAAgB,KAAMukB,CAAiB,EAChCjf,EAAO,MAAM,KAAM,SAAS,CACpC,CACD,OAAA/E,EAAagkB,EAAmB,CAAC,CAC/B,IAAK,aACL,MAAO,SAAoB,EAAG,CAC5B,YAAK,KAAK,SAAUngB,EAAI,CACtB,OAAOA,EAAG,QAAU,CAC5B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBoC,EAAG,CAC3B,YAAK,KAAK,SAAUpC,EAAI,CACtB,OAAOA,EAAG,UAAUoC,CAAC,CAC7B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,wBACL,MAAO,UAAiC,CACtC,YAAK,KAAK,SAAUpC,EAAI,CACtB,OAAOA,EAAG,uBAClB,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,IAAImB,EAAQ,KACZ,YAAK,KAAK,SAAUnB,EAAI,CACtB,OAAOmB,EAAM,SAAS,eAAenB,CAAE,CAC/C,CAAO,EACD,KAAK,MAAK,EACH,IACR,CACF,CAAA,CAAC,EACKmgB,CACT,EAAEN,EAAa,EAEXQ,GAAsB,SAAUD,EAAgB,CAClD1jB,EAAU2jB,EAAqBD,CAAc,EAC7C,IAAIlf,EAAS3D,EAAa8iB,CAAmB,EAC7C,SAASA,GAAsB,CAC7B,OAAAzkB,EAAgB,KAAMykB,CAAmB,EAClCnf,EAAO,MAAM,KAAM,SAAS,CACpC,CACD,OAAA/E,EAAakkB,EAAqB,CAAC,CACjC,IAAK,gBACL,MAAO,SAAuB9T,EAAG,CAC/B,YAAK,KAAK,SAAU9L,EAAG,CACrB,OAAOA,EAAE,cAAc8L,CAAC,CAChC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAG,CAC7B,YAAK,KAAK,SAAU9L,EAAG,CACrB,OAAOA,EAAE,YAAY8L,CAAC,CAC9B,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBlB,EAAM,CACjC,YAAK,KAAK,SAAU5K,EAAG,CACrB,OAAOA,EAAE,cAAc4K,CAAI,CACnC,CAAO,EACM,IACR,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,IAAIlK,EAAQ,KACZ,KAAK,KAAK,SAAUV,EAAG,CACrB,OAAOU,EAAM,SAAS,iBAAiBV,CAAC,CAChD,CAAO,EACD,KAAK,MAAK,CACX,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,IAAIsP,EAAS,KACb,YAAK,KAAK,SAAUtP,EAAG,CACrB,OAAOsP,EAAO,SAAS,iBAAiBtP,CAAC,CACjD,CAAO,EACM,IACR,CACF,CAAA,CAAC,EACK4f,CACT,EAAER,EAAa,EAEXS,GAAc,SAASA,GAAc,CACvC1kB,EAAgB,KAAM0kB,CAAW,EACjChkB,EAAgB,KAAM,mBAAoB,IAAI,GAAK,CACrD,EACA,SAASikB,IAAiB,CACxB,MAAO,CACL,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,CACD,EAAG,EACH,EAAG,CACJ,EACD,GAAI,EACJ,GAAI,EACJ,EAAG,CACD,EAAG,EACH,EAAG,EACH,EAAG,CACD,EAAG,EACH,EAAG,CACJ,EACD,EAAG,EACH,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,EACJ,GAAI,EACJ,GAAI,CACL,EACD,MAAO,EACX,CACA,CACA,SAASC,GAAOnf,EAAGC,EAAGC,EAAGC,EAAG8N,EAAG,CAC7B,IAAImR,EAAS,CACX,EAAGpf,EAAIE,EAAI,EACX,EAAGD,EAAIE,EAAI,CACZ,EACGkf,EAAK,KAAK,IAAIpR,EAAI,IAAM,KAAK,GAAK,CAAC,EACnCqR,EAAK,KAAK,IAAIrR,EAAI,IAAM,KAAK,GAAK,CAAC,EACnCsR,EAAS,SAAgBvf,EAAGC,EAAG,CACjC,MAAO,CACL,EAAGmf,EAAO,EAAI,KAAK,OAAOpf,EAAIof,EAAO,GAAKC,GAAMpf,EAAImf,EAAO,GAAKE,CAAE,EAClE,EAAGF,EAAO,EAAI,KAAK,OAAOnf,EAAImf,EAAO,GAAKC,GAAMrf,EAAIof,EAAO,GAAKE,CAAE,CACxE,CACA,EACMnb,EAAKob,EAAOvf,EAAGC,CAAC,EAChBmE,EAAKmb,EAAOvf,EAAIE,EAAGD,CAAC,EACpBuf,EAAKD,EAAOvf,EAAIE,EAAGD,EAAIE,CAAC,EACxBsf,EAAKF,EAAOvf,EAAGC,EAAIE,CAAC,EACpBf,EAAImgB,EAAOvf,EAAIE,EAAI,EAAGD,EAAIE,EAAI,CAAC,EAC/Buf,EAAO,KAAK,IAAIvb,EAAG,EAAGC,EAAG,EAAGob,EAAG,EAAGC,EAAG,CAAC,EACtCE,EAAO,KAAK,IAAIxb,EAAG,EAAGC,EAAG,EAAGob,EAAG,EAAGC,EAAG,CAAC,EACtCG,EAAO,KAAK,IAAIzb,EAAG,EAAGC,EAAG,EAAGob,EAAG,EAAGC,EAAG,CAAC,EACtCI,EAAO,KAAK,IAAI1b,EAAG,EAAGC,EAAG,EAAGob,EAAG,EAAGC,EAAG,CAAC,EAC1C,MAAO,CACL,EAAGC,EACH,EAAGE,EACH,EAAGD,EAAOD,EACV,EAAGG,EAAOD,EACV,EAAGxgB,EACH,EAAG6O,EACH,GAAI0R,EACJ,GAAIE,EACJ,GAAIR,EACJ,GAAIC,CACR,CACA,CACA,IAAIQ,GAAkB,SAAyB1kB,EAAO2kB,EAAY,CAChE,IAAI3gB,EAAI,EACR,OAAI2gB,EAAW,CAAC,EAAI3kB,EAAM,CAAC,EACzBgE,EAAI,GACK2gB,EAAW,CAAC,EAAI3kB,EAAM,CAAC,IAChCgE,EAAI,GAECA,CACT,EACI4gB,GAAyB,SAAgC5kB,EAAO2kB,EAAY,CAC9E,OAAOD,GAAgB1kB,EAAO2kB,CAAU,EAAI,EAC9C,EACA,SAASE,GAAoBzQ,EAAIpU,EAAO8kB,EAAOC,EAAgB,CAC7DC,GAAa,CAAC5Q,EAAIpU,CAAK,EAAG8kB,EAAOJ,GAAiBK,CAAc,CAClE,CACA,SAASE,EAAmB7Q,EAAI0Q,EAAO,CACrC,IAAIte,EAAM0e,GAAiBJ,EAAO,SAAU/F,EAAO,CACjD,OAAOA,EAAM,CAAC,IAAM3K,CACxB,CAAG,EACG5N,EAAM,IACRse,EAAM,OAAOte,EAAK,CAAC,CAEvB,CACA,IAAI2e,GAAW,SAAUnW,EAAiB,CACxC/O,EAAUklB,EAAUnW,CAAe,EACnC,IAAIvK,EAAS3D,EAAaqkB,CAAQ,EAClC,SAASA,EAAS/lB,EAAU,CAC1B,IAAIsF,EACJ,OAAAvF,EAAgB,KAAMgmB,CAAQ,EAC9BzgB,EAAQD,EAAO,KAAK,IAAI,EACxBC,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,sBAAuB,IAAI,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,CAChE,KAAM,CAAE,EACR,KAAM,CAAE,EACR,KAAM,CAAE,EACR,KAAM,CAAE,CACd,CAAK,EACD7E,EAAgBa,EAAuBgE,CAAK,EAAG,cAAe,IAAI,GAAK,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,yBAA0B,IAAI,GAAK,EAClF7E,EAAgBa,EAAuBgE,CAAK,EAAG,UAAW,CACxD,KAAM,EACN,KAAM,EACN,KAAM,EACN,KAAM,CACZ,CAAK,EACMA,CACR,CACD,OAAAhF,EAAaylB,EAAU,CAAC,CACtB,IAAK,gBACL,MAAO,SAAuB/Q,EAAIgR,EAAgBC,EAAwB,CACpED,GAAkB,OACpBH,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChDyQ,GAAoBzQ,EAAIgR,EAAe,EAAE,EAAG,KAAK,gBAAgB,KAAM,EAAK,EAC5EP,GAAoBzQ,EAAIgR,EAAe,EAAE,EAAIA,EAAe,EAAE,EAAG,KAAK,gBAAgB,KAAM,EAAI,EAChGP,GAAoBzQ,EAAIgR,EAAe,EAAE,EAAG,KAAK,gBAAgB,KAAM,EAAK,EAC5EP,GAAoBzQ,EAAIgR,EAAe,EAAE,EAAIA,EAAe,EAAE,EAAG,KAAK,gBAAgB,KAAM,EAAI,EAC5FC,IAA2B,IAC7B,KAAK,mBAAkB,EAG5B,CACL,EAAK,CACD,IAAK,qBACL,MAAO,UAA8B,CACnC,KAAK,QAAQ,KAAO,KAAK,gBAAgB,KAAK,OAAS,EAAI,KAAK,gBAAgB,KAAK,CAAC,EAAE,CAAC,EAAI,EAC7F,KAAK,QAAQ,KAAO,KAAK,gBAAgB,KAAK,OAAS,EAAI,KAAK,gBAAgB,KAAK,CAAC,EAAE,CAAC,EAAI,EAC7F,KAAK,QAAQ,KAAO,KAAK,gBAAgB,KAAK,OAAS,EAAI,KAAK,gBAAgB,KAAK,CAAC,EAAE,CAAC,EAAI,EAC7F,KAAK,QAAQ,KAAO,KAAK,gBAAgB,KAAK,OAAS,EAAI,KAAK,gBAAgB,KAAK,CAAC,EAAE,CAAC,EAAI,CAC9F,CACL,EAAK,CACD,IAAK,kBACL,MAAO,UAA2B,CAChC,IAAI/R,EAAS,KACb,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,YAAY,QAAQ,SAAUgS,EAAIlR,EAAI,CACzCd,EAAO,gBAAgB,KAAK,KAAK,CAACc,EAAIkR,EAAG,EAAE,CAAC,CAAC,EAC7ChS,EAAO,gBAAgB,KAAK,KAAK,CAACc,EAAIkR,EAAG,EAAE,EAAIA,EAAG,EAAE,CAAC,CAAC,EACtDhS,EAAO,gBAAgB,KAAK,KAAK,CAACc,EAAIkR,EAAG,EAAE,CAAC,CAAC,EAC7ChS,EAAO,gBAAgB,KAAK,KAAK,CAACc,EAAIkR,EAAG,EAAE,EAAIA,EAAG,EAAE,CAAC,CAAC,CAC9D,CAAO,EACD,KAAK,gBAAgB,KAAK,KAAKZ,EAAe,EAC9C,KAAK,gBAAgB,KAAK,KAAKA,EAAe,EAC9C,KAAK,gBAAgB,KAAK,KAAKE,EAAsB,EACrD,KAAK,gBAAgB,KAAK,KAAKA,EAAsB,EACrD,KAAK,mBAAkB,CACxB,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBxQ,EAAI3T,EAAG4kB,EAAwB,CAC7D5kB,EAAE,EAAIsjB,GAAOtjB,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,CAAC,EACpC,KAAK,uBAAuB,IAAI2T,EAAI3T,EAAE,CAAC,EACnC4kB,IAA2B,IAC7B,KAAK,cAAcjR,EAAI3T,EAAG4kB,CAAsB,CAEnD,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBhW,EAAOrP,EAAOsP,EAAe,CAC3D,MAAO,EACR,CACL,EAAK,CACD,IAAK,mBACL,MAAO,UAA4B,CACjC,GAAI,KAAK,qBAAuB,KAC9B,MAAM,IAAI,MAAM,wEAAwE,EAE1F,KAAK,oBAAsB,IAAIuU,EAChC,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,IAAInQ,EAAS,KACT,KAAK,qBAAuB,OAC9B,KAAK,oBAAoB,iBAAiB,QAAQ,SAAUU,EAAI,CAC9D,IAAI2K,EAAQrL,EAAO,YAAYU,CAAE,EACjCV,EAAO,gBAAgBU,EAAI2K,EAAO,EAAI,CAChD,CAAS,EACD,KAAK,gBAAe,EACpB,KAAK,oBAAsB,KAE9B,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBsE,EAAS,CACtC,IAAI3B,EAAS,KACbvB,EAAQkD,EAAS,SAAU5iB,EAAG,CAC5B,OAAOihB,EAAO,cAAcjhB,EAAE,GAAIA,EAAE,EAAGA,EAAE,EAAGA,EAAE,MAAOA,EAAE,OAAQA,EAAE,QAAQ,CACjF,CAAO,CACF,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB2T,EAAIxP,EAAGC,EAAGQ,EAAOC,EAAQigB,EAAUF,EAAwB,CACvF,IAAI5kB,EAAI+kB,GAAQ,KAAK,YAAapR,EAAI0P,EAAc,EACpD,OAAArjB,EAAE,MAAQmE,GAAK,MAAQnE,EAAE,GAAK,MAAQoE,GAAK,MAAQpE,EAAE,GAAK,MAAQ4E,GAAS,MAAQ5E,EAAE,GAAK,MAAQ6E,GAAU,MAAQ7E,EAAE,GAAK,KACvHmE,GAAK,OACPnE,EAAE,EAAImE,GAEJC,GAAK,OACPpE,EAAE,EAAIoE,GAEJQ,GAAS,OACX5E,EAAE,EAAI4E,GAEJC,GAAU,OACZ7E,EAAE,EAAI6E,GAEJigB,GAAY,OACd9kB,EAAE,EAAI8kB,GAAY,GAEpB9kB,EAAE,EAAE,EAAIA,EAAE,EAAIA,EAAE,EAAI,EACpBA,EAAE,EAAE,EAAIA,EAAE,EAAIA,EAAE,EAAI,EACpBA,EAAE,GAAKA,EAAE,EAAIA,EAAE,EACfA,EAAE,GAAKA,EAAE,EAAIA,EAAE,EACX,KAAK,qBAAuB,KAC9B,KAAK,gBAAgB2T,EAAI3T,EAAG4kB,CAAsB,EAElD,KAAK,oBAAoB,iBAAiB,IAAIjR,CAAE,EAE3C3T,CACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwB2a,EAAMiK,EAAwB,CAC3D,IAAII,EAAK,KAAK,SAAS,mBAAkB,EACrC,EAAIA,EAAGrK,CAAI,EAAIqK,EAAGrK,CAAI,EAAE,GAAK,KACjC,GAAI,GAAK,KAAM,CACb,IAAIsK,EAAO,KAAK,QAAQ,CAAC,EACrBC,EAAS,KAAK,UAAU,CAAC,EAC7B,OAAO,KAAK,cAAcvK,EAAMuK,EAAO,EAAGA,EAAO,EAAGD,EAAK,EAAGA,EAAK,EAAG,KAAML,CAAsB,CACxG,KACQ,QAAO,IAEV,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBlK,EAAI,CAC1B,OAAO,KAAK,SAAS,QAAQA,CAAE,CAChC,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBA,EAAI,CAC5B,OAAO,KAAK,SAAS,UAAUA,CAAE,CAClC,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB/G,EAAIiR,EAAwB,CAC1D,OAAO,KAAK,cAAcjR,EAAI,EAAG,EAAG,EAAG,EAAG,EAAGiR,CAAsB,CACpE,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBjR,EAAIxP,EAAGC,EAAGQ,EAAOC,EAAQigB,EAAU,CAC5D,OAAO,KAAK,cAAcnR,EAAIxP,EAAGC,EAAGQ,EAAOC,EAAQigB,CAAQ,CAC5D,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBnR,EAAImR,EAAU,CAC1C,IAAI9kB,EAAI+kB,GAAQ,KAAK,YAAapR,EAAI0P,EAAc,EACpD,OAAArjB,EAAE,EAAI8kB,GAAY,EAClB,KAAK,gBAAgBnR,EAAI3T,CAAC,EACnBA,CACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,OAAO,KAAK,QAAQ,KAAO,KAAK,QAAQ,IACzC,CACL,EAAK,CACD,IAAK,kBACL,MAAO,UAA2B,CAChC,OAAO,KAAK,QAAQ,KAAO,KAAK,QAAQ,IACzC,CACL,EAAK,CACD,IAAK,OACL,MAAO,UAAgB,CACrB,OAAO,KAAK,QAAQ,IACrB,CACL,EAAK,CACD,IAAK,OACL,MAAO,UAAgB,CACrB,OAAO,KAAK,QAAQ,IACrB,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiB2T,EAAItP,EAAGC,EAAG,CAChC,GAAI,KAAK,YAAY,IAAIqP,CAAE,EACzB,OAAO,KAAK,cAAcA,EAAI,KAAM,KAAMtP,EAAGC,EAAG,IAAI,CAEvD,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBqP,EAAIxP,EAAGC,EAAG,CACpC,GAAI,KAAK,YAAY,IAAIuP,CAAE,EACzB,OAAO,KAAK,cAAcA,EAAIxP,EAAGC,EAAG,KAAM,KAAM,IAAI,CAEvD,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,gBAAgB,KAAK,OAAS,EACnC,KAAK,YAAY,QACjB,KAAK,uBAAuB,QAC5B,KAAK,mBAAkB,CACxB,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgBuP,EAAI,CACzB6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD6Q,EAAmB7Q,EAAI,KAAK,gBAAgB,IAAI,EAChD,KAAK,YAAY,OAAUA,CAAE,EAC7B,KAAK,uBAAuB,OAAUA,CAAE,EACxC,KAAK,mBAAkB,CACxB,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAI,CAC9B,OAAO,KAAK,YAAY,IAAIA,CAAE,CAC/B,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,CAC5B,OAAO,KAAK,WACb,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,OAAO,KAAK,YAAY,OAAS,CAClC,CACF,CAAA,CAAC,EACK+Q,CACT,EAAE5V,EAAc,EAEZqW,GACJ,SAASC,GAAoBtQ,EAASuQ,EAAaC,EAAYC,EAAiBC,EAAS,CAKvF,QAJIC,EAAaH,EAAaxQ,EAAQ,EAAIA,EAAQ,EAC9C4Q,EAAkBJ,EAAaxQ,EAAQ,EAAIA,EAAQ,EACnD5P,EAAI,CAAE,EACN2S,EAAO4N,GAAcJ,EAAY,OAAS,GACrCjkB,EAAI,EAAGA,EAAIikB,EAAY,OAAQjkB,IAAK,CAC3C,IAAIukB,GAAOvkB,EAAI,GAAKyW,EAChB+N,EAAQL,EAAkBG,EAC1BF,IACFG,EAAMF,EAAaE,GAErB,IAAIxgB,EAAKmgB,EAAaK,EAAMC,EACxBzhB,EAAI2Q,EAAQ,EAAI3P,EAChB0gB,EAAK1gB,EAAK2P,EAAQ,EAClB1P,EAAKkgB,EAAaM,EAAQD,EAC1BvhB,EAAI0Q,EAAQ,EAAI1P,EAChB0gB,EAAK1gB,EAAK0P,EAAQ,EACtB,GAAIA,EAAQ,IAAM,GAAKA,EAAQ,GAAK,KAAM,CACxC,IAAIiR,EAAUC,GAAY,CACxB,EAAG7hB,EACH,EAAGC,CACJ,EAAE0Q,EAAQ,EAAGA,EAAQ,CAAC,EACvB3Q,EAAI4hB,EAAQ,EACZ3hB,EAAI2hB,EAAQ,CACb,CACD7gB,EAAE,KAAK,CACL,EAAGf,EACH,EAAGC,EACH,KAAMyhB,EACN,KAAMC,EACN,EAAGT,EAAYjkB,CAAC,EAAE,CACxB,CAAK,CACF,CACD,OAAO8D,CACT,CACA,SAAS+gB,GAAoB,EAAGle,EAAG,CACjC,OAAOA,EAAE,MAAQ,EAAE,KACrB,CACA,SAASme,GAAgB,EAAGne,EAAG,CAC7B,IAAIO,EAAK,EAAE,MAAQ,EAAI,CAAC,KAAK,GAAK,EAAE,MAAQ,KAAK,GAAK,EAAE,MACpDC,EAAKR,EAAE,MAAQ,EAAI,CAAC,KAAK,GAAKA,EAAE,MAAQ,KAAK,GAAKA,EAAE,MACxD,OAAOO,EAAKC,CACd,CACA,IAAI4d,IAAqBhB,GAAqB,GAAI/lB,EAAgB+lB,GAAoB5Q,EAAK2R,EAAe,EAAG9mB,EAAgB+lB,GAAoB1Q,EAAOwR,EAAmB,EAAG7mB,EAAgB+lB,GAAoBzQ,EAAQuR,EAAmB,EAAG7mB,EAAgB+lB,GAAoB3Q,EAAM0R,EAAe,EAAGf,IAC5S,SAASiB,EAAa,EAAG,CACvB,OAAO,EAAE,eAAiB,EAC5B,CACA,SAASC,GAAY,EAAG,CACtB,OAAO,EAAE,eAAiB,EAC5B,CACA,SAASC,GAAU,EAAG,CACpB,OAAO,EAAE,UAAU,OAAS,CAC9B,CACA,SAASC,GAAmB/M,EAAQ,CAClC,MAAO,CAACA,EAAO,gBAAiBA,EAAO,UAAUA,EAAO,eAAe,CAAC,CAC1E,CACA,IAAIgN,GAAoB,UAAY,CAClC,SAASA,EAAkB7nB,EAAU,CACnC,IAAIsF,EAAQ,KACZvF,EAAgB,KAAM8nB,CAAiB,EACvC,KAAK,SAAW7nB,EAChBS,EAAgB,KAAM,cAAe,IAAI,GAAK,EAC9CA,EAAgB,KAAM,kBAAmB,IAAI,GAAK,EAClDT,EAAS,KAAK4N,GAAoC,SAAUzM,EAAG,CACzDA,EAAE,eAAe,QAAQ,cAC3BmE,EAAM,+BAA+BnE,EAAE,cAAc,EAEnDA,EAAE,eAAe,QAAQ,cAC3BmE,EAAM,+BAA+BnE,EAAE,cAAc,CAE7D,CAAK,EACDnB,EAAS,KAAK2N,GAAsC,SAAUxJ,EAAI,CAChEmB,EAAM,+BAA+BnB,CAAE,CAC7C,CAAK,CACF,CACD,OAAA7D,EAAaunB,EAAmB,CAAC,CAC/B,IAAK,uBACL,MAAO,SAA8BhN,EAAQ,CAC3C,IAAI9F,EAAM,KAAK,gBAAgB,IAAI8F,EAAO,EAAE,EAC5C,OAAO9F,EAAM,CAACA,EAAI,GAAIA,EAAI,EAAE,EAAI,CAAC,EAAG,CAAC,CACtC,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmB8F,EAAQiN,EAAIC,EAAIrT,EAAIsT,EAAI7B,EAAU8B,EAAgB,CAC1E,IAAIC,EAAKxT,EAAG,EAAImG,EAAO,EAAImN,EAAG,EAC1BG,EAAKzT,EAAG,EAAImG,EAAO,EAAImN,EAAG,EAC1BI,EAAM1T,EAAG,EAAIsT,EAAG,EAAI,EACpBK,EAAM3T,EAAG,EAAIsT,EAAG,EAAI,EACxB,GAAI7B,GAAY,MAAQA,EAAS,OAAS,EAAG,CAC3C,IAAIiB,EAAU,KAAK,SAAS,gBAAgB,CAACc,EAAIC,EAAI,EAAG,CAAC,EAAGhC,CAAQ,EACpE+B,EAAKd,EAAQ,EACbe,EAAKf,EAAQ,CACd,CACD,OAAO,KAAK,KAAK,KAAK,IAAIU,EAAKI,EAAI,CAAC,EAAI,KAAK,IAAIH,EAAKI,EAAI,CAAC,CAAC,EAAI,KAAK,KAAK,KAAK,IAAIC,EAAMF,EAAI,CAAC,EAAI,KAAK,IAAIG,EAAMF,EAAI,CAAC,CAAC,CACxH,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBzT,EAAIsT,EAAIM,EAAKC,EAAKpC,EAAU8B,EAAgB9P,EAAW,CAKrF,QAJI2P,EAAKQ,EAAI,EAAIC,EAAI,EAAI,EACrBR,EAAKO,EAAI,EAAIC,EAAI,EAAI,EACrBC,EAAS,GACTC,EAAU,IACLhmB,EAAI,EAAGA,EAAI0V,EAAU,OAAQ1V,IAAK,CACzC,IAAIiO,EAAI,KAAK,UAAUyH,EAAU1V,CAAC,EAAGqlB,EAAIC,EAAIrT,EAAIsT,EAAI7B,EAAU8B,CAAc,EACzEvX,EAAI+X,IACND,EAAS/lB,EAAI,EACbgmB,EAAU/X,EAEb,CACD,MAAO,CAAC8X,EAAQrQ,EAAUqQ,CAAM,CAAC,CAClC,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgC3N,EAAQxW,EAAQ,CACrD,IAAIqQ,EAAKrQ,EAAO,GACZ8c,EAAM,CACR,KAAMzM,EAAG,EAAImG,EAAO,KAAK,EAAI,EAC7B,KAAMnG,EAAG,EAAImG,EAAO,KAAK,EAAI,EAC7B,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,CACZ,EACM,OAAO,KAAK,qBAAqBA,EAAQsG,CAAG,CAC7C,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BtG,EAAQsG,EAAKuH,EAAW,CAC3D,YAAK,gBAAgB,IAAI7N,EAAO,GAAIsG,CAAG,EACvCtG,EAAO,iBAAmBsG,EACtBuH,IACF7N,EAAO,UAAY6N,GAEdvH,CACR,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgCpM,EAAKL,EAAIsT,EAAI3jB,EAAQ,CAC1D,IAAI8c,EACAgF,EAAW9hB,EAAO,SAClBskB,EAAY,CACd,KAAMjU,EAAG,EAAIK,EAAI,EAAIiT,EAAG,EAAIjT,EAAI,KAChC,KAAML,EAAG,EAAIK,EAAI,EAAIiT,EAAG,EAAIjT,EAAI,KAChC,EAAGA,EAAI,EACP,EAAGA,EAAI,EACP,GAAI,EACJ,GAAI,CACZ,EACM,GAAIoR,GAAY,MAAQA,EAAS,OAAS,EAAG,CAC3C,IAAIjlB,EAAI,CAAC6T,EAAI,IAAKA,EAAI,GAAG,EACrBoE,EAAU,CACZ,EAAGwP,EAAU,KACb,EAAGA,EAAU,KACb,GAAI,EACJ,GAAI,CACd,EACQ5H,EAAQoF,EAAU,SAAU1S,EAAG,CAC7B0F,EAAUkO,GAAYlO,EAAS1F,EAAE,EAAGA,EAAE,CAAC,EACvC,IAAImV,EAAK,CAAC,KAAK,MAAM1nB,EAAE,CAAC,EAAIiY,EAAQ,GAAKjY,EAAE,CAAC,EAAIiY,EAAQ,EAAE,EAAG,KAAK,MAAMjY,EAAE,CAAC,EAAIiY,EAAQ,GAAKjY,EAAE,CAAC,EAAIiY,EAAQ,EAAE,CAAC,EAC9GjY,EAAI0nB,EAAG,OACjB,CAAS,EACD7T,EAAI,GAAK7T,EAAE,CAAC,EACZ6T,EAAI,GAAK7T,EAAE,CAAC,EACZigB,EAAM,CACJ,KAAMhI,EAAQ,EACd,KAAMA,EAAQ,EACd,EAAGpE,EAAI,EACP,EAAGA,EAAI,EACP,GAAI7T,EAAE,CAAC,EACP,GAAIA,EAAE,CAAC,CACjB,CACA,MACQ6T,EAAI,GAAKA,EAAI,IACbA,EAAI,GAAKA,EAAI,IACboM,EAAMnP,EAAO,CACX,GAAI+C,EAAI,IACR,GAAIA,EAAI,GACT,EAAE4T,CAAS,EAEd,OAAOxH,CACR,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BtG,EAAQxW,EAAQ,CACnD,IAAIqQ,EAAKrQ,EAAO,GACZ2jB,EAAK3jB,EAAO,GACZqkB,EAAYrkB,EAAO,UACnB8c,EAAM,KAAK,gBAAgB,IAAItG,EAAO,EAAE,EAC5C,GAAIsG,GAAO,MAAQuH,GAAaA,IAAc7N,EAAO,UACnD,OAAOsG,EAET,IAAI0H,EAAsBjB,GAAmB/M,CAAM,EAC/CiO,EAAuBvmB,GAAesmB,EAAqB,CAAC,EAC5DC,EAAqB,CAAC,EACtB,IAAIC,EAAaD,EAAqB,CAAC,EAC3C,OAAA3H,EAAM,KAAK,uBAAuB4H,EAAYrU,EAAIsT,EAAI3jB,CAAM,EACrD,KAAK,qBAAqBwW,EAAQsG,EAAKuH,CAAS,CACxD,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+B7N,EAAQxW,EAAQ,CACpD,IAAI8c,EACJ,GAAItG,EAAO,UAAU,SAAW,EAC9B,OAAO,KAAK,qBAAqBA,EAAQxW,CAAM,EAEjD,IAAIqQ,EAAKrQ,EAAO,GACZ2jB,EAAK3jB,EAAO,GACZikB,EAAMjkB,EAAO,IACbkkB,EAAMlkB,EAAO,IACb2kB,EAAuBpB,GAAmB/M,CAAM,EAChDoO,EAAuB1mB,GAAeymB,EAAsB,CAAC,EAC7DE,EAAaD,EAAqB,CAAC,EACnCF,EAAaE,EAAqB,CAAC,EACvC,GAAIpO,EAAO,QAAUyN,GAAO,MAAQC,GAAO,KACzCpH,EAAM,KAAK,uBAAuB4H,EAAYrU,EAAIsT,EAAI3jB,CAAM,MACvD,CACL,IAAI8kB,EAAwB,KAAK,gBAAgBzU,EAAIsT,EAAIM,EAAKC,EAAKlkB,EAAO,SAAUA,EAAO,UAAWwW,EAAO,SAAS,EAClHuO,EAAyB7mB,GAAe4mB,EAAuB,CAAC,EAChEE,EAASD,EAAuB,CAAC,EACjCE,EAASF,EAAuB,CAAC,EACrCvO,EAAO,gBAAkBwO,EACrBA,IAAWH,IACbrO,EAAO,SAAWyO,EAAO,KAAOzO,EAAO,SACvCxW,EAAO,QAAQ,uBAAuBwW,CAAM,GAE9CsG,EAAM,KAAK,uBAAuBmI,EAAQ5U,EAAIsT,EAAI3jB,CAAM,CACzD,CACD,OAAO,KAAK,qBAAqBwW,EAAQsG,EAAK9c,EAAO,SAAS,CAC/D,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB+R,EAAWmT,EAAc,CACrD,IAAIrV,EAAS,KACTsV,EAAK,KAAK,SAAS,SAAS,YAAYpT,CAAS,EACjDqT,EAAmB,SAA0BnnB,EAAM6T,EAASuT,EAAqBC,EAAc/C,EAAiBliB,EAAa,CAC/H,GAAIglB,EAAoB,OAAS,EAI/B,QAHIE,EAAKF,EAAoB,KAAKlC,GAAkBllB,CAAI,CAAC,EACzDukB,EAAUvkB,IAASwT,GAASxT,IAASsT,EACjCiU,EAAUpD,GAAoB+C,EAAII,EAAID,EAAc/C,EAAiBC,CAAO,EACvEpkB,EAAI,EAAGA,EAAIonB,EAAQ,OAAQpnB,IAAK,CACvC,IAAImC,EAAIilB,EAAQpnB,CAAC,EAAE,EACfqnB,EAAcllB,EAAE,UAAU,CAAC,EAAE,YAAcwR,EAC3CjS,EAAK2lB,EAAcllB,EAAE,UAAU,CAAC,EAAIA,EAAE,UAAU,CAAC,EACrDsP,EAAO,qBAAqB/P,EAAG,QAAS,CACtC,KAAM0lB,EAAQpnB,CAAC,EAAE,EACjB,KAAMonB,EAAQpnB,CAAC,EAAE,EACjB,EAAGonB,EAAQpnB,CAAC,EAAE,KACd,EAAGonB,EAAQpnB,CAAC,EAAE,KACd,GAAIiC,EAAY,CAAC,EACjB,GAAIA,EAAY,CAAC,CAC/B,CAAa,CACF,CAEX,EACM+kB,EAAiB1T,EAAQyT,EAAID,EAAa,OAAQ,GAAM,EAAG,CAAC,EAAG,CAAC,CAAC,EACjEE,EAAiB7T,EAAK4T,EAAID,EAAa,IAAK,GAAM,EAAG,CAAC,EAAG,EAAE,CAAC,EAC5DE,EAAiB5T,EAAM2T,EAAID,EAAa,KAAM,GAAO,EAAG,CAAC,GAAI,CAAC,CAAC,EAC/DE,EAAiB3T,EAAO0T,EAAID,EAAa,MAAO,GAAO,EAAG,CAAC,EAAG,CAAC,CAAC,CACjE,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BQ,EAAO7P,EAAO8P,EAAOpf,EAAMqf,EAAUC,EAAW9iB,EAAKyf,EAASsD,EAAQC,EAAcC,EAAkB,CACtI,IAAI7lB,EAAWoG,EAAK,UAAUxD,CAAG,EAC7BkjB,EAAa9lB,EAAS,GACtBuZ,EAAO,CAAC,EAAG,CAAC,EAAE3W,CAAG,EACjBmjB,EAAS,CACX,MAAOrQ,EACP,MAAO8P,EACP,EAAGpf,EACH,EAAGqf,EACH,KAAMC,EACN,KAAMI,CACP,EACGE,EAAcT,EAAMI,CAAM,EAC1BM,EAAmBjmB,EAAS,sBAAwBulB,EAAMvlB,EAAS,qBAAqB,EAAI,KAC5FmkB,EACJ,GAAI8B,EAAkB,CACpB,IAAIC,EAAO5E,GAAiB2E,EAAkB,SAAUppB,EAAG,CACzD,OAAOA,EAAE,OAASipB,CAC5B,CAAS,EACD,GAAII,IAAS,GAAI,CACfD,EAAiB,OAAOC,EAAM,CAAC,EAC/B,QAASjoB,EAAI,EAAGA,EAAIgoB,EAAiB,OAAQhoB,IAC3CkmB,EAAY8B,EAAiBhoB,CAAC,EAAE,EAC5BkmB,EAAU,cAAgB,IAC5ByB,EAAa,IAAIzB,CAAS,EAE5B0B,EAAiB,IAAII,EAAiBhoB,CAAC,EAAE,EAAE,UAAU2E,CAAG,CAAC,EACzDijB,EAAiB,IAAII,EAAiBhoB,CAAC,EAAE,EAAE,UAAUsb,CAAI,CAAC,CAE7D,CACF,CACD,QAAS3a,EAAK,EAAGA,EAAKonB,EAAY,OAAQpnB,IACxCulB,EAAY6B,EAAYpnB,CAAE,EAAE,EACxBulB,EAAU,cAAgB,IAC5ByB,EAAa,IAAIzB,CAAS,EAE5B0B,EAAiB,IAAIG,EAAYpnB,CAAE,EAAE,EAAE,UAAUgE,CAAG,CAAC,EACrDijB,EAAiB,IAAIG,EAAYpnB,CAAE,EAAE,EAAE,UAAU2a,CAAI,CAAC,EAExD,CACE,IAAI4M,EAAY9D,EAAU,EAAI2D,EAAY,OAC1CA,EAAY,OAAOG,EAAW,EAAGJ,CAAM,CACxC,CACD/lB,EAAS,sBAAwB2lB,CAClC,CACL,EAAK,CACD,IAAK,iCACL,MAAO,SAAwC3lB,EAAU,CACvD,IAAIomB,EAAkB,KAAK,YAAY,IAAIpmB,EAAS,SAAS,EACzDqmB,EAAQ,GACX,SAAUtH,EAAMuH,EAAK,CACpB,GAAIvH,EAAM,CACR,IAAI/K,EAAI,SAAWnX,EAAG,CACpB,OAAOA,EAAE,OAASypB,CAC9B,EACUxL,EAAmBiE,EAAK,IAAK/K,CAAC,EAC9B8G,EAAmBiE,EAAK,KAAM/K,CAAC,EAC/B8G,EAAmBiE,EAAK,OAAQ/K,CAAC,EACjC8G,EAAmBiE,EAAK,MAAO/K,CAAC,EAChCqS,GAAStH,EAAK,IAAI,OAClBsH,GAAStH,EAAK,KAAK,OACnBsH,GAAStH,EAAK,OAAO,OACrBsH,GAAStH,EAAK,MAAM,MACrB,CACT,GAASqH,EAAiBpmB,EAAS,EAAE,EAC3BqmB,IAAU,GACZ,KAAK,YAAY,OAAUrmB,EAAS,SAAS,EAE/C,KAAK,gBAAgB,OAAUA,EAAS,QAAQ,EAAE,CACnD,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+BqW,EAAQxW,EAAQ,CACpD,IAAI8c,EACJ,OAAIsG,EAAa5M,CAAM,EACrBsG,EAAM,KAAK,gBAAgB,IAAItG,EAAO,EAAE,GAAK,CAC3C,KAAM,EACN,KAAM,EACN,EAAG,EACH,EAAG,EACH,GAAI,EACJ,GAAI,CACd,EACiB6M,GAAY7M,CAAM,EAC3BsG,EAAM,KAAK,uBAAuBtG,EAAQxW,CAAM,EAEhD8c,EAAM,KAAK,sBAAsBtG,EAAQxW,CAAM,EAEjDwW,EAAO,UAAYxW,EAAO,UACnB8c,CACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqB/a,EAAYsiB,EAAW,CACjD,IAAIqC,EAAa,KAAK,SAAS,SAAS,YAAY3kB,EAAW,QAAQ,EACnE4kB,EAAa,KAAK,SAAS,SAAS,YAAY5kB,EAAW,QAAQ,EACnE6kB,EAAK7kB,EAAW,UAAU,CAAC,EAC3B8kB,EAAK9kB,EAAW,UAAU,CAAC,EAC3B+kB,EAAW,KAAK,oBAAoBF,EAAI,CAC1C,GAAIF,EACJ,GAAIA,EACJ,QAASE,EACT,UAAWvC,EACX,SAAU,KAAK,SAAS,cAActiB,EAAW,QAAQ,CACjE,CAAO,EACGglB,EAAW,KAAK,oBAAoBF,EAAI,CAC1C,GAAIF,EACJ,GAAIA,EACJ,QAASE,EACT,UAAWxC,EACX,SAAU,KAAK,SAAS,cAActiB,EAAW,QAAQ,CACjE,CAAO,EACDA,EAAW,UAAU,cACrBA,EAAW,UAAU,QAAQ,CAC3B,UAAW+kB,EACX,UAAWC,EACX,eAAgBhlB,EAAW,UAAU,CAAC,EACtC,eAAgBA,EAAW,UAAU,CAAC,EACtC,YAAaA,EAAW,gBAAgB,YACxC,WAAY2kB,EACZ,WAAYC,CACpB,CAAO,CACF,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6BxmB,EAAUH,EAAQ,CACpDA,EAASA,GAAU,GACnB,IAAIwW,EAASrW,EAAS,QAClB2c,EAAM,KAAK,gBAAgB,IAAItG,EAAO,EAAE,EAC5C,OAAIsG,GAAO,MAAQ9c,EAAO,WAAa,MAAQwW,EAAO,YAAcxW,EAAO,aACzE8c,EAAM,KAAK,sBAAsBtG,EAAQxW,CAAM,EAC/C,KAAK,qBAAqBwW,EAAQsG,EAAK9c,EAAO,SAAS,GAElD8c,CACR,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgChd,EAAI,CACzC,OAAOA,EAAG,QAAU,KAAK,qBAAqBA,EAAG,OAAO,EAAI,CAAC,EAAG,CAAC,CAClE,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8B0W,EAAQnW,EAAa,CACxD,IAAI2mB,EAAY,KAAK,gBAAgB,IAAIxQ,EAAO,EAAE,EAC9CwQ,GAAa,OACfA,EAAU,GAAK3mB,EAAY,CAAC,EAC5B2mB,EAAU,GAAK3mB,EAAY,CAAC,EAE/B,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBP,EAAI,CAClC,OAAOA,EAAG,QAAU,CAACsjB,EAAatjB,EAAG,OAAO,GAAKA,EAAG,QAAQ,UAAU,OAAS,EAAI,EACpF,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBA,EAAI,CAC7B,OAAOA,EAAG,QAAUujB,GAAYvjB,EAAG,OAAO,EAAI,EAC/C,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBE,EAAQ,CACpC,OAAOuU,GAA8BvU,CAAM,CAC5C,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgB+R,EAAWsS,EAAW4C,EAAY,CACvD,IAAIhX,EAAS,KACTiX,EAAqB,IAAI,IACzBlB,EAAmB,IAAI,IACvBmB,EAAkB,IAAI,IAC1B,GAAI,CAAC,KAAK,SAAS,gBAAiB,CAClC,IAAIrnB,EAAK,KAAK,SAAS,mBAAmBiS,CAAS,GAAK,GACxDsS,EAAYA,GAAahZ,IAIzB,QAHI+b,EAAmB,CAAE,EACrBllB,EACAmlB,EACKjpB,EAAI,EAAGA,EAAI0B,EAAG,OAAQ1B,IAI7B,GAHAipB,EAAavnB,EAAG1B,CAAC,EACjB4nB,EAAiB,IAAIqB,CAAU,EAC/BnlB,EAAImlB,EAAW,QACXA,EAAW,YAAY,SAAW,EAChCjE,EAAalhB,CAAC,IACX,KAAK,YAAY,IAAI6P,CAAS,GACjC,KAAK,YAAY,IAAIA,EAAW,CAC9B,IAAK,CAAE,EACP,MAAO,CAAE,EACT,OAAQ,CAAE,EACV,KAAM,CAAE,CAC1B,CAAiB,EAEH,KAAK,kBAAkB,KAAK,YAAY,IAAIA,CAAS,EAAG,CAAC,KAAK,GAAK,EAAG,EAAG,CACvE,UAAW,CAACsV,EAAYA,CAAU,EAClC,YAAa,EAC7B,EAAiB,GAAOtV,EAAW,EAAG,GAAOI,GAAejQ,CAAC,EAAGglB,EAAoBlB,CAAgB,EACtFmB,EAAgB,IAAIpV,CAAS,OAG/B,SAASuV,EAAM,EAAGA,EAAMD,EAAW,YAAY,OAAQC,IAAO,CAC5D,IAAI/gB,EAAO8gB,EAAW,YAAYC,CAAG,EACjCjY,EAAW9I,EAAK,SAChB+I,EAAW/I,EAAK,SAChBghB,EAAmBnE,EAAa7c,EAAK,UAAU,CAAC,EAAE,OAAO,EACzDihB,EAAmBpE,EAAa7c,EAAK,UAAU,CAAC,EAAE,OAAO,EAC7D,GAAIghB,GAAoBC,EAAkB,CACxC,IAAItK,GAAM3W,EAAK,UAAU,CAAC,EAAE,QAAQ,OAAS,CAAA,GAAI,KAAK,GAAG,EACrD6W,GAAM7W,EAAK,UAAU,CAAC,EAAE,QAAQ,OAAS,CAAA,GAAI,KAAK,GAAG,EACrDkhB,EAAO,CAACpY,EAAU6N,EAAI5N,EAAU8N,CAAE,EAAE,KAAK,GAAG,EAC5CvgB,EAAIuqB,EAAiBK,CAAI,EACzB/N,EAAOnT,EAAK,WAAawL,EAAY,EAAI,EACzCwV,GAAoB,CAAC,KAAK,YAAY,IAAIlY,CAAQ,GACpD,KAAK,YAAY,IAAIA,EAAU,CAC7B,IAAK,CAAE,EACP,MAAO,CAAE,EACT,OAAQ,CAAE,EACV,KAAM,CAAE,CAC5B,CAAmB,EAECmY,GAAoB,CAAC,KAAK,YAAY,IAAIlY,CAAQ,GACpD,KAAK,YAAY,IAAIA,EAAU,CAC7B,IAAK,CAAE,EACP,MAAO,CAAE,EACT,OAAQ,CAAE,EACV,KAAM,CAAE,CAC5B,CAAmB,EAEH,IAAI7B,EAAK,KAAK,SAAS,SAAS,YAAY6B,CAAQ,EAChDoY,EAAK,KAAK,SAAS,SAAS,YAAYrY,CAAQ,EACpD,GAAIC,IAAaD,IAAakY,GAAoBC,GAChD,KAAK,kBAAkB,KAAK,YAAY,IAAInY,CAAQ,EAAG,CAAC,KAAK,GAAK,EAAG,EAAG9I,EAAM,GAAO+I,EAAU,EAAG,GAAOiC,EAAK2V,EAAoBlB,CAAgB,EAClJ,KAAK,kBAAkB,KAAK,YAAY,IAAI1W,CAAQ,EAAG,CAAC,KAAK,GAAK,EAAG,EAAG/I,EAAM,GAAO8I,EAAU,EAAG,GAAOkC,EAAK2V,EAAoBlB,CAAgB,MAC7I,CACL,IAAI2B,EAAiB,KAAK,SAAS,cAActY,CAAQ,EACrDuU,GAAiB,KAAK,SAAS,cAActU,CAAQ,EACpDzS,IACHA,EAAI,KAAK,sBAAsBwS,EAAUC,EAAUoY,EAAIja,EAAIlH,EAAK,UAAU,CAAC,EAAE,QAASA,EAAK,UAAU,CAAC,EAAE,QAASohB,EAAgB/D,EAAc,EAC/IwD,EAAiBK,CAAI,EAAI5qB,GAEvB0qB,GACF,KAAK,kBAAkB,KAAK,YAAY,IAAIlY,CAAQ,EAAGxS,EAAE,MAAO,EAAG0J,EAAM,GAAO+I,EAAU,EAAG,GAAOzS,EAAE,EAAE,CAAC,EAAGqqB,EAAoBlB,CAAgB,EAE9IwB,GACF,KAAK,kBAAkB,KAAK,YAAY,IAAIlY,CAAQ,EAAGzS,EAAE,OAAQ,GAAI0J,EAAM,GAAM8I,EAAU,EAAG,GAAMxS,EAAE,EAAE,CAAC,EAAGqqB,EAAoBlB,CAAgB,CAEnJ,CACGuB,GACFJ,EAAgB,IAAI9X,CAAQ,EAE1BmY,GACFL,EAAgB,IAAI7X,CAAQ,EAE9B4X,EAAmB,IAAI3gB,CAAI,GACvBghB,GAAoB7N,IAAS,GAAK8N,GAAoB9N,IAAS,IACjEsM,EAAiB,IAAIzf,EAAK,UAAUmT,CAAI,CAAC,CAE3D,KAAqB,CACL,IAAIJ,EAAgB+N,EAAW,YAAYC,CAAG,EAAE,UAAU/gB,EAAK,WAAawL,EAAY,EAAI,CAAC,EACzF6V,GAActO,EAAc,QAChC,GAAIgK,GAAUsE,EAAW,EAAG,CAC1B,KAAK,SAAS,eAAetO,EAAe,CAC1C,sBAAuBvH,EACvB,UAAWsS,CAC/B,CAAmB,EACD6C,EAAmB,IAAIG,EAAW,YAAYC,CAAG,CAAC,EAClD,QAASvZ,GAAI,EAAGA,GAAIuL,EAAc,YAAY,OAAQvL,KAChDuL,EAAc,YAAYvL,EAAC,IAAMsZ,EAAW,YAAYC,CAAG,GAC7DJ,EAAmB,IAAI5N,EAAc,YAAYvL,EAAC,CAAC,CAGzE,MACkBmZ,EAAmB,IAAIG,EAAW,YAAYC,CAAG,CAAC,CAErD,CACF,CAGLH,EAAgB,QAAQ,SAAU3Q,EAAQ,CACxCvG,EAAO,cAAcuG,EAAQvG,EAAO,YAAY,IAAIuG,CAAM,CAAC,CACrE,CAAS,EACDwP,EAAiB,QAAQ,SAAUlmB,EAAI,CACrC,IAAIqlB,GAAKlV,EAAO,SAAS,SAAS,YAAYnQ,EAAG,SAAS,EAC1DmQ,EAAO,SAAS,eAAenQ,EAAI,CACjC,UAAWukB,EACX,OAAQc,EACpB,CAAW,CACX,CAAS,EACD+B,EAAmB,QAAQ,SAAU3mB,EAAG,CACtC0P,EAAO,SAAS,iBAAiB1P,EAAG,CAClC,UAAW8jB,CACvB,CAAW,CACX,CAAS,CACF,CACD,MAAO,CACL,EAAG6C,EACH,EAAGlB,CACX,CACK,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,KAAK,gBAAgB,QACrB,KAAK,YAAY,OAClB,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmB7lB,EAAUqW,EAAQ,CACtCA,GAAU,OACZrW,EAAS,QAAUqW,EAEtB,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BjQ,EAAMif,EAAS,CAClDjf,EAAK,UAAU,CAAC,EAAE,QAAUif,EAAQ,CAAC,EACrCjf,EAAK,UAAU,CAAC,EAAE,QAAUif,EAAQ,CAAC,CACtC,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+BnW,EAAUC,EAAUoY,EAAIja,EAAIqJ,EAAcC,EAAc4Q,EAAgB/D,EAAgB,CAC5H,IAAI3F,EAAS,KACT4J,EAAc,CAChB,WAAY,aACZ,SAAU,WACV,SAAU,WACV,SAAU,UAClB,EACM,GAAIxY,IAAaC,EACf,MAAO,CACL,YAAauY,EAAY,SACzB,EAAG,CAACtW,EAAKA,CAAG,CACtB,EAEM,IAAIsE,EAAQ,KAAK,MAAMpI,EAAG,EAAE,EAAIia,EAAG,EAAE,EAAGja,EAAG,EAAE,EAAIia,EAAG,EAAE,CAAC,EACnDI,EAAS,KAAK,MAAMJ,EAAG,EAAE,EAAIja,EAAG,EAAE,EAAGia,EAAG,EAAE,EAAIja,EAAG,EAAE,CAAC,EACpDsa,EAAa,CAAE,EACfC,EAAY,CAAA,GACf,SAAUC,EAAOC,EAAK,CACrB,QAAS9pB,EAAI,EAAGA,EAAI6pB,EAAM,OAAQ7pB,IAAK,CACrC,IAAI+pB,EAcJ,GAbAH,EAAUC,EAAM7pB,CAAC,CAAC,GAAK+pB,EAAqB,GAAI/rB,EAAgB+rB,EAAoB3W,EAAM,CACxF,EAAG0W,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EACb,EAAG8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAAE,CAC3B,CAAW,EAAGhC,EAAgB+rB,EAAoB1W,EAAO,CAC7C,EAAGyW,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAAI8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAC3B,EAAG8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAAE,CAC3B,CAAW,EAAGhC,EAAgB+rB,EAAoB5W,EAAK,CAC3C,EAAG2W,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAAE,EACf,EAAG8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,CACzB,CAAW,EAAGhC,EAAgB+rB,EAAoBzW,EAAQ,CAC9C,EAAGwW,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAAE,EACf,EAAG8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,EAAI8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,CACvC,CAAW,EAAG+pB,GACAD,EAAI9pB,CAAC,EAAE,CAAC,GAAK,MAAQ8pB,EAAI9pB,CAAC,EAAE,CAAC,EAAE,OAAS,EAC1C,QAASgqB,KAAQJ,EAAUC,EAAM7pB,CAAC,CAAC,EACjC4pB,EAAUC,EAAM7pB,CAAC,CAAC,EAAEgqB,CAAI,EAAInK,EAAO,SAAS,kBAAkB+J,EAAUC,EAAM7pB,CAAC,CAAC,EAAEgqB,CAAI,EAAGF,EAAI9pB,CAAC,EAAE,CAAC,CAAC,CAGvG,CACF,GAAE,CAAC+I,GAAQC,EAAM,EAAG,CAAC,CAACsgB,EAAIC,CAAc,EAAG,CAACla,EAAImW,CAAc,CAAC,CAAC,EAEjE,QADIyE,EAAQ,CAAC9W,EAAKC,EAAMC,EAAOC,CAAM,EAC5B4W,EAAK,EAAGA,EAAKD,EAAM,OAAQC,IAClC,QAASC,EAAK,EAAGA,EAAKF,EAAM,OAAQE,IAClCR,EAAW,KAAK,CACd,OAAQM,EAAMC,CAAE,EAChB,OAAQD,EAAME,CAAE,EAChB,KAAMnjB,GAAW4iB,EAAU,OAAOK,EAAMC,CAAE,CAAC,EAAGN,EAAU,OAAOK,EAAME,CAAE,CAAC,CAAC,CACrF,CAAW,EAGLR,EAAW,KAAK,SAAU7lB,EAAG6C,EAAG,CAC9B,GAAI7C,EAAE,KAAO6C,EAAE,KACb,MAAO,GACF,GAAIA,EAAE,KAAO7C,EAAE,KACpB,MAAO,GAEP,IAAIsmB,EACAC,GAAeD,EAAe,CAAE,EAAEpsB,EAAgBosB,EAAchX,EAAM,CAAC,EAAGpV,EAAgBosB,EAAcjX,EAAK,CAAC,EAAGnV,EAAgBosB,EAAc/W,EAAO,CAAC,EAAGrV,EAAgBosB,EAAc9W,EAAQ,CAAC,EAAG8W,GACpME,EAAMD,EAAYvmB,EAAE,MAAM,EAC1BymB,EAAMF,EAAY1jB,EAAE,MAAM,EAC1B6jB,GAAMH,EAAYvmB,EAAE,MAAM,EAC1B2mB,EAAMJ,EAAY1jB,EAAE,MAAM,EAC9B,OAAO2jB,EAAMC,EAAM,GAAKA,EAAMD,EAAM,EAAIE,GAAMC,EAAM,GAAKA,EAAMD,GAAM,EAAI,CAEnF,CAAO,EAGD,QAFIE,EAAaf,EAAW,CAAC,EAAE,OAC3BgB,EAAahB,EAAW,CAAC,EAAE,OACtB3pB,EAAI,EAAGA,EAAI2pB,EAAW,SACzB3E,EAAatM,CAAY,GAAKA,EAAa,OAC7CgS,EAAahS,EAAa,YACjB,CAACA,EAAa,cAAgBrE,GAAgBqE,EAAciR,EAAW3pB,CAAC,EAAE,MAAM,EACzF0qB,EAAaf,EAAW3pB,CAAC,EAAE,OAE3B0qB,EAAa,KAEX/R,EAAa,cAAgBA,EAAa,OAC5CgS,EAAahS,EAAa,YACjB,CAACA,EAAa,cAAgBtE,GAAgBsE,EAAcgR,EAAW3pB,CAAC,EAAE,MAAM,EACzF2qB,EAAahB,EAAW3pB,CAAC,EAAE,OAE3B2qB,EAAa,KAEX,EAAAD,GAAc,MAAQC,GAAc,OAfH3qB,IAerC,CAIF,OAAI0Y,EAAa,cACf,KAAK,eAAeA,EAAcgS,CAAU,EAE1C/R,EAAa,cACf,KAAK,eAAeA,EAAcgS,CAAU,EAEvC,CACL,EAAG,CAACD,EAAYC,CAAU,EAC1B,MAAOlT,EACP,OAAQiS,CAChB,CACK,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwB5lB,EAAGmQ,EAAM2W,EAAc,CACpD9mB,EAAE,YAAcmQ,EACZ2W,GAAgB9mB,EAAE,YAAc,OAClCA,EAAE,WAAaA,EAAE,YAEpB,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAcA,EAAG,CACtBA,EAAE,OAAS,GACPkhB,EAAalhB,CAAC,IAChBA,EAAE,WAAaA,EAAE,YAEpB,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgBA,EAAG,CACxBA,EAAE,OAAS,GACPkhB,EAAalhB,CAAC,IAChBA,EAAE,WAAa,KAElB,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BA,EAAGyC,EAAQ,CAC9C,IAAI5B,EAAM0e,GAAiBvf,EAAE,UAAW,SAAUwO,EAAK,CACrD,OAAOA,EAAI,IAAM/L,EAAO,GAAK+L,EAAI,IAAM/L,EAAO,CACtD,CAAO,EACD,OAAI5B,IAAQ,IACVb,EAAE,gBAAkBa,EACb,IAEA,EAEV,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBb,EAAG,CAC7BA,EAAE,aAAe,OACnBA,EAAE,WAAaA,EAAE,cAAgBsP,GAAQtP,EAAE,cAAgBuP,EAAQE,GAAeC,GAErF,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2B1P,EAAG,CACnCA,EAAE,WAAa,IAChB,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsB+mB,EAAIC,EAAI,CACnC,GAAI,CAACD,GAAM,CAACC,EACV,MAAO,GAET,IAAIC,EAAKF,EAAG,UAAUA,EAAG,eAAe,EACpCG,EAAKF,EAAG,UAAUA,EAAG,eAAe,EACxC,OAAOC,EAAG,IAAMC,EAAG,GAAKD,EAAG,IAAMC,EAAG,GAAKD,EAAG,OAASC,EAAG,MAAQD,EAAG,OAASC,EAAG,MAAQD,EAAG,KAAOC,EAAG,IAAMD,EAAG,KAAOC,EAAG,EACxH,CACF,CAAA,CAAC,EACK5F,CACT,IAEI6F,GAAyB,UAAY,CACvC,SAASA,EAAuBC,EAAUC,EAAK,CAC7C,IAAIC,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GAClF9tB,EAAgB,KAAM2tB,CAAsB,EAC5C,KAAK,SAAWC,EAChB,KAAK,IAAMC,EACX,KAAK,QAAUC,EACfptB,EAAgB,KAAM,KAAM,MAAM,EAClCA,EAAgB,KAAM,SAAU,MAAM,EACtC,KAAK,GAAKiP,IACV,KAAK,OAASke,EAAI,IAAI,QAAUE,EACjC,CACD,OAAAxtB,EAAaotB,EAAwB,CAAC,CACpC,IAAK,aACL,MAAO,SAAoBK,EAAS,CAClC,KAAK,IAAI,QAAUA,CACpB,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,IAAI,UAAY,EAC7B,CACF,CAAA,CAAC,EACKL,CACT,IACII,GAAuB,SACvBE,GAAoB,MACpBC,GAA2B,YAC3BC,GAA2B,YAC3BC,GAAqC,oBAEzC,SAASC,GAAYC,EAAIC,EAAI,CAG3B,QAFIC,EAAKF,EAAG,MAAM,MAAM,IAAI,EACxBG,EAAKF,EAAG,MAAM,MAAM,IAAI,EACnB7rB,EAAI,EAAGA,EAAI8rB,EAAG,OAAQ9rB,IAC7B,QAASwR,EAAI,EAAGA,EAAIua,EAAG,OAAQva,IAC7B,GAAIua,EAAGva,CAAC,IAAMsa,EAAG9rB,CAAC,EAChB,MAAO,GAIb,MAAO,EACT,CACA,SAASgsB,GAAYzuB,EAAU0uB,EAAOC,EAAa,CACjD,IAAIlb,EAAI,CAAA,EACJmb,EAAa,SAAoBnsB,EAAG,CACtC,OAAIgN,EAAShN,CAAC,EACLA,EAEAzC,EAAS,MAAMyC,CAAC,CAE7B,EACE,GAAIisB,EACF,GAAI,OAAOA,GAAU,SAAU,CAC7B,GAAIA,IAAU,IACZ,OAAOA,EAETjb,EAAE,KAAKib,CAAK,CAClB,SACUC,EACFlb,EAAIib,UAEAA,EAAM,QAAU,KAAM,CACxB,IAAIG,GACHA,EAAKpb,GAAG,KAAK,MAAMob,EAAI/rB,GAAmBA,GAAmB4rB,CAAK,EAAE,IAAIE,CAAU,CAAC,CAAC,CAC/F,MACUnb,EAAE,KAAKmb,EAAWF,CAAK,CAAC,EAKhC,OAAOjb,CACT,CACA,SAASqb,GAAmBC,EAAgB5qB,EAAI,CAC1C4qB,GAAkB,MACpBA,EAAe,UAAU,KAAK5qB,CAAE,CAEpC,CACA,SAAS6qB,GAAsBD,EAAgBvqB,EAAU,CACnDuqB,GAAkB,MACpBzP,EAAmByP,EAAe,UAAW,SAAU5qB,EAAI,CACzD,OAAOA,IAAOK,CACpB,CAAK,CAEL,CACA,SAASyqB,GAAqB7oB,EAAY8oB,EAAUC,EAAU,CACxDD,GAAY,OACdA,EAAS,YAAY,KAAK9oB,CAAU,EAChC8oB,EAAS,YAAY,SAAW,GAClC9oB,EAAW,SAAS,SAASA,EAAW,OAAQA,EAAW,SAAS,cAAc,GAGlF+oB,GAAY,OACVD,GAAY,MAAQ9oB,EAAW,WAAaA,EAAW,YACzD+oB,EAAS,YAAY,KAAK/oB,CAAU,EAChC+oB,EAAS,YAAY,SAAW,GAClC/oB,EAAW,SAAS,SAASA,EAAW,OAAQA,EAAW,SAAS,cAAc,EAI1F,CACA,SAASgpB,GAAwBhpB,EAAY8oB,EAAUC,EAAU,CAC/D,GAAID,GAAY,KAAM,CACpB,IAAIG,EAAcH,EAAS,YAAY,OACvC5P,EAAmB4P,EAAS,YAAa,SAAUjqB,EAAI,CACrD,OAAOmB,EAAW,KAAOnB,EAAG,EAClC,CAAK,EACGoqB,EAAc,GAAKH,EAAS,YAAY,SAAW,GACrD9oB,EAAW,SAAS,YAAYA,EAAW,OAAQA,EAAW,SAAS,cAAc,CAExF,CACD,GAAI+oB,GAAY,KAAM,CACpB,IAAIG,EAAcH,EAAS,YAAY,QACnCD,GAAY,MAAQ9oB,EAAW,WAAaA,EAAW,WACzDkZ,EAAmB6P,EAAS,YAAa,SAAUlqB,EAAI,CACrD,OAAOmB,EAAW,KAAOnB,EAAG,EACpC,CAAO,EAECqqB,EAAc,GAAKH,EAAS,YAAY,SAAW,GACrD/oB,EAAW,SAAS,YAAYA,EAAW,OAAQA,EAAW,SAAS,cAAc,CAExF,CACH,CACG,IAACmpB,GAAkB,SAAU3f,EAAiB,CAC/C/O,EAAU0uB,EAAiB3f,CAAe,EAC1C,IAAIvK,EAAS3D,EAAa6tB,CAAe,EACzC,SAASA,EAAgBC,EAAgBC,EAAU,CACjD,IAAInqB,EACJ,OAAAvF,EAAgB,KAAMwvB,CAAe,EACrCjqB,EAAQD,EAAO,KAAK,IAAI,EACxBC,EAAM,eAAiBkqB,EACvB/uB,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,CAAE,CAAA,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,2BAA4B,EAAK,EAChF7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,EAAK,EACzE7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,EAAK,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,EAAK,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,IAAI,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkBiH,EAAe,EAChF9L,EAAgBa,EAAuBgE,CAAK,EAAG,wBAAyBkH,EAAuB,EAC/F/L,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkBmH,EAAe,EAChFhM,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiBoH,EAAc,EAC9EjM,EAAgBa,EAAuBgE,CAAK,EAAG,yBAA0BqH,EAAwB,EACjGlM,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqBsH,EAAmB,EACvFnM,EAAgBa,EAAuBgE,CAAK,EAAG,wBAAyBuH,EAAuB,EAC/FpM,EAAgBa,EAAuBgE,CAAK,EAAG,2BAA4BwH,EAA2B,EACtGrM,EAAgBa,EAAuBgE,CAAK,EAAG,6BAA8ByH,EAA6B,EAC1GtM,EAAgBa,EAAuBgE,CAAK,EAAG,4BAA6B0H,EAA4B,EACxGvM,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB6H,EAAa,EAC5E1M,EAAgBa,EAAuBgE,CAAK,EAAG,cAAe,CAAE,CAAA,EAChE7E,EAAgBa,EAAuBgE,CAAK,EAAG,qBAAsB,CAAE,CAAA,EACvE7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,IAAI,GAAK,EAC3E7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,CAAE,CAAA,EACpE7E,EAAgBa,EAAuBgE,CAAK,EAAG,kBAAmB,CAAE,CAAA,EACpE7E,EAAgBa,EAAuBgE,CAAK,EAAG,oBAAqB,MAAM,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,cAAe,CAAC,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,IAAIygB,GAASzkB,EAAuBgE,CAAK,CAAC,CAAC,EACtG7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,eAAgB,MAAM,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,IAAI,GAAK,EAC5E7E,EAAgBa,EAAuBgE,CAAK,EAAG,iBAAkB,IAAI,GAAK,EAC1E7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,CAAE,CAAA,EACrE7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,CAAC,EACzDA,EAAM,SAAW,CACf,OAAQwS,GAAgB,OACxB,QAAS,CAAC,KAAM,IAAI,EACpB,sBAAuB,GACvB,mBAAoB,CAAE,EACtB,UAAW1N,GAAkB,KAC7B,UAAW,KACX,SAAUjF,GAAY,KACtB,iBAAkB,CAAE,EACpB,UAAW,CAAC,KAAM,IAAI,EACtB,cAAe,CACb,KAAM,MACP,EACD,eAAgB,CAAC,KAAM,IAAI,EAC3B,mBAAoB,KACpB,oBAAqB,CAAC,KAAM,IAAI,EAChC,gBAAiB,KACjB,UAAW,CAAE,EACb,eAAgB,EAChB,WAAY,CACV,YAAa,EACb,OAAQ,MACT,EACD,oBAAqB,GACrB,MAAO,uBACP,kBAAmB,EACzB,EACQsqB,GACFzd,EAAO1M,EAAM,SAAUmqB,CAAQ,EAEjCzd,EAAO1M,EAAM,iBAAkBA,EAAM,QAAQ,EACzCA,EAAM,iBAAiB+J,EAAuB,GAAK,OACrD/J,EAAM,iBAAiB+J,EAAuB,EAAE,YAAc/J,EAAM,iBAAiB+J,EAAuB,EAAE,aAAe,GAE/H/J,EAAM,cAAgBA,EAAM,SAASgK,EAAiB,EACtDhK,EAAM,kBAAoBA,EAAM,iBAAiB8J,EAA+B,IAAM,GACtF9J,EAAM,OAAS,IAAIuiB,GAAkBvmB,EAAuBgE,CAAK,CAAC,EAClEA,EAAM,aAAe,IAAIya,GAAaze,EAAuBgE,CAAK,CAAC,EACnEA,EAAM,aAAaA,EAAM,iBAAiB,SAAS,EAC5CA,CACR,CACD,OAAAhF,EAAaivB,EAAiB,CAAC,CAC7B,IAAK,eACL,IAAK,UAAe,CAClB,OAAO,KAAK,aACb,CACL,EAAK,CACD,IAAK,cACL,IAAK,UAAe,CAClB,OAAO,KAAK,KACb,CACL,EAAK,CACD,IAAK,uBACL,MAAO,UAAgC,CACrC,OAAO,KAAK,iBAAiB,KAAK,SAAS,OAAO,CACnD,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0B1F,EAAS,CACxC,OAAOA,GAAW,MAAQA,EAAQ,CAAC,GAAK,MAAQA,EAAQ,CAAC,GAAK,IAC/D,CACL,EAAK,CACD,IAAK,eACL,MAAO,UAAwB,CAC7B,OAAO,KAAK,UACb,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiB6F,EAAGC,EAAmB,CAC5C,YAAK,MAAQD,EACb,KAAK,KAAKlhB,GAAY,KAAK,KAAK,EAC5BmhB,GACF,KAAK,kBAAiB,EAEjB,EACR,CACL,EAAK,CACD,IAAK,WACL,MAAO,UAAoB,CACzB,MAAO,GAAK,KAAK,aAClB,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBC,EAAerlB,EAAM,CAClD,IAAItB,EAAI,KAAK,YAAY2mB,CAAa,EAClCnc,EAAI,GACR,GAAIxK,GAAKA,EAAE,OAAS,EAAG,CACrB,IAAIshB,EAAS,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,EACpD,GAAI,CACF,QAAS9nB,EAAI,EAAGwR,EAAIhL,EAAE,OAAQxG,EAAIwR,EAAGxR,IACnCgR,EAAIA,GAAKxK,EAAExG,CAAC,EAAE,MAAMwG,EAAExG,CAAC,EAAG8nB,CAAM,CAEnC,OAAQlpB,EAAP,CACAwD,EAAI,2BAA6B+qB,EAAgB,IAAMvuB,CAAC,CACzD,CACF,CACD,OAAOoS,CACR,CACL,EAAK,CACD,IAAK,QACL,MAAO,SAAe0C,EAASzG,EAAM,CACnC,GAAIyG,GAAW,KACb,OAAO,KAET,IAAInB,EAAK,KAAK,aAAamB,EAASnK,EAAiB,EACrD,OAAI,CAACgJ,GAAMA,IAAO,eACZ,UAAU,SAAW,GAAK,UAAU,CAAC,IAAM,OAC7CA,EAAKtF,GACI,UAAU,SAAW,GAAK,UAAU,SAAW,GAAK,CAAC,UAAU,CAAC,KACzEsF,EAAK,WAAa,KAAK,eAAiB,IAAM,KAAK,YAErD,KAAK,aAAamB,EAASnK,GAAmBgJ,CAAE,GAE3CA,CACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwByJ,EAASoR,EAAM,CACvCpR,EAEMA,EAAQ,cAAgB,SACjCA,EAAU,CACR,MAASA,CACnB,GAJQA,EAAU,CAAA,EAsBZ,QAhBI7K,EAAQ6K,EAAQ,OAAS,KAAK,aAC9BqR,EAASrB,GAAY,KAAM7a,EAAO,EAAI,EACtCmc,EAAUtB,GAAY,KAAMhQ,EAAQ,MAAM,EAC1CuR,EAAUvB,GAAY,KAAMhQ,EAAQ,MAAM,EAC1CwR,EAAU,CAACJ,GAAQC,EAAO,OAAS,EAAI,CAAA,EAAK,CAAE,EAC9CI,EAAU,SAAiBtc,EAAOlT,EAAK,CACzC,GAAI,CAACmvB,GAAQC,EAAO,OAAS,EAAG,CAC9B,IAAIK,EAAKF,EAAQrc,CAAK,EAClBuc,GAAM,OACRA,EAAKF,EAAQrc,CAAK,EAAI,IAExBuc,EAAG,KAAKzvB,CAAG,CACrB,MACUuvB,EAAQ,KAAKvvB,CAAG,CAE1B,EACeuT,EAAI,EAAGmc,EAAK,KAAK,YAAY,OAAQnc,EAAImc,EAAInc,IAAK,CACzD,IAAIoc,EAAM,KAAK,YAAYpc,CAAC,EACxBP,EAAW2c,EAAI,SAAWA,EAAI,QAAQ,CAAC,EAAIA,EAAI,QAAQ,CAAC,EAAE,WAAW,UAAYA,EAAI,SACrF1c,EAAW0c,EAAI,SAAWA,EAAI,QAAQ,CAAC,EAAIA,EAAI,QAAQ,CAAC,EAAE,WAAW,UAAYA,EAAI,SACrFC,EAAWR,EAAQO,EAAI,KAAK,GAAKC,EAAWP,EAASrc,CAAQ,GAAK4c,EAAWN,EAASrc,CAAQ,GAChGuc,EAAQG,EAAI,MAAOA,CAAG,CAEzB,CACD,OAAOJ,CACR,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgB5rB,EAAQ,CAC7B,OAAAA,EAASA,GAAU,GACnBA,EAAO,MAAQA,EAAO,OAAS,IACxB,IAAImgB,GAAoB,KAAMngB,EAAO,aAAe,KAAK,eAAeA,EAAQ,EAAI,CAAC,CAC7F,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBA,EAAQ,CACtCA,EAASA,GAAU,GACnBA,EAAO,MAAQA,EAAO,OAASmd,GAC/B,IAAI+O,EAAmB,CAAClsB,EAAO,SAAW,CAACA,EAAO,QAAU,CAACA,EAAO,OAChEmsB,EAAWD,EAAmB/O,GAAWiN,GAAY,KAAMpqB,EAAO,OAAO,EACzE0rB,EAAUQ,EAAmB/O,GAAWiN,GAAY,KAAMpqB,EAAO,MAAM,EACvE2rB,EAAUO,EAAmB/O,GAAWiN,GAAY,KAAMpqB,EAAO,MAAM,EACvEyrB,EAASrB,GAAY,KAAMpqB,EAAO,MAAO,EAAI,EAC7CF,EAAK,CAAA,EACT,QAASssB,KAAQ,KAAK,mBAAoB,CACxC,IAAIC,EAASJ,EAAWE,EAAUC,EAAM,EAAI,EACxCE,EAASL,EAAWP,EAASU,EAAM,EAAI,EACvCG,EAAmBb,IAAY,IAC/B5vB,EAASmwB,EAAWN,EAASS,EAAM,EAAI,EACvCI,EAAmBb,IAAY,IACnC,GAAIU,GAAUC,GAAUxwB,EAAQ,CAC9B2wB,EAAO,QAASruB,EAAI,EAAGsuB,EAAK,KAAK,mBAAmBN,CAAI,EAAE,OAAQhuB,EAAIsuB,EAAItuB,IAAK,CAC7E,IAAI4b,EAAM,KAAK,mBAAmBoS,CAAI,EAAEhuB,CAAC,EACzC,GAAI6tB,EAAWR,EAAQzR,EAAI,MAAO,EAAI,EAAG,CACvC,IAAI2S,EAAgBJ,GAAoBb,EAAQ,OAAS,GAAK,CAAC1R,EAAI,SAC/D4S,EAAgBJ,GAAoBb,EAAQ,OAAS,GAAK,CAAC3R,EAAI,SACnE,GAAI2S,GAAiBC,EACnB,SAASH,EAEX3sB,EAAG,KAAKka,CAAG,CACZ,CACF,CACF,CACF,CACD,OAAO,IAAIiG,GAAkB,KAAMngB,CAAE,CACtC,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBS,EAAG,CAC9B,KAAK,WAAaA,EAClB,KAAK,KAAK6I,GAAwB,KAAK,UAAU,CAClD,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAc7I,EAAGmX,EAAI3U,EAAK,CAC/B,IAAI8pB,EAAU,CAAC,CACb,GAAI,SACJ,KAAM,UACd,EAAS,CACD,GAAI,SACJ,KAAM,UACd,CAAO,EACG/sB,EACAgtB,EAAMD,EAAQ9pB,CAAG,EACjBgqB,EAAMxsB,EAAEusB,EAAI,IAAI,EAChBE,EACAC,EAAc1sB,EAAE,UAAUwC,CAAG,EAC7BmqB,EAAY,CACd,MAAOnqB,EACP,iBAAkBkqB,EAClB,iBAAkBlqB,IAAQ,EAAIgqB,EAAMxsB,EAAE,SACtC,YAAaA,EAAE,SACf,iBAAkBwC,IAAQ,EAAIgqB,EAAMxsB,EAAE,SACtC,YAAaA,EAAE,SACf,WAAYA,EACZ,YAAa0sB,CACrB,EACM,OAAIvV,aAAcoB,IAChBhZ,EAAK4X,EACL5X,EAAG,cAAcS,CAAC,IAElBysB,EAAM,KAAK,MAAMtV,CAAE,EACfsV,IAAQzsB,EAAEusB,EAAI,IAAI,EACpBhtB,EAAK,KAELA,EAAKS,EAAE,aAAawC,IAAQ,EAAG2U,EAAIsV,CAAG,GAGtCltB,GAAM,OACRotB,EAAU,YAAcptB,EACxBmtB,EAAY,qBAAqB1sB,CAAC,EAClCA,EAAE,UAAUwC,CAAG,EAAIjD,EACnBS,EAAEusB,EAAI,EAAE,EAAIhtB,EAAG,QACfS,EAAEusB,EAAI,IAAI,EAAIhtB,EAAG,UACjBotB,EAAUnqB,IAAQ,EAAI,cAAgB,aAAa,EAAIjD,EAAG,UAC1D,KAAK,cAAcotB,CAAS,EAC5B,KAAK,iBAAiB3sB,CAAC,GAElB2sB,CACR,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBnrB,EAAY2V,EAAI,CACxCqT,GAAwBhpB,EAAY,KAAK,iBAAiBA,EAAW,QAAQ,CAAC,EAC9E,IAAIjF,EAAI,KAAK,KAAKiF,EAAY2V,EAAI,CAAC,EACnCkT,GAAqB7oB,EAAY,KAAK,iBAAiBjF,EAAE,WAAW,CAAC,CACtE,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBiF,EAAY2V,EAAI,CACxCqT,GAAwBhpB,EAAY,KAAK,iBAAiBA,EAAW,QAAQ,CAAC,EAC9E,IAAIjF,EAAI,KAAK,KAAKiF,EAAY2V,EAAI,CAAC,EACnCkT,GAAqB7oB,EAAY,KAAK,iBAAiBjF,EAAE,WAAW,CAAC,CACtE,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BiF,EAAYqM,EAAMpO,EAAQ,CAC1D+B,EAAW,QAAQqM,EAAMpO,CAAM,EAC/B,KAAK,iBAAiB+B,CAAU,CACjC,CACL,EAAK,CACD,IAAK,mBACL,MAAO,UAA4B,CACjC,OAAO,KAAK,cACb,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2B4gB,EAAKwK,EAAmB,CACxD,IAAIC,EAAS,KAAK,gBAClB,YAAK,gBAAkBzK,EACnBA,EACF,KAAK,aAAe,GAAK,IAAI,KAAM,EAAC,QAAO,GAE3C,KAAK,aAAe,KACpB,KAAK,SAAS,mBAEZwK,GACF,KAAK,kBAAiB,EAEjBC,CACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,OAAO,KAAK,YACb,CACL,EAAK,CACD,IAAK,QACL,MAAO,SAAetN,EAAIuN,EAAwB,CAChD,IAAIC,EAAgB,KAAK,kBAAoB,GACxCA,GACH,KAAK,kBAAkB,EAAI,EAE7BxN,IACKwN,GACH,KAAK,kBAAkB,GAAO,CAACD,CAAsB,CAExD,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAcliB,EAAM2U,EAAI,CAC7B,GAAI3U,GAAQ,KAGZ,IAAIA,EAAK,QAAU,KACjB,QAAS/M,EAAI,EAAGA,EAAI+M,EAAK,OAAQ/M,IAC/B0hB,EAAG3U,EAAK/M,CAAC,CAAC,OAGZ0hB,EAAG3U,CAAI,EAET,OAAO,KACR,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBnL,EAAQ,CACnC,IAAI2X,EAAO3X,EAAO,KAClB,OAAIA,EAAO,OACF,KAAK,SAAS,eAAe2X,CAAI,EAEjC,KAAK,SAAS,YAAYA,CAAI,CAExC,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0B5V,EAAY/B,EAAQ,CACnD,GAAI+B,GAAc,MAAQA,EAAW,UAAY,KAC/C/B,EAASA,GAAU,GACfA,EAAO,OAASutB,GAAc,GAAM,GAAO,CAAC,CAACxrB,EAAW,UAAU,CAAC,EAAGqI,GAAmB,CAACrI,CAAU,CAAC,EAAG,CAACA,EAAW,UAAU,CAAC,EAAGqI,GAAmB,CAACrI,CAAU,CAAC,EAAG,CAACA,EAAYqI,GAAmB,CAACrI,CAAU,CAAC,EAAG,CAAC,KAAMiG,GAAiB,CAACuC,GAAyBxI,CAAU,CAAC,CAAC,CAAC,GAAG,CACvRgpB,GAAwBhpB,EAAY,KAAK,iBAAiBA,EAAW,QAAQ,EAAG,KAAK,iBAAiBA,EAAW,QAAQ,CAAC,EAC1H,KAAK,gBAAgBA,EAAY,CAACA,EAAW,SAAW/B,EAAO,YAAc,GAAOA,EAAO,aAAa,EACxG,IAAIwtB,EAAkBzrB,EAAW,UAAU,CAAC,EACxC0rB,EAAiB1rB,EAAW,UAAU,CAAC,EAC3C,OAAIyrB,IAAoBxtB,EAAO,kBAC7BwtB,EAAgB,qBAAqBzrB,EAAY,KAAM,EAAI,EAEzD0rB,IAAmBztB,EAAO,kBAC5BytB,EAAe,qBAAqB1rB,EAAY,KAAM,EAAI,EAE5DkZ,EAAmB,KAAK,YAAa,SAAUra,EAAI,CACjD,OAAOmB,EAAW,KAAOnB,EAAG,EACxC,CAAW,EACDmB,EAAW,QAAO,EACdyrB,IAAoBxtB,EAAO,kBAAoBwtB,EAAgB,eAAiBA,EAAgB,YAAY,SAAW,GACzH,KAAK,eAAeA,CAAe,EAEjCC,IAAmBztB,EAAO,kBAAoBytB,EAAe,eAAiBA,EAAe,YAAY,SAAW,GACtH,KAAK,eAAeA,CAAc,EAE7B,EACR,CAEH,MAAO,EACR,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+BztB,EAAQ,CAC5C,IAAI6P,EAAS,KACb7P,EAASA,GAAU,GACnB,IAAIuZ,EAAQ,KAAK,YAAY,OACzBmU,EAAe,EACnB,YAAK,MAAM,UAAY,CACrB,QAAStvB,EAAI,EAAGA,EAAImb,EAAOnb,IACzBsvB,GAAgB7d,EAAO,iBAAiBA,EAAO,YAAY,CAAC,EAAG7P,CAAM,EAAI,EAAI,CAEvF,CAAO,EACM0tB,CACR,CACL,EAAK,CACD,IAAK,8BACL,MAAO,SAAqChW,EAAI1X,EAAQ,CACtD,IAAI2Q,EAAK,KAAK,MAAM+G,CAAE,EAClBkH,EAAI,KAAK,iBAAiBjO,CAAE,EAChC,GAAIiO,EAEF,QADI,EAAIA,EAAE,YAAY,OACbxgB,EAAI,EAAGA,EAAI,EAAGA,IACrB,KAAK,iBAAiBwgB,EAAE,YAAY,CAAC,EAAG5e,CAAM,EAGlD,OAAO,IACR,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB2tB,EAAKC,EAAa/hB,EAAe,CAC/D,IAAIgiB,EAAkBF,EAAI,IAAM,KAC5B3tB,EAAS6tB,EAAkB,CAC7B,WAAYF,EACZ,OAAQA,EAAI,OACZ,OAAQA,EAAI,OACZ,SAAUA,EAAI,SACd,SAAUA,EAAI,SACd,eAAgBA,EAAI,UAAU,CAAC,EAC/B,eAAgBA,EAAI,UAAU,CAAC,CAChC,EAAGA,EACAC,GACF,KAAK,KAAK1kB,GAA2BlJ,EAAQ6L,CAAa,EAE5D,KAAK,KAAKtC,GAAoCvJ,EAAQ6L,CAAa,CACpE,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB7L,EAAQggB,EAAK,CACzC,KAAK,KAAK7W,GAAwBnJ,EAAQggB,CAAG,CAC9C,CACL,EAAK,CACD,IAAK,YACL,MAAO,SAAmBmM,EAAU2B,EAAQ,CAE1C,QADIC,EAAK3iB,EAAS+gB,CAAQ,EAAI,KAAK,YAAY,KAAK,aAAY,EAAIA,CAAQ,EAAIA,EACvE/tB,EAAI,EAAGA,EAAI2vB,EAAG,OAAQ3vB,IAC7B,KAAK,OAAO2vB,EAAG3vB,CAAC,EAAG,KAAM0vB,CAAM,CAElC,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgBhc,EAASkc,EAAYC,EAAS,CAC/C,KAAK,aAAanc,EAASnK,EAAiB,GAAK,OACnDqmB,EAAaA,GAAc,KAAK,aAAalc,EAAS,IAAI,GAAKzG,IAC/D,KAAK,aAAayG,EAASnK,GAAmBqmB,CAAU,GAE1D,IAAIrW,EAAO,KAAK,MAAM7F,CAAO,EAC7B,GAAK,KAAK,iBAAiB6F,CAAI,EAqBzBsW,IACF,KAAK,iBAAiBtW,CAAI,EAAE,gBAAkB,KAAK,aAAa,CAC9D,KAAMA,EACN,UAAW,KACX,OAAQ,EACpB,CAAW,OA1B6B,CAChC,IAAItb,EAAM,CACR,GAAIyV,EACJ,UAAW,CAAE,EACb,YAAa,CAAE,EACf,SAAU,EACV,KAAM,CAAE,CAClB,EACQ,KAAK,iBAAiB6F,CAAI,EAAItb,EAC1B,KAAK,gBACPA,EAAI,gBAAkB,KAAK,SAAS,gBAAgBsb,EAAM,EAAI,EAE9Dtb,EAAI,gBAAkB,KAAK,aAAa,CACtC,KAAMsb,EACN,OAAQ,EACpB,CAAW,EAEH,KAAK,KAAKnO,GAAsB,CAC9B,GAAIsI,CACd,CAAS,CACT,CASM,OAAO,KAAK,iBAAiB6F,CAAI,CAClC,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwB5F,EAAWmc,EAAgB5xB,EAAK,CAC7D,GAAI,KAAK,iBAAiByV,CAAS,EAAG,CACpC,IAAIsF,EAAO,KAAK,iBAAiBtF,CAAS,EAAE,KAAKmc,CAAc,EAC/D,OAAO7W,GAAQ,KAAOA,EAAK/a,CAAG,EAAI,IACnC,CACF,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwByV,EAAWmc,EAAgB5xB,EAAK+a,EAAM,CAC/D,KAAK,iBAAiBtF,CAAS,IACjC,KAAK,iBAAiBA,CAAS,EAAE,KAAKmc,CAAc,EAAI,KAAK,iBAAiBnc,CAAS,EAAE,KAAKmc,CAAc,GAAK,CAAA,EACjH,KAAK,iBAAiBnc,CAAS,EAAE,KAAKmc,CAAc,EAAE5xB,CAAG,EAAI+a,EAEhE,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2B1G,EAAI,CACpC,OAAO,KAAK,iBAAiBA,CAAE,EAAI,KAAK,iBAAiBA,CAAE,EAAE,GAAK,IACnE,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkB+G,EAAIyW,EAAe,CAC1C,IAAIle,EAAS,KACb,KAAK,mBAAmByH,EAAI,EAAI,EAChC,IAAI3H,EAAO,SAAcyK,EAAK,CAC5B,IAAI7J,EAAKV,EAAO,MAAMuK,CAAG,EACzBvK,EAAO,gBAAgBuK,EAAK7S,EAAiB,EAC7C,OAAOsI,EAAO,iBAAiBU,CAAE,EACjCV,EAAO,SAAS,OAAOU,CAAE,EACzBV,EAAO,KAAK/F,GAAwB,CAClC,GAAIsQ,EACJ,GAAI7J,CACd,CAAS,EACG6J,GAAO2T,GACTle,EAAO,eAAeuK,CAAG,CAEnC,EACM,KAAK,uBAAuB9C,CAAE,EAAE,IAAI3H,CAAI,EACxCA,EAAK2H,CAAE,CACR,CACL,EAAK,CACD,IAAK,SACL,MAAO,SAAgB5F,EAASgQ,EAAUsM,EAAe,CACvD,IAAIrc,EAAY,KAAK,MAAMD,CAAO,EAClC,OAAI,KAAK,iBAAiBC,CAAS,IACjC,KAAK,iBAAiBA,CAAS,EAAE,SAAW+P,EAC5C,KAAK,SAAS,cAAc/P,EAAW+P,CAAQ,EAC3CsM,IAAkB,IACb,KAAK,WAAWtc,CAAO,EAG3B,CACL,EAAG,IAAI,IACP,EAAG,IAAI,GACf,CACK,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBC,EAAW,CACtC,IAAIuJ,EAAQ,KAAK,iBAAiBvJ,CAAS,EAC3C,OAAIuJ,GAAS,MACJA,EAAM,UAAY,CAI5B,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBvJ,EAAW,CACvC,IAAIkM,EAAS,KACToQ,EAAY,CAAA,EACZ/S,EAAQ,KAAK,iBAAiBvJ,CAAS,EACvCuc,EAAY,SAASA,EAAUtxB,EAAG,CACpC,GAAIA,EAAE,OAAS,KAAM,CACnB,IAAIuxB,EAAStQ,EAAO,iBAAiBjhB,EAAE,KAAK,EACxCuxB,GAAU,OACZF,EAAU,KAAK,CACb,EAAGE,EAAO,gBAAgB,EAC1B,EAAGA,EAAO,gBAAgB,CACxC,CAAa,EACDD,EAAUC,CAAM,EAEnB,CACT,EACM,OAAIjT,GAAS,OACX+S,EAAU,KAAK,CACb,EAAG/S,EAAM,gBAAgB,GAAK,EAC9B,EAAGA,EAAM,gBAAgB,CACnC,CAAS,EACDgT,EAAUhT,CAAK,GAEV+S,CACR,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBG,EAAOH,EAAW,CAChD,IAAIzrB,EAAK4rB,EAAM,QACX1Z,EAAU,CACZ,EAAGlS,EAAG,CAAC,EACP,EAAGA,EAAG,CAAC,EACP,GAAI,EACJ,GAAI,CACZ,EACM,OAAA8Z,EAAQ2R,EAAW,SAAUvM,EAAU,CACrChN,EAAUkO,GAAYlO,EAASgN,EAAS,EAAGA,EAAS,CAAC,CAC7D,CAAO,EACMhN,CACR,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2B0Z,EAAOH,EAAW,CAClD,OAAA3R,EAAQ2R,EAAW,SAAUvM,EAAU,CACrC0M,EAAQxL,GAAYwL,EAAO1M,EAAS,EAAGA,EAAS,CAAC,CACzD,CAAO,EACM0M,CACR,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+BxuB,EAAQ,CAC5C,IAAIoX,EAAKzJ,EAAO,CAAE,EAAE3N,CAAM,EACtB0qB,EAAiB,KAAK,OAAOtT,EAAG,OAAO,EAC3CA,EAAG,UAAY,KAAK,MAAMA,EAAG,OAAO,EACpCA,EAAG,GAAK,MAAQ,KAAK,SAAQ,EAC7B,IAAItX,EAAK,IAAIgZ,GAAS,KAAM1B,CAAE,EAC9B,OAAAqT,GAAmBC,EAAgB5qB,CAAE,EACjCE,EAAO,MACT,KAAK,gBAAgB,IAAIA,EAAO,KAAMF,CAAE,EAE1C2uB,GAAgB,KAAK,mBAAoB3uB,EAAG,UAAWA,CAAE,EACpD,KAAK,iBACR,KAAK,eAAeA,EAAI,CACtB,UAAW,KAAK,YAC1B,CAAS,EAEIA,CACR,CACL,EAAK,CACD,IAAK,+BACL,MAAO,SAAsCsO,EAAMsgB,EAAoB,CAMrE,QALIC,IAASD,EAAqB,GAAK,YAActgB,GAAM,MAAM,MAAM,EACnEwgB,EAAM,KACN9uB,EAAK,KACLoC,EAAI,KACJ2sB,EAAK,KACAzwB,EAAI,EAAGA,EAAIuwB,EAAK,OAAQvwB,IAAK,CACpC,IAAIyP,EAAK,KAAK,kBAAkB8gB,EAAKvwB,CAAC,CAAC,EACnCyP,IACEA,EAAG,YACL+gB,EAAM/gB,EAAG,WAEPA,EAAG,WACL/N,EAAK+N,EAAG,UAENA,EAAG,UACLghB,EAAKhhB,EAAG,SAENA,EAAG,SACL3L,EAAI2L,EAAG,QAGZ,CACD,MAAO,CACL,UAAW+gB,GAAY,CAAC9uB,EAAIA,CAAE,EAC9B,QAAS+uB,GAAU,CAAC3sB,EAAGA,CAAC,CAChC,CACK,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBwV,EAAI2M,EAAW,CACxC,IAAI1M,EAAO,KAAK,MAAMD,CAAE,EACxB,YAAK,aAAa,CAChB,KAAMC,EACN,OAAQ,GACR,UAAW0M,CACnB,CAAO,EACM,KAAK,QAAQ3M,CAAE,CACvB,CACL,EAAK,CACD,IAAK,oBACL,MAAO,UAA6B,CAClC,IAAI2M,EAAYhZ,EAAM,EAClBsM,EACJ,IAAKA,KAAQ,KAAK,iBAChB,KAAK,SAAS,eAAeA,EAAM,EAAI,EAEzC,KAAK,SAAS,kBACd,IAAKA,KAAQ,KAAK,iBAChB,KAAK,QAAQ,KAAK,iBAAiBA,CAAI,EAAE,GAAI0M,EAAW,EAAI,EAE9D,OAAO,IACR,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4B3M,EAAIvW,EAAGC,EAAG,CAC3C,IAAIuP,EAAK,KAAK,MAAM+G,CAAE,EACtB,YAAK,SAAS,YAAY/G,EAAIxP,EAAGC,CAAC,EAC3B,KAAK,QAAQsW,CAAE,CACvB,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBA,EAAI2M,EAAWyK,EAA2B,CAChE,IAAI1f,EAAI,CACN,EAAG,IAAI,IACP,EAAG,IAAI,GACf,EACU2f,EAAe,SAAsBC,EAAI,CAC3CA,EAAG,EAAE,QAAQ,SAAUzuB,EAAG,CACxB,OAAO6O,EAAE,EAAE,IAAI7O,CAAC,CAC1B,CAAS,EACDyuB,EAAG,EAAE,QAAQ,SAAUhyB,EAAG,CACxB,OAAOoS,EAAE,EAAE,IAAIpS,CAAC,CAC1B,CAAS,CACT,EACM,GAAI,CAAC,KAAK,gBAAiB,CACzB,IAAI2T,EAAK,KAAK,MAAM+G,CAAE,EACtB,GAAIA,GAAM,KAAM,CACd,IAAIuX,EAAa,KAAK,uBAAuBvX,CAAE,EAI/C,GAHI2M,GAAa,OACfA,EAAYhZ,EAAI,GAEd,CAACyjB,EACH,QAAS1wB,EAAI,EAAGA,EAAI6wB,EAAW,OAAQ7wB,IACrC,KAAK,aAAa,CAChB,KAAM,KAAK,MAAM6wB,EAAW7wB,CAAC,CAAC,EAC9B,OAAQ,GACR,UAAWimB,CAC3B,CAAe,EAIL,GADA0K,EAAa,KAAK,OAAO,OAAOpe,EAAI0T,EAAW,IAAI,CAAC,EAChD4K,EAAW,OAAS,EACtB,QAASrf,EAAI,EAAGA,EAAIqf,EAAW,OAAQrf,IACrCmf,EAAa,KAAK,OAAO,OAAO,KAAK,MAAME,EAAWrf,CAAC,CAAC,EAAGyU,EAAW,IAAI,CAAC,CAGhF,CACF,CACD,OAAOjV,CACR,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4BjP,EAAU,CAC3C,IAAIkL,EAAOlL,EAAS,UAChBkL,GACF,KAAK,gBAAgB,OAAUA,CAAI,EAErCsf,GAAsB,KAAK,iBAAiBxqB,EAAS,SAAS,EAAGA,CAAQ,EACzE,IAAIuY,EAAM,KAAK,mBAAmBvY,EAAS,SAAS,EAChDuY,GAAO,OACLA,EAAI,OAAS,EACf,KAAK,mBAAmBvY,EAAS,SAAS,EAAIuY,EAAI,OAAO,SAAU1b,EAAG,CACpE,OAAOA,IAAMmD,CACzB,CAAW,EAED,OAAO,KAAK,mBAAmBA,EAAS,SAAS,GAGrD,KAAK,KAAKmJ,GAAsCnJ,CAAQ,CACzD,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6BA,EAAU,CAC5C,OAAIA,EAAS,eAAiBA,EAAS,YAAY,SAAW,GAC5D,KAAK,eAAeA,CAAQ,EACrB,IAEA,EAEV,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBvC,EAAQ,CACrC,IAAI2gB,EAAS,KACTpe,EAAW,OAAOvC,GAAW,SAAW,KAAK,gBAAgB,IAAIA,CAAM,EAAIA,EAC/E,GAAIuC,EAAU,CACZ,IAAI+uB,EAAQ/uB,EAAS,UACjBgvB,EAAsBhvB,EAAS,YAAY,MAAK,EACpDuc,EAAQyS,EAAqB,SAAUptB,EAAY,CACjD5B,EAAS,qBAAqB4B,EAAY,KAAM,EAAI,CAC9D,CAAS,EACD,KAAK,mBAAmB5B,CAAQ,EAChCA,EAAS,QAAO,EAChBuc,EAAQyS,EAAqB,SAAUptB,EAAY,CACjDwc,EAAO,iBAAiBxc,EAAY,CAClC,MAAO,GACP,iBAAkB5B,CAC9B,CAAW,CACX,CAAS,EACG+uB,GAAS,MACX,KAAK,eAAeA,CAAK,CAE5B,CACD,OAAO,IACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBxX,EAAI1X,EAAQovB,EAAiB,CACvDA,EAAkBA,GAAmB,GACrC,IAAItyB,EAAI6Q,EAAO,CAAE,EAAEyhB,CAAe,EAClCzhB,EAAO7Q,EAAGkD,GAAU,CAAA,CAAE,EACtB,IAAIoX,EAAKzJ,EAAO,CACd,QAAS+J,CACV,EAAE5a,CAAC,EACJ,OAAO,KAAK,sBAAsBsa,CAAE,CACrC,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBM,EAAI2X,EAAWD,EAAiB,CAE3D,QADIxD,EAAU,CAAA,EACLxtB,EAAI,EAAGwR,EAAIyf,EAAU,OAAQjxB,EAAIwR,EAAGxR,IAC3CwtB,EAAQ,KAAK,KAAK,YAAYlU,EAAI2X,EAAUjxB,CAAC,EAAGgxB,CAAe,CAAC,EAElE,OAAOxD,CACR,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,IAAIpN,EAAS,KACb,KAAK,SAAS,UAAY,CACxBA,EAAO,mBAAqB,GAC5BA,EAAO,iBAAmB,GAC1BA,EAAO,gBAAgB,QACvBA,EAAO,SAAS,QAChBA,EAAO,OAAO,QACdA,EAAO,aAAa,QACpBA,EAAO,YAAY,OAAS,CACpC,CAAO,CACF,CACL,EAAK,CACD,IAAK,UACL,MAAO,UAAmB,CACxB,KAAK,MAAK,EACV,KAAK,OAAM,EACX,KAAK,gBAAgB,OAAS,EAC9B,KAAK,gBAAgB,OAAS,EAC9B,KAAK,iBAAiB,QACtB,KAAK,eAAe,OACrB,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsB9G,EAAI,CAC/B,OAAO,KAAK,mBAAmB,KAAK,MAAMA,CAAE,CAAC,GAAK,EACnD,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBrM,EAAM,CAChC,OAAO,KAAK,gBAAgB,IAAIA,CAAI,CACrC,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBlL,EAAUkL,EAAM,CAC1ClL,EAAS,MACX,KAAK,gBAAgB,OAAUA,EAAS,IAAI,EAE9CA,EAAS,KAAOkL,EAChB,KAAK,gBAAgB,IAAIA,EAAMlL,CAAQ,CACxC,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBH,EAAQovB,EAAiB,CAC/C,GAAI,CACF,IAAIhY,EAAK,KAAK,yBAAyBpX,EAAQovB,CAAe,EAC1DzB,EAAM,KAAK,eAAevW,CAAE,EAChC,YAAK,oBAAoBuW,EAAKvW,CAAE,EACzBuW,CACR,OAAQ2B,EAAP,CACA9uB,EAAI8uB,CAAY,EAChB,MACD,CACF,CACL,EAAK,CACD,IAAK,2BACL,MAAO,SAAkCtvB,EAAQovB,EAAiB,CAChE,IAAIG,EAAO5hB,EAAO,CAAE,EAAE3N,CAAM,EACxBovB,GACFzhB,EAAO4hB,EAAMH,CAAe,EAE9B,IAAIhY,EAAKmY,EAeT,GAdInY,EAAG,QACDA,EAAG,OAAO,WACZA,EAAG,eAAiBA,EAAG,QAGvBA,EAAG,QACDA,EAAG,OAAO,WACZA,EAAG,eAAiBA,EAAG,QAGvBpX,EAAO,QACToX,EAAG,eAAiB,KAAK,YAAYpX,EAAO,MAAM,CAAC,CAAC,EACpDoX,EAAG,eAAiB,KAAK,YAAYpX,EAAO,MAAM,CAAC,CAAC,GAElDoX,EAAG,gBAAkB,KAAM,CAC7B,GAAIA,EAAG,eAAe,SACpB,MAAM1M,GAKR,GAHK0M,EAAG,OACNA,EAAG,KAAOA,EAAG,eAAe,UAE1BA,EAAG,eAAe,kBAAmB,CACvCA,EAAG,SAAWA,EAAG,UAAY,CAAA,EAC7B,QAAShZ,EAAI,EAAGwR,EAAIwH,EAAG,eAAe,kBAAkB,OAAQhZ,EAAIwR,EAAGxR,IACrEgZ,EAAG,SAAS,KAAKA,EAAG,eAAe,kBAAkBhZ,CAAC,CAAC,CAE1D,CACGgZ,EAAG,eAAe,QACpBA,EAAG,MAAQA,EAAG,eAAe,MAEvC,SACYA,EAAG,QAAU,KACf,MAAMxM,GAGV,GAAIwM,EAAG,gBAAkB,MACvB,GAAIA,EAAG,eAAe,SACpB,MAAMzM,WAGJyM,EAAG,QAAU,KACf,MAAMvM,GAGV,GAAIuM,EAAG,gBAAkBA,EAAG,gBACtB,CAAC2S,GAAY3S,EAAG,eAAgBA,EAAG,cAAc,EACnD,KAAM,mDAGV,OAAOA,CACR,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBpX,EAAQ,CACrCA,EAAO,GAAK,OAAS,KAAK,SAAQ,EAClC,IAAIO,EAAI,IAAIqW,GAAW,KAAM5W,CAAM,EACnC,OAAA4qB,GAAqBrqB,EAAG,KAAK,iBAAiBA,EAAE,QAAQ,EAAG,KAAK,iBAAiBA,EAAE,QAAQ,CAAC,EAC5F,KAAK,iBAAiBA,CAAC,EAChBA,CACR,CACL,EAAK,CACD,IAAK,sBACL,MAAO,SAA6BotB,EAAK3tB,EAAQ6L,EAAe,CAC9D7L,EAASA,GAAU,GACd2tB,EAAI,mBACP,KAAK,YAAY,KAAKA,CAAG,EAE3BA,EAAI,QAAU,KACdA,EAAI,UAAU,CAAC,EAAE,kBAAoB,GACrC,KAAK,QAAQA,EAAI,MAAM,EACvB,IAAIle,EAAU,CACZ,WAAYke,EACZ,OAAQA,EAAI,OACZ,OAAQA,EAAI,OACZ,SAAUA,EAAI,SACd,SAAUA,EAAI,SACd,eAAgBA,EAAI,UAAU,CAAC,EAC/B,eAAgBA,EAAI,UAAU,CAAC,CACvC,EACM,KAAK,KAAK1kB,GAA2BwG,EAAS5D,CAAa,EACvD,CAAC7L,EAAO,0BAA4BA,EAAO,YAAc,IAC3D,KAAK,KAAKgJ,GAAkByG,EAAS5D,CAAa,CAErD,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4B6L,EAAI8X,EAAS,CAC9C,IAAI3Q,EAAS,KACT9O,EAAO,SAAcyK,EAAK,CAC5B,IAAI7J,EAAKkO,EAAO,MAAMrE,CAAG,EACrB9B,EAAMmG,EAAO,mBAAmBlO,CAAE,EAClCvS,EACAsuB,EACJ,GAAIhU,EACF,IAAKta,EAAI,EAAGsuB,EAAKhU,EAAI,OAAQta,EAAIsuB,EAAItuB,IACnCygB,EAAO,eAAenG,EAAIta,CAAC,CAAC,EAGhC,OAAOygB,EAAO,mBAAmBlO,CAAE,CAC3C,EACM,OAAI6e,GACF,KAAK,uBAAuB9X,CAAE,EAAE,IAAI3H,CAAI,EAE1CA,EAAK2H,CAAE,EACA,IACR,CACL,EAAK,CACD,IAAK,0BACL,MAAO,SAAiC1X,EAAQovB,EAAiB,CAC/D,IAAItyB,EAAI6Q,EAAO,CAAE,EAAEyhB,CAAe,EAClCzhB,EAAO7Q,EAAGkD,CAAM,EAChBlD,EAAE,SAAWA,EAAE,UAAY0a,GAC3B,IAAIiY,EAAM,KAAK,6BAA6B3yB,EAAE,QAAQ,EACtDA,EAAE,SAAWA,EAAE,UAAY2yB,EAAI,UAAU,CAAC,EAC1C3yB,EAAE,OAASA,EAAE,QAAU2yB,EAAI,QAAQ,CAAC,EACpC,IAAIC,EAAiB5yB,EAAE,gBAAkB,GACrC6yB,EAAO,CACT,IAAKhiB,EAAO,CAAE,EAAE7Q,CAAC,EACjB,eAAgBA,EAAE,eAClB,eAAgB4yB,EAChB,QAAS,GACT,SAAU,IAClB,EACM,OAAOC,CACR,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BrG,EAAUtpB,EAAQ,CAClD,IAAIwpB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GAC9EmG,EAAO,KAAK,wBAAwB3vB,CAAM,EAC1C4vB,EAAM,IAAIvG,GAAuBC,EAAUqG,EAAMnG,CAAO,EAC5D,YAAK,gBAAgB,KAAKoG,CAAG,EACtBA,CACR,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BtG,EAAU,CAC7CrO,EAAmB,KAAK,gBAAiB,SAAU/X,EAAG,CACpD,OAAOA,IAAMomB,CACrB,CAAO,CACF,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BA,EAAU,CAC7CrO,EAAmB,KAAK,gBAAiB,SAAU/X,EAAG,CACpD,OAAOA,IAAMomB,CACrB,CAAO,CACF,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BA,EAAUtpB,EAAQ,CAClD,IAAIwpB,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,GAC9EmG,EAAO,KAAK,wBAAwB3vB,CAAM,EAC1C4vB,EAAM,IAAIvG,GAAuBC,EAAUqG,EAAMnG,CAAO,EAC5D,YAAK,gBAAgB,KAAKoG,CAAG,EACtBA,CACR,CACL,EAAK,CACD,IAAK,0BACL,MAAO,SAAiC5vB,EAAQovB,EAAiB,CAC/D,IAAItyB,EAAI6Q,EAAO,CAAE,EAAEyhB,CAAe,EAClCzhB,EAAO7Q,EAAGkD,CAAM,EAChBlD,EAAE,SAAWA,EAAE,UAAY0a,GAC3B,IAAIkY,EAAiB5yB,EAAE,gBAAkB,GACrC6yB,EAAO,CACT,IAAKhiB,EAAO,CAAE,EAAE7Q,CAAC,EACjB,eAAgBA,EAAE,eAClB,eAAgB4yB,EAChB,QAAS,GACT,SAAU,IAClB,EACM,OAAOC,CACR,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAcjY,EAAImY,EAAiB,CACxC,OAAO,KAAK,YAAYnY,EAAIrQ,GAAOwoB,CAAe,CACnD,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAcnY,EAAImY,EAAiB,CACxC,OAAO,KAAK,YAAYnY,EAAIpQ,GAAMuoB,CAAe,CAClD,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBnY,EAAIoY,EAAOC,EAAqB,CAC1D,IAAIC,EAAUF,IAAUzoB,GACpB4oB,EAAe,KACfF,IACFE,EAAe,SAAsBnwB,EAAI,CACvCA,EAAG,WAAWkwB,EAAS,GAAM,EAAI,CAC3C,GAEM,IAAIrf,EAAK,KAAK,MAAM+G,CAAE,EACtB,YAAK,WAAWA,EAAI,SAAUiW,EAAK,CACjC,GAAIqC,GAAWD,EAAqB,CAClC,IAAI5Q,EAAOwO,EAAI,WAAahd,EAAK,EAAI,EACjCgd,EAAI,UAAUxO,CAAI,EAAE,UAAS,GAC/BwO,EAAI,WAAW,EAAI,CAE/B,MACUA,EAAI,WAAWqC,CAAO,CAEzB,EAAEC,CAAY,EACR,IACR,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBvY,EAAImY,EAAiB,CACjD,IAAII,EAAe,KACfJ,IACFI,EAAe,SAAsBnwB,EAAI,CACvC,IAAIgwB,EAAQhwB,EAAG,YACfA,EAAG,WAAW,CAACgwB,CAAK,CAC9B,GAEM,KAAK,WAAWpY,EAAI,SAAUiW,EAAK,CACjC,IAAImC,EAAQnC,EAAI,YAChBA,EAAI,WAAW,CAACmC,CAAK,CACtB,EAAEG,CAAY,CAChB,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBvY,EAAIwY,EAAMD,EAAc,CACjD,IAAItY,EAAO,KAAK,MAAMD,CAAE,EACpB2X,EAAY,KAAK,mBAAmB1X,CAAI,EAC5C,GAAI0X,GAAaA,EAAU,OACzB,QAASjxB,EAAI,EAAGsuB,EAAK2C,EAAU,OAAQjxB,EAAIsuB,EAAItuB,IAAK,CAClD,QAASwR,EAAI,EAAGmc,EAAKsD,EAAUjxB,CAAC,EAAE,YAAY,OAAQwR,EAAImc,EAAInc,IAAK,CACjE,IAAIugB,EAASD,EAAKb,EAAUjxB,CAAC,EAAE,YAAYwR,CAAC,CAAC,EAC7C,GAAIugB,EACF,MAEH,CACGF,GACFA,EAAaZ,EAAUjxB,CAAC,CAAC,CAE5B,CAEJ,CACL,EAAK,CACD,IAAK,yBACL,MAAO,SAAgCuS,EAAIvC,EAAM,CAE/C,GADA,KAAK,iBAAiB,IAAIuC,EAAIhD,EAAO,CAAE,EAAES,CAAI,CAAC,EAC1CA,EAAK,SAAU,CAEjB,QADI5K,EAAK,CAAA,EACApF,EAAI,EAAGA,EAAIgQ,EAAK,SAAS,OAAQhQ,IAAK,CAC7C,IAAI+Q,EAAKjE,GAAyBkD,EAAK,SAAShQ,CAAC,CAAC,EAClDoF,EAAG2L,EAAG,QAAQ,EAAE,EAAIA,CACrB,CACD,KAAK,iBAAiB,IAAIwB,CAAE,EAAE,SAAWnN,CAC1C,CACF,CACL,EAAK,CACD,IAAK,0BACL,MAAO,SAAiCykB,EAAO,CAC7C,QAAS7pB,KAAK6pB,EACZ,KAAK,uBAAuB7pB,EAAG6pB,EAAM7pB,CAAC,CAAC,CAE1C,CACL,EAAK,CACD,IAAK,uBACL,MAAO,SAA8BuS,EAAIvC,EAAM,CAE7C,GADA,KAAK,eAAe,IAAIuC,EAAIhD,EAAO,CAAE,EAAES,CAAI,CAAC,EACxCA,EAAK,SAAU,CAEjB,QADI5K,EAAK,CAAA,EACApF,EAAI,EAAGA,EAAIgQ,EAAK,SAAS,OAAQhQ,IAAK,CAC7C,IAAI+Q,EAAKjE,GAAyBkD,EAAK,SAAShQ,CAAC,CAAC,EAClDoF,EAAG2L,EAAG,QAAQ,EAAE,EAAIA,CACrB,CACD,KAAK,eAAe,IAAIwB,CAAE,EAAE,SAAWnN,CACxC,CACF,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+BykB,EAAO,CAC3C,QAAS7pB,KAAK6pB,EACZ,KAAK,qBAAqB7pB,EAAG6pB,EAAM7pB,CAAC,CAAC,CAExC,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiBuS,EAAIyf,EAAgB,CAC1C,OAAOA,IAAmB,aAAe,KAAK,kBAAkBzf,CAAE,EAAI,KAAK,gBAAgBA,CAAE,CAC9F,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BA,EAAI,CACpC,OAAO,KAAK,iBAAiB,IAAIA,CAAE,CACpC,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBA,EAAI,CAClC,OAAO,KAAK,eAAe,IAAIA,CAAE,CAClC,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBtE,EAAG,CAChC,QAASjO,KAAKiO,EACZ,KAAK,SAASjO,CAAC,EAAIiO,EAAEjO,CAAC,EAExB,OAAI,KAAK,SAAS4M,EAAuB,GAAK,OAC5C,KAAK,SAASA,EAAuB,EAAE,YAAc,KAAK,SAASA,EAAuB,EAAE,aAAe,GAEzGqB,EAAE,WACJ,KAAK,aAAaA,EAAE,SAAS,EAExB,IACR,CACL,EAAK,CACD,IAAK,kBACL,MAAO,UAA2B,CAChC,YAAK,SAAWsB,EAAO,CAAE,EAAE,KAAK,gBAAgB,EACzC,IACR,CACL,EAAK,CACD,IAAK,qBACL,MAAO,UAA8B,CACnC,OAAO,KAAK,gBACb,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB5L,EAAY4B,EAAO0sB,EAASC,EAAmBC,EAAiB,CAC9F,IAAIC,EAAiBzuB,EAAW,QAAQ4B,CAAK,GAAK,KAC9C8sB,EACAC,EAAoBF,EAAiBzuB,EAAW,QAAQ4B,CAAK,EAAE,WAAW,UAAY5B,EAAW,UAAU4B,CAAK,EAAE,UAClHgtB,EAAmBH,EAAiBzuB,EAAW,QAAQ4B,CAAK,EAAE,WAAa5B,EAAW,UAAU4B,CAAK,EACrGitB,EAAY,KAAK,MAAMP,CAAO,EAC9BtuB,EAAW,QAAQ4B,CAAK,EACtB5B,EAAW,QAAQ4B,CAAK,EAAE,GAAG,YAAcitB,EAC7CH,EAAU1uB,EAAW,QAAQ4B,CAAK,EAAE,IAEpC5B,EAAW,QAAQ4B,CAAK,EAAE,GAAG,qBAAqB5B,EAAY4B,CAAK,EACnE8sB,EAAU,KAAK,sBAAsB,CACnC,QAASJ,EACT,SAAUC,EAAkBvuB,EAAY4B,CAAK,EAC7C,OAAQ4sB,EAAgBxuB,EAAY4B,CAAK,EACzC,WAAY,CACV,gBAAiB,EAClB,CACb,CAAW,GAGH8sB,EAAU,KAAK,sBAAsB,CACnC,QAASJ,EACT,SAAUC,EAAkBvuB,EAAY4B,CAAK,EAC7C,OAAQ4sB,EAAgBxuB,EAAY4B,CAAK,EACzC,WAAY,CACV,gBAAiB,EAClB,CACX,CAAS,EAEH8sB,EAAQ,cAAgB,GACxB1uB,EAAW,QAAQ4B,CAAK,EAAI,CAC1B,GAAI8sB,EACJ,WAAYE,CACpB,EACM,KAAK,sBAAsBD,EAAmBE,EAAW7uB,EAAYsuB,EAAS1sB,CAAK,EACnFgtB,EAAiB,qBAAqB5uB,EAAY,KAAM,EAAI,EAC5D0uB,EAAQ,YAAc,CAAC1uB,CAAU,EACjCA,EAAW,UAAU4B,CAAK,EAAI8sB,EAC9BE,EAAiB,UAAYF,EAC7BE,EAAiB,WAAW,EAAK,EACjC5uB,EAAW,WAAW,EAAI,EAC1B,KAAK,WAAWsuB,CAAO,CACxB,CACL,EAAK,CACD,IAAK,oBACL,MAAO,SAA2BtuB,EAAY4B,EAAO,CACnD,GAAI,EAAA5B,EAAW,SAAW,MAAQA,EAAW,QAAQ4B,CAAK,GAAK,MAG/D,KAAIkY,EAAkB9Z,EAAW,QAAQ4B,CAAK,EAAE,WAAW,QACvD+sB,EAAoB3uB,EAAW,QAAQ4B,CAAK,EAAE,WAAW,UACzDitB,EAAY7uB,EAAW,QAAQ4B,CAAK,EAAE,GAAG,UAC7C5B,EAAW,UAAU4B,CAAK,EAAI5B,EAAW,QAAQ4B,CAAK,EAAE,WACxD,OAAO5B,EAAW,QAAQ4B,CAAK,EAAE,WAAW,UAC5C,KAAK,sBAAsBitB,EAAWF,EAAmB3uB,EAAY8Z,EAAiBlY,CAAK,EAC3F5B,EAAW,QAAQ4B,CAAK,EAAE,GAAG,qBAAqB5B,EAAY,IAAI,EAClEA,EAAW,QAAQ4B,CAAK,EAAE,WAAW,cAAc5B,CAAU,EACzDA,EAAW,aACbA,EAAW,QAAQ4B,CAAK,EAAE,WAAW,WAAW,EAAI,EAEtD5B,EAAW,QAAQ4B,CAAK,EAAI,KACxB8d,GAAiB1f,EAAW,QAAS,SAAUjF,EAAG,CACpD,OAAOA,GAAK,IACpB,CAAO,IAAM,KACLiF,EAAW,QAAQ,OAAS,GAE/B,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+B8uB,EAAYC,EAAO/uB,EAAYia,EAAYrY,EAAO,CAClFktB,IAAeC,IACbntB,IAAU,GACZ5B,EAAW,SAAW+uB,EACtB/uB,EAAW,OAASia,GACXrY,IAAU,IACnB5B,EAAW,SAAW+uB,EACtB/uB,EAAW,OAASia,GAEtB+O,GAAwBhpB,EAAY,KAAK,iBAAiB8uB,CAAU,CAAC,EACrEjG,GAAqB7oB,EAAY,KAAK,iBAAiB+uB,CAAK,CAAC,EAEhE,CACL,EAAK,CACD,IAAK,WACL,MACA,SAAkB1U,EAAS,CACzB,OAAO,KAAK,aAAa,SAASA,CAAO,CAC1C,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqB1E,EAAI,CAC9B,OAAO,KAAK,aAAa,YAAYA,CAAE,CACxC,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkB1X,EAAQ,CAC/B,OAAO,KAAK,aAAa,SAASA,CAAM,CACzC,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBob,EAAO,CAEhC,QADI2V,EACK9qB,EAAO,UAAU,OAAQyR,EAAK,IAAI,MAAMzR,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAChGuR,EAAGvR,EAAO,CAAC,EAAI,UAAUA,CAAI,EAE/B,OAAQ4qB,EAAqB,KAAK,cAAc,WAAW,MAAMA,EAAoB,CAAC3V,EAAO,EAAK,EAAE,OAAO1D,CAAE,CAAC,CAC/G,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuB0D,EAAO,CACnC,KAAK,aAAa,cAAcA,CAAK,CACtC,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAO,CACjC,KAAK,aAAa,YAAYA,CAAK,CACpC,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAO,CACjC,KAAK,aAAa,YAAYA,CAAK,CACpC,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBA,EAAOkB,EAAe0U,EAAiBC,EAAiB,CAClF,OAAO,KAAK,aAAa,YAAY7V,EAAOkB,EAAe0U,EAAiBC,CAAe,CAC5F,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB3U,EAAe0U,EAAiB,CAC9D,KAAK,aAAa,gBAAgB1U,EAAe0U,EAAiB,EAAK,CACxE,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB5V,EAAO1D,EAAIuZ,EAAiB,CAC1D,KAAK,aAAa,gBAAgB7V,EAAO6V,EAAiBvZ,CAAE,EAC5D,KAAK,eAAeA,EAAI,KAAK,aAAc,CAAA,EAC3C,KAAK,aAAa,CAChB,OAAQ,GACR,KAAM,KAAK,MAAMA,CAAE,CAC3B,CAAO,CACF,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwBvX,EAAUH,EAAQ,CAC/C,SAASkxB,EAAoCpxB,EAAI,CAC/C,IAAIiD,EAAM,EACV,GAAI/C,EAAO,uBAAyB,MAClC,QAAS5B,EAAI,EAAGA,EAAI0B,EAAG,YAAY,OAAQ1B,IACzC,GAAI0B,EAAG,YAAY1B,CAAC,EAAE,WAAa4B,EAAO,uBAAyBF,EAAG,YAAY1B,CAAC,EAAE,WAAa4B,EAAO,sBAAuB,CAC9H+C,EAAM3E,EACN,KACD,EAGL,OAAO0B,EAAG,YAAYiD,CAAG,CAC1B,CACD/C,EAASA,GAAU,GACnB,IAAIqkB,EAAYrkB,EAAO,UACnB8tB,EAAW9tB,EAAO,SAAW,GACjC,GAAI,CAACqkB,GAAalkB,EAAS,YAAckkB,EAAW,CAClD,IAAI8M,EAAO,KAAK,SAAS,YAAYhxB,EAAS,SAAS,EACnDkQ,EAAKrQ,EAAO,OAAS,CACvB,EAAGA,EAAO,OAAO,EACjB,EAAGA,EAAO,OAAO,CAC3B,EAAY,CACF,EAAGmxB,EAAK,EACR,EAAGA,EAAK,CAClB,EACQ,GAAI9gB,GAAM,KAAM,CACd,IAAI+gB,EAAKpxB,EAAO,UAChB,GAAIoxB,GAAM,KAAM,CACd,IAAIhY,EAAe,CACjB,GAAI/I,EACJ,GAAI8gB,EACJ,QAAShxB,EACT,UAAWkkB,CACzB,EACY,GAAIyJ,GAAU,KAAK,OAAO,gBAAgB3tB,CAAQ,GAAKA,EAAS,YAAY,OAAS,EAAG,CACtF,IAAIkxB,EAAMH,EAAoC/wB,CAAQ,EAClDuZ,EAAO2X,EAAI,UAAU,CAAC,IAAMlxB,EAAW,EAAI,EAC3CmxB,EAAM5X,IAAS,EAAI2X,EAAI,SAAWA,EAAI,SACtCE,EAAQ,KAAK,SAAS,YAAYD,CAAG,EACzClY,EAAa,MAAQM,IAAS,EAAI,EAAI,EACtCN,EAAa,WAAaiY,EAC1BjY,EAAa,IAAMmY,EACnBnY,EAAa,IAAMmY,EACnBnY,EAAa,SAAWiY,EAAI,UAAU3X,CAAI,EAC1CN,EAAa,UAAY,KAAK,cAAckY,CAAG,CAChD,MAAUnxB,EAAS,YAAY,OAAS,IACvCiZ,EAAa,WAAajZ,EAAS,YAAY,CAAC,GAElDiZ,EAAa,SAAW,KAAK,cAAcjZ,EAAS,SAAS,EAC7DixB,EAAK,KAAK,OAAO,sBAAsBjxB,EAAS,QAASiZ,CAAY,CACtE,CACDjZ,EAAS,SAAS,QAAQixB,EAAI,KAAK,OAAO,uBAAuBjxB,CAAQ,EAAGA,EAAS,eAAe,EACpG,KAAK,eAAeA,EAAUA,EAAS,eAAe,EACtDA,EAAS,UAAYkkB,EACrB,QAASjmB,KAAK+B,EAAS,SACrB,GAAIA,EAAS,SAAS,eAAe/B,CAAC,EAAG,CACvC,IAAImmB,EAAKpkB,EAAS,SAAS/B,CAAC,EACxBmmB,EAAG,cACLpkB,EAAS,kBAAkB/B,CAAC,EAAI,KAAK,YAAYmmB,EAAIpkB,EAAS,SAAUA,EAAS,gBAAiBA,EAAS,2BAA2BokB,CAAE,CAAC,EACzI,KAAK,cAAcA,EAAIpkB,EAAS,kBAAkB/B,CAAC,EAAG,CACpD,KAAM,EACN,KAAM,CACxB,CAAiB,EAEJ,CAEJ,CACF,CACF,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0B2D,EAAY/B,EAAQ,CACnD,GAAI,CAAC,KAAK,iBAAmB+B,EAAW,UAAY,GAAO,CACzD/B,EAASA,GAAU,GACnB,IAAIqkB,EAAYrkB,EAAO,UACvB,GAAIqkB,GAAa,MAAQA,IAActiB,EAAW,cAChD,OAEF,GAAIsiB,GAAa,MAAQA,IAActiB,EAAW,cAAe,CAC/D,KAAK,OAAO,YAAYA,EAAYsiB,CAAS,EAC7C,IAAImN,EAAiB,CACnB,KAAM,IACN,KAAM,IACN,KAAM,KACN,KAAM,IAClB,EACU,QAASpzB,KAAK2D,EAAW,SACvB,GAAIA,EAAW,SAAS,eAAe3D,CAAC,EAAG,CACzC,IAAIqzB,EAAM1vB,EAAW,SAAS3D,CAAC,EAC3BqzB,EAAI,cACN1vB,EAAW,kBAAkB3D,CAAC,EAAI,KAAK,YAAYqzB,EAAK1vB,EAAW,UAAWA,EAAW,gBAAiBA,EAAW,2BAA2B0vB,CAAG,CAAC,EACpJD,EAAe,KAAO,KAAK,IAAIA,EAAe,KAAMzvB,EAAW,kBAAkB3D,CAAC,EAAE,IAAI,EACxFozB,EAAe,KAAO,KAAK,IAAIA,EAAe,KAAMzvB,EAAW,kBAAkB3D,CAAC,EAAE,IAAI,EACxFozB,EAAe,KAAO,KAAK,IAAIA,EAAe,KAAMzvB,EAAW,kBAAkB3D,CAAC,EAAE,IAAI,EACxFozB,EAAe,KAAO,KAAK,IAAIA,EAAe,KAAMzvB,EAAW,kBAAkB3D,CAAC,EAAE,IAAI,EAE3F,CAEH,IAAIszB,EAAY,WAAW,GAAK3vB,EAAW,gBAAgB,aAAe,GAAG,EAAI,EAC7E4vB,EAAe,WAAW,GAAK5vB,EAAW,gBAAgB,aAAe,GAAG,EAC5E6vB,EAAW,CACb,KAAM,KAAK,IAAI7vB,EAAW,UAAU,OAAO,MAAQ2vB,EAAYC,GAAeH,EAAe,IAAI,EACjG,KAAM,KAAK,IAAIzvB,EAAW,UAAU,OAAO,MAAQ2vB,EAAYC,GAAeH,EAAe,IAAI,EACjG,KAAM,KAAK,IAAIzvB,EAAW,UAAU,OAAO,MAAQ2vB,EAAYC,GAAeH,EAAe,IAAI,EACjG,KAAM,KAAK,IAAIzvB,EAAW,UAAU,OAAO,MAAQ2vB,EAAYC,GAAeH,EAAe,IAAI,CAC7G,EACU,KAAK,eAAezvB,EAAW,UAAWA,EAAW,gBAAiB6vB,CAAQ,EAC9E,QAAShiB,KAAK7N,EAAW,SACvB,GAAIA,EAAW,SAAS,eAAe6N,CAAC,EAAG,CACzC,IAAIiiB,EAAM9vB,EAAW,SAAS6N,CAAC,EAC3BiiB,EAAI,aACN,KAAK,cAAcA,EAAK9vB,EAAW,kBAAkB6N,CAAC,EAAGgiB,CAAQ,CAEpE,CAEJ,CACD7vB,EAAW,cAAgBsiB,CAC5B,CACF,CACL,EAAK,CACD,IAAK,mBACL,MAAO,SAA0BlkB,EAAU,CACpCA,EAAS,QAAQ,aAChBA,EAAS,YAAY,OAAS,EAChC,KAAK,iBAAiBA,EAAU,KAAK,sBAAsB,EAE3D,KAAK,oBAAoBA,EAAU,KAAK,sBAAsB,EAE5DA,EAAS,SACX,KAAK,iBAAiBA,EAAU,KAAK,iBAAiB,EAEtD,KAAK,oBAAoBA,EAAU,KAAK,iBAAiB,EAG9D,CACL,EAAK,CACD,IAAK,iBACL,MAAO,SAAwB4B,EAAYhC,EAAMmG,EAAM,CACrD,OAAOI,GAAW,IAAIvE,EAAYhC,EAAMmG,CAAI,CAC7C,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBsF,EAAWS,EAAS6lB,EAAiB,CAE9D,GADAtmB,EAAU,WAAWS,CAAO,EACxB,CAAC6lB,EAAiB,CACpB,IAAIC,EAAiBvmB,aAAqBsN,GAAWtN,EAAU,QAAUA,EAAU,OACnF,KAAK,WAAWumB,CAAc,CAC/B,CACF,CACL,EAAK,CACD,IAAK,gBACL,MAAO,SAAuBvmB,EAAWqF,EAAW,CAClDrF,EAAU,cAAcqF,CAAS,EACjC,IAAIkhB,EAAiBvmB,aAAqBsN,GAAWtN,EAAU,QAAUA,EAAU,OACnF,KAAK,WAAWumB,CAAc,CAC/B,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBxrB,EAAMyrB,EAAO,CAC3CzrB,EAAK,gBAAgB,cAAgByrB,EACrC,KAAK,iBAAiBzrB,CAAI,CAC3B,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyBA,EAAM3E,EAAO,CAC3C2E,EAAK,gBAAgB,aAAe3E,EACpC,KAAK,iBAAiB2E,CAAI,CAC3B,CACL,EAAK,CACD,IAAK,WACL,MAAO,SAAkBA,EAAMyrB,EAAO,CACpCzrB,EAAK,gBAAgB,OAASyrB,EAC9B,KAAK,iBAAiBzrB,CAAI,CAC3B,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBA,EAAM3E,EAAO,CACxC2E,EAAK,gBAAgB,YAAc3E,EACnC,KAAK,iBAAiB2E,CAAI,CAC3B,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsBA,EAAM6J,EAAO,CACpCA,EAAM,WAAa,OACrB7J,EAAK,gBAAgB,YAAc6J,EAAM,WAEvCA,EAAM,cAAgB,OACxB7J,EAAK,gBAAgB,aAAe6J,EAAM,cAExCA,EAAM,OAAS,OACjB7J,EAAK,gBAAgB,OAAS6J,EAAM,OAElCA,EAAM,cAAgB,OACxB7J,EAAK,gBAAgB,cAAgB6J,EAAM,cAE7C,KAAK,iBAAiB7J,CAAI,CAC3B,CACL,EAAK,CACD,IAAK,cACL,MACA,SAAqB4R,EAAW,CAE9B,QADIrb,EAAI,GACCsB,EAAI,EAAGA,EAAI+Z,EAAU,SAAS,OAAQ/Z,IAC7CtB,GAAKqb,EAAU,SAAS/Z,CAAC,EAAE,QAAQA,IAAM,CAAC,EAC1CtB,GAAK,IAEP,OAAOA,CACR,CACF,CAAA,CAAC,EACKouB,CACT,EAAEpf,EAAc,EAEZmmB,GAAmB,MACvB,SAASC,GAAY3yB,EAAG,CACtB,IAAI4U,EAAI,KAAK,MAAM5U,CAAC,EAChB6P,EAAI,KAAK,KAAK7P,CAAC,EACnB,OAAIA,EAAI4U,EAAI8d,GACH9d,EACE/E,EAAI7P,EAAI0yB,GACV7iB,EAEF7P,CACT,CACG,IAAC4yB,GAAa,SAAU3tB,EAAkB,CAC3ChI,EAAU21B,EAAY3tB,CAAgB,EACtC,IAAIxD,EAAS3D,EAAa80B,CAAU,EACpC,SAASA,EAAWnyB,EAAQ,CAC1B,IAAIiB,EACJvF,EAAgB,KAAMy2B,CAAU,EAChClxB,EAAQD,EAAO,KAAK,KAAMhB,CAAM,EAChC5D,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQkxB,EAAW,WAAW,EAC7E/1B,EAAgBa,EAAuBgE,CAAK,EAAG,KAAM,MAAM,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,KAAM,MAAM,EAC3D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,gBAAiB,MAAM,EACtE7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ,MAAM,EAC7DA,EAAM,GAAKjB,EAAO,GAClBiB,EAAM,GAAKjB,EAAO,GAClBiB,EAAM,OAASjB,EAAO,EACtBiB,EAAM,cAAgBjB,EAAO,GACzBA,EAAO,YAAcA,EAAO,UAC9BiB,EAAM,WAAajB,EAAO,WAC1BiB,EAAM,SAAWjB,EAAO,SACxBiB,EAAM,GAAKA,EAAM,GAAKA,EAAM,OAAS,KAAK,IAAIA,EAAM,UAAU,EAC9DA,EAAM,GAAKA,EAAM,GAAKA,EAAM,OAAS,KAAK,IAAIA,EAAM,UAAU,EAC9DA,EAAM,GAAKA,EAAM,GAAKA,EAAM,OAAS,KAAK,IAAIA,EAAM,QAAQ,EAC5DA,EAAM,GAAKA,EAAM,GAAKA,EAAM,OAAS,KAAK,IAAIA,EAAM,QAAQ,IAE5DA,EAAM,WAAaA,EAAM,WAAWA,EAAM,GAAIA,EAAM,EAAE,EACtDA,EAAM,SAAWA,EAAM,WAAWA,EAAM,GAAIA,EAAM,EAAE,GAElDA,EAAM,SAAW,IACnBA,EAAM,UAAYmxB,GAEhBnxB,EAAM,WAAa,IACrBA,EAAM,YAAcmxB,GAEtB,IAAIC,EAAKpxB,EAAM,SAAWA,EAAM,WAAaA,EAAM,SAAWmxB,EAASnxB,EAAM,SAC7E,OAAAA,EAAM,MAAQ,KAAK,IAAIoxB,EAAKpxB,EAAM,UAAU,EACxCA,EAAM,gBACRA,EAAM,MAAQmxB,EAASnxB,EAAM,OAE/BA,EAAM,cAAgB,EAAI,KAAK,GAAKA,EAAM,OAC1CA,EAAM,KAAOA,EAAM,MAAQmxB,EAC3BnxB,EAAM,OAASA,EAAM,cAAgBA,EAAM,KAC3CA,EAAM,QAAU,CACd,KAAMA,EAAM,GAAKA,EAAM,OACvB,KAAMA,EAAM,GAAKA,EAAM,OACvB,KAAMA,EAAM,GAAKA,EAAM,OACvB,KAAMA,EAAM,GAAKA,EAAM,MAC7B,EACWA,CACR,CACD,OAAAhF,EAAak2B,EAAY,CAAC,CACxB,IAAK,aACL,MAAO,SAAoBrc,EAAIC,EAAI,CACjC,OAAOF,GAAM,CACX,EAAG,KAAK,GACR,EAAG,KAAK,EAChB,EAAS,CACD,EAAGC,EACH,EAAGC,CACX,CAAO,CACF,CACL,EAAK,CACD,IAAK,wBACL,MAAO,SAA+B5S,EAASN,EAAU,CACvD,GAAIM,EAAQ,cAAe,CACzB,IAAIkR,EAAKlR,EAAQ,WAAaA,EAAQ,SAAWA,EAAQ,WAAaivB,EAASjvB,EAAQ,WACnF,EAAI,KAAK,IAAIkR,EAAKlR,EAAQ,QAAQ,EACtC,OAAOkR,EAAK,EAAIxR,CACxB,KAAa,CACL,IAAIwvB,EAAKlvB,EAAQ,SAAWA,EAAQ,WAAaA,EAAQ,SAAWivB,EAASjvB,EAAQ,SACjF2oB,EAAK,KAAK,IAAIuG,EAAKlvB,EAAQ,UAAU,EACzC,OAAOA,EAAQ,WAAa2oB,EAAKjpB,CAClC,CACF,CACL,EAAK,CACD,IAAK,UACL,MAAO,SAAiB4B,EAAgB,CACtC,IAAI6tB,EAAM,KAAK,MAAQ,KAAK,GAAK,EAAI,EACjChK,EAAK,KAAK,cAAgB,EAAI,EAClC,OAAQ7jB,EAAiB,IAAM,KAAK,GAAK,IAAM,KAAK,GAAK,IAAM,IAAM,KAAO,KAAK,OAAS,IAAM,KAAK,OAAS,MAAQ6tB,EAAM,IAAMhK,EAAK,IAAM,KAAK,GAAK,IAAM,KAAK,EACnK,CACL,EAAK,CACD,IAAK,YACL,MAAO,UAAqB,CAC1B,OAAO,KAAK,MACb,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBzlB,EAAUC,EAAU,CAC9C,GAAID,IAAa,EACf,MAAO,CACL,EAAG,KAAK,GACR,EAAG,KAAK,GACR,MAAO,KAAK,UACtB,EACa,GAAIA,IAAa,EACtB,MAAO,CACL,EAAG,KAAK,GACR,EAAG,KAAK,GACR,MAAO,KAAK,QACtB,EAEUC,IACFD,EAAWA,EAAW,QAExB,IAAI0vB,EAAQ,KAAK,sBAAsB,KAAM1vB,CAAQ,EACjDiT,EAAK,KAAK,GAAK,KAAK,OAAS,KAAK,IAAIyc,CAAK,EAC3Cxc,EAAK,KAAK,GAAK,KAAK,OAAS,KAAK,IAAIwc,CAAK,EAC/C,MAAO,CACL,EAAGL,GAAYpc,CAAE,EACjB,EAAGoc,GAAYnc,CAAE,EACjB,MAAOwc,CACf,CACK,CACL,EAAK,CACD,IAAK,kBACL,MAAO,SAAyB1vB,EAAUC,EAAU,CAClD,IAAIhG,EAAI,KAAK,YAAY+F,EAAUC,CAAQ,EACvC8b,EAAI4T,GAAO,CACb,EAAG,KAAK,GACR,EAAG,KAAK,EACT,EAAE11B,CAAC,EACJ,MAAI,CAAC,KAAK,gBAAkB8hB,IAAM,KAAYA,IAAM,QAClDA,GAAK,IAEAA,CACR,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4B/b,EAAUyB,EAAUxB,EAAU,CAC/D,IAAIhG,EAAI,KAAK,YAAY+F,EAAUC,CAAQ,EACvC2vB,EAAUnuB,EAAW,KAAK,cAAgB,EAAI,KAAK,GACnDouB,EAAM,KAAK,cAAgB,GAAK,EAChCC,EAAa71B,EAAE,MAAQ41B,EAAMD,EAC7BG,EAAS,KAAK,GAAK,KAAK,OAAS,KAAK,IAAID,CAAU,EACpDE,EAAS,KAAK,GAAK,KAAK,OAAS,KAAK,IAAIF,CAAU,EACxD,MAAO,CACL,EAAGC,EACH,EAAGC,CACX,CACK,CACF,CAAA,CAAC,EACKV,CACT,EAAErsB,EAAe,EACjB1J,EAAgB+1B,GAAY,cAAe,KAAK,EAEhD,IAAIW,GAAgB,GAChBC,GAAiB,GACjBC,GAAe,SAAU7mB,EAAU,CACrC3P,EAAUw2B,EAAc7mB,CAAQ,EAChC,IAAInL,EAAS3D,EAAa21B,CAAY,EACtC,SAASA,EAAar3B,EAAU6P,EAAW1O,EAAG,CAC5C,IAAImE,EACJ,OAAAvF,EAAgB,KAAMs3B,CAAY,EAClC/xB,EAAQD,EAAO,KAAK,KAAMrF,EAAU6P,EAAW1O,CAAC,EAChDmE,EAAM,SAAWtF,EACjBsF,EAAM,UAAYuK,EAClBpP,EAAgBa,EAAuBgE,CAAK,EAAG,QAAS,MAAM,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,MAAM,EACjE7E,EAAgBa,EAAuBgE,CAAK,EAAG,YAAa,MAAM,EAClE7E,EAAgBa,EAAuBgE,CAAK,EAAG,WAAY,EAAG,EAC9D7E,EAAgBa,EAAuBgE,CAAK,EAAG,aAAc,MAAM,EACnE7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ+xB,EAAa,IAAI,EACxE52B,EAAgBa,EAAuBgE,CAAK,EAAG,mBAAoB,MAAM,EACzEnE,EAAIA,GAAK,GACTmE,EAAM,MAAQnE,EAAE,OAASg2B,GACzB7xB,EAAM,OAASnE,EAAE,QAAUi2B,GAC3B9xB,EAAM,WAAanE,EAAE,WAAa,GAAK,EAAI,GAAK,EAChDmE,EAAM,SAAWnE,EAAE,UAAY,KAC/BmE,EAAM,WAAanE,EAAE,YAAc,CACjC,YAAe,CACrB,EACImE,EAAM,SAAWnE,EAAE,UAAY,KAAOmE,EAAM,SAAW,MAAM,QAAQnE,EAAE,QAAQ,EAAIA,EAAE,SAAS,CAAC,EAAIA,EAAE,SAC9FmE,CACR,CACD,OAAAhF,EAAa+2B,EAAc,CAAC,CAC1B,IAAK,OACL,MAAO,SAAcxnB,EAAWynB,EAA6BC,EAAkB,CAC7E,GAAI1nB,aAAqB1J,GAAmB,CAC1C,IAAIqW,EAAY3M,EACZ2nB,EAAKC,EAAKnP,EAAKoP,EAAMC,EACzB,GAAI,KAAK,SAAW,GAAK,KAAK,SAAW,EAAG,CAC1C,IAAIC,EAAU,KAAK,SAAW,EAAI,EAAI,EACtCJ,EAAMhb,EAAU,mBAAmBob,EAAS,KAAK,SAAU,EAAK,EAChEH,EAAMjb,EAAU,mBAAmBob,EAAS,KAAK,SAAW,KAAK,UAAY,KAAK,OAAS,EAAG,EAAK,EACnGtP,EAAMpf,GAAYsuB,EAAKC,EAAK,KAAK,MAAM,CACjD,SAAmB,KAAK,WAAa,GAI3B,GAHAD,EAAMhb,EAAU,YAAY,KAAK,QAAQ,EACzCib,EAAMjb,EAAU,mBAAmB,KAAK,SAAU,CAAC,KAAK,MAAM,EAC9D8L,EAAMpf,GAAYsuB,EAAKC,EAAK,KAAK,MAAM,EACnC,KAAK,YAAc,GAAI,CACzB,IAAII,EAAIvP,EACRA,EAAMkP,EACNA,EAAMK,CACP,UACQ,KAAK,WAAa,GAI3B,GAHAvP,EAAM9L,EAAU,YAAY,KAAK,QAAQ,EACzCib,EAAMjb,EAAU,mBAAmB,KAAK,SAAU,KAAK,MAAM,EAC7Dgb,EAAMtuB,GAAYof,EAAKmP,EAAK,KAAK,MAAM,EACnC,KAAK,YAAc,GAAI,CACzB,IAAIK,EAAKxP,EACTA,EAAMkP,EACNA,EAAMM,CACP,OAEDN,EAAMhb,EAAU,mBAAmB,KAAK,SAAU,KAAK,UAAY,KAAK,OAAS,CAAC,EAClFib,EAAMjb,EAAU,YAAY,KAAK,QAAQ,EACzC8L,EAAMpf,GAAYsuB,EAAKC,EAAK,KAAK,MAAM,EAEzCC,EAAOK,GAAoBP,EAAKlP,EAAK,KAAK,KAAK,EAC/CqP,EAAMzuB,GAAYsuB,EAAKlP,EAAK,KAAK,SAAW,KAAK,MAAM,EACvD,IAAI5X,EAAI,CACN,IAAK8mB,EACL,KAAME,EACN,IAAKC,CACN,EACGK,EAAS,KAAK,WAAW,QAAUV,EAA4B,OAC/DW,EAAO,KAAK,WAAW,MAAQX,EAA4B,OAC3DvB,EAAY,KAAK,WAAW,aAAeuB,EAA4B,YAC3E,MAAO,CACL,UAAWznB,EACX,EAAGa,EACH,eAAgBqlB,EAChB,OAAQiC,EACR,KAAMC,EACN,KAAM,KAAK,IAAIT,EAAI,EAAGE,EAAK,CAAC,EAAE,EAAGA,EAAK,CAAC,EAAE,CAAC,EAC1C,KAAM,KAAK,IAAIF,EAAI,EAAGE,EAAK,CAAC,EAAE,EAAGA,EAAK,CAAC,EAAE,CAAC,EAC1C,KAAM,KAAK,IAAIF,EAAI,EAAGE,EAAK,CAAC,EAAE,EAAGA,EAAK,CAAC,EAAE,CAAC,EAC1C,KAAM,KAAK,IAAIF,EAAI,EAAGE,EAAK,CAAC,EAAE,EAAGA,EAAK,CAAC,EAAE,CAAC,CACpD,CACO,CACF,CACL,EAAK,CACD,IAAK,aACL,MAAO,SAAoBhnB,EAAG,CAAE,CACjC,CAAA,CAAC,EACK2mB,CACT,EAAE1nB,EAAO,EACTlP,EAAgB42B,GAAc,OAAQ,OAAO,EAC7C,SAASa,GAAeh3B,EAAG,CACzB,OAAOA,EAAE,OAASm2B,GAAa,IACjC,CACAhnB,GAAe,SAASgnB,GAAa,KAAMA,EAAY,EAEvD,IAAIc,GAAoB,SAAUC,EAAe,CAC/Cv3B,EAAUs3B,EAAmBC,CAAa,EAC1C,IAAI/yB,EAAS3D,EAAay2B,CAAiB,EAC3C,SAASA,EAAkBn4B,EAAU6P,EAAW1O,EAAG,CACjD,IAAImE,EACJ,OAAAvF,EAAgB,KAAMo4B,CAAiB,EACvC7yB,EAAQD,EAAO,KAAK,KAAMrF,EAAU6P,EAAW1O,CAAC,EAChDmE,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQ6yB,EAAkB,IAAI,EAC7E7yB,EAAM,SAAW,EACVA,CACR,CACD,OAAO6yB,CACT,EAAEd,EAAY,EACd52B,EAAgB03B,GAAmB,OAAQ,YAAY,EACvD,SAASE,GAAoBn3B,EAAG,CAC9B,OAAOA,EAAE,OAASi3B,GAAkB,IACtC,CACA9nB,GAAe,SAAS,aAAc8nB,EAAiB,EAEvD,IAAIG,GAAiB,SAAUF,EAAe,CAC5Cv3B,EAAUy3B,EAAgBF,CAAa,EACvC,IAAI/yB,EAAS3D,EAAa42B,CAAc,EACxC,SAASA,EAAet4B,EAAU6P,EAAW1O,EAAG,CAC9C,IAAImE,EACJ,OAAAvF,EAAgB,KAAMu4B,CAAc,EACpChzB,EAAQD,EAAO,KAAK,KAAMrF,EAAU6P,EAAW1O,CAAC,EAChDmE,EAAM,SAAWtF,EACjBS,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQgzB,EAAe,IAAI,EAC1EhzB,EAAM,OAASA,EAAM,OAAS,EAC9BA,EAAM,SAAW,EACVA,CACR,CACD,OAAOgzB,CACT,EAAEjB,EAAY,EACd52B,EAAgB63B,GAAgB,OAAQ,SAAS,EACjD,SAASC,GAAiBr3B,EAAG,CAC3B,OAAOA,EAAE,OAASo3B,GAAe,IACnC,CACAjoB,GAAe,SAASioB,GAAe,KAAMA,EAAc,EAE3D,IAAIE,GAAgB,SAAUhoB,EAAU,CACtC3P,EAAU23B,EAAehoB,CAAQ,EACjC,IAAInL,EAAS3D,EAAa82B,CAAa,EACvC,SAASA,EAAcx4B,EAAU6P,EAAW1O,EAAG,CAC7C,IAAImE,EACJ,OAAAvF,EAAgB,KAAMy4B,CAAa,EACnClzB,EAAQD,EAAO,KAAK,KAAMrF,EAAU6P,EAAW1O,CAAC,EAChDmE,EAAM,SAAWtF,EACjBsF,EAAM,UAAYuK,EAClBpP,EAAgBa,EAAuBgE,CAAK,EAAG,SAAU,MAAM,EAC/D7E,EAAgBa,EAAuBgE,CAAK,EAAG,OAAQkzB,EAAc,IAAI,EACzElzB,EAAM,OAASnE,EAAE,OACVmE,CACR,CACD,OAAAhF,EAAak4B,EAAe,CAAC,CAC3B,IAAK,aACL,MAAO,SAAoB9nB,EAAG,CAAE,CACjC,CAAA,CAAC,EACK8nB,CACT,EAAE7oB,EAAO,EACTlP,EAAgB+3B,GAAe,OAAQ,QAAQ,EAC/C,SAASC,GAAgBv3B,EAAG,CAC1B,OAAOA,EAAE,OAASs3B,GAAc,IAClC,CACAnoB,GAAe,SAASmoB,GAAc,KAAMA,EAAa,EAEzDt0B,EAAgB,gBAAgBqB,EAAkB,EAClDrB,EAAgB,gBAAgB8B,EAAwB,EACxD9B,EAAgB,gBAAgB4B,EAAoB,EACpD6E,GAAW,SAASP,GAAkB,KAAMA,EAAiB"}