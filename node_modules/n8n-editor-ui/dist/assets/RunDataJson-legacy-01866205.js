System.register(["./ParameterInputList-legacy-fa43e42a.js","./vue-typed-mixins-legacy-f24fdadd.js","./vue-json-pretty-legacy-4244ae9f.js","./index-legacy-ca477c41.js","./axios-legacy-36e4071c.js","./n8n-legacy-89800d3e.js","./pinia-legacy-89d6b0e5.js","./MappingPill-legacy-a7f59cf7.js","./jsonpath-legacy-54f953af.js"],(function(e,t){"use strict";var a,s,n,o,r,i,l,d,c,p,h,u,g,v,y,m,j,_,b,P,f,x=document.createElement("style");return x.textContent="._actionsGroup_wlnwy_1{position:sticky;height:0;overflow:visible;z-index:10;top:0;padding-right:var(--spacing-s);opacity:0;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;text-align:right}._jsonDisplay_1js5j_1{position:absolute;top:0;left:0;padding-left:var(--spacing-s);right:0;overflow-y:auto;line-height:1.5;word-break:normal;height:100%;padding-bottom:var(--spacing-3xl);background-color:var(--color-background-base)}._jsonDisplay_1js5j_1:hover>div:first-child{opacity:1}._mappable_1js5j_21{cursor:-webkit-grab;cursor:grab}._mappable_1js5j_21:hover{background-color:var(--color-json-highlight)}._dragged_1js5j_28,._dragged_1js5j_28:hover{background-color:var(--color-primary-tint-2)}.vjs-tree{color:var(--color-json-default)}.vjs-tree-node:hover{background-color:transparent}.vjs-tree-node.is-highlight{background-color:var(--color-json-highlight)}.vjs-key>span,.vjs-value>span{color:var(--color-text-dark);line-height:1.7;border-radius:var(--border-radius-base)}.vjs-value>span{padding:0 var(--spacing-5xs) 0 var(--spacing-5xs);margin-left:var(--spacing-5xs)}.vjs-tree .vjs-value-null,.vjs-tree .vjs-value-null span{color:var(--color-json-null)}.vjs-tree .vjs-value-boolean,.vjs-tree .vjs-value-boolean span{color:var(--color-json-boolean)}.vjs-tree .vjs-value-number,.vjs-tree .vjs-value-number span{color:var(--color-json-number)}.vjs-tree .vjs-value-string,.vjs-tree .vjs-value-string span{color:var(--color-json-string)}.vjs-tree .vjs-key{color:var(--color-json-key)}.vjs-tree .vjs-tree__brackets{color:var(--color-json-brackets)}.vjs-tree .vjs-tree__brackets:hover{color:var(--color-json-brackets-hover)}.vjs-tree .vjs-tree__content.has-line{border-left:1px dotted var(--color-json-line)}\n",document.head.appendChild(x),{setters:[e=>{a=e.bp,s=e.T,n=e.o,o=e.p,r=e.cD,i=e.cz,l=e.ea,d=e.Y,c=e.c3,p=e.e9,h=e.cX,u=e.cF},e=>{g=e.m},e=>{v=e.V},e=>{y=e.p,m=e.c,j=e.D},null,e=>{_=e.y},e=>{b=e.m},e=>{P=e.M},e=>{f=e.j}],execute:function(){const x=e("n","_!^&*"),D=(e("_",g(a,s,y,m).extend({name:"run-data-json-actions",props:{node:{type:Object},paneType:{type:String},sessionId:{type:String},currentOutputIndex:{type:Number},runIndex:{type:Number},displayMode:{type:String},distanceFromActive:{type:Number},selectedJsonPath:{type:String,default:x},jsonData:{type:Array,required:!0}},computed:{...b(o,n),activeNode(){return this.ndvStore.activeNode},noSelection(){return this.selectedJsonPath===x},normalisedJsonPath(){return this.noSelection?'[""]':this.selectedJsonPath}},methods:{getJsonValue(){let e=f.query(this.jsonData,`$${this.normalisedJsonPath}`)[0];this.noSelection&&(e=this.hasPinData?r(this.pinData):i(this.getNodeInputData(this.node,this.runIndex,this.currentOutputIndex)));let t="";return t="object"==typeof e?JSON.stringify(e,null,2):e.toString(),t},getJsonItemPath(){let e="",t="";const a=l(this.normalisedJsonPath).split("]"),s=a[0].slice(1);return t=a.slice(1).join("]"),e=`$item(${s}).$node["${this.node.name}"].json`,{path:t,startPath:e}},getJsonParameterPath(){const e=l(this.normalisedJsonPath).split("]").slice(1).join("]");let t=`$node["${this.node.name}"].json`;return 1===this.distanceFromActive&&(t="$json"),{path:e,startPath:t}},handleCopyClick(e){let t;if("value"===e.command)t=this.getJsonValue(),this.$showToast({title:this.$locale.baseText("runData.copyValue.toast"),message:"",type:"success",duration:2e3});else{let a="",s="";if("itemPath"===e.command){const e=this.getJsonItemPath();a=e.startPath,s=e.path,this.$showToast({title:this.$locale.baseText("runData.copyItemPath.toast"),message:"",type:"success",duration:2e3})}else if("parameterPath"===e.command){const e=this.getJsonParameterPath();a=e.startPath,s=e.path,this.$showToast({title:this.$locale.baseText("runData.copyParameterPath.toast"),message:"",type:"success",duration:2e3})}s.startsWith("[")||s.startsWith(".")||!s||(s+="."),t=`{{ ${a+s} }}`}const a={value:"selection",itemPath:"item_path",parameterPath:"parameter_path"}[e.command];this.$telemetry.track("User copied ndv data",{node_type:this.activeNode.type,session_id:this.sessionId,run_index:this.runIndex,view:"json",copy_type:a,workflow_id:this.workflowsStore.workflowId,pane:this.paneType,in_execution_log:this.isReadOnly}),this.copyToClipboard(t)}}})),e("s",{actionsGroup:"_actionsGroup_wlnwy_1"}),g(d).extend({name:"run-data-json",components:{VueJsonPretty:v,Draggable:j,runDataJsonActions:async()=>u((()=>t.import("./RunDataJsonActions-legacy-c050507b.js")),void 0),MappingPill:P},props:{editMode:{type:Object},sessionId:{type:String},paneType:{type:String},node:{type:Object},inputData:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},runIndex:{type:Number},totalRuns:{type:Number}},data:()=>({selectedJsonPath:x,draggingPath:null,displayMode:"json"}),computed:{...b(o,n),jsonData(){return i(this.inputData)}},methods:{getShortKey:e=>e?c(e.dataset.name||"",16,2):"",getJsonParameterPath(e){const t=e.replace(/^(\["?\d"?])/,"");return p({nodeName:this.node.name,distanceFromActive:this.distanceFromActive,path:t})},onDragStart(e){e&&e.dataset.path&&(this.draggingPath=e.dataset.path),this.ndvStore.resetMappingTelemetry()},onDragEnd(e){this.draggingPath=null,setTimeout((()=>{const t=this.ndvStore.mappingTelemetry,a={src_node_type:this.node.type,src_field_name:e.dataset.name||"",src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:e.dataset.depth||0,src_view:"json",src_element:e,success:!1,...t};this.$externalHooks().run("runDataJson.onDragEnd",a),this.$telemetry.track("User dragged data for mapping",a)}),1e3)},getContent:e=>h(e)?`"${e}"`:JSON.stringify(e),getListItemName:e=>e.replace(/^(\["?\d"?]\.?)/g,"")}})),k={$style:{jsonDisplay:"_jsonDisplay_1js5j_1",mappable:"_mappable_1js5j_21",dragged:"_dragged_1js5j_28"}};function J(e){for(var t in k)this[t]=k[t]}const $=_(D,(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.jsonDisplay},[e.editMode.enabled?e._e():t("run-data-json-actions",{attrs:{node:e.node,sessioId:e.sessionId,displayMode:e.displayMode,distanceFromActive:e.distanceFromActive,selectedJsonPath:e.selectedJsonPath,jsonData:e.jsonData,paneType:e.paneType}}),t("draggable",{attrs:{type:"mapping",targetDataKey:"mappable",disabled:!e.mappingEnabled},on:{dragstart:e.onDragStart,dragend:e.onDragEnd},scopedSlots:e._u([{key:"preview",fn:function({canDrop:a,el:s}){return[s?t("MappingPill",{attrs:{html:e.getShortKey(s),"can-drop":a}}):e._e()]}}])},[[t("vue-json-pretty",{staticClass:"json-data",attrs:{data:e.jsonData,deep:10,showLength:!0,"selected-value":e.selectedJsonPath,rootPath:"",selectableType:"single"},on:{"update:selectedValue":function(t){e.selectedJsonPath=t},"update:selected-value":function(t){e.selectedJsonPath=t}},scopedSlots:e._u([{key:"nodeKey",fn:function({node:a}){return[t("span",{class:{[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===a.path},attrs:{"data-target":"mappable","data-value":e.getJsonParameterPath(a.path),"data-name":a.key,"data-path":a.path,"data-depth":a.level}},[e._v('"'+e._s(a.key)+'"')])]}},{key:"nodeValue",fn:function({node:a}){return[isNaN(a.index)?t("span",{staticClass:"ph-no-capture"},[e._v(e._s(e.getContent(a.content)))]):t("span",{staticClass:"ph-no-capture",class:{[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===a.path},attrs:{"data-target":"mappable","data-value":e.getJsonParameterPath(a.path),"data-name":e.getListItemName(a.path),"data-path":a.path,"data-depth":a.level}},[e._v(e._s(e.getContent(a.content)))])]}}])})]],2)],1)}),[],!1,J,null,null,null).exports,S=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));e("R",S)}}}));
//# sourceMappingURL=RunDataJson-legacy-01866205.js.map
