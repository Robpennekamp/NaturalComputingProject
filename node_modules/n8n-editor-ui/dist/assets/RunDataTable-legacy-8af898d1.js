System.register(["./axios-legacy-36e4071c.js","./ParameterInputList-legacy-fa43e42a.js","./n8n-legacy-89800d3e.js","./vue-typed-mixins-legacy-f24fdadd.js","./index-legacy-ca477c41.js","./pinia-legacy-89d6b0e5.js","./MappingPill-legacy-a7f59cf7.js","./vendor-legacy-a14d0497.js","./flatted-legacy-75212d83.js","./vue-i18n-legacy-805512d9.js","./en-legacy-6da8257d.js","./dateformat-legacy-2391c474.js","./lodash-es-legacy-4ad49555.js","./codemirror-lang-html-n8n-legacy-bbe58e16.js","./@jsplumb/browser-ui-legacy-dc4ca6ad.js","./@jsplumb/core-legacy-3789fada.js","./@jsplumb/util-legacy-b5c07987.js","./@jsplumb/common-legacy-1cf8cb8a.js","./@jsplumb/connector-bezier-legacy-d8332ba3.js","./uuid-legacy-07e4db56.js","./codemirror-lang-n8n-expression-legacy-c5cd8343.js","./luxon-legacy-31030795.js","./fast-json-stable-stringify-legacy-1697e93c.js","./esprima-next-legacy-de1b7587.js","./prettier-legacy-a7858f24.js","./@fortawesome/fontawesome-svg-core-legacy-3ab03321.js","./@fortawesome/free-solid-svg-icons-legacy-ba7fe72e.js","./@fortawesome/free-regular-svg-icons-legacy-1680ae07.js","./@fortawesome/vue-fontawesome-legacy-4c542afc.js","./vue2-touch-events-legacy-939320e5.js","./v-click-outside-legacy-99d5f0e6.js","./vue-fragment-legacy-9d2d7984.js","./vue-agile-legacy-64494419.js","./timeago.js-legacy-1d5e22e2.js","./canvas-confetti-legacy-958a221a.js","./file-saver-legacy-d7cd28ca.js","./vue2-teleport-legacy-5ae50eb1.js","./vue-json-pretty-legacy-4244ae9f.js","./humanize-duration-legacy-44aaa40b.js","./vue-infinite-loading-legacy-1b9c9210.js","./copy-to-clipboard-legacy-d0130a4f.js"],(function(e,t){"use strict";var a,n,l,r,s,o,i,g,d,c,p,u=document.createElement("style");return u.textContent='._dataDisplay_1tktz_1{position:absolute;top:0;left:0;padding-left:var(--spacing-s);right:0;overflow-y:auto;line-height:1.5;word-break:normal;height:100%;padding-bottom:var(--spacing-3xl)}._table_1tktz_14{border-collapse:separate;text-align:left;width:100%;font-size:var(--font-size-s)}._table_1tktz_14 th{background-color:var(--color-background-base);border-top:var(--border-base);border-bottom:var(--border-base);border-left:var(--border-base);position:sticky;top:0;color:var(--color-text-dark);z-index:1}._table_1tktz_14 td{vertical-align:top;padding:var(--spacing-2xs) var(--spacing-2xs) var(--spacing-2xs) var(--spacing-3xs);border-bottom:var(--border-base);border-left:var(--border-base);overflow-wrap:break-word;white-space:pre-wrap}._table_1tktz_14 td:first-child,._table_1tktz_14 td:nth-last-child(2){position:relative;z-index:0}._table_1tktz_14 td:first-child:after,._table_1tktz_14 td:nth-last-child(2):after{content:"";position:absolute;height:100%;width:2px;top:0}._table_1tktz_14 td:nth-last-child(2):after{right:-1px}._table_1tktz_14 td:first-child:after{left:-1px}._table_1tktz_14 th:last-child,._table_1tktz_14 td:last-child{border-right:var(--border-base)}._nodeClass_1tktz_62{margin-bottom:var(--spacing-5xs)}._emptyCell_1tktz_66{height:32px}._header_1tktz_70{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--spacing-2xs)}._header_1tktz_70 span{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}._draggableHeader_1tktz_82:hover{cursor:-webkit-grab;cursor:grab;background-color:var(--color-foreground-base)}._draggableHeader_1tktz_82:hover ._dragButton_1tktz_86{opacity:1}._draggingHeader_1tktz_90{background-color:var(--color-primary-tint-2)}._activeHeader_1tktz_94 ._dragButton_1tktz_86{opacity:1}._dragButton_1tktz_86{opacity:0;margin-left:var(--spacing-2xs)}._dataKey_1tktz_103{color:var(--color-text-dark);line-height:1.7;font-weight:var(--font-weight-bold);border-radius:var(--border-radius-base);padding:0 var(--spacing-5xs) 0 var(--spacing-5xs);margin-right:var(--spacing-5xs)}._value_1tktz_112{line-height:var(--font-line-height-regular)}._nestedValue_1tktz_116{margin-left:var(--spacing-4xs)}._mappable_1tktz_121{cursor:-webkit-grab;cursor:grab}._empty_1tktz_66{color:var(--color-danger)}._limitColWidth_1tktz_129{max-width:300px}._minColWidth_1tktz_133{min-width:240px}._hoveringKey_1tktz_137{background-color:var(--color-foreground-base)}._draggingKey_1tktz_141{background-color:var(--color-primary-tint-2)}._tableRightMargin_1tktz_145{background-color:var(--color-background-base)!important;width:var(--spacing-s);border-right:none!important;border-top:none!important;border-bottom:none!important}._hoveringRow_1tktz_153 td:first-child:after,._hoveringRow_1tktz_153 td:nth-last-child(2):after{background-color:var(--color-secondary)}._warningTooltip_1tktz_158{color:var(--color-warning)}\n',document.head.appendChild(u),{setters:[null,e=>{a=e.Y,n=e.o,l=e.p,r=e.c3,s=e.e8,o=e.e9},e=>{i=e.y},e=>{g=e.m},e=>{d=e.D},e=>{c=e.m},e=>{p=e.M},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t=g(a).extend({name:"run-data-table",components:{Draggable:d,MappingPill:p},props:{node:{type:Object},inputData:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number},runIndex:{type:Number},outputIndex:{type:Number},totalRuns:{type:Number},pageOffset:{type:Number},hasDefaultHoverState:{type:Boolean}},data:()=>({activeColumn:-1,forceShowGrip:!1,draggedColumn:!1,draggingPath:null,hoveringPath:null,mappingHintVisible:!1,activeRow:null,columnLimit:40,columnLimitExceeded:!1}),mounted(){if(this.tableData&&this.tableData.columns&&this.$refs.draggable){const e=this.$refs.draggable.$refs.wrapper;e&&this.$emit("mounted",{avgRowHeight:e.offsetHeight/this.tableData.data.length})}},computed:{...c(l,n),hoveringItem(){return this.ndvStore.hoveringItem},pairedItemMappings(){return this.workflowsStore.workflowExecutionPairedItemMappings},tableData(){return this.convertToTable(this.inputData)},focusedMappableInput(){return this.ndvStore.focusedMappableInput}},methods:{shorten:r,isHoveringRow(e){if(e===this.activeRow)return!0;const t=this.pageOffset+e;if(0===t&&!this.hoveringItem&&this.hasDefaultHoverState&&1===this.distanceFromActive)return!0;const a=s(this.node.name,this.runIndex||0,this.outputIndex||0,t);if(!this.hoveringItem||!this.pairedItemMappings[a])return!1;const n=s(this.hoveringItem.nodeName,this.hoveringItem.runIndex,this.hoveringItem.outputIndex,this.hoveringItem.itemIndex);return this.pairedItemMappings[a].has(n)},onMouseEnterCell(e){const t=e.target;if(t&&this.mappingEnabled){const e=t.dataset.col;e&&!isNaN(parseInt(e,10))&&(this.activeColumn=parseInt(e,10))}if(t){const e=t.dataset.row;e&&!isNaN(parseInt(e,10))&&(this.activeRow=parseInt(e,10),this.$emit("activeRowChanged",this.pageOffset+this.activeRow))}},onMouseLeaveCell(){this.activeColumn=-1,this.activeRow=null,this.$emit("activeRowChanged",null)},onMouseEnterKey(e,t){this.hoveringPath=this.getCellExpression(e,t)},onMouseLeaveKey(){this.hoveringPath=null},isHovering(e,t){const a=this.getCellExpression(e,t);return this.hoveringPath===a},getExpression(e){return this.node?o({nodeName:this.node.name,distanceFromActive:this.distanceFromActive,path:[e]}):""},getPathNameFromTarget:e=>e?e.dataset.name:"",getCellPathName(e,t){const a=e[e.length-1];return"string"==typeof a?a:e.length>1?`${e[e.length-2]}[${a}]`:`${this.tableData.columns[t]}[${a}]`},getCellExpression(e,t){if(!this.node)return"";const a=this.tableData.columns[t];return o({nodeName:this.node.name,distanceFromActive:this.distanceFromActive,path:[a,...e]})},isEmpty:e=>""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&null!==e&&0===Object.keys(e).length||null==e,getValueToRender(e){return""===e?this.$locale.baseText("runData.emptyString"):"string"==typeof e?e.replaceAll("\n","\\n"):Array.isArray(e)&&0===e.length?this.$locale.baseText("runData.emptyArray"):"object"==typeof e&&null!==e&&0===Object.keys(e).length?this.$locale.baseText("runData.emptyObject"):null==e?`[${e}]`:e},onDragStart(){this.draggedColumn=!0,this.ndvStore.resetMappingTelemetry()},onCellDragStart(e){e&&e.dataset.value&&(this.draggingPath=e.dataset.value),this.onDragStart()},onCellDragEnd(e){this.draggingPath=null,this.onDragEnd(e.dataset.name||"","tree",e.dataset.depth||"0")},isDraggingKey(e,t){if(this.draggingPath)return this.draggingPath===this.getCellExpression(e,t)},onDragEnd(e,t,a="0"){setTimeout((()=>{const n=this.ndvStore.mappingTelemetry,l={src_node_type:this.node.type,src_field_name:e,src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:parseInt(a,10),src_view:"table",src_element:t,success:!1,...n};this.$externalHooks().run("runDataTable.onDragEnd",l),this.$telemetry.track("User dragged data for mapping",l)}),1e3)},isSimple:e=>"object"!=typeof e||null===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length,hasJsonInColumn(e){return this.tableData.hasJson[this.tableData.columns[e]]},convertToTable(e){const t=[],a=[];let n,l,r;const s={};return e.forEach((e=>{if(!e.hasOwnProperty("json"))return;r=e.json,l=[];const o=Object.keys(r||{});o.length>40?(this.columnLimitExceeded=!0,n=o.slice(0,40)):n=o,a.forEach((e=>{r.hasOwnProperty(e)?(l.push(r[e]),n.splice(n.indexOf(e),1),s[e]=s[e]||"object"==typeof r[e]&&Object.keys(r[e]||{}).length>0||!1):l.push(void 0)})),n.forEach((e=>{a.push(e),l.push(r[e]),s[e]=s[e]||"object"==typeof r[e]&&Object.keys(r[e]||{}).length>0||!1})),t.push(l)})),t.forEach((e=>{a.length>e.length&&e.push(...new Array(a.length-e.length))})),{hasJson:s,columns:a,data:t}},switchToJsonView(){this.$emit("displayModeChange","json")}},watch:{focusedMappableInput(e){setTimeout((()=>{this.forceShowGrip=!!this.focusedMappableInput}),e?300:150)}}});var u=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{class:e.$style.dataDisplay},[e.tableData.columns&&0===e.tableData.columns.length?t("table",{class:e.$style.table},[t("tr",[t("th",{class:e.$style.emptyCell}),t("th",{class:e.$style.tableRightMargin})]),e._l(e.tableData.data,(function(a,n){return t("tr",{key:n,class:{[e.$style.hoveringRow]:e.isHoveringRow(n)}},[t("td",{attrs:{"data-row":n,"data-col":0},on:{mouseenter:e.onMouseEnterCell,mouseleave:e.onMouseLeaveCell}},[t("n8n-info-tip",[e._v(e._s(e.$locale.baseText("runData.emptyItemHint")))])],1),t("td",{class:e.$style.tableRightMargin})])}))],2):t("table",{class:e.$style.table},[t("thead",[t("tr",[e._l(e.tableData.columns||[],(function(a,n){return t("th",{key:a},[t("n8n-tooltip",{attrs:{placement:"bottom-start",disabled:!e.mappingEnabled,"open-delay":1e3},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("img",{attrs:{src:"/%7B%7BBASE_PATH%7D%7D/static/data-mapping-gif.gif"}}),e._v(" "+e._s(e.$locale.baseText("dataMapping.dragColumnToFieldHint"))+" ")])]},proxy:!0}],null,!0)},[t("draggable",{attrs:{type:"mapping",data:e.getExpression(a),disabled:!e.mappingEnabled},on:{dragstart:e.onDragStart,dragend:t=>e.onDragEnd(t,"column")},scopedSlots:e._u([{key:"preview",fn:function({canDrop:n}){return[t("MappingPill",{attrs:{html:e.shorten(a,16,2),"can-drop":n}})]}},{key:"default",fn:function({isDragging:l}){return[t("div",{class:{[e.$style.header]:!0,[e.$style.draggableHeader]:e.mappingEnabled,[e.$style.activeHeader]:(n===e.activeColumn||e.forceShowGrip)&&e.mappingEnabled,[e.$style.draggingHeader]:l}},[t("span",[e._v(e._s(a||" "))]),t("div",{class:e.$style.dragButton},[t("font-awesome-icon",{attrs:{icon:"grip-vertical"}})],1)])]}}],null,!0)})],1)],1)})),e.columnLimitExceeded?t("th",{class:e.$style.header},[t("n8n-tooltip",{attrs:{placement:"bottom-end"},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",[t("i18n",{attrs:{path:"dataMapping.tableView.tableColumnsExceeded.tooltip"},scopedSlots:e._u([{key:"columnLimit",fn:function(){return[e._v(e._s(e.columnLimit))]},proxy:!0},{key:"link",fn:function(){return[t("a",{on:{click:e.switchToJsonView}},[e._v(e._s(e.$locale.baseText("dataMapping.tableView.tableColumnsExceeded.tooltip.link")))])]},proxy:!0}],null,!1,344426289)})],1)]},proxy:!0}],null,!1,3350813415)},[t("span",[t("font-awesome-icon",{class:e.$style.warningTooltip,attrs:{icon:"exclamation-triangle"}}),e._v(" "+e._s(e.$locale.baseText("dataMapping.tableView.tableColumnsExceeded"))+" ")],1)])],1):e._e(),t("th",{class:e.$style.tableRightMargin})],2)]),t("draggable",{ref:"draggable",attrs:{tag:"tbody",type:"mapping",targetDataKey:"mappable",disabled:!e.mappingEnabled},on:{dragstart:e.onCellDragStart,dragend:e.onCellDragEnd},scopedSlots:e._u([{key:"preview",fn:function({canDrop:a,el:n}){return[t("MappingPill",{attrs:{html:e.shorten(e.getPathNameFromTarget(n)||"",16,2),"can-drop":a}})]}}])},[e._l(e.tableData.data,(function(a,n){return t("tr",{key:n,class:{[e.$style.hoveringRow]:e.isHoveringRow(n)},attrs:{"data-test-id":e.isHoveringRow(n)?"hovering-item":void 0}},[e._l(a,(function(a,l){return t("td",{key:l,class:e.hasJsonInColumn(l)?e.$style.minColWidth:e.$style.limitColWidth,attrs:{"data-row":n,"data-col":l},on:{mouseenter:e.onMouseEnterCell,mouseleave:e.onMouseLeaveCell}},[e.isSimple(a)?t("span",{staticClass:"ph-no-capture",class:{[e.$style.value]:!0,[e.$style.empty]:e.isEmpty(a)}},[e._v(e._s(e.getValueToRender(a)))]):t("n8n-tree",{attrs:{nodeClass:e.$style.nodeClass,value:a},scopedSlots:e._u([{key:"label",fn:function({label:a,path:n}){return[t("span",{class:{[e.$style.hoveringKey]:e.mappingEnabled&&e.isHovering(n,l),[e.$style.draggingKey]:e.isDraggingKey(n,l),[e.$style.dataKey]:!0,[e.$style.mappable]:e.mappingEnabled},attrs:{"data-target":"mappable","data-name":e.getCellPathName(n,l),"data-value":e.getCellExpression(n,l),"data-depth":n.length},on:{mouseenter:()=>e.onMouseEnterKey(n,l),mouseleave:e.onMouseLeaveKey}},[e._v(e._s(a||e.$locale.baseText("runData.unnamedField")))])]}},{key:"value",fn:function({value:a}){return[t("span",{staticClass:"ph-no-capture",class:{[e.$style.nestedValue]:!0,[e.$style.empty]:e.isEmpty(a)}},[e._v(e._s(e.getValueToRender(a)))])]}}],null,!0)})],1)})),e.columnLimitExceeded?t("td"):e._e(),t("td",{class:e.$style.tableRightMargin})],2)}))],2)],1)])};const h={$style:{dataDisplay:"_dataDisplay_1tktz_1",table:"_table_1tktz_14",nodeClass:"_nodeClass_1tktz_62",emptyCell:"_emptyCell_1tktz_66",header:"_header_1tktz_70",draggableHeader:"_draggableHeader_1tktz_82",dragButton:"_dragButton_1tktz_86",draggingHeader:"_draggingHeader_1tktz_90",activeHeader:"_activeHeader_1tktz_94",dataKey:"_dataKey_1tktz_103",value:"_value_1tktz_112",nestedValue:"_nestedValue_1tktz_116 _value_1tktz_112",mappable:"_mappable_1tktz_121",empty:"_empty_1tktz_66",limitColWidth:"_limitColWidth_1tktz_129",minColWidth:"_minColWidth_1tktz_133",hoveringKey:"_hoveringKey_1tktz_137",draggingKey:"_draggingKey_1tktz_141",tableRightMargin:"_tableRightMargin_1tktz_145",hoveringRow:"_hoveringRow_1tktz_153",warningTooltip:"_warningTooltip_1tktz_158"}};function _(e){for(var t in h)this[t]=h[t]}e("default",i(t,u,[],!1,_,null,null,null).exports)}}}));
//# sourceMappingURL=RunDataTable-legacy-8af898d1.js.map
