{"version":3,"file":"NodeCreator-22fa1af6.js","sources":["../../src/utils/sortUtils.ts","../../src/components/transitions/SlideTransition.vue","../../src/components/Node/NodeCreator/composables/useKeyboardNavigation.ts","../../src/components/Node/NodeCreator/utils.ts","../../src/components/Node/NodeCreator/composables/useViewStacks.ts","../../src/components/Node/NodeCreator/composables/useActionsGeneration.ts","../../src/components/Node/NodeCreator/viewsData.ts","../../src/components/Node/NodeCreator/Panel/SearchBar.vue","../../src/components/Node/NodeCreator/composables/useActions.ts","../../src/components/Node/NodeCreator/ItemTypes/NodeItem.vue","../../src/components/Node/NodeCreator/ItemTypes/SubcategoryItem.vue","../../src/components/Node/NodeCreator/ItemTypes/ActionItem.vue","../../src/components/Node/NodeCreator/Renderers/ItemsRenderer.vue","../../src/components/Node/NodeCreator/ItemTypes/CategoryItem.vue","../../src/components/Node/NodeCreator/Renderers/CategorizedItemsRenderer.vue","../../src/components/Node/NodeCreator/Modes/ActionsMode.vue","../../src/components/Node/NodeCreator/Modes/NodesMode.vue","../../src/components/Node/NodeCreator/Panel/NodesListPanel.vue","../../src/components/Node/NodeCreator/NodeCreator.vue"],"sourcesContent":["/*\n\tConstants and utility functions used for searching for node types in node creator component\n*/\n\n// based on https://github.com/forrestthewoods/lib_fts/blob/master/code/fts_fuzzy_match.js\n\nconst SEQUENTIAL_BONUS = 30; // bonus for adjacent matches\nconst SEPARATOR_BONUS = 30; // bonus if match occurs after a separator\nconst CAMEL_BONUS = 30; // bonus if match is uppercase and prev is lower\nconst FIRST_LETTER_BONUS = 15; // bonus if the first letter is matched\n\nconst LEADING_LETTER_PENALTY = -15; // penalty applied for every letter in str before the first match\nconst MAX_LEADING_LETTER_PENALTY = -200; // maximum penalty for leading letters\nconst UNMATCHED_LETTER_PENALTY = -5;\n\n/**\n * Returns true if each character in pattern is found sequentially within target\n * @param {*} pattern string\n * @param {*} target string\n */\nfunction fuzzyMatchSimple(pattern: string, target: string): boolean {\n\tlet patternIdx = 0;\n\tlet strIdx = 0;\n\n\twhile (patternIdx < pattern.length && strIdx < target.length) {\n\t\tconst patternChar = pattern.charAt(patternIdx).toLowerCase();\n\t\tconst targetChar = target.charAt(strIdx).toLowerCase();\n\t\tif (patternChar === targetChar) {\n\t\t\tpatternIdx++;\n\t\t}\n\t\t++strIdx;\n\t}\n\n\treturn pattern.length !== 0 && target.length !== 0 && patternIdx === pattern.length;\n}\n\n/**\n * Does a fuzzy search to find pattern inside a string.\n * @param {*} pattern string        pattern to search for\n * @param {*} target     string        string which is being searched\n * @returns [boolean, number]       a boolean which tells if pattern was\n *                                  found or not and a search score\n */\nfunction fuzzyMatch(pattern: string, target: string): { matched: boolean; outScore: number } {\n\tconst recursionCount = 0;\n\tconst recursionLimit = 5;\n\tconst matches: number[] = [];\n\tconst maxMatches = 256;\n\n\treturn fuzzyMatchRecursive(\n\t\tpattern,\n\t\ttarget,\n\t\t0 /* patternCurIndex */,\n\t\t0 /* strCurrIndex */,\n\t\tnull /* srcMatces */,\n\t\tmatches,\n\t\tmaxMatches,\n\t\t0 /* nextMatch */,\n\t\trecursionCount,\n\t\trecursionLimit,\n\t);\n}\n\nfunction fuzzyMatchRecursive(\n\tpattern: string,\n\ttarget: string,\n\tpatternCurIndex: number,\n\ttargetCurrIndex: number,\n\ttargetMatches: null | number[],\n\tmatches: number[],\n\tmaxMatches: number,\n\tnextMatch: number,\n\trecursionCount: number,\n\trecursionLimit: number,\n): { matched: boolean; outScore: number } {\n\tlet outScore = 0;\n\n\t// Return if recursion limit is reached.\n\tif (++recursionCount >= recursionLimit) {\n\t\treturn { matched: false, outScore };\n\t}\n\n\t// Return if we reached ends of strings.\n\tif (patternCurIndex === pattern.length || targetCurrIndex === target.length) {\n\t\treturn { matched: false, outScore };\n\t}\n\n\t// Recursion params\n\tlet recursiveMatch = false;\n\tlet bestRecursiveMatches: number[] = [];\n\tlet bestRecursiveScore = 0;\n\n\t// Loop through pattern and str looking for a match.\n\tlet firstMatch = true;\n\twhile (patternCurIndex < pattern.length && targetCurrIndex < target.length) {\n\t\t// Match found.\n\t\tif (pattern[patternCurIndex].toLowerCase() === target[targetCurrIndex].toLowerCase()) {\n\t\t\tif (nextMatch >= maxMatches) {\n\t\t\t\treturn { matched: false, outScore };\n\t\t\t}\n\n\t\t\tif (firstMatch && targetMatches) {\n\t\t\t\tmatches = [...targetMatches];\n\t\t\t\tfirstMatch = false;\n\t\t\t}\n\n\t\t\tconst recursiveMatches: number[] = [];\n\t\t\tconst recursiveResult = fuzzyMatchRecursive(\n\t\t\t\tpattern,\n\t\t\t\ttarget,\n\t\t\t\tpatternCurIndex,\n\t\t\t\ttargetCurrIndex + 1,\n\t\t\t\tmatches,\n\t\t\t\trecursiveMatches,\n\t\t\t\tmaxMatches,\n\t\t\t\tnextMatch,\n\t\t\t\trecursionCount,\n\t\t\t\trecursionLimit,\n\t\t\t);\n\n\t\t\tconst recursiveScore = recursiveResult.outScore;\n\t\t\tif (recursiveResult.matched) {\n\t\t\t\t// Pick best recursive score.\n\t\t\t\tif (!recursiveMatch || recursiveScore > bestRecursiveScore) {\n\t\t\t\t\tbestRecursiveMatches = [...recursiveMatches];\n\t\t\t\t\tbestRecursiveScore = recursiveScore;\n\t\t\t\t}\n\t\t\t\trecursiveMatch = true;\n\t\t\t}\n\n\t\t\tmatches[nextMatch++] = targetCurrIndex;\n\t\t\t++patternCurIndex;\n\t\t}\n\t\t++targetCurrIndex;\n\t}\n\n\tconst matched = patternCurIndex === pattern.length;\n\n\tif (matched) {\n\t\toutScore = 100;\n\n\t\t// Apply leading letter penalty\n\t\tlet penalty = LEADING_LETTER_PENALTY * matches[0];\n\t\tpenalty = penalty < MAX_LEADING_LETTER_PENALTY ? MAX_LEADING_LETTER_PENALTY : penalty;\n\t\toutScore += penalty;\n\n\t\t//Apply unmatched penalty\n\t\tconst unmatched = target.length - nextMatch;\n\t\toutScore += UNMATCHED_LETTER_PENALTY * unmatched;\n\n\t\t// Apply ordering bonuses\n\t\tfor (let i = 0; i < nextMatch; i++) {\n\t\t\tconst currIdx = matches[i];\n\n\t\t\tif (i > 0) {\n\t\t\t\tconst prevIdx = matches[i - 1];\n\t\t\t\tif (currIdx === prevIdx + 1) {\n\t\t\t\t\toutScore += SEQUENTIAL_BONUS;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check for bonuses based on neighbor character value.\n\t\t\tif (currIdx > 0) {\n\t\t\t\t// Camel case\n\t\t\t\tconst neighbor = target[currIdx - 1];\n\t\t\t\tconst curr = target[currIdx];\n\t\t\t\tif (neighbor !== neighbor.toUpperCase() && curr !== curr.toLowerCase()) {\n\t\t\t\t\toutScore += CAMEL_BONUS;\n\t\t\t\t}\n\t\t\t\tconst isNeighbourSeparator = neighbor === '_' || neighbor === ' ';\n\t\t\t\tif (isNeighbourSeparator) {\n\t\t\t\t\toutScore += SEPARATOR_BONUS;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// First letter\n\t\t\t\toutScore += FIRST_LETTER_BONUS;\n\t\t\t}\n\t\t}\n\n\t\t// Return best result\n\t\tif (recursiveMatch && (!matched || bestRecursiveScore > outScore)) {\n\t\t\t// Recursive score is better than \"this\"\n\t\t\tmatches = [...bestRecursiveMatches];\n\t\t\toutScore = bestRecursiveScore;\n\t\t\treturn { matched: true, outScore };\n\t\t} else if (matched) {\n\t\t\t// \"this\" score is better than recursive\n\t\t\treturn { matched: true, outScore };\n\t\t} else {\n\t\t\treturn { matched: false, outScore };\n\t\t}\n\t}\n\treturn { matched: false, outScore };\n}\n\n// prop = 'key'\n// prop = 'key1.key2'\n// prop = ['key1', 'key2']\nfunction getValue<T extends object>(obj: T, prop: string): unknown {\n\tif (obj.hasOwnProperty(prop)) {\n\t\treturn obj[prop as keyof T];\n\t}\n\n\tconst segments = prop.split('.');\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tlet result: any = obj;\n\tlet i = 0;\n\twhile (result && i < segments.length) {\n\t\tresult = result[segments[i]];\n\t\ti++;\n\t}\n\treturn result;\n}\n\nexport function sublimeSearch<T extends object>(\n\tfilter: string,\n\tdata: Readonly<T[]>,\n\tkeys: Array<{ key: string; weight: number }>,\n): Array<{ score: number; item: T }> {\n\tconst results = data.reduce((accu: Array<{ score: number; item: T }>, item: T) => {\n\t\tlet values: Array<{ value: string; weight: number }> = [];\n\t\tkeys.forEach(({ key, weight }) => {\n\t\t\tconst value = getValue(item, key);\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tvalues = values.concat(value.map((v) => ({ value: v, weight })));\n\t\t\t} else if (typeof value === 'string') {\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tweight,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// for each item, check every key and get maximum score\n\t\tconst itemMatch = values.reduce(\n\t\t\t(\n\t\t\t\taccu: null | { matched: boolean; outScore: number },\n\t\t\t\t{ value, weight }: { value: string; weight: number },\n\t\t\t) => {\n\t\t\t\tif (!fuzzyMatchSimple(filter, value)) {\n\t\t\t\t\treturn accu;\n\t\t\t\t}\n\n\t\t\t\tconst match = fuzzyMatch(filter, value);\n\t\t\t\tmatch.outScore *= weight;\n\n\t\t\t\tconst { matched, outScore } = match;\n\t\t\t\tif (!accu && matched) {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tif (matched && accu && outScore > accu.outScore) {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\treturn accu;\n\t\t\t},\n\t\t\tnull,\n\t\t);\n\n\t\tif (itemMatch) {\n\t\t\taccu.push({\n\t\t\t\tscore: itemMatch.outScore,\n\t\t\t\titem,\n\t\t\t});\n\t\t}\n\n\t\treturn accu;\n\t}, []);\n\n\tresults.sort((a, b) => {\n\t\treturn b.score - a.score;\n\t});\n\n\treturn results;\n}\n","<template>\n\t<transition name=\"slide\">\n\t\t<slot />\n\t</transition>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n\tname: 'SlideTransition',\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.slide-leave-active,\n.slide-enter-active {\n\ttransition: 200ms ease;\n}\n.slide-leave-to,\n.slide-enter {\n\ttransform: translateX(100%);\n}\n</style>\n","import { ref, set } from 'vue';\nimport { defineStore } from 'pinia';\n\nexport type KeyboardKey = (typeof WATCHED_KEYS)[number];\ninterface KeyHook {\n\tkeyboardKeys: KeyboardKey[];\n\tcondition?: (type: string, activeItemId: string) => boolean;\n\thandler: (activeItemId: string, keyboardKey: KeyboardKey) => void;\n}\n\nexport const KEYBOARD_ID_ATTR = 'data-keyboard-nav-id';\nexport const WATCHED_KEYS = [\n\t'ArrowUp',\n\t'ArrowDown',\n\t'ArrowLeft',\n\t'ArrowRight',\n\t'Enter',\n\t'Escape',\n\t'Tab',\n];\n\nexport const useKeyboardNavigation = defineStore('nodeCreatorKeyboardNavigation', () => {\n\tconst selectableItems = ref<Array<WeakRef<Element>>>([]);\n\tconst activeItemId = ref<string | null>(null);\n\t// Array of objects that contains key code and handler\n\tconst keysHooks = ref<Record<string, KeyHook>>({});\n\n\tfunction getItemType(element?: Element) {\n\t\treturn element?.getAttribute('data-keyboard-nav-type');\n\t}\n\tfunction getElementId(element?: Element) {\n\t\treturn element?.getAttribute(KEYBOARD_ID_ATTR) || undefined;\n\t}\n\tasync function refreshSelectableItems(): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\t// Wait for DOM to update\n\t\t\tcleanupSelectableItems();\n\t\t\tsetTimeout(() => {\n\t\t\t\tselectableItems.value = Array.from(\n\t\t\t\t\tdocument.querySelectorAll('[data-keyboard-nav-type]'),\n\t\t\t\t).map((el) => new WeakRef(el));\n\t\t\t\tresolve();\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tfunction executeKeyHooks(keyboardKey: KeyboardKey, activeItem: Element) {\n\t\tconst flatHooks = Object.values(keysHooks.value);\n\t\tconst hooks = flatHooks.filter((hook) => hook.keyboardKeys.includes(keyboardKey));\n\n\t\thooks.forEach((hook) => {\n\t\t\tif (!activeItemId.value) return;\n\n\t\t\tconst conditionPassed =\n\t\t\t\thook.condition === undefined ||\n\t\t\t\thook.condition(getItemType(activeItem) || '', activeItemId.value);\n\n\t\t\tif (conditionPassed && activeItemId.value) {\n\t\t\t\thook.handler(activeItemId.value, keyboardKey);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function onKeyDown(e: KeyboardEvent) {\n\t\tconst pressedKey = e.key;\n\t\tif (!WATCHED_KEYS.includes(pressedKey)) return;\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tawait refreshSelectableItems();\n\t\tconst activeItemIndex = selectableItems.value.findIndex(\n\t\t\t(item) => getElementId(item?.deref()) === activeItemId.value,\n\t\t);\n\t\tconst activeItem = selectableItems.value[activeItemIndex]?.deref();\n\n\t\tconst isArrowDown = pressedKey === 'ArrowDown';\n\t\tconst isArrowUp = pressedKey === 'ArrowUp';\n\n\t\tif (!activeItem) return;\n\n\t\tif (isArrowDown) {\n\t\t\tconst nextItemIndex =\n\t\t\t\tactiveItemIndex < selectableItems.value.length - 1 ? activeItemIndex + 1 : 0;\n\n\t\t\tsetActiveItem(selectableItems.value[nextItemIndex]?.deref());\n\t\t}\n\t\tif (isArrowUp) {\n\t\t\tconst previousIndex =\n\t\t\t\tactiveItemIndex > 0 ? activeItemIndex - 1 : selectableItems.value.length - 1;\n\n\t\t\tsetActiveItem(selectableItems.value[previousIndex]?.deref());\n\t\t}\n\t\texecuteKeyHooks(pressedKey, activeItem);\n\t}\n\n\tfunction setActiveItemId(id: string) {\n\t\tactiveItemId.value = id;\n\t}\n\n\tfunction setActiveItem(item?: Element) {\n\t\tconst itemId = getElementId(item);\n\t\tif (!itemId) return;\n\n\t\tsetActiveItemId(itemId);\n\t\tif (item?.scrollIntoView) {\n\t\t\titem?.scrollIntoView({ block: 'center' });\n\t\t}\n\t}\n\n\tasync function setActiveItemIndex(index: number) {\n\t\tawait refreshSelectableItems();\n\n\t\tsetActiveItem(selectableItems.value[index]?.deref());\n\t}\n\n\tfunction attachKeydownEvent() {\n\t\tdocument.addEventListener('keydown', onKeyDown, { capture: true });\n\t}\n\n\tfunction detachKeydownEvent() {\n\t\tcleanupSelectableItems();\n\t\tdocument.removeEventListener('keydown', onKeyDown, { capture: true });\n\t}\n\n\tfunction registerKeyHook(name: string, hook: KeyHook) {\n\t\thook.keyboardKeys.forEach((keyboardKey) => {\n\t\t\tif (WATCHED_KEYS.includes(keyboardKey)) {\n\t\t\t\tset(keysHooks.value, name, hook);\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Key ${keyboardKey} is not supported`);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction cleanupSelectableItems() {\n\t\t// Cleanup to make sure DOM elements get garbage collected\n\t\tselectableItems.value = [];\n\t}\n\n\tfunction getActiveItemIndex() {\n\t\treturn selectableItems.value.findIndex(\n\t\t\t(item) => getElementId(item?.deref()) === activeItemId.value,\n\t\t);\n\t}\n\n\treturn {\n\t\tactiveItemId,\n\t\tattachKeydownEvent,\n\t\trefreshSelectableItems,\n\t\tdetachKeydownEvent,\n\t\tregisterKeyHook,\n\t\tgetActiveItemIndex,\n\t\tsetActiveItemId,\n\t\tsetActiveItemIndex,\n\t};\n});\n","import type {\n\tNodeCreateElement,\n\tActionCreateElement,\n\tSubcategorizedNodeTypes,\n\tSimplifiedNodeType,\n\tINodeCreateElement,\n} from '@/Interface';\nimport { CORE_NODES_CATEGORY, DEFAULT_SUBCATEGORY } from '@/constants';\nimport { v4 as uuidv4 } from 'uuid';\nimport { sublimeSearch } from '@/utils';\n\nexport function transformNodeType(\n\tnode: SimplifiedNodeType,\n\tsubcategory?: string,\n\ttype: 'node' | 'action' = 'node',\n): NodeCreateElement | ActionCreateElement {\n\tconst createElement = {\n\t\tuuid: uuidv4(),\n\t\tkey: node.name,\n\t\tsubcategory:\n\t\t\tsubcategory ?? node.codex?.subcategories?.[CORE_NODES_CATEGORY]?.[0] ?? DEFAULT_SUBCATEGORY,\n\t\tproperties: {\n\t\t\t...node,\n\t\t},\n\t\ttype,\n\t};\n\n\treturn type === 'action'\n\t\t? (createElement as ActionCreateElement)\n\t\t: (createElement as NodeCreateElement);\n}\n\nexport function subcategorizeItems(items: SimplifiedNodeType[]) {\n\treturn items.reduce((acc: SubcategorizedNodeTypes, item) => {\n\t\t// Only Core Nodes subcategories are valid, others are uncategorized\n\t\tconst isCoreNodesCategory = item.codex?.categories?.includes(CORE_NODES_CATEGORY);\n\t\tconst subcategories = isCoreNodesCategory\n\t\t\t? item?.codex?.subcategories?.[CORE_NODES_CATEGORY] ?? []\n\t\t\t: [DEFAULT_SUBCATEGORY];\n\n\t\tsubcategories.forEach((subcategory: string) => {\n\t\t\tif (!acc[subcategory]) {\n\t\t\t\tacc[subcategory] = [];\n\t\t\t}\n\t\t\tacc[subcategory].push(transformNodeType(item, subcategory));\n\t\t});\n\n\t\treturn acc;\n\t}, {});\n}\n\nexport function sortNodeCreateElements(nodes: INodeCreateElement[]) {\n\treturn nodes.sort((a, b) => {\n\t\tif (a.type !== 'node' || b.type !== 'node') return -1;\n\t\tconst displayNameA = a.properties?.displayName?.toLowerCase() || a.key;\n\t\tconst displayNameB = b.properties?.displayName?.toLowerCase() || b.key;\n\n\t\treturn displayNameA.localeCompare(displayNameB, undefined, { sensitivity: 'base' });\n\t});\n}\n\nexport function searchNodes(searchFilter: string, items: INodeCreateElement[]) {\n\t// In order to support the old search we need to remove the 'trigger' part\n\tconst trimmedFilter = searchFilter.toLowerCase().replace('trigger', '').trimEnd();\n\tconst result = (\n\t\tsublimeSearch<INodeCreateElement>(trimmedFilter, items, [\n\t\t\t{ key: 'properties.displayName', weight: 2 },\n\t\t\t{ key: 'properties.codex.alias', weight: 1 },\n\t\t]) || []\n\t).map(({ item }) => item);\n\n\treturn result;\n}\n","import { computed, ref, set } from 'vue';\nimport { defineStore } from 'pinia';\nimport { v4 as uuid } from 'uuid';\nimport type { INodeCreateElement, NodeFilterType, SimplifiedNodeType } from '@/Interface';\nimport { DEFAULT_SUBCATEGORY, TRIGGER_NODE_CREATOR_VIEW } from '@/constants';\n\nimport { useNodeCreatorStore } from '@/stores/nodeCreator.store';\n\nimport { useKeyboardNavigation } from './useKeyboardNavigation';\nimport {\n\ttransformNodeType,\n\tsubcategorizeItems,\n\tsortNodeCreateElements,\n\tsearchNodes,\n} from '../utils';\n\ninterface ViewStack {\n\tuuid?: string;\n\ttitle?: string;\n\tsubtitle?: string;\n\tsearch?: string;\n\tsubcategory?: string;\n\tnodeIcon?: {\n\t\ticonType?: string;\n\t\ticon?: string;\n\t\tcolor?: string;\n\t};\n\ticonUrl?: string;\n\trootView?: NodeFilterType;\n\tactiveIndex?: number;\n\ttransitionDirection?: 'in' | 'out';\n\thasSearch?: boolean;\n\titems?: INodeCreateElement[];\n\tbaselineItems?: INodeCreateElement[];\n\tsearchItems?: SimplifiedNodeType[];\n\tforceIncludeNodes?: string[];\n\tmode?: 'actions' | 'nodes';\n\tbaseFilter?: (item: INodeCreateElement) => boolean;\n\titemsMapper?: (item: INodeCreateElement) => INodeCreateElement;\n}\n\nexport const useViewStacks = defineStore('nodeCreatorViewStacks', () => {\n\tconst nodeCreatorStore = useNodeCreatorStore();\n\tconst { getActiveItemIndex } = useKeyboardNavigation();\n\n\tconst viewStacks = ref<ViewStack[]>([]);\n\n\tconst activeStackItems = computed<INodeCreateElement[]>(() => {\n\t\tconst stack = viewStacks.value[viewStacks.value.length - 1];\n\n\t\tif (!stack?.baselineItems) {\n\t\t\treturn stack.items ? extendItemsWithUUID(stack.items) : [];\n\t\t}\n\n\t\tif (stack.search && searchBaseItems.value) {\n\t\t\tconst searchBase =\n\t\t\t\tsearchBaseItems.value.length > 0 ? searchBaseItems.value : stack.baselineItems;\n\n\t\t\treturn extendItemsWithUUID(searchNodes(stack.search || '', searchBase));\n\t\t}\n\t\treturn extendItemsWithUUID(stack.baselineItems);\n\t});\n\n\tconst activeViewStack = computed<ViewStack>(() => {\n\t\tconst stack = viewStacks.value[viewStacks.value.length - 1];\n\t\tif (!stack) return {};\n\n\t\treturn {\n\t\t\t...stack,\n\t\t\titems: activeStackItems.value,\n\t\t\thasSearch: (stack.baselineItems || []).length > 8 || stack?.hasSearch,\n\t\t};\n\t});\n\n\tconst activeViewStackMode = computed(\n\t\t() => activeViewStack.value.mode || TRIGGER_NODE_CREATOR_VIEW,\n\t);\n\n\tconst searchBaseItems = computed<INodeCreateElement[]>(() => {\n\t\tconst stack = viewStacks.value[viewStacks.value.length - 1];\n\t\tif (!stack || !stack.searchItems) return [];\n\n\t\treturn stack.searchItems.map((item) => transformNodeType(item, stack.subcategory));\n\t});\n\n\t// Generate a delta between the global search results(all nodes) and the stack search results\n\tconst globalSearchItemsDiff = computed<INodeCreateElement[]>(() => {\n\t\tconst stack = viewStacks.value[viewStacks.value.length - 1];\n\t\tif (!stack || !stack.search) return [];\n\n\t\tconst allNodes = nodeCreatorStore.mergedNodes.map((item) => transformNodeType(item));\n\t\tconst globalSearchResult = extendItemsWithUUID(searchNodes(stack.search || '', allNodes));\n\n\t\treturn globalSearchResult.filter((item) => {\n\t\t\treturn !activeStackItems.value.find((activeItem) => activeItem.key === item.key);\n\t\t});\n\t});\n\n\tfunction setStackBaselineItems() {\n\t\tconst stack = viewStacks.value[viewStacks.value.length - 1];\n\t\tif (!stack || !activeViewStack.value.uuid) return;\n\n\t\tconst subcategorizedItems = subcategorizeItems(nodeCreatorStore.mergedNodes);\n\t\tlet stackItems =\n\t\t\tstack?.items ?? subcategorizedItems[stack?.subcategory ?? DEFAULT_SUBCATEGORY] ?? [];\n\n\t\t// Ensure that the nodes specified in `stack.forceIncludeNodes` are always included,\n\t\t// regardless of whether the subcategory is matched\n\t\tif ((stack.forceIncludeNodes ?? []).length > 0) {\n\t\t\tconst matchedNodes = nodeCreatorStore.mergedNodes\n\t\t\t\t.filter((item) => stack.forceIncludeNodes?.includes(item.name))\n\t\t\t\t.map((item) => transformNodeType(item, stack.subcategory));\n\n\t\t\tstackItems.push(...matchedNodes);\n\t\t}\n\n\t\tif (stack.baseFilter) {\n\t\t\tstackItems = stackItems.filter(stack.baseFilter);\n\t\t}\n\n\t\tif (stack.itemsMapper) {\n\t\t\tstackItems = stackItems.map(stack.itemsMapper);\n\t\t}\n\n\t\t// Sort only if non-root view\n\t\tif (!stack.items) {\n\t\t\tsortNodeCreateElements(stackItems);\n\t\t}\n\n\t\tupdateCurrentViewStack({ baselineItems: stackItems });\n\t}\n\n\tfunction extendItemsWithUUID(items: INodeCreateElement[]) {\n\t\treturn items.map((item) => ({\n\t\t\t...item,\n\t\t\tuuid: `${item.key}-${uuid()}`,\n\t\t}));\n\t}\n\n\tfunction pushViewStack(stack: ViewStack) {\n\t\tif (activeViewStack.value.uuid) {\n\t\t\tupdateCurrentViewStack({ activeIndex: getActiveItemIndex() });\n\t\t}\n\n\t\tconst newStackUuid = uuid();\n\t\tviewStacks.value.push({\n\t\t\t...stack,\n\t\t\tuuid: newStackUuid,\n\t\t\ttransitionDirection: 'in',\n\t\t\tactiveIndex: 0,\n\t\t});\n\t\tsetStackBaselineItems();\n\t}\n\n\tfunction popViewStack() {\n\t\tif (activeViewStack.value.uuid) {\n\t\t\tviewStacks.value.pop();\n\t\t\tupdateCurrentViewStack({ transitionDirection: 'out' });\n\t\t}\n\t}\n\n\tfunction updateCurrentViewStack(stack: Partial<ViewStack>) {\n\t\tconst currentStack = viewStacks.value[viewStacks.value.length - 1];\n\t\tconst matchedIndex = viewStacks.value.findIndex((s) => s.uuid === currentStack.uuid);\n\t\tif (!currentStack) return;\n\n\t\t// For each key in the stack, update the matched stack\n\t\tObject.keys(stack).forEach((key) => {\n\t\t\tconst typedKey = key as keyof ViewStack;\n\t\t\tset(viewStacks.value[matchedIndex], key, stack[typedKey]);\n\t\t});\n\t}\n\n\tfunction resetViewStacks() {\n\t\tviewStacks.value = [];\n\t}\n\n\treturn {\n\t\tviewStacks,\n\t\tactiveViewStack,\n\t\tactiveViewStackMode,\n\t\tglobalSearchItemsDiff,\n\t\tresetViewStacks,\n\t\tupdateCurrentViewStack,\n\t\tpushViewStack,\n\t\tpopViewStack,\n\t};\n});\n","import { startCase } from 'lodash-es';\nimport type {\n\tINodePropertyCollection,\n\tINodePropertyOptions,\n\tINodeProperties,\n\tINodeTypeDescription,\n} from 'n8n-workflow';\nimport { deepCopy } from 'n8n-workflow';\nimport { CUSTOM_API_CALL_KEY } from '@/constants';\nimport type { ActionTypeDescription, SimplifiedNodeType, ActionsRecord } from '@/Interface';\n\nimport { i18n } from '@/plugins/i18n';\n\nconst PLACEHOLDER_RECOMMENDED_ACTION_KEY = 'placeholder_recommended';\n\nconst customNodeActionsParsers: {\n\t[key: string]: (\n\t\tmatchedProperty: INodeProperties,\n\t\tnodeTypeDescription: INodeTypeDescription,\n\t) => ActionTypeDescription[] | undefined;\n} = {\n\t['n8n-nodes-base.hubspotTrigger']: (matchedProperty, nodeTypeDescription) => {\n\t\tconst collection = matchedProperty?.options?.[0] as INodePropertyCollection;\n\n\t\treturn (collection?.values[0]?.options as INodePropertyOptions[])?.map(\n\t\t\t(categoryItem): ActionTypeDescription => ({\n\t\t\t\t...getNodeTypeBase(nodeTypeDescription),\n\t\t\t\tactionKey: categoryItem.value as string,\n\t\t\t\tdisplayName: i18n.baseText('nodeCreator.actionsCategory.onEvent', {\n\t\t\t\t\tinterpolate: { event: startCase(categoryItem.name) },\n\t\t\t\t}),\n\t\t\t\tdescription: categoryItem.description || '',\n\t\t\t\tdisplayOptions: matchedProperty.displayOptions,\n\t\t\t\tvalues: { eventsUi: { eventValues: [{ name: categoryItem.value }] } },\n\t\t\t}),\n\t\t);\n\t},\n};\n\nfunction getNodeTypeBase(nodeTypeDescription: INodeTypeDescription, label?: string) {\n\tconst isTrigger = nodeTypeDescription.group.includes('trigger');\n\tconst category = isTrigger\n\t\t? i18n.baseText('nodeCreator.actionsCategory.triggers')\n\t\t: i18n.baseText('nodeCreator.actionsCategory.actions');\n\treturn {\n\t\tname: nodeTypeDescription.name,\n\t\tgroup: nodeTypeDescription.group,\n\t\tcodex: {\n\t\t\tlabel: label || '',\n\t\t\tcategories: [category],\n\t\t},\n\t\ticonUrl: nodeTypeDescription.iconUrl,\n\t\ticon: nodeTypeDescription.icon,\n\t\tdefaults: nodeTypeDescription.defaults,\n\t};\n}\n\nfunction operationsCategory(nodeTypeDescription: INodeTypeDescription): ActionTypeDescription[] {\n\tif (!!nodeTypeDescription.properties.find((property) => property.name === 'resource')) return [];\n\n\tconst matchedProperty = nodeTypeDescription.properties.find(\n\t\t(property) => property.name?.toLowerCase() === 'operation',\n\t);\n\n\tif (!matchedProperty || !matchedProperty.options) return [];\n\n\tconst filteredOutItems = (matchedProperty.options as INodePropertyOptions[]).filter(\n\t\t(categoryItem: INodePropertyOptions) => !['*', '', ' '].includes(categoryItem.name),\n\t);\n\n\tconst items = filteredOutItems.map((item: INodePropertyOptions) => ({\n\t\t...getNodeTypeBase(nodeTypeDescription),\n\t\tactionKey: item.value as string,\n\t\tdisplayName: item.action ?? startCase(item.name),\n\t\tdescription: item.description ?? '',\n\t\tdisplayOptions: matchedProperty.displayOptions,\n\t\tvalues: {\n\t\t\t[matchedProperty.name]: matchedProperty.type === 'multiOptions' ? [item.value] : item.value,\n\t\t},\n\t}));\n\n\t// Do not return empty category\n\tif (items.length === 0) return [];\n\n\treturn items;\n}\n\nfunction triggersCategory(nodeTypeDescription: INodeTypeDescription): ActionTypeDescription[] {\n\tconst matchingKeys = ['event', 'events', 'trigger on'];\n\tconst isTrigger = nodeTypeDescription.displayName?.toLowerCase().includes('trigger');\n\tconst matchedProperty = nodeTypeDescription.properties.find((property) =>\n\t\tmatchingKeys.includes(property.displayName?.toLowerCase()),\n\t);\n\n\tif (!isTrigger) return [];\n\n\t// Inject placeholder action if no events are available\n\t// so user is able to add node to the canvas from the actions panel\n\tif (!matchedProperty || !matchedProperty.options) {\n\t\treturn [\n\t\t\t{\n\t\t\t\t...getNodeTypeBase(nodeTypeDescription),\n\t\t\t\tactionKey: PLACEHOLDER_RECOMMENDED_ACTION_KEY,\n\t\t\t\tdisplayName: i18n.baseText('nodeCreator.actionsCategory.onNewEvent', {\n\t\t\t\t\tinterpolate: { event: nodeTypeDescription.displayName.replace('Trigger', '').trimEnd() },\n\t\t\t\t}),\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t];\n\t}\n\n\tconst filteredOutItems = (matchedProperty.options as INodePropertyOptions[]).filter(\n\t\t(categoryItem: INodePropertyOptions) => !['*', '', ' '].includes(categoryItem.name),\n\t);\n\n\tconst customParsedItem = customNodeActionsParsers[nodeTypeDescription.name]?.(\n\t\tmatchedProperty,\n\t\tnodeTypeDescription,\n\t);\n\n\tconst items =\n\t\tcustomParsedItem ??\n\t\tfilteredOutItems.map((categoryItem: INodePropertyOptions) => ({\n\t\t\t...getNodeTypeBase(nodeTypeDescription),\n\t\t\tactionKey: categoryItem.value as string,\n\t\t\tdisplayName:\n\t\t\t\tcategoryItem.action ??\n\t\t\t\ti18n.baseText('nodeCreator.actionsCategory.onEvent', {\n\t\t\t\t\tinterpolate: { event: startCase(categoryItem.name) },\n\t\t\t\t}),\n\t\t\tdescription: categoryItem.description || '',\n\t\t\tdisplayOptions: matchedProperty.displayOptions,\n\t\t\tvalues: {\n\t\t\t\t[matchedProperty.name]:\n\t\t\t\t\tmatchedProperty.type === 'multiOptions' ? [categoryItem.value] : categoryItem.value,\n\t\t\t},\n\t\t}));\n\n\treturn items;\n}\n\nfunction resourceCategories(nodeTypeDescription: INodeTypeDescription): ActionTypeDescription[] {\n\tconst transformedNodes: ActionTypeDescription[] = [];\n\tconst matchedProperties = nodeTypeDescription.properties.filter(\n\t\t(property) => property.displayName?.toLowerCase() === 'resource',\n\t);\n\n\tmatchedProperties.forEach((property) => {\n\t\t((property.options as INodePropertyOptions[]) || [])\n\t\t\t.filter((option) => option.value !== CUSTOM_API_CALL_KEY)\n\t\t\t.forEach((resourceOption, i, options) => {\n\t\t\t\tconst isSingleResource = options.length === 1;\n\n\t\t\t\t// Match operations for the resource by checking if displayOptions matches or contains the resource name\n\t\t\t\tconst operations = nodeTypeDescription.properties.find(\n\t\t\t\t\t(operation) =>\n\t\t\t\t\t\toperation.name === 'operation' &&\n\t\t\t\t\t\t(operation.displayOptions?.show?.resource?.includes(resourceOption.value) ||\n\t\t\t\t\t\t\tisSingleResource),\n\t\t\t\t);\n\n\t\t\t\tif (!operations?.options) return;\n\n\t\t\t\tconst items = ((operations.options as INodePropertyOptions[]) || []).map(\n\t\t\t\t\t(operationOption) => {\n\t\t\t\t\t\tconst displayName =\n\t\t\t\t\t\t\toperationOption.action ?? `${resourceOption.name} ${startCase(operationOption.name)}`;\n\n\t\t\t\t\t\t// We need to manually populate displayOptions as they are not present in the node description\n\t\t\t\t\t\t// if the resource has only one option\n\t\t\t\t\t\tconst displayOptions = isSingleResource\n\t\t\t\t\t\t\t? { show: { resource: [(options as INodePropertyOptions[])[0]?.value] } }\n\t\t\t\t\t\t\t: operations?.displayOptions;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...getNodeTypeBase(\n\t\t\t\t\t\t\t\tnodeTypeDescription,\n\t\t\t\t\t\t\t\t`${resourceOption.name} ${i18n.baseText('nodeCreator.actionsCategory.actions')}`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tactionKey: operationOption.value as string,\n\t\t\t\t\t\t\tdescription: operationOption?.description ?? '',\n\t\t\t\t\t\t\tdisplayOptions,\n\t\t\t\t\t\t\tvalues: {\n\t\t\t\t\t\t\t\toperation:\n\t\t\t\t\t\t\t\t\toperations?.type === 'multiOptions'\n\t\t\t\t\t\t\t\t\t\t? [operationOption.value]\n\t\t\t\t\t\t\t\t\t\t: operationOption.value,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdisplayName,\n\t\t\t\t\t\t\tgroup: ['trigger'],\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\ttransformedNodes.push(...items);\n\t\t\t});\n\t});\n\n\treturn transformedNodes;\n}\n\nexport function useActionsGenerator() {\n\tfunction generateNodeActions(node: INodeTypeDescription | undefined) {\n\t\tif (!node) return [];\n\t\treturn [...triggersCategory(node), ...operationsCategory(node), ...resourceCategories(node)];\n\t}\n\tfunction filterActions(actions: ActionTypeDescription[]) {\n\t\t// Do not show single action nodes\n\t\tif (actions.length <= 1) return [];\n\t\treturn actions.filter(\n\t\t\t(action: ActionTypeDescription, _: number, arr: ActionTypeDescription[]) => {\n\t\t\t\tconst isApiCall = action.actionKey === CUSTOM_API_CALL_KEY;\n\t\t\t\tif (isApiCall) return false;\n\n\t\t\t\tconst isPlaceholderTriggerAction = action.actionKey === PLACEHOLDER_RECOMMENDED_ACTION_KEY;\n\t\t\t\treturn !isPlaceholderTriggerAction || (isPlaceholderTriggerAction && arr.length > 1);\n\t\t\t},\n\t\t);\n\t}\n\n\tfunction getSimplifiedNodeType(node: INodeTypeDescription): SimplifiedNodeType {\n\t\tconst { displayName, defaults, description, name, group, icon, iconUrl, codex } = node;\n\n\t\treturn {\n\t\t\tdisplayName,\n\t\t\tdefaults,\n\t\t\tdescription,\n\t\t\tname,\n\t\t\tgroup,\n\t\t\ticon,\n\t\t\ticonUrl,\n\t\t\tcodex,\n\t\t};\n\t}\n\n\tfunction generateMergedNodesAndActions(nodeTypes: INodeTypeDescription[]) {\n\t\tconst visibleNodeTypes = deepCopy(nodeTypes);\n\t\tconst actions: ActionsRecord<typeof mergedNodes> = {};\n\t\tconst mergedNodes: SimplifiedNodeType[] = [];\n\n\t\tvisibleNodeTypes\n\t\t\t.filter((node) => !node.group.includes('trigger'))\n\t\t\t.forEach((app) => {\n\t\t\t\tconst appActions = generateNodeActions(app);\n\t\t\t\tactions[app.name] = appActions;\n\n\t\t\t\tmergedNodes.push(getSimplifiedNodeType(app));\n\t\t\t});\n\n\t\tvisibleNodeTypes\n\t\t\t.filter((node) => node.group.includes('trigger'))\n\t\t\t.forEach((trigger) => {\n\t\t\t\tconst normalizedName = trigger.name.replace('Trigger', '');\n\t\t\t\tconst triggerActions = generateNodeActions(trigger);\n\t\t\t\tconst appActions = actions?.[normalizedName] || [];\n\t\t\t\tconst app = mergedNodes.find((node) => node.name === normalizedName);\n\n\t\t\t\tif (app && appActions?.length > 0) {\n\t\t\t\t\t// merge triggers into regular nodes that match\n\t\t\t\t\tconst mergedActions = filterActions([...appActions, ...triggerActions]);\n\t\t\t\t\tactions[normalizedName] = mergedActions;\n\n\t\t\t\t\tapp.description = trigger.description; // default to trigger description\n\t\t\t\t} else {\n\t\t\t\t\tactions[trigger.name] = filterActions(triggerActions);\n\t\t\t\t\tmergedNodes.push(getSimplifiedNodeType(trigger));\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn {\n\t\t\tactions,\n\t\t\tmergedNodes,\n\t\t};\n\t}\n\n\treturn {\n\t\tgenerateMergedNodesAndActions,\n\t};\n}\n","import {\n\tCORE_NODES_CATEGORY,\n\tWEBHOOK_NODE_TYPE,\n\tOTHER_TRIGGER_NODES_SUBCATEGORY,\n\tEXECUTE_WORKFLOW_TRIGGER_NODE_TYPE,\n\tMANUAL_TRIGGER_NODE_TYPE,\n\tSCHEDULE_TRIGGER_NODE_TYPE,\n\tREGULAR_NODE_CREATOR_VIEW,\n\tTRANSFORM_DATA_SUBCATEGORY,\n\tFILES_SUBCATEGORY,\n\tFLOWS_CONTROL_SUBCATEGORY,\n\tHELPERS_SUBCATEGORY,\n\tTRIGGER_NODE_CREATOR_VIEW,\n\tEMAIL_IMAP_NODE_TYPE,\n\tDEFAULT_SUBCATEGORY,\n} from '@/constants';\n\nexport function TriggerView($locale: any) {\n\treturn {\n\t\tvalue: TRIGGER_NODE_CREATOR_VIEW,\n\t\ttitle: $locale.baseText('nodeCreator.triggerHelperPanel.selectATrigger'),\n\t\tsubtitle: $locale.baseText('nodeCreator.triggerHelperPanel.selectATriggerDescription'),\n\t\titems: [\n\t\t\t{\n\t\t\t\tkey: DEFAULT_SUBCATEGORY,\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tproperties: {\n\t\t\t\t\tforceIncludeNodes: [WEBHOOK_NODE_TYPE, EMAIL_IMAP_NODE_TYPE],\n\t\t\t\t\ttitle: 'App Trigger Nodes',\n\t\t\t\t\ticon: 'satellite-dish',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: SCHEDULE_TRIGGER_NODE_TYPE,\n\t\t\t\ttype: 'node',\n\t\t\t\tcategory: [CORE_NODES_CATEGORY],\n\t\t\t\tproperties: {\n\t\t\t\t\tgroup: [],\n\t\t\t\t\tname: SCHEDULE_TRIGGER_NODE_TYPE,\n\t\t\t\t\tdisplayName: $locale.baseText(\n\t\t\t\t\t\t'nodeCreator.triggerHelperPanel.scheduleTriggerDisplayName',\n\t\t\t\t\t),\n\t\t\t\t\tdescription: $locale.baseText(\n\t\t\t\t\t\t'nodeCreator.triggerHelperPanel.scheduleTriggerDescription',\n\t\t\t\t\t),\n\t\t\t\t\ticon: 'fa:clock',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: WEBHOOK_NODE_TYPE,\n\t\t\t\ttype: 'node',\n\t\t\t\tcategory: [CORE_NODES_CATEGORY],\n\t\t\t\tproperties: {\n\t\t\t\t\tgroup: [],\n\t\t\t\t\tname: WEBHOOK_NODE_TYPE,\n\t\t\t\t\tdisplayName: $locale.baseText('nodeCreator.triggerHelperPanel.webhookTriggerDisplayName'),\n\t\t\t\t\tdescription: $locale.baseText('nodeCreator.triggerHelperPanel.webhookTriggerDescription'),\n\t\t\t\t\ticonData: {\n\t\t\t\t\t\ttype: 'file',\n\t\t\t\t\t\ticon: 'webhook',\n\t\t\t\t\t\tfileBuffer: '/static/webhook-icon.svg',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: MANUAL_TRIGGER_NODE_TYPE,\n\t\t\t\ttype: 'node',\n\t\t\t\tcategory: [CORE_NODES_CATEGORY],\n\t\t\t\tproperties: {\n\t\t\t\t\tgroup: [],\n\t\t\t\t\tname: MANUAL_TRIGGER_NODE_TYPE,\n\t\t\t\t\tdisplayName: $locale.baseText('nodeCreator.triggerHelperPanel.manualTriggerDisplayName'),\n\t\t\t\t\tdescription: $locale.baseText('nodeCreator.triggerHelperPanel.manualTriggerDescription'),\n\t\t\t\t\ticon: 'fa:mouse-pointer',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: EXECUTE_WORKFLOW_TRIGGER_NODE_TYPE,\n\t\t\t\ttype: 'node',\n\t\t\t\tcategory: [CORE_NODES_CATEGORY],\n\t\t\t\tproperties: {\n\t\t\t\t\tgroup: [],\n\t\t\t\t\tname: EXECUTE_WORKFLOW_TRIGGER_NODE_TYPE,\n\t\t\t\t\tdisplayName: $locale.baseText(\n\t\t\t\t\t\t'nodeCreator.triggerHelperPanel.workflowTriggerDisplayName',\n\t\t\t\t\t),\n\t\t\t\t\tdescription: $locale.baseText(\n\t\t\t\t\t\t'nodeCreator.triggerHelperPanel.workflowTriggerDescription',\n\t\t\t\t\t),\n\t\t\t\t\ticon: 'fa:sign-out-alt',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tkey: OTHER_TRIGGER_NODES_SUBCATEGORY,\n\t\t\t\tcategory: CORE_NODES_CATEGORY,\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: OTHER_TRIGGER_NODES_SUBCATEGORY,\n\t\t\t\t\ticon: 'folder-open',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t};\n}\n\nexport function RegularView($locale: any) {\n\treturn {\n\t\tvalue: REGULAR_NODE_CREATOR_VIEW,\n\t\ttitle: $locale.baseText('nodeCreator.triggerHelperPanel.whatHappensNext'),\n\t\titems: [\n\t\t\t{\n\t\t\t\tkey: DEFAULT_SUBCATEGORY,\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: 'App Regular Nodes',\n\t\t\t\t\ticon: 'globe',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tkey: TRANSFORM_DATA_SUBCATEGORY,\n\t\t\t\tcategory: CORE_NODES_CATEGORY,\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: TRANSFORM_DATA_SUBCATEGORY,\n\t\t\t\t\ticon: 'pen',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tkey: HELPERS_SUBCATEGORY,\n\t\t\t\tcategory: CORE_NODES_CATEGORY,\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: HELPERS_SUBCATEGORY,\n\t\t\t\t\ticon: 'toolbox',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tkey: FLOWS_CONTROL_SUBCATEGORY,\n\t\t\t\tcategory: CORE_NODES_CATEGORY,\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: FLOWS_CONTROL_SUBCATEGORY,\n\t\t\t\t\ticon: 'code-branch',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'subcategory',\n\t\t\t\tkey: FILES_SUBCATEGORY,\n\t\t\t\tcategory: CORE_NODES_CATEGORY,\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: FILES_SUBCATEGORY,\n\t\t\t\t\ticon: 'file-alt',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: TRIGGER_NODE_CREATOR_VIEW,\n\t\t\t\ttype: 'view',\n\t\t\t\tproperties: {\n\t\t\t\t\ttitle: $locale.baseText('nodeCreator.triggerHelperPanel.addAnotherTrigger'),\n\t\t\t\t\ticon: 'bolt',\n\t\t\t\t\tdescription: $locale.baseText(\n\t\t\t\t\t\t'nodeCreator.triggerHelperPanel.addAnotherTriggerDescription',\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t};\n}\n","<template>\n\t<div :class=\"$style.searchContainer\" data-test-id=\"search-bar\">\n\t\t<div :class=\"{ [$style.prefix]: true, [$style.active]: value.length > 0 }\">\n\t\t\t<font-awesome-icon icon=\"search\" size=\"sm\" />\n\t\t</div>\n\t\t<div :class=\"$style.text\">\n\t\t\t<input\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t:value=\"value\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t\t:class=\"$style.input\"\n\t\t\t\tref=\"inputRef\"\n\t\t\t\tautofocus\n\t\t\t\tdata-test-id=\"node-creator-search-bar\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t/>\n\t\t</div>\n\t\t<div :class=\"$style.suffix\" v-if=\"value.length > 0\" @click=\"clear\">\n\t\t\t<button :class=\"[$style.clear, $style.clickable]\">\n\t\t\t\t<font-awesome-icon icon=\"times-circle\" />\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, reactive, toRefs, onBeforeUnmount } from 'vue';\nimport { useWebhooksStore } from '@/stores/webhooks.store';\nimport { runExternalHook } from '@/utils';\n\nexport interface Props {\n\tplaceholder: string;\n\tvalue: string;\n}\n\nwithDefaults(defineProps<Props>(), {\n\tplaceholder: '',\n\tvalue: '',\n});\n\nconst emit = defineEmits<{\n\t(event: 'input', value: string): void;\n}>();\n\nconst state = reactive({\n\tinputRef: null as HTMLInputElement | null,\n});\n\nfunction focus() {\n\tstate.inputRef?.focus();\n}\n\nfunction onInput(event: Event) {\n\tconst input = event.target as HTMLInputElement;\n\temit('input', input.value);\n}\n\nfunction clear() {\n\temit('input', '');\n}\n\nonMounted(() => {\n\tvoid runExternalHook('nodeCreator_searchBar.mount', useWebhooksStore(), {\n\t\tinputRef: state.inputRef,\n\t});\n\tsetTimeout(focus, 0);\n});\n\nonBeforeUnmount(() => {\n\tstate.inputRef?.remove();\n});\n\nconst { inputRef } = toRefs(state);\ndefineExpose({\n\tfocus,\n});\n</script>\n\n<style lang=\"scss\" module>\n.searchContainer {\n\tdisplay: flex;\n\theight: 40px;\n\tpadding: 0 var(--spacing-xs);\n\talign-items: center;\n\tmargin: var(--search-margin, var(--spacing-s));\n\tfilter: drop-shadow(0px 2px 5px rgba(46, 46, 50, 0.04));\n\n\tborder: 1px solid $node-creator-border-color;\n\tbackground-color: $node-creator-search-background-color;\n\tcolor: $node-creator-search-placeholder-color;\n\tborder-radius: 4px;\n\n\t&:focus-within {\n\t\tborder-color: var(--color-secondary);\n\t}\n}\n\n.prefix {\n\ttext-align: center;\n\tfont-size: var(--font-size-m);\n\tmargin-right: var(--spacing-xs);\n\n\t&.active {\n\t\tcolor: $color-primary !important;\n\t}\n}\n\n.text {\n\tflex-grow: 1;\n\n\tinput {\n\t\twidth: 100%;\n\t\tborder: none;\n\t\toutline: none;\n\t\tfont-size: var(--font-size-s);\n\t\tappearance: none;\n\t\tbackground-color: var(--color-background-xlight);\n\t\tcolor: var(--color-text-dark);\n\n\t\t&::placeholder,\n\t\t&::-webkit-input-placeholder {\n\t\t\tcolor: $node-creator-search-placeholder-color;\n\t\t}\n\t}\n}\n\n.suffix {\n\tmin-width: 20px;\n\ttext-align: right;\n\tdisplay: inline-block;\n}\n\n.clear {\n\tbackground-color: $node-creator-search-clear-color;\n\tpadding: 0;\n\tborder: none;\n\tcursor: pointer;\n\n\tsvg path {\n\t\tfill: $node-creator-search-clear-background-color;\n\t}\n\n\t&:hover svg path {\n\t\tfill: $node-creator-search-clear-background-color-hover;\n\t}\n}\n</style>\n","import { getCurrentInstance, computed } from 'vue';\nimport type { IDataObject, INodeParameters } from 'n8n-workflow';\nimport type {\n\tActionTypeDescription,\n\tINodeCreateElement,\n\tIUpdateInformation,\n\tLabelCreateElement,\n} from '@/Interface';\nimport {\n\tMANUAL_TRIGGER_NODE_TYPE,\n\tNODE_CREATOR_OPEN_SOURCES,\n\tSCHEDULE_TRIGGER_NODE_TYPE,\n\tSTICKY_NODE_TYPE,\n\tTRIGGER_NODE_CREATOR_VIEW,\n\tWEBHOOK_NODE_TYPE,\n} from '@/constants';\n\nimport type { BaseTextKey } from '@/plugins/i18n';\nimport type { Telemetry } from '@/plugins/telemetry';\nimport { useNodeCreatorStore } from '@/stores/nodeCreator.store';\nimport { useWorkflowsStore } from '@/stores/workflows.store';\nimport { useNodeTypesStore } from '@/stores/nodeTypes.store';\nimport { runExternalHook } from '@/utils';\nimport { useWebhooksStore } from '@/stores/webhooks.store';\n\nimport { sortNodeCreateElements, transformNodeType } from '../utils';\n\nexport const useActions = () => {\n\tconst nodeCreatorStore = useNodeCreatorStore();\n\tconst instance = getCurrentInstance();\n\n\tconst actionsCategoryLocales = computed(() => {\n\t\treturn {\n\t\t\tactions: instance?.proxy.$locale.baseText('nodeCreator.actionsCategory.actions') ?? '',\n\t\t\ttriggers: instance?.proxy.$locale.baseText('nodeCreator.actionsCategory.triggers') ?? '',\n\t\t};\n\t});\n\n\tfunction getPlaceholderTriggerActions(subcategory: string) {\n\t\tconst nodes = [WEBHOOK_NODE_TYPE, SCHEDULE_TRIGGER_NODE_TYPE];\n\n\t\tconst matchedNodeTypes = nodeCreatorStore.mergedNodes\n\t\t\t.filter((node) => nodes.some((n) => n === node.name))\n\t\t\t.map((node) => {\n\t\t\t\tconst transformed = transformNodeType(node, subcategory, 'action');\n\n\t\t\t\tif (transformed.type === 'action') {\n\t\t\t\t\tconst nameBase = node.name.replace('n8n-nodes-base.', '');\n\t\t\t\t\tconst localeKey = `nodeCreator.actionsPlaceholderNode.${nameBase}` as BaseTextKey;\n\t\t\t\t\tconst overwriteLocale = instance?.proxy.$locale.baseText(localeKey) as string;\n\n\t\t\t\t\t// If the locale key is not the same as the node name, it means it contain a translation\n\t\t\t\t\t// and we should use it\n\t\t\t\t\tif (overwriteLocale !== localeKey) {\n\t\t\t\t\t\ttransformed.properties.displayName = overwriteLocale;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn transformed;\n\t\t\t});\n\n\t\treturn matchedNodeTypes;\n\t}\n\n\tfunction filterActionsCategory(items: INodeCreateElement[], category: string) {\n\t\treturn items.filter(\n\t\t\t(item) => item.type === 'action' && item.properties.codex.categories.includes(category),\n\t\t);\n\t}\n\n\tfunction injectActionsLabels(items: INodeCreateElement[]): INodeCreateElement[] {\n\t\tconst extendedActions = sortNodeCreateElements([...items]);\n\t\tconst labelsSet = new Set<string>();\n\n\t\t// Collect unique labels\n\t\tfor (const action of extendedActions) {\n\t\t\tif (action.type !== 'action') continue;\n\t\t\tconst label = action.properties?.codex?.label;\n\t\t\tlabelsSet.add(label);\n\t\t}\n\n\t\tif (labelsSet.size <= 1) return extendedActions;\n\n\t\t// Create a map to store the first index of each label\n\t\tconst firstIndexMap = new Map<string, number>();\n\n\t\t// Iterate through the extendedActions to find the first index of each label\n\t\tfor (let i = 0; i < extendedActions.length; i++) {\n\t\t\tconst action = extendedActions[i];\n\t\t\tif (action.type !== 'action') continue;\n\t\t\tconst label = action.properties?.codex?.label;\n\t\t\tif (!firstIndexMap.has(label)) {\n\t\t\t\tfirstIndexMap.set(label, i);\n\t\t\t}\n\t\t}\n\n\t\t// Keep track of the number of inserted labels\n\t\tlet insertedLabels = 0;\n\n\t\t// Create and insert new label objects at the first index of each label\n\t\tfor (const label of labelsSet) {\n\t\t\tconst newLabel: LabelCreateElement = {\n\t\t\t\tuuid: label,\n\t\t\t\ttype: 'label',\n\t\t\t\tkey: label,\n\t\t\t\tsubcategory: extendedActions[0].key,\n\t\t\t\tproperties: {\n\t\t\t\t\tkey: label,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst insertIndex = firstIndexMap.get(label)! + insertedLabels;\n\t\t\textendedActions.splice(insertIndex, 0, newLabel);\n\t\t\tinsertedLabels++;\n\t\t}\n\n\t\treturn extendedActions;\n\t}\n\n\tfunction parseCategoryActions(\n\t\tactions: INodeCreateElement[],\n\t\tcategory: string,\n\t\twithLabels = true,\n\t) {\n\t\tconst filteredActions = filterActionsCategory(actions, category);\n\t\tif (withLabels) return injectActionsLabels(filteredActions);\n\t\treturn filteredActions;\n\t}\n\n\tfunction getActionData(actionItem: ActionTypeDescription): IUpdateInformation {\n\t\tconst displayOptions = actionItem.displayOptions;\n\n\t\tconst displayConditions = Object.keys(displayOptions?.show || {}).reduce(\n\t\t\t(acc: IDataObject, showCondition: string) => {\n\t\t\t\tacc[showCondition] = displayOptions?.show?.[showCondition]?.[0];\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{},\n\t\t);\n\n\t\treturn {\n\t\t\tname: actionItem.displayName,\n\t\t\tkey: actionItem.name as string,\n\t\t\tvalue: { ...actionItem.values, ...displayConditions } as INodeParameters,\n\t\t};\n\t}\n\n\tfunction getNodeTypesWithManualTrigger(nodeType?: string): string[] {\n\t\tif (!nodeType) return [];\n\n\t\tconst { selectedView, openSource } = useNodeCreatorStore();\n\t\tconst { workflowTriggerNodes } = useWorkflowsStore();\n\t\tconst isTrigger = useNodeTypesStore().isTriggerNode(nodeType);\n\t\tconst workflowContainsTrigger = workflowTriggerNodes.length > 0;\n\t\tconst isTriggerPanel = selectedView === TRIGGER_NODE_CREATOR_VIEW;\n\t\tconst isStickyNode = nodeType === STICKY_NODE_TYPE;\n\t\tconst singleNodeOpenSources = [\n\t\t\tNODE_CREATOR_OPEN_SOURCES.PLUS_ENDPOINT,\n\t\t\tNODE_CREATOR_OPEN_SOURCES.NODE_CONNECTION_ACTION,\n\t\t\tNODE_CREATOR_OPEN_SOURCES.NODE_CONNECTION_DROP,\n\t\t];\n\n\t\t// If the node creator was opened from the plus endpoint, node connection action, or node connection drop\n\t\t// then we do not want to append the manual trigger\n\t\tconst isSingleNodeOpenSource = singleNodeOpenSources.includes(openSource);\n\t\tconst shouldAppendManualTrigger =\n\t\t\t!isSingleNodeOpenSource &&\n\t\t\t!isTrigger &&\n\t\t\t!workflowContainsTrigger &&\n\t\t\tisTriggerPanel &&\n\t\t\t!isStickyNode;\n\n\t\tconst nodeTypes = shouldAppendManualTrigger ? [MANUAL_TRIGGER_NODE_TYPE, nodeType] : [nodeType];\n\n\t\treturn nodeTypes;\n\t}\n\n\t// Hook into addNode action to set the last node parameters & track the action selected\n\tfunction setAddedNodeActionParameters(\n\t\taction: IUpdateInformation,\n\t\ttelemetry?: Telemetry,\n\t\trootView = '',\n\t) {\n\t\tconst { $onAction: onWorkflowStoreAction } = useWorkflowsStore();\n\t\tconst storeWatcher = onWorkflowStoreAction(\n\t\t\t({ name, after, store: { setLastNodeParameters }, args }) => {\n\t\t\t\tif (name !== 'addNode' || args[0].type !== action.key) return;\n\t\t\t\tafter(() => {\n\t\t\t\t\tsetLastNodeParameters(action);\n\t\t\t\t\tif (telemetry) trackActionSelected(action, telemetry, rootView);\n\t\t\t\t\t// Unsubscribe from the store watcher\n\t\t\t\t\tstoreWatcher();\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\n\t\treturn storeWatcher;\n\t}\n\n\tfunction trackActionSelected(action: IUpdateInformation, telemetry: Telemetry, rootView: string) {\n\t\tconst payload = {\n\t\t\tnode_type: action.key,\n\t\t\taction: action.name,\n\t\t\tsource_mode: rootView.toLowerCase(),\n\t\t\tresource: (action.value as INodeParameters).resource || '',\n\t\t};\n\t\tvoid runExternalHook('nodeCreateList.addAction', useWebhooksStore(), payload);\n\t\ttelemetry?.trackNodesPanel('nodeCreateList.addAction', payload);\n\t}\n\n\treturn {\n\t\tactionsCategoryLocales,\n\t\tgetPlaceholderTriggerActions,\n\t\tparseCategoryActions,\n\t\tgetNodeTypesWithManualTrigger,\n\t\tgetActionData,\n\t\tsetAddedNodeActionParameters,\n\t};\n};\n","<template>\n\t<!-- Node Item is draggable only if it doesn't contain actions -->\n\t<n8n-node-creator-node\n\t\t:draggable=\"!showActionArrow\"\n\t\t@dragstart=\"onDragStart\"\n\t\t@dragend=\"onDragEnd\"\n\t\t:class=\"$style.nodeItem\"\n\t\t:description=\"subcategory !== DEFAULT_SUBCATEGORY ? description : ''\"\n\t\t:title=\"displayName\"\n\t\t:show-action-arrow=\"showActionArrow\"\n\t\t:is-trigger=\"isTrigger\"\n\t>\n\t\t<template #icon>\n\t\t\t<node-icon :nodeType=\"nodeType\" />\n\t\t</template>\n\n\t\t<template #tooltip v-if=\"isCommunityNode\">\n\t\t\t<p\n\t\t\t\t:class=\"$style.communityNodeIcon\"\n\t\t\t\tv-html=\"\n\t\t\t\t\t$locale.baseText('generic.communityNode.tooltip', {\n\t\t\t\t\t\tinterpolate: {\n\t\t\t\t\t\t\tpackageName: nodeType.name.split('.')[0],\n\t\t\t\t\t\t\tdocURL: COMMUNITY_NODES_INSTALLATION_DOCS_URL,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\"\n\t\t\t\t@click=\"onCommunityNodeTooltipClick\"\n\t\t\t/>\n\t\t</template>\n\t\t<template #dragContent>\n\t\t\t<div :class=\"$style.draggableDataTransfer\" ref=\"draggableDataTransfer\" />\n\t\t\t<div :class=\"$style.draggable\" :style=\"draggableStyle\" v-show=\"dragging\">\n\t\t\t\t<node-icon :nodeType=\"nodeType\" @click.capture.stop :size=\"40\" :shrink=\"false\" />\n\t\t\t</div>\n\t\t</template>\n\t</n8n-node-creator-node>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, getCurrentInstance } from 'vue';\nimport type { SimplifiedNodeType } from '@/Interface';\nimport { COMMUNITY_NODES_INSTALLATION_DOCS_URL, DEFAULT_SUBCATEGORY } from '@/constants';\n\nimport { isCommunityPackageName } from '@/utils';\nimport { getNewNodePosition, NODE_SIZE } from '@/utils/nodeViewUtils';\nimport { useNodeCreatorStore } from '@/stores/nodeCreator.store';\nimport NodeIcon from '@/components/NodeIcon.vue';\n\nimport { useActions } from '../composables/useActions';\n\nexport interface Props {\n\tnodeType: SimplifiedNodeType;\n\tsubcategory?: string;\n\tactive?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n\tactive: false,\n});\n\nconst { actions } = useNodeCreatorStore();\nconst { getNodeTypesWithManualTrigger } = useActions();\nconst instance = getCurrentInstance();\n\nconst dragging = ref(false);\nconst draggablePosition = ref({ x: -100, y: -100 });\nconst draggableDataTransfer = ref(null as Element | null);\n\nconst description = computed<string>(() => {\n\treturn instance?.proxy.$locale.headerText({\n\t\tkey: `headers.${shortNodeType.value}.description`,\n\t\tfallback: props.nodeType.description,\n\t}) as string;\n});\nconst showActionArrow = computed(() => hasActions.value);\n\nconst hasActions = computed(() => {\n\treturn nodeActions.value.length > 1;\n});\n\nconst nodeActions = computed(() => {\n\tconst nodeActions = actions[props.nodeType.name] || [];\n\treturn nodeActions;\n});\n\nconst shortNodeType = computed<string>(\n\t() => instance?.proxy.$locale.shortNodeType(props.nodeType.name) || '',\n);\n\nconst draggableStyle = computed<{ top: string; left: string }>(() => ({\n\ttop: `${draggablePosition.value.y}px`,\n\tleft: `${draggablePosition.value.x}px`,\n}));\n\nconst isCommunityNode = computed<boolean>(() => isCommunityPackageName(props.nodeType.name));\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst displayName = computed<any>(() => {\n\tconst displayName = props.nodeType.displayName.trimEnd();\n\n\treturn instance?.proxy.$locale.headerText({\n\t\tkey: `headers.${shortNodeType}.displayName`,\n\t\tfallback: hasActions.value ? displayName.replace('Trigger', '') : displayName,\n\t});\n});\n\nconst isTrigger = computed<boolean>(() => {\n\treturn props.nodeType.group.includes('trigger') && !hasActions.value;\n});\nfunction onDragStart(event: DragEvent): void {\n\t/**\n\t * Workaround for firefox, that doesn't attach the pageX and pageY coordinates to \"ondrag\" event.\n\t * All browsers attach the correct page coordinates to the \"dragover\" event.\n\t * @bug https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t */\n\tdocument.body.addEventListener('dragover', onDragOver);\n\n\tconst { pageX: x, pageY: y } = event;\n\n\tif (event.dataTransfer) {\n\t\tevent.dataTransfer.effectAllowed = 'copy';\n\t\tevent.dataTransfer.dropEffect = 'copy';\n\t\tevent.dataTransfer.setDragImage(draggableDataTransfer.value as Element, 0, 0);\n\t\tevent.dataTransfer.setData(\n\t\t\t'nodeTypeName',\n\t\t\tgetNodeTypesWithManualTrigger(props.nodeType.name).join(','),\n\t\t);\n\t}\n\n\tdragging.value = true;\n\tdraggablePosition.value = { x, y };\n}\n\nfunction onDragOver(event: DragEvent): void {\n\tif (!dragging.value || (event.pageX === 0 && event.pageY === 0)) {\n\t\treturn;\n\t}\n\n\tconst [x, y] = getNewNodePosition([], [event.pageX - NODE_SIZE / 2, event.pageY - NODE_SIZE / 2]);\n\n\tdraggablePosition.value = { x, y };\n}\n\nfunction onDragEnd(event: DragEvent): void {\n\tdocument.body.removeEventListener('dragover', onDragOver);\n\n\tdragging.value = false;\n\tsetTimeout(() => {\n\t\tdraggablePosition.value = { x: -100, y: -100 };\n\t}, 300);\n}\n\nfunction onCommunityNodeTooltipClick(event: MouseEvent) {\n\tif ((event.target as Element).localName === 'a') {\n\t\tinstance?.proxy.$telemetry.track('user clicked cnr docs link', { source: 'nodes panel node' });\n\t}\n}\n</script>\n<style lang=\"scss\" module>\n.nodeItem {\n\t--trigger-icon-background-color: #{$trigger-icon-background-color};\n\t--trigger-icon-border-color: #{$trigger-icon-border-color};\n\tmargin-left: 15px;\n\tmargin-right: 12px;\n\tuser-select: none;\n}\n\n.communityNodeIcon {\n\tvertical-align: top;\n}\n\n.draggable {\n\twidth: 100px;\n\theight: 100px;\n\tposition: fixed;\n\tz-index: 1;\n\topacity: 0.66;\n\tborder: 2px solid var(--color-foreground-xdark);\n\tborder-radius: var(--border-radius-large);\n\tbackground-color: var(--color-background-xlight);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.draggableDataTransfer {\n\twidth: 1px;\n\theight: 1px;\n}\n</style>\n","<template>\n\t<n8n-node-creator-node\n\t\t:class=\"$style.subCategory\"\n\t\t:title=\"$locale.baseText(`nodeCreator.subcategoryNames.${subcategoryName}`)\"\n\t\t:isTrigger=\"false\"\n\t\t:description=\"$locale.baseText(`nodeCreator.subcategoryDescriptions.${subcategoryName}`)\"\n\t\t:showActionArrow=\"true\"\n\t>\n\t\t<template #icon>\n\t\t\t<n8n-node-icon type=\"icon\" :name=\"item.icon\" :circle=\"false\" :showTooltip=\"false\" />\n\t\t</template>\n\t</n8n-node-creator-node>\n</template>\n\n<script setup lang=\"ts\">\nimport type { SubcategoryItemProps } from '@/Interface';\nimport { camelCase } from 'lodash-es';\nimport { computed } from 'vue';\nexport interface Props {\n\titem: SubcategoryItemProps;\n}\n\nconst props = defineProps<Props>();\nconst subcategoryName = computed(() => camelCase(props.item.subcategory || props.item.title));\n</script>\n\n<style lang=\"scss\" module>\n.subCategory {\n\t--action-arrow-color: var(--color-text-light);\n\tmargin-left: 15px;\n\tmargin-right: 12px;\n}\n</style>\n","<template>\n\t<n8n-node-creator-node\n\t\t@dragstart=\"onDragStart\"\n\t\t@dragend=\"onDragEnd\"\n\t\tdraggable\n\t\t:class=\"$style.action\"\n\t\t:title=\"action.displayName\"\n\t\t:isTrigger=\"isTriggerAction(action)\"\n\t\tdata-keyboard-nav=\"true\"\n\t>\n\t\t<template #dragContent>\n\t\t\t<div :class=\"$style.draggableDataTransfer\" ref=\"draggableDataTransfer\" />\n\t\t\t<div :class=\"$style.draggable\" :style=\"draggableStyle\" v-show=\"dragging\">\n\t\t\t\t<node-icon :nodeType=\"nodeType\" @click.capture.stop :size=\"40\" :shrink=\"false\" />\n\t\t\t</div>\n\t\t</template>\n\t\t<template #icon>\n\t\t\t<node-icon :nodeType=\"action\" />\n\t\t</template>\n\t</n8n-node-creator-node>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, computed, toRefs, getCurrentInstance } from 'vue';\nimport type { ActionTypeDescription, SimplifiedNodeType } from '@/Interface';\nimport { WEBHOOK_NODE_TYPE } from '@/constants';\n\nimport { getNewNodePosition, NODE_SIZE } from '@/utils/nodeViewUtils';\nimport NodeIcon from '@/components/NodeIcon.vue';\n\nimport { useViewStacks } from '../composables/useViewStacks';\nimport { useActions } from '../composables/useActions';\n\nexport interface Props {\n\tnodeType: SimplifiedNodeType;\n\taction: ActionTypeDescription;\n}\n\nconst props = defineProps<Props>();\n\nconst instance = getCurrentInstance();\nconst telemetry = instance?.proxy.$telemetry;\n\nconst { getActionData, getNodeTypesWithManualTrigger, setAddedNodeActionParameters } = useActions();\nconst { activeViewStack } = useViewStacks();\n\nconst state = reactive({\n\tdragging: false,\n\tdraggablePosition: {\n\t\tx: -100,\n\t\ty: -100,\n\t},\n\tstoreWatcher: null as Function | null,\n\tdraggableDataTransfer: null as Element | null,\n});\n\nconst draggableStyle = computed<{ top: string; left: string }>(() => ({\n\ttop: `${state.draggablePosition.y}px`,\n\tleft: `${state.draggablePosition.x}px`,\n}));\n\nconst actionData = computed(() => getActionData(props.action));\n\nconst isTriggerAction = (action: ActionTypeDescription) =>\n\taction.name?.toLowerCase().includes('trigger') || action.name === WEBHOOK_NODE_TYPE;\n\nfunction onDragStart(event: DragEvent): void {\n\t/**\n\t * Workaround for firefox, that doesn't attach the pageX and pageY coordinates to \"ondrag\" event.\n\t * All browsers attach the correct page coordinates to the \"dragover\" event.\n\t * @bug https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t */\n\tdocument.body.addEventListener('dragover', onDragOver);\n\tconst { pageX: x, pageY: y } = event;\n\tif (event.dataTransfer) {\n\t\tevent.dataTransfer.effectAllowed = 'copy';\n\t\tevent.dataTransfer.dropEffect = 'copy';\n\t\tevent.dataTransfer.setDragImage(state.draggableDataTransfer as Element, 0, 0);\n\t\tevent.dataTransfer.setData(\n\t\t\t'nodeTypeName',\n\t\t\tgetNodeTypesWithManualTrigger(actionData.value?.key).join(','),\n\t\t);\n\t\tif (telemetry) {\n\t\t\tstate.storeWatcher = setAddedNodeActionParameters(\n\t\t\t\tactionData.value,\n\t\t\t\ttelemetry,\n\t\t\t\tactiveViewStack.rootView,\n\t\t\t);\n\t\t}\n\t\tdocument.body.addEventListener('dragend', onDragEnd);\n\t}\n\n\tstate.dragging = true;\n\tstate.draggablePosition = { x, y };\n}\n\nfunction onDragOver(event: DragEvent): void {\n\tif (!state.dragging || (event.pageX === 0 && event.pageY === 0)) {\n\t\treturn;\n\t}\n\n\tconst [x, y] = getNewNodePosition([], [event.pageX - NODE_SIZE / 2, event.pageY - NODE_SIZE / 2]);\n\n\tstate.draggablePosition = { x, y };\n}\n\nfunction onDragEnd(event: DragEvent): void {\n\tif (state.storeWatcher) state.storeWatcher();\n\tdocument.body.removeEventListener('dragend', onDragEnd);\n\tdocument.body.removeEventListener('dragover', onDragOver);\n\n\tstate.dragging = false;\n\tsetTimeout(() => {\n\t\tstate.draggablePosition = { x: -100, y: -100 };\n\t}, 300);\n}\nconst { draggableDataTransfer, dragging } = toRefs(state);\n</script>\n\n<style lang=\"scss\" module>\n.action {\n\t--node-creator-name-size: var(--font-size-2xs);\n\t--node-creator-name-weight: var(--font-weight-normal);\n\t--trigger-icon-background-color: #{$trigger-icon-background-color};\n\t--trigger-icon-border-color: #{$trigger-icon-border-color};\n\t--node-icon-size: 20px;\n\t--node-icon-margin-right: var(--spacing-xs);\n\n\tmargin-left: var(--spacing-s);\n\tmargin-right: var(--spacing-s);\n\tpadding: var(--spacing-2xs) 0;\n}\n.nodeIcon {\n\tmargin-right: var(--spacing-xs);\n}\n\n.draggable {\n\twidth: 100px;\n\theight: 100px;\n\tposition: fixed;\n\tz-index: 1;\n\topacity: 0.66;\n\tborder: 2px solid var(--color-foreground-xdark);\n\tborder-radius: var(--border-radius-large);\n\tbackground-color: var(--color-background-xlight);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.draggableDataTransfer {\n\twidth: 1px;\n\theight: 1px;\n}\n</style>\n","<script setup lang=\"ts\">\nimport type { INodeCreateElement } from '@/Interface';\nimport { onMounted, watch, onUnmounted, ref, computed } from 'vue';\n\nimport { useKeyboardNavigation } from '../composables/useKeyboardNavigation';\nimport NodeItem from '../ItemTypes/NodeItem.vue';\nimport SubcategoryItem from '../ItemTypes/SubcategoryItem.vue';\nimport LabelItem from '../ItemTypes/LabelItem.vue';\nimport ActionItem from '../ItemTypes/ActionItem.vue';\nimport ViewItem from '../ItemTypes/ViewItem.vue';\nexport interface Props {\n\telements: INodeCreateElement[];\n\tactiveIndex?: number;\n\tdisabled?: boolean;\n\tlazyRender?: boolean;\n}\n\nconst LAZY_LOAD_THRESHOLD = 20;\nconst LAZY_LOAD_ITEMS_PER_TICK = 5;\nconst props = withDefaults(defineProps<Props>(), {\n\telements: () => [],\n\tlazyRender: true,\n});\n\nconst emit = defineEmits<{\n\t(event: 'selected', element: INodeCreateElement, $e?: Event): void;\n\t(event: 'dragstart', element: INodeCreateElement, $e: Event): void;\n\t(event: 'dragend', element: INodeCreateElement, $e: Event): void;\n}>();\n\nconst renderedItems = ref<INodeCreateElement[]>([]);\nconst renderAnimationRequest = ref<number>(0);\n\nconst activeItemId = computed(() => useKeyboardNavigation()?.activeItemId);\n\n// Lazy render large items lists to prevent the browser from freezing\n// when loading many items.\nfunction renderItems() {\n\tif (props.elements.length <= LAZY_LOAD_THRESHOLD || props.lazyRender === false) {\n\t\trenderedItems.value = props.elements;\n\t\treturn;\n\t}\n\n\tif (renderedItems.value.length < props.elements.length) {\n\t\trenderedItems.value.push(\n\t\t\t...props.elements.slice(\n\t\t\t\trenderedItems.value.length,\n\t\t\t\trenderedItems.value.length + LAZY_LOAD_ITEMS_PER_TICK,\n\t\t\t),\n\t\t);\n\t\trenderAnimationRequest.value = window.requestAnimationFrame(renderItems);\n\t}\n}\n\nfunction wrappedEmit(\n\tevent: 'selected' | 'dragstart' | 'dragend',\n\telement: INodeCreateElement,\n\t$e?: Event,\n) {\n\tif (props.disabled) return;\n\n\temit((event as 'selected') || 'dragstart' || 'dragend', element, $e);\n}\n\nfunction beforeEnter(el: HTMLElement) {\n\tel.style.height = '0';\n}\n\nfunction enter(el: HTMLElement) {\n\tel.style.height = `${el.scrollHeight}px`;\n}\n\nfunction beforeLeave(el: HTMLElement) {\n\tel.style.height = `${el.scrollHeight}px`;\n}\n\nfunction leave(el: HTMLElement) {\n\tel.style.height = '0';\n}\n\nonMounted(() => {\n\trenderItems();\n});\n\nonUnmounted(() => {\n\twindow.cancelAnimationFrame(renderAnimationRequest.value);\n\trenderedItems.value = [];\n});\n\n// Make sure the active item is always visible\n// scroll if needed\nwatch(\n\t() => props.elements,\n\t() => {\n\t\twindow.cancelAnimationFrame(renderAnimationRequest.value);\n\t\trenderedItems.value = [];\n\t\trenderItems();\n\t},\n);\n</script>\n\n<template>\n\t<div\n\t\tv-if=\"elements.length > 0\"\n\t\t:class=\"$style.itemsRenderer\"\n\t\tname=\"accordion\"\n\t\t@before-enter=\"beforeEnter\"\n\t\t@enter=\"enter\"\n\t\t@before-leave=\"beforeLeave\"\n\t\t@leave=\"leave\"\n\t>\n\t\t<slot />\n\t\t<div\n\t\t\tv-for=\"item in elements\"\n\t\t\t:key=\"item.uuid\"\n\t\t\tdata-test-id=\"item-iterator-item\"\n\t\t\t:class=\"{\n\t\t\t\tclickable: !disabled,\n\t\t\t\t[$style.active]: activeItemId === item.uuid,\n\t\t\t\t[$style.iteratorItem]: true,\n\t\t\t\t[$style[item.type]]: true,\n\t\t\t}\"\n\t\t\tref=\"iteratorItems\"\n\t\t\t:data-keyboard-nav-type=\"item.type !== 'label' ? item.type : undefined\"\n\t\t\t:data-keyboard-nav-id=\"item.uuid\"\n\t\t\t@click=\"wrappedEmit('selected', item)\"\n\t\t>\n\t\t\t<template v-if=\"renderedItems.includes(item)\">\n\t\t\t\t<label-item v-if=\"item.type === 'label'\" :item=\"item\" />\n\t\t\t\t<subcategory-item v-if=\"item.type === 'subcategory'\" :item=\"item.properties\" />\n\n\t\t\t\t<node-item\n\t\t\t\t\tv-if=\"item.type === 'node'\"\n\t\t\t\t\t:nodeType=\"item.properties\"\n\t\t\t\t\t:active=\"true\"\n\t\t\t\t\t:subcategory=\"item.subcategory\"\n\t\t\t\t/>\n\n\t\t\t\t<action-item\n\t\t\t\t\tv-if=\"item.type === 'action'\"\n\t\t\t\t\t:nodeType=\"item.properties\"\n\t\t\t\t\t:action=\"item.properties\"\n\t\t\t\t\t:active=\"true\"\n\t\t\t\t/>\n\n\t\t\t\t<view-item\n\t\t\t\t\tv-else-if=\"item.type === 'view'\"\n\t\t\t\t\t:view=\"item.properties\"\n\t\t\t\t\t:class=\"$style.viewItem\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<n8n-loading :loading=\"true\" :rows=\"1\" variant=\"p\" :class=\"$style.itemSkeleton\" v-else />\n\t\t</div>\n\t</div>\n\t<div :class=\"$style.empty\" v-else>\n\t\t<slot name=\"empty\" />\n\t</div>\n</template>\n\n<style lang=\"scss\" module>\n.itemSkeleton {\n\theight: 50px;\n}\n.iteratorItem {\n\t// Make sure border is fully visible\n\tmargin-left: 1px;\n\tposition: relative;\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: -1px;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tborder-left: 2px solid transparent;\n\t}\n\t&:not(.label):not(.category):hover::before {\n\t\tborder-color: $node-creator-item-hover-border-color;\n\t}\n\n\t&.active:not(.category)::before {\n\t\tborder-color: $color-primary;\n\t}\n}\n.empty {\n\t:global([role='alert']) {\n\t\tmargin: var(--spacing-xs) var(--spacing-s);\n\t}\n}\n.itemsRenderer {\n\tdisplay: flex;\n\tflex-direction: column;\n\n\tscrollbar-width: none; /* Firefox 64 */\n\t& > *::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n}\n.view {\n\tmargin-top: var(--spacing-s);\n\tpadding-top: var(--spacing-xs);\n\tposition: relative;\n\n\t&::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: var(--spacing-s);\n\t\tright: var(--spacing-s);\n\t\ttop: 0;\n\t\tmargin: auto;\n\t\tbottom: 0;\n\t\tborder-top: 1px solid var(--color-foreground-base);\n\t}\n}\n</style>\n","<script lang=\"ts\" setup>\nimport { computed } from 'vue';\n\nexport interface Props {\n\texpanded?: boolean;\n\tactive?: boolean;\n\tcount?: number;\n\tname: string;\n\tisTrigger?: boolean;\n}\nconst props = withDefaults(defineProps<Props>(), {\n\texpanded: true,\n});\n\nconst categoryName = computed(() => {\n\tconst itemsCount = props.count || 0;\n\treturn itemsCount > 0 ? `${props.name} (${itemsCount})` : props.name;\n});\n</script>\n\n<template>\n\t<div\n\t\t:class=\"$style.categoryWrapper\"\n\t\tv-on=\"$listeners\"\n\t\tdata-keyboard-nav=\"true\"\n\t\tdata-test-id=\"node-creator-category-item\"\n\t>\n\t\t<div :class=\"{ [$style.category]: true, [$style.active]: active }\">\n\t\t\t<span :class=\"$style.name\">\n\t\t\t\t<span v-text=\"categoryName\" />\n\t\t\t\t<font-awesome-icon icon=\"bolt\" v-if=\"isTrigger\" size=\"xs\" :class=\"$style.triggerIcon\" />\n\t\t\t\t<slot />\n\t\t\t</span>\n\t\t\t<font-awesome-icon v-if=\"expanded\" icon=\"chevron-down\" :class=\"$style.arrow\" />\n\t\t\t<font-awesome-icon :class=\"$style.arrow\" icon=\"chevron-up\" v-else />\n\t\t</div>\n\t</div>\n</template>\n\n<style lang=\"scss\" module>\n.triggerIcon {\n\tcolor: var(--color-primary);\n\tmargin-left: var(--spacing-3xs);\n}\n.category {\n\tfont-size: var(--font-size-s);\n\tfont-weight: var(--font-weight-bold);\n\tline-height: var(--font-line-height-compact);\n\tpadding: var(--spacing-2xs) var(--spacing-s);\n\tborder-bottom: 1px solid $node-creator-border-color;\n\tdisplay: flex;\n\tcursor: pointer;\n\n\tposition: relative;\n\t&::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tborder-left: 2px solid transparent;\n\t}\n\t&:hover::before {\n\t\tborder-color: $node-creator-item-hover-border-color;\n\t}\n\t&.active::before {\n\t\tborder-color: $color-primary;\n\t}\n}\n\n.name {\n\tflex-grow: 1;\n\tcolor: var(--color-text-dark);\n}\n\n.arrow {\n\tfont-size: var(--font-size-2xs);\n\twidth: 12px;\n\tcolor: $node-creator-arrow-color;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, watch, ref, getCurrentInstance } from 'vue';\nimport type { INodeCreateElement } from '@/Interface';\n\nimport { useWorkflowsStore } from '@/stores/workflows.store';\n\nimport { useKeyboardNavigation } from '../composables/useKeyboardNavigation';\nimport { useViewStacks } from '../composables/useViewStacks';\nimport ItemsRenderer from './ItemsRenderer.vue';\nimport CategoryItem from '../ItemTypes/CategoryItem.vue';\n\nexport interface Props {\n\telements: INodeCreateElement[];\n\tcategory: string;\n\tdisabled?: boolean;\n\tactiveIndex?: number;\n\tisTriggerCategory?: boolean;\n\tmouseOverTooltip?: string;\n\texpanded?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n\telements: () => [],\n});\n\nconst instance = getCurrentInstance();\n\nconst { popViewStack } = useViewStacks();\nconst { registerKeyHook } = useKeyboardNavigation();\nconst { workflowId } = useWorkflowsStore();\n\nconst activeItemId = computed(() => useKeyboardNavigation()?.activeItemId);\nconst actionCount = computed(() => props.elements.filter(({ type }) => type === 'action').length);\nconst expanded = ref(props.expanded ?? false);\n\nfunction toggleExpanded() {\n\tsetExpanded(!expanded.value);\n}\n\nfunction setExpanded(isExpanded: boolean) {\n\texpanded.value = isExpanded;\n\n\tif (expanded.value) {\n\t\tinstance?.proxy.$telemetry.trackNodesPanel('nodeCreateList.onCategoryExpanded', {\n\t\t\tcategory_name: props.category,\n\t\t\tworkflow_id: workflowId,\n\t\t});\n\t}\n}\n\nfunction arrowRight() {\n\tif (expanded.value) return;\n\n\tsetExpanded(true);\n}\n\nfunction arrowLeft() {\n\tif (!expanded.value) {\n\t\tpopViewStack();\n\t\treturn;\n\t}\n\n\tsetExpanded(false);\n}\n\nwatch(\n\t() => props.elements,\n\t() => {\n\t\tsetExpanded(true);\n\t},\n);\n\nregisterKeyHook(`CategoryRight_${props.category}`, {\n\tkeyboardKeys: ['ArrowRight'],\n\tcondition: (type, activeItemId) => type === 'category' && props.category === activeItemId,\n\thandler: arrowRight,\n});\nregisterKeyHook(`CategoryToggle_${props.category}`, {\n\tkeyboardKeys: ['Enter'],\n\tcondition: (type, activeItemId) => type === 'category' && props.category === activeItemId,\n\thandler: toggleExpanded,\n});\n\nregisterKeyHook(`CategoryLeft_${props.category}`, {\n\tkeyboardKeys: ['ArrowLeft'],\n\tcondition: (type, activeItemId) => type === 'category' && props.category === activeItemId,\n\thandler: arrowLeft,\n});\n</script>\n\n<template>\n\t<div :class=\"$style.categorizedItemsRenderer\" :data-category-collapsed=\"!expanded\">\n\t\t<CategoryItem\n\t\t\t:class=\"$style.categoryItem\"\n\t\t\t:name=\"category\"\n\t\t\t:disabled=\"disabled\"\n\t\t\t:active=\"activeItemId === category\"\n\t\t\t:count=\"actionCount\"\n\t\t\t:expanded=\"expanded\"\n\t\t\t:isTrigger=\"isTriggerCategory\"\n\t\t\tdata-keyboard-nav-type=\"category\"\n\t\t\t:data-keyboard-nav-id=\"category\"\n\t\t\t@click=\"toggleExpanded\"\n\t\t>\n\t\t\t<span :class=\"$style.mouseOverTooltip\" v-if=\"mouseOverTooltip\">\n\t\t\t\t<n8n-tooltip placement=\"top\" :popper-class=\"$style.tooltipPopper\">\n\t\t\t\t\t<n8n-icon icon=\"question-circle\" size=\"small\" />\n\t\t\t\t\t<template #content>\n\t\t\t\t\t\t<div v-html=\"mouseOverTooltip\" />\n\t\t\t\t\t</template>\n\t\t\t\t</n8n-tooltip>\n\t\t\t</span>\n\t\t</CategoryItem>\n\t\t<div :class=\"$style.contentSlot\" v-if=\"expanded && actionCount > 0 && $slots.default\">\n\t\t\t<slot />\n\t\t</div>\n\t\t<!-- Pass through listeners & empty slot to ItemsRenderer -->\n\t\t<ItemsRenderer\n\t\t\tv-if=\"expanded\"\n\t\t\t:elements=\"elements\"\n\t\t\tv-on=\"$listeners\"\n\t\t\t:isTrigger=\"isTriggerCategory\"\n\t\t>\n\t\t\t<template #default> </template>\n\t\t\t<template #empty>\n\t\t\t\t<slot name=\"empty\" v-bind=\"{ elements }\" />\n\t\t\t</template>\n\t\t</ItemsRenderer>\n\t</div>\n</template>\n\n<style lang=\"scss\" module>\n.mouseOverTooltip {\n\topacity: 0;\n\tmargin-left: var(--spacing-3xs);\n\t&:hover {\n\t\tcolor: var(--color-primary);\n\t}\n\n\t.categorizedItemsRenderer:hover & {\n\t\topacity: 1;\n\t}\n}\n.tooltipPopper {\n\tmax-width: 260px;\n}\n.contentSlot {\n\tpadding: 0 var(--spacing-s) var(--spacing-3xs);\n\tmargin-top: var(--spacing-xs);\n}\n.categorizedItemsRenderer {\n\tpadding-bottom: var(--spacing-s);\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, getCurrentInstance, onMounted, defineComponent } from 'vue';\nimport type { VNode, PropType } from 'vue';\nimport type {\n\tINodeCreateElement,\n\tActionTypeDescription,\n\tNodeFilterType,\n\tIUpdateInformation,\n\tActionCreateElement,\n} from '@/Interface';\nimport {\n\tHTTP_REQUEST_NODE_TYPE,\n\tREGULAR_NODE_CREATOR_VIEW,\n\tTRIGGER_NODE_CREATOR_VIEW,\n\tCUSTOM_API_CALL_KEY,\n\tAUTO_INSERT_ACTION_EXPERIMENT,\n} from '@/constants';\n\nimport { usePostHog } from '@/stores/posthog.store';\nimport { useUsersStore } from '@/stores/users.store';\nimport { useWebhooksStore } from '@/stores/webhooks.store';\nimport { runExternalHook } from '@/utils';\n\nimport { useActions } from '../composables/useActions';\nimport { useKeyboardNavigation } from '../composables/useKeyboardNavigation';\nimport { useViewStacks } from '../composables/useViewStacks';\n\nimport ItemsRenderer from '../Renderers/ItemsRenderer.vue';\nimport CategorizedItemsRenderer from '../Renderers/CategorizedItemsRenderer.vue';\n\nconst emit = defineEmits({\n\tnodeTypeSelected: (nodeTypes: string[]) => true,\n});\nconst instance = getCurrentInstance();\nconst telemetry = instance?.proxy.$telemetry;\n\nconst { userActivated } = useUsersStore();\nconst { popViewStack, updateCurrentViewStack } = useViewStacks();\nconst { registerKeyHook } = useKeyboardNavigation();\nconst {\n\tgetNodeTypesWithManualTrigger,\n\tsetAddedNodeActionParameters,\n\tgetActionData,\n\tgetPlaceholderTriggerActions,\n\tparseCategoryActions,\n\tactionsCategoryLocales,\n} = useActions();\n\n// We only inject labels if search is empty\nconst parsedTriggerActions = computed(() =>\n\tparseActions(actions.value, actionsCategoryLocales.value.triggers, false),\n);\nconst parsedActionActions = computed(() =>\n\tparseActions(actions.value, actionsCategoryLocales.value.actions, !search.value),\n);\nconst parsedTriggerActionsBaseline = computed(() =>\n\tparseActions(\n\t\tuseViewStacks().activeViewStack.baselineItems || [],\n\t\tactionsCategoryLocales.value.triggers,\n\t\tfalse,\n\t),\n);\nconst parsedActionActionsBaseline = computed(() =>\n\tparseActions(\n\t\tuseViewStacks().activeViewStack.baselineItems || [],\n\t\tactionsCategoryLocales.value.actions,\n\t\t!search.value,\n\t),\n);\n\n// Because the placeholder items are inserted into the slots, we need to\n// add the placeholder count to the category name manually\nconst triggerCategoryName = computed(() =>\n\tparsedTriggerActions.value.length || search.value\n\t\t? actionsCategoryLocales.value.triggers\n\t\t: `${actionsCategoryLocales.value.triggers} (${placeholderTriggerActions.length})`,\n);\n\nconst actions = computed(() => {\n\treturn (useViewStacks().activeViewStack.items || []).filter(\n\t\t(p) => (p as ActionCreateElement).properties.actionKey !== CUSTOM_API_CALL_KEY,\n\t);\n});\n\nconst search = computed(() => useViewStacks().activeViewStack.search);\n\nconst subcategory = computed(() => useViewStacks().activeViewStack.subcategory);\n\nconst rootView = computed(() => useViewStacks().activeViewStack.rootView);\n\nconst placeholderTriggerActions = getPlaceholderTriggerActions(subcategory.value || '');\n\nconst hasNoTriggerActions = computed(\n\t() =>\n\t\tparseCategoryActions(\n\t\t\tuseViewStacks().activeViewStack.baselineItems || [],\n\t\t\tactionsCategoryLocales.value.triggers,\n\t\t\t!search.value,\n\t\t).length === 0,\n);\n\nconst containsAPIAction = computed(() => {\n\tconst actions = useViewStacks().activeViewStack.baselineItems || [];\n\n\tconst result = actions.some((p) => {\n\t\treturn ((p as ActionCreateElement).properties.actionKey ?? '') === CUSTOM_API_CALL_KEY;\n\t});\n\n\treturn result === true;\n});\n\nconst isTriggerRootView = computed(() => rootView.value === TRIGGER_NODE_CREATOR_VIEW);\n\nregisterKeyHook('ActionsKeyRight', {\n\tkeyboardKeys: ['ArrowRight', 'Enter'],\n\tcondition: (type) => type === 'action',\n\thandler: onKeySelect,\n});\n\nregisterKeyHook('ActionsKeyLeft', {\n\tkeyboardKeys: ['ArrowLeft'],\n\tcondition: (type) => type === 'action',\n\thandler: arrowLeft,\n});\n\nfunction parseActions(base: INodeCreateElement[], locale: string, withLabels = false) {\n\treturn parseCategoryActions(base, locale, withLabels);\n}\n\nfunction arrowLeft() {\n\tpopViewStack();\n}\n\nfunction onKeySelect(activeItemId: string) {\n\tconst mergedActions = [...actions.value, ...placeholderTriggerActions];\n\tconst activeAction = mergedActions.find((a) => a.uuid === activeItemId);\n\n\tif (activeAction) onSelected(activeAction);\n}\n\nfunction onSelected(actionCreateElement: INodeCreateElement) {\n\tconst actionData = getActionData(actionCreateElement.properties as ActionTypeDescription);\n\tconst isPlaceholderTriggerAction = placeholderTriggerActions.some(\n\t\t(p) => p.key === actionCreateElement.key,\n\t);\n\tconst includeNodeWithPlaceholderTrigger = usePostHog().isVariantEnabled(\n\t\tAUTO_INSERT_ACTION_EXPERIMENT.name,\n\t\tAUTO_INSERT_ACTION_EXPERIMENT.variant,\n\t);\n\n\tif (includeNodeWithPlaceholderTrigger && isPlaceholderTriggerAction && isTriggerRootView) {\n\t\tconst actionNode = actions.value[0].key;\n\n\t\temit('nodeTypeSelected', [actionData.key as string, actionNode]);\n\t} else {\n\t\temit('nodeTypeSelected', getNodeTypesWithManualTrigger(actionData.key));\n\t}\n\n\tif (telemetry) setAddedNodeActionParameters(actionData, telemetry, rootView.value);\n}\n\nfunction trackActionsView() {\n\tconst activeViewStack = useViewStacks().activeViewStack;\n\n\tconst trigger_action_count = (activeViewStack.baselineItems || [])?.filter((action) =>\n\t\taction.key.toLowerCase().includes('trigger'),\n\t).length;\n\n\tconst appIdentifier = [...actions.value, ...placeholderTriggerActions][0].key;\n\n\tconst trackingPayload = {\n\t\tapp_identifier: appIdentifier,\n\t\tactions: (activeViewStack.baselineItems || [])?.map(\n\t\t\t(action) => (action as ActionCreateElement).properties.displayName,\n\t\t),\n\t\tregular_action_count: (activeViewStack.baselineItems || [])?.length - trigger_action_count,\n\t\ttrigger_action_count,\n\t};\n\n\tvoid runExternalHook('nodeCreateList.onViewActions', useWebhooksStore(), trackingPayload);\n\ttelemetry?.trackNodesPanel('nodeCreateList.onViewActions', trackingPayload);\n}\n\nfunction resetSearch() {\n\tupdateCurrentViewStack({ search: '' });\n}\n\nfunction addHttpNode() {\n\tconst updateData = {\n\t\tname: '',\n\t\tkey: HTTP_REQUEST_NODE_TYPE,\n\t\tvalue: {\n\t\t\tauthentication: 'predefinedCredentialType',\n\t\t},\n\t} as IUpdateInformation;\n\n\temit('nodeTypeSelected', [HTTP_REQUEST_NODE_TYPE]);\n\tif (telemetry) setAddedNodeActionParameters(updateData);\n\n\tconst app_identifier = actions.value[0].key;\n\tvoid runExternalHook('nodeCreateList.onActionsCustmAPIClicked', useWebhooksStore(), {\n\t\tapp_identifier,\n\t});\n\ttelemetry?.trackNodesPanel('nodeCreateList.onActionsCustmAPIClicked', { app_identifier });\n}\n\n// Anonymous component to handle triggers and actions rendering order\nconst OrderSwitcher = defineComponent({\n\tprops: {\n\t\trootView: {\n\t\t\ttype: String as PropType<NodeFilterType>,\n\t\t},\n\t},\n\trender(h): VNode {\n\t\tconst triggers = this.$slots?.triggers?.[0];\n\t\tconst actions = this.$slots?.actions?.[0];\n\n\t\treturn h(\n\t\t\t'div',\n\t\t\t{},\n\t\t\tthis.rootView === REGULAR_NODE_CREATOR_VIEW ? [actions, triggers] : [triggers, actions],\n\t\t);\n\t},\n});\n\nonMounted(() => {\n\ttrackActionsView();\n});\n</script>\n\n<template>\n\t<div :class=\"$style.container\">\n\t\t<OrderSwitcher :rootView=\"rootView\">\n\t\t\t<template #triggers v-if=\"isTriggerRootView || parsedTriggerActionsBaseline.length !== 0\">\n\t\t\t\t<!-- Triggers Category -->\n\t\t\t\t<CategorizedItemsRenderer\n\t\t\t\t\t:elements=\"parsedTriggerActions\"\n\t\t\t\t\t:category=\"triggerCategoryName\"\n\t\t\t\t\t:mouseOverTooltip=\"$locale.baseText('nodeCreator.actionsTooltip.triggersStartWorkflow')\"\n\t\t\t\t\tisTriggerCategory\n\t\t\t\t\t:expanded=\"isTriggerRootView || parsedActionActions.length === 0\"\n\t\t\t\t\t@selected=\"onSelected\"\n\t\t\t\t>\n\t\t\t\t\t<!-- Empty state -->\n\t\t\t\t\t<template #empty>\n\t\t\t\t\t\t<template v-if=\"hasNoTriggerActions\">\n\t\t\t\t\t\t\t<n8n-callout\n\t\t\t\t\t\t\t\ttheme=\"info\"\n\t\t\t\t\t\t\t\ticonless\n\t\t\t\t\t\t\t\tslim\n\t\t\t\t\t\t\t\tdata-test-id=\"actions-panel-no-triggers-callout\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-html=\"\n\t\t\t\t\t\t\t\t\t\t$locale.baseText('nodeCreator.actionsCallout.noTriggerItems', {\n\t\t\t\t\t\t\t\t\t\t\tinterpolate: { nodeName: subcategory },\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</n8n-callout>\n\t\t\t\t\t\t\t<ItemsRenderer @selected=\"onSelected\" :elements=\"placeholderTriggerActions\" />\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t:class=\"$style.resetSearch\"\n\t\t\t\t\t\t\t\tv-html=\"$locale.baseText('nodeCreator.actionsCategory.noMatchingTriggers')\"\n\t\t\t\t\t\t\t\t@click=\"resetSearch\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</CategorizedItemsRenderer>\n\t\t\t</template>\n\t\t\t<template #actions v-if=\"!isTriggerRootView || parsedActionActionsBaseline.length !== 0\">\n\t\t\t\t<!-- Actions Category -->\n\t\t\t\t<CategorizedItemsRenderer\n\t\t\t\t\t:elements=\"parsedActionActions\"\n\t\t\t\t\t:category=\"actionsCategoryLocales.actions\"\n\t\t\t\t\t:mouseOverTooltip=\"$locale.baseText('nodeCreator.actionsTooltip.actionsPerformStep')\"\n\t\t\t\t\t:expanded=\"!isTriggerRootView || parsedTriggerActions.length === 0\"\n\t\t\t\t\t@selected=\"onSelected\"\n\t\t\t\t>\n\t\t\t\t\t<template>\n\t\t\t\t\t\t<n8n-callout\n\t\t\t\t\t\t\ttheme=\"info\"\n\t\t\t\t\t\t\ticonless\n\t\t\t\t\t\t\tv-if=\"!userActivated && isTriggerRootView\"\n\t\t\t\t\t\t\tslim\n\t\t\t\t\t\t\tdata-test-id=\"actions-panel-activation-callout\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span v-html=\"$locale.baseText('nodeCreator.actionsCallout.triggersStartWorkflow')\" />\n\t\t\t\t\t\t</n8n-callout>\n\t\t\t\t\t</template>\n\t\t\t\t\t<!-- Empty state -->\n\t\t\t\t\t<template #empty>\n\t\t\t\t\t\t<n8n-info-tip theme=\"info\" type=\"note\" v-if=\"!search\" :class=\"$style.actionsEmpty\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tv-html=\"\n\t\t\t\t\t\t\t\t\t$locale.baseText('nodeCreator.actionsCallout.noActionItems', {\n\t\t\t\t\t\t\t\t\t\tinterpolate: { nodeName: subcategory },\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</n8n-info-tip>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t:class=\"$style.resetSearch\"\n\t\t\t\t\t\t\t\tv-html=\"$locale.baseText('nodeCreator.actionsCategory.noMatchingActions')\"\n\t\t\t\t\t\t\t\t@click=\"resetSearch\"\n\t\t\t\t\t\t\t\tdata-test-id=\"actions-panel-no-matching-actions\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</CategorizedItemsRenderer>\n\t\t\t</template>\n\t\t</OrderSwitcher>\n\t\t<div :class=\"$style.apiHint\" v-if=\"containsAPIAction\">\n\t\t\t<span\n\t\t\t\t@click.prevent=\"addHttpNode\"\n\t\t\t\tv-html=\"\n\t\t\t\t\t$locale.baseText('nodeCreator.actionsList.apiCall', {\n\t\t\t\t\t\tinterpolate: { node: subcategory },\n\t\t\t\t\t})\n\t\t\t\t\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<style lang=\"scss\" module>\n.container {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding-bottom: var(--spacing-3xl);\n}\n\n.resetSearch {\n\tcursor: pointer;\n\tline-height: var(--font-line-height-regular);\n\tfont-weight: var(--font-weight-regular);\n\tfont-size: var(--font-size-2xs);\n\tpadding: var(--spacing-2xs) var(--spacing-s) 0;\n\tcolor: var(--color-text-base);\n\n\ti {\n\t\tfont-weight: var(--font-weight-bold);\n\t\tfont-style: normal;\n\t\ttext-decoration: underline;\n\t}\n}\n.actionsEmpty {\n\tpadding: var(--spacing-2xs) var(--spacing-xs) var(--spacing-s);\n\tfont-weight: var(--font-weight-regular);\n\n\tstrong {\n\t\tfont-weight: var(--font-weight-bold);\n\t}\n}\n.apiHint {\n\tpadding: 0 var(--spacing-s) var(--spacing-xl);\n\tfont-size: var(--font-size-2xs);\n\tcolor: var(--color-text-base);\n\tline-height: var(--font-line-height-regular);\n\tz-index: 1;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { camelCase } from 'lodash-es';\nimport { getCurrentInstance, computed } from 'vue';\nimport type { INodeCreateElement, NodeFilterType } from '@/Interface';\nimport { TRIGGER_NODE_CREATOR_VIEW, HTTP_REQUEST_NODE_TYPE, WEBHOOK_NODE_TYPE } from '@/constants';\n\nimport type { BaseTextKey } from '@/plugins/i18n';\nimport { useRootStore } from '@/stores/n8nRoot.store';\nimport { useNodeCreatorStore } from '@/stores/nodeCreator.store';\n\nimport { TriggerView, RegularView } from '../viewsData';\nimport { transformNodeType } from '../utils';\nimport { useViewStacks } from '../composables/useViewStacks';\nimport { useActions } from '../composables/useActions';\nimport { useKeyboardNavigation } from '../composables/useKeyboardNavigation';\nimport ItemsRenderer from '../Renderers/ItemsRenderer.vue';\nimport CategorizedItemsRenderer from '../Renderers/CategorizedItemsRenderer.vue';\nimport NoResults from '../Panel/NoResults.vue';\n\nexport interface Props {\n\trootView: 'trigger' | 'action';\n}\n\nconst emit = defineEmits({\n\tnodeTypeSelected: (nodeTypes: string[]) => true,\n});\n\nconst instance = getCurrentInstance();\nconst { mergedNodes, actions } = useNodeCreatorStore();\nconst { baseUrl } = useRootStore();\nconst { getNodeTypesWithManualTrigger } = useActions();\nconst { pushViewStack, popViewStack } = useViewStacks();\n\nconst { registerKeyHook } = useKeyboardNavigation();\n\nconst activeViewStack = computed(() => useViewStacks().activeViewStack);\nconst globalSearchItemsDiff = computed(() => useViewStacks().globalSearchItemsDiff);\n\nfunction selectNodeType(nodeTypes: string[]) {\n\temit(\n\t\t'nodeTypeSelected',\n\t\tnodeTypes.length === 1 ? getNodeTypesWithManualTrigger(nodeTypes[0]) : nodeTypes,\n\t);\n}\n\nfunction onSelected(item: INodeCreateElement) {\n\tif (item.type === 'subcategory') {\n\t\tconst title = instance?.proxy.$locale.baseText(\n\t\t\t`nodeCreator.subcategoryNames.${camelCase(item.properties.title)}` as BaseTextKey,\n\t\t);\n\n\t\tpushViewStack({\n\t\t\tsubcategory: item.key,\n\t\t\ttitle,\n\t\t\tmode: 'nodes',\n\t\t\trootView: activeViewStack.value.rootView,\n\t\t\tforceIncludeNodes: item.properties.forceIncludeNodes,\n\t\t\tbaseFilter: baseSubcategoriesFilter,\n\t\t\titemsMapper: subcategoriesMapper,\n\t\t});\n\n\t\tinstance?.proxy.$telemetry.trackNodesPanel('nodeCreateList.onSubcategorySelected', {\n\t\t\tsubcategory: item.key,\n\t\t});\n\t}\n\n\tif (item.type === 'node') {\n\t\tconst nodeActions = actions?.[item.key] || [];\n\t\tif (nodeActions.length <= 1) {\n\t\t\tselectNodeType([item.key]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst icon = item.properties.iconUrl\n\t\t\t? `${baseUrl}${item.properties.iconUrl}`\n\t\t\t: item.properties.icon?.split(':')[1];\n\n\t\tconst transformedActions = nodeActions?.map((a) =>\n\t\t\ttransformNodeType(a, item.properties.displayName, 'action'),\n\t\t);\n\n\t\tpushViewStack({\n\t\t\tsubcategory: item.properties.displayName,\n\t\t\ttitle: item.properties.displayName,\n\t\t\tnodeIcon: {\n\t\t\t\tcolor: item.properties.defaults?.color || '',\n\t\t\t\ticon,\n\t\t\t\ticonType: item.properties.iconUrl ? 'file' : 'icon',\n\t\t\t},\n\n\t\t\trootView: activeViewStack.value.rootView,\n\t\t\thasSearch: true,\n\t\t\tmode: 'actions',\n\t\t\titems: transformedActions,\n\t\t});\n\t}\n\n\tif (item.type === 'view') {\n\t\tconst view =\n\t\t\titem.key === TRIGGER_NODE_CREATOR_VIEW\n\t\t\t\t? TriggerView(instance?.proxy?.$locale)\n\t\t\t\t: RegularView(instance?.proxy?.$locale);\n\n\t\tpushViewStack({\n\t\t\ttitle: view.title,\n\t\t\tsubtitle: view?.subtitle ?? '',\n\t\t\titems: view.items as INodeCreateElement[],\n\t\t\thasSearch: true,\n\t\t\trootView: view.value as NodeFilterType,\n\t\t\tmode: 'nodes',\n\t\t\t// Root search should include all nodes\n\t\t\tsearchItems: mergedNodes,\n\t\t});\n\t}\n}\n\nfunction subcategoriesMapper(item: INodeCreateElement) {\n\tif (item.type !== 'node') return item;\n\n\tconst hasTriggerGroup = item.properties.group.includes('trigger');\n\tconst nodeActions = actions?.[item.key] || [];\n\tconst hasActions = nodeActions.length > 0;\n\n\tif (hasTriggerGroup && hasActions) {\n\t\tif (item.properties?.codex) {\n\t\t\t// Store the original name in the alias so we can search for it\n\t\t\titem.properties.codex.alias = [\n\t\t\t\t...(item.properties.codex?.alias || []),\n\t\t\t\titem.properties.displayName,\n\t\t\t];\n\t\t}\n\t\titem.properties.displayName = item.properties.displayName.replace(' Trigger', '');\n\t}\n\treturn item;\n}\n\nfunction baseSubcategoriesFilter(item: INodeCreateElement) {\n\tif (item.type !== 'node') return false;\n\n\tconst hasTriggerGroup = item.properties.group.includes('trigger');\n\tconst nodeActions = actions?.[item.key] || [];\n\tconst hasActions = nodeActions.length > 0;\n\n\tconst isTriggerRootView = activeViewStack.value.rootView === TRIGGER_NODE_CREATOR_VIEW;\n\tif (isTriggerRootView) {\n\t\treturn hasActions || hasTriggerGroup;\n\t}\n\n\treturn hasActions || !hasTriggerGroup;\n}\n\nfunction arrowLeft() {\n\tpopViewStack();\n}\n\nfunction onKeySelect(activeItemId: string) {\n\tconst mergedItems = [\n\t\t...(activeViewStack.value.items || []),\n\t\t...(globalSearchItemsDiff.value || []),\n\t];\n\n\tconst item = mergedItems.find((i) => i.uuid === activeItemId);\n\tif (!item) return;\n\n\tonSelected(item as INodeCreateElement);\n}\n\nregisterKeyHook('MainViewArrowRight', {\n\tkeyboardKeys: ['ArrowRight', 'Enter'],\n\tcondition: (type) => ['subcategory', 'node', 'view'].includes(type),\n\thandler: onKeySelect,\n});\n\nregisterKeyHook('MainViewArrowLeft', {\n\tkeyboardKeys: ['ArrowLeft'],\n\tcondition: (type) => ['subcategory', 'node', 'view'].includes(type),\n\thandler: arrowLeft,\n});\n</script>\n\n<template>\n\t<span>\n\t\t<!-- Main Node Items -->\n\t\t<ItemsRenderer :elements=\"activeViewStack.items\" @selected=\"onSelected\" :class=\"$style.items\">\n\t\t\t<template\n\t\t\t\t#empty\n\t\t\t\tv-if=\"(activeViewStack.items || []).length === 0 && globalSearchItemsDiff.length === 0\"\n\t\t\t>\n\t\t\t\t<NoResults\n\t\t\t\t\t:rootView=\"activeViewStack.rootView\"\n\t\t\t\t\tshowIcon\n\t\t\t\t\tshowRequest\n\t\t\t\t\t@addWebhookNode=\"selectNodeType([WEBHOOK_NODE_TYPE])\"\n\t\t\t\t\t@addHttpNode=\"selectNodeType([HTTP_REQUEST_NODE_TYPE])\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</ItemsRenderer>\n\t\t<!-- Results in other categories -->\n\t\t<CategorizedItemsRenderer\n\t\t\tv-if=\"globalSearchItemsDiff.length > 0\"\n\t\t\t:elements=\"globalSearchItemsDiff\"\n\t\t\t:category=\"$locale.baseText('nodeCreator.categoryNames.otherCategories')\"\n\t\t\t@selected=\"onSelected\"\n\t\t>\n\t\t</CategorizedItemsRenderer>\n\t</span>\n</template>\n\n<style lang=\"scss\" module>\n.items {\n\tmargin-bottom: var(--spacing-s);\n}\n</style>\n","<script setup lang=\"ts\">\nimport { getCurrentInstance, computed, onMounted, onUnmounted, watch } from 'vue';\nimport type { INodeCreateElement } from '@/Interface';\nimport { TRIGGER_NODE_CREATOR_VIEW } from '@/constants';\n\nimport { useNodeCreatorStore } from '@/stores/nodeCreator.store';\n\nimport { TriggerView, RegularView } from '../viewsData';\nimport { useViewStacks } from '../composables/useViewStacks';\nimport { useKeyboardNavigation } from '../composables/useKeyboardNavigation';\nimport SearchBar from './SearchBar.vue';\nimport ActionsRenderer from '../Modes/ActionsMode.vue';\nimport NodesRenderer from '../Modes/NodesMode.vue';\n\nconst instance = getCurrentInstance();\n\nconst { mergedNodes } = useNodeCreatorStore();\nconst { pushViewStack, popViewStack, updateCurrentViewStack } = useViewStacks();\nconst { setActiveItemIndex, attachKeydownEvent, detachKeydownEvent } = useKeyboardNavigation();\n\nconst activeViewStack = computed(() => useViewStacks().activeViewStack);\n\nconst viewStacks = computed(() => useViewStacks().viewStacks);\n\nconst isActionsMode = computed(() => useViewStacks().activeViewStackMode === 'actions');\nconst searchPlaceholder = computed(() =>\n\tisActionsMode.value\n\t\t? instance?.proxy?.$locale.baseText('nodeCreator.actionsCategory.searchActions', {\n\t\t\t\tinterpolate: { node: activeViewStack.value.title as string },\n\t\t  })\n\t\t: instance?.proxy?.$locale.baseText('nodeCreator.searchBar.searchNodes'),\n);\n\nconst nodeCreatorView = computed(() => useNodeCreatorStore().selectedView);\n\nfunction onSearch(value: string) {\n\tif (activeViewStack.value.uuid) {\n\t\tupdateCurrentViewStack({ search: value });\n\t\tvoid setActiveItemIndex(activeViewStack.value.activeIndex ?? 0);\n\t}\n}\n\nfunction onTransitionEnd() {\n\t// For actions, set the active focus to the first action, not category\n\tconst newStackIndex = activeViewStack.value.mode === 'actions' ? 1 : 0;\n\tvoid setActiveItemIndex(activeViewStack.value.activeIndex || 0 || newStackIndex);\n}\n\nonMounted(() => {\n\tattachKeydownEvent();\n\tvoid setActiveItemIndex(activeViewStack.value.activeIndex ?? 0);\n});\n\nonUnmounted(() => {\n\tdetachKeydownEvent();\n});\n\nwatch(\n\t() => nodeCreatorView.value,\n\t(selectedView) => {\n\t\tconst view =\n\t\t\tselectedView === TRIGGER_NODE_CREATOR_VIEW\n\t\t\t\t? TriggerView(instance?.proxy?.$locale)\n\t\t\t\t: RegularView(instance?.proxy?.$locale);\n\n\t\tpushViewStack({\n\t\t\ttitle: view.title,\n\t\t\tsubtitle: view?.subtitle ?? '',\n\t\t\titems: view.items as INodeCreateElement[],\n\t\t\thasSearch: true,\n\t\t\tmode: 'nodes',\n\t\t\trootView: selectedView,\n\t\t\t// Root search should include all nodes\n\t\t\tsearchItems: mergedNodes,\n\t\t});\n\t},\n\t{ immediate: true },\n);\n\nfunction onBackButton() {\n\tpopViewStack();\n}\n</script>\n\n<template>\n\t<transition\n\t\tv-if=\"viewStacks.length > 0\"\n\t\t:name=\"`panel-slide-${activeViewStack.transitionDirection}`\"\n\t\t@afterLeave=\"onTransitionEnd\"\n\t>\n\t\t<aside :class=\"$style.nodesListPanel\" @keydown.capture.stop :key=\"`${activeViewStack.uuid}`\">\n\t\t\t<header\n\t\t\t\t:class=\"{ [$style.header]: true, [$style.hasBg]: !activeViewStack.subtitle }\"\n\t\t\t\tdata-test-id=\"nodes-list-header\"\n\t\t\t>\n\t\t\t\t<div :class=\"$style.top\">\n\t\t\t\t\t<button :class=\"$style.backButton\" @click=\"onBackButton\" v-if=\"viewStacks.length > 1\">\n\t\t\t\t\t\t<font-awesome-icon :class=\"$style.backButtonIcon\" icon=\"arrow-left\" size=\"2x\" />\n\t\t\t\t\t</button>\n\t\t\t\t\t<n8n-node-icon\n\t\t\t\t\t\tv-if=\"activeViewStack.nodeIcon\"\n\t\t\t\t\t\t:class=\"$style.nodeIcon\"\n\t\t\t\t\t\t:type=\"activeViewStack.nodeIcon.iconType || 'unknown'\"\n\t\t\t\t\t\t:src=\"activeViewStack.nodeIcon.icon\"\n\t\t\t\t\t\t:name=\"activeViewStack.nodeIcon.icon\"\n\t\t\t\t\t\t:color=\"activeViewStack.nodeIcon.color\"\n\t\t\t\t\t\t:circle=\"false\"\n\t\t\t\t\t\t:showTooltip=\"false\"\n\t\t\t\t\t\t:size=\"16\"\n\t\t\t\t\t/>\n\t\t\t\t\t<p :class=\"$style.title\" v-text=\"activeViewStack.title\" v-if=\"activeViewStack.title\" />\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tv-if=\"activeViewStack.subtitle\"\n\t\t\t\t\t:class=\"{ [$style.subtitle]: true, [$style.offsetSubtitle]: viewStacks.length > 1 }\"\n\t\t\t\t\tv-text=\"activeViewStack.subtitle\"\n\t\t\t\t/>\n\t\t\t</header>\n\t\t\t<search-bar\n\t\t\t\tv-if=\"activeViewStack.hasSearch\"\n\t\t\t\t:class=\"$style.searchBar\"\n\t\t\t\t:placeholder=\"\n\t\t\t\t\tsearchPlaceholder\n\t\t\t\t\t\t? searchPlaceholder\n\t\t\t\t\t\t: $locale.baseText('nodeCreator.searchBar.searchNodes')\n\t\t\t\t\"\n\t\t\t\t@input=\"onSearch\"\n\t\t\t\t:value=\"activeViewStack.search\"\n\t\t\t/>\n\t\t\t<div :class=\"$style.renderedItems\">\n\t\t\t\t<!-- Actions mode -->\n\t\t\t\t<ActionsRenderer v-if=\"isActionsMode && activeViewStack.subcategory\" v-on=\"$listeners\" />\n\n\t\t\t\t<!-- Nodes Mode -->\n\t\t\t\t<NodesRenderer v-else :rootView=\"nodeCreatorView\" v-on=\"$listeners\" />\n\t\t\t</div>\n\t\t</aside>\n\t</transition>\n</template>\n\n<style lang=\"scss\" module>\n:global(.panel-slide-in-leave-active),\n:global(.panel-slide-in-enter-active),\n:global(.panel-slide-out-leave-active),\n:global(.panel-slide-out-enter-active) {\n\ttransition: transform 200ms ease;\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n}\n\n:global(.panel-slide-out-enter),\n:global(.panel-slide-in-leave-to) {\n\ttransform: translateX(0);\n\tz-index: -1;\n}\n\n:global(.panel-slide-out-leave-to),\n:global(.panel-slide-in-enter) {\n\ttransform: translateX(100%);\n\t// Make sure the leaving panel stays on top\n\t// for the slide-out panel effect\n\tz-index: 1;\n}\n.backButton {\n\tbackground: transparent;\n\tborder: none;\n\tcursor: pointer;\n\tpadding: 0 var(--spacing-xs) 0 0;\n}\n\n.backButtonIcon {\n\tcolor: $node-creator-arrow-color;\n\theight: 16px;\n\tpadding: 0;\n}\n.nodeIcon {\n\t--node-icon-size: 16px;\n\tmargin-right: var(--spacing-s);\n}\n.renderedItems {\n\toverflow: auto;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tscrollbar-width: none; /* Firefox 64 */\n\tpadding-bottom: var(--spacing-xl);\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n}\n.searchBar {\n\tflex-shrink: 0;\n}\n.nodesListPanel {\n\tbackground: var(--color-background-xlight);\n\theight: 100%;\n\tbackground-color: $node-creator-background-color;\n\twidth: 385px;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&:before {\n\t\tbox-sizing: border-box;\n\t\tcontent: '';\n\t\tborder-left: 1px solid $node-creator-border-color;\n\t\twidth: 1px;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t}\n}\n.footer {\n\tfont-size: var(--font-size-2xs);\n\tcolor: var(--color-text-base);\n\tmargin: 0 var(--spacing-xs) 0;\n\tpadding: var(--spacing-4xs) 0;\n\tline-height: var(--font-line-height-regular);\n\tborder-top: 1px solid var(--color-foreground-base);\n\tz-index: 1;\n\tmargin-top: -1px;\n}\n.top {\n\tdisplay: flex;\n\talign-items: center;\n}\n.header {\n\tfont-size: var(--font-size-l);\n\tfont-weight: var(--font-weight-bold);\n\tline-height: var(--font-line-height-compact);\n\n\tpadding: var(--spacing-s) var(--spacing-s);\n\n\t&.hasBg {\n\t\tborder-bottom: $node-creator-border-color solid 1px;\n\t\tbackground-color: $node-creator-subcategory-panel-header-bacground-color;\n\t}\n}\n.title {\n\tline-height: 24px;\n\tfont-weight: var(--font-weight-bold);\n\tfont-size: var(--font-size-l);\n\n\t.hasBg & {\n\t\tfont-size: var(--font-size-s-m);\n\t\tline-height: 22px;\n\t}\n}\n.subtitle {\n\tmargin-top: var(--spacing-4xs);\n\tfont-size: var(--font-size-s);\n\tline-height: 19px;\n\tcolor: var(--color-text-base);\n\tfont-weight: var(--font-weight-regular);\n}\n.offsetSubtitle {\n\tmargin-left: calc(var(--spacing-xl) + var(--spacing-4xs));\n}\n</style>\n","<template>\n\t<div>\n\t\t<aside :class=\"{ [$style.nodeCreatorScrim]: true, [$style.active]: showScrim }\" />\n\t\t<slide-transition>\n\t\t\t<div\n\t\t\t\tv-if=\"active\"\n\t\t\t\t:class=\"$style.nodeCreator\"\n\t\t\t\tref=\"nodeCreator\"\n\t\t\t\tv-click-outside=\"onClickOutside\"\n\t\t\t\t@dragover=\"onDragOver\"\n\t\t\t\t@drop=\"onDrop\"\n\t\t\t\t@mousedown=\"onMouseDown\"\n\t\t\t\t@mouseup=\"onMouseUp\"\n\t\t\t\tdata-test-id=\"node-creator\"\n\t\t\t>\n\t\t\t\t<NodesListPanel @nodeTypeSelected=\"$listeners.nodeTypeSelected\" />\n\t\t\t</div>\n\t\t</slide-transition>\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { watch, reactive, toRefs, computed } from 'vue';\n\nimport { useNodeTypesStore } from '@/stores/nodeTypes.store';\nimport { useNodeCreatorStore } from '@/stores/nodeCreator.store';\nimport SlideTransition from '@/components/transitions/SlideTransition.vue';\n\nimport { useViewStacks } from './composables/useViewStacks';\nimport { useKeyboardNavigation } from './composables/useKeyboardNavigation';\nimport { useActionsGenerator } from './composables/useActionsGeneration';\nimport NodesListPanel from './Panel/NodesListPanel.vue';\n\nexport interface Props {\n\tactive?: boolean;\n}\n\nconst props = defineProps<Props>();\nconst { resetViewStacks } = useViewStacks();\nconst { registerKeyHook } = useKeyboardNavigation();\nconst emit = defineEmits<{\n\t(event: 'closeNodeCreator'): void;\n\t(event: 'nodeTypeSelected', value: string[]): void;\n}>();\n\nconst { setShowScrim, setActions, setMergeNodes } = useNodeCreatorStore();\nconst { generateMergedNodesAndActions } = useActionsGenerator();\n\nconst state = reactive({\n\tnodeCreator: null as HTMLElement | null,\n\tmousedownInsideEvent: null as MouseEvent | null,\n});\n\nconst showScrim = computed(() => useNodeCreatorStore().showScrim);\n\nconst viewStacksLength = computed(() => useViewStacks().viewStacks.length);\n\nfunction onClickOutside(event: Event) {\n\t// We need to prevent cases where user would click inside the node creator\n\t// and try to drag non-draggable element. In that case the click event would\n\t// be fired and the node creator would be closed. So we stop that if we detect\n\t// that the click event originated from inside the node creator. And fire click even on the\n\t// original target.\n\tif (state.mousedownInsideEvent) {\n\t\tconst clickEvent = new MouseEvent('click', {\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t});\n\t\tstate.mousedownInsideEvent.target?.dispatchEvent(clickEvent);\n\t\tstate.mousedownInsideEvent = null;\n\t\treturn;\n\t}\n\n\tif (event.type === 'click') {\n\t\temit('closeNodeCreator');\n\t}\n}\nfunction onMouseUp() {\n\tstate.mousedownInsideEvent = null;\n}\nfunction onMouseDown(event: MouseEvent) {\n\tstate.mousedownInsideEvent = event;\n}\nfunction onDragOver(event: DragEvent) {\n\tevent.preventDefault();\n}\nfunction onDrop(event: DragEvent) {\n\tif (!event.dataTransfer) {\n\t\treturn;\n\t}\n\n\tconst nodeTypeName = event.dataTransfer.getData('nodeTypeName');\n\tconst nodeCreatorBoundingRect = (state.nodeCreator as Element).getBoundingClientRect();\n\n\t// Abort drag end event propagation if dropped inside nodes panel\n\tif (\n\t\tnodeTypeName &&\n\t\tevent.pageX >= nodeCreatorBoundingRect.x &&\n\t\tevent.pageY >= nodeCreatorBoundingRect.y\n\t) {\n\t\tevent.stopPropagation();\n\t}\n}\n\nwatch(\n\t() => props.active,\n\t(isActive) => {\n\t\tif (isActive === false) {\n\t\t\tsetShowScrim(false);\n\t\t\tresetViewStacks();\n\t\t}\n\t},\n);\n\n// Close node creator when the last view stacks is closed\nwatch(viewStacksLength, (viewStacksLength) => {\n\tif (viewStacksLength === 0) {\n\t\temit('closeNodeCreator');\n\t\tsetShowScrim(false);\n\t}\n});\n\nregisterKeyHook('NodeCreatorCloseEscape', {\n\tkeyboardKeys: ['Escape'],\n\thandler: () => emit('closeNodeCreator'),\n});\nregisterKeyHook('NodeCreatorCloseTab', {\n\tkeyboardKeys: ['Tab'],\n\thandler: () => emit('closeNodeCreator'),\n});\n\nwatch(\n\t() => useNodeTypesStore().visibleNodeTypes,\n\t(nodeTypes) => {\n\t\tconst { actions, mergedNodes } = generateMergedNodesAndActions(nodeTypes);\n\n\t\tsetActions(actions);\n\t\tsetMergeNodes(mergedNodes);\n\t},\n\t{ immediate: true },\n);\nconst { nodeCreator } = toRefs(state);\n</script>\n\n<style module lang=\"scss\">\n:global(strong) {\n\tfont-weight: var(--font-weight-bold);\n}\n.nodeCreator {\n\t--node-icon-color: var(--color-text-base);\n\tposition: fixed;\n\ttop: $header-height;\n\tbottom: 0;\n\tright: 0;\n\tz-index: 200;\n\twidth: $node-creator-width;\n\tcolor: $node-creator-text-color;\n}\n\n.nodeCreatorScrim {\n\tposition: fixed;\n\ttop: $header-height;\n\tright: 0;\n\tbottom: 0;\n\tleft: $sidebar-width;\n\topacity: 0;\n\tz-index: 1;\n\tbackground: var(--color-background-dark);\n\tpointer-events: none;\n\ttransition: opacity 200ms ease-in-out;\n\n\t&.active {\n\t\topacity: 0.7;\n\t}\n}\n</style>\n"],"names":["SEQUENTIAL_BONUS","SEPARATOR_BONUS","CAMEL_BONUS","FIRST_LETTER_BONUS","LEADING_LETTER_PENALTY","MAX_LEADING_LETTER_PENALTY","UNMATCHED_LETTER_PENALTY","fuzzyMatchSimple","pattern","target","patternIdx","strIdx","patternChar","targetChar","fuzzyMatch","fuzzyMatchRecursive","patternCurIndex","targetCurrIndex","targetMatches","matches","maxMatches","nextMatch","recursionCount","recursionLimit","outScore","recursiveMatch","bestRecursiveMatches","bestRecursiveScore","firstMatch","recursiveMatches","recursiveResult","recursiveScore","matched","penalty","unmatched","i","currIdx","prevIdx","neighbor","curr","getValue","obj","prop","segments","result","sublimeSearch","filter","data","keys","results","accu","item","values","key","weight","value","v","itemMatch","match","a","b","_sfc_main$f","defineComponent","KEYBOARD_ID_ATTR","WATCHED_KEYS","useKeyboardNavigation","defineStore","selectableItems","ref","activeItemId","keysHooks","getItemType","element","getElementId","refreshSelectableItems","resolve","cleanupSelectableItems","el","executeKeyHooks","keyboardKey","activeItem","hook","onKeyDown","e","pressedKey","activeItemIndex","_a","isArrowDown","isArrowUp","nextItemIndex","setActiveItem","_b","previousIndex","_c","setActiveItemId","id","itemId","setActiveItemIndex","index","attachKeydownEvent","detachKeydownEvent","registerKeyHook","name","set","getActiveItemIndex","transformNodeType","node","subcategory","type","createElement","uuidv4","_d","CORE_NODES_CATEGORY","DEFAULT_SUBCATEGORY","subcategorizeItems","items","acc","_e","sortNodeCreateElements","nodes","displayNameA","displayNameB","searchNodes","searchFilter","trimmedFilter","useViewStacks","nodeCreatorStore","useNodeCreatorStore","viewStacks","activeStackItems","computed","stack","extendItemsWithUUID","searchBaseItems","searchBase","activeViewStack","activeViewStackMode","TRIGGER_NODE_CREATOR_VIEW","globalSearchItemsDiff","allNodes","setStackBaselineItems","subcategorizedItems","stackItems","matchedNodes","updateCurrentViewStack","uuid","pushViewStack","newStackUuid","popViewStack","currentStack","matchedIndex","s","typedKey","resetViewStacks","PLACEHOLDER_RECOMMENDED_ACTION_KEY","customNodeActionsParsers","matchedProperty","nodeTypeDescription","collection","categoryItem","getNodeTypeBase","i18n","startCase","label","category","operationsCategory","property","triggersCategory","matchingKeys","isTrigger","filteredOutItems","customParsedItem","resourceCategories","transformedNodes","option","CUSTOM_API_CALL_KEY","resourceOption","options","isSingleResource","operations","operation","operationOption","displayName","displayOptions","useActionsGenerator","generateNodeActions","filterActions","actions","action","_","arr","isPlaceholderTriggerAction","getSimplifiedNodeType","defaults","description","group","icon","iconUrl","codex","generateMergedNodesAndActions","nodeTypes","visibleNodeTypes","deepCopy","mergedNodes","app","appActions","trigger","normalizedName","triggerActions","mergedActions","TriggerView","$locale","WEBHOOK_NODE_TYPE","EMAIL_IMAP_NODE_TYPE","SCHEDULE_TRIGGER_NODE_TYPE","MANUAL_TRIGGER_NODE_TYPE","EXECUTE_WORKFLOW_TRIGGER_NODE_TYPE","OTHER_TRIGGER_NODES_SUBCATEGORY","RegularView","REGULAR_NODE_CREATOR_VIEW","TRANSFORM_DATA_SUBCATEGORY","HELPERS_SUBCATEGORY","FLOWS_CONTROL_SUBCATEGORY","FILES_SUBCATEGORY","state","reactive","focus","onInput","event","input","emit","clear","onMounted","runExternalHook","useWebhooksStore","onBeforeUnmount","inputRef","toRefs","expose","useActions","instance","getCurrentInstance","actionsCategoryLocales","getPlaceholderTriggerActions","n","transformed","localeKey","overwriteLocale","filterActionsCategory","injectActionsLabels","extendedActions","labelsSet","firstIndexMap","insertedLabels","newLabel","insertIndex","parseCategoryActions","withLabels","filteredActions","getActionData","actionItem","displayConditions","showCondition","getNodeTypesWithManualTrigger","nodeType","selectedView","openSource","workflowTriggerNodes","useWorkflowsStore","useNodeTypesStore","workflowContainsTrigger","isTriggerPanel","isStickyNode","STICKY_NODE_TYPE","NODE_CREATOR_OPEN_SOURCES","setAddedNodeActionParameters","telemetry","rootView","onWorkflowStoreAction","storeWatcher","after","setLastNodeParameters","args","trackActionSelected","payload","dragging","draggablePosition","draggableDataTransfer","shortNodeType","props","showActionArrow","hasActions","nodeActions","draggableStyle","isCommunityNode","isCommunityPackageName","onDragStart","onDragOver","x","y","getNewNodePosition","NODE_SIZE","onDragEnd","onCommunityNodeTooltipClick","subcategoryName","camelCase","actionData","isTriggerAction","LAZY_LOAD_THRESHOLD","LAZY_LOAD_ITEMS_PER_TICK","renderedItems","renderAnimationRequest","renderItems","wrappedEmit","$e","beforeEnter","enter","beforeLeave","leave","onUnmounted","watch","categoryName","itemsCount","workflowId","actionCount","expanded","toggleExpanded","setExpanded","isExpanded","arrowRight","arrowLeft","userActivated","useUsersStore","parsedTriggerActions","parseActions","parsedActionActions","search","parsedTriggerActionsBaseline","parsedActionActionsBaseline","triggerCategoryName","placeholderTriggerActions","p","hasNoTriggerActions","containsAPIAction","isTriggerRootView","onKeySelect","base","locale","activeAction","onSelected","actionCreateElement","usePostHog","AUTO_INSERT_ACTION_EXPERIMENT","actionNode","trackActionsView","trigger_action_count","trackingPayload","resetSearch","addHttpNode","updateData","HTTP_REQUEST_NODE_TYPE","app_identifier","OrderSwitcher","h","triggers","baseUrl","useRootStore","selectNodeType","title","baseSubcategoriesFilter","subcategoriesMapper","transformedActions","view","hasTriggerGroup","isActionsMode","searchPlaceholder","nodeCreatorView","onSearch","onTransitionEnd","newStackIndex","onBackButton","setShowScrim","setActions","setMergeNodes","showScrim","viewStacksLength","onClickOutside","clickEvent","onMouseUp","onMouseDown","onDrop","nodeTypeName","nodeCreatorBoundingRect","isActive","nodeCreator"],"mappings":"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"}