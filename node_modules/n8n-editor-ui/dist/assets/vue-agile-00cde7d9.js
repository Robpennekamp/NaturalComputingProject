import{o,t as a}from"./lodash-es-e1022157.js";import{y as r}from"./n8n-8025af5e.js";const d={methods:{handleMouseDown(e){this.isMouseDown=!0,e.type.indexOf("touch")!==-1&&(this.dragStartX=e.touches[0].clientX,this.dragStartY=e.touches[0].clientY),e.type.indexOf("mouse")!==-1&&(this.dragStartX=e.clientX,this.dragStartY=e.clientY)},handleMouseMove(e){let t,s;e.type.indexOf("touch")!==-1&&(t=e.touches[0].clientX,s=e.touches[0].clientY),e.type.indexOf("mouse")!==-1&&(t=e.clientX,s=e.clientY);const i=Math.abs(t-this.dragStartX),n=Math.abs(s-this.dragStartY);i>3*n&&(this.disableScroll(),this.dragDistance=t-this.dragStartX)},handleMouseUp(){this.isMouseDown=!1,this.enableScroll()},handleMouseOver(e){this.settings.autoplay&&(e==="dot"&&this.settings.pauseOnDotsHover||e==="track"&&this.settings.pauseOnHover)&&(this.isAutoplayPaused=!0)},handleMouseOut(e){this.settings.autoplay&&(e==="dot"&&this.settings.pauseOnDotsHover||e==="track"&&this.settings.pauseOnHover)&&(this.isAutoplayPaused=!1)}}},u={methods:{getWidth(){if(this.isSSR)return!1;this.widthWindow=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.widthContainer=this.$refs.list.clientWidth},htmlCollectionToArray(e){return Array.prototype.slice.call(e,0)}}},h={methods:{clearAutoPlayPause(){clearTimeout(this.autoplayTimeout),this.autoplayRemaining=null},disableAutoPlay(){clearInterval(this.autoplayInterval),this.autoplayInterval=null},disableScroll(){document.ontouchmove=e=>e.preventDefault()},enableScroll(){document.ontouchmove=()=>!0},restartAutoPlay(){this.disableAutoPlay(),this.toggleAutoPlay()},toggleAutoPlay(){const e=!this.settings.unagile&&this.settings.autoplay;!this.autoplayInterval&&e?this.autoplayInterval=setInterval(()=>{document.hidden||(this.canGoToNext?this.goToNext():this.disableAutoPlay())},this.settings.autoplaySpeed):this.disableAutoPlay()},toggleFade(){const e=!this.settings.unagile&&this.settings.fade;for(let t=0;t<this.countSlides;t++)this.slides[t].style.transition=e?"opacity "+this.settings.timing+" "+this.settings.speed+"ms":"none",this.slides[t].style.transform=e?`translate(-${t*this.widthSlide}px)`:"none"}}},c={methods:{prepareSlides(){this.slides=this.htmlCollectionToArray(this.$refs.slides.children),this.slidesCloned&&(this.slidesClonedBefore=this.htmlCollectionToArray(this.$refs.slidesClonedBefore.children),this.slidesClonedAfter=this.htmlCollectionToArray(this.$refs.slidesClonedAfter.children));for(const e of this.slidesAll)e.classList.add("agile__slide")},prepareSlidesClasses(){if(this.currentSlide===null)return!1;for(let t=0;t<this.countSlides;t++)this.slides[t].classList.remove("agile__slide--active"),this.slides[t].classList.remove("agile__slide--current");setTimeout(()=>this.slides[this.currentSlide].classList.add("agile__slide--active"),this.changeDelay);let e=this.slidesCloned?this.countSlides+this.currentSlide:this.currentSlide;this.centerMode&&(e-=Math.floor(this.settings.slidesToShow/2)-+(this.settings.slidesToShow%2===0));for(let t=Math.max(e,0);t<Math.min(e+this.settings.slidesToShow,this.countSlides);t++)this.slidesAll[t].classList.add("agile__slide--current")},prepareCarousel(){this.settings.unagile?this.translateX=0:(this.currentSlide===null&&this.countSlides&&(this.currentSlide=this.settings.initialSlide),this.currentSlide>this.countSlides&&(this.currentSlide=this.countSlides-1),this.goTo(this.currentSlide,!1,!1))}}},g={props:{asNavFor:{type:Array,default:function(){return[]}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:3e3},centerMode:{type:Boolean,default:!1},centerPadding:{type:String,default:"15%"},changeDelay:{type:Number,default:0},dots:{type:Boolean,default:!0},fade:{type:Boolean,default:!1},infinite:{type:Boolean,default:!0},initialSlide:{type:Number,default:0},mobileFirst:{type:Boolean,default:!0},navButtons:{type:Boolean,default:!0},options:{type:Object,default:()=>null},pauseOnDotsHover:{type:Boolean,default:!1},pauseOnHover:{type:Boolean,default:!0},responsive:{type:Array,default:()=>null},rtl:{type:Boolean,default:!1},slidesToScroll:{type:Number,default:1},slidesToShow:{type:Number,default:1},speed:{type:Number,default:300},swipeDistance:{type:Number,default:50},throttleDelay:{type:Number,default:500},timing:{type:String,default:"ease",validator:e=>["ease","linear","ease-in","ease-out","ease-in-out"].indexOf(e)!==-1},unagile:{type:Boolean,default:!1}},computed:{initialSettings:function(){let{options:e,...t}=this.$props;return e&&(t={...t,...e}),t.responsive&&(t.responsive=o(t.responsive,"breakpoint")),t},settings:function(){const{responsive:e,...t}=this.initialSettings;return e&&e.forEach(s=>{if(t.mobileFirst?s.breakpoint<this.widthWindow:s.breakpoint>this.widthWindow)for(const i in s.settings)t[i]=s.settings[i]}),t}}},f={created(){this.goTo=a(this.goTo,this.throttleDelay),this.getWidth=a(this.getWidth,500)}},p={watch:{currentBreakpoint(){this.$emit("breakpoint",{breakpoint:this.currentBreakpoint})},currentSlide(){this.prepareSlidesClasses(),this.autoplayStartTimestamp=this.settings.autoplay?+new Date:null,this.$emit("after-change",{currentSlide:this.currentSlide})},dragDistance(){if(this.isMouseDown){const{rtl:e}=this.settings,t=this.dragDistance*(e?-1:1);t>this.swipeDistance&&this.canGoToPrev&&(this.goToPrev(),this.handleMouseUp()),t<-1*this.swipeDistance&&this.canGoToNext&&(this.goToNext(),this.handleMouseUp())}},isAutoplayPaused(e){e?(this.remaining=this.settings.autoplaySpeed-(+new Date-this.autoplayStartTimestamp),this.disableAutoPlay(),this.clearAutoPlayPause()):this.autoplayTimeout=setTimeout(()=>{this.clearAutoPlayPause(),this.goToNext(),this.toggleAutoPlay()},this.remaining)},"settings.autoplay"(){this.toggleAutoPlay()},"settings.fade"(){this.toggleFade()},"settings.unagile"(){},widthSlide(){for(let e=0;e<this.countSlidesAll;e++)this.slidesAll[e].style.width=`${this.widthSlide}${this.widthSlide!=="auto"?"px":""}`},widthWindow(e,t){t&&(this.prepareCarousel(),this.toggleFade())}}};const v={name:"agile",mixins:[d,u,h,c,g,f,p],emits:["before-change","after-change","breakpoint"],data(){return{autoplayInterval:null,autoplayRemaining:null,autoplayStartTimestamp:null,autoplayTimeout:null,currentSlide:null,dragDistance:0,dragStartX:0,dragStartY:0,isAutoplayPaused:!1,isMouseDown:!1,slides:[],slidesClonedAfter:[],slidesClonedBefore:[],isSSR:typeof window>"u",transitionDelay:0,translateX:0,widthWindow:0,widthContainer:0}},computed:{breakpoints:function(){return this.initialSettings.responsive?this.initialSettings.responsive.map(e=>e.breakpoint):[]},canGoToPrev:function(){return this.settings.infinite||this.currentSlide>0},canGoToNext:function(){return this.settings.infinite||this.currentSlide<this.countSlides-1},countSlides:function(){return this.isSSR?this.htmlCollectionToArray(this.$slots.default).length:this.slides.length},countSlidesAll:function(){return this.slidesAll.length},currentBreakpoint:function(){const e=this.breakpoints.map(t=>t).reverse();return this.initialSettings.mobileFirst?e.find(t=>t<this.widthWindow)||0:e.find(t=>t>this.widthWindow)||null},marginX:function(){if(this.settings.unagile)return 0;let e=this.slidesCloned?this.countSlides*this.widthSlide:0;return this.settings.centerMode&&(e-=(Math.floor(this.settings.slidesToShow/2)-+(this.settings.slidesToShow%2===0))*this.widthSlide),this.settings.rtl?e:-1*e},slidesCloned:function(){return!this.settings.unagile&&!this.settings.fade&&this.settings.infinite},slidesAll:function(){return this.slidesCloned?[...this.slidesClonedBefore,...this.slides,...this.slidesClonedAfter]:this.slides},widthSlide:function(){return this.settings.unagile?"auto":this.widthContainer/this.settings.slidesToShow}},mounted(){window.addEventListener("resize",this.getWidth),this.$refs.track.addEventListener("touchstart",this.handleMouseDown),this.$refs.track.addEventListener("touchend",this.handleMouseUp),this.$refs.track.addEventListener("touchmove",this.handleMouseMove),this.$refs.track.addEventListener("mousedown",this.handleMouseDown),this.$refs.track.addEventListener("mouseup",this.handleMouseUp),this.$refs.track.addEventListener("mousemove",this.handleMouseMove),this.isSSR=!1,this.reload()},beforeUnmount(){this.destroy()},methods:{destroy(){window.removeEventListener("resize",this.getWidth),this.$refs.track.removeEventListener("touchstart",this.handleMouseDown),this.$refs.track.removeEventListener("touchend",this.handleMouseUp),this.$refs.track.removeEventListener("touchmove",this.handleMouseMove),this.$refs.track.removeEventListener("mousedown",this.handleMouseDown),this.$refs.track.removeEventListener("mouseup",this.handleMouseUp),this.$refs.track.removeEventListener("mousemove",this.handleMouseMove),this.disableAutoPlay()},getCurrentBreakpoint(){return this.currentBreakpoint},getCurrentSettings(){return this.settings},getCurrentSlide(){return this.currentSlide},getInitialSettings(){return this.initialSettings},goTo(e,t=!0,s=!1){if(this.settings.unagile)return!1;s||this.settings.asNavFor.forEach(l=>{l&&l.goTo(e,t,!0)});let i=e;t&&(this.settings.infinite&&e<0?i=this.countSlides-1:e>=this.countSlides&&(i=0),this.$emit("before-change",{currentSlide:this.currentSlide,nextSlide:i}),this.currentSlide=i,e!==i&&setTimeout(()=>{this.goTo(i,!1)},this.settings.speed));const n=this.settings.fade?0:e*this.widthSlide*this.settings.slidesToScroll;this.transitionDelay=t?this.speed:0,(this.infinite||this.currentSlide+this.slidesToShow<=this.countSlides)&&(this.translateX=this.settings.rtl?n:-1*n)},goToNext(){this.canGoToNext&&this.goTo(this.currentSlide+1)},goToPrev(){this.canGoToPrev&&this.goTo(this.currentSlide-1)},reload(){this.getWidth(),this.prepareSlides(),this.prepareCarousel(),this.toggleFade(),this.toggleAutoPlay()}}};var m=function(){var t=this,s=t._self._c;return s("div",{staticClass:"agile",class:{"agile--ssr":t.isSSR,"agile--auto-play":t.settings.autoplay,"agile--disabled":t.settings.unagile,"agile--fade":t.settings.fade&&!t.settings.unagile,"agile--rtl":t.settings.rtl,"agile--no-nav-buttons":!t.settings.navButtons},on:{touchstart:()=>{}}},[s("div",{ref:"list",staticClass:"agile__list"},[s("div",{ref:"track",staticClass:"agile__track",style:{transform:`translate(${t.translateX+t.marginX}px)`,transition:`transform ${t.settings.timing} ${t.transitionDelay}ms`},on:{mouseout:function(i){return t.handleMouseOut("track")},mouseover:function(i){return t.handleMouseOver("track")}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.slidesCloned,expression:"slidesCloned"}],ref:"slidesClonedBefore",staticClass:"agile__slides agile__slides--cloned"},[t._t("default")],2),s("div",{ref:"slides",staticClass:"agile__slides agile__slides--regular"},[t._t("default")],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.slidesCloned,expression:"slidesCloned"}],ref:"slidesClonedAfter",staticClass:"agile__slides agile__slides--cloned"},[t._t("default")],2)])]),t.$slots.caption?s("div",{staticClass:"agile__caption"},[t._t("caption")],2):t._e(),!t.settings.unagile&&(t.settings.navButtons||t.settings.dots)?s("div",{staticClass:"agile__actions"},[t.settings.navButtons&&!t.settings.unagile?s("button",{ref:"prevButton",staticClass:"agile__nav-button agile__nav-button--prev",attrs:{disabled:!t.canGoToPrev,"aria-label":"Previous",type:"button"},on:{click:function(i){t.goToPrev(),t.restartAutoPlay()}}},[t._t("prevButton",function(){return[t._v(" ← ")]})],2):t._e(),t.settings.dots&&!t.settings.unagile?s("ul",{ref:"dots",staticClass:"agile__dots"},t._l(t.countSlides,function(i){return s("li",{key:i,staticClass:"agile__dot",class:{"agile__dot--current":i-1===t.currentSlide},on:{mouseout:function(n){return t.handleMouseOut("dot")},mouseover:function(n){return t.handleMouseOver("dot")}}},[s("button",{attrs:{type:"button"},on:{click:function(n){t.goTo(i-1),t.restartAutoPlay()}}},[t._v(" "+t._s(i)+" ")])])}),0):t._e(),t.settings.navButtons&&!t.settings.unagile?s("button",{ref:"nextButton",staticClass:"agile__nav-button agile__nav-button--next",attrs:{disabled:!t.canGoToNext,"aria-label":"Next",type:"button"},on:{click:function(i){t.goToNext(),t.restartAutoPlay()}}},[t._t("nextButton",function(){return[t._v(" → ")]})],2):t._e()]):t._e()])},y=[],S=r(v,m,y,!1,null,null,null,null);const _=S.exports,w=e=>{e.component("agile",_)},C={install:w};export{C as V};
//# sourceMappingURL=vue-agile-00cde7d9.js.map
