import{cF as m}from"./ParameterInputList-a8424193.js";import{d as u}from"./vendor-df0f493f.js";import{D as o,a8 as n,m as p,y as c}from"./n8n-8025af5e.js";import"./pinia-ba86f1d8.js";import"./axios-f993d27a.js";import"./flatted-8b14da7d.js";import"./vue-i18n-b439dfd7.js";import"./en-bbe6b9d4.js";import"./dateformat-ef117725.js";import"./lodash-es-e1022157.js";import"./vue-typed-mixins-a25478b2.js";import"./codemirror-lang-html-n8n-728c3977.js";import"./@jsplumb/browser-ui-ddea9532.js";import"./@jsplumb/core-75ba1e73.js";import"./@jsplumb/util-79bcf4d9.js";import"./@jsplumb/common-fe415eb9.js";import"./@jsplumb/connector-bezier-c9c16c6b.js";import"./uuid-cf522c50.js";import"./codemirror-lang-n8n-expression-0036beb8.js";import"./luxon-3d1ae2f1.js";import"./fast-json-stable-stringify-0e965c3b.js";import"./esprima-next-d1b163ef.js";import"./prettier-50ab9e24.js";import"./@fortawesome/fontawesome-svg-core-a6b9645d.js";const d=u({name:"FixedCollectionParameter",props:{nodeValues:{type:Object,required:!0},parameter:{type:Object,required:!0},path:{type:String,required:!0},values:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},components:{ParameterInputList:async()=>m(()=>import("./ParameterInputList-a8424193.js").then(t=>t.ed),["assets/ParameterInputList-a8424193.js","assets/n8n-8025af5e.js","assets/vendor-df0f493f.js","assets/@fortawesome/fontawesome-svg-core-a6b9645d.js","assets/luxon-3d1ae2f1.js","assets/esprima-next-d1b163ef.js","assets/n8n-0d5db0d6.css","assets/pinia-ba86f1d8.js","assets/axios-f993d27a.js","assets/flatted-8b14da7d.js","assets/vue-i18n-b439dfd7.js","assets/en-bbe6b9d4.js","assets/dateformat-ef117725.js","assets/lodash-es-e1022157.js","assets/vue-typed-mixins-a25478b2.js","assets/codemirror-lang-html-n8n-728c3977.js","assets/@jsplumb/browser-ui-ddea9532.js","assets/@jsplumb/core-75ba1e73.js","assets/@jsplumb/util-79bcf4d9.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-c9c16c6b.js","assets/uuid-cf522c50.js","assets/codemirror-lang-n8n-expression-0036beb8.js","assets/fast-json-stable-stringify-0e965c3b.js","assets/prettier-50ab9e24.js","assets/ParameterInputList-516be1d9.css"])},data(){return{selectedOption:void 0,mutableValues:{}}},watch:{values:{handler(t){this.mutableValues=o(t)},deep:!0}},created(){this.mutableValues=o(this.values)},computed:{getPlaceholderText(){const t=this.$locale.nodeText().placeholder(this.parameter,this.path);return t||this.$locale.baseText("fixedCollectionParameter.choose")},getProperties(){const t=[];let e;for(const a of this.propertyNames)e=this.getOptionProperties(a),e!==void 0&&t.push(e);return t},multipleValues(){var t;return!!((t=this.parameter.typeOptions)!=null&&t.multipleValues)},parameterOptions(){return this.multipleValues&&n(this.parameter.options)?this.parameter.options:this.parameter.options.filter(t=>!this.propertyNames.includes(t.name))},propertyNames(){return Object.keys(this.mutableValues||{})},sortable(){var t;return!!((t=this.parameter.typeOptions)!=null&&t.sortable)}},methods:{deleteOption(t,e){const a=this.mutableValues[t];!a||a.length>1?this.$emit("valueChanged",{name:this.getPropertyPath(t,e),value:void 0}):this.$emit("valueChanged",{name:this.getPropertyPath(t),value:void 0})},getPropertyPath(t,e){return`${this.path}.${t}`+(e!==void 0?`[${e}]`:"")},getOptionProperties(t){if(n(this.parameter.options)){for(const e of this.parameter.options)if(e.name===t)return e}},moveOptionDown(t,e){Array.isArray(this.mutableValues[t])&&this.mutableValues[t].splice(e+1,0,this.mutableValues[t].splice(e,1)[0]);const a={name:this.getPropertyPath(t),value:this.mutableValues[t]};this.$emit("valueChanged",a)},moveOptionUp(t,e){var i;Array.isArray(this.mutableValues[t])&&((i=this.mutableValues)==null||i[t].splice(e-1,0,this.mutableValues[t].splice(e,1)[0]));const a={name:this.getPropertyPath(t),value:this.mutableValues[t]};this.$emit("valueChanged",a)},optionSelected(t){const e=this.getOptionProperties(t);if(e===void 0)return;const a=`${this.path}.${e.name}`,i={};for(const s of e.values)s.type==="fixedCollection"&&s.typeOptions!==void 0&&s.typeOptions.multipleValues===!0?i[s.name]={}:s.typeOptions!==void 0&&s.typeOptions.multipleValues===!0?(i[s.name]=p(this.nodeValues,`${this.path}.${s.name}`,[]),Array.isArray(s.default)?i[s.name].push(...o(s.default)):s.default!==""&&typeof s.default!="object"&&i[s.name].push(o(s.default))):i[s.name]=o(s.default);let r;this.multipleValues?(r=p(this.nodeValues,a,[]),r.push(i)):r=i;const l={name:a,value:r};this.$emit("valueChanged",l),this.selectedOption=void 0},valueChanged(t){this.$emit("valueChanged",t)}}});var h=function(){var e=this,a=e._self._c;return e._self._setupProxy,a("div",{staticClass:"fixed-collection-parameter",on:{keydown:function(i){i.stopPropagation()}}},[e.getProperties.length===0?a("div",{staticClass:"no-items-exist"},[a("n8n-text",{attrs:{size:"small"}},[e._v(e._s(e.$locale.baseText("fixedCollectionParameter.currentlyNoItemsExist")))])],1):e._e(),e._l(e.getProperties,function(i){return a("div",{key:i.name,staticClass:"fixed-collection-parameter-property"},[i.displayName!==""&&e.parameter.options&&e.parameter.options.length!==1?a("n8n-input-label",{attrs:{label:e.$locale.nodeText().inputLabelDisplayName(i,e.path),underline:!0,size:"small",color:"text-dark"}}):e._e(),e.multipleValues?a("div",e._l(e.mutableValues[i.name],function(r,l){return a("div",{key:i.name+l,staticClass:"parameter-item"},[a("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():a("div",{staticClass:"delete-option"},[a("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:e.$locale.baseText("fixedCollectionParameter.deleteItem")},on:{click:function(s){return e.deleteOption(i.name,l)}}}),e.sortable?a("div",{staticClass:"sort-icon"},[l!==0?a("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-up",title:e.$locale.baseText("fixedCollectionParameter.moveUp")},on:{click:function(s){return e.moveOptionUp(i.name,l)}}}):e._e(),l!==e.mutableValues[i.name].length-1?a("font-awesome-icon",{staticClass:"clickable",attrs:{icon:"angle-down",title:e.$locale.baseText("fixedCollectionParameter.moveDown")},on:{click:function(s){return e.moveOptionDown(i.name,l)}}}):e._e()],1):e._e()],1),a("parameter-input-list",{attrs:{parameters:i.values,nodeValues:e.nodeValues,path:e.getPropertyPath(i.name,l),hideDelete:!0,isReadOnly:e.isReadOnly},on:{valueChanged:e.valueChanged}})],1)])}),0):a("div",{staticClass:"parameter-item"},[a("div",{staticClass:"parameter-item-wrapper"},[e.isReadOnly?e._e():a("div",{staticClass:"delete-option"},[a("font-awesome-icon",{staticClass:"reset-icon clickable",attrs:{icon:"trash",title:e.$locale.baseText("fixedCollectionParameter.deleteItem")},on:{click:function(r){return e.deleteOption(i.name)}}})],1),a("parameter-input-list",{staticClass:"parameter-item",attrs:{parameters:i.values,nodeValues:e.nodeValues,path:e.getPropertyPath(i.name),isReadOnly:e.isReadOnly,hideDelete:!0},on:{valueChanged:e.valueChanged}})],1)])],1)}),e.parameterOptions.length>0&&!e.isReadOnly?a("div",[e.parameter.options.length===1?a("n8n-button",{attrs:{type:"tertiary",block:"",label:e.getPlaceholderText},on:{click:function(i){return e.optionSelected(e.parameter.options[0].name)}}}):a("div",{staticClass:"add-option"},[a("n8n-select",{attrs:{placeholder:e.getPlaceholderText,size:"small",filterable:""},on:{change:e.optionSelected},model:{value:e.selectedOption,callback:function(i){e.selectedOption=i},expression:"selectedOption"}},e._l(e.parameterOptions,function(i){return a("n8n-option",{key:i.name,attrs:{label:e.$locale.nodeText().collectionOptionDisplayName(e.parameter,i,e.path),value:i.name}})}),1)],1)],1):e._e()],2)},v=[],f=c(d,h,v,!1,null,"a31e0198",null,null);const U=f.exports;export{U as default};
//# sourceMappingURL=FixedCollectionParameter-fa67eef9.js.map
